var y6=Object.defineProperty;var _6=(t,e,s)=>e in t?y6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Ot=(t,e,s)=>_6(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function E1(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const is={},Uc=[],zo=()=>{},x6=()=>!1,T0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),C1=t=>t.startsWith("onUpdate:"),cn=Object.assign,S1=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},k6=Object.prototype.hasOwnProperty,ds=(t,e)=>k6.call(t,e),gt=Array.isArray,qc=t=>nf(t)==="[object Map]",Su=t=>nf(t)==="[object Set]",H2=t=>nf(t)==="[object Date]",Pt=t=>typeof t=="function",Ys=t=>typeof t=="string",ko=t=>typeof t=="symbol",_s=t=>t!==null&&typeof t=="object",mI=t=>(_s(t)||Pt(t))&&Pt(t.then)&&Pt(t.catch),fI=Object.prototype.toString,nf=t=>fI.call(t),w6=t=>nf(t).slice(8,-1),pI=t=>nf(t)==="[object Object]",T1=t=>Ys(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Od=E1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A0=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},E6=/-(\w)/g,Vr=A0(t=>t.replace(E6,(e,s)=>s?s.toUpperCase():"")),C6=/\B([A-Z])/g,Mi=A0(t=>t.replace(C6,"-$1").toLowerCase()),I0=A0(t=>t.charAt(0).toUpperCase()+t.slice(1)),ub=A0(t=>t?`on${I0(t)}`:""),_r=(t,e)=>!Object.is(t,e),Zp=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},hI=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},xh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},S6=t=>{const e=Ys(t)?Number(t):NaN;return isNaN(e)?t:e};let G2;const P0=()=>G2||(G2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yt(t){if(gt(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=Ys(n)?P6(n):yt(n);if(r)for(const o in r)e[o]=r[o]}return e}else if(Ys(t)||_s(t))return t}const T6=/;(?![^(]*\))/g,A6=/:([^]+)/,I6=/\/\*[^]*?\*\//g;function P6(t){const e={};return t.replace(I6,"").split(T6).forEach(s=>{if(s){const n=s.split(A6);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function K(t){let e="";if(Ys(t))e=t;else if(gt(t))for(let s=0;s<t.length;s++){const n=K(t[s]);n&&(e+=n+" ")}else if(_s(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const M6="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$6=E1(M6);function gI(t){return!!t||t===""}function R6(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=rf(t[n],e[n]);return s}function rf(t,e){if(t===e)return!0;let s=H2(t),n=H2(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=ko(t),n=ko(e),s||n)return t===e;if(s=gt(t),n=gt(e),s||n)return s&&n?R6(t,e):!1;if(s=_s(t),n=_s(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const i in t){const c=t.hasOwnProperty(i),u=e.hasOwnProperty(i);if(c&&!u||!c&&u||!rf(t[i],e[i]))return!1}}return String(t)===String(e)}function A1(t,e){return t.findIndex(s=>rf(s,e))}const vI=t=>!!(t&&t.__v_isRef===!0),_=t=>Ys(t)?t:t==null?"":gt(t)||_s(t)&&(t.toString===fI||!Pt(t.toString))?vI(t)?_(t.value):JSON.stringify(t,bI,2):String(t),bI=(t,e)=>vI(e)?bI(t,e.value):qc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],o)=>(s[db(n,o)+" =>"]=r,s),{})}:Su(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>db(s))}:ko(e)?db(e):_s(e)&&!gt(e)&&!pI(e)?String(e):e,db=(t,e="")=>{var s;return ko(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ur;class yI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ur,!e&&ur&&(this.index=(ur.scopes||(ur.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ur;try{return ur=this,e()}finally{ur=s}}}on(){ur=this}off(){ur=this.parent}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function I1(t){return new yI(t)}function P1(){return ur}function _I(t,e=!1){ur&&ur.cleanups.push(t)}let Cs;const mb=new WeakSet;class xI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ur&&ur.active&&ur.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mb.has(this)&&(mb.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,j2(this),EI(this);const e=Cs,s=_o;Cs=this,_o=!0;try{return this.fn()}finally{CI(this),Cs=e,_o=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)R1(e);this.deps=this.depsTail=void 0,j2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mb.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Oy(this)&&this.run()}get dirty(){return Oy(this)}}let kI=0,Fd,Ud;function wI(t,e=!1){if(t.flags|=8,e){t.next=Ud,Ud=t;return}t.next=Fd,Fd=t}function M1(){kI++}function $1(){if(--kI>0)return;if(Ud){let e=Ud;for(Ud=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Fd;){let e=Fd;for(Fd=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function EI(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function CI(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),R1(n),L6(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Oy(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(SI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function SI(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===vm))return;t.globalVersion=vm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Oy(t)){t.flags&=-3;return}const s=Cs,n=_o;Cs=t,_o=!0;try{EI(t);const r=t.fn(t._value);(e.version===0||_r(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Cs=s,_o=n,CI(t),t.flags&=-3}}function R1(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)R1(o,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function L6(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let _o=!0;const TI=[];function Fa(){TI.push(_o),_o=!1}function Ua(){const t=TI.pop();_o=t===void 0?!0:t}function j2(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Cs;Cs=void 0;try{e()}finally{Cs=s}}}let vm=0;class D6{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class M0{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Cs||!_o||Cs===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Cs)s=this.activeLink=new D6(Cs,this),Cs.deps?(s.prevDep=Cs.depsTail,Cs.depsTail.nextDep=s,Cs.depsTail=s):Cs.deps=Cs.depsTail=s,AI(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Cs.depsTail,s.nextDep=void 0,Cs.depsTail.nextDep=s,Cs.depsTail=s,Cs.deps===s&&(Cs.deps=n)}return s}trigger(e){this.version++,vm++,this.notify(e)}notify(e){M1();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{$1()}}}function AI(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)AI(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const kh=new WeakMap,kl=Symbol(""),Fy=Symbol(""),bm=Symbol("");function Yn(t,e,s){if(_o&&Cs){let n=kh.get(t);n||kh.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new M0),r.map=n,r.key=s),r.track()}}function hi(t,e,s,n,r,o){const i=kh.get(t);if(!i){vm++;return}const c=u=>{u&&u.trigger()};if(M1(),e==="clear")i.forEach(c);else{const u=gt(t),d=u&&T1(s);if(u&&s==="length"){const m=Number(n);i.forEach((f,p)=>{(p==="length"||p===bm||!ko(p)&&p>=m)&&c(f)})}else switch((s!==void 0||i.has(void 0))&&c(i.get(s)),d&&c(i.get(bm)),e){case"add":u?d&&c(i.get("length")):(c(i.get(kl)),qc(t)&&c(i.get(Fy)));break;case"delete":u||(c(i.get(kl)),qc(t)&&c(i.get(Fy)));break;case"set":qc(t)&&c(i.get(kl));break}}$1()}function N6(t,e){const s=kh.get(t);return s&&s.get(e)}function uc(t){const e=Gt(t);return e===t?e:(Yn(e,"iterate",bm),eo(t)?e:e.map(Xn))}function $0(t){return Yn(t=Gt(t),"iterate",bm),t}const O6={__proto__:null,[Symbol.iterator](){return fb(this,Symbol.iterator,Xn)},concat(...t){return uc(this).concat(...t.map(e=>gt(e)?uc(e):e))},entries(){return fb(this,"entries",t=>(t[1]=Xn(t[1]),t))},every(t,e){return ai(this,"every",t,e,void 0,arguments)},filter(t,e){return ai(this,"filter",t,e,s=>s.map(Xn),arguments)},find(t,e){return ai(this,"find",t,e,Xn,arguments)},findIndex(t,e){return ai(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ai(this,"findLast",t,e,Xn,arguments)},findLastIndex(t,e){return ai(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ai(this,"forEach",t,e,void 0,arguments)},includes(...t){return pb(this,"includes",t)},indexOf(...t){return pb(this,"indexOf",t)},join(t){return uc(this).join(t)},lastIndexOf(...t){return pb(this,"lastIndexOf",t)},map(t,e){return ai(this,"map",t,e,void 0,arguments)},pop(){return ed(this,"pop")},push(...t){return ed(this,"push",t)},reduce(t,...e){return W2(this,"reduce",t,e)},reduceRight(t,...e){return W2(this,"reduceRight",t,e)},shift(){return ed(this,"shift")},some(t,e){return ai(this,"some",t,e,void 0,arguments)},splice(...t){return ed(this,"splice",t)},toReversed(){return uc(this).toReversed()},toSorted(t){return uc(this).toSorted(t)},toSpliced(...t){return uc(this).toSpliced(...t)},unshift(...t){return ed(this,"unshift",t)},values(){return fb(this,"values",Xn)}};function fb(t,e,s){const n=$0(t),r=n[e]();return n!==t&&!eo(t)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=s(o.value)),o}),r}const F6=Array.prototype;function ai(t,e,s,n,r,o){const i=$0(t),c=i!==t&&!eo(t),u=i[e];if(u!==F6[e]){const f=u.apply(t,o);return c?Xn(f):f}let d=s;i!==t&&(c?d=function(f,p){return s.call(this,Xn(f),p,t)}:s.length>2&&(d=function(f,p){return s.call(this,f,p,t)}));const m=u.call(i,d,n);return c&&r?r(m):m}function W2(t,e,s,n){const r=$0(t);let o=s;return r!==t&&(eo(t)?s.length>3&&(o=function(i,c,u){return s.call(this,i,c,u,t)}):o=function(i,c,u){return s.call(this,i,Xn(c),u,t)}),r[e](o,...n)}function pb(t,e,s){const n=Gt(t);Yn(n,"iterate",bm);const r=n[e](...s);return(r===-1||r===!1)&&of(s[0])?(s[0]=Gt(s[0]),n[e](...s)):r}function ed(t,e,s=[]){Fa(),M1();const n=Gt(t)[e].apply(t,s);return $1(),Ua(),n}const U6=E1("__proto__,__v_isRef,__isVue"),II=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ko));function q6(t){ko(t)||(t=String(t));const e=Gt(this);return Yn(e,"has",t),e.hasOwnProperty(t)}class PI{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(r?o?Y6:LI:o?RI:$I).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=gt(e);if(!r){let u;if(i&&(u=O6[s]))return u;if(s==="hasOwnProperty")return q6}const c=Reflect.get(e,s,ws(e)?e:n);return(ko(s)?II.has(s):U6(s))||(r||Yn(e,"get",s),o)?c:ws(c)?i&&T1(s)?c:c.value:_s(c)?r?D1(c):qa(c):c}}class MI extends PI{constructor(e=!1){super(!1,e)}set(e,s,n,r){let o=e[s];if(!this._isShallow){const u=Al(o);if(!eo(n)&&!Al(n)&&(o=Gt(o),n=Gt(n)),!gt(e)&&ws(o)&&!ws(n))return u?!1:(o.value=n,!0)}const i=gt(e)&&T1(s)?Number(s)<e.length:ds(e,s),c=Reflect.set(e,s,n,ws(e)?e:r);return e===Gt(r)&&(i?_r(n,o)&&hi(e,"set",s,n):hi(e,"add",s,n)),c}deleteProperty(e,s){const n=ds(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&hi(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!ko(s)||!II.has(s))&&Yn(e,"has",s),n}ownKeys(e){return Yn(e,"iterate",gt(e)?"length":kl),Reflect.ownKeys(e)}}class B6 extends PI{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const V6=new MI,H6=new B6,G6=new MI(!0);const Uy=t=>t,ep=t=>Reflect.getPrototypeOf(t);function j6(t,e,s){return function(...n){const r=this.__v_raw,o=Gt(r),i=qc(o),c=t==="entries"||t===Symbol.iterator&&i,u=t==="keys"&&i,d=r[t](...n),m=s?Uy:e?qy:Xn;return!e&&Yn(o,"iterate",u?Fy:kl),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:c?[m(f[0]),m(f[1])]:m(f),done:p}},[Symbol.iterator](){return this}}}}function tp(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function W6(t,e){const s={get(r){const o=this.__v_raw,i=Gt(o),c=Gt(r);t||(_r(r,c)&&Yn(i,"get",r),Yn(i,"get",c));const{has:u}=ep(i),d=e?Uy:t?qy:Xn;if(u.call(i,r))return d(o.get(r));if(u.call(i,c))return d(o.get(c));o!==i&&o.get(r)},get size(){const r=this.__v_raw;return!t&&Yn(Gt(r),"iterate",kl),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,i=Gt(o),c=Gt(r);return t||(_r(r,c)&&Yn(i,"has",r),Yn(i,"has",c)),r===c?o.has(r):o.has(r)||o.has(c)},forEach(r,o){const i=this,c=i.__v_raw,u=Gt(c),d=e?Uy:t?qy:Xn;return!t&&Yn(u,"iterate",kl),c.forEach((m,f)=>r.call(o,d(m),d(f),i))}};return cn(s,t?{add:tp("add"),set:tp("set"),delete:tp("delete"),clear:tp("clear")}:{add(r){!e&&!eo(r)&&!Al(r)&&(r=Gt(r));const o=Gt(this);return ep(o).has.call(o,r)||(o.add(r),hi(o,"add",r,r)),this},set(r,o){!e&&!eo(o)&&!Al(o)&&(o=Gt(o));const i=Gt(this),{has:c,get:u}=ep(i);let d=c.call(i,r);d||(r=Gt(r),d=c.call(i,r));const m=u.call(i,r);return i.set(r,o),d?_r(o,m)&&hi(i,"set",r,o):hi(i,"add",r,o),this},delete(r){const o=Gt(this),{has:i,get:c}=ep(o);let u=i.call(o,r);u||(r=Gt(r),u=i.call(o,r)),c&&c.call(o,r);const d=o.delete(r);return u&&hi(o,"delete",r,void 0),d},clear(){const r=Gt(this),o=r.size!==0,i=r.clear();return o&&hi(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=j6(r,t,e)}),s}function L1(t,e){const s=W6(t,e);return(n,r,o)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(ds(s,r)&&r in n?s:n,r,o)}const z6={get:L1(!1,!1)},Q6={get:L1(!1,!0)},K6={get:L1(!0,!1)};const $I=new WeakMap,RI=new WeakMap,LI=new WeakMap,Y6=new WeakMap;function X6(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function J6(t){return t.__v_skip||!Object.isExtensible(t)?0:X6(w6(t))}function qa(t){return Al(t)?t:N1(t,!1,V6,z6,$I)}function DI(t){return N1(t,!1,G6,Q6,RI)}function D1(t){return N1(t,!0,H6,K6,LI)}function N1(t,e,s,n,r){if(!_s(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const i=J6(t);if(i===0)return t;const c=new Proxy(t,i===2?n:s);return r.set(t,c),c}function _i(t){return Al(t)?_i(t.__v_raw):!!(t&&t.__v_isReactive)}function Al(t){return!!(t&&t.__v_isReadonly)}function eo(t){return!!(t&&t.__v_isShallow)}function of(t){return t?!!t.__v_raw:!1}function Gt(t){const e=t&&t.__v_raw;return e?Gt(e):t}function O1(t){return!ds(t,"__v_skip")&&Object.isExtensible(t)&&hI(t,"__v_skip",!0),t}const Xn=t=>_s(t)?qa(t):t,qy=t=>_s(t)?D1(t):t;function ws(t){return t?t.__v_isRef===!0:!1}function Y(t){return NI(t,!1)}function On(t){return NI(t,!0)}function NI(t,e){return ws(t)?t:new Z6(t,e)}class Z6{constructor(e,s){this.dep=new M0,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Gt(e),this._value=s?e:Xn(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||eo(e)||Al(e);e=n?e:Gt(e),_r(e,s)&&(this._rawValue=e,this._value=n?e:Xn(e),this.dep.trigger())}}function b(t){return ws(t)?t.value:t}function Nr(t){return Pt(t)?t():b(t)}const eO={get:(t,e,s)=>e==="__v_raw"?t:b(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return ws(r)&&!ws(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function OI(t){return _i(t)?t:new Proxy(t,eO)}class tO{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new M0,{get:n,set:r}=e(s.track.bind(s),s.trigger.bind(s));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function sO(t){return new tO(t)}function FI(t){const e=gt(t)?new Array(t.length):{};for(const s in t)e[s]=UI(t,s);return e}class nO{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return N6(Gt(this._object),this._key)}}class rO{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function oO(t,e,s){return ws(t)?t:Pt(t)?new rO(t):_s(t)&&arguments.length>1?UI(t,e,s):Y(t)}function UI(t,e,s){const n=t[e];return ws(n)?n:new nO(t,e,s)}class iO{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new M0(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Cs!==this)return wI(this,!0),!0}get value(){const e=this.dep.track();return SI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aO(t,e,s=!1){let n,r;return Pt(t)?n=t:(n=t.get,r=t.set),new iO(n,r,s)}const sp={},wh=new WeakMap;let ol;function lO(t,e=!1,s=ol){if(s){let n=wh.get(s);n||wh.set(s,n=[]),n.push(t)}}function cO(t,e,s=is){const{immediate:n,deep:r,once:o,scheduler:i,augmentJob:c,call:u}=s,d=T=>r?T:eo(T)||r===!1||r===0?gi(T,1):gi(T);let m,f,p,g,w=!1,C=!1;if(ws(t)?(f=()=>t.value,w=eo(t)):_i(t)?(f=()=>d(t),w=!0):gt(t)?(C=!0,w=t.some(T=>_i(T)||eo(T)),f=()=>t.map(T=>{if(ws(T))return T.value;if(_i(T))return d(T);if(Pt(T))return u?u(T,2):T()})):Pt(t)?e?f=u?()=>u(t,2):t:f=()=>{if(p){Fa();try{p()}finally{Ua()}}const T=ol;ol=m;try{return u?u(t,3,[g]):t(g)}finally{ol=T}}:f=zo,e&&r){const T=f,R=r===!0?1/0:r;f=()=>gi(T(),R)}const E=P1(),k=()=>{m.stop(),E&&E.active&&S1(E.effects,m)};if(o&&e){const T=e;e=(...R)=>{T(...R),k()}}let A=C?new Array(t.length).fill(sp):sp;const S=T=>{if(!(!(m.flags&1)||!m.dirty&&!T))if(e){const R=m.run();if(r||w||(C?R.some((L,P)=>_r(L,A[P])):_r(R,A))){p&&p();const L=ol;ol=m;try{const P=[R,A===sp?void 0:C&&A[0]===sp?[]:A,g];u?u(e,3,P):e(...P),A=R}finally{ol=L}}}else m.run()};return c&&c(S),m=new xI(f),m.scheduler=i?()=>i(S,!1):S,g=T=>lO(T,!1,m),p=m.onStop=()=>{const T=wh.get(m);if(T){if(u)u(T,4);else for(const R of T)R();wh.delete(m)}},e?n?S(!0):A=m.run():i?i(S.bind(null,!0),!0):m.run(),k.pause=m.pause.bind(m),k.resume=m.resume.bind(m),k.stop=k,k}function gi(t,e=1/0,s){if(e<=0||!_s(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,ws(t))gi(t.value,e,s);else if(gt(t))for(let n=0;n<t.length;n++)gi(t[n],e,s);else if(Su(t)||qc(t))t.forEach(n=>{gi(n,e,s)});else if(pI(t)){for(const n in t)gi(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&gi(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function af(t,e,s,n){try{return n?t(...n):t()}catch(r){R0(r,e,s)}}function wo(t,e,s,n){if(Pt(t)){const r=af(t,e,s,n);return r&&mI(r)&&r.catch(o=>{R0(o,e,s)}),r}if(gt(t)){const r=[];for(let o=0;o<t.length;o++)r.push(wo(t[o],e,s,n));return r}}function R0(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||is;if(e){let c=e.parent;const u=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const m=c.ec;if(m){for(let f=0;f<m.length;f++)if(m[f](t,u,d)===!1)return}c=c.parent}if(o){Fa(),af(o,null,10,[t,u,d]),Ua();return}}uO(t,s,r,n,i)}function uO(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const dr=[];let Lo=-1;const Bc=[];let Zi=null,Ec=0;const qI=Promise.resolve();let Eh=null;function vs(t){const e=Eh||qI;return t?e.then(this?t.bind(this):t):e}function dO(t){let e=Lo+1,s=dr.length;for(;e<s;){const n=e+s>>>1,r=dr[n],o=ym(r);o<t||o===t&&r.flags&2?e=n+1:s=n}return e}function F1(t){if(!(t.flags&1)){const e=ym(t),s=dr[dr.length-1];!s||!(t.flags&2)&&e>=ym(s)?dr.push(t):dr.splice(dO(e),0,t),t.flags|=1,BI()}}function BI(){Eh||(Eh=qI.then(HI))}function mO(t){gt(t)?Bc.push(...t):Zi&&t.id===-1?Zi.splice(Ec+1,0,t):t.flags&1||(Bc.push(t),t.flags|=1),BI()}function z2(t,e,s=Lo+1){for(;s<dr.length;s++){const n=dr[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;dr.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function VI(t){if(Bc.length){const e=[...new Set(Bc)].sort((s,n)=>ym(s)-ym(n));if(Bc.length=0,Zi){Zi.push(...e);return}for(Zi=e,Ec=0;Ec<Zi.length;Ec++){const s=Zi[Ec];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Zi=null,Ec=0}}const ym=t=>t.id==null?t.flags&2?-1:1/0:t.id;function HI(t){try{for(Lo=0;Lo<dr.length;Lo++){const e=dr[Lo];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),af(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Lo<dr.length;Lo++){const e=dr[Lo];e&&(e.flags&=-2)}Lo=-1,dr.length=0,VI(),Eh=null,(dr.length||Bc.length)&&HI()}}let pn=null,GI=null;function Ch(t){const e=pn;return pn=t,GI=t&&t.type.__scopeId||null,e}function Rt(t,e=pn,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&iE(-1);const o=Ch(e);let i;try{i=t(...r)}finally{Ch(o),n._d&&iE(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function Ut(t,e){if(pn===null)return t;const s=U0(pn),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,i,c,u=is]=e[r];o&&(Pt(o)&&(o={mounted:o,updated:o}),o.deep&&gi(i),n.push({dir:o,instance:s,value:i,oldValue:void 0,arg:c,modifiers:u}))}return t}function Ka(t,e,s,n){const r=t.dirs,o=e&&e.dirs;for(let i=0;i<r.length;i++){const c=r[i];o&&(c.oldValue=o[i].value);let u=c.dir[n];u&&(Fa(),wo(u,s,8,[t.el,c,t,e]),Ua())}}const jI=Symbol("_vte"),WI=t=>t.__isTeleport,qd=t=>t&&(t.disabled||t.disabled===""),Q2=t=>t&&(t.defer||t.defer===""),K2=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Y2=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,By=(t,e)=>{const s=t&&t.to;return Ys(s)?e?e(s):null:s},zI={name:"Teleport",__isTeleport:!0,process(t,e,s,n,r,o,i,c,u,d){const{mc:m,pc:f,pbc:p,o:{insert:g,querySelector:w,createText:C,createComment:E}}=d,k=qd(e.props);let{shapeFlag:A,children:S,dynamicChildren:T}=e;if(t==null){const R=e.el=C(""),L=e.anchor=C("");g(R,s,n),g(L,s,n);const P=(D,U)=>{A&16&&(r&&r.isCE&&(r.ce._teleportTarget=D),m(S,D,U,r,o,i,c,u))},I=()=>{const D=e.target=By(e.props,w),U=KI(D,e,C,g);D&&(i!=="svg"&&K2(D)?i="svg":i!=="mathml"&&Y2(D)&&(i="mathml"),k||(P(D,U),eh(e,!1)))};k&&(P(s,L),eh(e,!0)),Q2(e.props)?cr(()=>{I(),e.el.__isMounted=!0},o):I()}else{if(Q2(e.props)&&!t.el.__isMounted){cr(()=>{zI.process(t,e,s,n,r,o,i,c,u,d),delete t.el.__isMounted},o);return}e.el=t.el,e.targetStart=t.targetStart;const R=e.anchor=t.anchor,L=e.target=t.target,P=e.targetAnchor=t.targetAnchor,I=qd(t.props),D=I?s:L,U=I?R:P;if(i==="svg"||K2(L)?i="svg":(i==="mathml"||Y2(L))&&(i="mathml"),T?(p(t.dynamicChildren,T,D,r,o,i,c),V1(t,e,!0)):u||f(t,e,D,U,r,o,i,c,!1),k)I?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):np(e,s,R,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const M=e.target=By(e.props,w);M&&np(e,M,null,d,0)}else I&&np(e,L,P,d,1);eh(e,k)}},remove(t,e,s,{um:n,o:{remove:r}},o){const{shapeFlag:i,children:c,anchor:u,targetStart:d,targetAnchor:m,target:f,props:p}=t;if(f&&(r(d),r(m)),o&&r(u),i&16){const g=o||!qd(p);for(let w=0;w<c.length;w++){const C=c[w];n(C,e,s,g,!!C.dynamicChildren)}}},move:np,hydrate:fO};function np(t,e,s,{o:{insert:n},m:r},o=2){o===0&&n(t.targetAnchor,e,s);const{el:i,anchor:c,shapeFlag:u,children:d,props:m}=t,f=o===2;if(f&&n(i,e,s),(!f||qd(m))&&u&16)for(let p=0;p<d.length;p++)r(d[p],e,s,2);f&&n(c,e,s)}function fO(t,e,s,n,r,o,{o:{nextSibling:i,parentNode:c,querySelector:u,insert:d,createText:m}},f){const p=e.target=By(e.props,u);if(p){const g=qd(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(i(t),e,c(t),s,n,r,o),e.targetStart=w,e.targetAnchor=w&&i(w);else{e.anchor=i(t);let C=w;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,p._lpa=e.targetAnchor&&i(e.targetAnchor);break}}C=i(C)}e.targetAnchor||KI(p,e,m,d),f(w&&i(w),e,p,s,n,r,o)}eh(e,g)}return e.anchor&&i(e.anchor)}const QI=zI;function eh(t,e){const s=t.ctx;if(s&&s.ut){let n,r;for(e?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function KI(t,e,s,n){const r=e.targetStart=s(""),o=e.targetAnchor=s("");return r[jI]=o,t&&(n(r,t),n(o,t)),o}const ea=Symbol("_leaveCb"),rp=Symbol("_enterCb");function YI(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et(()=>{t.isMounted=!0}),xn(()=>{t.isUnmounting=!0}),t}const jr=[Function,Array],XI={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jr,onEnter:jr,onAfterEnter:jr,onEnterCancelled:jr,onBeforeLeave:jr,onLeave:jr,onAfterLeave:jr,onLeaveCancelled:jr,onBeforeAppear:jr,onAppear:jr,onAfterAppear:jr,onAppearCancelled:jr},JI=t=>{const e=t.subTree;return e.component?JI(e.component):e},pO={name:"BaseTransition",props:XI,setup(t,{slots:e}){const s=jl(),n=YI();return()=>{const r=e.default&&U1(e.default(),!0);if(!r||!r.length)return;const o=ZI(r),i=Gt(t),{mode:c}=i;if(n.isLeaving)return hb(o);const u=X2(o);if(!u)return hb(o);let d=_m(u,i,n,s,f=>d=f);u.type!==mr&&Il(u,d);let m=s.subTree&&X2(s.subTree);if(m&&m.type!==mr&&!ul(u,m)&&JI(s).type!==mr){let f=_m(m,i,n,s);if(Il(m,f),c==="out-in"&&u.type!==mr)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,m=void 0},hb(o);c==="in-out"&&u.type!==mr?f.delayLeave=(p,g,w)=>{const C=eP(n,m);C[String(m.key)]=m,p[ea]=()=>{g(),p[ea]=void 0,delete d.delayedLeave,m=void 0},d.delayedLeave=()=>{w(),delete d.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return o}}};function ZI(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==mr){e=s;break}}return e}const hO=pO;function eP(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function _m(t,e,s,n,r){const{appear:o,mode:i,persisted:c=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:m,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:w,onLeaveCancelled:C,onBeforeAppear:E,onAppear:k,onAfterAppear:A,onAppearCancelled:S}=e,T=String(t.key),R=eP(s,t),L=(D,U)=>{D&&wo(D,n,9,U)},P=(D,U)=>{const M=U[1];L(D,U),gt(D)?D.every(x=>x.length<=1)&&M():D.length<=1&&M()},I={mode:i,persisted:c,beforeEnter(D){let U=u;if(!s.isMounted)if(o)U=E||u;else return;D[ea]&&D[ea](!0);const M=R[T];M&&ul(t,M)&&M.el[ea]&&M.el[ea](),L(U,[D])},enter(D){let U=d,M=m,x=f;if(!s.isMounted)if(o)U=k||d,M=A||m,x=S||f;else return;let $=!1;const Z=D[rp]=me=>{$||($=!0,me?L(x,[D]):L(M,[D]),I.delayedLeave&&I.delayedLeave(),D[rp]=void 0)};U?P(U,[D,Z]):Z()},leave(D,U){const M=String(t.key);if(D[rp]&&D[rp](!0),s.isUnmounting)return U();L(p,[D]);let x=!1;const $=D[ea]=Z=>{x||(x=!0,U(),Z?L(C,[D]):L(w,[D]),D[ea]=void 0,R[M]===t&&delete R[M])};R[M]=t,g?P(g,[D,$]):$()},clone(D){const U=_m(D,e,s,n,r);return r&&r(U),U}};return I}function hb(t){if(L0(t))return t=_a(t),t.children=null,t}function X2(t){if(!L0(t))return WI(t.type)&&t.children?ZI(t.children):t;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&Pt(s.default))return s.default()}}function Il(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Il(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function U1(t,e=!1,s){let n=[],r=0;for(let o=0;o<t.length;o++){let i=t[o];const c=s==null?i.key:String(s)+String(i.key!=null?i.key:o);i.type===De?(i.patchFlag&128&&r++,n=n.concat(U1(i.children,e,c))):(e||i.type!==mr)&&n.push(c!=null?_a(i,{key:c}):i)}if(r>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Je(t,e){return Pt(t)?cn({name:t.name},e,{setup:t}):t}function tP(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Sh(t,e,s,n,r=!1){if(gt(t)){t.forEach((w,C)=>Sh(w,e&&(gt(e)?e[C]:e),s,n,r));return}if(Vc(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Sh(t,e,s,n.component.subTree);return}const o=n.shapeFlag&4?U0(n.component):n.el,i=r?null:o,{i:c,r:u}=t,d=e&&e.r,m=c.refs===is?c.refs={}:c.refs,f=c.setupState,p=Gt(f),g=f===is?()=>!1:w=>ds(p,w);if(d!=null&&d!==u&&(Ys(d)?(m[d]=null,g(d)&&(f[d]=null)):ws(d)&&(d.value=null)),Pt(u))af(u,c,12,[i,m]);else{const w=Ys(u),C=ws(u);if(w||C){const E=()=>{if(t.f){const k=w?g(u)?f[u]:m[u]:u.value;r?gt(k)&&S1(k,o):gt(k)?k.includes(o)||k.push(o):w?(m[u]=[o],g(u)&&(f[u]=m[u])):(u.value=[o],t.k&&(m[t.k]=u.value))}else w?(m[u]=i,g(u)&&(f[u]=i)):C&&(u.value=i,t.k&&(m[t.k]=i))};i?(E.id=-1,cr(E,s)):E()}}}P0().requestIdleCallback;P0().cancelIdleCallback;const Vc=t=>!!t.type.__asyncLoader,L0=t=>t.type.__isKeepAlive;function gO(t,e){sP(t,"a",e)}function vO(t,e){sP(t,"da",e)}function sP(t,e,s=An){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(D0(e,n,s),s){let r=s.parent;for(;r&&r.parent;)L0(r.parent.vnode)&&bO(n,e,s,r),r=r.parent}}function bO(t,e,s,n){const r=D0(e,t,n,!0);ar(()=>{S1(n[e],r)},s)}function D0(t,e,s=An,n=!1){if(s){const r=s[t]||(s[t]=[]),o=e.__weh||(e.__weh=(...i)=>{Fa();const c=cf(s),u=wo(e,s,t,i);return c(),Ua(),u});return n?r.unshift(o):r.push(o),o}}const $i=t=>(e,s=An)=>{(!wm||t==="sp")&&D0(t,(...n)=>e(...n),s)},yO=$i("bm"),Et=$i("m"),_O=$i("bu"),nP=$i("u"),xn=$i("bum"),ar=$i("um"),xO=$i("sp"),kO=$i("rtg"),wO=$i("rtc");function EO(t,e=An){D0("ec",t,e)}const CO="components";function rP(t,e){return TO(CO,t,!0,e)||t}const SO=Symbol.for("v-ndc");function TO(t,e,s=!0,n=!1){const r=pn||An;if(r){const o=r.type;{const c=hF(o,!1);if(c&&(c===e||c===Vr(e)||c===I0(Vr(e))))return o}const i=J2(r[t]||o[t],e)||J2(r.appContext[t],e);return!i&&n?o:i}}function J2(t,e){return t&&(t[e]||t[Vr(e)]||t[I0(Vr(e))])}function Ge(t,e,s,n){let r;const o=s,i=gt(t);if(i||Ys(t)){const c=i&&_i(t);let u=!1;c&&(u=!eo(t),t=$0(t)),r=new Array(t.length);for(let d=0,m=t.length;d<m;d++)r[d]=e(u?Xn(t[d]):t[d],d,void 0,o)}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,o)}else if(_s(t))if(t[Symbol.iterator])r=Array.from(t,(c,u)=>e(c,u,void 0,o));else{const c=Object.keys(t);r=new Array(c.length);for(let u=0,d=c.length;u<d;u++){const m=c[u];r[u]=e(t[m],m,u,o)}}else r=[];return r}function lf(t,e,s={},n,r){if(pn.ce||pn.parent&&Vc(pn.parent)&&pn.parent.ce)return h(),Tt(De,null,[Ye("slot",s,n&&n())],64);let o=t[e];o&&o._c&&(o._d=!1),h();const i=o&&oP(o(s)),c=s.key||i&&i.key,u=Tt(De,{key:(c&&!ko(c)?c:`_${e}`)+(!i&&n?"_fb":"")},i||(n?n():[]),i&&t._===1?64:-2);return!r&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function oP(t){return t.some(e=>km(e)?!(e.type===mr||e.type===De&&!oP(e.children)):!0)?t:null}const Vy=t=>t?CP(t)?U0(t):Vy(t.parent):null,Bd=cn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vy(t.parent),$root:t=>Vy(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>aP(t),$forceUpdate:t=>t.f||(t.f=()=>{F1(t.update)}),$nextTick:t=>t.n||(t.n=vs.bind(t.proxy)),$watch:t=>YO.bind(t)}),gb=(t,e)=>t!==is&&!t.__isScriptSetup&&ds(t,e),AO={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:o,accessCache:i,type:c,appContext:u}=t;let d;if(e[0]!=="$"){const g=i[e];if(g!==void 0)switch(g){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return o[e]}else{if(gb(n,e))return i[e]=1,n[e];if(r!==is&&ds(r,e))return i[e]=2,r[e];if((d=t.propsOptions[0])&&ds(d,e))return i[e]=3,o[e];if(s!==is&&ds(s,e))return i[e]=4,s[e];Hy&&(i[e]=0)}}const m=Bd[e];let f,p;if(m)return e==="$attrs"&&Yn(t.attrs,"get",""),m(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(s!==is&&ds(s,e))return i[e]=4,s[e];if(p=u.config.globalProperties,ds(p,e))return p[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:o}=t;return gb(r,e)?(r[e]=s,!0):n!==is&&ds(n,e)?(n[e]=s,!0):ds(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:o}},i){let c;return!!s[i]||t!==is&&ds(t,i)||gb(e,i)||(c=o[0])&&ds(c,i)||ds(n,i)||ds(Bd,i)||ds(r.config.globalProperties,i)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ds(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Th(t){return gt(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}function IO(t,e){return!t||!e?t||e:gt(t)&&gt(e)?t.concat(e):cn({},Th(t),Th(e))}let Hy=!0;function PO(t){const e=aP(t),s=t.proxy,n=t.ctx;Hy=!1,e.beforeCreate&&Z2(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:i,watch:c,provide:u,inject:d,created:m,beforeMount:f,mounted:p,beforeUpdate:g,updated:w,activated:C,deactivated:E,beforeDestroy:k,beforeUnmount:A,destroyed:S,unmounted:T,render:R,renderTracked:L,renderTriggered:P,errorCaptured:I,serverPrefetch:D,expose:U,inheritAttrs:M,components:x,directives:$,filters:Z}=e;if(d&&MO(d,n,null),i)for(const J in i){const le=i[J];Pt(le)&&(n[J]=le.bind(s))}if(r){const J=r.call(s,s);_s(J)&&(t.data=qa(J))}if(Hy=!0,o)for(const J in o){const le=o[J],se=Pt(le)?le.bind(s,s):Pt(le.get)?le.get.bind(s,s):zo,z=!Pt(le)&&Pt(le.set)?le.set.bind(s):zo,ce=q({get:se,set:z});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>ce.value,set:pe=>ce.value=pe})}if(c)for(const J in c)iP(c[J],n,s,J);if(u){const J=Pt(u)?u.call(s):u;Reflect.ownKeys(J).forEach(le=>{Hc(le,J[le])})}m&&Z2(m,t,"c");function re(J,le){gt(le)?le.forEach(se=>J(se.bind(s))):le&&J(le.bind(s))}if(re(yO,f),re(Et,p),re(_O,g),re(nP,w),re(gO,C),re(vO,E),re(EO,I),re(wO,L),re(kO,P),re(xn,A),re(ar,T),re(xO,D),gt(U))if(U.length){const J=t.exposed||(t.exposed={});U.forEach(le=>{Object.defineProperty(J,le,{get:()=>s[le],set:se=>s[le]=se})})}else t.exposed||(t.exposed={});R&&t.render===zo&&(t.render=R),M!=null&&(t.inheritAttrs=M),x&&(t.components=x),$&&(t.directives=$),D&&tP(t)}function MO(t,e,s=zo){gt(t)&&(t=Gy(t));for(const n in t){const r=t[n];let o;_s(r)?"default"in r?o=pr(r.from||n,r.default,!0):o=pr(r.from||n):o=pr(r),ws(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[n]=o}}function Z2(t,e,s){wo(gt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function iP(t,e,s,n){let r=n.includes(".")?yP(s,n):()=>s[n];if(Ys(t)){const o=e[t];Pt(o)&&dt(r,o)}else if(Pt(t))dt(r,t.bind(s));else if(_s(t))if(gt(t))t.forEach(o=>iP(o,e,s,n));else{const o=Pt(t.handler)?t.handler.bind(s):e[t.handler];Pt(o)&&dt(r,o,t)}}function aP(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,c=o.get(e);let u;return c?u=c:!r.length&&!s&&!n?u=e:(u={},r.length&&r.forEach(d=>Ah(u,d,i,!0)),Ah(u,e,i)),_s(e)&&o.set(e,u),u}function Ah(t,e,s,n=!1){const{mixins:r,extends:o}=e;o&&Ah(t,o,s,!0),r&&r.forEach(i=>Ah(t,i,s,!0));for(const i in e)if(!(n&&i==="expose")){const c=$O[i]||s&&s[i];t[i]=c?c(t[i],e[i]):e[i]}return t}const $O={data:eE,props:tE,emits:tE,methods:kd,computed:kd,beforeCreate:lr,created:lr,beforeMount:lr,mounted:lr,beforeUpdate:lr,updated:lr,beforeDestroy:lr,beforeUnmount:lr,destroyed:lr,unmounted:lr,activated:lr,deactivated:lr,errorCaptured:lr,serverPrefetch:lr,components:kd,directives:kd,watch:LO,provide:eE,inject:RO};function eE(t,e){return e?t?function(){return cn(Pt(t)?t.call(this,this):t,Pt(e)?e.call(this,this):e)}:e:t}function RO(t,e){return kd(Gy(t),Gy(e))}function Gy(t){if(gt(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function lr(t,e){return t?[...new Set([].concat(t,e))]:e}function kd(t,e){return t?cn(Object.create(null),t,e):e}function tE(t,e){return t?gt(t)&&gt(e)?[...new Set([...t,...e])]:cn(Object.create(null),Th(t),Th(e??{})):e}function LO(t,e){if(!t)return e;if(!e)return t;const s=cn(Object.create(null),t);for(const n in e)s[n]=lr(t[n],e[n]);return s}function lP(){return{app:null,config:{isNativeTag:x6,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DO=0;function NO(t,e){return function(n,r=null){Pt(n)||(n=cn({},n)),r!=null&&!_s(r)&&(r=null);const o=lP(),i=new WeakSet,c=[];let u=!1;const d=o.app={_uid:DO++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:TP,get config(){return o.config},set config(m){},use(m,...f){return i.has(m)||(m&&Pt(m.install)?(i.add(m),m.install(d,...f)):Pt(m)&&(i.add(m),m(d,...f))),d},mixin(m){return o.mixins.includes(m)||o.mixins.push(m),d},component(m,f){return f?(o.components[m]=f,d):o.components[m]},directive(m,f){return f?(o.directives[m]=f,d):o.directives[m]},mount(m,f,p){if(!u){const g=d._ceVNode||Ye(n,r);return g.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),t(g,m,p),u=!0,d._container=m,m.__vue_app__=d,U0(g.component)}},onUnmount(m){c.push(m)},unmount(){u&&(wo(c,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(m,f){return o.provides[m]=f,d},runWithContext(m){const f=wl;wl=d;try{return m()}finally{wl=f}}};return d}}let wl=null;function Hc(t,e){if(An){let s=An.provides;const n=An.parent&&An.parent.provides;n===s&&(s=An.provides=Object.create(n)),s[t]=e}}function pr(t,e,s=!1){const n=An||pn;if(n||wl){const r=wl?wl._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&Pt(e)?e.call(n&&n.proxy):e}}function q1(){return!!(An||pn||wl)}const cP={},uP=()=>Object.create(cP),dP=t=>Object.getPrototypeOf(t)===cP;function OO(t,e,s,n=!1){const r={},o=uP();t.propsDefaults=Object.create(null),mP(t,e,r,o);for(const i in t.propsOptions[0])i in r||(r[i]=void 0);s?t.props=n?r:DI(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function FO(t,e,s,n){const{props:r,attrs:o,vnode:{patchFlag:i}}=t,c=Gt(r),[u]=t.propsOptions;let d=!1;if((n||i>0)&&!(i&16)){if(i&8){const m=t.vnode.dynamicProps;for(let f=0;f<m.length;f++){let p=m[f];if(O0(t.emitsOptions,p))continue;const g=e[p];if(u)if(ds(o,p))g!==o[p]&&(o[p]=g,d=!0);else{const w=Vr(p);r[w]=jy(u,c,w,g,t,!1)}else g!==o[p]&&(o[p]=g,d=!0)}}}else{mP(t,e,r,o)&&(d=!0);let m;for(const f in c)(!e||!ds(e,f)&&((m=Mi(f))===f||!ds(e,m)))&&(u?s&&(s[f]!==void 0||s[m]!==void 0)&&(r[f]=jy(u,c,f,void 0,t,!0)):delete r[f]);if(o!==c)for(const f in o)(!e||!ds(e,f))&&(delete o[f],d=!0)}d&&hi(t.attrs,"set","")}function mP(t,e,s,n){const[r,o]=t.propsOptions;let i=!1,c;if(e)for(let u in e){if(Od(u))continue;const d=e[u];let m;r&&ds(r,m=Vr(u))?!o||!o.includes(m)?s[m]=d:(c||(c={}))[m]=d:O0(t.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,i=!0)}if(o){const u=Gt(s),d=c||is;for(let m=0;m<o.length;m++){const f=o[m];s[f]=jy(r,u,f,d[f],t,!ds(d,f))}}return i}function jy(t,e,s,n,r,o){const i=t[s];if(i!=null){const c=ds(i,"default");if(c&&n===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&Pt(u)){const{propsDefaults:d}=r;if(s in d)n=d[s];else{const m=cf(r);n=d[s]=u.call(null,e),m()}}else n=u;r.ce&&r.ce._setProp(s,n)}i[0]&&(o&&!c?n=!1:i[1]&&(n===""||n===Mi(s))&&(n=!0))}return n}const UO=new WeakMap;function fP(t,e,s=!1){const n=s?UO:e.propsCache,r=n.get(t);if(r)return r;const o=t.props,i={},c=[];let u=!1;if(!Pt(t)){const m=f=>{u=!0;const[p,g]=fP(f,e,!0);cn(i,p),g&&c.push(...g)};!s&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}if(!o&&!u)return _s(t)&&n.set(t,Uc),Uc;if(gt(o))for(let m=0;m<o.length;m++){const f=Vr(o[m]);sE(f)&&(i[f]=is)}else if(o)for(const m in o){const f=Vr(m);if(sE(f)){const p=o[m],g=i[f]=gt(p)||Pt(p)?{type:p}:cn({},p),w=g.type;let C=!1,E=!0;if(gt(w))for(let k=0;k<w.length;++k){const A=w[k],S=Pt(A)&&A.name;if(S==="Boolean"){C=!0;break}else S==="String"&&(E=!1)}else C=Pt(w)&&w.name==="Boolean";g[0]=C,g[1]=E,(C||ds(g,"default"))&&c.push(f)}}const d=[i,c];return _s(t)&&n.set(t,d),d}function sE(t){return t[0]!=="$"&&!Od(t)}const pP=t=>t[0]==="_"||t==="$stable",B1=t=>gt(t)?t.map(Oo):[Oo(t)],qO=(t,e,s)=>{if(e._n)return e;const n=Rt((...r)=>B1(e(...r)),s);return n._c=!1,n},hP=(t,e,s)=>{const n=t._ctx;for(const r in t){if(pP(r))continue;const o=t[r];if(Pt(o))e[r]=qO(r,o,n);else if(o!=null){const i=B1(o);e[r]=()=>i}}},gP=(t,e)=>{const s=B1(e);t.slots.default=()=>s},vP=(t,e,s)=>{for(const n in e)(s||n!=="_")&&(t[n]=e[n])},BO=(t,e,s)=>{const n=t.slots=uP();if(t.vnode.shapeFlag&32){const r=e._;r?(vP(n,e,s),s&&hI(n,"_",r,!0)):hP(e,n)}else e&&gP(t,e)},VO=(t,e,s)=>{const{vnode:n,slots:r}=t;let o=!0,i=is;if(n.shapeFlag&32){const c=e._;c?s&&c===1?o=!1:vP(r,e,s):(o=!e.$stable,hP(e,r)),i=e}else e&&(gP(t,e),i={default:1});if(o)for(const c in r)!pP(c)&&i[c]==null&&delete r[c]},cr=nF;function HO(t){return GO(t)}function GO(t,e){const s=P0();s.__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:i,createText:c,createComment:u,setText:d,setElementText:m,parentNode:f,nextSibling:p,setScopeId:g=zo,insertStaticContent:w}=t,C=(fe,X,H,W=null,ge=null,Te=null,Ie=void 0,Ne=null,je=!!X.dynamicChildren)=>{if(fe===X)return;fe&&!ul(fe,X)&&(W=Re(fe),pe(fe,ge,Te,!0),fe=null),X.patchFlag===-2&&(je=!1,X.dynamicChildren=null);const{type:N,ref:ue,shapeFlag:j}=X;switch(N){case F0:E(fe,X,H,W);break;case mr:k(fe,X,H,W);break;case th:fe==null&&A(X,H,W,Ie);break;case De:x(fe,X,H,W,ge,Te,Ie,Ne,je);break;default:j&1?R(fe,X,H,W,ge,Te,Ie,Ne,je):j&6?$(fe,X,H,W,ge,Te,Ie,Ne,je):(j&64||j&128)&&N.process(fe,X,H,W,ge,Te,Ie,Ne,je,Oe)}ue!=null&&ge&&Sh(ue,fe&&fe.ref,Te,X||fe,!X)},E=(fe,X,H,W)=>{if(fe==null)n(X.el=c(X.children),H,W);else{const ge=X.el=fe.el;X.children!==fe.children&&d(ge,X.children)}},k=(fe,X,H,W)=>{fe==null?n(X.el=u(X.children||""),H,W):X.el=fe.el},A=(fe,X,H,W)=>{[fe.el,fe.anchor]=w(fe.children,X,H,W,fe.el,fe.anchor)},S=({el:fe,anchor:X},H,W)=>{let ge;for(;fe&&fe!==X;)ge=p(fe),n(fe,H,W),fe=ge;n(X,H,W)},T=({el:fe,anchor:X})=>{let H;for(;fe&&fe!==X;)H=p(fe),r(fe),fe=H;r(X)},R=(fe,X,H,W,ge,Te,Ie,Ne,je)=>{X.type==="svg"?Ie="svg":X.type==="math"&&(Ie="mathml"),fe==null?L(X,H,W,ge,Te,Ie,Ne,je):D(fe,X,ge,Te,Ie,Ne,je)},L=(fe,X,H,W,ge,Te,Ie,Ne)=>{let je,N;const{props:ue,shapeFlag:j,transition:B,dirs:ie}=fe;if(je=fe.el=i(fe.type,Te,ue&&ue.is,ue),j&8?m(je,fe.children):j&16&&I(fe.children,je,null,W,ge,vb(fe,Te),Ie,Ne),ie&&Ka(fe,null,W,"created"),P(je,fe,fe.scopeId,Ie,W),ue){for(const O in ue)O!=="value"&&!Od(O)&&o(je,O,null,ue[O],Te,W);"value"in ue&&o(je,"value",null,ue.value,Te),(N=ue.onVnodeBeforeMount)&&Mo(N,W,fe)}ie&&Ka(fe,null,W,"beforeMount");const V=jO(ge,B);V&&B.beforeEnter(je),n(je,X,H),((N=ue&&ue.onVnodeMounted)||V||ie)&&cr(()=>{N&&Mo(N,W,fe),V&&B.enter(je),ie&&Ka(fe,null,W,"mounted")},ge)},P=(fe,X,H,W,ge)=>{if(H&&g(fe,H),W)for(let Te=0;Te<W.length;Te++)g(fe,W[Te]);if(ge){let Te=ge.subTree;if(X===Te||kP(Te.type)&&(Te.ssContent===X||Te.ssFallback===X)){const Ie=ge.vnode;P(fe,Ie,Ie.scopeId,Ie.slotScopeIds,ge.parent)}}},I=(fe,X,H,W,ge,Te,Ie,Ne,je=0)=>{for(let N=je;N<fe.length;N++){const ue=fe[N]=Ne?ta(fe[N]):Oo(fe[N]);C(null,ue,X,H,W,ge,Te,Ie,Ne)}},D=(fe,X,H,W,ge,Te,Ie)=>{const Ne=X.el=fe.el;let{patchFlag:je,dynamicChildren:N,dirs:ue}=X;je|=fe.patchFlag&16;const j=fe.props||is,B=X.props||is;let ie;if(H&&Ya(H,!1),(ie=B.onVnodeBeforeUpdate)&&Mo(ie,H,X,fe),ue&&Ka(X,fe,H,"beforeUpdate"),H&&Ya(H,!0),(j.innerHTML&&B.innerHTML==null||j.textContent&&B.textContent==null)&&m(Ne,""),N?U(fe.dynamicChildren,N,Ne,H,W,vb(X,ge),Te):Ie||le(fe,X,Ne,null,H,W,vb(X,ge),Te,!1),je>0){if(je&16)M(Ne,j,B,H,ge);else if(je&2&&j.class!==B.class&&o(Ne,"class",null,B.class,ge),je&4&&o(Ne,"style",j.style,B.style,ge),je&8){const V=X.dynamicProps;for(let O=0;O<V.length;O++){const te=V[O],G=j[te],ne=B[te];(ne!==G||te==="value")&&o(Ne,te,G,ne,ge,H)}}je&1&&fe.children!==X.children&&m(Ne,X.children)}else!Ie&&N==null&&M(Ne,j,B,H,ge);((ie=B.onVnodeUpdated)||ue)&&cr(()=>{ie&&Mo(ie,H,X,fe),ue&&Ka(X,fe,H,"updated")},W)},U=(fe,X,H,W,ge,Te,Ie)=>{for(let Ne=0;Ne<X.length;Ne++){const je=fe[Ne],N=X[Ne],ue=je.el&&(je.type===De||!ul(je,N)||je.shapeFlag&70)?f(je.el):H;C(je,N,ue,null,W,ge,Te,Ie,!0)}},M=(fe,X,H,W,ge)=>{if(X!==H){if(X!==is)for(const Te in X)!Od(Te)&&!(Te in H)&&o(fe,Te,X[Te],null,ge,W);for(const Te in H){if(Od(Te))continue;const Ie=H[Te],Ne=X[Te];Ie!==Ne&&Te!=="value"&&o(fe,Te,Ne,Ie,ge,W)}"value"in H&&o(fe,"value",X.value,H.value,ge)}},x=(fe,X,H,W,ge,Te,Ie,Ne,je)=>{const N=X.el=fe?fe.el:c(""),ue=X.anchor=fe?fe.anchor:c("");let{patchFlag:j,dynamicChildren:B,slotScopeIds:ie}=X;ie&&(Ne=Ne?Ne.concat(ie):ie),fe==null?(n(N,H,W),n(ue,H,W),I(X.children||[],H,ue,ge,Te,Ie,Ne,je)):j>0&&j&64&&B&&fe.dynamicChildren?(U(fe.dynamicChildren,B,H,ge,Te,Ie,Ne),(X.key!=null||ge&&X===ge.subTree)&&V1(fe,X,!0)):le(fe,X,H,ue,ge,Te,Ie,Ne,je)},$=(fe,X,H,W,ge,Te,Ie,Ne,je)=>{X.slotScopeIds=Ne,fe==null?X.shapeFlag&512?ge.ctx.activate(X,H,W,Ie,je):Z(X,H,W,ge,Te,Ie,je):me(fe,X,je)},Z=(fe,X,H,W,ge,Te,Ie)=>{const Ne=fe.component=uF(fe,W,ge);if(L0(fe)&&(Ne.ctx.renderer=Oe),dF(Ne,!1,Ie),Ne.asyncDep){if(ge&&ge.registerDep(Ne,re,Ie),!fe.el){const je=Ne.subTree=Ye(mr);k(null,je,X,H)}}else re(Ne,fe,X,H,ge,Te,Ie)},me=(fe,X,H)=>{const W=X.component=fe.component;if(tF(fe,X,H))if(W.asyncDep&&!W.asyncResolved){J(W,X,H);return}else W.next=X,W.update();else X.el=fe.el,W.vnode=X},re=(fe,X,H,W,ge,Te,Ie)=>{const Ne=()=>{if(fe.isMounted){let{next:j,bu:B,u:ie,parent:V,vnode:O}=fe;{const ye=bP(fe);if(ye){j&&(j.el=O.el,J(fe,j,Ie)),ye.asyncDep.then(()=>{fe.isUnmounted||Ne()});return}}let te=j,G;Ya(fe,!1),j?(j.el=O.el,J(fe,j,Ie)):j=O,B&&Zp(B),(G=j.props&&j.props.onVnodeBeforeUpdate)&&Mo(G,V,j,O),Ya(fe,!0);const ne=rE(fe),he=fe.subTree;fe.subTree=ne,C(he,ne,f(he.el),Re(he),fe,ge,Te),j.el=ne.el,te===null&&sF(fe,ne.el),ie&&cr(ie,ge),(G=j.props&&j.props.onVnodeUpdated)&&cr(()=>Mo(G,V,j,O),ge)}else{let j;const{el:B,props:ie}=X,{bm:V,m:O,parent:te,root:G,type:ne}=fe,he=Vc(X);Ya(fe,!1),V&&Zp(V),!he&&(j=ie&&ie.onVnodeBeforeMount)&&Mo(j,te,X),Ya(fe,!0);{G.ce&&G.ce._injectChildStyle(ne);const ye=fe.subTree=rE(fe);C(null,ye,H,W,fe,ge,Te),X.el=ye.el}if(O&&cr(O,ge),!he&&(j=ie&&ie.onVnodeMounted)){const ye=X;cr(()=>Mo(j,te,ye),ge)}(X.shapeFlag&256||te&&Vc(te.vnode)&&te.vnode.shapeFlag&256)&&fe.a&&cr(fe.a,ge),fe.isMounted=!0,X=H=W=null}};fe.scope.on();const je=fe.effect=new xI(Ne);fe.scope.off();const N=fe.update=je.run.bind(je),ue=fe.job=je.runIfDirty.bind(je);ue.i=fe,ue.id=fe.uid,je.scheduler=()=>F1(ue),Ya(fe,!0),N()},J=(fe,X,H)=>{X.component=fe;const W=fe.vnode.props;fe.vnode=X,fe.next=null,FO(fe,X.props,W,H),VO(fe,X.children,H),Fa(),z2(fe),Ua()},le=(fe,X,H,W,ge,Te,Ie,Ne,je=!1)=>{const N=fe&&fe.children,ue=fe?fe.shapeFlag:0,j=X.children,{patchFlag:B,shapeFlag:ie}=X;if(B>0){if(B&128){z(N,j,H,W,ge,Te,Ie,Ne,je);return}else if(B&256){se(N,j,H,W,ge,Te,Ie,Ne,je);return}}ie&8?(ue&16&&ze(N,ge,Te),j!==N&&m(H,j)):ue&16?ie&16?z(N,j,H,W,ge,Te,Ie,Ne,je):ze(N,ge,Te,!0):(ue&8&&m(H,""),ie&16&&I(j,H,W,ge,Te,Ie,Ne,je))},se=(fe,X,H,W,ge,Te,Ie,Ne,je)=>{fe=fe||Uc,X=X||Uc;const N=fe.length,ue=X.length,j=Math.min(N,ue);let B;for(B=0;B<j;B++){const ie=X[B]=je?ta(X[B]):Oo(X[B]);C(fe[B],ie,H,null,ge,Te,Ie,Ne,je)}N>ue?ze(fe,ge,Te,!0,!1,j):I(X,H,W,ge,Te,Ie,Ne,je,j)},z=(fe,X,H,W,ge,Te,Ie,Ne,je)=>{let N=0;const ue=X.length;let j=fe.length-1,B=ue-1;for(;N<=j&&N<=B;){const ie=fe[N],V=X[N]=je?ta(X[N]):Oo(X[N]);if(ul(ie,V))C(ie,V,H,null,ge,Te,Ie,Ne,je);else break;N++}for(;N<=j&&N<=B;){const ie=fe[j],V=X[B]=je?ta(X[B]):Oo(X[B]);if(ul(ie,V))C(ie,V,H,null,ge,Te,Ie,Ne,je);else break;j--,B--}if(N>j){if(N<=B){const ie=B+1,V=ie<ue?X[ie].el:W;for(;N<=B;)C(null,X[N]=je?ta(X[N]):Oo(X[N]),H,V,ge,Te,Ie,Ne,je),N++}}else if(N>B)for(;N<=j;)pe(fe[N],ge,Te,!0),N++;else{const ie=N,V=N,O=new Map;for(N=V;N<=B;N++){const Me=X[N]=je?ta(X[N]):Oo(X[N]);Me.key!=null&&O.set(Me.key,N)}let te,G=0;const ne=B-V+1;let he=!1,ye=0;const ae=new Array(ne);for(N=0;N<ne;N++)ae[N]=0;for(N=ie;N<=j;N++){const Me=fe[N];if(G>=ne){pe(Me,ge,Te,!0);continue}let Le;if(Me.key!=null)Le=O.get(Me.key);else for(te=V;te<=B;te++)if(ae[te-V]===0&&ul(Me,X[te])){Le=te;break}Le===void 0?pe(Me,ge,Te,!0):(ae[Le-V]=N+1,Le>=ye?ye=Le:he=!0,C(Me,X[Le],H,null,ge,Te,Ie,Ne,je),G++)}const de=he?WO(ae):Uc;for(te=de.length-1,N=ne-1;N>=0;N--){const Me=V+N,Le=X[Me],it=Me+1<ue?X[Me+1].el:W;ae[N]===0?C(null,Le,H,it,ge,Te,Ie,Ne,je):he&&(te<0||N!==de[te]?ce(Le,H,it,2):te--)}}},ce=(fe,X,H,W,ge=null)=>{const{el:Te,type:Ie,transition:Ne,children:je,shapeFlag:N}=fe;if(N&6){ce(fe.component.subTree,X,H,W);return}if(N&128){fe.suspense.move(X,H,W);return}if(N&64){Ie.move(fe,X,H,Oe);return}if(Ie===De){n(Te,X,H);for(let j=0;j<je.length;j++)ce(je[j],X,H,W);n(fe.anchor,X,H);return}if(Ie===th){S(fe,X,H);return}if(W!==2&&N&1&&Ne)if(W===0)Ne.beforeEnter(Te),n(Te,X,H),cr(()=>Ne.enter(Te),ge);else{const{leave:j,delayLeave:B,afterLeave:ie}=Ne,V=()=>n(Te,X,H),O=()=>{j(Te,()=>{V(),ie&&ie()})};B?B(Te,V,O):O()}else n(Te,X,H)},pe=(fe,X,H,W=!1,ge=!1)=>{const{type:Te,props:Ie,ref:Ne,children:je,dynamicChildren:N,shapeFlag:ue,patchFlag:j,dirs:B,cacheIndex:ie}=fe;if(j===-2&&(ge=!1),Ne!=null&&Sh(Ne,null,H,fe,!0),ie!=null&&(X.renderCache[ie]=void 0),ue&256){X.ctx.deactivate(fe);return}const V=ue&1&&B,O=!Vc(fe);let te;if(O&&(te=Ie&&Ie.onVnodeBeforeUnmount)&&Mo(te,X,fe),ue&6)Ue(fe.component,H,W);else{if(ue&128){fe.suspense.unmount(H,W);return}V&&Ka(fe,null,X,"beforeUnmount"),ue&64?fe.type.remove(fe,X,H,Oe,W):N&&!N.hasOnce&&(Te!==De||j>0&&j&64)?ze(N,X,H,!1,!0):(Te===De&&j&384||!ge&&ue&16)&&ze(je,X,H),W&&_e(fe)}(O&&(te=Ie&&Ie.onVnodeUnmounted)||V)&&cr(()=>{te&&Mo(te,X,fe),V&&Ka(fe,null,X,"unmounted")},H)},_e=fe=>{const{type:X,el:H,anchor:W,transition:ge}=fe;if(X===De){Ee(H,W);return}if(X===th){T(fe);return}const Te=()=>{r(H),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if(fe.shapeFlag&1&&ge&&!ge.persisted){const{leave:Ie,delayLeave:Ne}=ge,je=()=>Ie(H,Te);Ne?Ne(fe.el,Te,je):je()}else Te()},Ee=(fe,X)=>{let H;for(;fe!==X;)H=p(fe),r(fe),fe=H;r(X)},Ue=(fe,X,H)=>{const{bum:W,scope:ge,job:Te,subTree:Ie,um:Ne,m:je,a:N}=fe;nE(je),nE(N),W&&Zp(W),ge.stop(),Te&&(Te.flags|=8,pe(Ie,fe,X,H)),Ne&&cr(Ne,X),cr(()=>{fe.isUnmounted=!0},X),X&&X.pendingBranch&&!X.isUnmounted&&fe.asyncDep&&!fe.asyncResolved&&fe.suspenseId===X.pendingId&&(X.deps--,X.deps===0&&X.resolve())},ze=(fe,X,H,W=!1,ge=!1,Te=0)=>{for(let Ie=Te;Ie<fe.length;Ie++)pe(fe[Ie],X,H,W,ge)},Re=fe=>{if(fe.shapeFlag&6)return Re(fe.component.subTree);if(fe.shapeFlag&128)return fe.suspense.next();const X=p(fe.anchor||fe.el),H=X&&X[jI];return H?p(H):X};let $e=!1;const Ce=(fe,X,H)=>{fe==null?X._vnode&&pe(X._vnode,null,null,!0):C(X._vnode||null,fe,X,null,null,null,H),X._vnode=fe,$e||($e=!0,z2(),VI(),$e=!1)},Oe={p:C,um:pe,m:ce,r:_e,mt:Z,mc:I,pc:le,pbc:U,n:Re,o:t};return{render:Ce,hydrate:void 0,createApp:NO(Ce)}}function vb({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Ya({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function jO(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function V1(t,e,s=!1){const n=t.children,r=e.children;if(gt(n)&&gt(r))for(let o=0;o<n.length;o++){const i=n[o];let c=r[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[o]=ta(r[o]),c.el=i.el),!s&&c.patchFlag!==-2&&V1(i,c)),c.type===F0&&(c.el=i.el)}}function WO(t){const e=t.slice(),s=[0];let n,r,o,i,c;const u=t.length;for(n=0;n<u;n++){const d=t[n];if(d!==0){if(r=s[s.length-1],t[r]<d){e[n]=r,s.push(n);continue}for(o=0,i=s.length-1;o<i;)c=o+i>>1,t[s[c]]<d?o=c+1:i=c;d<t[s[o]]&&(o>0&&(e[n]=s[o-1]),s[o]=n)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=e[i];return s}function bP(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:bP(e)}function nE(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const zO=Symbol.for("v-scx"),QO=()=>pr(zO);function Qi(t,e){return N0(t,null,e)}function KO(t,e){return N0(t,null,{flush:"sync"})}function dt(t,e,s){return N0(t,e,s)}function N0(t,e,s=is){const{immediate:n,deep:r,flush:o,once:i}=s,c=cn({},s),u=e&&n||!e&&o!=="post";let d;if(wm){if(o==="sync"){const g=QO();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!u){const g=()=>{};return g.stop=zo,g.resume=zo,g.pause=zo,g}}const m=An;c.call=(g,w,C)=>wo(g,m,w,C);let f=!1;o==="post"?c.scheduler=g=>{cr(g,m&&m.suspense)}:o!=="sync"&&(f=!0,c.scheduler=(g,w)=>{w?g():F1(g)}),c.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,m&&(g.id=m.uid,g.i=m))};const p=cO(t,e,c);return wm&&(d?d.push(p):u&&p()),p}function YO(t,e,s){const n=this.proxy,r=Ys(t)?t.includes(".")?yP(n,t):()=>n[t]:t.bind(n,n);let o;Pt(e)?o=e:(o=e.handler,s=e);const i=cf(this),c=N0(r,o.bind(n),s);return i(),c}function yP(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}function XO(t,e,s=is){const n=jl(),r=Vr(e),o=Mi(e),i=_P(t,r),c=sO((u,d)=>{let m,f=is,p;return KO(()=>{const g=t[r];_r(m,g)&&(m=g,d())}),{get(){return u(),s.get?s.get(m):m},set(g){const w=s.set?s.set(g):g;if(!_r(w,m)&&!(f!==is&&_r(g,f)))return;const C=n.vnode.props;C&&(e in C||r in C||o in C)&&(`onUpdate:${e}`in C||`onUpdate:${r}`in C||`onUpdate:${o}`in C)||(m=g,d()),n.emit(`update:${e}`,w),_r(g,w)&&_r(g,f)&&!_r(w,p)&&d(),f=g,p=w}}});return c[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?i||is:c,done:!1}:{done:!0}}}},c}const _P=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vr(e)}Modifiers`]||t[`${Mi(e)}Modifiers`];function JO(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||is;let r=s;const o=e.startsWith("update:"),i=o&&_P(n,e.slice(7));i&&(i.trim&&(r=s.map(m=>Ys(m)?m.trim():m)),i.number&&(r=s.map(xh)));let c,u=n[c=ub(e)]||n[c=ub(Vr(e))];!u&&o&&(u=n[c=ub(Mi(e))]),u&&wo(u,t,6,r);const d=n[c+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,wo(d,t,6,r)}}function xP(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const o=t.emits;let i={},c=!1;if(!Pt(t)){const u=d=>{const m=xP(d,e,!0);m&&(c=!0,cn(i,m))};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!o&&!c?(_s(t)&&n.set(t,null),null):(gt(o)?o.forEach(u=>i[u]=null):cn(i,o),_s(t)&&n.set(t,i),i)}function O0(t,e){return!t||!T0(e)?!1:(e=e.slice(2).replace(/Once$/,""),ds(t,e[0].toLowerCase()+e.slice(1))||ds(t,Mi(e))||ds(t,e))}function rE(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[o],slots:i,attrs:c,emit:u,render:d,renderCache:m,props:f,data:p,setupState:g,ctx:w,inheritAttrs:C}=t,E=Ch(t);let k,A;try{if(s.shapeFlag&4){const T=r||n,R=T;k=Oo(d.call(R,T,m,f,g,p,w)),A=c}else{const T=e;k=Oo(T.length>1?T(f,{attrs:c,slots:i,emit:u}):T(f,null)),A=e.props?c:ZO(c)}}catch(T){Vd.length=0,R0(T,t,1),k=Ye(mr)}let S=k;if(A&&C!==!1){const T=Object.keys(A),{shapeFlag:R}=S;T.length&&R&7&&(o&&T.some(C1)&&(A=eF(A,o)),S=_a(S,A,!1,!0))}return s.dirs&&(S=_a(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Il(S,s.transition),k=S,Ch(E),k}const ZO=t=>{let e;for(const s in t)(s==="class"||s==="style"||T0(s))&&((e||(e={}))[s]=t[s]);return e},eF=(t,e)=>{const s={};for(const n in t)(!C1(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function tF(t,e,s){const{props:n,children:r,component:o}=t,{props:i,children:c,patchFlag:u}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?oE(n,i,d):!!i;if(u&8){const m=e.dynamicProps;for(let f=0;f<m.length;f++){const p=m[f];if(i[p]!==n[p]&&!O0(d,p))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:n===i?!1:n?i?oE(n,i,d):!0:!!i;return!1}function oE(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const o=n[r];if(e[o]!==t[o]&&!O0(s,o))return!0}return!1}function sF({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const kP=t=>t.__isSuspense;function nF(t,e){e&&e.pendingBranch?gt(t)?e.effects.push(...t):e.effects.push(t):mO(t)}const De=Symbol.for("v-fgt"),F0=Symbol.for("v-txt"),mr=Symbol.for("v-cmt"),th=Symbol.for("v-stc"),Vd=[];let Rr=null;function h(t=!1){Vd.push(Rr=t?null:[])}function rF(){Vd.pop(),Rr=Vd[Vd.length-1]||null}let xm=1;function iE(t,e=!1){xm+=t,t<0&&Rr&&e&&(Rr.hasOnce=!0)}function wP(t){return t.dynamicChildren=xm>0?Rr||Uc:null,rF(),xm>0&&Rr&&Rr.push(t),t}function v(t,e,s,n,r,o){return wP(a(t,e,s,n,r,o,!0))}function Tt(t,e,s,n,r){return wP(Ye(t,e,s,n,r,!0))}function km(t){return t?t.__v_isVNode===!0:!1}function ul(t,e){return t.type===e.type&&t.key===e.key}const EP=({key:t})=>t??null,sh=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Ys(t)||ws(t)||Pt(t)?{i:pn,r:t,k:e,f:!!s}:t:null);function a(t,e=null,s=null,n=0,r=null,o=t===De?0:1,i=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&EP(e),ref:e&&sh(e),scopeId:GI,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:pn};return c?(H1(u,s),o&128&&t.normalize(u)):s&&(u.shapeFlag|=Ys(s)?8:16),xm>0&&!i&&Rr&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&Rr.push(u),u}const Ye=oF;function oF(t,e=null,s=null,n=0,r=null,o=!1){if((!t||t===SO)&&(t=mr),km(t)){const c=_a(t,e,!0);return s&&H1(c,s),xm>0&&!o&&Rr&&(c.shapeFlag&6?Rr[Rr.indexOf(t)]=c:Rr.push(c)),c.patchFlag=-2,c}if(gF(t)&&(t=t.__vccOpts),e){e=iF(e);let{class:c,style:u}=e;c&&!Ys(c)&&(e.class=K(c)),_s(u)&&(of(u)&&!gt(u)&&(u=cn({},u)),e.style=yt(u))}const i=Ys(t)?1:kP(t)?128:WI(t)?64:_s(t)?4:Pt(t)?2:0;return a(t,e,s,n,r,i,o,!0)}function iF(t){return t?of(t)||dP(t)?cn({},t):t:null}function _a(t,e,s=!1,n=!1){const{props:r,ref:o,patchFlag:i,children:c,transition:u}=t,d=e?aF(r||{},e):r,m={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&EP(d),ref:e&&e.ref?s&&o?gt(o)?o.concat(sh(e)):[o,sh(e)]:sh(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==De?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_a(t.ssContent),ssFallback:t.ssFallback&&_a(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&Il(m,u.clone(m)),m}function oe(t=" ",e=0){return Ye(F0,null,t,e)}function js(t,e){const s=Ye(th,null,t);return s.staticCount=e,s}function Q(t="",e=!1){return e?(h(),Tt(mr,null,t)):Ye(mr,null,t)}function Oo(t){return t==null||typeof t=="boolean"?Ye(mr):gt(t)?Ye(De,null,t.slice()):km(t)?ta(t):Ye(F0,null,String(t))}function ta(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_a(t)}function H1(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(gt(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),H1(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!dP(e)?e._ctx=pn:r===3&&pn&&(pn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pt(e)?(e={default:e,_ctx:pn},s=32):(e=String(e),n&64?(s=16,e=[oe(e)]):s=8);t.children=e,t.shapeFlag|=s}function aF(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=K([e.class,n.class]));else if(r==="style")e.style=yt([e.style,n.style]);else if(T0(r)){const o=e[r],i=n[r];i&&o!==i&&!(gt(o)&&o.includes(i))&&(e[r]=o?[].concat(o,i):i)}else r!==""&&(e[r]=n[r])}return e}function Mo(t,e,s,n=null){wo(t,e,7,[s,n])}const lF=lP();let cF=0;function uF(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||lF,o={uid:cF++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fP(n,r),emitsOptions:xP(n,r),emit:null,emitted:null,propsDefaults:is,inheritAttrs:n.inheritAttrs,ctx:is,data:is,props:is,attrs:is,slots:is,refs:is,setupState:is,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=JO.bind(null,o),t.ce&&t.ce(o),o}let An=null;const jl=()=>An||pn;let Ih,Wy;{const t=P0(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};Ih=e("__VUE_INSTANCE_SETTERS__",s=>An=s),Wy=e("__VUE_SSR_SETTERS__",s=>wm=s)}const cf=t=>{const e=An;return Ih(t),t.scope.on(),()=>{t.scope.off(),Ih(e)}},aE=()=>{An&&An.scope.off(),Ih(null)};function CP(t){return t.vnode.shapeFlag&4}let wm=!1;function dF(t,e=!1,s=!1){e&&Wy(e);const{props:n,children:r}=t.vnode,o=CP(t);OO(t,n,o,e),BO(t,r,s);const i=o?mF(t,e):void 0;return e&&Wy(!1),i}function mF(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,AO);const{setup:n}=s;if(n){Fa();const r=t.setupContext=n.length>1?pF(t):null,o=cf(t),i=af(n,t,0,[t.props,r]),c=mI(i);if(Ua(),o(),(c||t.sp)&&!Vc(t)&&tP(t),c){if(i.then(aE,aE),e)return i.then(u=>{lE(t,u)}).catch(u=>{R0(u,t,0)});t.asyncDep=i}else lE(t,i)}else SP(t)}function lE(t,e,s){Pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_s(e)&&(t.setupState=OI(e)),SP(t)}function SP(t,e,s){const n=t.type;t.render||(t.render=n.render||zo);{const r=cf(t);Fa();try{PO(t)}finally{Ua(),r()}}}const fF={get(t,e){return Yn(t,"get",""),t[e]}};function pF(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,fF),slots:t.slots,emit:t.emit,expose:e}}function U0(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(OI(O1(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Bd)return Bd[s](t)},has(e,s){return s in e||s in Bd}})):t.proxy}function hF(t,e=!0){return Pt(t)?t.displayName||t.name:t.name||e&&t.__name}function gF(t){return Pt(t)&&"__vccOpts"in t}const q=(t,e)=>aO(t,e,wm);function vr(t,e,s){const n=arguments.length;return n===2?_s(e)&&!gt(e)?km(e)?Ye(t,null,[e]):Ye(t,e):Ye(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&km(s)&&(s=[s]),Ye(t,e,s))}const TP="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zy;const cE=typeof window<"u"&&window.trustedTypes;if(cE)try{zy=cE.createPolicy("vue",{createHTML:t=>t})}catch{}const AP=zy?t=>zy.createHTML(t):t=>t,vF="http://www.w3.org/2000/svg",bF="http://www.w3.org/1998/Math/MathML",fi=typeof document<"u"?document:null,uE=fi&&fi.createElement("template"),yF={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?fi.createElementNS(vF,t):e==="mathml"?fi.createElementNS(bF,t):s?fi.createElement(t,{is:s}):fi.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>fi.createTextNode(t),createComment:t=>fi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,o){const i=s?s.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===o||!(r=r.nextSibling)););else{uE.innerHTML=AP(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const c=uE.content;if(n==="svg"||n==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}e.insertBefore(c,s)}return[i?i.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},qi="transition",td="animation",su=Symbol("_vtc"),IP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},PP=cn({},XI,IP),_F=t=>(t.displayName="Transition",t.props=PP,t),or=_F((t,{slots:e})=>vr(hO,MP(t),e)),Xa=(t,e=[])=>{gt(t)?t.forEach(s=>s(...e)):t&&t(...e)},dE=t=>t?gt(t)?t.some(e=>e.length>1):t.length>1:!1;function MP(t){const e={};for(const x in t)x in IP||(e[x]=t[x]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:o=`${s}-enter-from`,enterActiveClass:i=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:u=o,appearActiveClass:d=i,appearToClass:m=c,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:p=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,w=xF(r),C=w&&w[0],E=w&&w[1],{onBeforeEnter:k,onEnter:A,onEnterCancelled:S,onLeave:T,onLeaveCancelled:R,onBeforeAppear:L=k,onAppear:P=A,onAppearCancelled:I=S}=e,D=(x,$,Z,me)=>{x._enterCancelled=me,Ki(x,$?m:c),Ki(x,$?d:i),Z&&Z()},U=(x,$)=>{x._isLeaving=!1,Ki(x,f),Ki(x,g),Ki(x,p),$&&$()},M=x=>($,Z)=>{const me=x?P:A,re=()=>D($,x,Z);Xa(me,[$,re]),mE(()=>{Ki($,x?u:o),$o($,x?m:c),dE(me)||fE($,n,C,re)})};return cn(e,{onBeforeEnter(x){Xa(k,[x]),$o(x,o),$o(x,i)},onBeforeAppear(x){Xa(L,[x]),$o(x,u),$o(x,d)},onEnter:M(!1),onAppear:M(!0),onLeave(x,$){x._isLeaving=!0;const Z=()=>U(x,$);$o(x,f),x._enterCancelled?($o(x,p),Qy()):(Qy(),$o(x,p)),mE(()=>{x._isLeaving&&(Ki(x,f),$o(x,g),dE(T)||fE(x,n,E,Z))}),Xa(T,[x,Z])},onEnterCancelled(x){D(x,!1,void 0,!0),Xa(S,[x])},onAppearCancelled(x){D(x,!0,void 0,!0),Xa(I,[x])},onLeaveCancelled(x){U(x),Xa(R,[x])}})}function xF(t){if(t==null)return null;if(_s(t))return[bb(t.enter),bb(t.leave)];{const e=bb(t);return[e,e]}}function bb(t){return S6(t)}function $o(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[su]||(t[su]=new Set)).add(e)}function Ki(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[su];s&&(s.delete(e),s.size||(t[su]=void 0))}function mE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let kF=0;function fE(t,e,s,n){const r=t._endId=++kF,o=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:i,timeout:c,propCount:u}=$P(t,e);if(!i)return n();const d=i+"end";let m=0;const f=()=>{t.removeEventListener(d,p),o()},p=g=>{g.target===t&&++m>=u&&f()};setTimeout(()=>{m<u&&f()},c+1),t.addEventListener(d,p)}function $P(t,e){const s=window.getComputedStyle(t),n=w=>(s[w]||"").split(", "),r=n(`${qi}Delay`),o=n(`${qi}Duration`),i=pE(r,o),c=n(`${td}Delay`),u=n(`${td}Duration`),d=pE(c,u);let m=null,f=0,p=0;e===qi?i>0&&(m=qi,f=i,p=o.length):e===td?d>0&&(m=td,f=d,p=u.length):(f=Math.max(i,d),m=f>0?i>d?qi:td:null,p=m?m===qi?o.length:u.length:0);const g=m===qi&&/\b(transform|all)(,|$)/.test(n(`${qi}Property`).toString());return{type:m,timeout:f,propCount:p,hasTransform:g}}function pE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>hE(s)+hE(t[n])))}function hE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Qy(){return document.body.offsetHeight}function wF(t,e,s){const n=t[su];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Ph=Symbol("_vod"),RP=Symbol("_vsh"),fl={beforeMount(t,{value:e},{transition:s}){t[Ph]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):sd(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),sd(t,!0),n.enter(t)):n.leave(t,()=>{sd(t,!1)}):sd(t,e))},beforeUnmount(t,{value:e}){sd(t,e)}};function sd(t,e){t.style.display=e?t[Ph]:"none",t[RP]=!e}const EF=Symbol(""),CF=/(^|;)\s*display\s*:/;function SF(t,e,s){const n=t.style,r=Ys(s);let o=!1;if(s&&!r){if(e)if(Ys(e))for(const i of e.split(";")){const c=i.slice(0,i.indexOf(":")).trim();s[c]==null&&nh(n,c,"")}else for(const i in e)s[i]==null&&nh(n,i,"");for(const i in s)i==="display"&&(o=!0),nh(n,i,s[i])}else if(r){if(e!==s){const i=n[EF];i&&(s+=";"+i),n.cssText=s,o=CF.test(s)}}else e&&t.removeAttribute("style");Ph in t&&(t[Ph]=o?n.display:"",t[RP]&&(n.display="none"))}const gE=/\s*!important$/;function nh(t,e,s){if(gt(s))s.forEach(n=>nh(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=TF(t,e);gE.test(s)?t.setProperty(Mi(n),s.replace(gE,""),"important"):t[n]=s}}const vE=["Webkit","Moz","ms"],yb={};function TF(t,e){const s=yb[e];if(s)return s;let n=Vr(e);if(n!=="filter"&&n in t)return yb[e]=n;n=I0(n);for(let r=0;r<vE.length;r++){const o=vE[r]+n;if(o in t)return yb[e]=o}return e}const bE="http://www.w3.org/1999/xlink";function yE(t,e,s,n,r,o=$6(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(bE,e.slice(6,e.length)):t.setAttributeNS(bE,e,s):s==null||o&&!gI(s)?t.removeAttribute(e):t.setAttribute(e,o?"":ko(s)?String(s):s)}function _E(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?AP(s):s);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?t.getAttribute("value")||"":t.value,u=s==null?t.type==="checkbox"?"on":"":String(s);(c!==u||!("_value"in t))&&(t.value=u),s==null&&t.removeAttribute(e),t._value=s;return}let i=!1;if(s===""||s==null){const c=typeof t[e];c==="boolean"?s=gI(s):s==null&&c==="string"?(s="",i=!0):c==="number"&&(s=0,i=!0)}try{t[e]=s}catch{}i&&t.removeAttribute(r||e)}function oa(t,e,s,n){t.addEventListener(e,s,n)}function AF(t,e,s,n){t.removeEventListener(e,s,n)}const xE=Symbol("_vei");function IF(t,e,s,n,r=null){const o=t[xE]||(t[xE]={}),i=o[e];if(n&&i)i.value=n;else{const[c,u]=PF(e);if(n){const d=o[e]=RF(n,r);oa(t,c,d,u)}else i&&(AF(t,c,i,u),o[e]=void 0)}}const kE=/(?:Once|Passive|Capture)$/;function PF(t){let e;if(kE.test(t)){e={};let n;for(;n=t.match(kE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mi(t.slice(2)),e]}let _b=0;const MF=Promise.resolve(),$F=()=>_b||(MF.then(()=>_b=0),_b=Date.now());function RF(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;wo(LF(n,s.value),e,5,[n])};return s.value=t,s.attached=$F(),s}function LF(t,e){if(gt(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const wE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,DF=(t,e,s,n,r,o)=>{const i=r==="svg";e==="class"?wF(t,n,i):e==="style"?SF(t,s,n):T0(e)?C1(e)||IF(t,e,s,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):NF(t,e,n,i))?(_E(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&yE(t,e,n,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ys(n))?_E(t,Vr(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),yE(t,e,n,i))};function NF(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&wE(e)&&Pt(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wE(e)&&Ys(s)?!1:e in t}const LP=new WeakMap,DP=new WeakMap,Mh=Symbol("_moveCb"),EE=Symbol("_enterCb"),OF=t=>(delete t.props.mode,t),FF=OF({name:"TransitionGroup",props:cn({},PP,{tag:String,moveClass:String}),setup(t,{slots:e}){const s=jl(),n=YI();let r,o;return nP(()=>{if(!r.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!HF(r[0].el,s.vnode.el,i))return;r.forEach(qF),r.forEach(BF);const c=r.filter(VF);Qy(),c.forEach(u=>{const d=u.el,m=d.style;$o(d,i),m.transform=m.webkitTransform=m.transitionDuration="";const f=d[Mh]=p=>{p&&p.target!==d||(!p||/transform$/.test(p.propertyName))&&(d.removeEventListener("transitionend",f),d[Mh]=null,Ki(d,i))};d.addEventListener("transitionend",f)})}),()=>{const i=Gt(t),c=MP(i);let u=i.tag||De;if(r=[],o)for(let d=0;d<o.length;d++){const m=o[d];m.el&&m.el instanceof Element&&(r.push(m),Il(m,_m(m,c,n,s)),LP.set(m,m.el.getBoundingClientRect()))}o=e.default?U1(e.default()):[];for(let d=0;d<o.length;d++){const m=o[d];m.key!=null&&Il(m,_m(m,c,n,s))}return Ye(u,null,o)}}}),UF=FF;function qF(t){const e=t.el;e[Mh]&&e[Mh](),e[EE]&&e[EE]()}function BF(t){DP.set(t,t.el.getBoundingClientRect())}function VF(t){const e=LP.get(t),s=DP.get(t),n=e.left-s.left,r=e.top-s.top;if(n||r){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${r}px)`,o.transitionDuration="0s",t}}function HF(t,e,s){const n=t.cloneNode(),r=t[su];r&&r.forEach(c=>{c.split(/\s+/).forEach(u=>u&&n.classList.remove(u))}),s.split(/\s+/).forEach(c=>c&&n.classList.add(c)),n.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(n);const{hasTransform:i}=$P(n);return o.removeChild(n),i}const nu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return gt(e)?s=>Zp(e,s):e};function GF(t){t.target.composing=!0}function CE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const xi=Symbol("_assign"),xa={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[xi]=nu(r);const o=n||r.props&&r.props.type==="number";oa(t,e?"change":"input",i=>{if(i.target.composing)return;let c=t.value;s&&(c=c.trim()),o&&(c=xh(c)),t[xi](c)}),s&&oa(t,"change",()=>{t.value=t.value.trim()}),e||(oa(t,"compositionstart",GF),oa(t,"compositionend",CE),oa(t,"change",CE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:o}},i){if(t[xi]=nu(i),t.composing)return;const c=(o||t.type==="number")&&!/^0\d/.test(t.value)?xh(t.value):t.value,u=e??"";c!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===u)||(t.value=u))}},ln={deep:!0,created(t,e,s){t[xi]=nu(s),oa(t,"change",()=>{const n=t._modelValue,r=Cm(t),o=t.checked,i=t[xi];if(gt(n)){const c=A1(n,r),u=c!==-1;if(o&&!u)i(n.concat(r));else if(!o&&u){const d=[...n];d.splice(c,1),i(d)}}else if(Su(n)){const c=new Set(n);o?c.add(r):c.delete(r),i(c)}else i(NP(t,o))})},mounted:SE,beforeUpdate(t,e,s){t[xi]=nu(s),SE(t,e,s)}};function SE(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(gt(e))r=A1(e,n.props.value)>-1;else if(Su(e))r=e.has(n.props.value);else{if(e===s)return;r=rf(e,NP(t,!0))}t.checked!==r&&(t.checked=r)}const Em={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=Su(e);oa(t,"change",()=>{const o=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>s?xh(Cm(i)):Cm(i));t[xi](t.multiple?r?new Set(o):o:o[0]),t._assigning=!0,vs(()=>{t._assigning=!1})}),t[xi]=nu(n)},mounted(t,{value:e}){TE(t,e)},beforeUpdate(t,e,s){t[xi]=nu(s)},updated(t,{value:e}){t._assigning||TE(t,e)}};function TE(t,e){const s=t.multiple,n=gt(e);if(!(s&&!n&&!Su(e))){for(let r=0,o=t.options.length;r<o;r++){const i=t.options[r],c=Cm(i);if(s)if(n){const u=typeof c;u==="string"||u==="number"?i.selected=e.some(d=>String(d)===String(c)):i.selected=A1(e,c)>-1}else i.selected=e.has(c);else if(rf(Cm(i),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Cm(t){return"_value"in t?t._value:t.value}function NP(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const jF=["ctrl","shift","alt","meta"],WF={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jF.some(s=>t[`${s}Key`]&&!e.includes(s))},xt=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...o)=>{for(let i=0;i<e.length;i++){const c=WF[e[i]];if(c&&c(r,e))return}return t(r,...o)})},zF={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pl=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=r=>{if(!("key"in r))return;const o=Mi(r.key);if(e.some(i=>i===o||zF[i]===o))return t(r)})},QF=cn({patchProp:DF},yF);let AE;function KF(){return AE||(AE=HO(QF))}const YF=(...t)=>{const e=KF().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=JF(n);if(!r)return;const o=e._component;!Pt(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=s(r,!1,XF(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},e};function XF(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function JF(t){return Ys(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Cc=typeof document<"u";function OP(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ZF(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&OP(t.default)}const us=Object.assign;function xb(t,e){const s={};for(const n in e){const r=e[n];s[n]=Eo(r)?r.map(t):t(r)}return s}const Hd=()=>{},Eo=Array.isArray,FP=/#/g,eU=/&/g,tU=/\//g,sU=/=/g,nU=/\?/g,UP=/\+/g,rU=/%5B/g,oU=/%5D/g,qP=/%5E/g,iU=/%60/g,BP=/%7B/g,aU=/%7C/g,VP=/%7D/g,lU=/%20/g;function G1(t){return encodeURI(""+t).replace(aU,"|").replace(rU,"[").replace(oU,"]")}function cU(t){return G1(t).replace(BP,"{").replace(VP,"}").replace(qP,"^")}function Ky(t){return G1(t).replace(UP,"%2B").replace(lU,"+").replace(FP,"%23").replace(eU,"%26").replace(iU,"`").replace(BP,"{").replace(VP,"}").replace(qP,"^")}function uU(t){return Ky(t).replace(sU,"%3D")}function dU(t){return G1(t).replace(FP,"%23").replace(nU,"%3F")}function mU(t){return t==null?"":dU(t).replace(tU,"%2F")}function Sm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const fU=/\/$/,pU=t=>t.replace(fU,"");function kb(t,e,s="/"){let n,r={},o="",i="";const c=e.indexOf("#");let u=e.indexOf("?");return c<u&&c>=0&&(u=-1),u>-1&&(n=e.slice(0,u),o=e.slice(u+1,c>-1?c:e.length),r=t(o)),c>-1&&(n=n||e.slice(0,c),i=e.slice(c,e.length)),n=bU(n??e,s),{fullPath:n+(o&&"?")+o+i,path:n,query:r,hash:Sm(i)}}function hU(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function IE(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function gU(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&ru(e.matched[n],s.matched[r])&&HP(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function ru(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function HP(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!vU(t[s],e[s]))return!1;return!0}function vU(t,e){return Eo(t)?PE(t,e):Eo(e)?PE(e,t):t===e}function PE(t,e){return Eo(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function bU(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let o=s.length-1,i,c;for(i=0;i<n.length;i++)if(c=n[i],c!==".")if(c==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(i).join("/")}const Bi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Tm;(function(t){t.pop="pop",t.push="push"})(Tm||(Tm={}));var Gd;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Gd||(Gd={}));function yU(t){if(!t)if(Cc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),pU(t)}const _U=/^[^#]+#/;function xU(t,e){return t.replace(_U,"#")+e}function kU(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const q0=()=>({left:window.scrollX,top:window.scrollY});function wU(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=kU(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ME(t,e){return(history.state?history.state.position-e:-1)+t}const Yy=new Map;function EU(t,e){Yy.set(t,e)}function CU(t){const e=Yy.get(t);return Yy.delete(t),e}let SU=()=>location.protocol+"//"+location.host;function GP(t,e){const{pathname:s,search:n,hash:r}=e,o=t.indexOf("#");if(o>-1){let c=r.includes(t.slice(o))?t.slice(o).length:1,u=r.slice(c);return u[0]!=="/"&&(u="/"+u),IE(u,"")}return IE(s,t)+n+r}function TU(t,e,s,n){let r=[],o=[],i=null;const c=({state:p})=>{const g=GP(t,location),w=s.value,C=e.value;let E=0;if(p){if(s.value=g,e.value=p,i&&i===w){i=null;return}E=C?p.position-C.position:0}else n(g);r.forEach(k=>{k(s.value,w,{delta:E,type:Tm.pop,direction:E?E>0?Gd.forward:Gd.back:Gd.unknown})})};function u(){i=s.value}function d(p){r.push(p);const g=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return o.push(g),g}function m(){const{history:p}=window;p.state&&p.replaceState(us({},p.state,{scroll:q0()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:u,listen:d,destroy:f}}function $E(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?q0():null}}function AU(t){const{history:e,location:s}=window,n={value:GP(t,s)},r={value:e.state};r.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(u,d,m){const f=t.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+u:SU()+t+u;try{e[m?"replaceState":"pushState"](d,"",p),r.value=d}catch(g){console.error(g),s[m?"replace":"assign"](p)}}function i(u,d){const m=us({},e.state,$E(r.value.back,u,r.value.forward,!0),d,{position:r.value.position});o(u,m,!0),n.value=u}function c(u,d){const m=us({},r.value,e.state,{forward:u,scroll:q0()});o(m.current,m,!0);const f=us({},$E(n.value,u,null),{position:m.position+1},d);o(u,f,!1),n.value=u}return{location:n,state:r,push:c,replace:i}}function IU(t){t=yU(t);const e=AU(t),s=TU(t,e.state,e.location,e.replace);function n(o,i=!0){i||s.pauseListeners(),history.go(o)}const r=us({location:"",base:t,go:n,createHref:xU.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function PU(t){return typeof t=="string"||t&&typeof t=="object"}function jP(t){return typeof t=="string"||typeof t=="symbol"}const WP=Symbol("");var RE;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(RE||(RE={}));function ou(t,e){return us(new Error,{type:t,[WP]:!0},e)}function li(t,e){return t instanceof Error&&WP in t&&(e==null||!!(t.type&e))}const LE="[^/]+?",MU={sensitive:!1,strict:!1,start:!0,end:!0},$U=/[.+*?^${}()[\]/\\]/g;function RU(t,e){const s=us({},MU,e),n=[];let r=s.start?"^":"";const o=[];for(const d of t){const m=d.length?[]:[90];s.strict&&!d.length&&(r+="/");for(let f=0;f<d.length;f++){const p=d[f];let g=40+(s.sensitive?.25:0);if(p.type===0)f||(r+="/"),r+=p.value.replace($U,"\\$&"),g+=40;else if(p.type===1){const{value:w,repeatable:C,optional:E,regexp:k}=p;o.push({name:w,repeatable:C,optional:E});const A=k||LE;if(A!==LE){g+=10;try{new RegExp(`(${A})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${w}" (${A}): `+T.message)}}let S=C?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;f||(S=E&&d.length<2?`(?:/${S})`:"/"+S),E&&(S+="?"),r+=S,g+=20,E&&(g+=-8),C&&(g+=-20),A===".*"&&(g+=-50)}m.push(g)}n.push(m)}if(s.strict&&s.end){const d=n.length-1;n[d][n[d].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,s.sensitive?"":"i");function c(d){const m=d.match(i),f={};if(!m)return null;for(let p=1;p<m.length;p++){const g=m[p]||"",w=o[p-1];f[w.name]=g&&w.repeatable?g.split("/"):g}return f}function u(d){let m="",f=!1;for(const p of t){(!f||!m.endsWith("/"))&&(m+="/"),f=!1;for(const g of p)if(g.type===0)m+=g.value;else if(g.type===1){const{value:w,repeatable:C,optional:E}=g,k=w in d?d[w]:"";if(Eo(k)&&!C)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const A=Eo(k)?k.join("/"):k;if(!A)if(E)p.length<2&&(m.endsWith("/")?m=m.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);m+=A}}return m||"/"}return{re:i,score:n,keys:o,parse:c,stringify:u}}function LU(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function zP(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const o=LU(n[s],r[s]);if(o)return o;s++}if(Math.abs(r.length-n.length)===1){if(DE(n))return 1;if(DE(r))return-1}return r.length-n.length}function DE(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const DU={type:0,value:""},NU=/[a-zA-Z0-9_]/;function OU(t){if(!t)return[[]];if(t==="/")return[[DU]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${s})/"${d}": ${g}`)}let s=0,n=s;const r=[];let o;function i(){o&&r.push(o),o=[]}let c=0,u,d="",m="";function f(){d&&(s===0?o.push({type:0,value:d}):s===1||s===2||s===3?(o.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:m,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),d="")}function p(){d+=u}for(;c<t.length;){if(u=t[c++],u==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:u==="/"?(d&&f(),i()):u===":"?(f(),s=1):p();break;case 4:p(),s=n;break;case 1:u==="("?s=2:NU.test(u)?p():(f(),s=0,u!=="*"&&u!=="?"&&u!=="+"&&c--);break;case 2:u===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+u:s=3:m+=u;break;case 3:f(),s=0,u!=="*"&&u!=="?"&&u!=="+"&&c--,m="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${d}"`),f(),i(),r}function FU(t,e,s){const n=RU(OU(t.path),s),r=us(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function UU(t,e){const s=[],n=new Map;e=UE({strict:!1,end:!0,sensitive:!1},e);function r(f){return n.get(f)}function o(f,p,g){const w=!g,C=OE(f);C.aliasOf=g&&g.record;const E=UE(e,f),k=[C];if("alias"in f){const T=typeof f.alias=="string"?[f.alias]:f.alias;for(const R of T)k.push(OE(us({},C,{components:g?g.record.components:C.components,path:R,aliasOf:g?g.record:C})))}let A,S;for(const T of k){const{path:R}=T;if(p&&R[0]!=="/"){const L=p.record.path,P=L[L.length-1]==="/"?"":"/";T.path=p.record.path+(R&&P+R)}if(A=FU(T,p,E),g?g.alias.push(A):(S=S||A,S!==A&&S.alias.push(A),w&&f.name&&!FE(A)&&i(f.name)),QP(A)&&u(A),C.children){const L=C.children;for(let P=0;P<L.length;P++)o(L[P],A,g&&g.children[P])}g=g||A}return S?()=>{i(S)}:Hd}function i(f){if(jP(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(i),p.alias.forEach(i))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function c(){return s}function u(f){const p=VU(f,s);s.splice(p,0,f),f.record.name&&!FE(f)&&n.set(f.record.name,f)}function d(f,p){let g,w={},C,E;if("name"in f&&f.name){if(g=n.get(f.name),!g)throw ou(1,{location:f});E=g.record.name,w=us(NE(p.params,g.keys.filter(S=>!S.optional).concat(g.parent?g.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),f.params&&NE(f.params,g.keys.map(S=>S.name))),C=g.stringify(w)}else if(f.path!=null)C=f.path,g=s.find(S=>S.re.test(C)),g&&(w=g.parse(C),E=g.record.name);else{if(g=p.name?n.get(p.name):s.find(S=>S.re.test(p.path)),!g)throw ou(1,{location:f,currentLocation:p});E=g.record.name,w=us({},p.params,f.params),C=g.stringify(w)}const k=[];let A=g;for(;A;)k.unshift(A.record),A=A.parent;return{name:E,path:C,params:w,matched:k,meta:BU(k)}}t.forEach(f=>o(f));function m(){s.length=0,n.clear()}return{addRoute:o,resolve:d,removeRoute:i,clearRoutes:m,getRoutes:c,getRecordMatcher:r}}function NE(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function OE(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:qU(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qU(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function FE(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function BU(t){return t.reduce((e,s)=>us(e,s.meta),{})}function UE(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function VU(t,e){let s=0,n=e.length;for(;s!==n;){const o=s+n>>1;zP(t,e[o])<0?n=o:s=o+1}const r=HU(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function HU(t){let e=t;for(;e=e.parent;)if(QP(e)&&zP(t,e)===0)return e}function QP({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function GU(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const o=n[r].replace(UP," "),i=o.indexOf("="),c=Sm(i<0?o:o.slice(0,i)),u=i<0?null:Sm(o.slice(i+1));if(c in e){let d=e[c];Eo(d)||(d=e[c]=[d]),d.push(u)}else e[c]=u}return e}function qE(t){let e="";for(let s in t){const n=t[s];if(s=uU(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(Eo(n)?n.map(o=>o&&Ky(o)):[n&&Ky(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+s,o!=null&&(e+="="+o))})}return e}function jU(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=Eo(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const WU=Symbol(""),BE=Symbol(""),B0=Symbol(""),j1=Symbol(""),Xy=Symbol("");function nd(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function sa(t,e,s,n,r,o=i=>i()){const i=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((c,u)=>{const d=p=>{p===!1?u(ou(4,{from:s,to:e})):p instanceof Error?u(p):PU(p)?u(ou(2,{from:e,to:p})):(i&&n.enterCallbacks[r]===i&&typeof p=="function"&&i.push(p),c())},m=o(()=>t.call(n&&n.instances[r],e,s,d));let f=Promise.resolve(m);t.length<3&&(f=f.then(d)),f.catch(p=>u(p))})}function wb(t,e,s,n,r=o=>o()){const o=[];for(const i of t)for(const c in i.components){let u=i.components[c];if(!(e!=="beforeRouteEnter"&&!i.instances[c]))if(OP(u)){const m=(u.__vccOpts||u)[e];m&&o.push(sa(m,s,n,i,c,r))}else{let d=u();o.push(()=>d.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${c}" at "${i.path}"`);const f=ZF(m)?m.default:m;i.mods[c]=m,i.components[c]=f;const g=(f.__vccOpts||f)[e];return g&&sa(g,s,n,i,c,r)()}))}}return o}function VE(t){const e=pr(B0),s=pr(j1),n=q(()=>{const u=b(t.to);return e.resolve(u)}),r=q(()=>{const{matched:u}=n.value,{length:d}=u,m=u[d-1],f=s.matched;if(!m||!f.length)return-1;const p=f.findIndex(ru.bind(null,m));if(p>-1)return p;const g=HE(u[d-2]);return d>1&&HE(m)===g&&f[f.length-1].path!==g?f.findIndex(ru.bind(null,u[d-2])):p}),o=q(()=>r.value>-1&&XU(s.params,n.value.params)),i=q(()=>r.value>-1&&r.value===s.matched.length-1&&HP(s.params,n.value.params));function c(u={}){if(YU(u)){const d=e[b(t.replace)?"replace":"push"](b(t.to)).catch(Hd);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:n,href:q(()=>n.value.href),isActive:o,isExactActive:i,navigate:c}}function zU(t){return t.length===1?t[0]:t}const QU=Je({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:VE,setup(t,{slots:e}){const s=qa(VE(t)),{options:n}=pr(B0),r=q(()=>({[GE(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[GE(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=e.default&&zU(e.default(s));return t.custom?o:vr("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},o)}}}),KU=QU;function YU(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function XU(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Eo(r)||r.length!==n.length||n.some((o,i)=>o!==r[i]))return!1}return!0}function HE(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const GE=(t,e,s)=>t??e??s,JU=Je({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=pr(Xy),r=q(()=>t.route||n.value),o=pr(BE,0),i=q(()=>{let d=b(o);const{matched:m}=r.value;let f;for(;(f=m[d])&&!f.components;)d++;return d}),c=q(()=>r.value.matched[i.value]);Hc(BE,q(()=>i.value+1)),Hc(WU,c),Hc(Xy,r);const u=Y();return dt(()=>[u.value,c.value,t.name],([d,m,f],[p,g,w])=>{m&&(m.instances[f]=d,g&&g!==m&&d&&d===p&&(m.leaveGuards.size||(m.leaveGuards=g.leaveGuards),m.updateGuards.size||(m.updateGuards=g.updateGuards))),d&&m&&(!g||!ru(m,g)||!p)&&(m.enterCallbacks[f]||[]).forEach(C=>C(d))},{flush:"post"}),()=>{const d=r.value,m=t.name,f=c.value,p=f&&f.components[m];if(!p)return jE(s.default,{Component:p,route:d});const g=f.props[m],w=g?g===!0?d.params:typeof g=="function"?g(d):g:null,E=vr(p,us({},w,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[m]=null)},ref:u}));return jE(s.default,{Component:E,route:d})||E}}});function jE(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const ZU=JU;function e8(t){const e=UU(t.routes,t),s=t.parseQuery||GU,n=t.stringifyQuery||qE,r=t.history,o=nd(),i=nd(),c=nd(),u=On(Bi);let d=Bi;Cc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=xb.bind(null,Re=>""+Re),f=xb.bind(null,mU),p=xb.bind(null,Sm);function g(Re,$e){let Ce,Oe;return jP(Re)?(Ce=e.getRecordMatcher(Re),Oe=$e):Oe=Re,e.addRoute(Oe,Ce)}function w(Re){const $e=e.getRecordMatcher(Re);$e&&e.removeRoute($e)}function C(){return e.getRoutes().map(Re=>Re.record)}function E(Re){return!!e.getRecordMatcher(Re)}function k(Re,$e){if($e=us({},$e||u.value),typeof Re=="string"){const H=kb(s,Re,$e.path),W=e.resolve({path:H.path},$e),ge=r.createHref(H.fullPath);return us(H,W,{params:p(W.params),hash:Sm(H.hash),redirectedFrom:void 0,href:ge})}let Ce;if(Re.path!=null)Ce=us({},Re,{path:kb(s,Re.path,$e.path).path});else{const H=us({},Re.params);for(const W in H)H[W]==null&&delete H[W];Ce=us({},Re,{params:f(H)}),$e.params=f($e.params)}const Oe=e.resolve(Ce,$e),ve=Re.hash||"";Oe.params=m(p(Oe.params));const fe=hU(n,us({},Re,{hash:cU(ve),path:Oe.path})),X=r.createHref(fe);return us({fullPath:fe,hash:ve,query:n===qE?jU(Re.query):Re.query||{}},Oe,{redirectedFrom:void 0,href:X})}function A(Re){return typeof Re=="string"?kb(s,Re,u.value.path):us({},Re)}function S(Re,$e){if(d!==Re)return ou(8,{from:$e,to:Re})}function T(Re){return P(Re)}function R(Re){return T(us(A(Re),{replace:!0}))}function L(Re){const $e=Re.matched[Re.matched.length-1];if($e&&$e.redirect){const{redirect:Ce}=$e;let Oe=typeof Ce=="function"?Ce(Re):Ce;return typeof Oe=="string"&&(Oe=Oe.includes("?")||Oe.includes("#")?Oe=A(Oe):{path:Oe},Oe.params={}),us({query:Re.query,hash:Re.hash,params:Oe.path!=null?{}:Re.params},Oe)}}function P(Re,$e){const Ce=d=k(Re),Oe=u.value,ve=Re.state,fe=Re.force,X=Re.replace===!0,H=L(Ce);if(H)return P(us(A(H),{state:typeof H=="object"?us({},ve,H.state):ve,force:fe,replace:X}),$e||Ce);const W=Ce;W.redirectedFrom=$e;let ge;return!fe&&gU(n,Oe,Ce)&&(ge=ou(16,{to:W,from:Oe}),ce(Oe,Oe,!0,!1)),(ge?Promise.resolve(ge):U(W,Oe)).catch(Te=>li(Te)?li(Te,2)?Te:z(Te):le(Te,W,Oe)).then(Te=>{if(Te){if(li(Te,2))return P(us({replace:X},A(Te.to),{state:typeof Te.to=="object"?us({},ve,Te.to.state):ve,force:fe}),$e||W)}else Te=x(W,Oe,!0,X,ve);return M(W,Oe,Te),Te})}function I(Re,$e){const Ce=S(Re,$e);return Ce?Promise.reject(Ce):Promise.resolve()}function D(Re){const $e=Ee.values().next().value;return $e&&typeof $e.runWithContext=="function"?$e.runWithContext(Re):Re()}function U(Re,$e){let Ce;const[Oe,ve,fe]=t8(Re,$e);Ce=wb(Oe.reverse(),"beforeRouteLeave",Re,$e);for(const H of Oe)H.leaveGuards.forEach(W=>{Ce.push(sa(W,Re,$e))});const X=I.bind(null,Re,$e);return Ce.push(X),ze(Ce).then(()=>{Ce=[];for(const H of o.list())Ce.push(sa(H,Re,$e));return Ce.push(X),ze(Ce)}).then(()=>{Ce=wb(ve,"beforeRouteUpdate",Re,$e);for(const H of ve)H.updateGuards.forEach(W=>{Ce.push(sa(W,Re,$e))});return Ce.push(X),ze(Ce)}).then(()=>{Ce=[];for(const H of fe)if(H.beforeEnter)if(Eo(H.beforeEnter))for(const W of H.beforeEnter)Ce.push(sa(W,Re,$e));else Ce.push(sa(H.beforeEnter,Re,$e));return Ce.push(X),ze(Ce)}).then(()=>(Re.matched.forEach(H=>H.enterCallbacks={}),Ce=wb(fe,"beforeRouteEnter",Re,$e,D),Ce.push(X),ze(Ce))).then(()=>{Ce=[];for(const H of i.list())Ce.push(sa(H,Re,$e));return Ce.push(X),ze(Ce)}).catch(H=>li(H,8)?H:Promise.reject(H))}function M(Re,$e,Ce){c.list().forEach(Oe=>D(()=>Oe(Re,$e,Ce)))}function x(Re,$e,Ce,Oe,ve){const fe=S(Re,$e);if(fe)return fe;const X=$e===Bi,H=Cc?history.state:{};Ce&&(Oe||X?r.replace(Re.fullPath,us({scroll:X&&H&&H.scroll},ve)):r.push(Re.fullPath,ve)),u.value=Re,ce(Re,$e,Ce,X),z()}let $;function Z(){$||($=r.listen((Re,$e,Ce)=>{if(!Ue.listening)return;const Oe=k(Re),ve=L(Oe);if(ve){P(us(ve,{replace:!0,force:!0}),Oe).catch(Hd);return}d=Oe;const fe=u.value;Cc&&EU(ME(fe.fullPath,Ce.delta),q0()),U(Oe,fe).catch(X=>li(X,12)?X:li(X,2)?(P(us(A(X.to),{force:!0}),Oe).then(H=>{li(H,20)&&!Ce.delta&&Ce.type===Tm.pop&&r.go(-1,!1)}).catch(Hd),Promise.reject()):(Ce.delta&&r.go(-Ce.delta,!1),le(X,Oe,fe))).then(X=>{X=X||x(Oe,fe,!1),X&&(Ce.delta&&!li(X,8)?r.go(-Ce.delta,!1):Ce.type===Tm.pop&&li(X,20)&&r.go(-1,!1)),M(Oe,fe,X)}).catch(Hd)}))}let me=nd(),re=nd(),J;function le(Re,$e,Ce){z(Re);const Oe=re.list();return Oe.length?Oe.forEach(ve=>ve(Re,$e,Ce)):console.error(Re),Promise.reject(Re)}function se(){return J&&u.value!==Bi?Promise.resolve():new Promise((Re,$e)=>{me.add([Re,$e])})}function z(Re){return J||(J=!Re,Z(),me.list().forEach(([$e,Ce])=>Re?Ce(Re):$e()),me.reset()),Re}function ce(Re,$e,Ce,Oe){const{scrollBehavior:ve}=t;if(!Cc||!ve)return Promise.resolve();const fe=!Ce&&CU(ME(Re.fullPath,0))||(Oe||!Ce)&&history.state&&history.state.scroll||null;return vs().then(()=>ve(Re,$e,fe)).then(X=>X&&wU(X)).catch(X=>le(X,Re,$e))}const pe=Re=>r.go(Re);let _e;const Ee=new Set,Ue={currentRoute:u,listening:!0,addRoute:g,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:C,resolve:k,options:t,push:T,replace:R,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:c.add,onError:re.add,isReady:se,install(Re){const $e=this;Re.component("RouterLink",KU),Re.component("RouterView",ZU),Re.config.globalProperties.$router=$e,Object.defineProperty(Re.config.globalProperties,"$route",{enumerable:!0,get:()=>b(u)}),Cc&&!_e&&u.value===Bi&&(_e=!0,T(r.location).catch(ve=>{}));const Ce={};for(const ve in Bi)Object.defineProperty(Ce,ve,{get:()=>u.value[ve],enumerable:!0});Re.provide(B0,$e),Re.provide(j1,DI(Ce)),Re.provide(Xy,u);const Oe=Re.unmount;Ee.add(Re),Re.unmount=function(){Ee.delete(Re),Ee.size<1&&(d=Bi,$&&$(),$=null,u.value=Bi,_e=!1,J=!1),Oe()}}};function ze(Re){return Re.reduce(($e,Ce)=>$e.then(()=>D(Ce)),Promise.resolve())}return Ue}function t8(t,e){const s=[],n=[],r=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const c=e.matched[i];c&&(t.matched.find(d=>ru(d,c))?n.push(c):s.push(c));const u=t.matched[i];u&&(e.matched.find(d=>ru(d,u))||r.push(u))}return[s,n,r]}function Tu(){return pr(B0)}function W1(t){return pr(j1)}/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let KP;const V0=t=>KP=t,YP=Symbol();function Jy(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var jd;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(jd||(jd={}));function s8(){const t=I1(!0),e=t.run(()=>Y({}));let s=[],n=[];const r=O1({install(o){V0(r),r._a=o,o.provide(YP,r),o.config.globalProperties.$pinia=r,n.forEach(i=>s.push(i)),n=[]},use(o){return this._a?s.push(o):n.push(o),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return r}const XP=()=>{};function WE(t,e,s,n=XP){t.push(e);const r=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),n())};return!s&&P1()&&_I(r),r}function dc(t,...e){t.slice().forEach(s=>{s(...e)})}const n8=t=>t(),zE=Symbol(),Eb=Symbol();function Zy(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,n)=>t.set(n,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const n=e[s],r=t[s];Jy(r)&&Jy(n)&&t.hasOwnProperty(s)&&!ws(n)&&!_i(n)?t[s]=Zy(r,n):t[s]=n}return t}const r8=Symbol();function o8(t){return!Jy(t)||!t.hasOwnProperty(r8)}const{assign:Yi}=Object;function i8(t){return!!(ws(t)&&t.effect)}function a8(t,e,s,n){const{state:r,actions:o,getters:i}=e,c=s.state.value[t];let u;function d(){c||(s.state.value[t]=r?r():{});const m=FI(s.state.value[t]);return Yi(m,o,Object.keys(i||{}).reduce((f,p)=>(f[p]=O1(q(()=>{V0(s);const g=s._s.get(t);return i[p].call(g,g)})),f),{}))}return u=JP(t,d,e,s,n,!0),u}function JP(t,e,s={},n,r,o){let i;const c=Yi({actions:{}},s),u={deep:!0};let d,m,f=[],p=[],g;const w=n.state.value[t];!o&&!w&&(n.state.value[t]={}),Y({});let C;function E(I){let D;d=m=!1,typeof I=="function"?(I(n.state.value[t]),D={type:jd.patchFunction,storeId:t,events:g}):(Zy(n.state.value[t],I),D={type:jd.patchObject,payload:I,storeId:t,events:g});const U=C=Symbol();vs().then(()=>{C===U&&(d=!0)}),m=!0,dc(f,D,n.state.value[t])}const k=o?function(){const{state:D}=s,U=D?D():{};this.$patch(M=>{Yi(M,U)})}:XP;function A(){i.stop(),f=[],p=[],n._s.delete(t)}const S=(I,D="")=>{if(zE in I)return I[Eb]=D,I;const U=function(){V0(n);const M=Array.from(arguments),x=[],$=[];function Z(J){x.push(J)}function me(J){$.push(J)}dc(p,{args:M,name:U[Eb],store:R,after:Z,onError:me});let re;try{re=I.apply(this&&this.$id===t?this:R,M)}catch(J){throw dc($,J),J}return re instanceof Promise?re.then(J=>(dc(x,J),J)).catch(J=>(dc($,J),Promise.reject(J))):(dc(x,re),re)};return U[zE]=!0,U[Eb]=D,U},T={_p:n,$id:t,$onAction:WE.bind(null,p),$patch:E,$reset:k,$subscribe(I,D={}){const U=WE(f,I,D.detached,()=>M()),M=i.run(()=>dt(()=>n.state.value[t],x=>{(D.flush==="sync"?m:d)&&I({storeId:t,type:jd.direct,events:g},x)},Yi({},u,D)));return U},$dispose:A},R=qa(T);n._s.set(t,R);const P=(n._a&&n._a.runWithContext||n8)(()=>n._e.run(()=>(i=I1()).run(()=>e({action:S}))));for(const I in P){const D=P[I];if(ws(D)&&!i8(D)||_i(D))o||(w&&o8(D)&&(ws(D)?D.value=w[I]:Zy(D,w[I])),n.state.value[t][I]=D);else if(typeof D=="function"){const U=S(D,I);P[I]=U,c.actions[I]=D}}return Yi(R,P),Yi(Gt(R),P),Object.defineProperty(R,"$state",{get:()=>n.state.value[t],set:I=>{E(D=>{Yi(D,I)})}}),n._p.forEach(I=>{Yi(R,i.run(()=>I({store:R,app:n._a,pinia:n,options:c})))}),w&&o&&s.hydrate&&s.hydrate(R.$state,w),d=!0,m=!0,R}/*! #__NO_SIDE_EFFECTS__ */function Es(t,e,s){let n;const r=typeof e=="function";n=r?s:e;function o(i,c){const u=q1();return i=i||(u?pr(YP,null):null),i&&V0(i),i=KP,i._s.has(t)||(r?JP(t,e,n,i):a8(t,n,i)),i._s.get(t)}return o.$id=t,o}function e_(t){const e=Gt(t),s={};for(const n in e){const r=e[n];r.effect?s[n]=q({get:()=>t[n],set(o){t[n]=o}}):(ws(r)||_i(r))&&(s[n]=oO(t,n))}return s}function l8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cb,QE;function c8(){return QE||(QE=1,Cb=function(t,e,s){if(t==null||e==null)return t;var n=String(t),r=typeof e=="number"?e:parseInt(e,10);if(isNaN(r)||!isFinite(r))return n;var o=n.length;if(o>=r)return n;var i=s==null?"":String(s);i===""&&(i=" ");for(var c=r-o;i.length<c;)i+=i;var u=i.length>c?i.substr(0,c):i;return n+u}),Cb}var u8=c8();const Sb=l8(u8);var Sc=9e15,op=function(){for(var t=[],e=-323;e<=308;e++)t.push(+("1e"+e));return function(s){return t[s+323]}}(),et=function(t){return t instanceof Se?t:new Se(t)},hr=function(t,e){return new Se().fromMantissaExponent(t,e)},dl=function(t,e){return new Se().fromMantissaExponent_noNormalize(t,e)};function d8(t,e,s,n){var r=e.mul(s.pow(n));return Se.floor(t.div(r).mul(s.sub(1)).add(1).log10()/s.log10())}function m8(t,e,s,n){return e.mul(s.pow(n)).mul(Se.sub(1,s.pow(t))).div(Se.sub(1,s))}var Se=function(){function t(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(t.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),t.fromMantissaExponent=function(e,s){return new t().fromMantissaExponent(e,s)},t.fromMantissaExponent_noNormalize=function(e,s){return new t().fromMantissaExponent_noNormalize(e,s)},t.fromDecimal=function(e){return new t().fromDecimal(e)},t.fromNumber=function(e){return new t().fromNumber(e)},t.fromString=function(e){return new t().fromString(e)},t.fromValue=function(e){return new t().fromValue(e)},t.fromValue_noAlloc=function(e){return e instanceof t?e:new t(e)},t.abs=function(e){return et(e).abs()},t.neg=function(e){return et(e).neg()},t.negate=function(e){return et(e).neg()},t.negated=function(e){return et(e).neg()},t.sign=function(e){return et(e).sign()},t.sgn=function(e){return et(e).sign()},t.round=function(e){return et(e).round()},t.floor=function(e){return et(e).floor()},t.ceil=function(e){return et(e).ceil()},t.trunc=function(e){return et(e).trunc()},t.add=function(e,s){return et(e).add(s)},t.plus=function(e,s){return et(e).add(s)},t.sub=function(e,s){return et(e).sub(s)},t.subtract=function(e,s){return et(e).sub(s)},t.minus=function(e,s){return et(e).sub(s)},t.mul=function(e,s){return et(e).mul(s)},t.multiply=function(e,s){return et(e).mul(s)},t.times=function(e,s){return et(e).mul(s)},t.div=function(e,s){return et(e).div(s)},t.divide=function(e,s){return et(e).div(s)},t.recip=function(e){return et(e).recip()},t.reciprocal=function(e){return et(e).recip()},t.reciprocate=function(e){return et(e).reciprocate()},t.cmp=function(e,s){return et(e).cmp(s)},t.compare=function(e,s){return et(e).cmp(s)},t.eq=function(e,s){return et(e).eq(s)},t.equals=function(e,s){return et(e).eq(s)},t.neq=function(e,s){return et(e).neq(s)},t.notEquals=function(e,s){return et(e).notEquals(s)},t.lt=function(e,s){return et(e).lt(s)},t.lte=function(e,s){return et(e).lte(s)},t.gt=function(e,s){return et(e).gt(s)},t.gte=function(e,s){return et(e).gte(s)},t.max=function(e,s){return et(e).max(s)},t.min=function(e,s){return et(e).min(s)},t.clamp=function(e,s,n){return et(e).clamp(s,n)},t.clampMin=function(e,s){return et(e).clampMin(s)},t.clampMax=function(e,s){return et(e).clampMax(s)},t.cmp_tolerance=function(e,s,n){return et(e).cmp_tolerance(s,n)},t.compare_tolerance=function(e,s,n){return et(e).cmp_tolerance(s,n)},t.eq_tolerance=function(e,s,n){return et(e).eq_tolerance(s,n)},t.equals_tolerance=function(e,s,n){return et(e).eq_tolerance(s,n)},t.neq_tolerance=function(e,s,n){return et(e).neq_tolerance(s,n)},t.notEquals_tolerance=function(e,s,n){return et(e).notEquals_tolerance(s,n)},t.lt_tolerance=function(e,s,n){return et(e).lt_tolerance(s,n)},t.lte_tolerance=function(e,s,n){return et(e).lte_tolerance(s,n)},t.gt_tolerance=function(e,s,n){return et(e).gt_tolerance(s,n)},t.gte_tolerance=function(e,s,n){return et(e).gte_tolerance(s,n)},t.log10=function(e){return et(e).log10()},t.absLog10=function(e){return et(e).absLog10()},t.pLog10=function(e){return et(e).pLog10()},t.log=function(e,s){return et(e).log(s)},t.log2=function(e){return et(e).log2()},t.ln=function(e){return et(e).ln()},t.logarithm=function(e,s){return et(e).logarithm(s)},t.pow10=function(e){return Number.isInteger(e)?dl(1,e):hr(Math.pow(10,e%1),Math.trunc(e))},t.pow=function(e,s){return typeof e=="number"&&e===10&&typeof s=="number"&&Number.isInteger(s)?dl(1,s):et(e).pow(s)},t.exp=function(e){return et(e).exp()},t.sqr=function(e){return et(e).sqr()},t.sqrt=function(e){return et(e).sqrt()},t.cube=function(e){return et(e).cube()},t.cbrt=function(e){return et(e).cbrt()},t.dp=function(e){return et(e).dp()},t.decimalPlaces=function(e){return et(e).dp()},t.affordGeometricSeries=function(e,s,n,r){return d8(et(e),et(s),et(n),r)},t.sumGeometricSeries=function(e,s,n,r){return m8(e,et(s),et(n),r)},t.affordArithmeticSeries=function(e,s,n,r){return function(o,i,c,u){var d=i.add(u.mul(c)).sub(c.div(2)),m=d.pow(2);return d.neg().add(m.add(c.mul(o).mul(2)).sqrt()).div(c).floor()}(et(e),et(s),et(n),et(r))},t.sumArithmeticSeries=function(e,s,n,r){return function(o,i,c,u){var d=i.add(u.mul(c));return o.div(2).mul(d.mul(2).plus(o.sub(1).mul(c)))}(et(e),et(s),et(n),et(r))},t.efficiencyOfPurchase=function(e,s,n){return function(r,o,i){return r.div(o).add(r.div(i))}(et(e),et(s),et(n))},t.randomDecimalForTesting=function(e){if(20*Math.random()<1)return dl(0,0);var s=10*Math.random();10*Math.random()<1&&(s=Math.round(s)),s*=Math.sign(2*Math.random()-1);var n=Math.floor(Math.random()*e*2)-e;return hr(s,n)},t.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/op(e),this.e+=e,this},t.prototype.fromMantissaExponent=function(e,s){return isFinite(e)&&isFinite(s)?(this.m=e,this.e=s,this.normalize(),this):(e=Number.NaN,s=Number.NaN,this)},t.prototype.fromMantissaExponent_noNormalize=function(e,s){return this.m=e,this.e=s,this},t.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},t.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=Sc):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=Sc):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/op(this.e),this.normalize()),this},t.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var s=e.split("e");this.m=parseFloat(s[0]),this.e=parseFloat(s[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},t.prototype.fromValue=function(e){return e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},t.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*op(this.e);if(!isFinite(e)||this.e<0)return e;var s=Math.round(e);return Math.abs(s-e)<1e-10?s:e},t.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var s=e+1,n=Math.ceil(Math.log10(Math.abs(this.m))),r=Math.round(this.m*Math.pow(10,s-n))*Math.pow(10,n-s);return parseFloat(r.toFixed(Math.max(s-n,0)))},t.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=Sc?this.m>0?"Infinity":"-Infinity":this.e<=-9e15||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=Sc)return this.m>0?"Infinity":"-Infinity";if(this.e<=-9e15||this.m===0)return"0"+(e>0?Sb(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var s=e+1,n=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,s-n))*Math.pow(10,n-s)).toFixed(Math.max(s-n,0))+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=Sc?this.m>0?"Infinity":"-Infinity":this.e<=-9e15||this.m===0?"0"+(e>0?Sb(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?Sb(".",e+1,"0"):""):this.toNumber().toFixed(e)},t.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},t.prototype.valueOf=function(){return this.toString()},t.prototype.toJSON=function(){return this.toString()},t.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},t.prototype.abs=function(){return dl(Math.abs(this.m),this.e)},t.prototype.neg=function(){return dl(-this.m,this.e)},t.prototype.negate=function(){return this.neg()},t.prototype.negated=function(){return this.neg()},t.prototype.sign=function(){return Math.sign(this.m)},t.prototype.sgn=function(){return this.sign()},t.prototype.round=function(){return this.e<-1?new t(0):this.e<17?new t(Math.round(this.toNumber())):this},t.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new t(0):new t(-1):this.e<17?new t(Math.floor(this.toNumber())):this},t.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new t(1):new t(0):this.e<17?new t(Math.ceil(this.toNumber())):this},t.prototype.trunc=function(){return this.e<0?new t(0):this.e<17?new t(Math.trunc(this.toNumber())):this},t.prototype.add=function(e){var s,n,r=et(e);if(this.m===0)return r;if(r.m===0)return this;if(this.e>=r.e?(s=this,n=r):(s=r,n=this),s.e-n.e>17)return s;var o=Math.round(1e14*s.m+1e14*n.m*op(n.e-s.e));return hr(o,s.e-14)},t.prototype.plus=function(e){return this.add(e)},t.prototype.sub=function(e){return this.add(et(e).neg())},t.prototype.subtract=function(e){return this.sub(e)},t.prototype.minus=function(e){return this.sub(e)},t.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?hr(this.m*e,this.e):hr(1e-307*this.m*e,this.e+307);var s=typeof e=="string"?new t(e):e;return hr(this.m*s.m,this.e+s.e)},t.prototype.multiply=function(e){return this.mul(e)},t.prototype.times=function(e){return this.mul(e)},t.prototype.div=function(e){return this.mul(et(e).recip())},t.prototype.divide=function(e){return this.div(e)},t.prototype.divideBy=function(e){return this.div(e)},t.prototype.dividedBy=function(e){return this.div(e)},t.prototype.recip=function(){return hr(1/this.m,-this.e)},t.prototype.reciprocal=function(){return this.recip()},t.prototype.reciprocate=function(){return this.recip()},t.prototype.cmp=function(e){var s=et(e);if(this.m===0){if(s.m===0)return 0;if(s.m<0)return 1;if(s.m>0)return-1}if(s.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return s.m<0||this.e>s.e?1:this.e<s.e?-1:this.m>s.m?1:this.m<s.m?-1:0;if(this.m<0)return s.m>0||this.e>s.e?-1:this.e<s.e||this.m>s.m?1:this.m<s.m?-1:0;throw Error("Unreachable code")},t.prototype.compare=function(e){return this.cmp(e)},t.prototype.eq=function(e){var s=et(e);return this.e===s.e&&this.m===s.m},t.prototype.equals=function(e){return this.eq(e)},t.prototype.neq=function(e){return!this.eq(e)},t.prototype.notEquals=function(e){return this.neq(e)},t.prototype.lt=function(e){var s=et(e);return this.m===0?s.m>0:s.m===0?this.m<=0:this.e===s.e?this.m<s.m:this.m>0?s.m>0&&this.e<s.e:s.m>0||this.e>s.e},t.prototype.lte=function(e){return!this.gt(e)},t.prototype.gt=function(e){var s=et(e);return this.m===0?s.m<0:s.m===0?this.m>0:this.e===s.e?this.m>s.m:this.m>0?s.m<0||this.e>s.e:s.m<0&&this.e<s.e},t.prototype.gte=function(e){return!this.lt(e)},t.prototype.max=function(e){var s=et(e);return this.lt(s)?s:this},t.prototype.min=function(e){var s=et(e);return this.gt(s)?s:this},t.prototype.clamp=function(e,s){return this.max(e).min(s)},t.prototype.clampMin=function(e){return this.max(e)},t.prototype.clampMax=function(e){return this.min(e)},t.prototype.cmp_tolerance=function(e,s){var n=et(e);return this.eq_tolerance(n,s)?0:this.cmp(n)},t.prototype.compare_tolerance=function(e,s){return this.cmp_tolerance(e,s)},t.prototype.eq_tolerance=function(e,s){var n=et(e);return t.lte(this.sub(n).abs(),t.max(this.abs(),n.abs()).mul(s))},t.prototype.equals_tolerance=function(e,s){return this.eq_tolerance(e,s)},t.prototype.neq_tolerance=function(e,s){return!this.eq_tolerance(e,s)},t.prototype.notEquals_tolerance=function(e,s){return this.neq_tolerance(e,s)},t.prototype.lt_tolerance=function(e,s){var n=et(e);return!this.eq_tolerance(n,s)&&this.lt(n)},t.prototype.lte_tolerance=function(e,s){var n=et(e);return this.eq_tolerance(n,s)||this.lt(n)},t.prototype.gt_tolerance=function(e,s){var n=et(e);return!this.eq_tolerance(n,s)&&this.gt(n)},t.prototype.gte_tolerance=function(e,s){var n=et(e);return this.eq_tolerance(n,s)||this.gt(n)},t.prototype.log10=function(){return this.e+Math.log10(this.m)},t.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},t.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},t.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},t.prototype.log2=function(){return 3.321928094887362*this.log10()},t.prototype.ln=function(){return 2.302585092994045*this.log10()},t.prototype.logarithm=function(e){return this.log(e)},t.prototype.pow=function(e){var s,n=e instanceof t?e.toNumber():e,r=this.e*n;if(Number.isSafeInteger(r)&&(s=Math.pow(this.m,n),isFinite(s)&&s!==0))return hr(s,r);var o=Math.trunc(r),i=r-o;if(s=Math.pow(10,n*Math.log10(this.m)+i),isFinite(s)&&s!==0)return hr(s,o);var c=t.pow10(n*this.absLog10());return this.sign()===-1?Math.abs(n%2)===1?c.neg():Math.abs(n%2)===0?c:new t(Number.NaN):c},t.prototype.pow_base=function(e){return et(e).pow(this)},t.prototype.factorial=function(){var e=this.toNumber()+1;return t.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},t.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?t.fromNumber(Math.exp(e)):t.pow(Math.E,e)},t.prototype.sqr=function(){return hr(Math.pow(this.m,2),2*this.e)},t.prototype.sqrt=function(){return this.m<0?new t(Number.NaN):this.e%2!=0?hr(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):hr(Math.sqrt(this.m),Math.floor(this.e/2))},t.prototype.cube=function(){return hr(Math.pow(this.m,3),3*this.e)},t.prototype.cbrt=function(){var e=1,s=this.m;s<0&&(e=-1,s=-s);var n=e*Math.pow(s,1/3),r=this.e%3;return hr(r===1||r===-1?2.154434690031883*n:r!==0?4.641588833612778*n:n,Math.floor(this.e/3))},t.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},t.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},t.prototype.tanh=function(){return this.sinh().div(this.cosh())},t.prototype.asinh=function(){return t.ln(this.add(this.sqr().add(1).sqrt()))},t.prototype.acosh=function(){return t.ln(this.add(this.sqr().sub(1).sqrt()))},t.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:t.ln(this.add(1).div(new t(1).sub(this)))/2},t.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},t.prototype.egg=function(){return this.add(9)},t.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},t.prototype.lessThan=function(e){return this.cmp(e)<0},t.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},t.prototype.greaterThan=function(e){return this.cmp(e)>0},t.prototype.decimalPlaces=function(){return this.dp()},t.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,s=-this.exponent,n=1;Math.abs(Math.round(e*n)/n-e)>1e-10;)n*=10,s++;return s>0?s:0},Object.defineProperty(t,"MAX_VALUE",{get:function(){return f8},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MIN_VALUE",{get:function(){return p8},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MAX_VALUE",{get:function(){return h8},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MIN_VALUE",{get:function(){return g8},enumerable:!1,configurable:!0}),t}(),f8=dl(1,Sc),p8=dl(1,-9e15),h8=et(Number.MAX_VALUE),g8=et(Number.MIN_VALUE);function l(t){return new Se(t)}function be(t,e=2){if(!t)return"0";try{if(t.eq(t).toString()==="false")return"0"}catch{return"0"}if(t.eq(0)||t.lt(.01))return"0";if(t.lt(1e3)){const s=t.toFixed(e);return s.includes(".")?s.replace(/\.?0+$/,""):s}else return t.lt(1e6)?`${t.div(1e3).toFixed(e)}K`:t.lt(1e9)?`${t.div(1e6).toFixed(e)}M`:t.lt(1e12)?`${t.div(1e9).toFixed(e)}B`:t.lt(1e15)?`${t.div(1e12).toFixed(e)}T`:t.toExponential(e)}function v8(t){const e=t,s=l(3),n=l(1.065).add(l(.004).mul(e)),r=e,o=e.sub(999).max(0).div(1e3),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function b8(t){const e=t,s=l(2e3),n=l(2.9).add(l(.3).mul(e)),r=e,o=e.sub(199).max(0).div(500),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function y8(t){const e=t,s=l(1e8),n=l(20).add(l(10).mul(e)),r=e,o=e.sub(99).max(0).div(l(1e3).div(3)),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function _8(t){const e=t,s=l(4e18),n=l(50).add(l(30).mul(e)),r=e,o=e.sub(74).max(0).div(200),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function x8(t){const e=t,s=l("5e46"),n=l(220).add(l(80).mul(e)),r=e,o=e.sub(49).max(0).div(200),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function k8(t){const e=t,s=l("6e200"),n=l("6e5").add(l("6e5").mul(e)),r=e,o=e.div(l(500).div(3)),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function w8(t){const e=t,s=l("7e500"),n=l("7e7").add(l("7e7").mul(e)),r=e,o=e.div(50),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function E8(t){const e=t,s=l("6e750"),n=l("6e8").add(l("6e7").mul(e)),r=e,o=e.div(50),i=r.mul(l(1).add(o));return s.mul(n.pow(i))}function ZP(t,e){switch(t){case 1:return v8(e);case 2:return b8(e);case 3:return y8(e);case 4:return _8(e);case 5:return x8(e);case 6:return k8(e);case 7:return w8(e);case 8:return E8(e);default:return l(10).mul(l(1.1).pow(e))}}function Lt(t){const e=typeof t=="number"?new Se(t):t;if(e.lt(1e-4))return`${e.mul(100).toExponential(2)}%`;if(e.lt(.01))return`${e.mul(100).toFixed(4)}%`;if(e.lt(.1))return`${e.mul(100).toFixed(3)}%`;if(e.lt(1))return`${e.mul(100).toFixed(2)}%`;if(e.lt(10))return`${e.mul(100).toFixed(1)}%`;if(e.lt(10))return`${e.mul(100).toFixed(0)}%`;{const s=e.mul(100);return s.lt(1e3)?`${s.toFixed(0)}%`:s.lt(1e6)?`${s.div(1e3).toFixed(2)}K%`:s.lt(1e9)?`${s.div(1e6).toFixed(2)}M%`:s.lt(1e12)?`${s.div(1e9).toFixed(2)}B%`:s.lt(1e15)?`${s.div(1e12).toFixed(2)}T%`:`${s.toExponential(2)}%`}}const C8="modulepreload",S8=function(t){return"/"+t},KE={},e3=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(s.map(u=>{if(u=S8(u),u in KE)return;KE[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":C8,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},T8=[{id:"workerEfficiency",generatorId:"worker",name:"Worker Efficiency",description:"Increases food production of worker ants",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased food production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"workerTraining",generatorId:"worker",name:"Worker Training",description:"Decreases the cost of worker ants",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased worker cost`,icon:"i-heroicons-academic-cap",unlocked:!0},{id:"workerForaging",generatorId:"worker",name:"Advanced Foraging",description:"Workers find higher quality food sources",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased food quality`,icon:"i-heroicons-map",unlocked:!0},{id:"workerEndurance",generatorId:"worker",name:"Worker Endurance",description:"Workers can carry more food per trip",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.1)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased carrying capacity`,icon:"i-heroicons-battery-100",unlocked:!0},{id:"workerBase",generatorId:"worker",name:"Worker Base",description:"Increases base food production of workers by 10",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.mul(10).toFixed(0)} base food production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"nurseryEfficiency",generatorId:"nursery",name:"Nursery Efficiency",description:"Increases worker ant production of nurseries",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased worker production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"nurseryExpansion",generatorId:"nursery",name:"Nursery Expansion",description:"Decreases the cost of nurseries",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased nursery cost`,icon:"i-heroicons-home",unlocked:!0},{id:"nurseryNutrition",generatorId:"nursery",name:"Larval Nutrition",description:"Better nutrition leads to faster worker development",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% faster worker development`,icon:"i-heroicons-beaker",unlocked:!0},{id:"nurseryCapacity",generatorId:"nursery",name:"Nursery Capacity",description:"Nurseries can care for more larvae simultaneously",cost:l(2),level:l(0),maxLevel:l(6),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased larvae capacity`,icon:"i-heroicons-cube",unlocked:!0},{id:"nurseryBase",generatorId:"nursery",name:"Nursery Base",description:"Increases base worker production of nurseries by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base worker production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"queenChamberEfficiency",generatorId:"queenChamber",name:"Queen Efficiency",description:"Increases nursery production of queen chambers",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased nursery production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"queenChamberLongevity",generatorId:"queenChamber",name:"Queen Longevity",description:"Decreases the cost of queen chambers",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased queen chamber cost`,icon:"i-heroicons-clock",unlocked:!0},{id:"queenChamberFertility",generatorId:"queenChamber",name:"Queen Fertility",description:"Queen chambers occasionally create new queens",cost:l(3),level:l(0),maxLevel:l(5),effect:t=>l(t.mul(.005)),formatEffect:t=>`${t.mul(100).toFixed(1)}% chance to generate a free queen chamber per tick`,icon:"i-heroicons-heart",unlocked:!0},{id:"queenChamberRoyalJelly",generatorId:"queenChamber",name:"Royal Jelly",description:"Special food increases queen egg production",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased egg production`,icon:"i-heroicons-fire",unlocked:!0},{id:"queenChamberGuards",generatorId:"queenChamber",name:"Royal Guards",description:"Special guards protect the queen, increasing productivity",cost:l(2),level:l(0),maxLevel:l(6),effect:t=>l(1).add(t.mul(.1)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased productivity`,icon:"i-heroicons-shield-check",unlocked:!0},{id:"queenChamberEvolution",generatorId:"queenChamber",name:"Royal Evolution",description:"Queens enhance evolution potential, increasing EP gain by 0.05% per level per manual purchase of queen chamber per evolution done",cost:l(3),level:l(0),maxLevel:l(5),effect:t=>l(t.mul(5e-4)),formatEffect:t=>`+${t.mul(100).toFixed(3)}% EP gain per queen chamber per evolution`,icon:"i-heroicons-sparkles",unlocked:!0},{id:"queenChamberBase",generatorId:"queenChamber",name:"Queen Chamber Base",description:"Increases base nursery production of queen chambers by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base nursery production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"colonyEfficiency",generatorId:"colony",name:"Colony Efficiency",description:"Increases queen chamber production of colonies",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased queen chamber production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"colonyExpansion",generatorId:"colony",name:"Colony Expansion",description:"Decreases the cost of colonies",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased colony cost`,icon:"i-heroicons-building-office-2",unlocked:!0},{id:"colonyOrganization",generatorId:"colony",name:"Colony Organization",description:"Better organization leads to increased productivity",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased productivity`,icon:"i-heroicons-squares-2x2",unlocked:!0},{id:"colonyInfrastructure",generatorId:"colony",name:"Colony Infrastructure",description:"Improved tunnels and chambers increase overall efficiency",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased efficiency`,icon:"i-heroicons-cube-transparent",unlocked:!0},{id:"colonyBase",generatorId:"colony",name:"Colony Base",description:"Increases base queen chamber production of colonies by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base queen chamber production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"megacolonyEfficiency",generatorId:"megacolony",name:"Megacolony Efficiency",description:"Increases colony production of megacolonies",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased colony production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"megacolonyExpansion",generatorId:"megacolony",name:"Megacolony Expansion",description:"Decreases the cost of megacolonies",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased megacolony cost`,icon:"i-heroicons-building-office",unlocked:!0},{id:"megacolonyNetworking",generatorId:"megacolony",name:"Colony Networking",description:"Enhanced communication between colonies increases production",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased production`,icon:"i-heroicons-share",unlocked:!0},{id:"megacolonyTerritory",generatorId:"megacolony",name:"Territory Control",description:"Better territory management improves resource gathering",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% improved resource gathering`,icon:"i-heroicons-map",unlocked:!0},{id:"megacolonyBase",generatorId:"megacolony",name:"Megacolony Base",description:"Increases base colony production of megacolonies by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base colony production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"hivemindEfficiency",generatorId:"hivemind",name:"Hivemind Efficiency",description:"Increases megacolony production of hiveminds",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased megacolony production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"hivemindExpansion",generatorId:"hivemind",name:"Hivemind Expansion",description:"Decreases the cost of hiveminds",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased hivemind cost`,icon:"i-heroicons-globe-americas",unlocked:!0},{id:"hivemindSynergy",generatorId:"hivemind",name:"Collective Synergy",description:"Enhanced collective consciousness improves coordination",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% improved coordination`,icon:"i-heroicons-cpu-chip",unlocked:!0},{id:"hivemindIntelligence",generatorId:"hivemind",name:"Collective Intelligence",description:"Increased cognitive capacity improves decision making",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% improved decision making`,icon:"i-heroicons-brain",unlocked:!0},{id:"hivemindBase",generatorId:"hivemind",name:"Hivemind Base",description:"Increases base megacolony production of hiveminds by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base megacolony production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"antopolisEfficiency",generatorId:"antopolis",name:"Antopolis Efficiency",description:"Increases hivemind production of antopolis",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased hivemind production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"antopolisExpansion",generatorId:"antopolis",name:"Antopolis Expansion",description:"Decreases the cost of antopolis",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased antopolis cost`,icon:"i-heroicons-building-library",unlocked:!0},{id:"antopolisInnovation",generatorId:"antopolis",name:"Technological Innovation",description:"Advanced technology increases overall productivity",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased productivity`,icon:"i-heroicons-light-bulb",unlocked:!0},{id:"antopolisCivilization",generatorId:"antopolis",name:"Ant Civilization",description:"Cultural and social advances improve efficiency",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% improved efficiency`,icon:"i-heroicons-academic-cap",unlocked:!0},{id:"antopolisBase",generatorId:"antopolis",name:"Antopolis Base",description:"Increases base hivemind production of antopolis by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base hivemind production`,icon:"i-heroicons-building-storefront",unlocked:!0},{id:"alateHatcheryEfficiency",generatorId:"alateHatchery",name:"Hatchery Efficiency",description:"Increases antopolis production of alate hatcheries",cost:l(1),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.2)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% increased antopolis production`,icon:"i-heroicons-bolt",unlocked:!0},{id:"alateHatcheryExpansion",generatorId:"alateHatchery",name:"Hatchery Expansion",description:"Decreases the cost of alate hatcheries",cost:l(1),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.05)),formatEffect:t=>`${l(1).sub(t).mul(100).toFixed(0)}% decreased hatchery cost`,icon:"i-heroicons-building-office-2",unlocked:!0},{id:"alateHatcheryBreeding",generatorId:"alateHatchery",name:"Selective Breeding",description:"Improved genetic selection enhances alate development",cost:l(2),level:l(0),maxLevel:l(8),effect:t=>l(1).add(t.mul(.15)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% enhanced alate development`,icon:"i-heroicons-beaker",unlocked:!0},{id:"alateHatcheryNutrition",generatorId:"alateHatchery",name:"Advanced Nutrition",description:"Specialized diet improves alate growth and vitality",cost:l(2),level:l(0),maxLevel:l(7),effect:t=>l(1).add(t.mul(.12)),formatEffect:t=>`${t.sub(1).mul(100).toFixed(0)}% improved alate vitality`,icon:"i-heroicons-fire",unlocked:!0},{id:"alateHatcheryBase",generatorId:"alateHatchery",name:"Hatchery Base",description:"Increases base antopolis production of alate hatcheries by 1",cost:l(2),level:l(0),maxLevel:l(7),formatEffect:t=>`+${t.toFixed(0)} base antopolis production`,icon:"i-heroicons-building-storefront",unlocked:!0}],t3={training_sword:{id:"training_sword",name:"Training Sword",description:"A basic sword for training. Better than nothing!",type:"equipment",rarity:"common",stats:{damage:l(5)},productionModifiers:{worker:l(2),nursery:l(1.5)},level:l(1),xp:l(0),maxXp:l(10)},training_armor:{id:"training_armor",name:"Training Armor",description:"Basic protective gear for training.",type:"equipment",rarity:"common",stats:{health:l(20),damage:l(5)},productionModifiers:{worker:l(2),nursery:l(1.7)},level:l(1),xp:l(0),maxXp:l(10)},wooden_shield:{id:"wooden_shield",name:"Wooden Shield",description:"A simple wooden shield that offers basic protection.",type:"equipment",rarity:"common",stats:{health:l(15),defense:l(3)},productionModifiers:{worker:l(2.1),nursery:l(1.78)},level:l(1),xp:l(0),maxXp:l(100)},foraging_tools:{id:"foraging_tools",name:"Foraging Tools",description:"Basic tools that help ants gather resources more efficiently.",type:"equipment",rarity:"common",stats:{damage:l(2)},productionModifiers:{worker:l(2.2),nursery:l(1.1)},level:l(1),xp:l(0),maxXp:l(100)},leaf_cloak:{id:"leaf_cloak",name:"Leaf Cloak",description:"A simple cloak made from leaves that provides minimal protection.",type:"equipment",rarity:"common",stats:{health:l(10),defense:l(1)},productionModifiers:{worker:l(1.7),nursery:l(1.8),queenChamber:l(1.2)},level:l(1),xp:l(0),maxXp:l(100)},pebble_hammer:{id:"pebble_hammer",name:"Pebble Hammer",description:"A small pebble attached to a stick. Crude but effective.",type:"equipment",rarity:"common",stats:{damage:l(7)},productionModifiers:{worker:l(1.8),nursery:l(1.6),queenChamber:l(1.3)},level:l(1),xp:l(0),maxXp:l(100)},worker_sword:{id:"worker_sword",name:"Worker Sword",description:"A sturdy sword used by worker ants.",type:"equipment",rarity:"uncommon",stats:{damage:l(15)},productionModifiers:{nursery:l(2.5),queenChamber:l(1.5)},level:l(1),xp:l(0),maxXp:l(15)},worker_armor:{id:"worker_armor",name:"Worker Armor",description:"Durable armor worn by worker ants.",type:"equipment",rarity:"uncommon",stats:{health:l(50)},productionModifiers:{nursery:l(2.2),queenChamber:l(1.7)},level:l(1),xp:l(0),maxXp:l(15)},reinforced_mandibles:{id:"reinforced_mandibles",name:"Reinforced Mandibles",description:"Strengthened mandibles that can cut through tougher materials.",type:"equipment",rarity:"uncommon",stats:{damage:l(20),defense:l(5)},productionModifiers:{worker:l(2.3),nursery:l(3),queenChamber:l(1.8)},level:l(1),xp:l(0),maxXp:l(15)},resin_helmet:{id:"resin_helmet",name:"Resin Helmet",description:"A helmet crafted from hardened tree resin, offering good protection.",type:"equipment",rarity:"uncommon",stats:{health:l(40),defense:l(10)},productionModifiers:{worker:l(2.4),nursery:l(2.7),queenChamber:l(1.9)},level:l(1),xp:l(0),maxXp:l(15)},thorn_spear:{id:"thorn_spear",name:"Thorn Spear",description:"A spear tipped with a sharp rose thorn. Excellent for piercing.",type:"equipment",rarity:"uncommon",stats:{damage:l(25)},productionModifiers:{worker:l(2.5),nursery:l(2.9),queenChamber:l(2)},level:l(1),xp:l(0),maxXp:l(15)},beetle_shell_shield:{id:"beetle_shell_shield",name:"Beetle Shell Shield",description:"A shield made from a small beetle's shell. Surprisingly durable.",type:"equipment",rarity:"uncommon",stats:{health:l(60),defense:l(15)},productionModifiers:{worker:l(2.6),nursery:l(2.6),queenChamber:l(2.1)},level:l(1),xp:l(0),maxXp:l(15)},mandible_crusher:{id:"mandible_crusher",name:"Mandible Crusher",description:"A fearsome weapon forged from the mandibles of giant beetles.",type:"equipment",rarity:"rare",stats:{damage:l(100),defense:l(25)},productionModifiers:{worker:l(2.7),nursery:l(2.8),queenChamber:l(2.2),colony:l(2)},level:l(1),xp:l(0),maxXp:l(25)},exoskeleton_plate:{id:"exoskeleton_plate",name:"Exoskeleton Plate",description:"Armor crafted from the hardened exoskeleton of a giant stag beetle.",type:"equipment",rarity:"rare",stats:{health:l(300),defense:l(50),regen:l(5)},productionModifiers:{queenChamber:l(3.5),colony:l(2.5)},level:l(1),xp:l(0),maxXp:l(25)},venom_dagger:{id:"venom_dagger",name:"Venom Dagger",description:"A deadly dagger coated with scorpion venom that melts through defenses.",type:"equipment",rarity:"rare",stats:{damage:l(150),regen:l(3)},productionModifiers:{queenChamber:l(4),colony:l(3)},level:l(1),xp:l(0),maxXp:l(25)},evolution_crystal:{id:"evolution_crystal",name:"Evolution Crystal",description:"A mysterious crystal that resonates with evolutionary energy, enhancing EP gains.",type:"equipment",rarity:"rare",stats:{damage:l(50),health:l(100),regen:l(2)},productionModifiers:{queenChamber:l(3),colony:l(2)},specialModifiers:{epBoost:l(1.3)},level:l(1),xp:l(0),maxXp:l(25)},hive_amplifier:{id:"hive_amplifier",name:"Hive Amplifier",description:"A powerful artifact that amplifies the productivity of the entire colony.",type:"equipment",rarity:"rare",stats:{damage:l(75),health:l(150),defense:l(30)},productionModifiers:{global:l(1.5)},level:l(1),xp:l(0),maxXp:l(25)},void_reaver:{id:"void_reaver",name:"Void Reaver",description:"A mythical blade that tears through the fabric of reality.",type:"equipment",rarity:"epic",stats:{damage:l(500),defense:l(100),regen:l(10)},productionModifiers:{colony:l(5),megacolony:l(3)},level:l(1),xp:l(0),maxXp:l(40)},chronos_shell:{id:"chronos_shell",name:"Chronos Shell",description:"Armor that manipulates time itself, allowing the wearer to exist slightly out of phase with reality.",type:"equipment",rarity:"epic",stats:{health:l(1e3),defense:l(200),regen:l(20)},productionModifiers:{colony:l(6),megacolony:l(4)},level:l(1),xp:l(0),maxXp:l(40)},entropy_fangs:{id:"entropy_fangs",name:"Entropy Fangs",description:"Mandibles that accelerate entropy in whatever they touch.",type:"equipment",rarity:"epic",stats:{damage:l(750),defense:l(150),regen:l(15)},productionModifiers:{colony:l(7),megacolony:l(5)},level:l(1),xp:l(0),maxXp:l(40)},ascension_matrix:{id:"ascension_matrix",name:"Ascension Matrix",description:"A mythical matrix of pure evolutionary potential.",type:"equipment",rarity:"epic",stats:{damage:l(300),health:l(500),defense:l(100),regen:l(10)},productionModifiers:{colony:l(4),megacolony:l(3)},specialModifiers:{epBoost:l(2)},level:l(1),xp:l(0),maxXp:l(40)},omnipotent_catalyst:{id:"omnipotent_catalyst",name:"Omnipotent Catalyst",description:"A mythical catalyst that exponentially increases productivity.",type:"equipment",rarity:"epic",stats:{damage:l(400),health:l(600),defense:l(120),regen:l(12)},productionModifiers:{global:l(2)},level:l(1),xp:l(0),maxXp:l(40)},infinity_shard:{id:"infinity_shard",name:"Infinity Shard",description:"A fragment of the universe's beginning.",type:"equipment",rarity:"legendary",stats:{damage:l(5e3),defense:l(1e3),regen:l(50),health:l(5e3)},productionModifiers:{megacolony:l(10),hivemind:l(5)},level:l(1),xp:l(0),maxXp:l(60)},eternity_weave:{id:"eternity_weave",name:"Eternity Weave",description:"Armor woven from the threads of eternity itself.",type:"equipment",rarity:"legendary",stats:{health:l(1e4),defense:l(2e3),regen:l(100),damage:l(2e3)},productionModifiers:{megacolony:l(12),hivemind:l(6)},level:l(1),xp:l(0),maxXp:l(60)},genesis_claw:{id:"genesis_claw",name:"Genesis Claw",description:"A weapon that contains the power of creation itself.",type:"equipment",rarity:"legendary",stats:{damage:l(7500),defense:l(1500),regen:l(75),health:l(3e3)},productionModifiers:{megacolony:l(15),hivemind:l(8)},level:l(1),xp:l(0),maxXp:l(60)},transcendence_core:{id:"transcendence_core",name:"Transcendence Core",description:"A divine core of pure evolutionary essence.",type:"equipment",rarity:"legendary",stats:{damage:l(3e3),health:l(5e3),defense:l(500),regen:l(50)},productionModifiers:{megacolony:l(8),hivemind:l(4)},specialModifiers:{epBoost:l(3)},level:l(1),xp:l(0),maxXp:l(60)},universal_amplifier:{id:"universal_amplifier",name:"Universal Amplifier",description:"A divine artifact that amplifies productivity to godlike levels.",type:"equipment",rarity:"legendary",stats:{damage:l(4e3),health:l(6e3),defense:l(600),regen:l(60)},productionModifiers:{global:l(3)},level:l(1),xp:l(0),maxXp:l(60)},quantum_mandibles:{id:"quantum_mandibles",name:"Quantum Mandibles",description:"Mandibles that exist in multiple dimensions at once.",type:"equipment",rarity:"mythic",stats:{damage:l(1e4),defense:l(2e3),regen:l(150),health:l(5e3)},productionModifiers:{hivemind:l(20),antopolis:l(10),alateHatchery:l(5)},level:l(1),xp:l(0),maxXp:l(100)},mythic_ascension_matrix:{id:"mythic_ascension_matrix",name:"Ascension Matrix",description:"A mythical matrix of pure evolutionary potential.",type:"equipment",rarity:"mythic",stats:{damage:l(5e3),health:l(7500),defense:l(1e3),regen:l(100)},productionModifiers:{hivemind:l(15),antopolis:l(8),alateHatchery:l(4)},specialModifiers:{epBoost:l(5)},level:l(1),xp:l(0),maxXp:l(100)},mythic_catalyst:{id:"mythic_catalyst",name:"Omnipotent Catalyst",description:"A mythical catalyst that exponentially increases productivity.",type:"equipment",rarity:"mythic",stats:{damage:l(6e3),health:l(9e3),defense:l(1200),regen:l(120)},productionModifiers:{global:l(5)},level:l(1),xp:l(0),maxXp:l(100)},divine_infinity_shard:{id:"divine_infinity_shard",name:"Infinity Shard",description:"A fragment of the universe's beginning.",type:"equipment",rarity:"divine",stats:{damage:l(5e4),defense:l(5e3),regen:l(500),health:l(5e4)},productionModifiers:{hivemind:l(50),antopolis:l(30)},level:l(1),xp:l(0),maxXp:l(200)},divine_eternity_weave:{id:"divine_eternity_weave",name:"Eternity Weave",description:"Armor woven from the threads of eternity itself.",type:"equipment",rarity:"divine",stats:{health:l(1e5),defense:l(1e4),regen:l(1e3),damage:l(1e4)},productionModifiers:{hivemind:l(60),antopolis:l(40)},level:l(1),xp:l(0),maxXp:l(200)},divine_genesis_claw:{id:"divine_genesis_claw",name:"Genesis Claw",description:"A weapon that contains the power of creation itself.",type:"equipment",rarity:"divine",stats:{damage:l(75e3),defense:l(7500),regen:l(750),health:l(25e3)},productionModifiers:{hivemind:l(80),antopolis:l(50),alateHatchery:l(20)},level:l(1),xp:l(0),maxXp:l(200)},divine_transcendence_core:{id:"divine_transcendence_core",name:"Transcendence Core",description:"A divine core of pure evolutionary essence.",type:"equipment",rarity:"divine",stats:{damage:l(3e4),health:l(5e4),defense:l(5e3),regen:l(500)},productionModifiers:{hivemind:l(40),antopolis:l(25)},specialModifiers:{epBoost:l(10)},level:l(1),xp:l(0),maxXp:l(200)},divine_universal_amplifier:{id:"divine_universal_amplifier",name:"Universal Amplifier",description:"A divine artifact that amplifies productivity to godlike levels.",type:"equipment",rarity:"divine",stats:{damage:l(4e4),health:l(6e4),defense:l(6e3),regen:l(600)},productionModifiers:{global:l(10)},level:l(1),xp:l(0),maxXp:l(200)},divine_ant_queen_crown:{id:"divine_ant_queen_crown",name:"Ant Queen Crown",description:"A crown forged from the essence of ant queens, granting supreme authority.",type:"equipment",rarity:"divine",stats:{damage:l(45e3),health:l(55e3),defense:l(5500),regen:l(550)},productionModifiers:{hivemind:l(45),antopolis:l(35)},specialModifiers:{epBoost:l(8)},level:l(1),xp:l(0),maxXp:l(200)},mythic_swarm_controller:{id:"mythic_swarm_controller",name:"Swarm Controller",description:"A mystical device that allows control over vast swarms of insects.",type:"equipment",rarity:"mythic",stats:{damage:l(5500),health:l(8500),defense:l(1100),regen:l(110)},productionModifiers:{hivemind:l(18),antopolis:l(10)},specialModifiers:{epBoost:l(4)},level:l(1),xp:l(0),maxXp:l(100)},epic_ant_commander_armor:{id:"epic_ant_commander_armor",name:"Ant Commander Armor",description:"Armor that marks you as a supreme commander of ant armies.",type:"equipment",rarity:"epic",stats:{damage:l(600),health:l(800),defense:l(150),regen:l(15)},productionModifiers:{colony:l(8),megacolony:l(5)},specialModifiers:{epBoost:l(1.5)},level:l(1),xp:l(0),maxXp:l(15)},rare_ant_tactician_helm:{id:"rare_ant_tactician_helm",name:"Ant Tactician Helm",description:"A helm that enhances tactical thinking and ant coordination.",type:"equipment",rarity:"rare",stats:{damage:l(150),health:l(200),defense:l(40),regen:l(4)},productionModifiers:{queenChamber:l(4),colony:l(2.5)},specialModifiers:{epBoost:l(1.2)},level:l(1),xp:l(0),maxXp:l(15)},uncommon_ant_scout_gear:{id:"uncommon_ant_scout_gear",name:"Ant Scout Gear",description:"Lightweight gear perfect for ant scouts.",type:"equipment",rarity:"uncommon",stats:{damage:l(30),health:l(40),defense:l(8),regen:l(1)},productionModifiers:{nursery:l(3),queenChamber:l(2)},specialModifiers:{epBoost:l(1.1)},level:l(1),xp:l(0),maxXp:l(15)},common_ant_training_kit:{id:"common_ant_training_kit",name:"Ant Training Kit",description:"Basic training equipment for young ants.",type:"equipment",rarity:"common",stats:{damage:l(8),health:l(12),defense:l(3)},productionModifiers:{worker:l(2.5),nursery:l(1.8)},specialModifiers:{epBoost:l(1.05)},level:l(1),xp:l(0),maxXp:l(10)},cosmic_duality:{id:"cosmic_duality",name:"Cosmic Duality",description:"The ultimate artifact that bridges creation and destruction.",type:"equipment",rarity:"divine",stats:{damage:l(1e5),health:l(1e5),defense:l(1e4),regen:l(1e3)},productionModifiers:{global:l(20)},specialModifiers:{epBoost:l(10)},level:l(1),xp:l(0),maxXp:l(200)},boss_chitinous_blade:{id:"boss_chitinous_blade",name:"Chitinous Blade",description:"A sharp blade crafted from the Training Dummy's hardened carapace. The strange material enhances your connection to worker ants.",type:"equipment",rarity:"uncommon",stats:{damage:l(50),defense:l(25)},productionModifiers:{worker:l(3),nursery:l(2.5)},level:l(1),xp:l(0),maxXp:l(15)},boss_mandible_gauntlets:{id:"boss_mandible_gauntlets",name:"Mandible Gauntlets",description:"Armored gauntlets crafted from the Slime King's powerful mandibles. They pulse with a strange energy that enhances your nursery and queen chambers.",type:"equipment",rarity:"rare",stats:{damage:l(150),defense:l(75),health:l(200)},productionModifiers:{nursery:l(4),queenChamber:l(3)},level:l(1),xp:l(0),maxXp:l(25)},boss_hivemind_helm:{id:"boss_hivemind_helm",name:"Hivemind Helm",description:"A helmet woven from the Giant Spider's silk, allowing you to better communicate with your colony. Your thoughts become one with the collective.",type:"equipment",rarity:"rare",stats:{damage:l(200),defense:l(100),health:l(300),regen:l(5)},productionModifiers:{queenChamber:l(4),colony:l(3)},level:l(1),xp:l(0),maxXp:l(25)},boss_royal_carapace:{id:"boss_royal_carapace",name:"Royal Carapace",description:"Armor forged from the Ant Golem's nearly impenetrable shell. It resonates with your colony's energy, strengthening your connection to the mega colony.",type:"equipment",rarity:"epic",stats:{health:l(1e3),defense:l(500),regen:l(20),damage:l(400)},productionModifiers:{colony:l(6),megacolony:l(4)},level:l(1),xp:l(0),maxXp:l(40)},boss_pheromone_catalyst:{id:"boss_pheromone_catalyst",name:"Pheromone Catalyst",description:"A mysterious artifact taken from the Mantis Lord that amplifies pheromone signals throughout your colony, significantly enhancing mega colony and hivemind coordination.",type:"equipment",rarity:"epic",stats:{damage:l(600),defense:l(300),health:l(800),regen:l(15)},productionModifiers:{megacolony:l(8),hivemind:l(6)},specialModifiers:{epBoost:l(1.5)},level:l(1),xp:l(0),maxXp:l(40)},boss_quantum_stinger:{id:"boss_quantum_stinger",name:"Quantum Stinger",description:"The Queen Bee's royal stinger, infused with quantum particles that exist in multiple states simultaneously. Dramatically enhances hivemind and antopolis production.",type:"equipment",rarity:"legendary",stats:{damage:l(1e4),defense:l(3e3),health:l(8e3),regen:l(100)},productionModifiers:{hivemind:l(12),antopolis:l(8)},specialModifiers:{epBoost:l(2)},level:l(1),xp:l(0),maxXp:l(60)},boss_cosmic_nucleus:{id:"boss_cosmic_nucleus",name:"Cosmic Nucleus",description:"The core of the Devourer Moth that contains condensed cosmic energy. This artifact of immense power enhances all aspects of your colony simultaneously.",type:"equipment",rarity:"mythic",stats:{damage:l(5e4),defense:l(15e3),health:l(4e4),regen:l(500)},productionModifiers:{global:l(10),hivemind:l(20),antopolis:l(15)},specialModifiers:{epBoost:l(5)},level:l(1),xp:l(0),maxXp:l(100)},emperor_toxin:{id:"emperor_toxin",name:"Emperor's Toxin",description:"A vial containing potent neurotoxin from the Scorpion Emperor's stinger. It resonates with the colony's expansion efforts.",type:"equipment",rarity:"mythic",stats:{damage:l("7.5e4"),defense:l("3e4"),health:l("1e5"),regen:l("7.5e2")},productionModifiers:{colony:l(18),megacolony:l(12)},specialModifiers:{epBoost:l(5.5)},level:l(1),xp:l(0),maxXp:l(100)},boss_temporal_chitin:{id:"boss_temporal_chitin",name:"Temporal Chitin",description:"Chitin shed by the Chrono-Beetle, vibrating with temporal energy. Boosts mid-game production significantly.",type:"equipment",rarity:"mythic",stats:{damage:l(1e5),defense:l(5e4),health:l(2e5),regen:l(1e3)},productionModifiers:{colony:l(20),megacolony:l(15)},level:l(1),xp:l(0),maxXp:l(100)},boss_void_essence_core:{id:"boss_void_essence_core",name:"Void Essence Core",description:"The condensed heart of the Void Larva. Radiates an aura that empowers the Hive Mind and Antopolis.",type:"equipment",rarity:"mythic",stats:{damage:l(1e7),defense:l(5e6),health:l(2e7),regen:l(1e5)},productionModifiers:{hivemind:l(30),antopolis:l(20),alateHatchery:l(10)},specialModifiers:{epBoost:l(6)},level:l(1),xp:l(0),maxXp:l(100)},boss_nebula_stinger:{id:"boss_nebula_stinger",name:"Nebula Stinger",description:"The stinger of the Nebula Wasp Queen, crackling with cosmic power. Grants massive boosts to late-game generators.",type:"equipment",rarity:"divine",stats:{damage:l(1e10),defense:l(5e9),health:l(2e10),regen:l(1e8)},productionModifiers:{hivemind:l(70),antopolis:l(50),alateHatchery:l(25)},level:l(1),xp:l(0),maxXp:l(200)},boss_reality_fragment:{id:"boss_reality_fragment",name:"Reality Fragment",description:"A shard of reality fractured by the Dimensional Horror. Offers immense global power but feels unstable.",type:"equipment",rarity:"divine",stats:{damage:l(1e15),defense:l(5e14),health:l(2e15),regen:l(1e12)},productionModifiers:{global:l(15)},specialModifiers:{epBoost:l(12)},level:l(1),xp:l(0),maxXp:l(200)},boss_divine_mandible:{id:"boss_divine_mandible",name:"Divine Mandible",description:"A mandible from the Ascended Ant God, imbued with the power to reshape the colony. The ultimate artifact of ant power.",type:"equipment",rarity:"divine",stats:{damage:l(1e25),defense:l(5e24),health:l(2e25),regen:l(1e22)},productionModifiers:{global:l(30)},specialModifiers:{epBoost:l(20)},level:l(1),xp:l(0),maxXp:l(200)},boss_hivemind_synapse:{id:"boss_hivemind_synapse",name:"Hivemind Synapse",description:"A pulsating neural node from the Cosmic Hivemind, connecting your colony across vast distances.",type:"equipment",rarity:"divine",stats:{damage:l("1e50"),defense:l("5e49"),health:l("2e50"),regen:l("1e48")},productionModifiers:{global:l(50),hivemind:l(100)},specialModifiers:{epBoost:l(30)},level:l(1),xp:l(0),maxXp:l(200)},boss_star_eater_mandible:{id:"boss_star_eater_mandible",name:"Star-Eater Mandible",description:"A mandible from the Galactic Devourer Ant, capable of crushing neutron stars. Boosts production astronomically.",type:"equipment",rarity:"divine",stats:{damage:l("1e100"),defense:l("5e99"),health:l("2e100"),regen:l("1e98")},productionModifiers:{global:l(100),antopolis:l(150)},specialModifiers:{epBoost:l(50)},level:l(1),xp:l(0),maxXp:l(200)},boss_quantum_core:{id:"boss_quantum_core",name:"Quantum Core",description:"The stabilized core of the Quantum Entanglement Entity, resonating with infinite possibilities.",type:"equipment",rarity:"divine",stats:{damage:l("1e200"),defense:l("5e199"),health:l("2e200"),regen:l("1e198")},productionModifiers:{global:l(200),alateHatchery:l(250)},specialModifiers:{epBoost:l(100)},level:l(1),xp:l(0),maxXp:l(200)},boss_primordial_chitin_plate:{id:"boss_primordial_chitin_plate",name:"Primordial Chitin Plate",description:"A plate of chitin from the Primordial Insectoid, predating the laws of physics. Unimaginably durable and powerful.",type:"equipment",rarity:"divine",stats:{damage:l("1e400"),defense:l("5e399"),health:l("2e400"),regen:l("1e398")},productionModifiers:{global:l(500)},specialModifiers:{epBoost:l(200)},level:l(1),xp:l(0),maxXp:l(200)},boss_reality_thread:{id:"boss_reality_thread",name:"Reality Thread",description:"A single thread from the Reality Weaver Spider's web, shimmering with the light of infinite universes.",type:"equipment",rarity:"divine",stats:{damage:l("1e1000"),defense:l("5e999"),health:l("2e1000"),regen:l("1e998")},productionModifiers:{global:l(1e3)},specialModifiers:{epBoost:l(500)},level:l(1),xp:l(0),maxXp:l(200)},boss_omega_particle:{id:"boss_omega_particle",name:"Omega Particle",description:"A particle containing the essence of the Omega Ant. The ultimate source of power.",type:"equipment",rarity:"divine",stats:{damage:l("1e2000"),defense:l("5e1999"),health:l("2e2000"),regen:l("1e1998")},productionModifiers:{global:l(5e3)},specialModifiers:{epBoost:l(1e3)},level:l(1),xp:l(0),maxXp:l(200)}},Tb=.2,YE=.1,Ab=.1,XE=.05,A8=1.1,Ts=Es("item",()=>{const t=Y(t3),e=P=>t.value[P],s=(P,I=Se.fromNumber(1),D=Se.fromNumber(0))=>{const U=e(P);if(!U)return;const M=n(I,U.rarity);return{...U,level:I,xp:D,maxXp:M}},n=(P,I)=>{const M={common:.8,uncommon:.9,rare:1,epic:1.1,legendary:1.2,mythic:1.3,divine:1.5}[I]||1;if(P.equals(1))return Se.fromNumber(0);const x=P.toNumber();let $=Math.floor(1/4*Math.floor(x+300*Math.pow(2,x/7)));return $=Math.floor($*.85*M),Se.fromNumber($)},r=P=>{if(P.toNumber()<=10)return Se.fromNumber(1).add(P.minus(1).mul(Tb));{const D=Se.fromNumber(9).mul(Tb),U=P.minus(10).mul(YE);return Se.fromNumber(1).add(D).add(U)}},o=P=>{if(P.toNumber()<=10)return Se.fromNumber(1).add(P.minus(1).mul(Ab));{const D=Se.fromNumber(9).mul(Ab),U=P.minus(10).mul(XE);return Se.fromNumber(1).add(D).add(U)}},i={common:"text-gray-600 dark:text-gray-400",uncommon:"text-green-600 dark:text-green-300",rare:"text-blue-600 dark:text-blue-300",epic:"text-purple-600 dark:text-purple-300",legendary:"text-amber-600 dark:text-amber-300",mythic:"text-pink-600 dark:text-pink-300",divine:"text-yellow-600 dark:text-yellow-300"},c={common:"bg-gray-200 dark:bg-gray-700",uncommon:"bg-green-200 dark:bg-green-800",rare:"bg-blue-200 dark:bg-blue-800",epic:"bg-purple-300 dark:bg-purple-800",legendary:"bg-amber-300 dark:bg-amber-700",mythic:"bg-pink-300 dark:bg-pink-800",divine:"bg-yellow-300 dark:bg-yellow-700"},u=P=>i[P]||i.common,d=P=>c[P]||c.common,m=P=>`${P.name} (Lvl ${P.level.toString()})`,f=P=>{const I=e(P.id);if(!I||!I.stats)return null;const D=r(P.level),U={};return Object.entries(I.stats).forEach(([M,x])=>{x&&(U[M]=x.mul(D))}),U},p=P=>{const I=e(P.id);if(!I||!I.productionModifiers)return null;const D=o(P.level),U={};return Object.entries(I.productionModifiers).forEach(([M,x])=>{const Z=x.minus(1).mul(D);U[M]=Se.fromNumber(1).plus(Z)}),U},g=P=>{const I=e(P.id);if(!I||!I.specialModifiers)return null;const D=o(P.level),U={};return Object.entries(I.specialModifiers).forEach(([M,x])=>{if(x){const Z=x.minus(1).mul(D);U[M]=Se.fromNumber(1).plus(Z)}}),U},w=P=>{const I=e(P.id);return(I==null?void 0:I.productionModifiers)||null},C=P=>{const I=e(P.id);return(I==null?void 0:I.specialModifiers)||null},E=P=>{const I=e(P.id);return(I==null?void 0:I.stats)||null},k=P=>P.minus(1).mul(100).toFixed(1)+"%",A=(P,I,D=!1)=>{const U=P.div(I).mul(100).toFixed(1);return D?`${U}% (${P.floor().toString()} / ${I.floor().toString()})`:`${U}%`},S=P=>P.maxXp.equals(0)?100:P.xp.div(P.maxXp).mul(100).toNumber(),T=(P,I)=>{if(P.equals(1))return Se.fromNumber(0);let D=Se.fromNumber(0);for(let U=2;U<=P.toNumber();U++)D=D.add(n(Se.fromNumber(U-1),I));return D},R=(P,I)=>{if(P.equals(1))return Se.fromNumber(0);const D=.85,M={common:.8,uncommon:.9,rare:1,epic:1.1,legendary:1.2,mythic:1.3,divine:1.5}[I]||1,x=P.toNumber(),$=Math.pow(2,1/7),Z=$/($-1),me=1/8*(Math.pow(x,2)-x+600*Math.pow(2,x/7)-Z);return Se.fromNumber(Math.floor(me*D*M))};return{items:t,getItem:e,createItem:s,calculateMaxXp:n,calculateTotalXpForLevel:T,calculateApproximateTotalXp:R,getLevelFromXp:(P,I,D=100)=>{if(P.equals(0))return 1;let U=1,M=D;for(;U<=M;){const x=Math.floor((U+M)/2),$=R(Se.fromNumber(x),I),Z=R(Se.fromNumber(x+1),I);if(P.gte($)&&P.lt(Z))return x;P.lt($)?M=x-1:U=x+1}return Math.min(U,D)},getLevelModifier:r,getLevelProductionModifier:o,getRarityColor:u,getRarityBackground:d,getFormattedItemName:m,getItemStats:f,getItemProductionModifiers:p,getItemSpecialModifiers:g,getBaseStats:E,getBaseProductionModifiers:w,getBaseSpecialModifiers:C,formatModifierValue:k,formatXpProgress:A,getLevelProgress:S,LEVEL_STAT_MULTIPLIER_EARLY:Tb,LEVEL_STAT_MULTIPLIER:YE,LEVEL_MODIFIER_MULTIPLIER_EARLY:Ab,LEVEL_MODIFIER_MULTIPLIER:XE,XP_SCALING_FACTOR:A8}}),I8=[{id:"safe",name:"Training Bug",description:"A weak bug used for training. Perfect for beginners.",health:l(100),maxHealth:l(100),damage:l(0),defense:l(0),drops:[{itemId:"training_sword",chance:.15,minQuantity:1,maxQuantity:1},{itemId:"training_armor",chance:.15,minQuantity:1,maxQuantity:1},{itemId:"wooden_shield",chance:.1,minQuantity:1,maxQuantity:1},{itemId:"leaf_cloak",chance:.1,minQuantity:1,maxQuantity:1},{itemId:"pebble_hammer",chance:1e-5,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"tiny_leaf",chance:.2},{collectibleId:"pebble",chance:.15},{collectibleId:"dried_fungus",chance:.1}]},{id:"worker",name:"Worker Ant",description:"A common worker ant. Slightly tougher than training bugs.",health:l(500),maxHealth:l(500),damage:l(25),defense:l(10),drops:[{itemId:"worker_sword",chance:.08,minQuantity:1,maxQuantity:1},{itemId:"worker_armor",chance:.08,minQuantity:1,maxQuantity:1},{itemId:"foraging_tools",chance:.1,minQuantity:1,maxQuantity:1},{itemId:"pebble_hammer",chance:.05,minQuantity:1,maxQuantity:1},{itemId:"reinforced_mandibles",chance:.03,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"ant_mandible",chance:.12},{collectibleId:"tiny_leaf",chance:.1},{collectibleId:"dried_fungus",chance:.08},{collectibleId:"pebble",chance:.05}]},{id:"soldier",name:"Soldier Ant",description:"A powerful soldier ant. Much tougher than worker ants.",health:l(2500),maxHealth:l(2500),damage:l(100),defense:l(50),drops:[{itemId:"reinforced_mandibles",chance:.06,minQuantity:1,maxQuantity:2},{itemId:"resin_helmet",chance:.06,minQuantity:1,maxQuantity:2},{itemId:"thorn_spear",chance:.04,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.04,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"ant_mandible",chance:.15},{collectibleId:"dried_fungus",chance:.1},{collectibleId:"dewdrop",chance:.05},{collectibleId:"spider_silk",chance:.03}]},{id:"ladybug",name:"Ladybug",health:l(1e4),maxHealth:l(1e4),damage:l(500),defense:l(200),description:"Looks cute but can be surprisingly tough!",drops:[{itemId:"mandible_crusher",chance:.01,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.03,minQuantity:1,maxQuantity:1},{itemId:"venom_dagger",chance:.015,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"ladybug_wing",chance:.05},{collectibleId:"dewdrop",chance:.08},{collectibleId:"small_crystal",chance:.04}]},{id:"housefly",name:"Housefly",health:l(1e5),maxHealth:l(1e5),damage:l(2500),defense:l(1e3),description:"Annoying and surprisingly durable.",drops:[{itemId:"exoskeleton_plate",chance:.008,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.02,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"dewdrop",chance:.1},{collectibleId:"spider_silk",chance:.06}]},{id:"mosquito",name:"Mosquito",health:l(1e6),maxHealth:l(1e6),damage:l(1e4),defense:l(5e3),description:"Small but extremely irritating.",drops:[{itemId:"venom_dagger",chance:.006,minQuantity:1,maxQuantity:1},{itemId:"hive_amplifier",chance:.025,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"small_crystal",chance:.08},{collectibleId:"spider_silk",chance:.05}]},{id:"beetle",name:"Beetle",health:l(1e8),maxHealth:l(1e8),damage:l(1e5),defense:l(2e4),description:"Hard shell, strong bite.",drops:[{itemId:"exoskeleton_plate",chance:.015,minQuantity:1,maxQuantity:2},{itemId:"beetle_shell_shield",chance:.04,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"beetle_shell",chance:.03},{collectibleId:"geode_shard",chance:.02},{collectibleId:"ladybug_wing",chance:.04},{collectibleId:"amber_fragment",chance:.03}]},{id:"grasshopper",name:"Grasshopper",health:l(1e10),maxHealth:l(1e10),damage:l(1e7),defense:l(1e5),description:"Jumps around and avoids attacks!",drops:[{itemId:"mandible_crusher",chance:.012,minQuantity:1,maxQuantity:1},{itemId:"thorn_spear",chance:.03,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"ladybug_wing",chance:.06},{collectibleId:"geode_shard",chance:.04}]},{id:"cockroach",name:"Cockroach",health:l(1e13),maxHealth:l(1e13),damage:l(1e10),defense:l(1e6),description:"Survivor of everything. Just won't die.",drops:[{itemId:"venom_dagger",chance:.012,minQuantity:1,maxQuantity:1},{itemId:"chronos_shell",chance:2e-4,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.02,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"small_crystal",chance:.06},{collectibleId:"amber_fragment",chance:.05},{collectibleId:"geode_shard",chance:.03}]},{id:"fire_ant",name:"Fire Ant",health:l(1e16),maxHealth:l(1e16),damage:l(1e13),defense:l(1e8),description:"Burns everything in its path.",drops:[{itemId:"void_reaver",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:4e-4,minQuantity:1,maxQuantity:1},{itemId:"venom_dagger",chance:.03,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"beetle_shell",chance:.04},{collectibleId:"glowing_mushroom",chance:.02}]},{id:"termite",name:"Termite",health:l(1e20),maxHealth:l(1e20),damage:l(1e16),defense:l(1e10),description:"Destroys everything it touches.",drops:[{itemId:"mandible_crusher",chance:.02,minQuantity:1,maxQuantity:1},{itemId:"reinforced_mandibles",chance:.05,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"beetle_shell",chance:.05},{collectibleId:"glowing_mushroom",chance:.03}]},{id:"wasp",name:"Wasp",health:l(1e25),maxHealth:l(1e25),damage:l(1e20),defense:l(1e12),description:"Faster and angrier than a hornet!",drops:[{itemId:"void_reaver",chance:.004,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:6e-4,minQuantity:1,maxQuantity:1},{itemId:"venom_dagger",chance:.04,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"glowing_mushroom",chance:.04},{collectibleId:"ancient_pheromone",chance:.01}]},{id:"scorpion",name:"Scorpion",health:l(1e30),maxHealth:l(1e30),damage:l(1e25),defense:l(1e15),description:"Big pincers, bigger stinger.",drops:[{itemId:"venom_dagger",chance:.03,minQuantity:1,maxQuantity:1},{itemId:"void_reaver",chance:8e-4,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:.05,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"ancient_pheromone",chance:.015},{collectibleId:"mantis_claw",chance:.01}]},{id:"giant_moth",name:"Giant Moth",health:l(1e40),maxHealth:l(1e40),damage:l(1e30),defense:l(1e20),description:"Loves lights. Too bad it's also huge.",drops:[{itemId:"infinity_shard",chance:.001,minQuantity:1,maxQuantity:1},{itemId:"chronos_shell",chance:4e-4,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.04,minQuantity:1,maxQuantity:2},{itemId:"eternity_weave",chance:6e-4,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"small_crystal",chance:.06},{collectibleId:"amber_fragment",chance:.04},{collectibleId:"ancient_pheromone",chance:.02}]},{id:"tarantula",name:"Tarantula",health:l(1e50),maxHealth:l(1e50),damage:l(1e40),defense:l(1e25),description:"Fluffy but terrifying.",drops:[{itemId:"exoskeleton_plate",chance:.025,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:.001,minQuantity:1,maxQuantity:1},{itemId:"venom_dagger",chance:.06,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"spider_silk",chance:.08},{collectibleId:"mantis_claw",chance:.015}]},{id:"giant_stag_beetle",name:"Giant Stag Beetle",health:l(1e65),maxHealth:l(1e65),damage:l(1e50),defense:l(1e30),description:"Massive pincers that can crush anything.",drops:[{itemId:"mandible_crusher",chance:.04,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:.0015,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.07,minQuantity:1,maxQuantity:2}],collectibleDrops:[{collectibleId:"beetle_shell",chance:.06},{collectibleId:"mantis_claw",chance:.02}]},{id:"army_ant",name:"Army Ant",health:l(1e80),maxHealth:l(1e80),damage:l(1e65),defense:l(1e40),description:"A relentless horde of ants.",drops:[{itemId:"void_reaver",chance:.006,minQuantity:1,maxQuantity:1},{itemId:"infinity_shard",chance:1e-4,minQuantity:1,maxQuantity:1},{itemId:"reinforced_mandibles",chance:.08,minQuantity:1,maxQuantity:4}],collectibleDrops:[{collectibleId:"glowing_mushroom",chance:.005},{collectibleId:"ancient_pheromone",chance:.025},{collectibleId:"quantum_crystal",chance:.001}]},{id:"stag_beetle_swarm",name:"Stag Beetle Swarm",health:l(1e100),maxHealth:l(1e100),damage:l(1e80),defense:l(1e50),description:"Too many beetles to count.",drops:[{itemId:"quantum_mandibles",chance:.0015,minQuantity:1,maxQuantity:1},{itemId:"divine_eternity_weave",chance:15e-5,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.1,minQuantity:1,maxQuantity:6}],collectibleDrops:[{collectibleId:"quantum_crystal",chance:.003},{collectibleId:"meteorite_fragment",chance:.002}]},{id:"mutant_fly",name:"Mutant Fly",health:l(1e125),maxHealth:l(1e125),damage:l(1e100),defense:l(1e65),description:"Somehow even more annoying than a normal fly.",drops:[{itemId:"divine_infinity_shard",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"void_reaver",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.06,minQuantity:1,maxQuantity:3}],collectibleDrops:[{collectibleId:"meteorite_fragment",chance:.004}]},{id:"giant_firefly",name:"Giant Firefly",health:l(1e150),maxHealth:l(1e150),damage:l(1e120),defense:l(1e80),description:"Brighter than the sun, dangerous too.",drops:[{itemId:"divine_infinity_shard",chance:.003,minQuantity:1,maxQuantity:1},{itemId:"chronos_shell",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.07,minQuantity:1,maxQuantity:3}],collectibleDrops:[{collectibleId:"quantum_crystal",chance:.005}]},{id:"ultra_beetle",name:"Ultra Beetle",health:l(1e200),maxHealth:l(1e200),damage:l(1e160),defense:l(1e100),description:"Bigger. Stronger. Shinier.",drops:[{itemId:"quantum_mandibles",chance:.0025,minQuantity:1,maxQuantity:1},{itemId:"entropy_fangs",chance:.003,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.12,minQuantity:2,maxQuantity:5},{itemId:"genesis_claw",chance:.0015,minQuantity:1,maxQuantity:1},{itemId:"universal_amplifier",chance:.001,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"meteorite_fragment",chance:.006},{collectibleId:"cosmic_essence",chance:.001},{collectibleId:"world_tree_seedling",chance:5e-4}]},{id:"queen_wasp",name:"Queen Wasp",health:l("1e300"),maxHealth:l("1e300"),damage:l("1e250"),defense:l("1e150"),description:"Controls an entire hive of wasps.",drops:[{itemId:"divine_genesis_claw",chance:.01,minQuantity:1,maxQuantity:1},{itemId:"infinity_shard",chance:4e-4,minQuantity:1,maxQuantity:1},{itemId:"venom_dagger",chance:.1,minQuantity:1,maxQuantity:4}],collectibleDrops:[{collectibleId:"mantis_claw",chance:.004},{collectibleId:"cosmic_essence",chance:.0015}]},{id:"colossal_cockroach",name:"Colossal Cockroach",health:l("1e500"),maxHealth:l("1e500"),damage:l("1e400"),defense:l("1e200"),description:"Even harder to kill than before.",drops:[{itemId:"exoskeleton_plate",chance:.005,minQuantity:1,maxQuantity:1},{itemId:"divine_eternity_weave",chance:6e-4,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.08,minQuantity:1,maxQuantity:4},{itemId:"transcendence_core",chance:4e-4,minQuantity:1,maxQuantity:1},{itemId:"mythic_catalyst",chance:2e-4,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"quantum_crystal",chance:.008},{collectibleId:"world_tree_seedling",chance:.001}]},{id:"apocalyptic_termites",name:"Apocalyptic Termites",health:l("1e750"),maxHealth:l("1e750"),damage:l("1e600"),defense:l("1e300"),description:"Capable of reducing everything to dust.",drops:[{itemId:"quantum_mandibles",chance:.004,minQuantity:1,maxQuantity:1},{itemId:"divine_genesis_claw",chance:2e-4,minQuantity:1,maxQuantity:1},{itemId:"reinforced_mandibles",chance:.12,minQuantity:2,maxQuantity:7}],collectibleDrops:[{collectibleId:"meteorite_fragment",chance:.007},{collectibleId:"cosmic_essence",chance:.002}]},{id:"radioactive_spider",name:"Radioactive Spider",health:l("1e1000"),maxHealth:l("1e1000"),damage:l("1e800"),defense:l("1e400"),description:"Not the kind that gives you superpowers.",drops:[{itemId:"venom_dagger",chance:.006,minQuantity:1,maxQuantity:1},{itemId:"divine_infinity_shard",chance:8e-4,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.1,minQuantity:2,maxQuantity:5}],collectibleDrops:[{collectibleId:"spider_silk",chance:.03},{collectibleId:"quantum_crystal",chance:.009},{collectibleId:"world_tree_seedling",chance:.0015}]},{id:"endless_ant_swarms",name:"Endless Ant Swarm",health:l("1e2000"),maxHealth:l("1e2000"),damage:l("1e1500"),defense:l("1e750"),description:"A never-ending army of ants.",drops:[{itemId:"divine_genesis_claw",chance:.008,minQuantity:1,maxQuantity:1},{itemId:"divine_eternity_weave",chance:.001,minQuantity:1,maxQuantity:1},{itemId:"reinforced_mandibles",chance:.14,minQuantity:3,maxQuantity:10}],collectibleDrops:[{collectibleId:"ancient_pheromone",chance:.03},{collectibleId:"cosmic_essence",chance:.0025}]},{id:"galactic_moth",name:"Galactic Moth",health:l("1e5000"),maxHealth:l("1e5000"),damage:l("1e4000"),defense:l("1e2000"),description:"It seeks the biggest, brightest lights in the universe.",drops:[{itemId:"divine_infinity_shard",chance:.006,minQuantity:1,maxQuantity:1},{itemId:"divine_genesis_claw",chance:4e-4,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.12,minQuantity:2,maxQuantity:6}],collectibleDrops:[{collectibleId:"meteorite_fragment",chance:.003},{collectibleId:"world_tree_seedling",chance:.002}]},{id:"quantum_beetle",name:"Quantum Beetle",health:l("1e10000"),maxHealth:l("1e10000"),damage:l("1e8000"),defense:l("1e4000"),description:"Exists in multiple places at once.",drops:[{itemId:"quantum_mandibles",chance:.01,minQuantity:1,maxQuantity:1},{itemId:"divine_genesis_claw",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"divine_infinity_shard",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"divine_eternity_weave",chance:.002,minQuantity:1,maxQuantity:1},{itemId:"divine_transcendence_core",chance:.0015,minQuantity:1,maxQuantity:1},{itemId:"divine_universal_amplifier",chance:.0015,minQuantity:1,maxQuantity:1},{itemId:"mythic_ascension_matrix",chance:.001,minQuantity:1,maxQuantity:1},{itemId:"ascension_matrix",chance:.003,minQuantity:1,maxQuantity:1},{itemId:"omnipotent_catalyst",chance:.0025,minQuantity:1,maxQuantity:1},{itemId:"beetle_shell_shield",chance:.2,minQuantity:5,maxQuantity:12},{itemId:"evolution_crystal",chance:.2,minQuantity:3,maxQuantity:10}],collectibleDrops:[{collectibleId:"quantum_crystal",chance:.007},{collectibleId:"cosmic_essence",chance:.002},{collectibleId:"ancient_pheromone",chance:.01},{collectibleId:"meteorite_fragment",chance:.005},{collectibleId:"world_tree_seedling",chance:.001}]},{id:"ant_queen_guardian",name:"Ant Queen Guardian",health:l("1e15000"),maxHealth:l("1e15000"),damage:l("1e12000"),defense:l("1e6000"),description:"The ultimate protector of ant queens.",drops:[{itemId:"divine_ant_queen_crown",chance:.005,minQuantity:1,maxQuantity:1},{itemId:"mythic_swarm_controller",chance:.01,minQuantity:1,maxQuantity:1},{itemId:"divine_infinity_shard",chance:.003,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.15,minQuantity:3,maxQuantity:6}],collectibleDrops:[{collectibleId:"ancient_pheromone",chance:.015},{collectibleId:"quantum_crystal",chance:.01}]},{id:"swarm_lord",name:"Swarm Lord",health:l("1e20000"),maxHealth:l("1e20000"),damage:l("1e16000"),defense:l("1e8000"),description:"Commands vast swarms of insects with deadly precision.",drops:[{itemId:"mythic_swarm_controller",chance:.008,minQuantity:1,maxQuantity:1},{itemId:"epic_ant_commander_armor",chance:.015,minQuantity:1,maxQuantity:1},{itemId:"divine_eternity_weave",chance:.004,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.18,minQuantity:4,maxQuantity:10}],collectibleDrops:[{collectibleId:"mantis_claw",chance:.01},{collectibleId:"meteorite_fragment",chance:.008}]},{id:"ant_legion_commander",name:"Ant Legion Commander",health:l("1e25000"),maxHealth:l("1e25000"),damage:l("1e20000"),defense:l("1e10000"),description:"Leads massive ant legions into battle.",drops:[{itemId:"epic_ant_commander_armor",chance:.01,minQuantity:1,maxQuantity:1},{itemId:"rare_ant_tactician_helm",chance:.02,minQuantity:1,maxQuantity:1},{itemId:"divine_genesis_claw",chance:.005,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.2,minQuantity:5,maxQuantity:12}],collectibleDrops:[{collectibleId:"cosmic_essence",chance:.003}]},{id:"ant_tactician",name:"Ant Tactician",health:l("1e30000"),maxHealth:l("1e30000"),damage:l("1e24000"),defense:l("1e12000"),description:"Masters the art of ant warfare and strategy.",drops:[{itemId:"rare_ant_tactician_helm",chance:.015,minQuantity:1,maxQuantity:1},{itemId:"uncommon_ant_scout_gear",chance:.03,minQuantity:1,maxQuantity:1},{itemId:"divine_transcendence_core",chance:.006,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.22,minQuantity:6,maxQuantity:14}],collectibleDrops:[{collectibleId:"world_tree_seedling",chance:.0025}]},{id:"ant_scout_master",name:"Ant Scout Master",health:l("1e35000"),maxHealth:l("1e35000"),damage:l("1e28000"),defense:l("1e14000"),description:"The ultimate scout, gathering intelligence with unmatched speed.",drops:[{itemId:"uncommon_ant_scout_gear",chance:.02,minQuantity:1,maxQuantity:1},{itemId:"common_ant_training_kit",chance:.04,minQuantity:1,maxQuantity:1},{itemId:"divine_universal_amplifier",chance:.007,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.25,minQuantity:7,maxQuantity:16}],collectibleDrops:[{collectibleId:"quantum_crystal",chance:.012}]},{id:"ant_training_master",name:"Ant Training Master",health:l("1e40000"),maxHealth:l("1e40000"),damage:l("1e32000"),defense:l("1e16000"),description:"Transforms young ants into elite warriors.",drops:[{itemId:"common_ant_training_kit",chance:.025,minQuantity:1,maxQuantity:1},{itemId:"evolution_crystal",chance:.28,minQuantity:8,maxQuantity:18},{itemId:"mythic_ascension_matrix",chance:.008,minQuantity:1,maxQuantity:1},{itemId:"divine_ant_queen_crown",chance:.003,minQuantity:1,maxQuantity:1}],collectibleDrops:[{collectibleId:"meteorite_fragment",chance:.01}]}],z1=Es("filter",()=>{const t=Y(new Set);return{filteredItems:t,toggleItemFilter:i=>{t.value.has(i)?t.value.delete(i):t.value.add(i)},isItemFiltered:i=>t.value.has(i),getAllAvailableItems:()=>Object.values(t3),getState:()=>({filteredItems:Array.from(t.value)}),loadState:i=>{i.filteredItems&&(t.value=new Set(i.filteredItems))}}}),s3=!1;console.log("[Idle Ant Farm] Debug logging disabled (env: undefined, version: undefined)");const Qe=(t,...e)=>{},P8=(t,...e)=>{console.log(`[Idle Ant Farm][INFO] ${t}`,...e)},Q1=(t,...e)=>{console.warn(`[Idle Ant Farm][WARN] ${t}`,...e)},ks=(t,...e)=>{console.error(`[Idle Ant Farm][ERROR] ${t}`,...e)},M8=t=>{s3!==t&&console.warn("[Idle Ant Farm] Debug logging can only be set via environment variable VITE_DEBUG_MODE")},Co=()=>s3,wn={debug:Qe,info:P8,warn:Q1,error:ks,setDebugEnabled:M8,isDebugEnabled:Co},ls=[{id:"boss_training_dummy",name:"Training Dummy",maxHealth:l(2e5),damage:l(1e3),defense:l(200),description:"A simple training dummy used to test your skills. Not much of a boss, but it's a start!",reward:{essence:l("1"),guaranteedItemId:"boss_chitinous_blade",itemChance:1},unlockDescription:"Available from the start.",unlockRequirements:[{type:"specificBugKills",value:50,target:"worker"}]},{id:"boss_slime_king",name:"Slime King",maxHealth:l(2e6),damage:l(5e3),defense:l(1e3),description:"A giant, gelatinous monarch. It absorbs damage but strikes with surprising force.",reward:{essence:l("2"),guaranteedItemId:"boss_mandible_gauntlets",itemChance:.15},unlockDescription:"Defeat the Training Dummy boss and kill 50 Worker Ants.",unlockRequirements:[{type:"bossDeath",target:"boss_training_dummy"},{type:"specificBugKills",value:50,target:"worker"}]},{id:"boss_giant_spider",name:"Giant Spider",maxHealth:l(1e8),damage:l(5e5),defense:l(5e4),description:"A colossal arachnid with lightning-fast attacks and venomous fangs.",reward:{essence:l("5"),guaranteedItemId:"boss_hivemind_helm",itemChance:.1},unlockDescription:"Defeat the Slime King boss and kill 100 Beetles.",unlockRequirements:[{type:"bossDeath",target:"boss_slime_king"},{type:"specificBugKills",value:100,target:"beetle"}]},{id:"boss_ant_golem",name:"Ant Golem",maxHealth:l(5e8),damage:l(2e6),defense:l(1e5),description:"A massive construct made from thousands of fused ant parts. Nearly impenetrable defense.",reward:{essence:l("10"),guaranteedItemId:"boss_royal_carapace",itemChance:.08},unlockDescription:"Defeat the Giant Spider boss and kill 250 Soldier Ants.",unlockRequirements:[{type:"bossDeath",target:"boss_giant_spider"},{type:"specificBugKills",value:250,target:"soldier"}]},{id:"boss_mantis_lord",name:"Mantis Lord",maxHealth:l(5e10),damage:l(5e7),defense:l(2e6),description:"A swift and deadly mantis warrior, trained in the ancient martial arts.",reward:{essence:l("20"),guaranteedItemId:"boss_pheromone_catalyst",itemChance:.06},unlockDescription:"Defeat the Ant Golem boss, kill 500 Grasshoppers, and have at least 1e7 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_ant_golem"},{type:"specificBugKills",value:500,target:"grasshopper"},{type:"foodPerSecond",value:"1e7"}]},{id:"boss_queen_bee",name:"Queen Bee",maxHealth:l(5e13),damage:l(5e10),defense:l(5e7),description:"The matriarch of the hive, surrounded by loyal subjects and dripping with royal jelly.",reward:{essence:l("40"),guaranteedItemId:"boss_quantum_stinger",itemChance:.05},unlockDescription:"Defeat the Mantis Lord boss and kill 1,000 Cockroaches.",unlockRequirements:[{type:"bossDeath",target:"boss_mantis_lord"},{type:"specificBugKills",value:1e3,target:"cockroach"}],specialAbilities:[{name:"Swarm Attack",type:"periodicDamage",value:l(2e5),cooldown:5}]},{id:"boss_devourer_moth",name:"Devourer Moth",maxHealth:l(5e16),damage:l(5e13),defense:l(5e9),description:"A colossal moth that feeds on light and hope. Its wings create devastating gusts.",reward:{essence:l("80"),guaranteedItemId:"boss_cosmic_nucleus",itemChance:.04},unlockDescription:"Defeat the Queen Bee boss, kill 2,000 Fire Ants, and have at least 1e9 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_queen_bee"},{type:"specificBugKills",value:2e3,target:"fire_ant"},{type:"foodPerSecond",value:"1e9"}],specialAbilities:[{name:"Dust Storm",type:"playerDebuff",value:l(.5),cooldown:10}]},{id:"boss_scorpion_emperor",name:"Scorpion Emperor",maxHealth:l(5e20),damage:l(5e16),defense:l(5e11),description:"An ancient scorpion of immense size, its stinger dripping with deadly neurotoxin.",reward:{essence:l("150"),guaranteedItemId:"emperor_toxin",itemChance:.03},unlockDescription:"Defeat the Devourer Moth boss and kill 3,000 Termites.",unlockRequirements:[{type:"bossDeath",target:"boss_devourer_moth"},{type:"specificBugKills",value:3e3,target:"termite"}],specialAbilities:[{name:"Hardened Carapace",type:"defenseBuff",value:l(2),cooldown:15},{name:"Neurotoxin Sting",type:"periodicDamage",value:l(1e7),cooldown:8}]},{id:"boss_chrono_beetle",name:"Chrono-Beetle",maxHealth:l("5e25"),damage:l("5e20"),defense:l("5e13"),description:"A beetle warped by time, its movements unpredictable and its shell hardened by temporal energies.",reward:{essence:l("300"),guaranteedItemId:"boss_temporal_chitin",itemChance:.025},unlockDescription:"Defeat the Scorpion Emperor boss, kill 4,000 Wasps, and have at least 1e12 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_scorpion_emperor"},{type:"specificBugKills",value:4e3,target:"wasp"},{type:"foodPerSecond",value:"1e12"}],specialAbilities:[{name:"Time Skip",type:"playerDebuff",value:l(0),cooldown:12}]},{id:"boss_void_larva",name:"Void Larva",maxHealth:l("5e50"),damage:l("5e40"),defense:l("5e25"),description:"A nascent creature from the void, consuming reality itself. Its mere presence drains energy.",reward:{essence:l("600"),guaranteedItemId:"boss_void_essence_core",itemChance:.02},unlockDescription:"Defeat the Chrono-Beetle boss, kill 5,000 Tarantulas, and have at least 1e20 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_chrono_beetle"},{type:"specificBugKills",value:5e3,target:"tarantula"},{type:"foodPerSecond",value:"1e20"}],specialAbilities:[{name:"Reality Drain",type:"periodicDamage",value:l("1e15"),cooldown:7}]},{id:"boss_nebula_wasp_queen",name:"Nebula Wasp Queen",maxHealth:l("5e120"),damage:l("5e90"),defense:l("5e60"),description:"A queen born in a stellar nursery, commanding cosmic forces and legions of stardust wasps.",reward:{essence:l("1e3"),guaranteedItemId:"boss_nebula_stinger",itemChance:.015},unlockDescription:"Defeat the Void Larva boss, kill 6,000 Stag Beetle Swarms, and have at least 1e30 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_void_larva"},{type:"specificBugKills",value:6e3,target:"stag_beetle_swarm"},{type:"foodPerSecond",value:"1e30"}],specialAbilities:[{name:"Cosmic Swarm",type:"periodicDamage",value:l("5e24"),cooldown:6},{name:"Stardust Shield",type:"defenseBuff",value:l(1.5),cooldown:20}]},{id:"boss_dimensional_horror",name:"Dimensional Horror",maxHealth:l("5e300"),damage:l("5e240"),defense:l("5e150"),description:"An extradimensional entity whose form defies comprehension. Looking at it causes madness.",reward:{essence:l("2e3"),guaranteedItemId:"boss_reality_fragment",itemChance:.01},unlockDescription:"Defeat the Nebula Wasp Queen boss, kill 7,000 Queen Wasps, and have at least 1e50 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_nebula_wasp_queen"},{type:"specificBugKills",value:7e3,target:"queen_wasp"},{type:"foodPerSecond",value:"1e50"}],specialAbilities:[{name:"Maddening Gaze",type:"playerDebuff",value:l(.75),cooldown:10}]},{id:"boss_ascended_ant_god",name:"Ascended Ant God",maxHealth:l("5e750"),damage:l("5e600"),defense:l("5e370"),description:"An ant that has achieved true godhood, wielding unimaginable power over the colony and creation.",reward:{essence:l("5e3"),guaranteedItemId:"boss_divine_mandible",itemChance:.008},unlockDescription:"Defeat the Dimensional Horror boss, kill 8,000 Apocalyptic Termites, and have at least 1e80 food/sec production.",unlockRequirements:[{type:"bossDeath",target:"boss_dimensional_horror"},{type:"specificBugKills",value:8e3,target:"apocalyptic_termites"},{type:"foodPerSecond",value:"1e80"}],specialAbilities:[{name:"Divine Judgement",type:"periodicDamage",value:l("1e69"),cooldown:15},{name:"Godly Resilience",type:"defenseBuff",value:l(3),cooldown:25}]},{id:"boss_cosmic_hivemind",name:"Cosmic Hivemind",maxHealth:l("1e2100"),damage:l("1e1600"),defense:l("1e1000"),description:"A collective consciousness spanning galaxies, connected by threads of pure thought energy.",reward:{essence:l("1e4"),guaranteedItemId:"boss_hivemind_synapse",itemChance:.006},unlockDescription:"Defeat the Ascended Ant God, kill 9,000 Endless Ant Swarms, and achieve 1e200 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_ascended_ant_god"},{type:"specificBugKills",value:9e3,target:"endless_ant_swarms"},{type:"foodPerSecond",value:"1e200"}],specialAbilities:[{name:"Psychic Overload",type:"periodicDamage",value:l("1e178"),cooldown:10}]},{id:"boss_galactic_devourer_ant",name:"Galactic Devourer Ant",maxHealth:l("1e5100"),damage:l("1e4100"),defense:l("1e2500"),description:"An ant of impossible scale, consuming entire star systems for sustenance.",reward:{essence:l("2e4"),guaranteedItemId:"boss_star_eater_mandible",itemChance:.005},unlockDescription:"Defeat the Cosmic Hivemind, kill 10,000 Galactic Moths, and achieve 1e400 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_cosmic_hivemind"},{type:"specificBugKills",value:1e4,target:"galactic_moth"},{type:"foodPerSecond",value:"1e400"}],specialAbilities:[{name:"System Collapse",type:"playerDebuff",value:l(.5),cooldown:15}]},{id:"boss_quantum_entanglement",name:"Quantum Entanglement Entity",maxHealth:l("5e10000"),damage:l("5e8000"),defense:l("5e5000"),description:"A being formed from the quantum foam, existing in all possible states until observed.",reward:{essence:l("5e4"),guaranteedItemId:"boss_quantum_core",itemChance:.004},unlockDescription:"Defeat the Galactic Devourer Ant, kill 11,000 Quantum Beetles, and achieve 1e800 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_galactic_devourer_ant"},{type:"specificBugKills",value:11e3,target:"quantum_beetle"},{type:"foodPerSecond",value:"1e800"}],specialAbilities:[{name:"State Collapse",type:"defenseBuff",value:l(10),cooldown:20}]},{id:"boss_primordial_insectoid",name:"Primordial Insectoid",maxHealth:l("5e25000"),damage:l("5e20000"),defense:l("5e12000"),description:"One of the first insects, born from the chaos before creation. Its chitin is harder than any known material.",reward:{essence:l("1e5"),guaranteedItemId:"boss_primordial_chitin_plate",itemChance:.003},unlockDescription:"Defeat the Quantum Entanglement Entity, kill 12,000 Ant Legion Commanders, and achieve 1e1600 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_quantum_entanglement"},{type:"specificBugKills",value:12e3,target:"ant_legion_commander"},{type:"foodPerSecond",value:"1e1600"}],specialAbilities:[{name:"Unbreakable Defense",type:"defenseBuff",value:l(5),cooldown:18}]},{id:"boss_reality_weaver_spider",name:"Reality Weaver Spider",maxHealth:l("5e60000"),damage:l("5e48000"),defense:l("5e30000"),description:"A colossal arachnid that spins the very fabric of reality into its web.",reward:{essence:l("2e5"),guaranteedItemId:"boss_reality_thread",itemChance:.002},unlockDescription:"Defeat the Primordial Insectoid, kill 13,000 Ant Training Masters, and achieve 1e4000 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_primordial_insectoid"},{type:"specificBugKills",value:13e3,target:"ant_training_master"},{type:"foodPerSecond",value:"1e4000"}],specialAbilities:[{name:"Web of Realities",type:"periodicDamage",value:l("1e3450"),cooldown:8},{name:"Dimensional Snare",type:"playerDebuff",value:l(.7),cooldown:12}]},{id:"boss_omega_ant",name:"Omega Ant",maxHealth:l("5e150000"),damage:l("5e120000"),defense:l("5e75000"),description:"The final evolution. The ultimate ant. The beginning and the end.",reward:{essence:l("5e5"),guaranteedItemId:"boss_omega_particle",itemChance:.001},unlockDescription:"Defeat the Reality Weaver Spider, kill 15,000 Ant Training Masters, and achieve 1e8000 food/sec.",unlockRequirements:[{type:"bossDeath",target:"boss_reality_weaver_spider"},{type:"specificBugKills",value:15e3,target:"ant_training_master"},{type:"foodPerSecond",value:"1e8000"}],specialAbilities:[{name:"Omega Blast",type:"periodicDamage",value:l("1e6950"),cooldown:20},{name:"Alpha Resilience",type:"defenseBuff",value:l(100),cooldown:30}]}];function K1(t){return P1()?(_I(t),!0):!1}const Ib=new WeakMap,$8=(...t)=>{var e;const s=t[0],n=(e=jl())==null?void 0:e.proxy;if(n==null&&!q1())throw new Error("injectLocal must be called in setup");return n&&Ib.has(n)&&s in Ib.get(n)?Ib.get(n)[s]:pr(...t)},n3=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R8=t=>t!=null,L8=Object.prototype.toString,D8=t=>L8.call(t)==="[object Object]",na=()=>{},N8=O8();function O8(){var t,e;return n3&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function F8(t,e){function s(...n){return new Promise((r,o)=>{Promise.resolve(t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(r).catch(o)})}return s}function U8(t,e={}){let s,n,r=na;const o=u=>{clearTimeout(u),r(),r=na};let i;return u=>{const d=Nr(t),m=Nr(e.maxWait);return s&&o(s),d<=0||m!==void 0&&m<=0?(n&&(o(n),n=null),Promise.resolve(u())):new Promise((f,p)=>{r=e.rejectOnCancel?p:f,i=u,m&&!n&&(n=setTimeout(()=>{s&&o(s),n=null,f(i())},m)),s=setTimeout(()=>{n&&o(n),n=null,f(u())},d)})}}function JE(t){return t.endsWith("rem")?Number.parseFloat(t)*16:Number.parseFloat(t)}function rh(t){return Array.isArray(t)?t:[t]}function q8(t){return jl()}function H0(t,e=200,s={}){return F8(U8(e,s),t)}function r3(t,e=!0,s){q8()?Et(t,s):e?t():vs(t)}function B8(t,e,s){return dt(t,e,{...s,immediate:!0})}const Au=n3?window:void 0;function Ho(t){var e;const s=Nr(t);return(e=s==null?void 0:s.$el)!=null?e:s}function Fo(...t){const e=[],s=()=>{e.forEach(c=>c()),e.length=0},n=(c,u,d,m)=>(c.addEventListener(u,d,m),()=>c.removeEventListener(u,d,m)),r=q(()=>{const c=rh(Nr(t[0])).filter(u=>u!=null);return c.every(u=>typeof u!="string")?c:void 0}),o=B8(()=>{var c,u;return[(u=(c=r.value)==null?void 0:c.map(d=>Ho(d)))!=null?u:[Au].filter(d=>d!=null),rh(Nr(r.value?t[1]:t[0])),rh(b(r.value?t[2]:t[1])),Nr(r.value?t[3]:t[2])]},([c,u,d,m])=>{if(s(),!(c!=null&&c.length)||!(u!=null&&u.length)||!(d!=null&&d.length))return;const f=D8(m)?{...m}:m;e.push(...c.flatMap(p=>u.flatMap(g=>d.map(w=>n(p,g,w,f)))))},{flush:"post"}),i=()=>{o(),s()};return K1(s),i}let ZE=!1;function o3(t,e,s={}){const{window:n=Au,ignore:r=[],capture:o=!0,detectIframe:i=!1,controls:c=!1}=s;if(!n)return c?{stop:na,cancel:na,trigger:na}:na;if(N8&&!ZE){ZE=!0;const E={passive:!0};Array.from(n.document.body.children).forEach(k=>Fo(k,"click",na,E)),Fo(n.document.documentElement,"click",na,E)}let u=!0;const d=E=>Nr(r).some(k=>{if(typeof k=="string")return Array.from(n.document.querySelectorAll(k)).some(A=>A===E.target||E.composedPath().includes(A));{const A=Ho(k);return A&&(E.target===A||E.composedPath().includes(A))}});function m(E){const k=Nr(E);return k&&k.$.subTree.shapeFlag===16}function f(E,k){const A=Nr(E),S=A.$.subTree&&A.$.subTree.children;return S==null||!Array.isArray(S)?!1:S.some(T=>T.el===k.target||k.composedPath().includes(T.el))}const p=E=>{const k=Ho(t);if(E.target!=null&&!(!(k instanceof Element)&&m(t)&&f(t,E))&&!(!k||k===E.target||E.composedPath().includes(k))){if("detail"in E&&E.detail===0&&(u=!d(E)),!u){u=!0;return}e(E)}};let g=!1;const w=[Fo(n,"click",E=>{g||(g=!0,setTimeout(()=>{g=!1},0),p(E))},{passive:!0,capture:o}),Fo(n,"pointerdown",E=>{const k=Ho(t);u=!d(E)&&!!(k&&!E.composedPath().includes(k))},{passive:!0}),i&&Fo(n,"blur",E=>{setTimeout(()=>{var k;const A=Ho(t);((k=n.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(A!=null&&A.contains(n.document.activeElement))&&e(E)},0)},{passive:!0})].filter(Boolean),C=()=>w.forEach(E=>E());return c?{stop:C,cancel:()=>{u=!1},trigger:E=>{u=!0,p(E),u=!1}}:C}function V8(){const t=On(!1),e=jl();return e&&Et(()=>{t.value=!0},e),t}function Y1(t){const e=V8();return q(()=>(e.value,!!t()))}function H8(t,e,s={}){const{window:n=Au,...r}=s;let o;const i=Y1(()=>n&&"MutationObserver"in n),c=()=>{o&&(o.disconnect(),o=void 0)},u=q(()=>{const p=Nr(t),g=rh(p).map(Ho).filter(R8);return new Set(g)}),d=dt(()=>u.value,p=>{c(),i.value&&p.size&&(o=new MutationObserver(e),p.forEach(g=>o.observe(g,r)))},{immediate:!0,flush:"post"}),m=()=>o==null?void 0:o.takeRecords(),f=()=>{d(),c()};return K1(f),{isSupported:i,stop:f,takeRecords:m}}const G8=Symbol("vueuse-ssr-width");function j8(){const t=q1()?$8(G8,null):null;return typeof t=="number"?t:void 0}function i3(t,e={}){const{window:s=Au,ssrWidth:n=j8()}=e,r=Y1(()=>s&&"matchMedia"in s&&typeof s.matchMedia=="function"),o=On(typeof n=="number"),i=On(),c=On(!1),u=d=>{c.value=d.matches};return Qi(()=>{if(o.value){o.value=!r.value;const d=Nr(t).split(",");c.value=d.some(m=>{const f=m.includes("not all"),p=m.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),g=m.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let w=!!(p||g);return p&&w&&(w=n>=JE(p[1])),g&&w&&(w=n<=JE(g[1])),f?!w:w});return}r.value&&(i.value=s.matchMedia(Nr(t)),c.value=i.value.matches)}),Fo(i,"change",u,{passive:!0}),q(()=>c.value)}function W8(t,e,s={}){const{window:n=Au,...r}=s;let o;const i=Y1(()=>n&&"ResizeObserver"in n),c=()=>{o&&(o.disconnect(),o=void 0)},u=q(()=>{const f=Nr(t);return Array.isArray(f)?f.map(p=>Ho(p)):[Ho(f)]}),d=dt(u,f=>{if(c(),i.value&&n){o=new ResizeObserver(e);for(const p of f)p&&o.observe(p,r)}},{immediate:!0,flush:"post"}),m=()=>{c(),d()};return K1(m),{isSupported:i,stop:m}}function z8(t,e={}){const{reset:s=!0,windowResize:n=!0,windowScroll:r=!0,immediate:o=!0,updateTiming:i="sync"}=e,c=On(0),u=On(0),d=On(0),m=On(0),f=On(0),p=On(0),g=On(0),w=On(0);function C(){const k=Ho(t);if(!k){s&&(c.value=0,u.value=0,d.value=0,m.value=0,f.value=0,p.value=0,g.value=0,w.value=0);return}const A=k.getBoundingClientRect();c.value=A.height,u.value=A.bottom,d.value=A.left,m.value=A.right,f.value=A.top,p.value=A.width,g.value=A.x,w.value=A.y}function E(){i==="sync"?C():i==="next-frame"&&requestAnimationFrame(()=>C())}return W8(t,E),dt(()=>Ho(t),k=>!k&&E()),H8(t,E,{attributeFilter:["style","class"]}),r&&Fo("scroll",E,{capture:!0,passive:!0}),n&&Fo("resize",E,{passive:!0}),r3(()=>{o&&E()}),{height:c,bottom:u,left:d,right:m,top:f,width:p,x:g,y:w,update:E}}function X1(t={}){const{window:e=Au,initialWidth:s=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:r=!0,includeScrollbar:o=!0,type:i="inner"}=t,c=On(s),u=On(n),d=()=>{if(e)if(i==="outer")c.value=e.outerWidth,u.value=e.outerHeight;else if(i==="visual"&&e.visualViewport){const{width:f,height:p,scale:g}=e.visualViewport;c.value=Math.round(f*g),u.value=Math.round(p*g)}else o?(c.value=e.innerWidth,u.value=e.innerHeight):(c.value=e.document.documentElement.clientWidth,u.value=e.document.documentElement.clientHeight)};d(),r3(d);const m={passive:!0};if(Fo("resize",d,m),e&&i==="visual"&&e.visualViewport&&Fo(e.visualViewport,"resize",d,m),r){const f=i3("(orientation: portrait)");dt(f,()=>d())}return{width:c,height:u}}const eC=[{id:"welcome",target:"#header-title",title:"Welcome to Idle Ant Farm!",content:"This tour will guide you through the basics of the game.",placement:"bottom"},{id:"resources",target:"#resource-counter",title:"Resources",content:"Here you can see your current resources. These are used to purchase upgrades and ants.",placement:"bottom"},{id:"generators",target:"#generator-section",title:"Generators",content:"Generators produce resources automatically. Purchase more to increase your production.",placement:"right"},{id:"colony",target:"#colony-tab",title:"Colony",content:"Click here to access your colony, and upgrade your ants.",placement:"bottom",route:"/colony"},{id:"prestige",target:"#prestige-section",title:"Prestige",content:"When you've progressed far enough, you can prestige to earn permanent bonuses.",placement:"left",route:"/prestige"},{id:"home",target:"#home-tab",title:"Home",content:"Return to the main screen to see your colony status.",placement:"bottom",route:"/"},{id:"complete",target:"#header-title",title:"Tour Complete!",content:"You now know the basics of Idle Ant Farm. Happy farming!",placement:"bottom"}],G0=Es("tourStore",()=>{const t=Tr(),e=Tu(),s=Y(!1),n=Y(0),r=Y(eC),o=Y(!1),i=Y(!1),c=Y(null),u=Y(null),{width:d,height:m,top:f,left:p,right:g,bottom:w,x:C,y:E,update:k}=z8(c),A=q(()=>r.value[n.value]||null),S=q(()=>n.value===0),T=q(()=>n.value===r.value.length-1),R=q(()=>r.value.length);dt(()=>t.isCalculatingOfflineProgress,z=>{i.value&&!z&&(i.value=!1,o.value||setTimeout(()=>{x()},500))}),dt(A,async z=>{if(console.log("Current step changed",z),!z||!s.value){console.log("Skipping target update: no step or tour inactive");return}const ce=z.target;if(ce){if(console.log("Looking for target element",ce),await new Promise(pe=>setTimeout(pe,100)),ce.startsWith("#")){const pe=ce.substring(1);c.value=document.getElementById(pe),console.log("Found target by ID",pe,c.value)}else c.value=document.querySelector(ce),console.log("Found target by selector",ce,c.value);c.value?(k(),console.log("Updated bounding box",{width:d.value,height:m.value,top:f.value,left:p.value}),D(),I()):console.warn(`Tour target element not found: ${ce}`)}});const L=z=>{z&&z.length>0&&(r.value=z)},P=()=>{r.value=eC},I=()=>{if(console.log("Positioning tooltip",{targetElement:c.value,tooltipElement:u.value}),!c.value||!u.value){console.warn("Cannot position tooltip: missing elements",{targetElement:!!c.value,tooltipElement:!!u.value});return}const z=c.value.getBoundingClientRect(),ce=u.value.getBoundingClientRect(),pe=20;console.log("Element rects",{targetRect:z,tooltipRect:ce});let _e=z.left+z.width/2-ce.width/2,Ee=0,Ue="bottom";const ze=window.innerWidth,Re=10;_e=Math.max(Re,Math.min(_e,ze-ce.width-Re)),window.innerHeight-z.bottom-pe>=ce.height?(Ee=z.bottom+pe,Ue="bottom"):(Ee=z.top-ce.height-pe,Ue="top"),Ee<Re&&(Ee=z.bottom+pe,Ue="bottom"),console.log("Final position",{tooltipX:_e,tooltipY:Ee,placement:Ue}),u.value.style.left=`${_e}px`,u.value.style.top=`${Ee}px`,u.value.dataset.placement=Ue,u.value.getBoundingClientRect()},D=()=>{c.value&&(c.value.classList.add("tour-highlight"),c.value.scrollIntoView({behavior:"smooth",block:"center"}))},U=()=>{c.value&&c.value.classList.remove("tour-highlight")},M=()=>{k(),I()},x=async()=>{var z;if(console.log("Starting tour",{isCalculatingOfflineProgress:t.isCalculatingOfflineProgress,hasSeenTour:o.value}),t.isCalculatingOfflineProgress){console.log("Waiting for offline progress calculation to complete"),i.value=!0;return}n.value=0,console.log("Reset to first step",A.value),(z=A.value)!=null&&z.onBeforeShow&&(console.log("Running onBeforeShow hook"),await A.value.onBeforeShow()),s.value=!0,console.log("Tour activated")},$=()=>{U(),s.value=!1,o.value=!0},Z=async()=>{if(T.value){$();return}U(),n.value++;const z=A.value;z!=null&&z.route&&await e.push(z.route),z!=null&&z.onBeforeShow&&await z.onBeforeShow()},me=async()=>{if(S.value)return;U(),n.value--;const z=A.value;z!=null&&z.route&&await e.push(z.route),z!=null&&z.onBeforeShow&&await z.onBeforeShow()},re=()=>{$()},J=()=>{o.value=!1};return Et(()=>{window.addEventListener("resize",M),!t.isCalculatingOfflineProgress&&!o.value&&setTimeout(()=>{x()},500)}),xn(()=>{window.removeEventListener("resize",M),U()}),{isActive:s,currentStepIndex:n,steps:r,hasSeenTour:o,isWaitingForOfflineProgress:i,targetElement:c,tooltipElement:u,currentStep:A,isFirstStep:S,isLastStep:T,totalSteps:R,targetBounding:{width:d,height:m,top:f,left:p,right:g,bottom:w,x:C,y:E},setTourSteps:L,resetTourSteps:P,startTour:x,endTour:$,nextStep:Z,prevStep:me,skipTour:re,resetTour:J,positionTooltip:I,highlightTarget:D,removeHighlight:U,collectState:()=>({hasSeenTour:o.value}),applyState:z=>{z&&typeof z.hasSeenTour=="boolean"&&(o.value=z.hasSeenTour)}}}),Cr=Es("progression",()=>{const t=Y("initial"),e=Y({initial:!0,colonyStatus:!1,upgrades:!1,evolution:!1,complete:!1}),s=q(()=>({colonyStatus:e.value.colonyStatus,colonyPage:e.value.colonyStatus,upgrades:e.value.upgrades,evolution:e.value.evolution,aphidFarm:e.value.evolution,neurotrails:e.value.evolution,showMetamorphosisExplanation:!e.value.complete,tour:!1}));return{currentStage:t,stageCompleted:e,isFeatureUnlocked:s,checkProgression:()=>{var u;const i=Ht(),c=Vn();if(!e.value.colonyStatus){const d=i.getGenerator("worker");d&&d.count.gt(0)&&(e.value.colonyStatus=!0,t.value="colonyStatus")}e.value.colonyStatus&&!e.value.upgrades&&c.totalTicks.gte(10)&&(e.value.upgrades=!0,t.value="upgrades"),e.value.upgrades&&!e.value.evolution&&(u=i.getGenerator("nursery"))!=null&&u.count.gte(5)&&(e.value.evolution=!0,t.value="evolution"),e.value.evolution&&!e.value.complete&&St().hasEvolved&&(e.value.complete=!0,t.value="complete")},getState:()=>({currentStage:t.value,stageCompleted:e.value}),loadState:i=>{i.currentStage&&(t.value=i.currentStage),i.stageCompleted&&(e.value={...e.value,...i.stageCompleted})}}}),Q8=()=>{const t=[100,1e3,1e4,1e5,1e6,1e7,1e8,"1e9","1e10","1e12","1e15","1e18","1e21","1e24","1e27","1e30","1e33","1e36","1e40","1e45","1e50","1e60","1e70","1e80","1e90","1e100","1e120","1e150","1e200","1e250","1e300","1e350","1e400","1e450","1e500"],e=["Hungry Beginnings","First Snack","Food Stock","Small Pantry","Food Hoarder","Nutritional Wealth","Food Supply Chain","Food Mountain","Endless Buffet","Food Empire","Quantum Nutrients","Interdimensional Feast","Sextillion Snack","Septillion Supper","Octillion Omelets","Nonillion Nourishment","Decillion Dinner","Undecillion Utopia","Duodecillion Delicacies","Tredecillion Treats","Quattuordecillion Quantities","Quintillion Quotient","Sextillion Surplus","Septillion Stores","Octillion Overstock","Googol Gastronomy","Trigintillion Triumph","Quantum Realm Cuisine","Cosmic Consumables","Universal Eatery","Multiversal Meals","Hyperdimensional Hunger","Transcendent Treats","Infinite Ingestion","Unlimited Appetite"],s=t.map(o=>`Collect ${o} food in total`),r=(()=>{const o=[];for(let c=0;c<5;c++){const u=1.02+c*.02;o.push({target:"worker",multiplier:u,description:`Worker production +${Math.round((u-1)*100)}%`})}for(let c=0;c<3;c++){const u=1.05+c*.05;o.push({target:"nursery",multiplier:u,description:`Nursery production +${Math.round((u-1)*100)}%`})}for(let c=0;c<3;c++){const u=1.05+c*.05;o.push({target:"queenChamber",multiplier:u,description:`Queen Chamber production +${Math.round((u-1)*100)}%`})}for(let c=0;c<3;c++){const u=1.05+c*.05;o.push({target:"colony",multiplier:u,description:`Colony production +${Math.round((u-1)*100)}%`})}for(let c=0;c<3;c++){const u=1.05+c*.05;o.push({target:"megacolony",multiplier:u,description:`Megacolony production +${Math.round((u-1)*100)}%`})}for(let c=0;c<2;c++){const u=1.05+c*.05;o.push({target:"hivemind",multiplier:u,description:`Hivemind production +${Math.round((u-1)*100)}%`})}for(let c=0;c<2;c++){const u=1.05+c*.05;o.push({target:"antopolis",multiplier:u,description:`Antopolis production +${Math.round((u-1)*100)}%`})}for(let c=0;c<1;c++){const u=1.05+c*.05;o.push({target:"alateHatchery",multiplier:u,description:`Alate Hatchery production +${Math.round((u-1)*100)}%`})}const i=t.length-o.length;for(let c=0;c<i;c++){let u;c<5?u=3+c*2:c<8?u=15+(c-5)*5:u=30+(c-8)*10,o.push({target:"global",multiplier:1+u/100,description:`All generators +${u}%`})}return o})();return t.map((o,i)=>({id:`food-${i+1}`,name:e[i],description:s[i],categoryId:"general",icon:"i-heroicons-cake",requirement:l(o),currentValue:l(0),completed:!1,completionDate:void 0,rewardDescription:r[i].description,hiddenUntilCompleted:!1,targetStat:"totalFood",modifiers:[{target:r[i].target,multiplier:l(r[i].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} ${r[i].target==="global"?"all generators":`${r[i].target} production`}`}]}))},K8=()=>{const t=[3600,10800,21600,43200,86400,172800,259200,432e3,604800,1209600,2592e3,5184e3,7776e3,15552e3,31536e3],e=["Dedicated","Entomologist","Ant Observer","Insect Enthusiast","Ant Enthusiast","Colony Caretaker","Devoted Director","Committed Keeper","Colony Manager","Queen's Guardian","Master Myrmecologist","Supreme Superintendent","Legendary Leader","Ant Archon","Time Lord of Ants"],s=["Play for 1 hour in total (since your first game)","Play for 3 hours in total (since your first game)","Play for 6 hours in total (since your first game)","Play for 12 hours in total (since your first game)","Play for 1 day in total (since your first game)","Play for 2 days in total (since your first game)","Play for 3 days in total (since your first game)","Play for 5 days in total (since your first game)","Play for 1 week in total (since your first game)","Play for 2 weeks in total (since your first game)","Play for 1 month in total (since your first game)","Play for 2 months in total (since your first game)","Play for 3 months in total (since your first game)","Play for 6 months in total (since your first game)","Play for 1 year in total (since your first game)"],r=t.map((o,i)=>{const c=Math.min(1+Math.floor(i*.5),10);return{target:"global",multiplier:1+c/100,description:`All generators +${c}%`}});return t.map((o,i)=>({id:`time-${i+1}`,name:e[i],description:s[i],categoryId:"general",icon:"i-heroicons-clock",requirement:l(o),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:!1,targetStat:"totalGameTime",rewardDescription:r[i].description,modifiers:[{target:r[i].target,multiplier:l(r[i].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} all generators`}]}))},Y8=()=>{const t=[10,100,1e3,1e6,1e9,1e12,1e15,1e20,1e25,1e30,1e40,1e50,1e60,1e75,1e90,1e100,1e125,1e150,1e175,1e200,1e225,1e250,1e275,1e300,1/0,1/0,1/0,1/0,1/0],e=["First Workers","Worker Army","Worker Legion","Worker Nation","Worker Empire","Worker Planet","Worker Galaxy","Worker Universe","Worker Dimension","Worker Multiverse","Worker Hyperverse","Worker Omniverse","Worker Xenoverse","Worker Megaverse","Worker Gigaverse","Worker Teraverse","Worker Petaverse","Worker Exaverse","Worker Zettaverse","Worker Yottaverse","Worker Xennaverse","Worker Wekaverse","Worker Vendaverse","Worker Udaverse","Worker Tredaverse","Worker Sornaverse","Worker Rinnaverse","Worker Quentaverse","Worker Immortal Empire"],s=["Have 10 worker ants","Have 100 worker ants","Have 1,000 worker ants","Have a million worker ants","Have a billion worker ants","Have a trillion worker ants","Have a quadrillion worker ants","Have 1e20 worker ants","Have 1e25 worker ants","Have 1e30 worker ants","Have 1e40 worker ants","Have 1e50 worker ants","Have 1e60 worker ants","Have 1e75 worker ants","Have 1e90 worker ants","Have 1e100 worker ants","Have 1e125 worker ants","Have 1e150 worker ants","Have 1e175 worker ants","Have 1e200 worker ants","Have 1e225 worker ants","Have 1e250 worker ants","Have 1e275 worker ants","Have 1e300 worker ants","Have 1e325 worker ants","Have 1e350 worker ants","Have 1e400 worker ants","Have 1e450 worker ants","Have 1e500 worker ants"],n=[null,null,{multiplier:1.05,description:"Worker production +5%"},{multiplier:1.1,description:"Worker production +10%"},{multiplier:1.15,description:"Worker production +15%"},{multiplier:1.2,description:"Worker production +20%"},{multiplier:1.25,description:"Worker production +25%"},{multiplier:1.3,description:"Worker production +30%"},{multiplier:1.35,description:"Worker production +35%"},{multiplier:1.4,description:"Worker production +40%"},{multiplier:1.45,description:"Worker production +45%"},{multiplier:1.5,description:"Worker production +50%"},{multiplier:1.55,description:"Worker production +55%"},{multiplier:1.6,description:"Worker production +60%"},{multiplier:1.65,description:"Worker production +65%"},{multiplier:1.68,description:"Worker production +68%"},{multiplier:1.71,description:"Worker production +71%"},{multiplier:1.74,description:"Worker production +74%"},{multiplier:1.77,description:"Worker production +77%"},{multiplier:1.8,description:"Worker production +80%"},{multiplier:1.83,description:"Worker production +83%"},{multiplier:1.86,description:"Worker production +86%"},{multiplier:1.89,description:"Worker production +89%"},{multiplier:1.92,description:"Worker production +92%"},{multiplier:1.94,description:"Worker production +94%"},{multiplier:1.96,description:"Worker production +96%"},{multiplier:1.98,description:"Worker production +98%"},{multiplier:1.99,description:"Worker production +99%"},{multiplier:2,description:"Worker production +100%"}];return t.map((r,o)=>{const i={id:`workers-${o+1}`,name:e[o],description:s[o],categoryId:"colony",icon:"i-heroicons-bug-ant",requirement:l(r),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:o>5,targetStat:"workers"};return n[o]&&(i.rewardDescription=n[o].description,i.modifiers=[{target:"worker",multiplier:l(n[o].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} worker production`}]),i})},X8=()=>{const t=[1,5,10,25,50,100],e=["First Evolution","Evolving Species","Evolution Expert","Evolution Master","Darwin Would Be Proud","Evolutionary Apex"],s=t.map(r=>`Perform ${r} evolution${r>1?"s":""}`),n=[null,{multiplier:1.02,description:"All generators +2%"},null,{multiplier:1.05,description:"All generators +5%"},{multiplier:1.1,description:"All generators +10%"},{multiplier:1.2,description:"All generators +20%"}];return t.map((r,o)=>{const i={id:`evolution-${r===1?"1":r}`,name:e[o],description:s[o],categoryId:"evolution",icon:"i-heroicons-sparkles",requirement:l(r),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:!1,targetStat:"totalEvolutions"};return n[o]&&(i.rewardDescription=n[o].description,i.modifiers=[{target:"global",multiplier:l(n[o].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} all generators`}]),i})},J8=()=>{const t=[10,25,50],e=["Loop Master","Loop Expert","Loop Legend"],s=t.map(r=>`Complete ${r} loops in a single evolution`),n=[null,null,{multiplier:1.1,description:"Evolution Points +10%"}];return t.map((r,o)=>{const i={id:`loops-${o+1}`,name:e[o],description:s[o],categoryId:"evolution",icon:"i-heroicons-arrow-path",requirement:l(r),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:!1,targetStat:"maxLoopsInEvolution"};return n[o]&&(i.rewardDescription=n[o].description,i.modifiers=[{target:"ep",multiplier:l(n[o].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} evolution points`}]),i})},Z8=()=>{const t=[10,100,1e3],e=["Evolution Points","Evolution Wealth","Evolution Fortune"],s=t.map(r=>`Earn ${r} evolution points in total`),n=[null,null,{multiplier:1.05,description:"Evolution Points +5%"}];return t.map((r,o)=>{const i={id:`ep-${o+1}`,name:e[o],description:s[o],categoryId:"evolution",icon:"i-heroicons-bolt",requirement:l(r),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:!1,targetStat:"totalEvolutionPoints"};return n[o]&&(i.rewardDescription=n[o].description,i.modifiers=[{target:"ep",multiplier:l(n[o].multiplier),formatMultiplier:c=>`+${Lt(c.sub(1).mul(100))} evolution points`}]),i})},Pb=(t,e,s,n,r=null,o=1.2)=>{const i=n.map((d,m)=>m===0?`First ${e}`:m===1?`${e} Network`:m===2?`${e} Empire`:m===3?`${e} Dominion`:m===4?`${e} Supremacy`:m===5?`${e} Mastery`:m===6?`${e} Abundance`:m===7?`${e} Legacy`:m===8?`${e} Infinity`:m===9?`Cosmic ${e}`:m===10?`Galactic ${e}`:m===11?`Universal ${e}`:m===12?`Multiversal ${e}`:m===13?`Transcendent ${e}`:`Omnipotent ${e}`),c=n.map(d=>{const m=String(d);let f;if(m.includes("e")){const[p,g]=m.split("e"),w=parseInt(g,10);if(w<6)f=Number(m).toLocaleString();else if(w<21){const C=["Million","Million","Million","Billion","Billion","Billion","Trillion","Trillion","Trillion","Quadrillion","Quadrillion","Quadrillion","Quintillion","Quintillion","Quintillion"],E=w-6,k=C[E];f=`${(Math.pow(10,w%3)*parseFloat(p)).toFixed(2)} ${k}`}else f=`10^${g}`}else Number(m)>=1e6?f=`${(Number(m)/1e6).toFixed(1)}M`:Number(m)>=1e3?f=`${(Number(m)/1e3).toFixed(1)}K`:f=m;return`Have ${f} ${e.toLowerCase()}${Number(m)>1?"s":""}`}),u={nursery:"nurseries",queenChamber:"queenChambers",colony:"colonies",megacolony:"megacolonies",hivemind:"hiveminds",antopolis:"antopolis",alateHatchery:"alateHatchery"};return n.map((d,m)=>{const f={id:`${t.toLowerCase()}-${m+1}`,name:i[m],description:c[m],categoryId:"colony",icon:s,requirement:l(d),currentValue:l(0),completed:!1,completionDate:void 0,hiddenUntilCompleted:m>4,targetStat:u[t]||`${t.toLowerCase()}s`};if(r!==null&&m===r){const p=Math.round((o-1)*100);f.rewardDescription=`${e} production +${p}%`,f.modifiers=[{target:t,multiplier:l(o),formatMultiplier:g=>`+${Lt(g.sub(1).mul(100))} ${t.toLowerCase()} production`}]}if(m>5){const p=Math.min(1,.1+(m-5)*.05),g=Math.round(p*100);if(f.rewardDescription=`${e} production +${g}%`,f.modifiers=[{target:t,multiplier:l(1+p),formatMultiplier:w=>`+${Lt(w.sub(1).mul(100))} ${t.toLowerCase()} production`}],m>=10){const w=.05+(m-10)*.05,C=Math.round(w*100);f.rewardDescription+=` and all generators +${C}%`,f.modifiers.push({target:"global",multiplier:l(1+w),formatMultiplier:E=>`+${Lt(E.sub(1).mul(100))} all generators`})}}return f})},e7=()=>[{id:"megacolony",name:"Mega Colony",displayName:"Mega Expansion",icon:"i-heroicons-building-office-2",statName:"megacolonies"},{id:"hivemind",name:"Hive Mind",displayName:"Collective Consciousness",icon:"i-heroicons-cpu-chip",statName:"hiveminds"},{id:"antopolis",name:"Antopolis",displayName:"Ant City",icon:"i-heroicons-building-library",statName:"antopolis"},{id:"alateHatchery",name:"Alate Hatchery",displayName:"Alate Hatchery",icon:"i-heroicons-building-library",statName:"alateHatchery"}].map(e=>({id:`${e.id}-1`,name:e.displayName,description:`Have your first ${e.name.toLowerCase()}`,categoryId:"colony",icon:e.icon,requirement:l(1),currentValue:l(0),completed:!1,completionDate:void 0,rewardDescription:`${e.name} production +5%`,hiddenUntilCompleted:!1,targetStat:e.statName,modifiers:[{target:e.id,multiplier:l(1.05),formatMultiplier:s=>`+${Lt(s.sub(1).mul(100))} ${e.id} production`}]})),t7=()=>({id:"adventure-unlock",name:"Adventure Begins",description:"Unlock adventure mode",categoryId:"adventure",icon:"i-heroicons-map",requirement:l(1),currentValue:l(0),completed:!1,completionDate:void 0,rewardDescription:"",hiddenUntilCompleted:!0}),s7=()=>[{id:"general",name:"General",description:"General game achievements",icon:"i-heroicons-trophy",sortOrder:0,achievements:[]},{id:"colony",name:"Colony",description:"Achievements related to your ant colony",icon:"i-heroicons-bug-ant",sortOrder:1,achievements:[]},{id:"evolution",name:"Evolution",description:"Achievements related to evolution progress",icon:"i-heroicons-sparkles",sortOrder:2,achievements:[]},{id:"adventure",name:"Adventure",description:"Achievements related to adventure mode",icon:"i-heroicons-map",sortOrder:3,achievements:[]}],n7=()=>{const t=[10,100,1e3,1e4,1e5,"1e6","1e9","1e12","1e15","1e20","1e30","1e50","1e75","1e100","1e150","1e200","1e250"],e=[10,100,1e3,1e4,"1e5",...t.slice(5)];return[...Q8(),...K8(),...Y8(),...Pb("nursery","Nursery","i-heroicons-home-modern",t,4,1.2),...Pb("queenChamber","Queen Chamber","i-heroicons-crown",t,4,1.1),...Pb("colony","Colony","i-heroicons-building-storefront",e,3,1.05),...e7(),...X8(),...Z8(),...J8(),t7()]},a3=s7(),l3=n7();l3.forEach(t=>{const e=a3.find(s=>s.id===t.categoryId);e&&e.achievements.push(t)});const Or=Es("achievements",()=>{const t=Y(l3),e=Y(a3),s=Y({food:l(0),totalFood:l(0),workers:l(0),totalWorkers:l(0),nurseries:l(0),totalNurseries:l(0),queenChambers:l(0),totalQueenChambers:l(0),colonies:l(0),totalColonies:l(0),megacolonies:l(0),totalMegacolonies:l(0),hiveminds:l(0),totalHiveminds:l(0),antopolis:l(0),totalAntopolis:l(0),alateHatchery:l(0),totalAlateHatchery:l(0),evolutionPoints:l(0),totalEvolutionPoints:l(0),totalEvolutions:l(0),maxLoopsInEvolution:l(0),totalGameTime:l(0),fastestEvolution:l(0),generatorUpgradesPurchased:l(0),prestigeUpgradesPurchased:l(0)}),n=Y([]),r=Y(!1),o=Y(!0),i=q(()=>t.value.length),c=q(()=>t.value.filter(L=>L.completed).length),u=q(()=>c.value/i.value*100),d=L=>t.value.filter(P=>P.categoryId===L),m=()=>t.value.filter(L=>!L.hiddenUntilCompleted||L.completed),f=L=>{const P=t.value.find(I=>I.id===L);return P?P.completed:!1},p=(L,P,I=!1)=>{s.value[L]&&(I?s.value[L]=s.value[L].add(P):s.value[L]=P,g(L))},g=L=>{const P=t.value.filter(I=>I.targetStat===L&&!I.completed);for(const I of P)I.currentValue=s.value[L],I.currentValue.gte(I.requirement)&&w(I.id)},w=L=>{console.log("completeAchievement",L);const P=t.value.find(I=>I.id===L);!P||P.completed||(P.completed=!0,P.completionDate=Date.now(),n.value.push(P),o.value&&(r.value=!0),setTimeout(()=>{n.value=n.value.filter(I=>I.id!==L),n.value.length===0&&(r.value=!1)},5e3))},C=(L,P)=>{p("food",L,!1),p("totalFood",P,!0)},E=(L,P)=>{switch(L){case"worker":p("workers",P,!1);break;case"nursery":p("nurseries",P,!1);break;case"queenChamber":p("queenChambers",P,!1);break;case"colony":p("colonies",P,!1);break;case"megacolony":p("megacolonies",P,!1);break;case"hivemind":p("hiveminds",P,!1);break;case"antopolis":p("antopolis",P,!1);break;case"alateHatchery":p("alateHatchery",P,!1);break}},k=(L,P,I,D)=>{p("evolutionPoints",L,!1),p("totalEvolutionPoints",P,!0),p("totalEvolutions",I,!1),p("maxLoopsInEvolution",D,!1)},A=()=>{try{const L=Tr();if(L.firstSaveTime){const P=Date.now()-L.firstSaveTime,I=Math.floor(P/1e3),D=l(I);p("totalGameTime",D,!1)}}catch(L){console.error("Error updating time achievements:",L)}};return{achievementList:t,categories:e,stats:s,recentlyCompleted:n,showNotification:r,notificationsEnabled:o,totalAchievements:i,completedAchievements:c,completionPercentage:u,getAchievementsByCategory:d,getVisibleAchievements:m,checkAchievement:f,updateStats:p,completeAchievement:w,updateFoodStats:C,updateGeneratorCounts:E,updateEvolutionStats:k,tick:(L=1)=>{try{A()}catch(P){console.error("Error updating game time achievements:",P)}},getState:()=>({achievements:t.value.map(L=>({id:L.id,currentValue:L.currentValue.toString(),completed:L.completed,completionDate:L.completionDate})),stats:Object.entries(s.value).reduce((L,[P,I])=>(L[P]=I.toString(),L),{}),notificationsEnabled:o.value}),loadState:L=>{L.achievements&&Array.isArray(L.achievements)&&L.achievements.forEach(P=>{const I=t.value.find(D=>D.id===P.id);I&&(I.currentValue=l(P.currentValue),I.completed=P.completed,I.completionDate=P.completionDate)}),L.stats&&Object.entries(L.stats).forEach(([P,I])=>{const D=P;s.value[D]!==void 0&&(s.value[D]=l(I))}),L.notificationsEnabled!==void 0&&(o.value=L.notificationsEnabled),setTimeout(()=>{A()},100)}}});function r7(t,e,s,n,r){if(e.lte(0)||t.lte(0)||s<=1)return console.error("Invalid input for level calculation.",{currentItemBaseCost:t,prerequisiteItemBaseCost:e,costGrowthRate:s}),1;const o=s,i=o-1;try{const c=l(n).mul(t).mul(i).div(e).add(1);if(c.lte(1))return 1;const u=Math.log(c.toNumber()),d=Math.log(o);if(d===0)return 1;const m=u/d,f=Math.round(m);return Math.max(1,Math.min(f,r))}catch(c){console.error("Error calculating required level:",c),console.error("Inputs:",{currentItemBaseCost:t.toString(),prerequisiteItemBaseCost:e.toString(),costGrowthRate:s,targetRatio:n});try{const u=t.div(e);if(u.lte(1))return 1;const d=Math.log(u.toNumber())/Math.log(o),m=Math.round(d);return Math.max(1,Math.min(m,r))}catch(u){return console.error("Fallback calculation failed:",u),1}}}const Ml=Es("pheromoneShop",()=>{const t=Ks(),e=[{id:"food_amplifier",name:"Food Amplifier",description:"Enhances food production through advanced pheromone manipulation.",maxLevel:150,baseCost:l(10),modifiers:[{target:"worker",multiplier:x=>l(1).add(x*.07),unlockLevel:1,description:"Food Production +7% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-10)*.05),unlockLevel:10,description:"Pheromone Gain +5% per level above 10"},{target:"ep",multiplier:x=>l(1).add((x-25)*.05),unlockLevel:25,description:"EP Gain +5% per level above 25"},{target:"pheromone",multiplier:x=>l(1).add((x-50)*.03),unlockLevel:50,description:"Pheromone Gain +3% per level above 50"}]},{id:"ant_trail_blazer",name:"Ant Trail Blazer",description:"Mark your path to success with powerful pheromone trails.",maxLevel:150,baseCost:l(50),modifiers:[{target:"worker",multiplier:x=>l(1).add(x*.05),unlockLevel:1,description:"Food Production +5% per level"},{target:"nursery",multiplier:x=>l(1).add(x*.05),unlockLevel:1,description:"Nursery Production +5% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-20)*.03),unlockLevel:20,description:"Pheromone Gain +3% per level above 20"}]},{id:"evolution_catalyst",name:"Evolution Catalyst",description:"Accelerates evolutionary progress through pheromone enhancement.",maxLevel:150,baseCost:l(50),modifiers:[{target:"ep",multiplier:x=>l(1).add(x*.1),unlockLevel:1,description:"EP Gain +10% per level"},{target:"worker",multiplier:x=>l(1).add((x-20)*.08),unlockLevel:20,description:"Food Production +8% per level above 20"},{target:"pheromone",multiplier:x=>l(1).add((x-40)*.04),unlockLevel:40,description:"Pheromone Gain +4% per level above 40"}],unlockRequirement:{type:"itemLevel",target:"food_amplifier",value:5,description:"Reach level 5 with Food Amplifier"}},{id:"sweet_scent",name:"Sweet Scent",description:"A sweet pheromone blend that makes all ants work more efficiently.",maxLevel:150,baseCost:l(150),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.03),unlockLevel:1,description:"All Generators +3% per level"},{target:"ep",multiplier:x=>l(1).add((x-25)*.04),unlockLevel:25,description:"EP Gain +4% per level above 25"},{target:"pheromone",multiplier:x=>l(1).add((x-60)*.02),unlockLevel:60,description:"Pheromone Gain +2% per level above 60"}],unlockRequirement:{type:"itemLevel",target:"ant_trail_blazer",value:5,description:"Reach level 5 with Ant Trail Blazer"}},{id:"larva_logistics",name:"Larva Logistics",description:"Optimize nursery operations for faster growth.",maxLevel:150,baseCost:l(200),modifiers:[{target:"nursery",multiplier:x=>l(1).add(x*.09),unlockLevel:1,description:"Nursery Production +9% per level"},{target:"worker",multiplier:x=>l(1).add((x-15)*.04),unlockLevel:15,description:"Food Production +4% per level above 15"},{target:"ep",multiplier:x=>l(1).add((x-35)*.03),unlockLevel:35,description:"EP Gain +3% per level above 35"}],unlockRequirement:{type:"itemLevel",target:"evolution_catalyst",value:3,description:"Reach level 3 with Evolution Catalyst"}},{id:"formic_boost",name:"Formic Boost",description:"Harness the power of formic acid to supercharge your colony.",maxLevel:150,baseCost:l(400),modifiers:[{target:"worker",multiplier:x=>l(1).add(x*.08),unlockLevel:1,description:"Food Production +8% per level"},{target:"queenChamber",multiplier:x=>l(1).add(x*.07),unlockLevel:1,description:"Queen Chamber Production +7% per level"},{target:"nursery",multiplier:x=>l(1).add(x*.04),unlockLevel:1,description:"Nursery Production +4% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-20)*.04),unlockLevel:20,description:"Pheromone Gain +4% per level above 20"}],unlockRequirement:{type:"itemLevel",target:"sweet_scent",value:10,description:"Reach level 10 with Sweet Scent"}},{id:"ant_i_gravity",name:"Ant-i-Gravity",description:"Defying the laws of physics, just like ants carrying 50x their weight!",maxLevel:150,baseCost:l(1e3),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.05),unlockLevel:1,description:"All Generators +5% per level"},{target:"nursery",multiplier:x=>l(1).add((x-25)*.15),unlockLevel:25,description:"Nursery Production +15% per level above 25"},{target:"pheromone",multiplier:x=>l(1).add((x-50)*.08),unlockLevel:50,description:"Pheromone Gain +8% per level above 50"},{target:"ep",multiplier:x=>l(1).add((x-75)*.12),unlockLevel:75,description:"EP Gain +12% per level above 75"}],unlockRequirement:{type:"itemLevel",target:"evolution_catalyst",value:10,description:"Reach level 10 with Evolution Catalyst"}},{id:"no_picant",name:"No Pic-ant",description:"We packed the perfect pheromones for this pic-ant! Spicy!",maxLevel:150,baseCost:l(5e3),modifiers:[{target:"worker",multiplier:x=>l(1).add(x*.25),unlockLevel:1,description:"Food Production +25% per level"},{target:"global",multiplier:x=>l(1).add((x-30)*.1),unlockLevel:30,description:"All Generators +10% per level above 30"},{target:"pheromone",multiplier:x=>l(1).add((x-60)*.15),unlockLevel:60,description:"Pheromone Gain +15% per level above 60"}],unlockRequirement:{type:"itemLevel",target:"ant_i_gravity",value:15,description:"Reach level 15 with Ant-i-Gravity"}},{id:"royal_jelly_reserves",name:"Royal Jelly Reserves",description:"Specially formulated jelly to boost the Queen Chamber's output.",maxLevel:150,baseCost:l(8e3),modifiers:[{target:"queenChamber",multiplier:x=>l(1).add(x*.18),unlockLevel:1,description:"Queen Chamber Production +18% per level"},{target:"worker",multiplier:x=>l(1).add((x-25)*.06),unlockLevel:25,description:"Food Production +6% per level above 25"},{target:"ep",multiplier:x=>l(1).add((x-50)*.07),unlockLevel:50,description:"EP Gain +7% per level above 50"}],unlockRequirement:{type:"itemLevel",target:"formic_boost",value:20,description:"Reach level 20 with Formic Boost"}},{id:"formicidable_power",name:"Formicidable Power",description:"Unleash the formidable power of the Formicidae family!",maxLevel:150,baseCost:l(2e4),modifiers:[{target:"queenChamber",multiplier:x=>l(1).add(x*.2),unlockLevel:1,description:"Queen Chamber Production +20% per level"},{target:"colony",multiplier:x=>l(1).add(x*.2),unlockLevel:1,description:"Colony Production +20% per level"},{target:"global",multiplier:x=>l(1).add((x-30)*.08),unlockLevel:30,description:"All Generators +8% per level above 30"},{target:"ep",multiplier:x=>l(1).add((x-75)*.15),unlockLevel:75,description:"EP Gain +15% per level above 75"}],unlockRequirement:{type:"essence",value:5e3,description:"Collect 5,000 Pheromone Essence total"}},{id:"uncl_ant",name:"Uncl-Ant Power",description:"With great power comes great respANTsibility.",maxLevel:150,baseCost:l(25e3),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.12),unlockLevel:1,description:"All Generators +12% per level"},{target:"ep",multiplier:x=>l(1).add(x*.18),unlockLevel:1,description:"EP Gain +18% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-70)*.2),unlockLevel:70,description:"Pheromone Gain +20% per level above 70"}],unlockRequirement:{type:"itemLevel",target:"no_picant",value:25,description:"Reach level 25 with No Pic-ant"}},{id:"collective_construction",name:"Collective Construction",description:"Coordinated building efforts enhance Colony and Megacolony structures.",maxLevel:150,baseCost:l(5e4),modifiers:[{target:"colony",multiplier:x=>l(1).add(x*.3),unlockLevel:1,description:"Colony Production +30% per level"},{target:"megacolony",multiplier:x=>l(1).add((x-35)*.2),unlockLevel:35,description:"Megacolony Production +20% per level above 35"},{target:"global",multiplier:x=>l(1).add((x-70)*.1),unlockLevel:70,description:"All Generators +10% per level above 70"}],unlockRequirement:{type:"itemLevel",target:"formicidable_power",value:15,description:"Reach level 15 with Formicidable Power"}},{id:"antomaton",name:"Antomaton",description:"Robotic ants with advanced AI that never sleep or rest!",maxLevel:150,baseCost:l(75e3),modifiers:[{target:"worker",multiplier:x=>l(1).add(x*.35),unlockLevel:1,description:"Food Production +35% per level"},{target:"nursery",multiplier:x=>l(1).add(x*.35),unlockLevel:1,description:"Nursery Production +35% per level"},{target:"global",multiplier:x=>l(1).add((x-40)*.2),unlockLevel:40,description:"All Generators +20% per level above 40"},{target:"pheromone",multiplier:x=>l(1).add((x-80)*.4),unlockLevel:80,description:"Pheromone Gain +40% per level above 80"}],unlockRequirement:{type:"itemLevel",target:"uncl_ant",value:30,description:"Reach level 30 with Uncl-Ant Power"}},{id:"hill_of_a_deal",name:"Hill of a Deal",description:"This deal is too good to pass up! Trust me, I'm an antrepreneur.",maxLevel:150,baseCost:l(15e4),modifiers:[{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"megacolony",multiplier:x=>l(1).add(x*.3),unlockLevel:1,description:"Megacolony Production +30% per level"},{target:"hivemind",multiplier:x=>l(1).add(x*.3),unlockLevel:1,description:"Hivemind Production +30% per level"},{target:"global",multiplier:x=>l(1).add((x-50)*.1),unlockLevel:50,description:"All Generators +10% per level above 50"},{target:"ep",multiplier:x=>l(1).add((x-100)*.2),unlockLevel:100,description:"EP Gain +20% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"formicidable_power",value:25,description:"Reach level 25 with Formicidable Power"}},{id:"ant_architect",name:"Ant Architect",description:"Master builders who create elaborate and efficient colony structures.",maxLevel:150,baseCost:l(15e4),modifiers:[{target:"colony",multiplier:x=>l(1).add(x*.45),unlockLevel:1,description:"Colony Production +45% per level"},{target:"megacolony",multiplier:x=>l(1).add(x*.45),unlockLevel:1,description:"Megacolony Production +45% per level"},{target:"global",multiplier:x=>l(1).add((x-40)*.25),unlockLevel:40,description:"All Generators +25% per level above 40"},{target:"ep",multiplier:x=>l(1).add((x-90)*.5),unlockLevel:90,description:"EP Gain +50% per level above 90"}],unlockRequirement:{type:"itemLevel",target:"antomaton",value:40,description:"Reach level 40 with Antomaton"}},{id:"antstronaut",name:"ANTstronaut Program",description:"One small step for ant, one giant leap for ant-kind!",maxLevel:150,baseCost:l(1e6),modifiers:[{target:"antopolis",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Antopolis Production +50% per level"},{target:"global",multiplier:x=>l(1).add(x*.15),unlockLevel:1,description:"All Generators +15% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-60)*.3),unlockLevel:60,description:"Pheromone Gain +30% per level above 60"},{target:"ep",multiplier:x=>l(1).add((x-90)*.4),unlockLevel:90,description:"EP Gain +40% per level above 90"},{target:"global",multiplier:x=>l(1).add((x-125)*.5),unlockLevel:125,description:"All Generators +50% per level above 125"}],unlockRequirement:{type:"itemLevel",target:"hill_of_a_deal",value:50,description:"Reach level 50 with Hill of a Deal"}},{id:"synaptic_synchronization",name:"Synaptic Synchronization",description:"Boost Hivemind efficiency and Alate production through neural networking.",maxLevel:150,baseCost:l(3e6),modifiers:[{target:"hivemind",multiplier:x=>l(1).add(x*.4),unlockLevel:1,description:"Hivemind Production +40% per level"},{target:"alateHatchery",multiplier:x=>l(1).add(x*.25),unlockLevel:1,description:"Alate Hatchery Production +25% per level"},{target:"ep",multiplier:x=>l(1).add((x-40)*.3),unlockLevel:40,description:"EP Gain +30% per level above 40"},{target:"pheromone",multiplier:x=>l(1).add((x-80)*.4),unlockLevel:80,description:"Pheromone Gain +40% per level above 80"}],unlockRequirement:{type:"itemLevel",target:"ant_architect",value:50,description:"Reach level 50 with Ant Architect"}},{id:"ant_of_steel",name:"Ant of Steel",description:"It's a bird! It's a plane! No, it's Super-Ant!",maxLevel:150,baseCost:l(5e7),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.25),unlockLevel:1,description:"All Generators +25% per level"},{target:"alateHatchery",multiplier:x=>l(1).add(x*.4),unlockLevel:1,description:"Alate Hatchery Production +40% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-50)*.5),unlockLevel:50,description:"Pheromone Gain +50% per level above 50"},{target:"ep",multiplier:x=>l(1).add((x-100)*.5),unlockLevel:100,description:"EP Gain +50% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"antstronaut",value:60,description:"Reach level 60 with ANTstronaut Program"}},{id:"quantum_antanglement",name:"Quantum Antanglement",description:"Entangle your ant colonies across multiple quantum dimensions.",maxLevel:150,baseCost:l(25e8),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.35),unlockLevel:1,description:"All Generators +35% per level"},{target:"hivemind",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Hivemind Production +50% per level"},{target:"antopolis",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Antopolis Production +50% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-75)*.5),unlockLevel:75,description:"Pheromone Gain +50% per level above 75"},{target:"ep",multiplier:x=>l(1).add((x-110)*.5),unlockLevel:110,description:"EP Gain +50% per level above 110"}],unlockRequirement:{type:"itemLevel",target:"ant_of_steel",value:70,description:"Reach level 70 with Ant of Steel"}},{id:"temporal_tunnels",name:"Temporal Tunnels",description:"Bend spacetime to accelerate resource generation across the entire colony.",maxLevel:150,baseCost:l(1e11),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.4),unlockLevel:1,description:"All Generators +40% per level"},{target:"ep",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"EP Gain +50% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-80)*.5),unlockLevel:80,description:"Pheromone Gain +50% per level above 80"},{target:"global",multiplier:x=>l(1).add((x-120)*.5),unlockLevel:120,description:"All Generators +50% per level above 120"}],unlockRequirement:{type:"itemLevel",target:"quantum_antanglement",value:75,description:"Reach level 75 with Quantum Antanglement"}},{id:"ant_metaverse",name:"Ant Metaverse",description:"Connect your colonies in virtual reality for exponential synergy.",maxLevel:150,baseCost:l(5e12),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"All Generators +50% per level"},{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"ep",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"EP Gain +50% per level"},{target:"global",multiplier:x=>l(1).add((x-100)*.5),unlockLevel:100,description:"All Generators +50% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"temporal_tunnels",value:80,description:"Reach level 80 with Temporal Tunnels"}},{id:"hive_intergalactic",name:"Hive Intergalactic",description:"Expand your ant empire beyond the stars and across galaxies!",maxLevel:150,baseCost:l(25e13),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"All Generators +50% per level"},{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"ep",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"EP Gain +50% per level"},{target:"global",multiplier:x=>l(1).add((x-100)*.5),unlockLevel:100,description:"All Generators +50% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"ant_metaverse",value:85,description:"Reach level 85 with Ant Metaverse"}},{id:"cosmic_consciousness",name:"Cosmic Consciousness",description:"Attain enlightenment, boosting all aspects of the colony with profound insight.",maxLevel:150,baseCost:l(1e17),modifiers:[{target:"global",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"All Generators +50% per level"},{target:"ep",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"EP Gain +50% per level"},{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"global",multiplier:x=>l(1).add((x-75)*.5),unlockLevel:75,description:"All Generators +50% per level above 75"},{target:"ep",multiplier:x=>l(1).add((x-125)*.5),unlockLevel:125,description:"EP Gain +50% per level above 125"}],unlockRequirement:{type:"itemLevel",target:"hive_intergalactic",value:100,description:"Reach level 100 with Hive Intergalactic"}},{id:"pheromonal_singularity",name:"Pheromonal Singularity",description:"Collapse reality into a single point of infinite pheromone potential.",maxLevel:150,baseCost:l(5e19),modifiers:[{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"global",multiplier:x=>l(1).add((x-50)*.3),unlockLevel:50,description:"All Generators +30% per level above 50"},{target:"ep",multiplier:x=>l(1).add((x-100)*.4),unlockLevel:100,description:"EP Gain +40% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"cosmic_consciousness",value:105,description:"Reach level 105 with Cosmic Consciousness"}},{id:"antiversal_echo",name:"Antiversal Echo",description:"Harness the resonant frequencies of parallel ant universes.",maxLevel:150,baseCost:l(25e21),modifiers:[{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-75)*.5),unlockLevel:75,description:"Pheromone Gain +50% per level above 75"},{target:"global",multiplier:x=>l(1).add((x-125)*.5),unlockLevel:125,description:"All Generators +50% per level above 125"}],unlockRequirement:{type:"itemLevel",target:"pheromonal_singularity",value:1,description:"Reach level 1 with Pheromonal Singularity"}},{id:"chronomantic_pheromones",name:"Chronomantic Pheromones",description:"Weave pheromones through time itself, accelerating gain across epochs.",maxLevel:150,baseCost:l(1e25),modifiers:[{target:"pheromone",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"Pheromone Gain +50% per level"},{target:"ep",multiplier:x=>l(1).add(x*.5),unlockLevel:1,description:"EP Gain +50% per level"},{target:"pheromone",multiplier:x=>l(1).add((x-50)*.5),unlockLevel:50,description:"Pheromone Gain +50% per level above 50"},{target:"global",multiplier:x=>l(1).add((x-100)*.5),unlockLevel:100,description:"All Generators +50% per level above 100"}],unlockRequirement:{type:"itemLevel",target:"antiversal_echo",value:115,description:"Reach level 115 with Antiversal Echo"}}],s=1.43,n=10,r=e.reduce((x,$)=>(x[$.id]=$,x),{});e.forEach(x=>{var $;if((($=x.unlockRequirement)==null?void 0:$.type)==="itemLevel"&&x.unlockRequirement.target){const Z=r[x.unlockRequirement.target];if(Z){const me=r7(x.baseCost,Z.baseCost,s,n,Z.maxLevel);x.unlockRequirement.value=me,x.unlockRequirement.description=`Reach level ${me} with ${Z.name}`}else console.warn(`Prerequisite item '${x.unlockRequirement.target}' not found for item '${x.id}'.`)}});const o=Y(e),i=Y({}),c=Y({by:"baseCost",direction:"asc"}),u=Y(!1),d=x=>i.value[x]||0,m=x=>{const $=o.value.find(me=>me.id===x);if(!$)return!1;if(!$.unlockRequirement)return!0;const Z=$.unlockRequirement;switch(Z.type){case"essence":return t.totalCollectedEssence.gte(Z.value);case"itemLevel":return Z.target?d(Z.target)>=Z.value:!1;case"level":return!1;default:return!1}},f=q(()=>o.value.filter(x=>m(x.id))),p=x=>{const $=o.value.find(me=>me.id===x);if(!$)return l(0);const Z=d(x);return Z>=$.maxLevel?l(0):$.baseCost.mul(l(1.43).pow(Z))},g=x=>{const $=o.value.find(me=>me.id===x);if(!$)return[];const Z=d(x);return $.modifiers.filter(me=>Z>=me.unlockLevel)},w=(x,$)=>{const Z=o.value.find(J=>J.id===x);if(!Z||!Z.modifiers[$])return l(1);const me=d(x),re=Z.modifiers[$];return me<re.unlockLevel?l(1):re.multiplier(me)},C=x=>{const $=o.value.find(Z=>Z.id===x);return!$||!$.unlockRequirement?"":$.unlockRequirement.description},E=q(()=>{const x=o.value.map(Z=>({...Z,unlocked:m(Z.id),level:d(Z.id),nextCost:p(Z.id),isMaxed:d(Z.id)>=Z.maxLevel}));let $=x;return u.value&&($=x.filter(Z=>!Z.isMaxed)),k($)});function k(x){const{by:$,direction:Z}=c.value;return[...x].sort((re,J)=>{if($==="unlocked"){if(Z==="asc"){if(re.unlocked!==J.unlocked)return re.unlocked?-1:1}else if(re.unlocked!==J.unlocked)return re.unlocked?1:-1}switch($){case"price":return Z==="asc"?re.nextCost.cmp(J.nextCost):J.nextCost.cmp(re.nextCost);case"baseCost":return Z==="asc"?re.baseCost.cmp(J.baseCost):J.baseCost.cmp(re.baseCost);case"level":return Z==="asc"?re.level-J.level:J.level-re.level;case"maxLevel":return Z==="asc"?re.maxLevel-J.maxLevel:J.maxLevel-re.maxLevel;case"name":return Z==="asc"?re.name.localeCompare(J.name):J.name.localeCompare(re.name);case"unlocked":return re.name.localeCompare(J.name);default:return 0}})}const A=(x,$)=>{c.value={by:x,direction:$}},S=(x,$)=>{if($<=0)return l(0);const Z=o.value.find(J=>J.id===x);if(!Z)return l(0);const me=d(x);let re=l(0);for(let J=0;J<$;J++)re=re.add(Z.baseCost.mul(l(1.43).pow(me+J)));return re},T=x=>{const $=o.value.find(z=>z.id===x);if(!$||!m(x))return 0;const Z=d(x);if(Z>=$.maxLevel)return 0;const me=t.pheromoneEssence,re=$.maxLevel-Z,J=1.43,le=l(J),se=$.baseCost.mul(le.pow(Z));try{const z=me.mul(J-1).div(se).add(1),ce=Math.floor(Math.log(z.toNumber())/Math.log(J));return Math.min(ce,re)||0}catch{let ce=0,pe=l(0);for(;ce<re;){const _e=p(x);if(pe.add(_e).gt(me)||(pe=pe.add(_e),i.value[x]=(i.value[x]||0)+1,ce++,ce>1e3))break}return i.value[x]=Z,ce}};return{shopItems:o,unlockedShopItems:f,getAllShopItemsWithStatus:E,getItemLevel:d,getNextLevelCost:p,getActiveModifiers:g,getCurrentModifierValue:w,upgradeItem:x=>{const $=o.value.find(re=>re.id===x);if(!$||!m(x)||d(x)>=$.maxLevel)return!1;const me=p(x);return t.spendPheromoneEssence(me)?(i.value[x]=(i.value[x]||0)+1,!0):!1},maxBuyItem:x=>{const $=o.value.find(J=>J.id===x);if(!$||!m(x))return 0;const Z=d(x);if(Z>=$.maxLevel)return 0;const me=T(x);if(me<=0)return 0;const re=S(x,me);return t.spendPheromoneEssence(re)?(i.value[x]=Z+me,me):0},calculateMaxBuyLevels:T,calculateMaxBuyCost:x=>{const $=T(x);return S(x,$)},isItemUnlocked:m,getUnlockRequirementText:C,setSortPreference:A,sortPreference:c,hideMaxedItems:u,toggleHideMaxedItems:()=>{u.value=!u.value},resetForAscension:()=>{i.value={}},getState:()=>({itemLevels:i.value,sortPreference:c.value,hideMaxedItems:u.value}),loadState:x=>{x.itemLevels&&(i.value=x.itemLevels),x.sortPreference&&(c.value=x.sortPreference),x.hideMaxedItems!==void 0&&(u.value=x.hideMaxedItems)}}}),Am=Es("colonyRush",()=>{const t=Y(50),e=Y(30),s=Y(30),n=St(),r=q(()=>n.getUpgradeCount("unlockColonyRush").gt(0)),o=q(()=>{const I=n.getUpgradeCount("rushMaxPerDay").mul(2);return t.value+I.toNumber()}),i=q(()=>{const I=n.getUpgradeCount("rushCooldownReduction").mul(2);return Math.max(1,e.value-I.toNumber())}),c=q(()=>{const I=n.getUpgradeCount("rushDurationIncrease").mul(10);return s.value+I.toNumber()}),u=Y(0),d=Y(0),m=Y(""),f=Y(0),p=Y(!1),g=q(()=>o.value-u.value),w=q(()=>r.value&&g.value>0&&f.value>=i.value&&!p.value),C=q(()=>f.value>=i.value?100:Math.floor(f.value/i.value*100)),E=q(()=>f.value>=i.value?0:i.value-f.value),k=q(()=>{const I=E.value;return I<=0?"Ready":`${I} trips`});function A(){S()}function S(){const I=new Date().toDateString();m.value!==I&&(u.value=0,m.value=I)}function T(){p.value||(f.value++,S())}async function R(){if(!w.value)return!1;const I=Tr();u.value++,d.value=Date.now(),f.value=0,p.value=!0;try{const D=c.value,U=I.getStores(),M=U.gameStore.tickDuration,x=Math.floor(D/M);return x>0?(Qe(`[ColonyRush] Executing rush: Processing ${x} ticks individually.`),setTimeout(async()=>{try{await I.processRealTicks(x,U,!0),I.updateGeneratorStats(),Qe(`[ColonyRush] Rush completed processing ${x} ticks.`)}catch($){ks("Error during async rush processing:",$)}finally{p.value=!1,Qe("[ColonyRush] isProcessingRush set to false.")}},10)):(Qe(`[ColonyRush] Rush duration (${D}s) resulted in zero ticks. Skipping.`),p.value=!1),!0}catch(D){return ks("Error executing colony rush:",D),p.value=!1,!1}}const L=()=>({baseMaxRushesPerDay:t.value,baseRushCooldownTicks:e.value,baseRushDurationSeconds:s.value,rushesUsedToday:u.value,lastRushTimestamp:d.value,lastRushResetDate:m.value,ticksSinceLastRush:f.value}),P=I=>{I&&(I.baseMaxRushesPerDay!==void 0?t.value=I.baseMaxRushesPerDay:I.maxRushesPerDay!==void 0&&(t.value=I.maxRushesPerDay),I.baseRushCooldownTicks!==void 0?e.value=I.baseRushCooldownTicks:I.rushCooldownTicks!==void 0&&(e.value=I.rushCooldownTicks),I.baseRushDurationSeconds!==void 0?s.value=I.baseRushDurationSeconds:I.rushDurationSeconds!==void 0&&(s.value=I.rushDurationSeconds),I.rushesUsedToday!==void 0&&(u.value=I.rushesUsedToday),I.lastRushTimestamp!==void 0&&(d.value=I.lastRushTimestamp),I.lastRushResetDate!==void 0&&(m.value=I.lastRushResetDate),I.ticksSinceLastRush!==void 0&&(f.value=I.ticksSinceLastRush),S())};return A(),{baseMaxRushesPerDay:t,baseRushCooldownTicks:e,baseRushDurationSeconds:s,maxRushesPerDay:o,rushCooldownTicks:i,rushDurationSeconds:c,rushesUsedToday:u,rushesRemaining:g,lastRushTimestamp:d,lastRushResetDate:m,ticksSinceLastRush:f,isRushAvailable:w,isFeatureUnlocked:r,cooldownPercentage:C,ticksUntilNextRush:E,formatTripsUntilNextRush:k,initialize:A,trackTick:T,executeRush:R,getState:L,loadState:P,isProcessingRush:p}}),Ri=Es("wiki",()=>{const t=Y("prestige-upgrades"),e=Y({"prestige-upgrades":"","pheromone-shop":"","mega-ant":"","bugs-wiki":"","items-wiki":"","generators-wiki":""}),s=Y({"prestige-upgrades":10,"pheromone-shop":10,"mega-ant":10,"bugs-wiki":10,"items-wiki":10,"generators-wiki":10}),n=Y({"prestige-upgrades":{},"pheromone-shop":{},"mega-ant":{},"bugs-wiki":{},"items-wiki":{},"generators-wiki":{}}),r=Y({"prestige-upgrades":{},"pheromone-shop":{},"mega-ant":{},"bugs-wiki":{},"items-wiki":{},"generators-wiki":{}}),o=Y({"prestige-upgrades":[],"pheromone-shop":[],"mega-ant":[],"bugs-wiki":[],"items-wiki":[],"generators-wiki":[]}),i=S=>{t.value=S},c=(S,T)=>{e.value[S]=T},u=S=>e.value[S]||"",d=(S,T)=>{s.value[S]=T},m=S=>s.value[S]||10,f=(S,T)=>{n.value[S]||(n.value[S]={}),n.value[S][T]=!n.value[S][T],n.value[S][T]&&C(S,T)},p=(S,T)=>!!(n.value[S]&&n.value[S][T]),g=(S,T)=>{r.value[S]||(r.value[S]={}),r.value[S][T]=!r.value[S][T]},w=(S,T)=>!!(r.value[S]&&r.value[S][T]),C=(S,T)=>{o.value[S]||(o.value[S]=[]);const R=o.value[S].filter(L=>L!==T);R.unshift(T),o.value[S]=R.slice(0,10)};return{activeTab:t,setActiveTab:i,setSearchQuery:c,getSearchQuery:u,setMaxPreviewLevel:d,getMaxPreviewLevel:m,toggleItemExpanded:f,isItemExpanded:p,toggleIgnoreMaxLevel:g,shouldIgnoreMaxLevel:w,addToRecentlyViewed:C,getRecentlyViewedItems:S=>o.value[S]||[],getState:()=>({activeTab:t.value,searchQueries:e.value,maxPreviewLevels:s.value,expandedItemsMap:n.value,ignoreMaxLevelMap:r.value,recentlyViewedItems:o.value}),loadState:S=>{S.activeTab&&(t.value=S.activeTab),S.searchQueries&&(e.value=S.searchQueries),S.maxPreviewLevels&&(s.value=S.maxPreviewLevels),S.expandedItemsMap&&(n.value=S.expandedItemsMap),S.recentlyViewedItems&&(o.value=S.recentlyViewedItems)}}});var Ws=(t=>(t.KILL_BUGS="kill_bugs",t.COLLECT_FOOD="collect_food",t.COLLECT_PHEROMONE="collect_pheromone",t))(Ws||{}),Fs=(t=>(t.ITEM="item",t.FOOD="food",t.PHEROMONE="pheromone",t.EP="ep",t.MULTIPLIER="multiplier",t))(Fs||{});const J1=[{id:"kill_training_bugs",title:"Basic Training",description:"Defeat 25 training bugs to practice your combat skills.",goals:[{type:"kill_bugs",target:"safe",requiredAmount:"25",currentAmount:"0"}],rewards:[{type:"food",value:"tier:1"},{type:"pheromone",value:"tier:1"}],isCompleted:!1,isActive:!1,tier:1},{id:"kill_grasshopper",title:"Grasshopper Hunter",description:"Defeat 15 grasshoppers to protect your colony.",goals:[{type:"kill_bugs",target:"grasshopper",requiredAmount:"15",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:2"},{type:"multiplier",value:1.1,target:"global"}],isCompleted:!1,isActive:!1,tier:2},{id:"kill_tarantula",title:"Spider Slayer",description:"Defeat 10 tarantulas to prove your colony's strength.",goals:[{type:"kill_bugs",target:"tarantula",requiredAmount:"10",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:2"},{type:"pheromone",value:"tier:2"}],isCompleted:!1,isActive:!1,tier:2},{id:"kill_beetle",title:"Beetle Buster",description:"Defeat 8 beetles to claim their territory.",goals:[{type:"kill_bugs",target:"beetle",requiredAmount:"8",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:2"},{type:"multiplier",value:1.15,target:"soldier"}],isCompleted:!1,isActive:!1,tier:2},{id:"kill_scorpion",title:"Scorpion Subjugator",description:"Defeat 5 scorpions to secure your colony's dominance.",goals:[{type:"kill_bugs",target:"scorpion",requiredAmount:"5",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:3"},{type:"multiplier",value:1.2,target:"global"}],isCompleted:!1,isActive:!1,tier:3},{id:"kill_army_ant",title:"Ant Terminator",description:"Defeat 3 army ants to demonstrate your colony's prowess.",goals:[{type:"kill_bugs",target:"army_ant",requiredAmount:"3",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:3"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"collect_food_basic",title:"Colony Provisions",description:"Collect 1e10 food to support your growing colony.",goals:[{type:"collect_food",requiredAmount:"1e10",currentAmount:"0"}],rewards:[{type:"multiplier",value:2,target:"worker"},{type:"ep",value:"tier:1"}],isCompleted:!1,isActive:!1,tier:1},{id:"collect_food_intermediate",title:"Winter Storage",description:"Collect 1e15 food to prepare for harsher seasons.",goals:[{type:"collect_food",requiredAmount:"1e15",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.35,target:"food"},{type:"ep",value:"tier:2"}],isCompleted:!1,isActive:!1,tier:2},{id:"collect_food_advanced",title:"Feast Preparation",description:"Collect 1e25 food for a colony-wide celebration.",goals:[{type:"collect_food",requiredAmount:"1e25",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.5,target:"global"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"collect_food_expert",title:"Food Empire",description:"Collect 1e40 food to establish your colony as a food powerhouse.",goals:[{type:"collect_food",requiredAmount:"1e40",currentAmount:"0"}],rewards:[{type:"multiplier",value:2,target:"food"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"collect_pheromone_basic",title:"Essence Collector",description:"Collect 500 pheromone essence to unlock new mystical powers.",goals:[{type:"collect_pheromone",requiredAmount:"500",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.2,target:"pheromone"}],isCompleted:!1,isActive:!1,tier:1},{id:"collect_pheromone_intermediate",title:"Essence Master",description:"Collect 2,000 pheromone essence to enhance your colony's powers.",goals:[{type:"collect_pheromone",requiredAmount:"2000",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.3,target:"pheromone"},{type:"ep",value:"tier:2"}],isCompleted:!1,isActive:!1,tier:2},{id:"collect_pheromone_advanced",title:"Essence Harvester",description:"Collect 5,000 pheromone essence to reach new heights of power.",goals:[{type:"collect_pheromone",requiredAmount:"5000",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.5,target:"global"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"collect_pheromone_expert",title:"Essence Architect",description:"Collect 15,000 pheromone essence to reshape the destiny of your colony.",goals:[{type:"collect_pheromone",requiredAmount:"15000",currentAmount:"0"}],rewards:[{type:"multiplier",value:2,target:"pheromone"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"bug_slayer_initiate",title:"Bug Slayer Initiate",description:"Defeat 50 bugs of any type to begin your path as a bug slayer.",goals:[{type:"kill_bugs",requiredAmount:"50",currentAmount:"0"}],rewards:[{type:"food",value:"tier:3"},{type:"pheromone",value:"tier:3"},{type:"multiplier",value:1.5,target:"global"}],isCompleted:!1,isActive:!1,tier:3},{id:"resource_champion",title:"Resource Champion",description:"Collect 5e12 food and 1,000 pheromone essence to prove your mastery of resources.",goals:[{type:"collect_food",requiredAmount:"5e12",currentAmount:"0",description:"Collect 5e12 food"},{type:"collect_pheromone",requiredAmount:"1000",currentAmount:"0",description:"Collect 1,000 pheromone essence"}],rewards:[{type:"multiplier",value:1.5,target:"global"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"exterminator_novice",title:"Exterminator Novice",description:"Defeat 100 bugs of any type to begin your career as an exterminator.",goals:[{type:"kill_bugs",requiredAmount:"1e2",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.3,target:"global"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"exterminator_adept",title:"Exterminator Adept",description:"Defeat 500 bugs of any type to advance your extermination skills.",goals:[{type:"kill_bugs",requiredAmount:"500",currentAmount:"0"}],rewards:[{type:"multiplier",value:1.4,target:"global"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"exterminator_expert",title:"Exterminator Expert",description:"Defeat 2,500 bugs of any type to become a legend among exterminators.",goals:[{type:"kill_bugs",requiredAmount:"2.5e3",currentAmount:"0"}],rewards:[{type:"multiplier",value:2,target:"global"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"exterminator_master",title:"Exterminator Master",description:"Defeat 10,000 bugs of any type to achieve mastery in the art of bug hunting.",goals:[{type:"kill_bugs",requiredAmount:"1e4",currentAmount:"0"}],rewards:[{type:"multiplier",value:3,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"beetle_genocide",title:"Beetle Genocide",description:"Defeat 1,500 beetles to eliminate their threat forever.",goals:[{type:"kill_bugs",target:"beetle",requiredAmount:"1.5e3",currentAmount:"0"}],rewards:[{type:"multiplier",value:2.5,target:"soldier"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"scorpion_slaughter",title:"Scorpion Slaughter",description:"Defeat 750 scorpions to eliminate their threat.",goals:[{type:"kill_bugs",target:"scorpion",requiredAmount:"750",currentAmount:"0"}],rewards:[{type:"multiplier",value:2.75,target:"global"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"tarantula_terror",title:"Tarantula Terror",description:"Defeat 1,000 tarantulas to free the colony from fear.",goals:[{type:"kill_bugs",target:"tarantula",requiredAmount:"1e3",currentAmount:"0"}],rewards:[{type:"multiplier",value:3.25,target:"soldier"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"army_ant_annihilation",title:"Army Ant Annihilation",description:"Defeat 500 army ants to prove your colony's supremacy.",goals:[{type:"kill_bugs",target:"army_ant",requiredAmount:"500",currentAmount:"0"}],rewards:[{type:"multiplier",value:3.5,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"food_tycoon",title:"Food Tycoon",description:"Collect 1e60 food to become a food industry mogul.",goals:[{type:"collect_food",requiredAmount:"1e60",currentAmount:"0"}],rewards:[{type:"multiplier",value:5,target:"food"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"food_billionaire",title:"Food Billionaire",description:"Collect 1e100 food to join the elite of food collectors.",goals:[{type:"collect_food",requiredAmount:"1e100",currentAmount:"0"}],rewards:[{type:"multiplier",value:10,target:"food"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"food_trillionaire",title:"Food Trillionaire",description:"Collect 1e200 food to become a legend among food collectors.",goals:[{type:"collect_food",requiredAmount:"1e200",currentAmount:"0"}],rewards:[{type:"multiplier",value:25,target:"food"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"essence_virtuoso",title:"Essence Virtuoso",description:"Collect 100,000 pheromone essence to master the mystical arts.",goals:[{type:"collect_pheromone",requiredAmount:"1e5",currentAmount:"0"}],rewards:[{type:"multiplier",value:5,target:"pheromone"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"essence_grandmaster",title:"Essence Grandmaster",description:"Collect 1,000,000 pheromone essence to achieve grandmaster status.",goals:[{type:"collect_pheromone",requiredAmount:"1e6",currentAmount:"0"}],rewards:[{type:"multiplier",value:10,target:"pheromone"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"essence_transcendent",title:"Essence Transcendent",description:"Collect 10,000,000 pheromone essence to transcend mortal limitations.",goals:[{type:"collect_pheromone",requiredAmount:"1e7",currentAmount:"0"}],rewards:[{type:"multiplier",value:25,target:"pheromone"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"supreme_resource_master",title:"Supreme Resource Master",description:"Collect 5e50 food and 100,000 pheromone essence simultaneously.",goals:[{type:"collect_food",requiredAmount:"5e50",currentAmount:"0",description:"Collect 5e50 food"},{type:"collect_pheromone",requiredAmount:"1e5",currentAmount:"0",description:"Collect 100,000 pheromone essence"}],rewards:[{type:"multiplier",value:5,target:"global"},{type:"ep",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"universal_harvester",title:"Universal Harvester",description:"Collect 5e80 food and 1,000,000 pheromone essence simultaneously.",goals:[{type:"collect_food",requiredAmount:"5e80",currentAmount:"0",description:"Collect 5e80 food"},{type:"collect_pheromone",requiredAmount:"1e6",currentAmount:"0",description:"Collect 1,000,000 pheromone essence"}],rewards:[{type:"multiplier",value:10,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"extreme_bug_hunter",title:"Extreme Bug Hunter",description:"Defeat a total of 50,000 bugs of any type to become the ultimate predator.",goals:[{type:"kill_bugs",requiredAmount:"5e4",currentAmount:"0"}],rewards:[{type:"multiplier",value:50,target:"global"},{type:"ep",value:"tier:5"},{type:"food",value:"tier:5"},{type:"pheromone",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"quantum_beetle_hunter",title:"Quantum Beetle Hunter",description:"Defeat 100 quantum beetles to harness their reality-bending power.",goals:[{type:"kill_bugs",target:"quantum_beetle",requiredAmount:"1e2",currentAmount:"0"}],rewards:[{type:"multiplier",value:100,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"galactic_moth_hunter",title:"Galactic Moth Hunter",description:"Defeat 250 galactic moths to harness their cosmic energy.",goals:[{type:"kill_bugs",target:"galactic_moth",requiredAmount:"2.5e2",currentAmount:"0"}],rewards:[{type:"multiplier",value:75,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"endless_ant_swarm_challenge",title:"Endless Swarm Challenge",description:"Defeat 500 endless ant swarms to claim ultimate hive dominance.",goals:[{type:"kill_bugs",target:"endless_ant_swarms",requiredAmount:"5e2",currentAmount:"0"}],rewards:[{type:"multiplier",value:125,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"cosmic_food_harvester",title:"Cosmic Food Harvester",description:"Collect 1e1000 food to feed the entire universe.",goals:[{type:"collect_food",requiredAmount:"1e1000",currentAmount:"0"}],rewards:[{type:"multiplier",value:1e3,target:"food"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"pheromone_transcendence",title:"Pheromone Transcendence",description:"Collect 1e15 pheromone essence to unlock the secrets of the universe.",goals:[{type:"collect_pheromone",requiredAmount:"1e15",currentAmount:"0"}],rewards:[{type:"multiplier",value:1e3,target:"pheromone"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"ladybug_hunt",title:"Ladybug Hunt",description:"Defeat 20 ladybugs to protect your territory.",goals:[{type:"kill_bugs",target:"ladybug",requiredAmount:"20",currentAmount:"0"}],rewards:[{type:"food",value:"tier:2"},{type:"multiplier",value:1.2,target:"global"}],isCompleted:!1,isActive:!1,tier:2},{id:"housefly_swatter",title:"Fly Swatter",description:"Defeat 30 houseflies to stop them from buzzing around your colony.",goals:[{type:"kill_bugs",target:"housefly",requiredAmount:"30",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:2"},{type:"ep",value:"tier:2"}],isCompleted:!1,isActive:!1,tier:2},{id:"mosquito_massacre",title:"Mosquito Massacre",description:"Defeat 40 mosquitoes to prevent them from stealing your resources.",goals:[{type:"kill_bugs",target:"mosquito",requiredAmount:"40",currentAmount:"0"}],rewards:[{type:"food",value:"tier:2"},{type:"multiplier",value:1.3,target:"worker"}],isCompleted:!1,isActive:!1,tier:2},{id:"cockroach_crusher",title:"Cockroach Crusher",description:"Defeat 25 cockroaches to clear them from your territory.",goals:[{type:"kill_bugs",target:"cockroach",requiredAmount:"25",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:3"},{type:"multiplier",value:1.25,target:"soldier"}],isCompleted:!1,isActive:!1,tier:3},{id:"fire_ant_extinguisher",title:"Fire Ant Extinguisher",description:"Defeat 20 fire ants to protect your colony from their burning attacks.",goals:[{type:"kill_bugs",target:"fire_ant",requiredAmount:"20",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:3"},{type:"multiplier",value:1.35,target:"global"}],isCompleted:!1,isActive:!1,tier:3},{id:"termite_terminator",title:"Termite Terminator",description:"Defeat 35 termites to prevent them from destroying your colony's structures.",goals:[{type:"kill_bugs",target:"termite",requiredAmount:"35",currentAmount:"0"}],rewards:[{type:"food",value:"tier:3"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"wasp_warrior",title:"Wasp Warrior",description:"Defeat 15 wasps to eliminate their aggressive presence.",goals:[{type:"kill_bugs",target:"wasp",requiredAmount:"15",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:3"},{type:"multiplier",value:1.4,target:"soldier"}],isCompleted:!1,isActive:!1,tier:3},{id:"giant_moth_hunter",title:"Moth Hunter",description:"Defeat 10 giant moths to prevent them from damaging your resources.",goals:[{type:"kill_bugs",target:"giant_moth",requiredAmount:"10",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:4"},{type:"multiplier",value:1.5,target:"global"}],isCompleted:!1,isActive:!1,tier:4},{id:"giant_stag_beetle_hunter",title:"Stag Beetle Hunter",description:"Defeat 12 giant stag beetles to claim their powerful mandibles.",goals:[{type:"kill_bugs",target:"giant_stag_beetle",requiredAmount:"12",currentAmount:"0"}],rewards:[{type:"food",value:"tier:4"},{type:"pheromone",value:"tier:4"}],isCompleted:!1,isActive:!1,tier:4},{id:"stag_beetle_swarm_survivor",title:"Swarm Survivor",description:"Survive and defeat 5 stag beetle swarms.",goals:[{type:"kill_bugs",target:"stag_beetle_swarm",requiredAmount:"5",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:4"},{type:"multiplier",value:2,target:"global"}],isCompleted:!1,isActive:!1,tier:4},{id:"mutant_fly_dissector",title:"Mutant Fly Dissector",description:"Defeat 8 mutant flies to study their genetic mutations.",goals:[{type:"kill_bugs",target:"mutant_fly",requiredAmount:"8",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:4"},{type:"multiplier",value:2.25,target:"worker"}],isCompleted:!1,isActive:!1,tier:4},{id:"giant_firefly_hunter",title:"Firefly Hunter",description:"Defeat 7 giant fireflies to capture their luminous essence.",goals:[{type:"kill_bugs",target:"giant_firefly",requiredAmount:"7",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:4"},{type:"multiplier",value:2.5,target:"global"}],isCompleted:!1,isActive:!1,tier:4},{id:"ultra_beetle_challenge",title:"Ultra Beetle Challenge",description:"Defeat 4 ultra beetles to prove your colony's ultimate strength.",goals:[{type:"kill_bugs",target:"ultra_beetle",requiredAmount:"4",currentAmount:"0"}],rewards:[{type:"food",value:"tier:5"},{type:"multiplier",value:3,target:"soldier"}],isCompleted:!1,isActive:!1,tier:5},{id:"queen_wasp_regicide",title:"Wasp Regicide",description:"Defeat 3 queen wasps to destroy the leadership of the wasp colonies.",goals:[{type:"kill_bugs",target:"queen_wasp",requiredAmount:"3",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:5"},{type:"multiplier",value:4,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"colossal_cockroach_conqueror",title:"Colossal Conqueror",description:"Defeat 2 colossal cockroaches to prove that nothing is too big to squash.",goals:[{type:"kill_bugs",target:"colossal_cockroach",requiredAmount:"2",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:5"},{type:"multiplier",value:5,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"apocalyptic_termites_defender",title:"Apocalypse Defender",description:"Defend your colony by defeating 2 swarms of apocalyptic termites.",goals:[{type:"kill_bugs",target:"apocalyptic_termites",requiredAmount:"2",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:5"},{type:"multiplier",value:8,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"radioactive_spider_hunter",title:"Radioactive Hunter",description:"Defeat 3 radioactive spiders without getting any genetic mutations.",goals:[{type:"kill_bugs",target:"radioactive_spider",requiredAmount:"3",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:5"},{type:"multiplier",value:10,target:"soldier"}],isCompleted:!1,isActive:!1,tier:5},{id:"ant_queen_guardian_challenge",title:"Queen's Guardian Challenge",description:"Defeat 2 ant queen guardians to assert your colony's dominance.",goals:[{type:"kill_bugs",target:"ant_queen_guardian",requiredAmount:"2",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:5"},{type:"multiplier",value:15,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"swarm_lord_subjugator",title:"Swarm Subjugator",description:"Defeat a swarm lord to become the undisputed ruler of all insect swarms.",goals:[{type:"kill_bugs",target:"swarm_lord",requiredAmount:"1",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:5"},{type:"multiplier",value:20,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"ant_legion_commander_defeat",title:"Legion Commander Defeat",description:"Defeat an ant legion commander to disrupt the enemy's military structure.",goals:[{type:"kill_bugs",target:"ant_legion_commander",requiredAmount:"1",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:5"},{type:"multiplier",value:30,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"ant_tactician_challenge",title:"Tactician's Challenge",description:"Outmaneuver and defeat an ant tactician in a battle of wits and strength.",goals:[{type:"kill_bugs",target:"ant_tactician",requiredAmount:"1",currentAmount:"0"}],rewards:[{type:"pheromone",value:"tier:5"},{type:"multiplier",value:40,target:"soldier"}],isCompleted:!1,isActive:!1,tier:5},{id:"ant_scout_master_tracker",title:"Scout Master Tracker",description:"Track down and defeat the elusive ant scout master.",goals:[{type:"kill_bugs",target:"ant_scout_master",requiredAmount:"1",currentAmount:"0"}],rewards:[{type:"ep",value:"tier:5"},{type:"multiplier",value:50,target:"global"}],isCompleted:!1,isActive:!1,tier:5},{id:"ant_training_master_graduate",title:"Training Master Graduate",description:"Prove yourself by defeating the ant training master in combat.",goals:[{type:"kill_bugs",target:"ant_training_master",requiredAmount:"1",currentAmount:"0"}],rewards:[{type:"food",value:"tier:5"},{type:"pheromone",value:"tier:5"},{type:"multiplier",value:100,target:"global"},{type:"ep",value:"tier:5"}],isCompleted:!1,isActive:!1,tier:5},{id:"flying_bugs_hunter",title:"Flying Bug Hunter",description:"Defeat a variety of flying bugs to clear the skies.",goals:[{type:"kill_bugs",target:"housefly",requiredAmount:"10",currentAmount:"0",description:"Defeat 10 houseflies"},{type:"kill_bugs",target:"mosquito",requiredAmount:"10",currentAmount:"0",description:"Defeat 10 mosquitoes"},{type:"kill_bugs",target:"wasp",requiredAmount:"5",currentAmount:"0",description:"Defeat 5 wasps"}],rewards:[{type:"multiplier",value:2,target:"soldier"},{type:"ep",value:"tier:3"}],isCompleted:!1,isActive:!1,tier:3},{id:"beetle_variety_collection",title:"Beetle Variety Collection",description:"Collect a variety of beetle specimens for your colony's study.",goals:[{type:"kill_bugs",target:"beetle",requiredAmount:"5",currentAmount:"0",description:"Defeat 5 beetles"},{type:"kill_bugs",target:"giant_stag_beetle",requiredAmount:"3",currentAmount:"0",description:"Defeat 3 giant stag beetles"},{type:"kill_bugs",target:"ultra_beetle",requiredAmount:"1",currentAmount:"0",description:"Defeat 1 ultra beetle"}],rewards:[{type:"pheromone",value:"tier:4"},{type:"multiplier",value:2.5,target:"global"}],isCompleted:!1,isActive:!1,tier:4},{id:"ant_hierarchy_challenge",title:"Ant Hierarchy Challenge",description:"Challenge the ant hierarchy by defeating members at each level.",goals:[{type:"kill_bugs",target:"worker",requiredAmount:"20",currentAmount:"0",description:"Defeat 20 worker ants"},{type:"kill_bugs",target:"soldier",requiredAmount:"10",currentAmount:"0",description:"Defeat 10 soldier ants"},{type:"kill_bugs",target:"army_ant",requiredAmount:"5",currentAmount:"0",description:"Defeat 5 army ants"}],rewards:[{type:"food",value:"tier:4"},{type:"ep",value:"tier:4"},{type:"multiplier",value:3,target:"global"}],isCompleted:!1,isActive:!1,tier:4}],c3="idle-ant-farm-quest-completion-percent",Mr=Y(65);try{const t=localStorage.getItem(c3);t&&(Mr.value=parseInt(t,10))}catch(t){console.error("Error loading quest requirement from localStorage:",t)}function Z1(){const t=Qs(),e=q(()=>J1.length),s=q(()=>t.completedQuests.length),n=q(()=>e.value===0?0:s.value/e.value*100),r=q(()=>n.value>=Mr.value),o=q(()=>{if(r.value)return"";const i=Math.ceil(e.value*Mr.value/100),c=i-s.value;return`Complete ${c} more quest${c!==1?"s":""} to unlock Ascension (${s.value}/${i} required)`});return dt(Mr,i=>{try{localStorage.setItem(c3,i.toString())}catch(c){console.error("Error saving quest requirement to localStorage:",c)}}),{totalQuests:e,completedQuestsCount:s,questCompletionPercentage:n,requiredQuestCompletionPercent:Mr,canAscend:r,ascensionLockExplanation:o}}function o7(t){return be(l(t))}function we(t,e,s){const n=o7(e);switch(t){case"kill_bugs":return`Kill ${n} ${s||"Bugs"}`;case"collect_food":return`Collect ${n} Food`;case"collect_pheromone":return`Collect ${n} Pheromones`;case"collect_evolution_points":return`Collect ${n} EP`;case"collect_honeydew":return`Collect ${n} Honeydew`;default:return`Complete Task (${n})`}}const i7=[{id:"queens_core",name:"Queen's Core",description:"The central hub of the neural network.",position:{x:0,y:0},distance:0,connections:[{nodeId:"food_cluster",distance:5e4},{nodeId:"queen_synapse",distance:3e4},{nodeId:"ep_reservoir",distance:25e3},{nodeId:"hive_nexus",distance:35e3},{nodeId:"central_command",distance:4e4},{nodeId:"exploration_node",distance:15e3}],icon:"i-mdi-home",visited:!0,connectedTo:["food_cluster","queen_synapse","ep_reservoir","hive_nexus","central_command","exploration_node"],tasks:[{id:"qc_task_0",name:we("collect_evolution_points","1e3"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e3",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"qc_task_1",name:we("collect_evolution_points","1e4"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e4",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"qc_task_2",name:we("collect_evolution_points","1e5"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e5",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"qc_task_3",name:we("collect_evolution_points","1e6"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e6",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"qc_task_4",name:we("collect_evolution_points","1e8"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e8",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"qc_task_5",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"2.25",appliesTo:"global"}},{id:"qc_task_6",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"food_cluster",name:"Food Cluster",description:"A neural cluster focused on food production.",position:{x:0,y:6},distance:5e4,connections:[{nodeId:"queens_core",distance:5e4},{nodeId:"worker_boost_1",distance:1e4},{nodeId:"pheromone_boost_1",distance:1e4},{nodeId:"harvester_nexus",distance:2e4}],icon:"i-mdi-food-apple",visited:!1,connectedTo:["queens_core","worker_boost_1","pheromone_boost_1","harvester_nexus"],tasks:[{id:"fc_task_1",name:we("collect_food","1e6"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e6",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"fc_task_2",name:we("collect_food","1e8"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e8",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"fc_task_3",name:we("collect_food","1e10"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e10",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"fc_task_4",name:we("collect_food","1e13"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e13",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"fc_task_5",name:we("collect_food","1e16"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e16",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"fc_task_6",name:we("collect_food","1e20"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"worker"}}]},{id:"queen_synapse",name:"Queen Synapse",description:"A node that boosts queen reproduction.",position:{x:6,y:0},distance:3e4,connections:[{nodeId:"queens_core",distance:3e4},{nodeId:"larva_growth_nexus",distance:3e4},{nodeId:"royal_jelly_node",distance:25e3}],icon:"i-mdi-chess-queen",visited:!1,connectedTo:["queens_core","larva_growth_nexus","royal_jelly_node"],tasks:[{id:"qs_task_1",name:we("collect_evolution_points","1e9"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e9",completed:!1,reward:{value:"1.1",appliesTo:"queenChamber"}},{id:"qs_task_2",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"queenChamber"}},{id:"qs_task_3",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"1.5",appliesTo:"queenChamber"}},{id:"qs_task_4",name:we("collect_evolution_points","1e14"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e14",completed:!1,reward:{value:"1.75",appliesTo:"queenChamber"}},{id:"qs_task_5",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"2.0",appliesTo:"queenChamber"}},{id:"qs_task_6",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"queenChamber"}}]},{id:"ep_reservoir",name:"EP Reservoir",description:"A dense cluster of neurons that enhance evolution point generation.",position:{x:-6,y:0},distance:25e3,connections:[{nodeId:"queens_core",distance:25e3},{nodeId:"ep_minor_cluster",distance:5e3},{nodeId:"evolution_chamber",distance:35e3}],icon:"i-mdi-star",visited:!1,connectedTo:["queens_core","ep_minor_cluster","evolution_chamber"],tasks:[{id:"epr_task_1",name:we("collect_evolution_points","1e9"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e9",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"epr_task_2",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"epr_task_3",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"epr_task_4",name:we("collect_evolution_points","1e14"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e14",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"epr_task_5",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"epr_task_6",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"hive_nexus",name:"Hive Nexus",description:"A complex neural junction that improves colony coordination.",position:{x:0,y:-6},distance:35e3,connections:[{nodeId:"queens_core",distance:35e3},{nodeId:"defense_hub",distance:2e4},{nodeId:"storage_synapse",distance:25e3},{nodeId:"resilience_node",distance:2e4},{nodeId:"colony_coordination",distance:15e3}],icon:"i-mdi-hexagon-multiple",visited:!1,connectedTo:["queens_core","defense_hub","storage_synapse","resilience_node","colony_coordination"],tasks:[{id:"hn_task_1",name:we("collect_evolution_points","1e9"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e9",completed:!1,reward:{value:"1.1",appliesTo:"colony"}},{id:"hn_task_2",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"colony"}},{id:"hn_task_3",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"1.5",appliesTo:"colony"}},{id:"hn_task_4",name:we("collect_evolution_points","1e14"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e14",completed:!1,reward:{value:"1.75",appliesTo:"colony"}},{id:"hn_task_5",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"2.0",appliesTo:"colony"}},{id:"hn_task_6",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"colony"}}]},{id:"central_command",name:"Central Command",description:"A strategic neural center that enhances overall coordination.",position:{x:0,y:12},distance:4e4,connections:[{nodeId:"queens_core",distance:4e4},{nodeId:"tactical_hub",distance:3e4}],icon:"i-mdi-grid",visited:!1,connectedTo:["queens_core","tactical_hub"],tasks:[{id:"cc_task_1",name:we("collect_evolution_points","1e9"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e9",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"cc_task_2",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"cc_task_3",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"cc_task_4",name:we("collect_evolution_points","1e14"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e14",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"cc_task_5",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"cc_task_6",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"exploration_node",name:"Exploration Node",description:"Improves exploration capabilities.",position:{x:-10,y:2},distance:15e3,connections:[{nodeId:"queens_core",distance:15e3},{nodeId:"discovery_nexus",distance:25e3}],icon:"i-mdi-compass",visited:!1,connectedTo:["queens_core","discovery_nexus"],tasks:[{id:"en_task_1",name:we("collect_evolution_points","1e9"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e9",completed:!1,reward:{value:"1.1",appliesTo:"neurotrail_steps"}},{id:"en_task_2",name:we("collect_evolution_points","1e10"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"neurotrail_steps"}},{id:"en_task_3",name:we("collect_evolution_points","1e12"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e12",completed:!1,reward:{value:"1.5",appliesTo:"neurotrail_steps"}},{id:"en_task_4",name:we("collect_evolution_points","1e14"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e14",completed:!1,reward:{value:"1.75",appliesTo:"neurotrail_steps"}},{id:"en_task_5",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"2.0",appliesTo:"neurotrail_steps"}},{id:"en_task_6",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"2.5",appliesTo:"neurotrail_steps"}}]},{id:"worker_boost_1",name:"Worker Efficiency Node",description:"Enhances general worker efficiency.",position:{x:5,y:8},distance:1e4,connections:[{nodeId:"food_cluster",distance:1e4},{nodeId:"worker_boost_2",distance:15e3}],icon:"i-mdi-worker",visited:!1,connectedTo:["food_cluster","worker_boost_2"],tasks:[{id:"wb1_task_1",name:we("collect_food","1e22"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e22",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"wb1_task_2",name:we("collect_food","1e25"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e25",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"wb1_task_3",name:we("collect_food","1e29"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e29",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"wb1_task_4",name:we("collect_food","1e33"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e33",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"wb1_task_5",name:we("collect_food","1e38"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e38",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"wb1_task_6",name:we("collect_food","1e44"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e44",completed:!1,reward:{value:"2.5",appliesTo:"worker"}},{id:"wb1_hd_task_1",name:we("collect_honeydew","1e4"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e4",completed:!1,reward:{value:"1.1",appliesTo:"aphidYield"}},{id:"wb1_hd_task_2",name:we("collect_honeydew","1e5"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e5",completed:!1,reward:{value:"1.25",appliesTo:"aphidYield"}},{id:"wb1_hd_task_3",name:we("collect_honeydew","1e7"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e7",completed:!1,reward:{value:"1.5",appliesTo:"aphidYield"}},{id:"wb1_hd_task_4",name:we("collect_honeydew","1e9"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e9",completed:!1,reward:{value:"1.75",appliesTo:"aphidYield"}},{id:"wb1_hd_task_5",name:we("collect_honeydew","1e12"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e12",completed:!1,reward:{value:"2.0",appliesTo:"aphidYield"}},{id:"wb1_hd_task_6",name:we("collect_honeydew","1e15"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e15",completed:!1,reward:{value:"2.5",appliesTo:"aphidYield"}}]},{id:"defense_hub",name:"Defense Hub",description:"Strengthens colony defenses.",position:{x:0,y:-10},distance:2e4,connections:[{nodeId:"hive_nexus",distance:2e4},{nodeId:"guardian_chamber",distance:3e4}],icon:"i-mdi-shield",visited:!1,connectedTo:["hive_nexus","guardian_chamber"],tasks:[{id:"dh_task_1",name:we("kill_bugs",1e3,"Worker Ants"),description:"Eliminate hostile Worker Ants.",type:"kill_bugs",target:"worker",requiredAmount:"1000",completed:!1,reward:{value:"1.1",appliesTo:"defense"}},{id:"dh_task_2",name:we("kill_bugs",5e3,"Soldier Ants"),description:"Eliminate hostile Soldier Ants.",type:"kill_bugs",target:"soldier",requiredAmount:"5000",completed:!1,reward:{value:"1.25",appliesTo:"defense"}},{id:"dh_task_3",name:we("kill_bugs",1e4,"Ladybugs"),description:"Eliminate hostile Ladybugs.",type:"kill_bugs",target:"ladybug",requiredAmount:"10000",completed:!1,reward:{value:"1.5",appliesTo:"defense"}},{id:"dh_task_4",name:we("kill_bugs",25e3,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"25000",completed:!1,reward:{value:"1.75",appliesTo:"defense"}},{id:"dh_task_5",name:we("kill_bugs",5e4,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"50000",completed:!1,reward:{value:"2.0",appliesTo:"defense"}},{id:"dh_task_6",name:we("kill_bugs",1e5,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"100000",completed:!1,reward:{value:"2.5",appliesTo:"defense"}}]},{id:"storage_synapse",name:"Storage Synapse",description:"Increases resource storage capacity.",position:{x:-5,y:-8},distance:25e3,connections:[{nodeId:"hive_nexus",distance:25e3},{nodeId:"resource_vault",distance:2e4}],icon:"i-mdi-database",visited:!1,connectedTo:["hive_nexus","resource_vault"],tasks:[{id:"ss_task_1",name:we("collect_food","1e46"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e46",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"ss_task_2",name:we("collect_food","1e50"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e50",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"ss_task_3",name:we("collect_food","1e55"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e55",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"ss_task_4",name:we("collect_food","1e61"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e61",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"ss_task_5",name:we("collect_food","1e68"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e68",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"ss_task_6",name:we("collect_food","1e76"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e76",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"larva_growth_nexus",name:"Larva Growth Nexus",description:"Accelerates larva development.",position:{x:8,y:5},distance:3e4,connections:[{nodeId:"queen_synapse",distance:3e4},{nodeId:"nursery_amplifier",distance:25e3}],icon:"i-mdi-baby-carriage",visited:!1,connectedTo:["queen_synapse","nursery_amplifier"],tasks:[{id:"lgn_task_1",name:we("collect_food","1e78"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e78",completed:!1,reward:{value:"1.1",appliesTo:"nursery"}},{id:"lgn_task_2",name:we("collect_food","1e84"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e84",completed:!1,reward:{value:"1.25",appliesTo:"nursery"}},{id:"lgn_task_3",name:we("collect_food","1e90"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e90",completed:!1,reward:{value:"1.5",appliesTo:"nursery"}},{id:"lgn_task_4",name:we("collect_food","1e97"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e97",completed:!1,reward:{value:"1.75",appliesTo:"nursery"}},{id:"lgn_task_5",name:we("collect_food","1e105"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e105",completed:!1,reward:{value:"2.0",appliesTo:"nursery"}},{id:"lgn_task_6",name:we("collect_food","1e115"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e115",completed:!1,reward:{value:"2.5",appliesTo:"nursery"}}]},{id:"pheromone_boost_1",name:"Minor Pheromone Enhancer",description:"Slightly boosts pheromone effectiveness.",position:{x:-5,y:8},distance:1e4,connections:[{nodeId:"food_cluster",distance:1e4},{nodeId:"pheromone_matrix",distance:75e3}],icon:"i-mdi-spray",visited:!1,connectedTo:["food_cluster","pheromone_matrix"],tasks:[{id:"pb1_task_1",name:we("collect_pheromone","1e6"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e6",completed:!1,reward:{value:"1.1",appliesTo:"pheromone"}},{id:"pb1_task_2",name:we("collect_pheromone","1e7"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e7",completed:!1,reward:{value:"1.25",appliesTo:"pheromone"}},{id:"pb1_task_3",name:we("collect_pheromone","1e9"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e9",completed:!1,reward:{value:"1.5",appliesTo:"pheromone"}},{id:"pb1_task_4",name:we("collect_pheromone","1e11"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e11",completed:!1,reward:{value:"1.75",appliesTo:"pheromone"}},{id:"pb1_task_5",name:we("collect_pheromone","1e14"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e14",completed:!1,reward:{value:"2.0",appliesTo:"pheromone"}},{id:"pb1_task_6",name:we("collect_pheromone","1e17"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e17",completed:!1,reward:{value:"2.5",appliesTo:"pheromone"}}]},{id:"ep_minor_cluster",name:"Minor EP Cluster",description:"Provides a small boost to EP generation.",position:{x:-8,y:-5},distance:5e3,connections:[{nodeId:"ep_reservoir",distance:5e3},{nodeId:"ep_amplifier",distance:15e3}],icon:"i-mdi-star-four-points",visited:!1,connectedTo:["ep_reservoir","ep_amplifier"],tasks:[{id:"epmc_task_1",name:we("collect_evolution_points","1e15"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"epmc_task_2",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"epmc_task_3",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"epmc_task_4",name:we("collect_evolution_points","1e23"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"epmc_task_5",name:we("collect_evolution_points","1e27"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"epmc_task_6",name:we("collect_evolution_points","1e31"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"resilience_node",name:"Resilience Node",description:"Increases colony resilience to negative events.",position:{x:5,y:-8},distance:2e4,connections:[{nodeId:"hive_nexus",distance:2e4},{nodeId:"mega_amplifier",distance:1e5},{nodeId:"health_matrix",distance:4e4}],icon:"i-mdi-heart-pulse",visited:!1,connectedTo:["hive_nexus","mega_amplifier","health_matrix"],tasks:[{id:"rn_task_1",name:we("kill_bugs",1500,"Worker Ants"),description:"Eliminate hostile Worker Ants.",type:"kill_bugs",target:"worker",requiredAmount:"1500",completed:!1,reward:{value:"1.1",appliesTo:"health"}},{id:"rn_task_2",name:we("kill_bugs",7500,"Soldier Ants"),description:"Eliminate hostile Soldier Ants.",type:"kill_bugs",target:"soldier",requiredAmount:"7500",completed:!1,reward:{value:"1.25",appliesTo:"health"}},{id:"rn_task_3",name:we("kill_bugs",15e3,"Ladybugs"),description:"Eliminate hostile Ladybugs.",type:"kill_bugs",target:"ladybug",requiredAmount:"15000",completed:!1,reward:{value:"1.5",appliesTo:"health"}},{id:"rn_task_4",name:we("kill_bugs",35e3,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"35000",completed:!1,reward:{value:"1.75",appliesTo:"health"}},{id:"rn_task_5",name:we("kill_bugs",75e3,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"75000",completed:!1,reward:{value:"2.0",appliesTo:"health"}},{id:"rn_task_6",name:we("kill_bugs",15e4,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"150000",completed:!1,reward:{value:"2.5",appliesTo:"health"}}]},{id:"royal_jelly_node",name:"Royal Jelly Node",description:"Boosts production of royal jelly for queen development.",position:{x:12,y:0},distance:25e3,connections:[{nodeId:"queen_synapse",distance:25e3},{nodeId:"reproduction_chamber",distance:3e4}],icon:"i-mdi-bottle-tonic-plus",visited:!1,connectedTo:["queen_synapse","reproduction_chamber"],tasks:[{id:"rjn_task_1",name:we("collect_food","1e120"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e120",completed:!1,reward:{value:"1.1",appliesTo:"queenChamber"}},{id:"rjn_task_2",name:we("collect_food","1e130"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e130",completed:!1,reward:{value:"1.25",appliesTo:"queenChamber"}},{id:"rjn_task_3",name:we("collect_food","1e140"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e140",completed:!1,reward:{value:"1.5",appliesTo:"queenChamber"}},{id:"rjn_task_4",name:we("collect_food","1e150"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e150",completed:!1,reward:{value:"1.75",appliesTo:"queenChamber"}},{id:"rjn_task_5",name:we("collect_food","1e160"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e160",completed:!1,reward:{value:"2.0",appliesTo:"queenChamber"}},{id:"rjn_task_6",name:we("collect_food","1e170"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e170",completed:!1,reward:{value:"2.5",appliesTo:"queenChamber"}}]},{id:"evolution_chamber",name:"Evolution Chamber",description:"Advanced neural center focused on genetic evolution.",position:{x:-12,y:0},distance:35e3,connections:[{nodeId:"ep_reservoir",distance:35e3},{nodeId:"genetic_accelerator",distance:4e4}],icon:"i-mdi-dna",visited:!1,connectedTo:["ep_reservoir","genetic_accelerator"],tasks:[{id:"ec_task_1",name:we("collect_evolution_points","1e15"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"ec_task_2",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"ec_task_3",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"ec_task_4",name:we("collect_evolution_points","1e23"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"ec_task_5",name:we("collect_evolution_points","1e27"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"ec_task_6",name:we("collect_evolution_points","1e31"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"colony_coordination",name:"Colony Coordination Center",description:"Enhances overall colony efficiency and organization.",position:{x:-2,y:-12},distance:15e3,connections:[{nodeId:"hive_nexus",distance:15e3},{nodeId:"synchronized_network",distance:25e3}],icon:"i-mdi-chart-gantt",visited:!1,connectedTo:["hive_nexus","synchronized_network"],tasks:[{id:"ccc_task_1",name:we("collect_evolution_points","1e15"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"colony"}},{id:"ccc_task_2",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"colony"}},{id:"ccc_task_3",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"colony"}},{id:"ccc_task_4",name:we("collect_evolution_points","1e23"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"colony"}},{id:"ccc_task_5",name:we("collect_evolution_points","1e27"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"colony"}},{id:"ccc_task_6",name:we("collect_evolution_points","1e31"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"colony"}}]},{id:"guardian_chamber",name:"Guardian Chamber",description:"Specialized neural node for defensive soldier production.",position:{x:0,y:-18},distance:3e4,connections:[{nodeId:"defense_hub",distance:3e4},{nodeId:"security_matrix",distance:35e3}],icon:"i-mdi-shield-sword",visited:!1,connectedTo:["defense_hub","security_matrix"],tasks:[{id:"gc_task_1",name:we("kill_bugs",2500,"Soldier Ants"),description:"Eliminate hostile Soldier Ants.",type:"kill_bugs",target:"soldier",requiredAmount:"2500",completed:!1,reward:{value:"1.1",appliesTo:"damage"}},{id:"gc_task_2",name:we("kill_bugs",12500,"Ladybugs"),description:"Eliminate hostile Ladybugs.",type:"kill_bugs",target:"ladybug",requiredAmount:"12500",completed:!1,reward:{value:"1.25",appliesTo:"damage"}},{id:"gc_task_3",name:we("kill_bugs",25e3,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"25000",completed:!1,reward:{value:"1.5",appliesTo:"damage"}},{id:"gc_task_4",name:we("kill_bugs",5e4,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"50000",completed:!1,reward:{value:"1.75",appliesTo:"damage"}},{id:"gc_task_5",name:we("kill_bugs",1e5,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"100000",completed:!1,reward:{value:"2.0",appliesTo:"damage"}},{id:"gc_task_6",name:we("kill_bugs",2e5,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"200000",completed:!1,reward:{value:"2.5",appliesTo:"damage"}}]},{id:"discovery_nexus",name:"Discovery Nexus",description:"Expands exploration capabilities and new resource discovery.",position:{x:-16,y:4},distance:25e3,connections:[{nodeId:"exploration_node",distance:25e3},{nodeId:"mapping_cluster",distance:3e4}],icon:"i-mdi-telescope",visited:!1,connectedTo:["exploration_node","mapping_cluster"],tasks:[{id:"dn_task_1",name:we("collect_evolution_points","1e15"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"neurotrail_steps"}},{id:"dn_task_2",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"neurotrail_steps"}},{id:"dn_task_3",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"neurotrail_steps"}},{id:"dn_task_4",name:we("collect_evolution_points","1e23"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"neurotrail_steps"}},{id:"dn_task_5",name:we("collect_evolution_points","1e27"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"neurotrail_steps"}},{id:"dn_task_6",name:we("collect_evolution_points","1e31"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"neurotrail_steps"}}]},{id:"resource_vault",name:"Resource Vault",description:"Specialized neural structure for optimized resource storage.",position:{x:-10,y:-14},distance:2e4,connections:[{nodeId:"storage_synapse",distance:2e4},{nodeId:"logistics_hub",distance:25e3}],icon:"i-mdi-vault",visited:!1,connectedTo:["storage_synapse","logistics_hub"],tasks:[{id:"rv_task_1",name:we("collect_food","1e180"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e180",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"rv_task_2",name:we("collect_food","1e190"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e190",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"rv_task_3",name:we("collect_food","1e200"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e200",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"rv_task_4",name:we("collect_food","1e215"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e215",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"rv_task_5",name:we("collect_food","1e230"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e230",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"rv_task_6",name:we("collect_food","1e250"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e250",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"nursery_amplifier",name:"Nursery Amplifier",description:"Enhances larva growth and development processes.",position:{x:13,y:8},distance:25e3,connections:[{nodeId:"larva_growth_nexus",distance:25e3},{nodeId:"growth_accelerator",distance:3e4}],icon:"i-mdi-egg",visited:!1,connectedTo:["larva_growth_nexus","growth_accelerator"],tasks:[{id:"na_task_1",name:we("collect_food","1e260"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e260",completed:!1,reward:{value:"1.1",appliesTo:"nursery"}},{id:"na_task_2",name:we("collect_food","1e275"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e275",completed:!1,reward:{value:"1.25",appliesTo:"nursery"}},{id:"na_task_3",name:we("collect_food","1e290"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e290",completed:!1,reward:{value:"1.5",appliesTo:"nursery"}},{id:"na_task_4",name:we("collect_food","1e305"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e305",completed:!1,reward:{value:"1.75",appliesTo:"nursery"}},{id:"na_task_5",name:we("collect_food","1e320"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e320",completed:!1,reward:{value:"2.0",appliesTo:"nursery"}},{id:"na_task_6",name:we("collect_food","1e340"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e340",completed:!1,reward:{value:"2.5",appliesTo:"nursery"}}]},{id:"ep_amplifier",name:"EP Amplifier",description:"Significantly enhances evolution point generation.",position:{x:-13,y:-8},distance:15e3,connections:[{nodeId:"ep_minor_cluster",distance:15e3},{nodeId:"evolutionary_catalyst",distance:4e4}],icon:"i-mdi-star-plus",visited:!1,connectedTo:["ep_minor_cluster","evolutionary_catalyst"],tasks:[{id:"epa_task_1",name:we("collect_evolution_points","1e15"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"epa_task_2",name:we("collect_evolution_points","1e17"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"epa_task_3",name:we("collect_evolution_points","1e20"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"epa_task_4",name:we("collect_evolution_points","1e23"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"epa_task_5",name:we("collect_evolution_points","1e27"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"epa_task_6",name:we("collect_evolution_points","1e31"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"health_matrix",name:"Health Matrix",description:"Strengthens overall colony health and longevity.",position:{x:10,y:-10},distance:4e4,connections:[{nodeId:"resilience_node",distance:4e4},{nodeId:"regeneration_core",distance:35e3}],icon:"i-mdi-heart-circle",visited:!1,connectedTo:["resilience_node","regeneration_core"],tasks:[{id:"hm_task_1",name:we("kill_bugs",3e3,"Soldier Ants"),description:"Eliminate hostile Soldier Ants.",type:"kill_bugs",target:"soldier",requiredAmount:"3000",completed:!1,reward:{value:"1.1",appliesTo:"regen"}},{id:"hm_task_2",name:we("kill_bugs",15e3,"Ladybugs"),description:"Eliminate hostile Ladybugs.",type:"kill_bugs",target:"ladybug",requiredAmount:"15000",completed:!1,reward:{value:"1.25",appliesTo:"regen"}},{id:"hm_task_3",name:we("kill_bugs",3e4,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"30000",completed:!1,reward:{value:"1.5",appliesTo:"regen"}},{id:"hm_task_4",name:we("kill_bugs",6e4,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"60000",completed:!1,reward:{value:"1.75",appliesTo:"regen"}},{id:"hm_task_5",name:we("kill_bugs",12e4,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"120000",completed:!1,reward:{value:"2.0",appliesTo:"regen"}},{id:"hm_task_6",name:we("kill_bugs",25e4,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"250000",completed:!1,reward:{value:"2.5",appliesTo:"regen"}}]},{id:"pheromone_matrix",name:"Pheromone Matrix",description:"A distant neural structure that enhances pheromone efficiency.",position:{x:-8,y:14},distance:75e3,connections:[{nodeId:"pheromone_boost_1",distance:75e3},{nodeId:"advanced_chemical_synapse",distance:5e4}],icon:"i-mdi-molecular-structure",visited:!1,connectedTo:["pheromone_boost_1","advanced_chemical_synapse"],tasks:[{id:"pm_task_1",name:we("collect_pheromone","1e15"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"pheromone"}},{id:"pm_task_2",name:we("collect_pheromone","1e17"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"pheromone"}},{id:"pm_task_3",name:we("collect_pheromone","1e20"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"pheromone"}},{id:"pm_task_4",name:we("collect_pheromone","1e23"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"pheromone"}},{id:"pm_task_5",name:we("collect_pheromone","1e27"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"pheromone"}},{id:"pm_task_6",name:we("collect_pheromone","1e31"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"pheromone"}}]},{id:"mega_amplifier",name:"Mega Amplifier",description:"A powerful neural amplifier focused on mega colony production.",position:{x:10,y:-14},distance:1e5,connections:[{nodeId:"resilience_node",distance:1e5},{nodeId:"mega_colony_nexus",distance:6e4}],icon:"i-mdi-atom",visited:!1,connectedTo:["resilience_node","mega_colony_nexus"],tasks:[{id:"ma_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"megacolony"}},{id:"ma_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"megacolony"}},{id:"ma_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"megacolony"}},{id:"ma_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"megacolony"}},{id:"ma_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"megacolony"}},{id:"ma_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"megacolony"}}]},{id:"worker_boost_2",name:"Advanced Worker Node",description:"Further enhances worker abilities and coordination.",position:{x:8,y:11},distance:15e3,connections:[{nodeId:"worker_boost_1",distance:15e3},{nodeId:"specialist_synapse",distance:25e3}],icon:"i-mdi-account-hard-hat",visited:!1,connectedTo:["worker_boost_1","specialist_synapse"],tasks:[{id:"wb2_task_1",name:we("collect_food","1e350"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e350",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"wb2_task_2",name:we("collect_food","1e370"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e370",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"wb2_task_3",name:we("collect_food","1e390"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e390",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"wb2_task_4",name:we("collect_food","1e410"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e410",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"wb2_task_5",name:we("collect_food","1e430"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e430",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"wb2_task_6",name:we("collect_food","1e450"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e450",completed:!1,reward:{value:"2.5",appliesTo:"worker"}}]},{id:"harvester_nexus",name:"Harvester Nexus",description:"Specialized neural structure for food gathering efficiency.",position:{x:0,y:16},distance:2e4,connections:[{nodeId:"food_cluster",distance:2e4},{nodeId:"resource_collection_matrix",distance:35e3}],icon:"i-mdi-basket",visited:!1,connectedTo:["food_cluster","resource_collection_matrix"],tasks:[{id:"hvn_task_1",name:we("collect_food","1e460"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e460",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"hvn_task_2",name:we("collect_food","1e480"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e480",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"hvn_task_3",name:we("collect_food","1e500"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e500",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"hvn_task_4",name:we("collect_food","1e525"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e525",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"hvn_task_5",name:we("collect_food","1e550"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e550",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"hvn_task_6",name:we("collect_food","1e575"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e575",completed:!1,reward:{value:"2.5",appliesTo:"worker"}},{id:"hvn_hd_task_1",name:we("collect_honeydew","1e8"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e8",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"hvn_hd_task_2",name:we("collect_honeydew","1e10"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e10",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"hvn_hd_task_3",name:we("collect_honeydew","1e13"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e13",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"hvn_hd_task_4",name:we("collect_honeydew","1e16"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e16",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"hvn_hd_task_5",name:we("collect_honeydew","1e20"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e20",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"hvn_hd_task_6",name:we("collect_honeydew","1e24"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e24",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"tactical_hub",name:"Tactical Hub",description:"Advanced strategic center for colony operation optimization.",position:{x:0,y:20},distance:3e4,connections:[{nodeId:"central_command",distance:3e4},{nodeId:"command_nexus",distance:4e4}],icon:"i-mdi-strategy",visited:!1,connectedTo:["central_command","command_nexus"],tasks:[{id:"th_task_1",name:we("kill_bugs",5e4,"Ladybugs"),description:"Eliminate hostile Ladybugs.",type:"kill_bugs",target:"ladybug",requiredAmount:"50000",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"th_task_2",name:we("kill_bugs",1e5,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"100000",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"th_task_3",name:we("kill_bugs",2e5,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"200000",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"th_task_4",name:we("kill_bugs",4e5,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"400000",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"th_task_5",name:we("kill_bugs",8e5,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"800000",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"th_task_6",name:we("kill_bugs",15e5,"Cockroaches"),description:"Eliminate hostile Cockroaches.",type:"kill_bugs",target:"cockroach",requiredAmount:"1500000",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"specialist_synapse",name:"Specialist Synapse",description:"Develops specialized worker capabilities for specific tasks.",position:{x:14,y:15},distance:25e3,connections:[{nodeId:"worker_boost_2",distance:25e3},{nodeId:"elite_worker_matrix",distance:35e3}],icon:"i-mdi-account-group",visited:!1,connectedTo:["worker_boost_2","elite_worker_matrix"],tasks:[{id:"ssyn_task_1",name:we("collect_food","1e600"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e600",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"ssyn_task_2",name:we("collect_food","1e625"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e625",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"ssyn_task_3",name:we("collect_food","1e650"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e650",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"ssyn_task_4",name:we("collect_food","1e675"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e675",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"ssyn_task_5",name:we("collect_food","1e700"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e700",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"ssyn_task_6",name:we("collect_food","1e725"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e725",completed:!1,reward:{value:"2.5",appliesTo:"worker"}}]},{id:"advanced_chemical_synapse",name:"Advanced Chemical Synapse",description:"Highly evolved neural structure for complex pheromone production.",position:{x:-14,y:18},distance:5e4,connections:[{nodeId:"pheromone_matrix",distance:5e4},{nodeId:"chemical_communication_hub",distance:45e3}],icon:"i-mdi-flask",visited:!1,connectedTo:["pheromone_matrix","chemical_communication_hub"],tasks:[{id:"acs_task_1",name:we("collect_pheromone","1e15"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e15",completed:!1,reward:{value:"1.1",appliesTo:"pheromone"}},{id:"acs_task_2",name:we("collect_pheromone","1e17"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e17",completed:!1,reward:{value:"1.25",appliesTo:"pheromone"}},{id:"acs_task_3",name:we("collect_pheromone","1e20"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e20",completed:!1,reward:{value:"1.5",appliesTo:"pheromone"}},{id:"acs_task_4",name:we("collect_pheromone","1e23"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e23",completed:!1,reward:{value:"1.75",appliesTo:"pheromone"}},{id:"acs_task_5",name:we("collect_pheromone","1e27"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e27",completed:!1,reward:{value:"2.0",appliesTo:"pheromone"}},{id:"acs_task_6",name:we("collect_pheromone","1e31"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e31",completed:!1,reward:{value:"2.5",appliesTo:"pheromone"}}]},{id:"mega_colony_nexus",name:"Mega Colony Nexus",description:"Specialized neural center for mega colony development.",position:{x:16,y:-20},distance:6e4,connections:[{nodeId:"mega_amplifier",distance:6e4},{nodeId:"hivemind_core",distance:75e3}],icon:"i-mdi-city",visited:!1,connectedTo:["mega_amplifier","hivemind_core"],tasks:[{id:"mcn_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"hivemind"}},{id:"mcn_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"hivemind"}},{id:"mcn_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"hivemind"}},{id:"mcn_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"hivemind"}},{id:"mcn_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"hivemind"}},{id:"mcn_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"hivemind"}}]},{id:"resource_collection_matrix",name:"Resource Collection Matrix",description:"Advanced neural network optimizing all resource gathering.",position:{x:4,y:22},distance:35e3,connections:[{nodeId:"harvester_nexus",distance:35e3}],icon:"i-mdi-diamond-stone",visited:!1,connectedTo:["harvester_nexus"],tasks:[{id:"rcm_task_1",name:we("collect_food","1e750"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e750",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"rcm_task_2",name:we("collect_food","1e775"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e775",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"rcm_task_3",name:we("collect_food","1e800"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e800",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"rcm_task_4",name:we("collect_food","1e825"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e825",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"rcm_task_5",name:we("collect_food","1e850"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e850",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"rcm_task_6",name:we("collect_food","1e875"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e875",completed:!1,reward:{value:"2.5",appliesTo:"worker"}},{id:"rcm_hd_task_1",name:we("collect_honeydew","1e10"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e10",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"rcm_hd_task_2",name:we("collect_honeydew","1e12"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e12",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"rcm_hd_task_3",name:we("collect_honeydew","1e15"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e15",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"rcm_hd_task_4",name:we("collect_honeydew","1e18"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e18",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"rcm_hd_task_5",name:we("collect_honeydew","1e22"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e22",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"rcm_hd_task_6",name:we("collect_honeydew","1e26"),description:"Gather honeydew resources.",type:"collect_honeydew",requiredAmount:"1e26",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"reproduction_chamber",name:"Reproduction Chamber",description:"Specialized neural structure for queen reproduction optimization.",position:{x:18,y:2},distance:3e4,connections:[{nodeId:"royal_jelly_node",distance:3e4}],icon:"i-mdi-egg-plus",visited:!1,connectedTo:["royal_jelly_node"],tasks:[{id:"rc_task_1",name:we("collect_food","1e825"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e825",completed:!1,reward:{value:"1.1",appliesTo:"queenChamber"}},{id:"rc_task_2",name:we("collect_food","1e850"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e850",completed:!1,reward:{value:"1.25",appliesTo:"queenChamber"}},{id:"rc_task_3",name:we("collect_food","1e875"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e875",completed:!1,reward:{value:"1.5",appliesTo:"queenChamber"}},{id:"rc_task_4",name:we("collect_food","1e900"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e900",completed:!1,reward:{value:"1.75",appliesTo:"queenChamber"}},{id:"rc_task_5",name:we("collect_food","1e925"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e925",completed:!1,reward:{value:"2.0",appliesTo:"queenChamber"}},{id:"rc_task_6",name:we("collect_food","1e950"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e950",completed:!1,reward:{value:"2.5",appliesTo:"queenChamber"}}]},{id:"genetic_accelerator",name:"Genetic Accelerator",description:"Advanced neural structure for rapid evolutionary changes.",position:{x:-18,y:-2},distance:4e4,connections:[{nodeId:"evolution_chamber",distance:4e4}],icon:"i-mdi-graph",visited:!1,connectedTo:["evolution_chamber"],tasks:[{id:"ga_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"ga_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"ga_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"ga_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"ga_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"ga_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"synchronized_network",name:"Synchronized Network",description:"Highly integrated neural network for colony-wide coordination.",position:{x:-2,y:-22},distance:25e3,connections:[{nodeId:"colony_coordination",distance:25e3}],icon:"i-mdi-lan",visited:!1,connectedTo:["colony_coordination"],tasks:[{id:"sn_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"sn_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"sn_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"sn_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"sn_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"sn_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"security_matrix",name:"Security Matrix",description:"Advanced defensive coordination network for maximum protection.",position:{x:0,y:-26},distance:35e3,connections:[{nodeId:"guardian_chamber",distance:35e3}],icon:"i-mdi-shield-lock",visited:!1,connectedTo:["guardian_chamber"],tasks:[{id:"sm_task_1",name:we("kill_bugs",75e3,"Houseflies"),description:"Eliminate hostile Houseflies.",type:"kill_bugs",target:"housefly",requiredAmount:"75000",completed:!1,reward:{value:"1.1",appliesTo:"defense"}},{id:"sm_task_2",name:we("kill_bugs",15e4,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"150000",completed:!1,reward:{value:"1.25",appliesTo:"defense"}},{id:"sm_task_3",name:we("kill_bugs",3e5,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"300000",completed:!1,reward:{value:"1.5",appliesTo:"defense"}},{id:"sm_task_4",name:we("kill_bugs",6e5,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"600000",completed:!1,reward:{value:"1.75",appliesTo:"defense"}},{id:"sm_task_5",name:we("kill_bugs",12e5,"Cockroaches"),description:"Eliminate hostile Cockroaches.",type:"kill_bugs",target:"cockroach",requiredAmount:"1200000",completed:!1,reward:{value:"2.0",appliesTo:"defense"}},{id:"sm_task_6",name:we("kill_bugs",25e5,"Fire Ants"),description:"Eliminate hostile Fire Ants.",type:"kill_bugs",target:"fire_ant",requiredAmount:"2500000",completed:!1,reward:{value:"2.5",appliesTo:"defense"}}]},{id:"mapping_cluster",name:"Mapping Cluster",description:"Advanced neural structure for territory mapping and analysis.",position:{x:-22,y:6},distance:3e4,connections:[{nodeId:"discovery_nexus",distance:3e4}],icon:"i-mdi-map",visited:!1,connectedTo:["discovery_nexus"],tasks:[{id:"mc_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"neurotrail_steps"}},{id:"mc_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"neurotrail_steps"}},{id:"mc_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"neurotrail_steps"}},{id:"mc_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"neurotrail_steps"}},{id:"mc_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"neurotrail_steps"}},{id:"mc_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"neurotrail_steps"}}]},{id:"logistics_hub",name:"Logistics Hub",description:"Specialized neural center for resource movement optimization.",position:{x:-16,y:-20},distance:25e3,connections:[{nodeId:"resource_vault",distance:25e3}],icon:"i-mdi-truck-delivery",visited:!1,connectedTo:["resource_vault"],tasks:[{id:"lh_task_1",name:we("collect_food","1e900"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e900",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"lh_task_2",name:we("collect_food","1e920"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e920",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"lh_task_3",name:we("collect_food","1e940"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e940",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"lh_task_4",name:we("collect_food","1e960"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e960",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"lh_task_5",name:we("collect_food","1e980"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e980",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"lh_task_6",name:we("collect_food","1e1000"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e1000",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"growth_accelerator",name:"Growth Accelerator",description:"Advanced neural structure for rapid larval development.",position:{x:18,y:13},distance:3e4,connections:[{nodeId:"nursery_amplifier",distance:3e4}],icon:"i-mdi-sprout",visited:!1,connectedTo:["nursery_amplifier"],tasks:[{id:"gracc_task_1",name:we("collect_food","1e925"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e925",completed:!1,reward:{value:"1.1",appliesTo:"nursery"}},{id:"gracc_task_2",name:we("collect_food","1e940"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e940",completed:!1,reward:{value:"1.25",appliesTo:"nursery"}},{id:"gracc_task_3",name:we("collect_food","1e955"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e955",completed:!1,reward:{value:"1.5",appliesTo:"nursery"}},{id:"gracc_task_4",name:we("collect_food","1e970"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e970",completed:!1,reward:{value:"1.75",appliesTo:"nursery"}},{id:"gracc_task_5",name:we("collect_food","1e985"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e985",completed:!1,reward:{value:"2.0",appliesTo:"nursery"}},{id:"gracc_task_6",name:we("collect_food","1e1000"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e1000",completed:!1,reward:{value:"2.5",appliesTo:"nursery"}}]},{id:"evolutionary_catalyst",name:"Evolutionary Catalyst",description:"Powerful neural cluster that drastically accelerates evolution.",position:{x:-18,y:-15},distance:4e4,connections:[{nodeId:"ep_amplifier",distance:4e4}],icon:"i-mdi-molecule",visited:!1,connectedTo:["ep_amplifier"],tasks:[{id:"ecat_task_1",name:we("collect_evolution_points","1e30"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"ep"}},{id:"ecat_task_2",name:we("collect_evolution_points","1e33"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"ep"}},{id:"ecat_task_3",name:we("collect_evolution_points","1e37"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"ep"}},{id:"ecat_task_4",name:we("collect_evolution_points","1e41"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"ep"}},{id:"ecat_task_5",name:we("collect_evolution_points","1e46"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"ep"}},{id:"ecat_task_6",name:we("collect_evolution_points","1e51"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"ep"}}]},{id:"regeneration_core",name:"Regeneration Core",description:"Specialized neural structure for enhanced healing and regeneration.",position:{x:15,y:-14},distance:35e3,connections:[{nodeId:"health_matrix",distance:35e3}],icon:"i-mdi-bandage",visited:!1,connectedTo:["health_matrix"],tasks:[{id:"rgc_task_1",name:we("kill_bugs",1e5,"Mosquitoes"),description:"Eliminate hostile Mosquitoes.",type:"kill_bugs",target:"mosquito",requiredAmount:"100000",completed:!1,reward:{value:"1.1",appliesTo:"regen"}},{id:"rgc_task_2",name:we("kill_bugs",25e4,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"250000",completed:!1,reward:{value:"1.25",appliesTo:"regen"}},{id:"rgc_task_3",name:we("kill_bugs",5e5,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"500000",completed:!1,reward:{value:"1.5",appliesTo:"regen"}},{id:"rgc_task_4",name:we("kill_bugs",1e6,"Cockroaches"),description:"Eliminate hostile Cockroaches.",type:"kill_bugs",target:"cockroach",requiredAmount:"1000000",completed:!1,reward:{value:"1.75",appliesTo:"regen"}},{id:"rgc_task_5",name:we("kill_bugs",2e6,"Fire Ants"),description:"Eliminate hostile Fire Ants.",type:"kill_bugs",target:"fire_ant",requiredAmount:"2000000",completed:!1,reward:{value:"2.0",appliesTo:"regen"}},{id:"rgc_task_6",name:we("kill_bugs",4e6,"Termites"),description:"Eliminate hostile Termites.",type:"kill_bugs",target:"termite",requiredAmount:"4000000",completed:!1,reward:{value:"2.5",appliesTo:"regen"}}]},{id:"command_nexus",name:"Command Nexus",description:"Supreme strategic neural center for colony-wide operations.",position:{x:0,y:28},distance:4e4,connections:[{nodeId:"tactical_hub",distance:4e4}],icon:"i-mdi-brain",visited:!1,connectedTo:["tactical_hub"],tasks:[{id:"cn_task_1",name:we("kill_bugs",5e5,"Beetles"),description:"Eliminate hostile Beetles.",type:"kill_bugs",target:"beetle",requiredAmount:"500000",completed:!1,reward:{value:"1.1",appliesTo:"global"}},{id:"cn_task_2",name:we("kill_bugs",1e6,"Grasshoppers"),description:"Eliminate hostile Grasshoppers.",type:"kill_bugs",target:"grasshopper",requiredAmount:"1000000",completed:!1,reward:{value:"1.25",appliesTo:"global"}},{id:"cn_task_3",name:we("kill_bugs",2e6,"Cockroaches"),description:"Eliminate hostile Cockroaches.",type:"kill_bugs",target:"cockroach",requiredAmount:"2000000",completed:!1,reward:{value:"1.5",appliesTo:"global"}},{id:"cn_task_4",name:we("kill_bugs",4e6,"Fire Ants"),description:"Eliminate hostile Fire Ants.",type:"kill_bugs",target:"fire_ant",requiredAmount:"4000000",completed:!1,reward:{value:"1.75",appliesTo:"global"}},{id:"cn_task_5",name:we("kill_bugs",75e5,"Termites"),description:"Eliminate hostile Termites.",type:"kill_bugs",target:"termite",requiredAmount:"7500000",completed:!1,reward:{value:"2.0",appliesTo:"global"}},{id:"cn_task_6",name:we("kill_bugs",1e7,"Wasps"),description:"Eliminate hostile Wasps.",type:"kill_bugs",target:"wasp",requiredAmount:"10000000",completed:!1,reward:{value:"2.5",appliesTo:"global"}}]},{id:"elite_worker_matrix",name:"Elite Worker Matrix",description:"Highly specialized neural structure for elite worker development.",position:{x:20,y:19},distance:35e3,connections:[{nodeId:"specialist_synapse",distance:35e3}],icon:"i-mdi-account-star",visited:!1,connectedTo:["specialist_synapse"],tasks:[{id:"ewm_task_1",name:we("collect_food","1e35"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e35",completed:!1,reward:{value:"1.1",appliesTo:"worker"}},{id:"ewm_task_2",name:we("collect_food","1e39"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e39",completed:!1,reward:{value:"1.25",appliesTo:"worker"}},{id:"ewm_task_3",name:we("collect_food","1e44"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e44",completed:!1,reward:{value:"1.5",appliesTo:"worker"}},{id:"ewm_task_4",name:we("collect_food","1e49"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e49",completed:!1,reward:{value:"1.75",appliesTo:"worker"}},{id:"ewm_task_5",name:we("collect_food","1e55"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e55",completed:!1,reward:{value:"2.0",appliesTo:"worker"}},{id:"ewm_task_6",name:we("collect_food","1e61"),description:"Gather food resources.",type:"collect_food",requiredAmount:"1e61",completed:!1,reward:{value:"2.5",appliesTo:"worker"}}]},{id:"chemical_communication_hub",name:"Chemical Communication Hub",description:"Extremely advanced neural center for colony-wide communication.",position:{x:-20,y:22},distance:45e3,connections:[{nodeId:"advanced_chemical_synapse",distance:45e3}],icon:"i-mdi-radio-tower",visited:!1,connectedTo:["advanced_chemical_synapse"],tasks:[{id:"cch_task_1",name:we("collect_pheromone","1e30"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e30",completed:!1,reward:{value:"1.1",appliesTo:"pheromone"}},{id:"cch_task_2",name:we("collect_pheromone","1e33"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e33",completed:!1,reward:{value:"1.25",appliesTo:"pheromone"}},{id:"cch_task_3",name:we("collect_pheromone","1e37"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e37",completed:!1,reward:{value:"1.5",appliesTo:"pheromone"}},{id:"cch_task_4",name:we("collect_pheromone","1e41"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e41",completed:!1,reward:{value:"1.75",appliesTo:"pheromone"}},{id:"cch_task_5",name:we("collect_pheromone","1e46"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e46",completed:!1,reward:{value:"2.0",appliesTo:"pheromone"}},{id:"cch_task_6",name:we("collect_pheromone","1e51"),description:"Gather pheromones.",type:"collect_pheromone",requiredAmount:"1e51",completed:!1,reward:{value:"2.5",appliesTo:"pheromone"}}]},{id:"hivemind_core",name:"Hivemind Core",description:"The ultimate neural structure for colony consciousness integration.",position:{x:22,y:-26},distance:75e3,connections:[{nodeId:"mega_colony_nexus",distance:75e3}],icon:"i-mdi-head-cog",visited:!1,connectedTo:["mega_colony_nexus"],tasks:[{id:"hc_task_1",name:we("collect_evolution_points","1e50"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e50",completed:!1,reward:{value:"1.1",appliesTo:"hivemind"}},{id:"hc_task_2",name:we("collect_evolution_points","1e54"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e54",completed:!1,reward:{value:"1.25",appliesTo:"hivemind"}},{id:"hc_task_3",name:we("collect_evolution_points","1e59"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e59",completed:!1,reward:{value:"1.5",appliesTo:"hivemind"}},{id:"hc_task_4",name:we("collect_evolution_points","1e64"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e64",completed:!1,reward:{value:"1.75",appliesTo:"hivemind"}},{id:"hc_task_5",name:we("collect_evolution_points","1e70"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e70",completed:!1,reward:{value:"2.0",appliesTo:"hivemind"}},{id:"hc_task_6",name:we("collect_evolution_points","1e76"),description:"Gather Evolution Points.",type:"collect_evolution_points",requiredAmount:"1e76",completed:!1,reward:{value:"2.5",appliesTo:"hivemind"}}]}],ip={greenleaf:{id:"greenleaf",name:"Greenleaf Aphid",description:"Common aphid that produces small amounts of honeydew quickly.",baseYield:l(100),growthTime:50,unlockCost:l(0),color:"text-green-500 dark:text-green-400"},golden:{id:"golden",name:"Golden Aphid",description:"Uncommon aphid that produces moderate amounts of honeydew.",baseYield:l(500),growthTime:100,unlockCost:l(2e3),color:"text-amber-500 dark:text-amber-400"},bubbleback:{id:"bubbleback",name:"Bubbleback Aphid",description:"Rare aphid that secretes rich honeydew from specialized glands.",baseYield:l(1500),growthTime:200,unlockCost:l(1e4),color:"text-blue-500 dark:text-blue-400"},fungal:{id:"fungal",name:"Fungal Aphid",description:"Exotic aphid that cultivates fungi for enhanced honeydew production.",baseYield:l(5e3),growthTime:400,unlockCost:l(5e4),color:"text-purple-500 dark:text-purple-400"},pheromelion:{id:"pheromelion",name:"Pheromelion Aphid",description:"Legendary aphid that secretes honeydew infused with pheromone essence.",baseYield:l(2e4),growthTime:1e3,unlockCost:l(25e4),color:"text-pink-500 dark:text-pink-400"}},Ls=Es("aphidFarm",()=>{Vn();const t=St();Cr();const e=Y(l(0)),s=Y(l(0)),n=Y([]),r=Y(new Set(["greenleaf"])),o=Y("greenleaf"),i=Y([{id:"greenleaf-growth",name:"Rapid Photosynthesis",description:"Reduce Greenleaf Aphid growth time by {effect}%",aphidType:"greenleaf",maxLevel:10,baseCost:l(1e3),costScaling:2.5,effect:ae=>l(ae*8)},{id:"greenleaf-yield",name:"Enhanced Secretion",description:"Increase Greenleaf Aphid honeydew yield by {effect}%",aphidType:"greenleaf",maxLevel:15,baseCost:l(1500),costScaling:2.2,effect:ae=>l(ae*12)},{id:"greenleaf-doubler",name:"Dual Secretion",description:"Greenleaf Aphids have a {effect}% chance to produce two harvests at once",aphidType:"greenleaf",maxLevel:8,baseCost:l(3e3),costScaling:2.8,effect:ae=>l(ae*5)},{id:"golden-aura",name:"Golden Aura",description:"Golden Aphids boost adjacent fields' yields by {effect}%",aphidType:"golden",maxLevel:10,baseCost:l(5e3),costScaling:2.5,effect:ae=>l(ae*15)},{id:"golden-shine",name:"Radiant Harvest",description:"Golden Aphids have a {effect}% chance to yield double honeydew",aphidType:"golden",maxLevel:8,baseCost:l(7500),costScaling:3,effect:ae=>l(ae*7)},{id:"golden-efficiency",name:"Efficient Refinement",description:"Golden Aphids grow {effect}% faster",aphidType:"golden",maxLevel:12,baseCost:l(6e3),costScaling:2.2,effect:ae=>l(ae*4)},{id:"bubbleback-efficiency",name:"Bubble Efficiency",description:"Bubbleback Aphids produce {effect}% more honeydew with each field level",aphidType:"bubbleback",maxLevel:10,baseCost:l(12e3),costScaling:2.4,effect:ae=>l(ae*5)},{id:"bubbleback-burst",name:"Bubble Burst",description:"When harvested, Bubbleback Aphids boost all fields' yields by {effect}% for 30 seconds",aphidType:"bubbleback",maxLevel:6,baseCost:l(15e3),costScaling:3.5,effect:ae=>l(ae*10)},{id:"bubbleback-quality",name:"High-Quality Secretion",description:"Bubbleback Aphids' base yield increases by {effect}%",aphidType:"bubbleback",maxLevel:12,baseCost:l(8e3),costScaling:2.2,effect:ae=>l(ae*15)},{id:"fungal-fields",name:"Mycological Network",description:"Fungal Aphids yield bonus honeydew based on total fields: {effect}% per field",aphidType:"fungal",maxLevel:8,baseCost:l(2e4),costScaling:3.5,effect:ae=>l(ae*6)},{id:"fungal-growth",name:"Spore Acceleration",description:"Fungal Aphids mature {effect}% faster",aphidType:"fungal",maxLevel:10,baseCost:l(18e3),costScaling:2.3,effect:ae=>l(ae*6)},{id:"fungal-symbiosis",name:"Fungal Symbiosis",description:"For each Fungal Aphid growing, all aphid yields increase by {effect}%",aphidType:"fungal",maxLevel:5,baseCost:l(25e3),costScaling:4,effect:ae=>l(ae*3)},{id:"pheromelion-catalyst",name:"Pheromone Catalyst",description:"Pheromelion Aphids accelerate growth of all aphid types by {effect}%",aphidType:"pheromelion",maxLevel:5,baseCost:l(5e4),costScaling:6,effect:ae=>l(ae*12)},{id:"pheromelion-potency",name:"Pheromone Potency",description:"Pheromelion Aphids' base yield increases by {effect}%",aphidType:"pheromelion",maxLevel:10,baseCost:l(4e4),costScaling:3,effect:ae=>l(ae*20)},{id:"pheromelion-empowerment",name:"Pheromone Empowerment",description:"Pheromelion Aphids boost the effectiveness of other aphid upgrades by {effect}%",aphidType:"pheromelion",maxLevel:5,baseCost:l(75e3),costScaling:5,effect:ae=>l(ae*5)}]),c=Y({}),u=Y([{id:"honeydew-ep-boost",name:"Honey-Coated Evolution",description:"Increases EP production by {effect} per level",maxLevel:5,baseCost:l(1e5),costScaling:10,targets:["ep"],getEffect:ae=>l(1.5).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`},{id:"honeydew-pheromone-boost",name:"Pheromone Enrichment",description:"Increases pheromone production by {effect} per level",maxLevel:4,baseCost:l(25e4),costScaling:12,targets:["pheromone"],getEffect:ae=>l(1.75).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`},{id:"honeydew-global-boost",name:"Colony Symbiosis",description:"Increases all production by {effect} per level",maxLevel:5,baseCost:l(1e6),costScaling:15,targets:["global"],getEffect:ae=>l(2).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`},{id:"honeydew-ep-boost-2",name:"Advanced Evolution Catalyst",description:"Dramatically increases EP production by {effect} per level",maxLevel:3,baseCost:l(1e7),costScaling:25,targets:["ep"],getEffect:ae=>l(10).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`},{id:"honeydew-pheromone-boost-2",name:"Concentrated Pheromone Matrix",description:"Massively increases pheromone production by {effect} per level",maxLevel:3,baseCost:l(15e6),costScaling:30,targets:["pheromone"],getEffect:ae=>l(15).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`},{id:"honeydew-global-boost-2",name:"Unified Colony Network",description:"Exponentially increases all production by {effect} per level",maxLevel:3,baseCost:l(5e7),costScaling:40,targets:["global"],getEffect:ae=>l(20).pow(ae),formatEffect:ae=>`${ae.mul(100).sub(100).toFixed(0)}%`}]),d=Y({}),m=Y(!1),f=()=>{n.value=[{id:"field1",type:null,level:1,progress:0,isHarvestable:!1,hasAutoFarming:!1,autoFarmingEnabled:!1,preferredAphidType:null},{id:"field2",type:null,level:1,progress:0,isHarvestable:!1,hasAutoFarming:!1,autoFarmingEnabled:!1,preferredAphidType:null},{id:"field3",type:null,level:1,progress:0,isHarvestable:!1,hasAutoFarming:!1,autoFarmingEnabled:!1,preferredAphidType:null}]};f();const p=q(()=>Ht().getGeneratorCount("queenChamber").gt(0)),g=q(()=>n.value.filter(ae=>ae.type!==null)),w=q(()=>n.value.reduce((ae,de)=>ae+de.level,0)),C=q(()=>s.value),E=ae=>c.value[ae]||0,k=ae=>{const de=i.value.find(Le=>Le.id===ae);if(!de)return l(0);const Me=E(ae);return Me>=de.maxLevel?l(0):de.baseCost.mul(l(de.costScaling).pow(Me))},A=ae=>{const de=i.value.find(it=>it.id===ae);if(!de||E(ae)>=de.maxLevel||!r.value.has(de.aphidType))return!1;const Le=k(ae);return e.value.gte(Le)},S=ae=>{if(!A(ae))return!1;const de=k(ae);e.value=e.value.sub(de);const Me=E(ae);return c.value[ae]=Me+1,!0},T=ae=>{var it;const de=i.value.find(Ze=>Ze.id===ae);if(!de)return l(0);const Me=E(ae);if(Me<=0)return l(0);let Le=de.effect(Me);if(ae!=="pheromelion-empowerment"){const Ze=E("pheromelion-empowerment");if(Ze>0&&n.value.some(ft=>ft.type==="pheromelion")){const ft=((it=i.value.find(ke=>ke.id==="pheromelion-empowerment"))==null?void 0:it.effect(Ze))||l(0),Ve=l(1).add(ft.div(100));Le=Le.mul(Ve)}}return Le},R=ae=>{var Ze;const de=i.value.find(pt=>pt.id===ae);if(!de)return l(0);const Me=E(ae);if(Me>=de.maxLevel)return T(ae);const Le=Me+1;let it=de.effect(Le);if(ae!=="pheromelion-empowerment"){const pt=E("pheromelion-empowerment");if(pt>0&&n.value.some(Ve=>Ve.type==="pheromelion")){const Ve=((Ze=i.value.find(Fe=>Fe.id==="pheromelion-empowerment"))==null?void 0:Ze.effect(pt))||l(0),ke=l(1).add(Ve.div(100));it=it.mul(ke)}}return it},L=ae=>{const de=i.value.find(it=>it.id===ae);if(!de)return"";const Me=T(ae),Le=Lt(Me.div(100));return de.description.replace("{effect}",Le)},P=ae=>{const de=i.value.find(it=>it.id===ae);if(!de)return"";const Me=R(ae),Le=Lt(Me.div(100));return de.description.replace("{effect}",Le)},I=ae=>i.value.filter(de=>de.aphidType===ae),D=(ae,de)=>{const Me=ip[ae];if(!Me)return l(0);let Le=Me.baseYield.mul(l(1).add(l(de-1).mul(.5)));if(ae==="greenleaf"){const Ze=T("greenleaf-yield");Ze.gt(0)&&(Le=Le.mul(l(1).add(Ze.div(100))))}else if(ae==="bubbleback"){const Ze=T("bubbleback-efficiency");Ze.gt(0)&&(Le=Le.mul(l(1).add(Ze.mul(de).div(100))));const pt=T("bubbleback-quality");pt.gt(0)&&(Le=Le.mul(l(1).add(pt.div(100))))}else if(ae==="fungal"){const Ze=T("fungal-fields");if(Ze.gt(0)){const ft=n.value.length;Le=Le.mul(l(1).add(Ze.mul(ft).div(100)))}const pt=T("fungal-symbiosis");if(pt.gt(0)){const ft=n.value.filter(Ve=>Ve.type==="fungal"&&!Ve.isHarvestable).length;ft>0&&(Le=Le.mul(l(1).add(pt.mul(ft).div(100))))}}else if(ae==="golden"){const Ze=T("golden-shine");Ze.gt(0)&&Math.random()*100<Ze.toNumber()&&(Le=Le.mul(2))}else if(ae==="pheromelion"){const Ze=T("pheromelion-potency");Ze.gt(0)&&(Le=Le.mul(l(1).add(Ze.div(100))))}const it=t.getAphidYieldMultiplier();return Le=Le.mul(it),Le},U=ae=>{const de=ip[ae];if(!de)return 0;let Me=de.growthTime;if(ae==="greenleaf"){const Ze=T("greenleaf-growth");Ze.gt(0)&&(Me*=l(1).sub(Ze.div(100)).toNumber())}else if(ae==="golden"){const Ze=T("golden-efficiency");Ze.gt(0)&&(Me*=l(1).sub(Ze.div(100)).toNumber())}else if(ae==="fungal"){const Ze=T("fungal-growth");Ze.gt(0)&&(Me*=l(1).sub(Ze.div(100)).toNumber())}const Le=T("pheromelion-catalyst");Le.gt(0)&&n.value.some(pt=>pt.type==="pheromelion")&&(Me*=l(1).sub(Le.div(100)).toNumber());const it=t.getAphidGrowthMultiplier();return Me*=it.toNumber(),Math.max(1,Math.floor(Me))},M=()=>{const ae=n.value.length;if(ae<=3)return l(5e3);let de=l(5e3).mul(l(5).pow(ae-3));const Me=t.getNewFieldCostMultiplier();return de=de.mul(Me),de},x=()=>{const ae=M();return e.value.gte(ae)},$=()=>{const ae=M();if(e.value.lt(ae))return!1;e.value=e.value.sub(ae);const de=`field${n.value.length+1}`;return n.value.push({id:de,type:null,level:1,progress:0,isHarvestable:!1,hasAutoFarming:!1,autoFarmingEnabled:!1,preferredAphidType:null}),!0},Z=()=>{n.value.length===0&&f()},me=ae=>{if(r.value.has(ae))return!0;const de=ip[ae];return de&&e.value.gte(de.unlockCost)?(e.value=e.value.sub(de.unlockCost),r.value.add(ae),!0):!1},re=(ae,de)=>{if(!r.value.has(de))return!1;const Me=n.value.findIndex(Le=>Le.id===ae);return Me===-1?!1:(n.value[Me].type=de,n.value[Me].progress=0,n.value[Me].isHarvestable=!1,!0)},J=ae=>{const de=n.value.findIndex(Ze=>Ze.id===ae);if(de===-1||!n.value[de].isHarvestable)return l(0);const Me=n.value[de];if(!Me.type)return l(0);let Le=D(Me.type,Me.level);const it=se(ae);if(Le=Le.mul(it),Me.type==="greenleaf"){const Ze=T("greenleaf-doubler");Ze.gt(0)&&Math.random()*100<Ze.toNumber()&&(Le=Le.mul(2))}if(Me.type==="bubbleback"){const Ze=T("bubbleback-burst");Ze.gt(0)&&(Le=Le.mul(l(1).add(Ze.div(100))))}return e.value=e.value.add(Le),s.value=s.value.add(Le),Me.progress=0,Me.isHarvestable=!1,Me.type=null,Le},le=ae=>{const de=n.value.findIndex(Le=>Le.id===ae);return de===-1?[]:[de-1,de+1].filter(Le=>Le>=0&&Le<n.value.length).map(Le=>n.value[Le].id)},se=ae=>{const de=T("golden-aura");if(de.lte(0))return l(1);const Me=le(ae);let Le=0;for(const it of Me){const Ze=n.value.find(pt=>pt.id===it);Ze&&Ze.type==="golden"&&Le++}return Le===0?l(1):l(1).add(l(de).mul(Le).div(100))},z=ae=>{const de=n.value.findIndex(it=>it.id===ae);if(de===-1)return!1;const Me=n.value[de],Le=ce(Me);return e.value.gte(Le)?(e.value=e.value.sub(Le),Me.level+=1,!0):!1},ce=ae=>{const de=n.value.findIndex(Me=>Me.id===ae.id);return l(100).mul(l(1.5).pow(ae.level-1)).mul(l(de+1))},pe=ae=>{const de=n.value.findIndex(Me=>Me.id===ae);return de===-1?l(0):l(1e4).mul(l(de+1).pow(1.2))},_e=ae=>{const de=n.value.find(Le=>Le.id===ae);if(!de||de.hasAutoFarming||de.level<10)return!1;const Me=pe(ae);return e.value.gte(Me)},Ee=ae=>{const de=n.value.find(Le=>Le.id===ae);if(!de||de.hasAutoFarming||de.level<10)return!1;const Me=pe(ae);return e.value.lt(Me)?!1:(e.value=e.value.sub(Me),de.hasAutoFarming=!0,de.autoFarmingEnabled=!0,!0)},Ue=(ae,de=null)=>{const Me=n.value.find(Le=>Le.id===ae);return!Me||!Me.hasAutoFarming?!1:(Me.autoFarmingEnabled=!Me.autoFarmingEnabled,de&&r.value.has(de)?Me.preferredAphidType=de:!Me.preferredAphidType&&Me.type?Me.preferredAphidType=Me.type:Me.preferredAphidType||(Me.preferredAphidType=Array.from(r.value)[0]),!0)},ze=(ae,de)=>{const Me=n.value.find(Le=>Le.id===ae);return!Me||!Me.hasAutoFarming||!r.value.has(de)?!1:(Me.preferredAphidType=de,!0)},Re=(ae=1)=>{if(p.value)for(const de of n.value){if(de.hasAutoFarming&&de.autoFarmingEnabled&&de.preferredAphidType){if(de.isHarvestable&&de.type){let Me=D(de.type,de.level);const Le=se(de.id);Me=Me.mul(Le),e.value=e.value.add(Me),s.value=s.value.add(Me),de.progress=0,de.isHarvestable=!1,de.type=null}de.type||(de.type=de.preferredAphidType,de.progress=0,de.isHarvestable=!1)}if(de.type&&!de.isHarvestable){const Me=U(de.type);de.progress+=1/Me*ae,de.progress>=1&&(de.progress=1,de.isHarvestable=!0)}}},$e=ae=>{const de=n.value.find(Me=>Me.id===ae);return!de||!de.type?0:Math.floor(de.progress*100)},Ce=ae=>{const de=n.value.find(Me=>Me.id===ae);return de?ce(de):l(0)},Oe=ae=>{const de=Ce(ae);return e.value.gte(de)},ve=ae=>d.value[ae]||0,fe=ae=>{const de=u.value.find(Le=>Le.id===ae);if(!de)return l(0);const Me=ve(ae);return Me>=de.maxLevel?l(0):de.baseCost.mul(l(de.costScaling).pow(Me))},X=ae=>{const de=u.value.find(it=>it.id===ae);if(!de||ve(ae)>=de.maxLevel)return!1;if(ae.endsWith("-2")){const it=ae.replace("-2",""),Ze=u.value.find(ft=>ft.id===it);if(!Ze||ve(it)<Ze.maxLevel)return!1}const Le=fe(ae);return e.value.gte(Le)},H=ae=>{if(!X(ae))return!1;const de=fe(ae);e.value=e.value.sub(de);const Me=ve(ae);return d.value[ae]=Me+1,!0},W=ae=>{const de=u.value.find(Le=>Le.id===ae);if(!de)return l(1);const Me=ve(ae);return de.getEffect(Me)},ge=ae=>{const de=u.value.find(it=>it.id===ae);if(!de)return l(1);const Me=ve(ae);if(Me>=de.maxLevel)return W(ae);const Le=Me+1;return de.getEffect(Le)},Te=ae=>{const de=u.value.find(it=>it.id===ae);if(!de)return"";const Me=W(ae),Le=de.formatEffect(Me);return de.description.replace("{effect}",Le)},Ie=ae=>{const de=u.value.find(it=>it.id===ae);if(!de)return"";const Me=ge(ae),Le=de.formatEffect(Me);return de.description.replace("{effect}",Le)},Ne=ae=>{ae.honeydew&&(e.value=l(ae.honeydew)),ae.totalHoneydewEarned?s.value=l(ae.totalHoneydewEarned):s.value=l(ae.honeydew||0),ae.fields&&Array.isArray(ae.fields)?n.value=ae.fields.map(de=>"hasAutoFarming"in de&&"autoFarmingEnabled"in de&&"preferredAphidType"in de?de:{...de,hasAutoFarming:!1,autoFarmingEnabled:!1,preferredAphidType:null}):f(),ae.unlockedAphidTypes&&Array.isArray(ae.unlockedAphidTypes)&&(r.value=new Set(ae.unlockedAphidTypes)),o.value=ae.selectedAphidType??"greenleaf",je.value=ae.hasPlantAllUnlocked??!1,N.value=ae.hasHarvestAllUnlocked??!1,ae.upgradesPurchased&&typeof ae.upgradesPurchased=="object"?(c.value=ae.upgradesPurchased,"golden-aura"in c.value||(c.value["golden-aura"]=0),"golden-shine"in c.value||(c.value["golden-shine"]=0)):c.value={},d.value=ae.globalUpgradesPurchased??{},m.value=ae.hasBugHoneydewDropUpgrade??!1},je=Y(!1),N=Y(!1),ue=()=>l(5e3),j=()=>l(7500),B=()=>je.value?!1:e.value.gte(ue()),ie=()=>N.value?!1:e.value.gte(j()),V=()=>{if(je.value)return!0;const ae=ue();return e.value.lt(ae)?!1:(e.value=e.value.sub(ae),je.value=!0,!0)},O=()=>{if(N.value)return!0;const ae=j();return e.value.lt(ae)?!1:(e.value=e.value.sub(ae),N.value=!0,!0)},te=()=>({honeydew:e.value.toString(),totalHoneydewEarned:s.value.toString(),fields:n.value,unlockedAphidTypes:Array.from(r.value),hasPlantAllUnlocked:je.value,hasHarvestAllUnlocked:N.value,selectedAphidType:o.value,upgradesPurchased:c.value,globalUpgradesPurchased:d.value,hasBugHoneydewDropUpgrade:m.value}),G=ae=>{const de=i.value.find(it=>it.id===ae);if(!de)return{exists:!1};const Me=E(ae),Le=Me>0?de.effect(Me):0;return{exists:!0,id:ae,name:de.name,description:de.description,aphidType:de.aphidType,level:Me,maxLevel:de.maxLevel,effect:Le,cost:Me<de.maxLevel?k(ae).toString():"MAX"}},ne=()=>l(1e3),he=q(()=>!m.value&&e.value.gte(ne()));return{honeydew:e,totalHoneydew:C,totalHoneydewEarned:s,fields:n,unlockedAphidTypes:r,hasPlantAllUnlocked:je,hasHarvestAllUnlocked:N,selectedAphidType:o,aphidUpgrades:i,upgradesPurchased:c,hasBugHoneydewDropUpgrade:m,APHID_TYPES:ip,activeFields:g,totalFieldLevel:w,featureUnlocked:p,unlockAphidFarm:Z,unlockAphidType:me,plantAphid:re,harvestField:J,upgradeField:z,buyNewField:$,update:Re,purchaseAutoFarming:Ee,toggleAutoFarming:Ue,setPreferredAphidType:ze,unlockPlantAll:V,unlockHarvestAll:O,purchaseUpgrade:S,purchaseBugHoneydewDropUpgrade:()=>{if(!he.value||m.value)return!1;const ae=ne();return e.value=e.value.sub(ae),m.value=!0,!0},getAphidYield:D,getAphidGrowthTime:U,getFieldProgressPercentage:$e,getFieldUpgradeCost:Ce,canUpgradeField:Oe,calculateNewFieldCost:M,canBuyNewField:x,calculateAutoFarmingCost:pe,canPurchaseAutoFarming:_e,calculatePlantAllCost:ue,calculateHarvestAllCost:j,canUnlockPlantAll:B,canUnlockHarvestAll:ie,getUpgradeLevel:E,calculateUpgradeCost:k,canPurchaseUpgrade:A,getUpgradeEffect:T,getUpgradeDescription:L,getNextLevelUpgradeEffect:R,getNextLevelUpgradeDescription:P,getUpgradesForAphid:I,getAdjacentFieldIds:le,getGoldenAuraMultiplier:se,calculateBugHoneydewDropUpgradeCost:ne,canPurchaseBugHoneydewDropUpgrade:he,getState:te,loadState:Ne,globalUpgrades:u,globalUpgradesPurchased:d,getGlobalUpgradeLevel:ve,calculateGlobalUpgradeCost:fe,canPurchaseGlobalUpgrade:X,purchaseGlobalUpgrade:H,getGlobalUpgradeEffect:W,getGlobalUpgradeDescription:Te,getNextLevelGlobalUpgradeEffect:ge,getNextLevelGlobalUpgradeDescription:Ie,getUpgradeStatus:G}}),Fr=Es("neurotrails",()=>{const t=Y(i7),e=10,s=q(()=>{const z=St().evolutionUpgrades.filter(_e=>_e.level.gt(0)&&_e.appliesTo.includes("neurotrail_steps"));let ce=0,pe=new Se(1);return z.forEach(_e=>{_e.isAdditive?ce+=_e.effect(_e.level).toNumber()-1:pe=pe.mul(_e.effect(_e.level))}),o.value.neurotrail_steps&&(pe=pe.mul(o.value.neurotrail_steps)),Math.round((e+ce)*pe.toNumber())}),n=q(()=>Ht().getGeneratorCount("colony").gt(0)),r=Y({x:0,y:0,moving:!1,targetNodeId:null,stepsRemaining:0,atNode:!0,currentNodeId:"queens_core",timeAtNode:0,path:[]}),o=Y({}),i=q(()=>o.value),c=Y({}),u=q(()=>r.value.currentNodeId&&t.value.find(se=>se.id===r.value.currentNodeId)||null),d=q(()=>r.value.targetNodeId&&t.value.find(se=>se.id===r.value.targetNodeId)||null),m=q(()=>r.value.currentNodeId==="queens_core"&&!r.value.moving);function f(se){if(!c.value[se]||c.value[se].length===0)return new Se(1);let z=new Se(1);for(const ce of c.value[se])z=z.add(ce.boostValue.sub(1));return z}function p(se){return o.value[se]?o.value[se]:new Se(1)}function g(){for(const se in c.value){const z=se;o.value[z]=f(z)}}function w(se,z,ce){c.value[z]||(c.value[z]=[]),c.value[z].push({nodeId:se,boostValue:ce}),g()}function C(se,z){const ce=new Set,pe=[{nodeId:se,path:[se]}];for(;pe.length>0;){const{nodeId:_e,path:Ee}=pe.shift();if(_e===z)return Ee;if(ce.has(_e))continue;ce.add(_e);const Ue=t.value.find(ze=>ze.id===_e);if(Ue)for(const ze of Ue.connectedTo)t.value.find($e=>$e.id===ze)&&pe.push({nodeId:ze,path:[...Ee,ze]})}return null}function E(se,z){const ce=t.value.find(_e=>_e.id===se);if(!ce)return 0;const pe=ce.connections.find(_e=>_e.nodeId===z);return pe?pe.distance:(console.warn(`No connection distance found from ${se} to ${z}`),ce.distance||1e4)}function k(se,z=!1){if(!t.value.find(ve=>ve.id===se)||se===r.value.currentNodeId&&r.value.atNode)return!1;const pe=r.value.moving;!pe&&r.value.atNode&&u.value&&u.value.id!=="queens_core"&&re();const _e=z?[...r.value.path]:[];let Ee;pe?(Ee=A(),z||(r.value.path=[],r.value.currentNodeId=null)):Ee=r.value.currentNodeId||"queens_core";let Ue=null;if(z?Ue=_e:Ue=C(Ee,se),!Ue)return console.warn(`No valid path from ${Ee} to ${se}`),!1;r.value.path=Ue;const ze=z?Math.max(0,Ue.findIndex(ve=>ve===r.value.currentNodeId))+1:1;if(ze>=Ue.length)return wn.debug("No next node in the path"),!1;const Re=Ue[ze],$e=t.value.find(ve=>ve.id===Re);if(!$e)return!1;const Ce=t.value.find(ve=>ve.id===Ee);if(!Ce)return!1;let Oe;if(r.value.moving){const ve=$e.position.x-r.value.x,fe=$e.position.y-r.value.y;Oe=Math.sqrt(ve*ve+fe*fe)}else Oe=E(Ee,Re),r.value.x=Ce.position.x,r.value.y=Ce.position.y;return r.value.moving=!0,r.value.targetNodeId=Re,r.value.stepsRemaining=Oe,r.value.atNode=!1,r.value.timeAtNode=0,r.value._initialSteps=Oe,pe||(r.value.currentNodeId=null),!0}function A(){if(r.value.atNode&&r.value.currentNodeId)return r.value.currentNodeId;if(r.value.moving&&r.value.currentNodeId==="queens_core"&&r.value.path&&r.value.path.length>=2)return r.value.path[0];let se="queens_core",z=Number.MAX_VALUE;for(const ce of t.value){if(!ce)continue;const pe=ce.position.x-r.value.x,_e=ce.position.y-r.value.y,Ee=Math.sqrt(pe*pe+_e*_e);Ee<z&&(z=Ee,se=ce.id)}return se}function S(se=1){if(n.value)for(let z=0;z<se;z++)r.value.moving?r.value.stepsRemaining<=0?R():T():r.value.atNode&&r.value.currentNodeId&&R()}function T(){if(!r.value.moving||!d.value)return;const se=r.value.path[0],z=t.value.find(Ee=>Ee.id===se);if(!z)return;(r.value._initialSteps===void 0||r.value._initialSteps<=0)&&(r.value._initialSteps=Math.max(r.value.stepsRemaining,1),wn.debug(`Setting initialSteps to ${r.value._initialSteps}`));const ce=s.value;r.value.stepsRemaining-=ce,r.value.stepsRemaining<0&&(r.value.stepsRemaining=0);const pe=Math.max(r.value._initialSteps,1),_e=Math.min(1,Math.max(0,1-r.value.stepsRemaining/pe));r.value.x=z.position.x+(d.value.position.x-z.position.x)*_e,r.value.y=z.position.y+(d.value.position.y-z.position.y)*_e}function R(){if(!d.value)return;r.value.x=d.value.position.x,r.value.y=d.value.position.y,r.value.moving=!1,r.value.atNode=!0,r.value.currentNodeId=d.value.id,r.value.stepsRemaining=0,r.value._initialSteps=void 0,r.value._initialHomeDistance=void 0,r.value._startX=void 0,r.value._startY=void 0;const se=t.value.find(z=>z.id===r.value.currentNodeId);if(se&&(se.visited=!0,se.tasks&&se.tasks.forEach(z=>{!z.completed&&x(z)&&Z(se.id,z.id)})),r.value.path.length>0&&r.value.path[r.value.path.length-1]===r.value.currentNodeId)r.value.path=[],r.value.targetNodeId=null;else if(r.value.path.length>0){const z=r.value.path.findIndex(ce=>ce===r.value.currentNodeId);if(z>=0&&z<r.value.path.length-1){const ce=r.value.path[z+1];k(ce,!0)}}else r.value.targetNodeId=null}function L(){return r.value.currentNodeId==="queens_core"&&!r.value.moving?(wn.debug("Already at Queen's Core, not returning home"),!1):r.value.moving&&r.value.path.length>0&&r.value.path[r.value.path.length-1]==="queens_core"?(wn.debug("Already returning to Queen's Core"),!1):(r.value.atNode&&u.value&&u.value.id!=="queens_core"&&re(),r.value.moving&&A(),k("queens_core"))}function P(){if(!r.value.moving)return wn.debug("Cannot cancel trip: player is not moving"),!1;const se=r.value.path[0];if(!se)return wn.debug("Cannot cancel trip: no starting node found in path"),!1;const z=t.value.find(ce=>ce.id===se);return z?(r.value.x=z.position.x,r.value.y=z.position.y,r.value.moving=!1,r.value.atNode=!0,r.value.currentNodeId=se,r.value.targetNodeId=null,r.value.stepsRemaining=0,r.value.path=[],r.value._initialSteps=void 0,r.value._initialHomeDistance=void 0,r.value._startX=void 0,r.value._startY=void 0,wn.debug(`Trip cancelled: teleported back to ${z.name}`),!0):(wn.debug(`Cannot cancel trip: starting node ${se} not found`),!1)}function I(){r.value={x:0,y:0,moving:!1,targetNodeId:null,stepsRemaining:0,atNode:!0,currentNodeId:"queens_core",timeAtNode:0,path:[]},o.value={},t.value.forEach(se=>{se.id==="queens_core"?se.visited=!0:(se.visited=!1,se.tasks&&se.tasks.forEach(z=>{z.completed=!1}))}),re()}function D(se){if(!se||se.length<2)return 0;let z=0;for(let ce=0;ce<se.length-1;ce++){const pe=se[ce],_e=se[ce+1];z+=E(pe,_e)}return z}function U(se){const z=r.value.currentNodeId||"queens_core";return C(z,se)}function M(se){const z=U(se);return z?D(z):0}function x(se){if(se.completed)return!1;const z=Ht(),ce=St(),pe=Ks(),_e=Ls(),Ee=kn(),Ue=typeof se.requiredAmount=="string"?new Se(se.requiredAmount):se.requiredAmount;switch(se.type){case"collect_food":return z.food.gte(Ue);case"collect_evolution_points":return ce.evolutionPoints.gte(Ue);case"collect_pheromone":return pe.pheromoneEssence.gte(Ue);case"collect_honeydew":return _e.totalHoneydew.gte(Ue);case"kill_bugs":return se.target?new Se(Ee.getBugKillCount(se.target)).gte(Ue):new Se(Ee.getTotalBugKills()).gte(Ue);default:return!1}}function $(se){if(se.completed)return 100;const z=Ht(),ce=St(),pe=Ks(),_e=Ls(),Ee=kn(),Ue=typeof se.requiredAmount=="string"?new Se(se.requiredAmount):se.requiredAmount;let ze;switch(se.type){case"collect_food":ze=z.food;break;case"collect_evolution_points":ze=ce.evolutionPoints;break;case"collect_pheromone":ze=pe.pheromoneEssence;break;case"collect_honeydew":ze=_e.totalHoneydew;break;case"kill_bugs":se.target?ze=new Se(Ee.getBugKillCount(se.target)):ze=new Se(Ee.getTotalBugKills());break;default:return 0}return Ue.eq(0)?100:Math.min(100,ze.div(Ue).mul(100).toNumber())}function Z(se,z){if(r.value.currentNodeId!==se||!r.value.atNode)return wn.debug(`Cannot complete task - not at node ${se}`),!1;const ce=t.value.find($e=>$e.id===se);if(!ce||!ce.tasks)return wn.debug(`Node ${se} not found or has no tasks`),!1;const pe=ce.tasks.find($e=>$e.id===z);if(!pe)return wn.debug(`Task ${z} not found in node ${se}`),!1;if(pe.completed)return wn.debug(`Task ${z} is already completed`),!1;if(!x(pe))return wn.debug(`Cannot complete task ${z} - requirements not met`),!1;pe.completed=!0;const _e=typeof pe.reward.value=="string"?new Se(pe.reward.value):pe.reward.value;w(se,pe.reward.appliesTo,_e),wn.debug(`Task ${z} completed - added boost ${_e} to ${pe.reward.appliesTo}`);const Ee=Ht(),Ue=St(),ze=Ks(),Re=typeof pe.requiredAmount=="string"?new Se(pe.requiredAmount):pe.requiredAmount;switch(pe.type){case"collect_food":Ee.food=Ee.food.sub(Re);break;case"collect_evolution_points":Ue.evolutionPoints=Ue.evolutionPoints.sub(Re);break;case"collect_pheromone":ze.spendPheromoneEssence(Re);break}return!0}function me(se,z){const ce=t.value.find(Ee=>Ee.id===se);if(!ce||!ce.tasks)return new Se(1);const pe=ce.tasks.filter(Ee=>Ee.completed&&Ee.reward.appliesTo===z);let _e=new Se(1);for(const Ee of pe){const Ue=typeof Ee.reward.value=="string"?new Se(Ee.reward.value):Ee.reward.value;_e=_e.add(Ue.sub(1))}return _e}function re(){c.value={},t.value.forEach(se=>{if(!se.tasks)return;se.tasks.filter(ce=>ce.completed).forEach(ce=>{const pe=typeof ce.reward.value=="string"?new Se(ce.reward.value):ce.reward.value;w(se.id,ce.reward.appliesTo,pe)})}),g()}return{nodes:t,playerPosition:r,currentNode:u,targetNode:d,isAtHome:m,stepsPerTick:s,currentBoost:i,activeBoosts:o,selectDestination:se=>k(se,!1),tick:S,returnHome:L,cancelTrip:P,getPathToDestination:U,getDistanceToDestination:M,resetNeurotrails:I,featureUnlocked:n,completeTask:Z,canCompleteTask:x,getTaskProgressPercentage:$,getState:()=>({nodes:t.value.map(se=>({id:se.id,visited:se.visited,tasks:se.tasks?se.tasks.map(z=>({id:z.id,completed:z.completed})):void 0})),playerPosition:{x:r.value.x,y:r.value.y,moving:r.value.moving,targetNodeId:r.value.targetNodeId,stepsRemaining:r.value.stepsRemaining,atNode:r.value.atNode,currentNodeId:r.value.currentNodeId,timeAtNode:r.value.timeAtNode,path:r.value.path,_initialSteps:r.value._initialSteps,_initialHomeDistance:r.value._initialHomeDistance,_startX:r.value._startX,_startY:r.value._startY}}),loadState:se=>{se.nodes&&Array.isArray(se.nodes)&&se.nodes.forEach(z=>{const ce=t.value.find(pe=>pe.id===z.id);ce&&(ce.visited=z.visited,z.tasks&&ce.tasks&&z.tasks.forEach(pe=>{var Ee;const _e=(Ee=ce.tasks)==null?void 0:Ee.find(Ue=>Ue.id===pe.id);_e&&(_e.completed=pe.completed)}))}),se.playerPosition&&(r.value={x:se.playerPosition.x??0,y:se.playerPosition.y??0,moving:se.playerPosition.moving??!1,targetNodeId:se.playerPosition.targetNodeId??null,stepsRemaining:se.playerPosition.stepsRemaining??0,atNode:se.playerPosition.atNode??!0,currentNodeId:se.playerPosition.currentNodeId??"queens_core",timeAtNode:se.playerPosition.timeAtNode??0,path:se.playerPosition.path??[],_initialSteps:se.playerPosition._initialSteps,_initialHomeDistance:se.playerPosition._initialHomeDistance,_startX:se.playerPosition._startX,_startY:se.playerPosition._startY}),re()},getNodeContributions:se=>c.value[se]||[],getBoostMultiplier:p,getNodeTotalBoost:me}});var Tn=(t=>(t.STOMACH_CAPACITY="stomachCapacity",t.DECAY_RATE="decayRate",t.EFFICIENCY="efficiency",t.PHEROMONE_STOMACH_CAPACITY="pheromoneStomachCapacity",t.PHEROMONE_DECAY_RATE="pheromoneDecayRate",t.PHEROMONE_EFFICIENCY="pheromoneEfficiency",t))(Tn||{}),xr=(t=>(t.EP_BOOST="epBoost",t.PHEROMONE_BOOST="pheromoneBoost",t.GLOBAL_PRODUCTION="globalProduction",t))(xr||{});const a7=t=>typeof t=="boolean"?t?"Unlocked":"Locked":`${t.toFixed(2)}x multiplier`,l7=t=>typeof t=="boolean"&&t?"Unlocked":"Locked",c7=t=>typeof t=="boolean"?t?"Unlocked":"Locked":`+${t} units`,cs=(t,e,s)=>{let n="";switch(s==="multiplicative_increase"?n=a7(e):s==="additive"?n=c7(e):s==="unlock"&&(n=l7(e)),t){case"megaAntXpGain":return`${n} to Mega Ant XP gain`;case"colonyXpGain":return`${n} to Colony XP gain`;case"baseStomachCapacity":return`${n} to Mega Ant stomach capacity`;case"pheromoneStomachCapacity":return`${n} to pheromone stomach capacity`;case"decayRate":return`${n} to food digestion rate`;case"pheromoneDecayRate":return`${n} to pheromone digestion rate`;case"megaAntEfficiency":return`${n} to food XP conversion efficiency`;case"pheromoneEfficiency":return`${n} to pheromone XP conversion efficiency`;case"colonyUpgradePower":return`${n} to all Colony upgrade effects`;case"epGain":return`${n} to all Evolution Point gains`;case"pheromoneGain":return`${n} to all Pheromone Essence gains`;case"globalProduction":return`${n} to all resource production`;case"upgradeCostReduction":return`${n} to all upgrade costs`;case"offlineProgressRate":return`${n} to offline progress speed`;case"worker":return`${n} to Worker Ant production`;case"nursery":return`${n} to Nursery production`;case"queenChamber":return`${n} to Queen Chamber production`;case"colony":return`${n} to Colony production`;case"megacolony":return`${n} to Mega Colony production`;case"hivemind":return`${n} to Hive Mind production`;case"antopolis":return`${n} to Antopolis production`;case"alateHatchery":return`${n} to Alate Hatchery production`;default:return n}},Ja=[{id:"core_potential",name:"Ascension Potential",description:"The foundation of your ascension journey, unlocking the ability to harness Ascension Power.",cost:0,prerequisites:[],effects:[{target:"unlockAscensionTree",effectMethod:"unlock",value:!0,formatEffect:t=>cs("unlockAscensionTree",t,"unlock")}],category:"core",icon:"i-heroicons-star",position:{row:1,col:3}},{id:"mega_ant_path",name:"Mega Ant Evolution",description:"Begin the path of enhancing your Mega Ant's capabilities.",cost:1,prerequisites:["core_potential"],effects:[{target:"megaAntXpGain",effectMethod:"multiplicative_increase",value:1.25,formatEffect:t=>cs("megaAntXpGain",t,"multiplicative_increase"),category:"megaAnt"}],category:"megaAnt",icon:"i-mdi-bug",position:{row:2,col:2}},{id:"colony_path",name:"Colony Enhancement",description:"Begin the path of enhancing your Colony's capabilities.",cost:1,prerequisites:["core_potential"],effects:[{target:"colonyXpGain",effectMethod:"multiplicative_increase",value:1.25,formatEffect:t=>cs("colonyXpGain",t,"multiplicative_increase"),category:"colony"}],category:"colony",icon:"i-mdi-antenna",position:{row:2,col:4}},{id:"enhanced_digestion",name:"Enhanced Digestion",description:"Permanently increases the base stomach capacity of your Mega Ant.",cost:2,prerequisites:["mega_ant_path"],effects:[{target:"baseStomachCapacity",effectMethod:"additive",value:200,formatEffect:t=>cs("baseStomachCapacity",t,"additive"),category:"megaAnt"}],category:"megaAnt",icon:"i-mdi-stomach",position:{row:3,col:1}},{id:"efficient_metabolism",name:"Efficient Metabolism",description:"Permanently increases the efficiency of converting food to experience.",cost:3,prerequisites:["mega_ant_path"],effects:[{target:"megaAntEfficiency",effectMethod:"multiplicative_increase",value:3,formatEffect:t=>cs("megaAntEfficiency",t,"multiplicative_increase"),category:"megaAnt"}],category:"megaAnt",icon:"i-mdi-speedometer",position:{row:3,col:2}},{id:"colony_synergy",name:"Colony Synergy",description:"Increases the effectiveness of all Colony upgrades.",cost:3,prerequisites:["colony_path"],effects:[{target:"colonyUpgradePower",effectMethod:"multiplicative_increase",value:2.5,formatEffect:t=>cs("colonyUpgradePower",t,"multiplicative_increase"),category:"colony"}],category:"colony",icon:"i-mdi-math-integral",position:{row:3,col:4}},{id:"pheromone_potency",name:"Pheromone Potency",description:"Enhances the potency of pheromones, increasing true stomach capacity.",cost:2,prerequisites:["colony_path"],effects:[{target:"pheromoneStomachCapacity",effectMethod:"additive",value:35,formatEffect:t=>cs("pheromoneStomachCapacity",t,"additive"),category:"colony"}],category:"colony",icon:"i-mdi-flask",position:{row:3,col:5}},{id:"worker_efficiency",name:"Worker Efficiency",description:"Massively enhances the production of all Worker Ants in your colony by 100x.",cost:3,prerequisites:["enhanced_digestion"],effects:[{target:"worker",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("worker",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-robot",position:{row:4,col:1}},{id:"resource_mastery",name:"Resource Mastery",description:"Combines Mega Ant and Colony knowledge to enhance resource production by 10x.",cost:5,prerequisites:["efficient_metabolism","colony_synergy"],effects:[{target:"globalProduction",effectMethod:"multiplicative_increase",value:10,formatEffect:t=>cs("globalProduction",t,"multiplicative_increase"),category:"resource"}],category:"resource",icon:"i-mdi-database",position:{row:4,col:3}},{id:"queen_chamber_boost",name:"Queen Chamber Enhancement",description:"Massively boosts the productivity of Queen Chambers by 100x.",cost:3,prerequisites:["pheromone_potency"],effects:[{target:"queenChamber",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("queenChamber",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-crown",position:{row:4,col:5}},{id:"nursery_boost",name:"Nursery Improvement",description:"Massively enhances the capabilities of your Nurseries to produce 100x more ants.",cost:5,prerequisites:["worker_efficiency"],effects:[{target:"nursery",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("nursery",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-baby-carriage",position:{row:5,col:1}},{id:"decay_perfection",name:"Digestive Perfection",description:"Significantly increases food decay rate for more efficient digestion.",cost:8,prerequisites:["enhanced_digestion","resource_mastery"],effects:[{target:"decayRate",effectMethod:"multiplicative_increase",value:5,formatEffect:t=>cs("decayRate",t,"multiplicative_increase"),category:"megaAnt"}],category:"megaAnt",icon:"i-mdi-timer-sand",position:{row:5,col:2}},{id:"evolution_catalyst",name:"Evolution Catalyst",description:"Increases all Evolution Point gains permanently.",cost:8,prerequisites:["resource_mastery","pheromone_potency"],effects:[{target:"epGain",effectMethod:"multiplicative_increase",value:5,formatEffect:t=>cs("epGain",t,"multiplicative_increase"),category:"resource"}],category:"resource",icon:"i-mdi-dna",position:{row:5,col:4}},{id:"advanced_colonies",name:"Advanced Colony Types",description:"Greatly enhances the production of more advanced colony structures.",cost:8,prerequisites:["queen_chamber_boost"],effects:[{target:"colony",effectMethod:"multiplicative_increase",value:50,formatEffect:t=>cs("colony",t,"multiplicative_increase"),category:"production"},{target:"megacolony",effectMethod:"multiplicative_increase",value:25,formatEffect:t=>cs("megacolony",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-city",position:{row:5,col:5}},{id:"intuitive_upgrading",name:"Intuitive Upgrading",description:"Reduces the cost of all Mega Ant and Colony upgrades.",cost:12,prerequisites:["decay_perfection"],effects:[{target:"upgradeCostReduction",effectMethod:"multiplicative_increase",value:.6,formatEffect:t=>cs("upgradeCostReduction",t,"multiplicative_increase"),category:"qol"}],category:"qol",icon:"i-mdi-currency-usd-off",position:{row:6,col:1}},{id:"perpetual_progress",name:"Perpetual Progress",description:"Increases your idle production even when offline.",cost:12,prerequisites:["evolution_catalyst"],effects:[{target:"offlineProgressRate",effectMethod:"multiplicative_increase",value:3,formatEffect:t=>cs("offlineProgressRate",t,"multiplicative_increase"),category:"qol"}],category:"qol",icon:"i-mdi-clock-time-eight",position:{row:6,col:5}},{id:"essence_harmony",name:"Essence Harmony",description:"Creates harmony between Mega Ant and Colony systems, empowering both simultaneously.",cost:15,prerequisites:["decay_perfection","evolution_catalyst"],effects:[{target:"pheromoneGain",effectMethod:"multiplicative_increase",value:4,formatEffect:t=>cs("pheromoneGain",t,"multiplicative_increase"),category:"resource"},{target:"megaAntEfficiency",effectMethod:"multiplicative_increase",value:3,formatEffect:t=>cs("megaAntEfficiency",t,"multiplicative_increase"),category:"megaAnt"},{target:"colonyEfficiency",effectMethod:"multiplicative_increase",value:3,formatEffect:t=>cs("colonyEfficiency",t,"multiplicative_increase"),category:"colony"}],category:"core",icon:"i-mdi-power",position:{row:6,col:3}},{id:"hivemind_connection",name:"Hivemind Connection",description:"Enhances the synergy between all colony structures, dramatically boosting Hivemind production.",cost:18,prerequisites:["advanced_colonies","essence_harmony"],effects:[{target:"hivemind",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("hivemind",t,"multiplicative_increase"),category:"production"},{target:"antopolis",effectMethod:"multiplicative_increase",value:50,formatEffect:t=>cs("antopolis",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-brain",position:{row:7,col:5}},{id:"alate_breeding",name:"Alate Breeding Program",description:"Massively enhances the productivity of Alate Hatcheries for royal ant production.",cost:18,prerequisites:["nursery_boost","essence_harmony"],effects:[{target:"alateHatchery",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("alateHatchery",t,"multiplicative_increase"),category:"production"}],category:"production",icon:"i-mdi-butterfly",position:{row:7,col:1}},{id:"ascended_potential",name:"Ascended Potential",description:"Unleashes the full potential of your ascended being, tremendously boosting all production.",cost:25,prerequisites:["essence_harmony","intuitive_upgrading","perpetual_progress"],effects:[{target:"globalProduction",effectMethod:"multiplicative_increase",value:100,formatEffect:t=>cs("globalProduction",t,"multiplicative_increase"),category:"core"},{target:"epGain",effectMethod:"multiplicative_increase",value:50,formatEffect:t=>cs("epGain",t,"multiplicative_increase"),category:"resource"},{target:"pheromoneGain",effectMethod:"multiplicative_increase",value:50,formatEffect:t=>cs("pheromoneGain",t,"multiplicative_increase"),category:"resource"}],category:"core",icon:"i-mdi-star-four-points",position:{row:7,col:3}},{id:"colony_transcendence",name:"Colony Transcendence",description:"The ultimate evolutionary leap - your colony transcends its physical limitations.",cost:50,prerequisites:["ascended_potential","hivemind_connection","alate_breeding"],effects:[{target:"globalProduction",effectMethod:"multiplicative_increase",value:2e3,formatEffect:t=>cs("globalProduction",t,"multiplicative_increase"),category:"core"},{target:"epGain",effectMethod:"multiplicative_increase",value:200,formatEffect:t=>cs("epGain",t,"multiplicative_increase"),category:"resource"},{target:"pheromoneGain",effectMethod:"multiplicative_increase",value:200,formatEffect:t=>cs("pheromoneGain",t,"multiplicative_increase"),category:"resource"},{target:"offlineProgressRate",effectMethod:"multiplicative_increase",value:20,formatEffect:t=>cs("offlineProgressRate",t,"multiplicative_increase"),category:"qol"}],category:"core",icon:"i-mdi-creation",position:{row:8,col:3}}],Wt=Es("megaAnt",()=>{const t=St();Vn();const e=Qs(),s=Ht(),n=Ks();Fr();const r=Y(l(1)),o=Y(l(0)),i=Y(l(1)),c=Y(l(0)),u=Y(Date.now()),d=Y(0),m=Y(0),f=Y(0),p=Y(l(0)),g=Y(!0),w=Y(new Map(Ja.map(Pe=>[Pe.id,Pe]))),C=Y(new Set(["core_potential"])),E=Y(!0),k=Y(!0),A=Y(0),S=10,T=l(100),R=l(1),L=l(50),P=l(.5),I=Y(l(0)),D=Y(Date.now()),U=Y([]),M=Y(l(0)),x=Y(Date.now()),$=Y([]),Z=Y([{id:"stomachCapacity",name:"Digestive Capacity",description:"Increase the maximum amount of food and pheromone essence your Mega Ant can store in both stomachs.",baseValue:T,level:0,costPerLevel:1,getEffectValue:Pe=>T.add(l(Pe).mul(50))},{id:"decayRate",name:"Digestive Speed",description:"Increase how quickly your Mega Ant processes both food and pheromone essence.",baseValue:R,level:0,maxLevel:10,costPerLevel:1,getEffectValue:Pe=>R.add(l(Pe).mul(.4))},{id:"efficiency",name:"Digestive Efficiency",description:"Increase how much experience your Mega Ant gains from both food and pheromone essence digestion.",baseValue:l(1),level:0,costPerLevel:1,getEffectValue:Pe=>l(1).add(l(Pe).mul(.5))}]),me=Y([{id:"epBoost",name:"Ascension Synergy",description:"The colony's knowledge enhances your evolutionary progress, increasing EP gain. Each ascension increases the effectiveness of this upgrade by 20%.",target:"ep",level:0,costPerLevel:1,getMultiplier:Pe=>(1+Pe*.15)*(1+f.value*.2),formatEffect:Pe=>`${(Pe*100).toFixed(0)}% EP gain`},{id:"pheromoneBoost",name:"Pheromone Enhancement",description:"The colony specializes in pheromone production, increasing pheromone essence gain. Each ascension increases the effectiveness of this upgrade by 20%.",target:"pheromone",level:0,costPerLevel:1,getMultiplier:Pe=>(1+Pe*.25)*(1+f.value*.2),formatEffect:Pe=>`${(Pe*100).toFixed(0)}% pheromone gain`},{id:"globalProduction",name:"Colony Coordination",description:"The colony helps coordinate all ant activities, increasing global production. Each ascension increases the effectiveness of this upgrade by 20%.",target:"global",level:0,costPerLevel:1,getMultiplier:Pe=>(1+Pe*.15)*(1+f.value*.2),formatEffect:Pe=>`${(Pe*100).toFixed(0)}% global production`}]),re=q(()=>Math.max(0,r.value.toNumber()-1-d.value)),J=q(()=>Math.max(0,i.value.toNumber()-1-m.value)),le=Pe=>Z.value.find(He=>He.id===Pe),se=Pe=>me.value.find(He=>He.id===Pe),z=q(()=>{const Pe=le("stomachCapacity");return Pe?Pe.getEffectValue(Pe.level).div(Pe.baseValue):l(1)}),ce=q(()=>{const Pe=le("decayRate");return Pe?Pe.getEffectValue(Pe.level).div(Pe.baseValue):l(1)}),pe=q(()=>{const Pe=le("efficiency"),He=Pe?Pe.getEffectValue(Pe.level).div(Pe.baseValue):l(1),ht=hs("megaAntEfficiency");return He.mul(l(1).add(ht))}),_e=q(()=>{const Pe=le("stomachCapacity");if(!Pe)return l(1);const He=l(30);return L.add(l(Pe.level).mul(He)).div(L)}),Ee=q(()=>{const Pe=le("decayRate");if(!Pe)return l(1);const He=l(.3);return P.add(l(Pe.level).mul(He)).div(P)}),Ue=q(()=>pe.value),ze=Pe=>{const He=se(Pe);return!He||He.maxLevel&&He.level>=He.maxLevel||J.value<He.costPerLevel?!1:(He.level++,m.value+=He.costPerLevel,!0)},Re=Pe=>{const He=se(Pe);return He?He.maxLevel?He.level<He.maxLevel&&J.value>=He.costPerLevel:J.value>=He.costPerLevel:!1},$e=Pe=>{const He=se(Pe);return He&&He.maxLevel?He.level>=He.maxLevel:!1},Ce=Pe=>{let He=1;for(const ht of me.value)ht.target===Pe&&ht.level>0&&(He*=ht.getMultiplier(ht.level));return["global","ep","pheromone"].includes(Pe)&&f.value>0&&(He=l(He).mul(fe.value).toNumber()),He},Oe=Pe=>{const He=se(Pe);return He?He.formatEffect(He.getMultiplier(He.level)):"0%"},ve=q(()=>t.getUpgradeCount("unlockMegaAnt").gt(0)),fe=q(()=>l(1).add(l(f.value).mul(.25))),X=q(()=>l(100).mul(l(1.5).pow(r.value.minus(1)))),H=q(()=>l(75).mul(l(1.4).pow(i.value.minus(1)))),W=q(()=>o.value.gte(X.value)?100:o.value.div(X.value).mul(100).toNumber()),ge=q(()=>c.value.gte(H.value)?100:c.value.div(H.value).mul(100).toNumber()),Te=q(()=>{const Pe=hs("baseStomachCapacity");return T.add(Pe).mul(z.value)}),Ie=q(()=>{const Pe=hs("decayRate");return R.mul(ce.value).mul(Pe)}),Ne=q(()=>I.value.div(Te.value).mul(100).toNumber()),je=q(()=>I.value.gte(Te.value)),N=q(()=>{const Pe=hs("pheromoneStomachCapacity");return L.add(Pe).mul(_e.value)}),ue=q(()=>{const Pe=hs("pheromoneDecayRate"),He=hs("decayRate"),ht=Pe.gt(1)?Pe:He;return P.mul(Ee.value).mul(ht)}),j=q(()=>M.value.div(N.value).mul(100).toNumber()),B=q(()=>M.value.gte(N.value)),ie=Pe=>{if(!ve.value)return;const He=typeof Pe=="number"?l(Pe):Pe;o.value=o.value.plus(He),G(),u.value=Date.now()},V=Pe=>{if(!ve.value)return;const He=typeof Pe=="number"?l(Pe):Pe;c.value=c.value.plus(He),ne(),u.value=Date.now()},O=Pe=>{if(!ve.value)return{xpValue:l(0),foodConsumed:l(0)};if(Pe.lte(0))return{xpValue:l(0),foodConsumed:l(0)};Le();const He=Te.value.sub(I.value);if(He.lte(0))return{xpValue:l(0),foodConsumed:l(0)};const ht=Pe.toString(),vt=l(Math.max(1,Math.floor(Math.log10(parseFloat(ht))))),qt=He.min(vt);I.value=I.value.add(qt);let ns=vt.equals(qt)?Pe:l(10).pow(qt);return ns=ns.min(Pe),{xpValue:qt,foodConsumed:ns}},te=Pe=>{if(!ve.value)return{xpValue:l(0),essenceConsumed:l(0)};if(Pe.lte(0))return{xpValue:l(0),essenceConsumed:l(0)};it();const He=N.value.sub(M.value);if(He.lte(0))return{xpValue:l(0),essenceConsumed:l(0)};const ht=Pe.toString(),vt=l(Math.max(1,Math.floor(Math.log10(parseFloat(ht))))).mul(2),qt=He.min(vt);M.value=M.value.add(qt);let ns=vt.equals(qt)?Pe:l(10).pow(qt.div(2));return ns=ns.min(Pe),{xpValue:qt,essenceConsumed:ns}},G=()=>{for(;o.value.gte(X.value);)o.value=o.value.minus(X.value),r.value=r.value.plus(1)},ne=()=>{for(;c.value.gte(H.value);)c.value=c.value.minus(H.value),i.value=i.value.plus(1)},he=Pe=>{const He=le(Pe);return!He||He.maxLevel&&He.level>=He.maxLevel||re.value<He.costPerLevel?!1:(He.level++,d.value+=He.costPerLevel,!0)},ye=Pe=>{const He=le(Pe);return He?He.maxLevel?He.level<He.maxLevel&&re.value>=He.costPerLevel:re.value>=He.costPerLevel:!1},ae=Pe=>{const He=le(Pe);return He&&He.maxLevel?He.level>=He.maxLevel:!1},de=Pe=>{const He=le(Pe);return He?He.getEffectValue(He.level):l(0)},Me=Pe=>{const He=le(Pe);return!He||He.maxLevel&&He.level>=He.maxLevel?l(0):He.getEffectValue(He.level+1)},Le=(Pe=1)=>{const He=Date.now(),ht=l(He-D.value).div(1e3).mul(Pe);if(ht.lte(0)||I.value.lte(0)){D.value=He;return}const vt=I.value.min(Ie.value.mul(ht));I.value=I.value.sub(vt);const qt=vt.mul(pe.value).mul(fe.value);if(ie(qt),vt.gt(0)){const ns={timestamp:He,amount:vt,xpGained:qt};U.value.push(ns),U.value.length>10&&(U.value=U.value.slice(-10))}D.value=He},it=(Pe=1)=>{const He=Date.now(),ht=l(He-x.value).div(1e3).mul(Pe);if(ht.lte(0)||M.value.lte(0)){x.value=He;return}const vt=M.value.min(ue.value.mul(ht));M.value=M.value.sub(vt);const qt=vt.mul(Ue.value).mul(fe.value);if(V(qt),vt.gt(0)){const ns={timestamp:He,amount:vt,xpGained:qt};$.value.push(ns),$.value.length>10&&($.value=$.value.slice(-10))}x.value=He},Ze=()=>{ft.value&&(E.value=!E.value)},pt=()=>{ft.value&&(k.value=!k.value)},ft=q(()=>t.getUpgradeCount("unlockAutoFeed").gt(0)),Ve=()=>{if(!ve.value||!E.value||!ft.value||je.value||I.value.gt(0)||s.food.lte(100))return;const Pe=s.food.mul(.01),{xpValue:He,foodConsumed:ht}=O(Pe);ht.gt(0)&&(s.food=s.food.sub(ht))},ke=()=>{if(!ve.value||!k.value||!ft.value||B.value||M.value.gt(0)||n.pheromoneEssence.lte(0))return;const Pe=n.pheromoneEssence.mul(.01),{xpValue:He,essenceConsumed:ht}=te(Pe);ht.gt(0)&&(n.pheromoneEssence=n.pheromoneEssence.sub(ht))},Fe=(Pe=1)=>{if(!t.getUpgradeCount("unlockMegaAnt").gt(0))return;Le(Pe),it(Pe);const He=t.getUpgradeCount("unlockAutoFeed").gt(0);if(He||(E.value=!1,k.value=!1),A.value+=Pe,A.value>=S){const ht=Math.floor(A.value/S);for(let vt=0;vt<ht;vt++)E.value&&He&&Ve(),k.value&&He&&ke();A.value=A.value%S}},Ae=Pe=>{if(!t.getUpgradeCount("unlockMegaAnt").gt(0))return;const He=hs("offlineProgressRate"),ht=l(Pe).mul(He);if(ht.lte(0))return;const vt=Date.now();if(I.value.gt(0)&&Ie.value.gt(0)){const ns=I.value.div(Ie.value),bs=ht.min(ns),Ns=Ie.value.mul(bs);if(Ns.gt(0)){I.value=I.value.sub(Ns).max(0);const Zs=Ns.mul(pe.value).mul(fe.value);ie(Zs),U.value.push({timestamp:vt,amount:Ns,xpGained:Zs}),U.value.length>10&&(U.value=U.value.slice(-10))}}if(D.value+=ht.mul(1e3).toNumber(),M.value.gt(0)&&ue.value.gt(0)){const ns=M.value.div(ue.value),bs=ht.min(ns),Ns=ue.value.mul(bs);if(Ns.gt(0)){M.value=M.value.sub(Ns).max(0);const Zs=Ns.mul(Ue.value).mul(fe.value);V(Zs),$.value.push({timestamp:vt,amount:Ns,xpGained:Zs}),$.value.length>10&&($.value=$.value.slice(-10))}}if(x.value+=ht.mul(1e3).toNumber(),t.getUpgradeCount("unlockAutoFeed").gt(0)&&(E.value||k.value)&&Math.floor(ht.toNumber()/S)>0){if(E.value&&I.value.lte(0)&&!je.value&&s.food.gt(0)){const bs=s.food.mul(.01),{xpValue:Ns,foodConsumed:Zs}=O(bs);Zs.gt(0)&&(s.food=s.food.sub(Zs))}if(k.value&&M.value.lte(0)&&!B.value&&n.pheromoneEssence.gt(0)){const bs=n.pheromoneEssence.mul(.01),{xpValue:Ns,essenceConsumed:Zs}=te(bs);Zs.gt(0)&&(n.pheromoneEssence=n.pheromoneEssence.sub(Zs))}}u.value=vt+ht.mul(1e3).toNumber(),G(),ne()},We=(Pe=!1)=>{r.value=l(1),o.value=l(0),i.value=l(1),c.value=l(0),u.value=Date.now(),d.value=0,m.value=0,I.value=l(0),D.value=Date.now(),U.value=[],M.value=l(0),x.value=Date.now(),$.value=[],Pe||(Z.value.forEach(He=>{He.level=0}),me.value.forEach(He=>{He.level=0}))},nt=()=>{const Pe=Fr(),He=Pe.getState();r.value=l(1),o.value=l(0),I.value=l(0),d.value=0,i.value=l(1),c.value=l(0),m.value=0,M.value=l(0),t.resetForAscension(),Pe.loadState(He)},ot=Pe=>Pe<10?l(0):l(Math.floor(Math.sqrt(Pe-5)*4.5)),_t=Pe=>{const vt=l(3);let qt=Math.floor(Pe/5)*5+5;qt<10&&(Pe<10?(qt=Math.ceil(10/5)*5,qt=Math.max(qt,10)):qt=10);const ns=Math.max(0,qt-5),bs=ot(qt),Ns=vt.add(bs),Zs=ot(ns),Bf=vt.add(Zs),Vf=Ns.sub(Bf).max(0);return{level:qt,points:Ns,pointsIncrease:Vf}},Mt=()=>{const Pe=Mr.value,He=J1.length,ht=e.completedQuests.length,vt=He>0?ht/He*100:0;if(vt<Pe)return console.warn(`Cannot ascend: Not enough quests completed (${vt.toFixed(1)}% of ${Pe}% required)`),!1;const qt=l(3),ns=r.value.toNumber(),bs=ot(ns),Ns=qt.add(bs);p.value=p.value.add(Ns),f.value++;try{St().updateUpgradeMaxLevels(f.value)}catch(Zs){console.error("Failed to update max levels after ascension:",Zs)}return nt(),{ascensionCount:f.value,pointsGained:Ns}},ut=Pe=>{Pe!==void 0?g.value=Pe:g.value=!g.value},Kt=()=>Ja,Nt=Pe=>C.value.has(Pe),Xt=Pe=>{const He=Ja.find(ht=>ht.id===Pe);return He?p.value.gte(He.cost):!1},zt=Pe=>{const He=Ja.find(ht=>ht.id===Pe);return He?He.prerequisites.every(ht=>Nt(ht)):!1},mn=Pe=>Nt(Pe)?!1:Xt(Pe)&&zt(Pe),hs=Pe=>{let He=0,ht=1,vt=!1;for(const qt of C.value){const ns=Ja.find(bs=>bs.id===qt);if(ns)for(const bs of ns.effects)bs.target===Pe&&(bs.effectMethod==="additive"?He+=Number(bs.value):bs.effectMethod==="multiplicative_increase"?ht*=Number(bs.value):bs.effectMethod==="unlock"&&typeof bs.value=="boolean"&&(vt=vt||bs.value))}return Pe.includes("unlock")||Pe.includes("Unlock")?vt:l(He!==0?He:ht)},io=Pe=>{const He=Ja.find(ht=>ht.id===Pe);return He?Nt(Pe)?(console.log(`Ascension upgrade ${Pe} already purchased`),!1):Xt(Pe)?zt(Pe)?(p.value=p.value.sub(He.cost),C.value.add(Pe),!0):(console.warn(`Prerequisites not met for ascension upgrade ${Pe}`),!1):(console.warn(`Cannot afford ascension upgrade ${Pe}`),!1):(console.warn(`Ascension upgrade ${Pe} does not exist`),!1)},Ni=Pe=>{const He=Ja.find(ht=>ht.id===Pe);return He?He.effects:[]},rt=q(()=>hs("unlockMegaAntBulkBuy"));return{level:r,experience:o,colonyLevel:i,colonyExperience:c,lastUpdated:u,spentLevels:d,spentColonyLevels:m,ascensionCount:f,ascensionPoints:p,showHelpSection:g,autoFeedEnabled:E,autoFeedPheromoneEnabled:k,autoFeedTickCounter:A,AUTO_FEED_INTERVAL:S,stomachContent:I,lastDecayTime:D,decayLogs:U,pheromoneStomachContent:M,lastPheromoneDecayTime:x,pheromoneDecayLogs:$,upgrades:Z,colonyUpgrades:me,ascensionUpgradesMap:w,purchasedAscensionUpgrades:C,getAscensionUpgrades:Kt,hasAscensionUpgrade:Nt,canAffordAscensionUpgrade:Xt,areAscensionPrerequisitesMet:zt,canPurchaseAscensionUpgrade:mn,getAscensionEffectValue:hs,purchaseAscensionUpgrade:io,getAscensionUpgradeEffects:Ni,isBulkBuyUnlocked:rt,getUpgradeCostReduction:()=>hs("upgradeCostReduction")||l(0),getColonyUpgradePowerBoost:()=>hs("colonyUpgradePower")||l(1),getEpGainMultiplier:()=>hs("epGain")||l(1),getPheromoneGainMultiplier:()=>hs("pheromoneGain")||l(1),getGlobalProductionMultiplier:()=>hs("globalProduction")||l(1),availableLevels:re,availableColonyLevels:J,stomachCapacityMultiplier:z,decayRateMultiplier:ce,decayEfficiencyMultiplier:pe,pheromoneStomachCapacityMultiplier:_e,pheromoneDecayRateMultiplier:Ee,pheromoneEfficiencyMultiplier:Ue,effectiveStomachCapacity:Te,effectiveDecayRate:Ie,stomachFillPercentage:Ne,isStomachFull:je,effectivePheromoneStomachCapacity:N,effectivePheromoneDecayRate:ue,pheromoneStomachFillPercentage:j,isPheromoneStomachFull:B,isUnlocked:ve,isAutoFeedUnlocked:ft,ascensionMultiplier:fe,experienceForNextLevel:X,colonyExperienceForNextLevel:H,levelProgress:W,colonyLevelProgress:ge,getUpgrade:le,getColonyUpgrade:se,addExperience:ie,addColonyExperience:V,feedAnt:O,feedAntPheromone:te,checkLevelUp:G,checkColonyLevelUp:ne,purchaseUpgrade:he,canUpgrade:ye,isUpgradeMaxed:ae,getUpgradeEffectValue:de,getNextUpgradeEffectValue:Me,processDecay:Le,processPheromoneDecay:it,update:Fe,processOfflineProgress:Ae,resetUpgrades:We,reset:We,ascend:Mt,toggleHelpSection:ut,getState:()=>({level:r.value.toString(),experience:o.value.toString(),colonyLevel:i.value.toString(),colonyExperience:c.value.toString(),lastUpdated:u.value,spentLevels:d.value,spentColonyLevels:m.value,ascensionCount:f.value,ascensionPoints:p.value.toString(),purchasedAscensionUpgrades:Array.from(C.value),autoFeedEnabled:E.value,autoFeedPheromoneEnabled:k.value,autoFeedTickCounter:A.value,stomachContent:I.value.toString(),lastDecayTime:D.value,decayLogs:U.value.map(Pe=>({timestamp:Pe.timestamp,amount:Pe.amount.toString(),xpGained:Pe.xpGained.toString()})),pheromoneStomachContent:M.value.toString(),lastPheromoneDecayTime:x.value,pheromoneDecayLogs:$.value.map(Pe=>({timestamp:Pe.timestamp,amount:Pe.amount.toString(),xpGained:Pe.xpGained.toString()})),upgrades:Z.value.map(Pe=>({id:Pe.id,level:Pe.level})),colonyUpgrades:me.value.map(Pe=>({id:Pe.id,level:Pe.level})),showHelpSection:g.value}),loadState:Pe=>{Pe.level&&(r.value=l(Pe.level)),Pe.experience&&(o.value=l(Pe.experience)),Pe.colonyLevel&&(i.value=l(Pe.colonyLevel)),Pe.colonyExperience&&(c.value=l(Pe.colonyExperience)),Pe.lastUpdated&&(u.value=Pe.lastUpdated),Pe.spentLevels!==void 0&&(d.value=Pe.spentLevels),Pe.spentColonyLevels!==void 0&&(m.value=Pe.spentColonyLevels),Pe.ascensionCount!==void 0&&(f.value=Pe.ascensionCount),Pe.ascensionPoints!==void 0&&(p.value=l(Pe.ascensionPoints)),Pe.purchasedAscensionUpgrades&&(C.value=new Set(Pe.purchasedAscensionUpgrades),C.value.add("core_potential")),Pe.autoFeedEnabled!==void 0&&(E.value=Pe.autoFeedEnabled),Pe.autoFeedPheromoneEnabled!==void 0&&(k.value=Pe.autoFeedPheromoneEnabled),Pe.autoFeedTickCounter!==void 0&&(A.value=Pe.autoFeedTickCounter),Pe.stomachContent!==void 0&&(I.value=l(Pe.stomachContent)),Pe.lastDecayTime&&(D.value=Pe.lastDecayTime),Pe.decayLogs&&(U.value=Pe.decayLogs.map(He=>({timestamp:He.timestamp,amount:l(He.amount),xpGained:l(He.xpGained)}))),Pe.pheromoneStomachContent!==void 0&&(M.value=l(Pe.pheromoneStomachContent)),Pe.lastPheromoneDecayTime&&(x.value=Pe.lastPheromoneDecayTime),Pe.pheromoneDecayLogs&&($.value=Pe.pheromoneDecayLogs.map(He=>({timestamp:He.timestamp,amount:l(He.amount),xpGained:l(He.xpGained)}))),Pe.upgrades&&Pe.upgrades.forEach(He=>{const ht=Z.value.find(vt=>vt.id===He.id);ht&&(ht.level=He.level)}),Pe.colonyUpgrades&&Pe.colonyUpgrades.forEach(He=>{const ht=me.value.find(vt=>vt.id===He.id);ht&&(ht.level=He.level)}),Pe.showHelpSection!==void 0&&(g.value=Pe.showHelpSection)},toggleAutoFeed:Ze,toggleAutoFeedPheromone:pt,purchaseColonyUpgrade:ze,canColonyUpgrade:Re,isColonyUpgradeMaxed:$e,getColonyMultiplierForTarget:Ce,getFormattedColonyEffect:Oe,calculateBonusPoints:ot,getNextMilestone:_t,formatUpgradeImprovement:(Pe,He=0)=>{const ht=typeof He=="number"?l(He):He,vt=Z.value.find(Zs=>Zs.id===Pe);if(!vt||vt.maxLevel&&vt.level>=vt.maxLevel)return"0";const qt=vt.getEffectValue(vt.level),bs=vt.getEffectValue(vt.level+1).sub(qt),Ns=ht.eq(0)?bs:ht;switch(Pe){case"stomachCapacity":case"pheromoneStomachCapacity":return`${Ns.round().toString()} units`;case"decayRate":case"pheromoneDecayRate":return`${Ns.toFixed(2)}/sec`;case"efficiency":case"pheromoneEfficiency":return`${Ns.toFixed(2)}x`;default:return`${Ns.toString()}`}},formatColonyUpgradeImprovement:(Pe,He=0)=>{const ht=typeof He=="number"?l(He):He,vt=me.value.find(qt=>qt.id===Pe);return!vt||vt.maxLevel&&vt.level>=vt.maxLevel?"0":`${ht.mul(100).toFixed(0)}%`},formatAP:()=>be(p.value)}}),Xi={tiny_leaf:{id:"tiny_leaf",name:"Tiny Leaf",description:"A small leaf collected from a garden. It provides minimal nourishment for your colony.",rarity:"common",category:"plant",boosts:{global:.5,specificGenerator:[{generatorId:"worker",multiplier:1}]}},pebble:{id:"pebble",name:"Smooth Pebble",description:"A smooth, rounded pebble. Ants can use it as a tool to improve efficiency.",rarity:"common",category:"mineral",boosts:{specificGenerator:[{generatorId:"digger",multiplier:1}],combatStats:{defense:1}}},ant_mandible:{id:"ant_mandible",name:"Ant Mandible",description:"A discarded ant mandible. Studying it improves your ants' combat abilities.",rarity:"common",category:"insect",boosts:{combatStats:{damage:2}}},dewdrop:{id:"dewdrop",name:"Morning Dewdrop",description:"A glistening drop of morning dew. It refreshes your ants and increases their work rate.",rarity:"uncommon",category:"plant",boosts:{global:1,specificGenerator:[{generatorId:"worker",multiplier:2},{generatorId:"queen",multiplier:1}],pheromoneGain:1}},small_crystal:{id:"small_crystal",name:"Small Crystal",description:"A tiny, shimmering crystal. It seems to amplify the colony's energy.",rarity:"uncommon",category:"mineral",boosts:{epGain:2,pheromoneGain:1}},ladybug_wing:{id:"ladybug_wing",name:"Ladybug Wing",description:"A delicate wing from a ladybug. Its patterns contain secrets of efficient movement.",rarity:"rare",category:"insect",boosts:{global:2,combatStats:{damage:5},epGain:3}},amber_fragment:{id:"amber_fragment",name:"Amber Fragment",description:"A small piece of ancient amber. It contains fossilized pheromones that enhance your colony.",rarity:"rare",category:"mineral",boosts:{pheromoneGain:5,epGain:3}},beetle_shell:{id:"beetle_shell",name:"Iridescent Beetle Shell",description:"A beautiful, rainbow-colored beetle shell. It inspires your ants to work harder.",rarity:"epic",category:"insect",boosts:{global:4,specificGenerator:[{generatorId:"soldier",multiplier:8}],combatStats:{defense:15,health:20}}},ancient_pheromone:{id:"ancient_pheromone",name:"Ancient Pheromone Extract",description:"A concentrated essence of ancient pheromones. It significantly enhances your colony's abilities.",rarity:"legendary",category:"artifact",boosts:{global:8,epGain:10,pheromoneGain:12,combatStats:{damage:25,health:30}}},quantum_crystal:{id:"quantum_crystal",name:"Quantum Crystal",description:"A crystal that exists in multiple dimensions simultaneously. It bends reality around your colony.",rarity:"mythic",category:"artifact",boosts:{global:15,epGain:18,pheromoneGain:20,combatStats:{damage:50,health:60,defense:40,regen:10}}},cosmic_essence:{id:"cosmic_essence",name:"Cosmic Essence",description:"The fundamental essence of the universe itself. It transforms your colony in miraculous ways.",rarity:"divine",category:"artifact",boosts:{global:30,epGain:35,pheromoneGain:40,specificGenerator:[{generatorId:"worker",multiplier:50},{generatorId:"queen",multiplier:50},{generatorId:"soldier",multiplier:50},{generatorId:"colony",multiplier:50}],combatStats:{damage:100,health:120,defense:80,regen:25}}},dried_fungus:{id:"dried_fungus",name:"Dried Fungus",description:"A piece of dried fungus. It provides a small but lasting energy boost.",rarity:"common",category:"plant",boosts:{epGain:.8}},spider_silk:{id:"spider_silk",name:"Spider Silk Strand",description:"A strong, sticky strand of spider silk. Useful for reinforcing tunnels.",rarity:"uncommon",category:"insect",boosts:{global:.7,specificGenerator:[{generatorId:"digger",multiplier:2.5}]}},geode_shard:{id:"geode_shard",name:"Geode Shard",description:"A fragment from inside a geode. It hums with contained energy.",rarity:"rare",category:"mineral",boosts:{pheromoneGain:4,combatStats:{defense:8}}},glowing_mushroom:{id:"glowing_mushroom",name:"Glowing Mushroom",description:"A bioluminescent mushroom found deep underground. It pulses with strange energy.",rarity:"epic",category:"plant",boosts:{epGain:6,combatStats:{health:15,regen:3}}},mantis_claw:{id:"mantis_claw",name:"Mantis Claw Fragment",description:"A razor-sharp piece of a praying mantis's claw. Inspires deadly precision.",rarity:"legendary",category:"insect",boosts:{global:6,combatStats:{damage:35}}},meteorite_fragment:{id:"meteorite_fragment",name:"Meteorite Fragment",description:"A piece of rock from beyond this world. It resonates with cosmic power.",rarity:"mythic",category:"mineral",boosts:{global:12,epGain:15,pheromoneGain:16,combatStats:{damage:40,defense:50}}},world_tree_seedling:{id:"world_tree_seedling",name:"World Tree Seedling",description:"A tiny sprout believed to be from the legendary World Tree. Holds immense potential.",rarity:"divine",category:"plant",boosts:{global:25,epGain:30,pheromoneGain:30,specificGenerator:[{generatorId:"worker",multiplier:40},{generatorId:"digger",multiplier:40},{generatorId:"queen",multiplier:40},{generatorId:"colony",multiplier:40}],combatStats:{health:100,regen:30}}}};function u3(){const t=Y([]),e=(o,i)=>{const c=`${o}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return t.value.push({id:c,itemId:o,amount:i,timestamp:Date.now()}),setTimeout(()=>{n(c)},2e3),c},s=(o,i)=>{const c=t.value.find(u=>u.id===o);c&&(c.position=i)},n=o=>{const i=t.value.findIndex(c=>c.id===o);i!==-1&&t.value.splice(i,1)};return{indicators:t,addXpIndicator:e,updateIndicatorPosition:s,removeXpIndicator:n,getItemIndicators:o=>t.value.filter(i=>i.itemId===o)}}const uf=Es("collectible",()=>{const t=Y([]),e=.1,s=.05,n=u3(),{indicators:r,addXpIndicator:o}=n,i=Y("all"),c=Y("rarity"),u=Y(!1),d=Y(!1),m=re=>Xi[re],f=re=>t.value.find(J=>J.id===re),p=(re,J)=>{const z={common:.6,uncommon:.75,rare:.9,epic:1,legendary:1.15,mythic:1.3,divine:1.5}[J]||1;if(re.equals(1))return Se.fromNumber(0);const ce=re.toNumber();let pe=Math.floor(1/4*Math.floor(ce+300*Math.pow(2,ce/7)));return pe=Math.floor(pe*.9*z),Se.fromNumber(pe)},g=re=>{if(re.toNumber()<=10)return Se.fromNumber(1).add(re.minus(1).mul(e));{const le=Se.fromNumber(9).mul(e),se=re.minus(10).mul(s);return Se.fromNumber(1).add(le).add(se)}},w={common:"text-gray-600 dark:text-gray-400",uncommon:"text-green-600 dark:text-green-300",rare:"text-blue-600 dark:text-blue-300",epic:"text-purple-600 dark:text-purple-300",legendary:"text-amber-600 dark:text-amber-300",mythic:"text-pink-600 dark:text-pink-300",divine:"text-yellow-600 dark:text-yellow-300"},C={common:"bg-gray-200 dark:bg-gray-700",uncommon:"bg-green-200 dark:bg-green-800",rare:"bg-blue-200 dark:bg-blue-800",epic:"bg-purple-300 dark:bg-purple-800",legendary:"bg-amber-300 dark:bg-amber-700",mythic:"bg-pink-300 dark:bg-pink-800",divine:"bg-yellow-300 dark:bg-yellow-700"},E=re=>w[re]||w.common,k=re=>C[re]||C.common,A=re=>{const J=m(re),le=f(re);return J?le?`${J.name} (Lvl ${le.level.toString()})`:J.name:"Unknown Collectible"},S=(re,J)=>{const le=m(re);if(!le)return{leveledUp:!1,newLevel:l(0)};let se=f(re),z=!1;if(!se){const ce={id:re,level:l(1),xp:l(0),maxXp:p(l(1),le.rarity)};t.value.push(ce),se=ce,z=!0}for(se.xp=se.xp.add(J),J.gt(0)&&o(re,J);se.xp.gte(se.maxXp);)se.level=se.level.add(1),z=!0,se.xp=se.xp.sub(se.maxXp),se.maxXp=p(se.level,le.rarity);return{leveledUp:z,newLevel:se.level}},T=re=>{const J=m(re);if(!J)return;if(f(re)){const z={common:2,uncommon:5,rare:12,epic:30,legendary:75,mythic:180,divine:450}[J.rarity]||5,ce=l(Math.round(z)),pe=S(re,ce);return{isNew:!1,leveledUp:pe.leveledUp,level:pe.newLevel}}else return{isNew:!0,leveledUp:!1,level:S(re,l(0)).newLevel}},R=re=>{const J=m(re),le=f(re);if(!J||!le)return null;const se=g(le.level),z={...J.boosts};if(z.global!==void 0&&(z.global=z.global*se.toNumber()),z.epGain!==void 0&&(z.epGain=z.epGain*se.toNumber()),z.pheromoneGain!==void 0&&(z.pheromoneGain=z.pheromoneGain*se.toNumber()),z.specificGenerator&&(z.specificGenerator=z.specificGenerator.map(ce=>({generatorId:ce.generatorId,multiplier:ce.multiplier*se.toNumber()}))),z.combatStats){const ce=z.combatStats;z.combatStats={damage:ce.damage?ce.damage*se.toNumber():void 0,health:ce.health?ce.health*se.toNumber():void 0,defense:ce.defense?ce.defense*se.toNumber():void 0,regen:ce.regen?ce.regen*se.toNumber():void 0}}return z},L=()=>{const re={global:0,epGain:0,pheromoneGain:0,specificGenerator:{},combatStats:{damage:0,health:0,defense:0,regen:0}};return t.value.forEach(J=>{const le=R(J.id);le&&(le.global!==void 0&&(re.global+=le.global),le.epGain!==void 0&&(re.epGain+=le.epGain),le.pheromoneGain!==void 0&&(re.pheromoneGain+=le.pheromoneGain),le.specificGenerator&&le.specificGenerator.forEach(se=>{re.specificGenerator[se.generatorId]||(re.specificGenerator[se.generatorId]=0),re.specificGenerator[se.generatorId]+=se.multiplier}),le.combatStats&&(le.combatStats.damage&&(re.combatStats.damage+=le.combatStats.damage),le.combatStats.health&&(re.combatStats.health+=le.combatStats.health),le.combatStats.defense&&(re.combatStats.defense+=le.combatStats.defense),le.combatStats.regen&&(re.combatStats.regen+=le.combatStats.regen)))}),re},P=()=>{const re=L();return{global:Se.fromNumber(1+re.global/100),epGain:Se.fromNumber(1+re.epGain/100),pheromoneGain:Se.fromNumber(1+re.pheromoneGain/100),specificGenerator:Object.fromEntries(Object.entries(re.specificGenerator).map(([J,le])=>[J,Se.fromNumber(1+le/100)])),combatStats:{damage:re.combatStats.damage,health:re.combatStats.health,defense:re.combatStats.defense,regen:re.combatStats.regen}}},I=(re,J,le=!1)=>{const se=re.div(J).mul(100).toFixed(1);return le?`${se}% (${re.floor().toString()} / ${J.floor().toString()})`:`${se}%`},D=re=>{const J=f(re);return J?J.maxXp.equals(0)?100:J.xp.div(J.maxXp).mul(100).toNumber():0},U=q(()=>t.value.length),M=q(()=>Object.keys(Xi).length),x=q(()=>Math.floor(U.value/M.value*100)),$=q(()=>{let re=[...t.value];if(i.value!=="all"){const J=Xi;re=re.filter(le=>{const se=J[le.id];return se&&se.category===i.value})}switch(c.value){case"level":re.sort((le,se)=>se.level.cmp(le.level));break;case"name":re.sort((le,se)=>{var pe,_e;const z=((pe=Xi[le.id])==null?void 0:pe.name)||"",ce=((_e=Xi[se.id])==null?void 0:_e.name)||"";return z.localeCompare(ce)});break;case"rarity":const J={common:0,uncommon:1,rare:2,epic:3,legendary:4,mythic:5,divine:6};re.sort((le,se)=>{var pe,_e;const z=((pe=Xi[le.id])==null?void 0:pe.rarity)||"common",ce=((_e=Xi[se.id])==null?void 0:_e.rarity)||"common";return J[ce]-J[z]});break;case"recently":re.reverse();break}return re});return{collection:t,getCollectible:m,getCollectibleInstance:f,addCollectible:T,addCollectibleXp:S,getCollectibleBoosts:R,getAllBoosts:L,getBoostMultipliers:P,getFormattedCollectibleName:A,getRarityColor:E,getRarityBackground:k,formatXpProgress:I,getLevelProgress:D,calculateMaxXp:p,collectionCount:U,totalCollectibles:M,collectionCompletion:x,filteredAndSortedCollection:$,selectedCollectibleFilter:i,selectedCollectibleSort:c,showMaxLevel:u,showOnlyUnlocked:d,xpIndicators:r,...n,getState:()=>({collection:t.value.map(re=>({id:re.id,level:re.level.toString(),xp:re.xp.toString()})),selectedCollectibleFilter:i.value,selectedCollectibleSort:c.value,showMaxLevel:u.value,showOnlyUnlocked:d.value}),loadState:re=>{re.collection&&(t.value=re.collection.map(J=>{const le=m(J.id);if(!le)return null;const se=l(J.level||1),z=l(J.xp||0),ce=p(se,le.rarity);return{id:J.id,level:se,xp:z,maxXp:ce}}).filter(Boolean)),re.selectedCollectibleFilter&&(i.value=re.selectedCollectibleFilter),re.selectedCollectibleSort&&(c.value=re.selectedCollectibleSort),re.showMaxLevel!==void 0&&(u.value=re.showMaxLevel),re.showOnlyUnlocked!==void 0&&(d.value=re.showOnlyUnlocked)},LEVEL_BOOST_MULTIPLIER_EARLY:e,LEVEL_BOOST_MULTIPLIER:s}});class Wl extends Error{}class u7 extends Wl{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class d7 extends Wl{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class m7 extends Wl{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Mc extends Wl{}class d3 extends Wl{constructor(e){super(`Invalid unit ${e}`)}}class zn extends Wl{}class Vi extends Wl{constructor(){super("Zone is an abstract class")}}const lt="numeric",So="short",Ur="long",$h={year:lt,month:lt,day:lt},m3={year:lt,month:So,day:lt},f7={year:lt,month:So,day:lt,weekday:So},f3={year:lt,month:Ur,day:lt},p3={year:lt,month:Ur,day:lt,weekday:Ur},h3={hour:lt,minute:lt},g3={hour:lt,minute:lt,second:lt},v3={hour:lt,minute:lt,second:lt,timeZoneName:So},b3={hour:lt,minute:lt,second:lt,timeZoneName:Ur},y3={hour:lt,minute:lt,hourCycle:"h23"},_3={hour:lt,minute:lt,second:lt,hourCycle:"h23"},x3={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:So},k3={hour:lt,minute:lt,second:lt,hourCycle:"h23",timeZoneName:Ur},w3={year:lt,month:lt,day:lt,hour:lt,minute:lt},E3={year:lt,month:lt,day:lt,hour:lt,minute:lt,second:lt},C3={year:lt,month:So,day:lt,hour:lt,minute:lt},S3={year:lt,month:So,day:lt,hour:lt,minute:lt,second:lt},p7={year:lt,month:So,day:lt,weekday:So,hour:lt,minute:lt},T3={year:lt,month:Ur,day:lt,hour:lt,minute:lt,timeZoneName:So},A3={year:lt,month:Ur,day:lt,hour:lt,minute:lt,second:lt,timeZoneName:So},I3={year:lt,month:Ur,day:lt,weekday:Ur,hour:lt,minute:lt,timeZoneName:Ur},P3={year:lt,month:Ur,day:lt,weekday:Ur,hour:lt,minute:lt,second:lt,timeZoneName:Ur};class df{get type(){throw new Vi}get name(){throw new Vi}get ianaName(){return this.name}get isUniversal(){throw new Vi}offsetName(e,s){throw new Vi}formatOffset(e,s){throw new Vi}offset(e){throw new Vi}equals(e){throw new Vi}get isValid(){throw new Vi}}let Mb=null;class j0 extends df{static get instance(){return Mb===null&&(Mb=new j0),Mb}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:s,locale:n}){return B3(e,s,n)}formatOffset(e,s){return Wd(this.offset(e),s)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const t_=new Map;function h7(t){let e=t_.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),t_.set(t,e)),e}const g7={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function v7(t,e){const s=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,r,o,i,c,u,d,m]=n;return[i,r,o,c,u,d,m]}function b7(t,e){const s=t.formatToParts(e),n=[];for(let r=0;r<s.length;r++){const{type:o,value:i}=s[r],c=g7[o];o==="era"?n[c]=i:It(c)||(n[c]=parseInt(i,10))}return n}const $b=new Map;class Ci extends df{static create(e){let s=$b.get(e);return s===void 0&&$b.set(e,s=new Ci(e)),s}static resetCache(){$b.clear(),t_.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ci.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:s,locale:n}){return B3(e,s,n,this.name)}formatOffset(e,s){return Wd(this.offset(e),s)}offset(e){if(!this.valid)return NaN;const s=new Date(e);if(isNaN(s))return NaN;const n=h7(this.name);let[r,o,i,c,u,d,m]=n.formatToParts?b7(n,s):v7(n,s);c==="BC"&&(r=-Math.abs(r)+1);const p=z0({year:r,month:o,day:i,hour:u===24?0:u,minute:d,second:m,millisecond:0});let g=+s;const w=g%1e3;return g-=w>=0?w:1e3+w,(p-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let tC={};function y7(t,e={}){const s=JSON.stringify([t,e]);let n=tC[s];return n||(n=new Intl.ListFormat(t,e),tC[s]=n),n}const s_=new Map;function n_(t,e={}){const s=JSON.stringify([t,e]);let n=s_.get(s);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),s_.set(s,n)),n}const r_=new Map;function _7(t,e={}){const s=JSON.stringify([t,e]);let n=r_.get(s);return n===void 0&&(n=new Intl.NumberFormat(t,e),r_.set(s,n)),n}const o_=new Map;function x7(t,e={}){const{base:s,...n}=e,r=JSON.stringify([t,n]);let o=o_.get(r);return o===void 0&&(o=new Intl.RelativeTimeFormat(t,e),o_.set(r,o)),o}let wd=null;function k7(){return wd||(wd=new Intl.DateTimeFormat().resolvedOptions().locale,wd)}const i_=new Map;function M3(t){let e=i_.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),i_.set(t,e)),e}const a_=new Map;function w7(t){let e=a_.get(t);if(!e){const s=new Intl.Locale(t);e="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in e||(e={...$3,...e}),a_.set(t,e)}return e}function E7(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const s=t.indexOf("-u-");if(s===-1)return[t];{let n,r;try{n=n_(t).resolvedOptions(),r=t}catch{const u=t.substring(0,s);n=n_(u).resolvedOptions(),r=u}const{numberingSystem:o,calendar:i}=n;return[r,o,i]}}function C7(t,e,s){return(s||e)&&(t.includes("-u-")||(t+="-u"),s&&(t+=`-ca-${s}`),e&&(t+=`-nu-${e}`)),t}function S7(t){const e=[];for(let s=1;s<=12;s++){const n=bt.utc(2009,s,1);e.push(t(n))}return e}function T7(t){const e=[];for(let s=1;s<=7;s++){const n=bt.utc(2016,11,13+s);e.push(t(n))}return e}function ap(t,e,s,n){const r=t.listingMode();return r==="error"?null:r==="en"?s(e):n(e)}function A7(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||M3(t.locale).numberingSystem==="latn"}class I7{constructor(e,s,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:o,...i}=n;if(!s||Object.keys(i).length>0){const c={useGrouping:!1,...n};n.padTo>0&&(c.minimumIntegerDigits=n.padTo),this.inf=_7(e,c)}}format(e){if(this.inf){const s=this.floor?Math.floor(e):e;return this.inf.format(s)}else{const s=this.floor?Math.floor(e):rx(e,3);return on(s,this.padTo)}}}class P7{constructor(e,s,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const i=-1*(e.offset/60),c=i>=0?`Etc/GMT+${i}`:`Etc/GMT${i}`;e.offset!==0&&Ci.create(c).valid?(r=c,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||r,this.dtf=n_(s,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(s=>{if(s.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...s,value:n}}else return s}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class M7{constructor(e,s,n){this.opts={style:"long",...n},!s&&U3()&&(this.rtf=x7(e,n))}format(e,s){return this.rtf?this.rtf.format(e,s):Z7(s,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,s){return this.rtf?this.rtf.formatToParts(e,s):[]}}const $3={firstDay:1,minimalDays:4,weekend:[6,7]};class ms{static fromOpts(e){return ms.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,s,n,r,o=!1){const i=e||Gs.defaultLocale,c=i||(o?"en-US":k7()),u=s||Gs.defaultNumberingSystem,d=n||Gs.defaultOutputCalendar,m=c_(r)||Gs.defaultWeekSettings;return new ms(c,u,d,m,i)}static resetCache(){wd=null,s_.clear(),r_.clear(),o_.clear(),i_.clear(),a_.clear()}static fromObject({locale:e,numberingSystem:s,outputCalendar:n,weekSettings:r}={}){return ms.create(e,s,n,r)}constructor(e,s,n,r,o){const[i,c,u]=E7(e);this.locale=i,this.numberingSystem=s||c||null,this.outputCalendar=n||u||null,this.weekSettings=r,this.intl=C7(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=A7(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),s=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&s?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ms.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,c_(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,s=!1){return ap(this,e,G3,()=>{const n=s?{month:e,day:"numeric"}:{month:e},r=s?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=S7(o=>this.extract(o,n,"month"))),this.monthsCache[r][e]})}weekdays(e,s=!1){return ap(this,e,z3,()=>{const n=s?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=s?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=T7(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return ap(this,void 0,()=>Q3,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[bt.utc(2016,11,13,9),bt.utc(2016,11,13,19)].map(s=>this.extract(s,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ap(this,e,K3,()=>{const s={era:e};return this.eraCache[e]||(this.eraCache[e]=[bt.utc(-40,1,1),bt.utc(2017,1,1)].map(n=>this.extract(n,s,"era"))),this.eraCache[e]})}extract(e,s,n){const r=this.dtFormatter(e,s),o=r.formatToParts(),i=o.find(c=>c.type.toLowerCase()===n);return i?i.value:null}numberFormatter(e={}){return new I7(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,s={}){return new P7(e,this.intl,s)}relFormatter(e={}){return new M7(this.intl,this.isEnglish(),e)}listFormatter(e={}){return y7(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||M3(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:q3()?w7(this.locale):$3}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Rb=null;class fr extends df{static get utcInstance(){return Rb===null&&(Rb=new fr(0)),Rb}static instance(e){return e===0?fr.utcInstance:new fr(e)}static parseSpecifier(e){if(e){const s=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(s)return new fr(Q0(s[1],s[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Wd(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Wd(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,s){return Wd(this.fixed,s)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class $7 extends df{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ia(t,e){if(It(t)||t===null)return e;if(t instanceof df)return t;if(F7(t)){const s=t.toLowerCase();return s==="default"?e:s==="local"||s==="system"?j0.instance:s==="utc"||s==="gmt"?fr.utcInstance:fr.parseSpecifier(s)||Ci.create(t)}else return ma(t)?fr.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new $7(t)}const ex={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},sC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},R7=ex.hanidec.replace(/[\[|\]]/g,"").split("");function L7(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);if(t[s].search(ex.hanidec)!==-1)e+=R7.indexOf(t[s]);else for(const r in sC){const[o,i]=sC[r];n>=o&&n<=i&&(e+=n-o)}}return parseInt(e,10)}else return e}const l_=new Map;function D7(){l_.clear()}function lo({numberingSystem:t},e=""){const s=t||"latn";let n=l_.get(s);n===void 0&&(n=new Map,l_.set(s,n));let r=n.get(e);return r===void 0&&(r=new RegExp(`${ex[s]}${e}`),n.set(e,r)),r}let nC=()=>Date.now(),rC="system",oC=null,iC=null,aC=null,lC=60,cC,uC=null;class Gs{static get now(){return nC}static set now(e){nC=e}static set defaultZone(e){rC=e}static get defaultZone(){return ia(rC,j0.instance)}static get defaultLocale(){return oC}static set defaultLocale(e){oC=e}static get defaultNumberingSystem(){return iC}static set defaultNumberingSystem(e){iC=e}static get defaultOutputCalendar(){return aC}static set defaultOutputCalendar(e){aC=e}static get defaultWeekSettings(){return uC}static set defaultWeekSettings(e){uC=c_(e)}static get twoDigitCutoffYear(){return lC}static set twoDigitCutoffYear(e){lC=e%100}static get throwOnInvalid(){return cC}static set throwOnInvalid(e){cC=e}static resetCaches(){ms.resetCache(),Ci.resetCache(),bt.resetCache(),D7()}}class po{constructor(e,s){this.reason=e,this.explanation=s}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const R3=[0,31,59,90,120,151,181,212,243,273,304,334],L3=[0,31,60,91,121,152,182,213,244,274,305,335];function Kr(t,e){return new po("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function tx(t,e,s){const n=new Date(Date.UTC(t,e-1,s));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function D3(t,e,s){return s+(mf(t)?L3:R3)[e-1]}function N3(t,e){const s=mf(t)?L3:R3,n=s.findIndex(o=>o<e),r=e-s[n];return{month:n+1,day:r}}function sx(t,e){return(t-e+7)%7+1}function Rh(t,e=4,s=1){const{year:n,month:r,day:o}=t,i=D3(n,r,o),c=sx(tx(n,r,o),s);let u=Math.floor((i-c+14-e)/7),d;return u<1?(d=n-1,u=Im(d,e,s)):u>Im(n,e,s)?(d=n+1,u=1):d=n,{weekYear:d,weekNumber:u,weekday:c,...K0(t)}}function dC(t,e=4,s=1){const{weekYear:n,weekNumber:r,weekday:o}=t,i=sx(tx(n,1,e),s),c=Gc(n);let u=r*7+o-i-7+e,d;u<1?(d=n-1,u+=Gc(d)):u>c?(d=n+1,u-=Gc(n)):d=n;const{month:m,day:f}=N3(d,u);return{year:d,month:m,day:f,...K0(t)}}function Lb(t){const{year:e,month:s,day:n}=t,r=D3(e,s,n);return{year:e,ordinal:r,...K0(t)}}function mC(t){const{year:e,ordinal:s}=t,{month:n,day:r}=N3(e,s);return{year:e,month:n,day:r,...K0(t)}}function fC(t,e){if(!It(t.localWeekday)||!It(t.localWeekNumber)||!It(t.localWeekYear)){if(!It(t.weekday)||!It(t.weekNumber)||!It(t.weekYear))throw new Mc("Cannot mix locale-based week fields with ISO-based week fields");return It(t.localWeekday)||(t.weekday=t.localWeekday),It(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),It(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function N7(t,e=4,s=1){const n=W0(t.weekYear),r=Yr(t.weekNumber,1,Im(t.weekYear,e,s)),o=Yr(t.weekday,1,7);return n?r?o?!1:Kr("weekday",t.weekday):Kr("week",t.weekNumber):Kr("weekYear",t.weekYear)}function O7(t){const e=W0(t.year),s=Yr(t.ordinal,1,Gc(t.year));return e?s?!1:Kr("ordinal",t.ordinal):Kr("year",t.year)}function O3(t){const e=W0(t.year),s=Yr(t.month,1,12),n=Yr(t.day,1,Lh(t.year,t.month));return e?s?n?!1:Kr("day",t.day):Kr("month",t.month):Kr("year",t.year)}function F3(t){const{hour:e,minute:s,second:n,millisecond:r}=t,o=Yr(e,0,23)||e===24&&s===0&&n===0&&r===0,i=Yr(s,0,59),c=Yr(n,0,59),u=Yr(r,0,999);return o?i?c?u?!1:Kr("millisecond",r):Kr("second",n):Kr("minute",s):Kr("hour",e)}function It(t){return typeof t>"u"}function ma(t){return typeof t=="number"}function W0(t){return typeof t=="number"&&t%1===0}function F7(t){return typeof t=="string"}function U7(t){return Object.prototype.toString.call(t)==="[object Date]"}function U3(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function q3(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function q7(t){return Array.isArray(t)?t:[t]}function pC(t,e,s){if(t.length!==0)return t.reduce((n,r)=>{const o=[e(r),r];return n&&s(n[0],o[0])===n[0]?n:o},null)[1]}function B7(t,e){return e.reduce((s,n)=>(s[n]=t[n],s),{})}function iu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c_(t){if(t==null)return null;if(typeof t!="object")throw new zn("Week settings must be an object");if(!Yr(t.firstDay,1,7)||!Yr(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Yr(e,1,7)))throw new zn("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Yr(t,e,s){return W0(t)&&t>=e&&t<=s}function V7(t,e){return t-e*Math.floor(t/e)}function on(t,e=2){const s=t<0;let n;return s?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function ra(t){if(!(It(t)||t===null||t===""))return parseInt(t,10)}function Za(t){if(!(It(t)||t===null||t===""))return parseFloat(t)}function nx(t){if(!(It(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function rx(t,e,s=!1){const n=10**e;return(s?Math.trunc:Math.round)(t*n)/n}function mf(t){return t%4===0&&(t%100!==0||t%400===0)}function Gc(t){return mf(t)?366:365}function Lh(t,e){const s=V7(e-1,12)+1,n=t+(e-s)/12;return s===2?mf(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function z0(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function hC(t,e,s){return-sx(tx(t,1,e),s)+e-1}function Im(t,e=4,s=1){const n=hC(t,e,s),r=hC(t+1,e,s);return(Gc(t)-n+r)/7}function u_(t){return t>99?t:t>Gs.twoDigitCutoffYear?1900+t:2e3+t}function B3(t,e,s,n=null){const r=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);const i={timeZoneName:e,...o},c=new Intl.DateTimeFormat(s,i).formatToParts(r).find(u=>u.type.toLowerCase()==="timezonename");return c?c.value:null}function Q0(t,e){let s=parseInt(t,10);Number.isNaN(s)&&(s=0);const n=parseInt(e,10)||0,r=s<0||Object.is(s,-0)?-n:n;return s*60+r}function V3(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new zn(`Invalid unit value ${t}`);return e}function Dh(t,e){const s={};for(const n in t)if(iu(t,n)){const r=t[n];if(r==null)continue;s[e(n)]=V3(r)}return s}function Wd(t,e){const s=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${on(s,2)}:${on(n,2)}`;case"narrow":return`${r}${s}${n>0?`:${n}`:""}`;case"techie":return`${r}${on(s,2)}${on(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function K0(t){return B7(t,["hour","minute","second","millisecond"])}const H7=["January","February","March","April","May","June","July","August","September","October","November","December"],H3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G7=["J","F","M","A","M","J","J","A","S","O","N","D"];function G3(t){switch(t){case"narrow":return[...G7];case"short":return[...H3];case"long":return[...H7];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const j3=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],W3=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],j7=["M","T","W","T","F","S","S"];function z3(t){switch(t){case"narrow":return[...j7];case"short":return[...W3];case"long":return[...j3];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Q3=["AM","PM"],W7=["Before Christ","Anno Domini"],z7=["BC","AD"],Q7=["B","A"];function K3(t){switch(t){case"narrow":return[...Q7];case"short":return[...z7];case"long":return[...W7];default:return null}}function K7(t){return Q3[t.hour<12?0:1]}function Y7(t,e){return z3(e)[t.weekday-1]}function X7(t,e){return G3(e)[t.month-1]}function J7(t,e){return K3(e)[t.year<0?0:1]}function Z7(t,e,s="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(s==="auto"&&o){const f=t==="days";switch(e){case 1:return f?"tomorrow":`next ${r[t][0]}`;case-1:return f?"yesterday":`last ${r[t][0]}`;case 0:return f?"today":`this ${r[t][0]}`}}const i=Object.is(e,-0)||e<0,c=Math.abs(e),u=c===1,d=r[t],m=n?u?d[1]:d[2]||d[1]:u?r[t][0]:t;return i?`${c} ${m} ago`:`in ${c} ${m}`}function gC(t,e){let s="";for(const n of t)n.literal?s+=n.val:s+=e(n.val);return s}const eq={D:$h,DD:m3,DDD:f3,DDDD:p3,t:h3,tt:g3,ttt:v3,tttt:b3,T:y3,TT:_3,TTT:x3,TTTT:k3,f:w3,ff:C3,fff:T3,ffff:I3,F:E3,FF:S3,FFF:A3,FFFF:P3};class tr{static create(e,s={}){return new tr(e,s)}static parseFormat(e){let s=null,n="",r=!1;const o=[];for(let i=0;i<e.length;i++){const c=e.charAt(i);c==="'"?(n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),s=null,n="",r=!r):r||c===s?n+=c:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=c,s=c)}return n.length>0&&o.push({literal:r||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return eq[e]}constructor(e,s){this.opts=s,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,s){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...s}).format()}dtFormatter(e,s={}){return this.loc.dtFormatter(e,{...this.opts,...s})}formatDateTime(e,s){return this.dtFormatter(e,s).format()}formatDateTimeParts(e,s){return this.dtFormatter(e,s).formatToParts()}formatInterval(e,s){return this.dtFormatter(e.start,s).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,s){return this.dtFormatter(e,s).resolvedOptions()}num(e,s=0){if(this.opts.forceSimple)return on(e,s);const n={...this.opts};return s>0&&(n.padTo=s),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,s){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(g,w)=>this.loc.extract(e,g,w),i=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",c=()=>n?K7(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(g,w)=>n?X7(e,g):o(w?{month:g}:{month:g,day:"numeric"},"month"),d=(g,w)=>n?Y7(e,g):o(w?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),m=g=>{const w=tr.macroTokenToFormatOpts(g);return w?this.formatWithSystemDefault(e,w):g},f=g=>n?J7(e,g):o({era:g},"era"),p=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return c();case"d":return r?o({day:"numeric"},"day"):this.num(e.day);case"dd":return r?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return r?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return r?o({month:"numeric"},"month"):this.num(e.month);case"MM":return r?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return r?o({year:"numeric"},"year"):this.num(e.year);case"yy":return r?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(g)}};return gC(tr.parseFormat(s),p)}formatDurationFromString(e,s){const n=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=u=>d=>{const m=n(d);return m?this.num(u.get(m),d.length):d},o=tr.parseFormat(s),i=o.reduce((u,{literal:d,val:m})=>d?u:u.concat(m),[]),c=e.shiftTo(...i.map(n).filter(u=>u));return gC(o,r(c))}}const Y3=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Iu(...t){const e=t.reduce((s,n)=>s+n.source,"");return RegExp(`^${e}$`)}function Pu(...t){return e=>t.reduce(([s,n,r],o)=>{const[i,c,u]=o(e,r);return[{...s,...i},c||n,u]},[{},null,1]).slice(0,2)}function Mu(t,...e){if(t==null)return[null,null];for(const[s,n]of e){const r=s.exec(t);if(r)return n(r)}return[null,null]}function X3(...t){return(e,s)=>{const n={};let r;for(r=0;r<t.length;r++)n[t[r]]=ra(e[s+r]);return[n,null,s+r]}}const J3=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,tq=`(?:${J3.source}?(?:\\[(${Y3.source})\\])?)?`,ox=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Z3=RegExp(`${ox.source}${tq}`),ix=RegExp(`(?:T${Z3.source})?`),sq=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,nq=/(\d{4})-?W(\d\d)(?:-?(\d))?/,rq=/(\d{4})-?(\d{3})/,oq=X3("weekYear","weekNumber","weekDay"),iq=X3("year","ordinal"),aq=/(\d{4})-(\d\d)-(\d\d)/,eM=RegExp(`${ox.source} ?(?:${J3.source}|(${Y3.source}))?`),lq=RegExp(`(?: ${eM.source})?`);function jc(t,e,s){const n=t[e];return It(n)?s:ra(n)}function cq(t,e){return[{year:jc(t,e),month:jc(t,e+1,1),day:jc(t,e+2,1)},null,e+3]}function $u(t,e){return[{hours:jc(t,e,0),minutes:jc(t,e+1,0),seconds:jc(t,e+2,0),milliseconds:nx(t[e+3])},null,e+4]}function ff(t,e){const s=!t[e]&&!t[e+1],n=Q0(t[e+1],t[e+2]),r=s?null:fr.instance(n);return[{},r,e+3]}function pf(t,e){const s=t[e]?Ci.create(t[e]):null;return[{},s,e+1]}const uq=RegExp(`^T?${ox.source}$`),dq=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function mq(t){const[e,s,n,r,o,i,c,u,d]=t,m=e[0]==="-",f=u&&u[0]==="-",p=(g,w=!1)=>g!==void 0&&(w||g&&m)?-g:g;return[{years:p(Za(s)),months:p(Za(n)),weeks:p(Za(r)),days:p(Za(o)),hours:p(Za(i)),minutes:p(Za(c)),seconds:p(Za(u),u==="-0"),milliseconds:p(nx(d),f)}]}const fq={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ax(t,e,s,n,r,o,i){const c={year:e.length===2?u_(ra(e)):ra(e),month:H3.indexOf(s)+1,day:ra(n),hour:ra(r),minute:ra(o)};return i&&(c.second=ra(i)),t&&(c.weekday=t.length>3?j3.indexOf(t)+1:W3.indexOf(t)+1),c}const pq=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function hq(t){const[,e,s,n,r,o,i,c,u,d,m,f]=t,p=ax(e,r,n,s,o,i,c);let g;return u?g=fq[u]:d?g=0:g=Q0(m,f),[p,new fr(g)]}function gq(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const vq=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bq=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yq=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function vC(t){const[,e,s,n,r,o,i,c]=t;return[ax(e,r,n,s,o,i,c),fr.utcInstance]}function _q(t){const[,e,s,n,r,o,i,c]=t;return[ax(e,c,s,n,r,o,i),fr.utcInstance]}const xq=Iu(sq,ix),kq=Iu(nq,ix),wq=Iu(rq,ix),Eq=Iu(Z3),tM=Pu(cq,$u,ff,pf),Cq=Pu(oq,$u,ff,pf),Sq=Pu(iq,$u,ff,pf),Tq=Pu($u,ff,pf);function Aq(t){return Mu(t,[xq,tM],[kq,Cq],[wq,Sq],[Eq,Tq])}function Iq(t){return Mu(gq(t),[pq,hq])}function Pq(t){return Mu(t,[vq,vC],[bq,vC],[yq,_q])}function Mq(t){return Mu(t,[dq,mq])}const $q=Pu($u);function Rq(t){return Mu(t,[uq,$q])}const Lq=Iu(aq,lq),Dq=Iu(eM),Nq=Pu($u,ff,pf);function Oq(t){return Mu(t,[Lq,tM],[Dq,Nq])}const bC="Invalid Duration",sM={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Fq={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...sM},Wr=146097/400,mc=146097/4800,Uq={years:{quarters:4,months:12,weeks:Wr/7,days:Wr,hours:Wr*24,minutes:Wr*24*60,seconds:Wr*24*60*60,milliseconds:Wr*24*60*60*1e3},quarters:{months:3,weeks:Wr/28,days:Wr/4,hours:Wr*24/4,minutes:Wr*24*60/4,seconds:Wr*24*60*60/4,milliseconds:Wr*24*60*60*1e3/4},months:{weeks:mc/7,days:mc,hours:mc*24,minutes:mc*24*60,seconds:mc*24*60*60,milliseconds:mc*24*60*60*1e3},...sM},pl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],qq=pl.slice(0).reverse();function Hi(t,e,s=!1){const n={values:s?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ss(n)}function nM(t,e){let s=e.milliseconds??0;for(const n of qq.slice(1))e[n]&&(s+=e[n]*t[n].milliseconds);return s}function yC(t,e){const s=nM(t,e)<0?-1:1;pl.reduceRight((n,r)=>{if(It(e[r]))return n;if(n){const o=e[n]*s,i=t[r][n],c=Math.floor(o/i);e[r]+=c*s,e[n]-=c*i*s}return r},null),pl.reduce((n,r)=>{if(It(e[r]))return n;if(n){const o=e[n]%1;e[n]-=o,e[r]+=o*t[n][r]}return r},null)}function Bq(t){const e={};for(const[s,n]of Object.entries(t))n!==0&&(e[s]=n);return e}class ss{constructor(e){const s=e.conversionAccuracy==="longterm"||!1;let n=s?Uq:Fq;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||ms.create(),this.conversionAccuracy=s?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,s){return ss.fromObject({milliseconds:e},s)}static fromObject(e,s={}){if(e==null||typeof e!="object")throw new zn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new ss({values:Dh(e,ss.normalizeUnit),loc:ms.fromObject(s),conversionAccuracy:s.conversionAccuracy,matrix:s.matrix})}static fromDurationLike(e){if(ma(e))return ss.fromMillis(e);if(ss.isDuration(e))return e;if(typeof e=="object")return ss.fromObject(e);throw new zn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,s){const[n]=Mq(e);return n?ss.fromObject(n,s):ss.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,s){const[n]=Rq(e);return n?ss.fromObject(n,s):ss.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,s=null){if(!e)throw new zn("need to specify a reason the Duration is invalid");const n=e instanceof po?e:new po(e,s);if(Gs.throwOnInvalid)throw new m7(n);return new ss({invalid:n})}static normalizeUnit(e){const s={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!s)throw new d3(e);return s}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,s={}){const n={...s,floor:s.round!==!1&&s.floor!==!1};return this.isValid?tr.create(this.loc,n).formatDurationFromString(this,e):bC}toHuman(e={}){if(!this.isValid)return bC;const s=pl.map(n=>{const r=this.values[n];return It(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=rx(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const s=this.toMillis();return s<0||s>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},bt.fromMillis(s,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?nM(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const s=ss.fromDurationLike(e),n={};for(const r of pl)(iu(s.values,r)||iu(this.values,r))&&(n[r]=s.get(r)+this.get(r));return Hi(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const s=ss.fromDurationLike(e);return this.plus(s.negate())}mapUnits(e){if(!this.isValid)return this;const s={};for(const n of Object.keys(this.values))s[n]=V3(e(this.values[n],n));return Hi(this,{values:s},!0)}get(e){return this[ss.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const s={...this.values,...Dh(e,ss.normalizeUnit)};return Hi(this,{values:s})}reconfigure({locale:e,numberingSystem:s,conversionAccuracy:n,matrix:r}={}){const i={loc:this.loc.clone({locale:e,numberingSystem:s}),matrix:r,conversionAccuracy:n};return Hi(this,i)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return yC(this.matrix,e),Hi(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Bq(this.normalize().shiftToAll().toObject());return Hi(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(i=>ss.normalizeUnit(i));const s={},n={},r=this.toObject();let o;for(const i of pl)if(e.indexOf(i)>=0){o=i;let c=0;for(const d in n)c+=this.matrix[d][i]*n[d],n[d]=0;ma(r[i])&&(c+=r[i]);const u=Math.trunc(c);s[i]=u,n[i]=(c*1e3-u*1e3)/1e3}else ma(r[i])&&(n[i]=r[i]);for(const i in n)n[i]!==0&&(s[o]+=i===o?n[i]:n[i]/this.matrix[o][i]);return yC(this.matrix,s),Hi(this,{values:s},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const s of Object.keys(this.values))e[s]=this.values[s]===0?0:-this.values[s];return Hi(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function s(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of pl)if(!s(this.values[n],e.values[n]))return!1;return!0}}const fc="Invalid Interval";function Vq(t,e){return!t||!t.isValid?Hs.invalid("missing or invalid start"):!e||!e.isValid?Hs.invalid("missing or invalid end"):e<t?Hs.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Hs{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,s=null){if(!e)throw new zn("need to specify a reason the Interval is invalid");const n=e instanceof po?e:new po(e,s);if(Gs.throwOnInvalid)throw new d7(n);return new Hs({invalid:n})}static fromDateTimes(e,s){const n=rd(e),r=rd(s),o=Vq(n,r);return o??new Hs({start:n,end:r})}static after(e,s){const n=ss.fromDurationLike(s),r=rd(e);return Hs.fromDateTimes(r,r.plus(n))}static before(e,s){const n=ss.fromDurationLike(s),r=rd(e);return Hs.fromDateTimes(r.minus(n),r)}static fromISO(e,s){const[n,r]=(e||"").split("/",2);if(n&&r){let o,i;try{o=bt.fromISO(n,s),i=o.isValid}catch{i=!1}let c,u;try{c=bt.fromISO(r,s),u=c.isValid}catch{u=!1}if(i&&u)return Hs.fromDateTimes(o,c);if(i){const d=ss.fromISO(r,s);if(d.isValid)return Hs.after(o,d)}else if(u){const d=ss.fromISO(n,s);if(d.isValid)return Hs.before(c,d)}}return Hs.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",s){if(!this.isValid)return NaN;const n=this.start.startOf(e,s);let r;return s!=null&&s.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(e,s),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:s}={}){return this.isValid?Hs.fromDateTimes(e||this.s,s||this.e):this}splitAt(...e){if(!this.isValid)return[];const s=e.map(rd).filter(i=>this.contains(i)).sort((i,c)=>i.toMillis()-c.toMillis()),n=[];let{s:r}=this,o=0;for(;r<this.e;){const i=s[o]||this.e,c=+i>+this.e?this.e:i;n.push(Hs.fromDateTimes(r,c)),r=c,o+=1}return n}splitBy(e){const s=ss.fromDurationLike(e);if(!this.isValid||!s.isValid||s.as("milliseconds")===0)return[];let{s:n}=this,r=1,o;const i=[];for(;n<this.e;){const c=this.start.plus(s.mapUnits(u=>u*r));o=+c>+this.e?this.e:c,i.push(Hs.fromDateTimes(n,o)),n=o,r+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const s=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return s>=n?null:Hs.fromDateTimes(s,n)}union(e){if(!this.isValid)return this;const s=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Hs.fromDateTimes(s,n)}static merge(e){const[s,n]=e.sort((r,o)=>r.s-o.s).reduce(([r,o],i)=>o?o.overlaps(i)||o.abutsStart(i)?[r,o.union(i)]:[r.concat([o]),i]:[r,i],[[],null]);return n&&s.push(n),s}static xor(e){let s=null,n=0;const r=[],o=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),i=Array.prototype.concat(...o),c=i.sort((u,d)=>u.time-d.time);for(const u of c)n+=u.type==="s"?1:-1,n===1?s=u.time:(s&&+s!=+u.time&&r.push(Hs.fromDateTimes(s,u.time)),s=null);return Hs.merge(r)}difference(...e){return Hs.xor([this].concat(e)).map(s=>this.intersection(s)).filter(s=>s&&!s.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:fc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=$h,s={}){return this.isValid?tr.create(this.s.loc.clone(s),e).formatInterval(this):fc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:fc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:fc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:fc}toFormat(e,{separator:s="  "}={}){return this.isValid?`${this.s.toFormat(e)}${s}${this.e.toFormat(e)}`:fc}toDuration(e,s){return this.isValid?this.e.diff(this.s,e,s):ss.invalid(this.invalidReason)}mapEndpoints(e){return Hs.fromDateTimes(e(this.s),e(this.e))}}class lp{static hasDST(e=Gs.defaultZone){const s=bt.now().setZone(e).set({month:12});return!e.isUniversal&&s.offset!==s.set({month:6}).offset}static isValidIANAZone(e){return Ci.isValidZone(e)}static normalizeZone(e){return ia(e,Gs.defaultZone)}static getStartOfWeek({locale:e=null,locObj:s=null}={}){return(s||ms.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:s=null}={}){return(s||ms.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:s=null}={}){return(s||ms.create(e)).getWeekendDays().slice()}static months(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}={}){return(r||ms.create(s,n,o)).months(e)}static monthsFormat(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null,outputCalendar:o="gregory"}={}){return(r||ms.create(s,n,o)).months(e,!0)}static weekdays(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ms.create(s,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:s=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ms.create(s,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ms.create(e).meridiems()}static eras(e="short",{locale:s=null}={}){return ms.create(s,null,"gregory").eras(e)}static features(){return{relative:U3(),localeWeek:q3()}}}function _C(t,e){const s=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(e)-s(t);return Math.floor(ss.fromMillis(n).as("days"))}function Hq(t,e,s){const n=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const m=_C(u,d);return(m-m%7)/7}],["days",_C]],r={},o=t;let i,c;for(const[u,d]of n)s.indexOf(u)>=0&&(i=u,r[u]=d(t,e),c=o.plus(r),c>e?(r[u]--,t=o.plus(r),t>e&&(c=t,r[u]--,t=o.plus(r))):t=c);return[t,r,c,i]}function Gq(t,e,s,n){let[r,o,i,c]=Hq(t,e,s);const u=e-r,d=s.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);d.length===0&&(i<e&&(i=r.plus({[c]:1})),i!==r&&(o[c]=(o[c]||0)+u/(i-r)));const m=ss.fromObject(o,n);return d.length>0?ss.fromMillis(u,n).shiftTo(...d).plus(m):m}const jq="missing Intl.DateTimeFormat.formatToParts support";function os(t,e=s=>s){return{regex:t,deser:([s])=>e(L7(s))}}const Wq="",rM=`[ ${Wq}]`,oM=new RegExp(rM,"g");function zq(t){return t.replace(/\./g,"\\.?").replace(oM,rM)}function xC(t){return t.replace(/\./g,"").replace(oM," ").toLowerCase()}function co(t,e){return t===null?null:{regex:RegExp(t.map(zq).join("|")),deser:([s])=>t.findIndex(n=>xC(s)===xC(n))+e}}function kC(t,e){return{regex:t,deser:([,s,n])=>Q0(s,n),groups:e}}function cp(t){return{regex:t,deser:([e])=>e}}function Qq(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Kq(t,e){const s=lo(e),n=lo(e,"{2}"),r=lo(e,"{3}"),o=lo(e,"{4}"),i=lo(e,"{6}"),c=lo(e,"{1,2}"),u=lo(e,"{1,3}"),d=lo(e,"{1,6}"),m=lo(e,"{1,9}"),f=lo(e,"{2,4}"),p=lo(e,"{4,6}"),g=E=>({regex:RegExp(Qq(E.val)),deser:([k])=>k,literal:!0}),C=(E=>{if(t.literal)return g(E);switch(E.val){case"G":return co(e.eras("short"),0);case"GG":return co(e.eras("long"),0);case"y":return os(d);case"yy":return os(f,u_);case"yyyy":return os(o);case"yyyyy":return os(p);case"yyyyyy":return os(i);case"M":return os(c);case"MM":return os(n);case"MMM":return co(e.months("short",!0),1);case"MMMM":return co(e.months("long",!0),1);case"L":return os(c);case"LL":return os(n);case"LLL":return co(e.months("short",!1),1);case"LLLL":return co(e.months("long",!1),1);case"d":return os(c);case"dd":return os(n);case"o":return os(u);case"ooo":return os(r);case"HH":return os(n);case"H":return os(c);case"hh":return os(n);case"h":return os(c);case"mm":return os(n);case"m":return os(c);case"q":return os(c);case"qq":return os(n);case"s":return os(c);case"ss":return os(n);case"S":return os(u);case"SSS":return os(r);case"u":return cp(m);case"uu":return cp(c);case"uuu":return os(s);case"a":return co(e.meridiems(),0);case"kkkk":return os(o);case"kk":return os(f,u_);case"W":return os(c);case"WW":return os(n);case"E":case"c":return os(s);case"EEE":return co(e.weekdays("short",!1),1);case"EEEE":return co(e.weekdays("long",!1),1);case"ccc":return co(e.weekdays("short",!0),1);case"cccc":return co(e.weekdays("long",!0),1);case"Z":case"ZZ":return kC(new RegExp(`([+-]${c.source})(?::(${n.source}))?`),2);case"ZZZ":return kC(new RegExp(`([+-]${c.source})(${n.source})?`),2);case"z":return cp(/[a-z_+-/]{1,256}?/i);case" ":return cp(/[^\S\n\r]/);default:return g(E)}})(t)||{invalidReason:jq};return C.token=t,C}const Yq={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Xq(t,e,s){const{type:n,value:r}=t;if(n==="literal"){const u=/^\s+$/.test(r);return{literal:!u,val:u?" ":r}}const o=e[n];let i=n;n==="hour"&&(e.hour12!=null?i=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?i="hour12":i="hour24":i=s.hour12?"hour12":"hour24");let c=Yq[i];if(typeof c=="object"&&(c=c[o]),c)return{literal:!1,val:c}}function Jq(t){return[`^${t.map(s=>s.regex).reduce((s,n)=>`${s}(${n.source})`,"")}$`,t]}function Zq(t,e,s){const n=t.match(e);if(n){const r={};let o=1;for(const i in s)if(iu(s,i)){const c=s[i],u=c.groups?c.groups+1:1;!c.literal&&c.token&&(r[c.token.val[0]]=c.deser(n.slice(o,o+u))),o+=u}return[n,r]}else return[n,{}]}function eB(t){const e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let s=null,n;return It(t.z)||(s=Ci.create(t.z)),It(t.Z)||(s||(s=new fr(t.Z)),n=t.Z),It(t.q)||(t.M=(t.q-1)*3+1),It(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),It(t.u)||(t.S=nx(t.u)),[Object.keys(t).reduce((o,i)=>{const c=e(i);return c&&(o[c]=t[i]),o},{}),s,n]}let Db=null;function tB(){return Db||(Db=bt.fromMillis(1555555555555)),Db}function sB(t,e){if(t.literal)return t;const s=tr.macroTokenToFormatOpts(t.val),n=cM(s,e);return n==null||n.includes(void 0)?t:n}function iM(t,e){return Array.prototype.concat(...t.map(s=>sB(s,e)))}class aM{constructor(e,s){if(this.locale=e,this.format=s,this.tokens=iM(tr.parseFormat(s),e),this.units=this.tokens.map(n=>Kq(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,r]=Jq(this.units);this.regex=RegExp(n,"i"),this.handlers=r}}explainFromTokens(e){if(this.isValid){const[s,n]=Zq(e,this.regex,this.handlers),[r,o,i]=n?eB(n):[null,null,void 0];if(iu(n,"a")&&iu(n,"H"))throw new Mc("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:s,matches:n,result:r,zone:o,specificOffset:i}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function lM(t,e,s){return new aM(t,s).explainFromTokens(e)}function nB(t,e,s){const{result:n,zone:r,specificOffset:o,invalidReason:i}=lM(t,e,s);return[n,r,o,i]}function cM(t,e){if(!t)return null;const n=tr.create(e,t).dtFormatter(tB()),r=n.formatToParts(),o=n.resolvedOptions();return r.map(i=>Xq(i,t,o))}const Nb="Invalid DateTime",rB=864e13;function Ed(t){return new po("unsupported zone",`the zone "${t.name}" is not supported`)}function Ob(t){return t.weekData===null&&(t.weekData=Rh(t.c)),t.weekData}function Fb(t){return t.localWeekData===null&&(t.localWeekData=Rh(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function el(t,e){const s={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new bt({...s,...e,old:s})}function uM(t,e,s){let n=t-e*60*1e3;const r=s.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const o=s.offset(n);return r===o?[n,r]:[t-Math.min(r,o)*60*1e3,Math.max(r,o)]}function up(t,e){t+=e*60*1e3;const s=new Date(t);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function oh(t,e,s){return uM(z0(t),e,s)}function wC(t,e){const s=t.o,n=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:n,month:r,day:Math.min(t.c.day,Lh(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},i=ss.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),c=z0(o);let[u,d]=uM(c,s,t.zone);return i!==0&&(u+=i,d=t.zone.offset(u)),{ts:u,o:d}}function pc(t,e,s,n,r,o){const{setZone:i,zone:c}=s;if(t&&Object.keys(t).length!==0||e){const u=e||c,d=bt.fromObject(t,{...s,zone:u,specificOffset:o});return i?d:d.setZone(c)}else return bt.invalid(new po("unparsable",`the input "${r}" can't be parsed as ${n}`))}function dp(t,e,s=!0){return t.isValid?tr.create(ms.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Ub(t,e){const s=t.c.year>9999||t.c.year<0;let n="";return s&&t.c.year>=0&&(n+="+"),n+=on(t.c.year,s?6:4),e?(n+="-",n+=on(t.c.month),n+="-",n+=on(t.c.day)):(n+=on(t.c.month),n+=on(t.c.day)),n}function EC(t,e,s,n,r,o){let i=on(t.c.hour);return e?(i+=":",i+=on(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!s)&&(i+=":")):i+=on(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!s)&&(i+=on(t.c.second),(t.c.millisecond!==0||!n)&&(i+=".",i+=on(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!o?i+="Z":t.o<0?(i+="-",i+=on(Math.trunc(-t.o/60)),i+=":",i+=on(Math.trunc(-t.o%60))):(i+="+",i+=on(Math.trunc(t.o/60)),i+=":",i+=on(Math.trunc(t.o%60)))),o&&(i+="["+t.zone.ianaName+"]"),i}const dM={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},oB={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},iB={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mM=["year","month","day","hour","minute","second","millisecond"],aB=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],lB=["year","ordinal","hour","minute","second","millisecond"];function cB(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new d3(t);return e}function CC(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return cB(t)}}function uB(t){if(Cd===void 0&&(Cd=Gs.now()),t.type!=="iana")return t.offset(Cd);const e=t.name;let s=d_.get(e);return s===void 0&&(s=t.offset(Cd),d_.set(e,s)),s}function SC(t,e){const s=ia(e.zone,Gs.defaultZone);if(!s.isValid)return bt.invalid(Ed(s));const n=ms.fromObject(e);let r,o;if(It(t.year))r=Gs.now();else{for(const u of mM)It(t[u])&&(t[u]=dM[u]);const i=O3(t)||F3(t);if(i)return bt.invalid(i);const c=uB(s);[r,o]=oh(t,c,s)}return new bt({ts:r,zone:s,loc:n,o})}function TC(t,e,s){const n=It(s.round)?!0:s.round,r=(i,c)=>(i=rx(i,n||s.calendary?0:2,!0),e.loc.clone(s).relFormatter(s).format(i,c)),o=i=>s.calendary?e.hasSame(t,i)?0:e.startOf(i).diff(t.startOf(i),i).get(i):e.diff(t,i).get(i);if(s.unit)return r(o(s.unit),s.unit);for(const i of s.units){const c=o(i);if(Math.abs(c)>=1)return r(c,i)}return r(t>e?-0:0,s.units[s.units.length-1])}function AC(t){let e={},s;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],s=Array.from(t).slice(0,t.length-1)):s=Array.from(t),[e,s]}let Cd;const d_=new Map;class bt{constructor(e){const s=e.zone||Gs.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new po("invalid input"):null)||(s.isValid?null:Ed(s));this.ts=It(e.ts)?Gs.now():e.ts;let r=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(s))[r,o]=[e.old.c,e.old.o];else{const c=ma(e.o)&&!e.old?e.o:s.offset(this.ts);r=up(this.ts,c),n=Number.isNaN(r.year)?new po("invalid input"):null,r=n?null:r,o=n?null:c}this._zone=s,this.loc=e.loc||ms.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=o,this.isLuxonDateTime=!0}static now(){return new bt({})}static local(){const[e,s]=AC(arguments),[n,r,o,i,c,u,d]=s;return SC({year:n,month:r,day:o,hour:i,minute:c,second:u,millisecond:d},e)}static utc(){const[e,s]=AC(arguments),[n,r,o,i,c,u,d]=s;return e.zone=fr.utcInstance,SC({year:n,month:r,day:o,hour:i,minute:c,second:u,millisecond:d},e)}static fromJSDate(e,s={}){const n=U7(e)?e.valueOf():NaN;if(Number.isNaN(n))return bt.invalid("invalid input");const r=ia(s.zone,Gs.defaultZone);return r.isValid?new bt({ts:n,zone:r,loc:ms.fromObject(s)}):bt.invalid(Ed(r))}static fromMillis(e,s={}){if(ma(e))return e<-864e13||e>rB?bt.invalid("Timestamp out of range"):new bt({ts:e,zone:ia(s.zone,Gs.defaultZone),loc:ms.fromObject(s)});throw new zn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,s={}){if(ma(e))return new bt({ts:e*1e3,zone:ia(s.zone,Gs.defaultZone),loc:ms.fromObject(s)});throw new zn("fromSeconds requires a numerical input")}static fromObject(e,s={}){e=e||{};const n=ia(s.zone,Gs.defaultZone);if(!n.isValid)return bt.invalid(Ed(n));const r=ms.fromObject(s),o=Dh(e,CC),{minDaysInFirstWeek:i,startOfWeek:c}=fC(o,r),u=Gs.now(),d=It(s.specificOffset)?n.offset(u):s.specificOffset,m=!It(o.ordinal),f=!It(o.year),p=!It(o.month)||!It(o.day),g=f||p,w=o.weekYear||o.weekNumber;if((g||m)&&w)throw new Mc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&m)throw new Mc("Can't mix ordinal dates with month/day");const C=w||o.weekday&&!g;let E,k,A=up(u,d);C?(E=aB,k=oB,A=Rh(A,i,c)):m?(E=lB,k=iB,A=Lb(A)):(E=mM,k=dM);let S=!1;for(const U of E){const M=o[U];It(M)?S?o[U]=k[U]:o[U]=A[U]:S=!0}const T=C?N7(o,i,c):m?O7(o):O3(o),R=T||F3(o);if(R)return bt.invalid(R);const L=C?dC(o,i,c):m?mC(o):o,[P,I]=oh(L,d,n),D=new bt({ts:P,zone:n,o:I,loc:r});return o.weekday&&g&&e.weekday!==D.weekday?bt.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${D.toISO()}`):D.isValid?D:bt.invalid(D.invalid)}static fromISO(e,s={}){const[n,r]=Aq(e);return pc(n,r,s,"ISO 8601",e)}static fromRFC2822(e,s={}){const[n,r]=Iq(e);return pc(n,r,s,"RFC 2822",e)}static fromHTTP(e,s={}){const[n,r]=Pq(e);return pc(n,r,s,"HTTP",s)}static fromFormat(e,s,n={}){if(It(e)||It(s))throw new zn("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:o=null}=n,i=ms.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),[c,u,d,m]=nB(i,e,s);return m?bt.invalid(m):pc(c,u,n,`format ${s}`,e,d)}static fromString(e,s,n={}){return bt.fromFormat(e,s,n)}static fromSQL(e,s={}){const[n,r]=Oq(e);return pc(n,r,s,"SQL",e)}static invalid(e,s=null){if(!e)throw new zn("need to specify a reason the DateTime is invalid");const n=e instanceof po?e:new po(e,s);if(Gs.throwOnInvalid)throw new u7(n);return new bt({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,s={}){const n=cM(e,ms.fromObject(s));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,s={}){return iM(tr.parseFormat(e),ms.fromObject(s)).map(r=>r.val).join("")}static resetCache(){Cd=void 0,d_.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ob(this).weekYear:NaN}get weekNumber(){return this.isValid?Ob(this).weekNumber:NaN}get weekday(){return this.isValid?Ob(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Fb(this).weekday:NaN}get localWeekNumber(){return this.isValid?Fb(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Fb(this).weekYear:NaN}get ordinal(){return this.isValid?Lb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lp.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lp.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lp.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lp.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,s=6e4,n=z0(this.c),r=this.zone.offset(n-e),o=this.zone.offset(n+e),i=this.zone.offset(n-r*s),c=this.zone.offset(n-o*s);if(i===c)return[this];const u=n-i*s,d=n-c*s,m=up(u,i),f=up(d,c);return m.hour===f.hour&&m.minute===f.minute&&m.second===f.second&&m.millisecond===f.millisecond?[el(this,{ts:u}),el(this,{ts:d})]:[this]}get isInLeapYear(){return mf(this.year)}get daysInMonth(){return Lh(this.year,this.month)}get daysInYear(){return this.isValid?Gc(this.year):NaN}get weeksInWeekYear(){return this.isValid?Im(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Im(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:s,numberingSystem:n,calendar:r}=tr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:s,numberingSystem:n,outputCalendar:r}}toUTC(e=0,s={}){return this.setZone(fr.instance(e),s)}toLocal(){return this.setZone(Gs.defaultZone)}setZone(e,{keepLocalTime:s=!1,keepCalendarTime:n=!1}={}){if(e=ia(e,Gs.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(s||n){const o=e.offset(this.ts),i=this.toObject();[r]=oh(i,o,e)}return el(this,{ts:r,zone:e})}else return bt.invalid(Ed(e))}reconfigure({locale:e,numberingSystem:s,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:s,outputCalendar:n});return el(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const s=Dh(e,CC),{minDaysInFirstWeek:n,startOfWeek:r}=fC(s,this.loc),o=!It(s.weekYear)||!It(s.weekNumber)||!It(s.weekday),i=!It(s.ordinal),c=!It(s.year),u=!It(s.month)||!It(s.day),d=c||u,m=s.weekYear||s.weekNumber;if((d||i)&&m)throw new Mc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&i)throw new Mc("Can't mix ordinal dates with month/day");let f;o?f=dC({...Rh(this.c,n,r),...s},n,r):It(s.ordinal)?(f={...this.toObject(),...s},It(s.day)&&(f.day=Math.min(Lh(f.year,f.month),f.day))):f=mC({...Lb(this.c),...s});const[p,g]=oh(f,this.o,this.zone);return el(this,{ts:p,o:g})}plus(e){if(!this.isValid)return this;const s=ss.fromDurationLike(e);return el(this,wC(this,s))}minus(e){if(!this.isValid)return this;const s=ss.fromDurationLike(e).negate();return el(this,wC(this,s))}startOf(e,{useLocaleWeeks:s=!1}={}){if(!this.isValid)return this;const n={},r=ss.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(s){const o=this.loc.getStartOfWeek(),{weekday:i}=this;i<o&&(n.weekNumber=this.weekNumber-1),n.weekday=o}else n.weekday=1;if(r==="quarters"){const o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)}endOf(e,s){return this.isValid?this.plus({[e]:1}).startOf(e,s).minus(1):this}toFormat(e,s={}){return this.isValid?tr.create(this.loc.redefaultToEN(s)).formatDateTimeFromString(this,e):Nb}toLocaleString(e=$h,s={}){return this.isValid?tr.create(this.loc.clone(s),e).formatDateTime(this):Nb}toLocaleParts(e={}){return this.isValid?tr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:s=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const i=e==="extended";let c=Ub(this,i);return c+="T",c+=EC(this,i,s,n,r,o),c}toISODate({format:e="extended"}={}){return this.isValid?Ub(this,e==="extended"):null}toISOWeekDate(){return dp(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:s=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:o=!1,format:i="extended"}={}){return this.isValid?(r?"T":"")+EC(this,i==="extended",s,e,n,o):null}toRFC2822(){return dp(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return dp(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ub(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:s=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(s||e)&&(n&&(r+=" "),s?r+="z":e&&(r+="ZZ")),dp(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Nb}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const s={...this.c};return e.includeConfig&&(s.outputCalendar=this.outputCalendar,s.numberingSystem=this.loc.numberingSystem,s.locale=this.loc.locale),s}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,s="milliseconds",n={}){if(!this.isValid||!e.isValid)return ss.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=q7(s).map(ss.normalizeUnit),i=e.valueOf()>this.valueOf(),c=i?this:e,u=i?e:this,d=Gq(c,u,o,r);return i?d.negate():d}diffNow(e="milliseconds",s={}){return this.diff(bt.now(),e,s)}until(e){return this.isValid?Hs.fromDateTimes(this,e):this}hasSame(e,s,n){if(!this.isValid)return!1;const r=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(s,n)<=r&&r<=o.endOf(s,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const s=e.base||bt.fromObject({},{zone:this.zone}),n=e.padding?this<s?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(r=e.unit,o=void 0),TC(s,this.plus(n),{...e,numeric:"always",units:r,unit:o})}toRelativeCalendar(e={}){return this.isValid?TC(e.base||bt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(bt.isDateTime))throw new zn("min requires all arguments be DateTimes");return pC(e,s=>s.valueOf(),Math.min)}static max(...e){if(!e.every(bt.isDateTime))throw new zn("max requires all arguments be DateTimes");return pC(e,s=>s.valueOf(),Math.max)}static fromFormatExplain(e,s,n={}){const{locale:r=null,numberingSystem:o=null}=n,i=ms.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});return lM(i,e,s)}static fromStringExplain(e,s,n={}){return bt.fromFormatExplain(e,s,n)}static buildFormatParser(e,s={}){const{locale:n=null,numberingSystem:r=null}=s,o=ms.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new aM(o,e)}static fromFormatParser(e,s,n={}){if(It(e)||It(s))throw new zn("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:o=null}=n,i=ms.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});if(!i.equals(s.locale))throw new zn(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${s.locale}`);const{result:c,zone:u,specificOffset:d,invalidReason:m}=s.explainFromTokens(e);return m?bt.invalid(m):pc(c,u,n,`format ${s.format}`,e,d)}static get DATE_SHORT(){return $h}static get DATE_MED(){return m3}static get DATE_MED_WITH_WEEKDAY(){return f7}static get DATE_FULL(){return f3}static get DATE_HUGE(){return p3}static get TIME_SIMPLE(){return h3}static get TIME_WITH_SECONDS(){return g3}static get TIME_WITH_SHORT_OFFSET(){return v3}static get TIME_WITH_LONG_OFFSET(){return b3}static get TIME_24_SIMPLE(){return y3}static get TIME_24_WITH_SECONDS(){return _3}static get TIME_24_WITH_SHORT_OFFSET(){return x3}static get TIME_24_WITH_LONG_OFFSET(){return k3}static get DATETIME_SHORT(){return w3}static get DATETIME_SHORT_WITH_SECONDS(){return E3}static get DATETIME_MED(){return C3}static get DATETIME_MED_WITH_SECONDS(){return S3}static get DATETIME_MED_WITH_WEEKDAY(){return p7}static get DATETIME_FULL(){return T3}static get DATETIME_FULL_WITH_SECONDS(){return A3}static get DATETIME_HUGE(){return I3}static get DATETIME_HUGE_WITH_SECONDS(){return P3}}function rd(t){if(bt.isDateTime(t))return t;if(t&&t.valueOf&&ma(t.valueOf()))return bt.fromJSDate(t);if(t&&typeof t=="object")return bt.fromObject(t);throw new zn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function IC(t){typeof t=="number"&&(t=new Date(t));const e=t instanceof bt?t:bt.fromJSDate(t);return e.toISODate()+" "+e.toISOTime()||""}function PC(){return bt.now().toISODate()||""}function dB(){return bt.now().minus({days:1}).toISODate()||""}function mB(){return bt.now().minus({days:2}).toISODate()||""}function MC(t){return bt.fromISO(t)}function $C(t){const e=Date.now(),s=Math.floor((t-e)/1e3);if(s<0)return"already passed";if(s<60)return`in ${s} second${s!==1?"s":""}`;const n=Math.floor(s/60);if(n<60)return`in ${n} minute${n!==1?"s":""}`;const r=Math.floor(n/60);if(r<24)return`in ${r} hour${r!==1?"s":""}`;const o=Math.floor(r/24);if(o<30)return`in ${o} day${o!==1?"s":""}`;const i=Math.floor(o/30);if(i<12)return`in ${i} month${i!==1?"s":""}`;const c=Math.floor(i/12);return`in ${c} year${c!==1?"s":""}`}const hf=Es("dailyReward",()=>{const t=Y(0),e=Y(null),s=.1,n=.05,r=30,o=q(()=>l(1+t.value*s)),i=q(()=>l(1+t.value*n)),c=q(()=>e.value?PC()!==e.value:!0),u=q(()=>{if(!e.value)return 0;const k=MC(e.value).plus({days:1}),A=bt.now(),S=Math.ceil(k.diff(A,"days").days);return Math.max(0,S)}),d=q(()=>e.value?MC(e.value).plus({days:1}).startOf("day"):bt.now()),m=()=>{const E=bt.now(),k=d.value;return k<E?0:k.diff(E).milliseconds};return{currentStreak:t,lastClaimedDate:e,foodMultiplier:o,epMultiplier:i,isRewardAvailable:c,daysUntilReset:u,nextRewardTime:d,getMillisecondsUntilNextReward:m,getFormattedTimeRemaining:()=>{const E=m();if(E<=0)return"00:00:00";const k=Math.floor(E/1e3),A=Math.floor(k/3600),S=Math.floor(k%3600/60),T=k%60,R=A.toString().padStart(2,"0"),L=S.toString().padStart(2,"0"),P=T.toString().padStart(2,"0");return`${R}:${L}:${P}`},claimDailyReward:()=>{const E=PC();if(e.value){const k=dB(),A=mB();e.value===k||e.value===A?t.value=Math.min(r,t.value+1):e.value!==E&&(t.value=1)}else t.value=1;return e.value=E,!0},resetStreak:()=>{t.value=0,e.value=null},getState:()=>({currentStreak:t.value,lastClaimedDate:e.value}),loadState:E=>{E.currentStreak!==void 0&&(t.value=E.currentStreak),E.lastClaimedDate!==void 0&&(e.value=E.lastClaimedDate)}}}),fB=()=>{};var RC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct=function(t,e){if(!t)throw Ru(e)},Ru=function(t){return new Error("Firebase Database ("+fM.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=r&63|128):(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=r&63|128)}return e},pB=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const r=t[s++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[s++];e[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[s++],i=t[s++],c=t[s++],u=((r&7)<<18|(o&63)<<12|(i&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[s++],i=t[s++];e[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|i&63)}}return e.join("")},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const o=t[r],i=r+1<t.length,c=i?t[r+1]:0,u=r+2<t.length,d=u?t[r+2]:0,m=o>>2,f=(o&3)<<4|c>>4;let p=(c&15)<<2|d>>6,g=d&63;u||(g=64,i||(p=64)),n.push(s[m],s[f],s[p],s[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const o=s[t.charAt(r++)],c=r<t.length?s[t.charAt(r)]:0;++r;const d=r<t.length?s[t.charAt(r)]:64;++r;const f=r<t.length?s[t.charAt(r)]:64;if(++r,o==null||c==null||d==null||f==null)throw new hB;const p=o<<2|c>>4;if(n.push(p),d!==64){const g=c<<4&240|d>>2;if(n.push(g),f!==64){const w=d<<6&192|f;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hM=function(t){const e=pM(t);return Y0.encodeByteArray(e,!0)},Nh=function(t){return hM(t).replace(/\./g,"")},Pm=function(t){try{return Y0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){return Mm(void 0,t)}function Mm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const s=e;return new Date(s.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const s in e)!e.hasOwnProperty(s)||!vB(s)||(t[s]=Mm(t[s],e[s]));return t}function vB(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=()=>lx().__FIREBASE_DEFAULTS__,yB=()=>{if(typeof process>"u"||typeof RC>"u")return;const t=RC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_B=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pm(t[1]);return e&&JSON.parse(e)},X0=()=>{try{return fB()||bB()||yB()||_B()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xB=t=>{var e,s;return(s=(e=X0())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},kB=t=>{const e=xB(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},gM=()=>{var t;return(t=X0())===null||t===void 0?void 0:t.config},wB=t=>{var e;return(e=X0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nh(JSON.stringify(s)),Nh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function ux(){var t;const e=(t=X0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CB(){return typeof window<"u"||vM()}function vM(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function SB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bM(){const t=un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TB(){return fM.NODE_ADMIN===!0}function AB(){return!ux()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ka(){try{return typeof indexedDB=="object"}catch{return!1}}function mx(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(s){e(s)}})}function yM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="FirebaseError";class Mn extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=IB,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Io.prototype.create)}}class Io{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?PB(o,n):"Error",c=`${this.serviceName}: ${i} (${r}).`;return new Mn(r,c,n)}}function PB(t,e){return t.replace(MB,(s,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const MB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){return JSON.parse(t)}function Fn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=function(t){let e={},s={},n={},r="";try{const o=t.split(".");e=$m(Pm(o[0])||""),s=$m(Pm(o[1])||""),r=o[2],n=s.d||{},delete s.d}catch{}return{header:e,claims:s,data:n,signature:r}},$B=function(t){const e=_M(t),s=e.claims;return!!s&&typeof s=="object"&&s.hasOwnProperty("iat")},RB=function(t){const e=_M(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function au(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function m_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oh(t,e,s){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.call(s,t[r],r,t));return n}function wa(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const r of s){if(!n.includes(r))return!1;const o=t[r],i=e[r];if(LC(o)&&LC(i)){if(!wa(o,i))return!1}else if(o!==i)return!1}for(const r of n)if(!s.includes(r))return!1;return!0}function LC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){const e=[];for(const[s,n]of Object.entries(t))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,o]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Sd(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,s){s||(s=0);const n=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)n[f]=e.charCodeAt(s)<<24|e.charCodeAt(s+1)<<16|e.charCodeAt(s+2)<<8|e.charCodeAt(s+3),s+=4;else for(let f=0;f<16;f++)n[f]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3],s+=4;for(let f=16;f<80;f++){const p=n[f-3]^n[f-8]^n[f-14]^n[f-16];n[f]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],i=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,m;for(let f=0;f<80;f++){f<40?f<20?(d=c^o&(i^c),m=1518500249):(d=o^i^c,m=1859775393):f<60?(d=o&i|c&(o|i),m=2400959708):(d=o^i^c,m=3395469782);const p=(r<<5|r>>>27)+d+u+m+n[f]&4294967295;u=c,c=i,i=(o<<30|o>>>2)&4294967295,o=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+i&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,s){if(e==null)return;s===void 0&&(s=e.length);const n=s-this.blockSize;let r=0;const o=this.buf_;let i=this.inbuf_;for(;r<s;){if(i===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<s;)if(o[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(o),i=0;break}}else for(;r<s;)if(o[i]=e[r],++i,++r,i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=s}digest(){const e=[];let s=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=s&255,s/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[r]>>o&255,++n;return e}}function xM(t,e){const s=new DB(t,e);return s.subscribe.bind(s)}class DB{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,n){let r;if(e===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");NB(e,["next","error","complete"])?r=e:r={next:e,error:s,complete:n},r.next===void 0&&(r.next=qb),r.error===void 0&&(r.error=qb),r.complete===void 0&&(r.complete=qb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NB(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function qb(){}function OB(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319){const o=r-55296;n++,ct(n<t.length,"Surrogate pair missing trail surrogate.");const i=t.charCodeAt(n)-56320;r=65536+(o<<10)+i}r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=r&63|128):r<65536?(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=r&63|128):(e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=r&63|128)}return e},Z0=function(t){let e=0;for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,s++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=1e3,qB=2,BB=4*60*60*1e3,VB=.5;function f_(t,e=UB,s=qB){const n=e*Math.pow(s,t),r=Math.round(VB*n*(Math.random()-.5)*2);return Math.min(BB,n+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class Ln{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new $l;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:s});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jB(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[o,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);n===c&&i.resolve(r)}return r}onInit(e,s){var n;const r=this.normalizeInstanceIdentifier(s),o=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const r of n)try{r(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:GB(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GB(t){return t===il?void 0:t}function jB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new HB(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=[];var Bt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Bt||(Bt={}));const wM={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},WB=Bt.INFO,zB={[Bt.DEBUG]:"log",[Bt.VERBOSE]:"log",[Bt.INFO]:"info",[Bt.WARN]:"warn",[Bt.ERROR]:"error"},QB=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=zB[e];if(r)console[r](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ba{constructor(e){this.name=e,this._logLevel=WB,this._logHandler=QB,this._userLogHandler=null,fx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bt.DEBUG,...e),this._logHandler(this,Bt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bt.VERBOSE,...e),this._logHandler(this,Bt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bt.INFO,...e),this._logHandler(this,Bt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bt.WARN,...e),this._logHandler(this,Bt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bt.ERROR,...e),this._logHandler(this,Bt.ERROR,...e)}}function KB(t){fx.forEach(e=>{e.setLogLevel(t)})}function YB(t,e){for(const s of fx){let n=null;e&&e.level&&(n=wM[e.level]),t===null?s.userLogHandler=null:s.userLogHandler=(r,o,...i)=>{const c=i.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");o>=(n??r.logLevel)&&t({level:Bt[o].toLowerCase(),message:c,args:i,type:r.name})}}}const XB=(t,e)=>e.some(s=>t instanceof s);let DC,NC;function JB(){return DC||(DC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZB(){return NC||(NC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EM=new WeakMap,p_=new WeakMap,CM=new WeakMap,Bb=new WeakMap,px=new WeakMap;function e9(t){const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{s(fa(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(s=>{s instanceof IDBCursor&&EM.set(s,t)}).catch(()=>{}),px.set(e,t),e}function t9(t){if(p_.has(t))return;const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{s(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});p_.set(t,e)}let h_={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return p_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CM.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return fa(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s9(t){h_=t(h_)}function n9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Vb(this),e,...s);return CM.set(n,e.sort?e.sort():[e]),fa(n)}:ZB().includes(t)?function(...e){return t.apply(Vb(this),e),fa(EM.get(this))}:function(...e){return fa(t.apply(Vb(this),e))}}function r9(t){return typeof t=="function"?n9(t):(t instanceof IDBTransaction&&t9(t),XB(t,JB())?new Proxy(t,h_):t)}function fa(t){if(t instanceof IDBRequest)return e9(t);if(Bb.has(t))return Bb.get(t);const e=r9(t);return e!==t&&(Bb.set(t,e),px.set(e,t)),e}const Vb=t=>px.get(t);function SM(t,e,{blocked:s,upgrade:n,blocking:r,terminated:o}={}){const i=indexedDB.open(t,e),c=fa(i);return n&&i.addEventListener("upgradeneeded",u=>{n(fa(i.result),u.oldVersion,u.newVersion,fa(i.transaction),u)}),s&&i.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const o9=["get","getKey","getAll","getAllKeys","count"],i9=["put","add","delete","clear"],Hb=new Map;function OC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hb.get(e))return Hb.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,r=i9.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(r||o9.includes(s)))return;const o=async function(i,...c){const u=this.transaction(i,r?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[s](...c),r&&u.done]))[0]};return Hb.set(e,o),o}s9(t=>({...t,get:(e,s,n)=>OC(e,s)||t.get(e,s,n),has:(e,s)=>!!OC(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(l9(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function l9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fh="@firebase/app",g_="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Ba("@firebase/app"),c9="@firebase/app-compat",u9="@firebase/analytics-compat",d9="@firebase/analytics",m9="@firebase/app-check-compat",f9="@firebase/app-check",p9="@firebase/auth",h9="@firebase/auth-compat",g9="@firebase/database",v9="@firebase/data-connect",b9="@firebase/database-compat",y9="@firebase/functions",_9="@firebase/functions-compat",x9="@firebase/installations",k9="@firebase/installations-compat",w9="@firebase/messaging",E9="@firebase/messaging-compat",C9="@firebase/performance",S9="@firebase/performance-compat",T9="@firebase/remote-config",A9="@firebase/remote-config-compat",I9="@firebase/storage",P9="@firebase/storage-compat",M9="@firebase/firestore",$9="@firebase/vertexai",R9="@firebase/firestore-compat",L9="firebase",D9="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]",N9={[Fh]:"fire-core",[c9]:"fire-core-compat",[d9]:"fire-analytics",[u9]:"fire-analytics-compat",[f9]:"fire-app-check",[m9]:"fire-app-check-compat",[p9]:"fire-auth",[h9]:"fire-auth-compat",[g9]:"fire-rtdb",[v9]:"fire-data-connect",[b9]:"fire-rtdb-compat",[y9]:"fire-fn",[_9]:"fire-fn-compat",[x9]:"fire-iid",[k9]:"fire-iid-compat",[w9]:"fire-fcm",[E9]:"fire-fcm-compat",[C9]:"fire-perf",[S9]:"fire-perf-compat",[T9]:"fire-rc",[A9]:"fire-rc-compat",[I9]:"fire-gcs",[P9]:"fire-gcs-compat",[M9]:"fire-fst",[R9]:"fire-fst-compat",[$9]:"fire-vertex","fire-js":"fire-js",[L9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Map,lu=new Map,cu=new Map;function Rm(t,e){try{t.container.addComponent(e)}catch(s){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function TM(t,e){t.container.addOrOverwriteComponent(e)}function qn(t){const e=t.name;if(cu.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;cu.set(e,t);for(const s of Ca.values())Rm(s,t);for(const s of lu.values())Rm(s,t);return!0}function Po(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function O9(t,e,s=Ea){Po(t,e).clearInstance(s)}function AM(t){return t.options!==void 0}function As(t){return t==null?!1:t.settings!==void 0}function F9(){cu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new Io("app","Firebase",U9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IM=class{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t,e){const s=Pm(t.split(".")[1]);if(s===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(s).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(s).exp*1e3,o=new Date().getTime();r-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class q9 extends IM{constructor(e,s,n,r){const o=s.automaticDataCollectionEnabled!==void 0?s.automaticDataCollectionEnabled:!1,i={name:n,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,i,r);else{const c=e;super(c.options,i,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},s),this._serverConfig.authIdToken&&FC(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&FC(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,s.releaseOnDeref=void 0,qs(Fh,g_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gx(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw to.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=D9;function hx(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ea,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw to.create("bad-app-name",{appName:String(r)});if(s||(s=gM()),!s)throw to.create("no-options");const o=Ca.get(r);if(o){if(wa(s,o.options)&&wa(n,o.config))return o;throw to.create("duplicate-app",{appName:r})}const i=new kM(r);for(const u of cu.values())i.addComponent(u);const c=new IM(s,n,i);return Ca.set(r,c),c}function B9(t,e){if(CB()&&!vM())throw to.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let s;AM(t)?s=t.options:s=t;const n=Object.assign(Object.assign({},e),s);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;const r=d=>[...d].reduce((m,f)=>Math.imul(31,m)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw to.create("finalization-registry-not-supported",{});const o=""+r(JSON.stringify(n)),i=lu.get(o);if(i)return i.incRefCount(e.releaseOnDeref),i;const c=new kM(o);for(const d of cu.values())c.addComponent(d);const u=new q9(s,e,o,c);return lu.set(o,u),u}function Lu(t=Ea){const e=Ca.get(t);if(!e&&t===Ea&&gM())return hx();if(!e)throw to.create("no-app",{appName:t});return e}function V9(){return Array.from(Ca.values())}async function gx(t){let e=!1;const s=t.name;Ca.has(s)?(e=!0,Ca.delete(s)):lu.has(s)&&t.decRefCount()<=0&&(lu.delete(s),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function qs(t,e,s){var n;let r=(n=N9[t])!==null&&n!==void 0?n:t;s&&(r+=`-${s}`);const o=r.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&i&&c.push("and"),i&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(c.join(" "));return}qn(new Ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function PM(t,e){if(t!==null&&typeof t!="function")throw to.create("invalid-log-argument");YB(t,e)}function MM(t){KB(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="firebase-heartbeat-database",G9=1,Lm="firebase-heartbeat-store";let Gb=null;function $M(){return Gb||(Gb=SM(H9,G9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lm)}catch(s){console.warn(s)}}}}).catch(t=>{throw to.create("idb-open",{originalErrorMessage:t.message})})),Gb}async function j9(t){try{const s=(await $M()).transaction(Lm),n=await s.objectStore(Lm).get(RM(t));return await s.done,n}catch(e){if(e instanceof Mn)Si.warn(e.message);else{const s=to.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(s.message)}}}async function UC(t,e){try{const n=(await $M()).transaction(Lm,"readwrite");await n.objectStore(Lm).put(e,RM(t)),await n.done}catch(s){if(s instanceof Mn)Si.warn(s.message);else{const n=to.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Si.warn(n.message)}}}function RM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=1024,z9=30;class Q9{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new Y9(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=qC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>z9){const i=X9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Si.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=qC(),{heartbeatsToSend:n,unsentEntries:r}=K9(this._heartbeatsCache.heartbeats),o=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return Si.warn(s),""}}}function qC(){return new Date().toISOString().substring(0,10)}function K9(t,e=W9){const s=[];let n=t.slice();for(const r of t){const o=s.find(i=>i.agent===r.agent);if(o){if(o.dates.push(r.date),BC(s)>e){o.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),BC(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class Y9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ka()?mx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await j9(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return UC(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return UC(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BC(t){return Nh(JSON.stringify({version:2,heartbeats:t})).length}function X9(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let n=1;n<t.length;n++)t[n].date<s&&(s=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){qn(new Ln("platform-logger",e=>new a9(e),"PRIVATE")),qn(new Ln("heartbeat",e=>new Q9(e),"PRIVATE")),qs(Fh,g_,t),qs(Fh,g_,"esm2017"),qs("fire-js","")}J9("");const Z9=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Mn,SDK_VERSION:si,_DEFAULT_ENTRY_NAME:Ea,_addComponent:Rm,_addOrOverwriteComponent:TM,_apps:Ca,_clearComponents:F9,_components:cu,_getProvider:Po,_isFirebaseApp:AM,_isFirebaseServerApp:As,_registerComponent:qn,_removeServiceInstance:O9,_serverApps:lu,deleteApp:gx,getApp:Lu,getApps:V9,initializeApp:hx,initializeServerApp:B9,onLog:PM,registerVersion:qs,setLogLevel:MM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,s){this._delegate=e,this.firebase=s,Rm(e,new Ln("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),gx(this._delegate)))}_getService(e,s=Ea){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((n=r.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:s})}_removeServiceInstance(e,s=Ea){this._delegate.container.getProvider(e).clearInstance(s)}_addComponent(e){Rm(this._delegate,e)}_addOrOverwriteComponent(e){TM(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},VC=new Io("app-compat","Firebase",tV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){const e={},s={__esModule:!0,initializeApp:o,app:r,registerVersion:qs,setLogLevel:MM,onLog:PM,apps:null,SDK_VERSION:si,INTERNAL:{registerComponent:c,removeApp:n,useAsService:u,modularAPIs:Z9}};s.default=s,Object.defineProperty(s,"apps",{get:i});function n(d){delete e[d]}function r(d){if(d=d||Ea,!To(e,d))throw VC.create("no-app",{appName:d});return e[d]}r.App=t;function o(d,m={}){const f=hx(d,m);if(To(e,f.name))return e[f.name];const p=new t(f,s);return e[f.name]=p,p}function i(){return Object.keys(e).map(d=>e[d])}function c(d){const m=d.name,f=m.replace("-compat","");if(qn(d)&&d.type==="PUBLIC"){const p=(g=r())=>{if(typeof g[f]!="function")throw VC.create("invalid-app-argument",{appName:m});return g[f]()};d.serviceProps!==void 0&&Mm(p,d.serviceProps),s[f]=p,t.prototype[f]=function(...g){return this._getService.bind(this,m).apply(this,d.multipleInstances?g:[])}}return d.type==="PUBLIC"?s[f]:null}function u(d,m){return m==="serverAuth"?null:m}return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){const t=sV(eV);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:LM,extendNamespace:e,createSubscribe:xM,ErrorFactory:Io,deepExtend:Mm});function e(s){Mm(t,s)}return t}const nV=LM();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new Ba("@firebase/app-compat"),rV="@firebase/app-compat",oV="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){qs(rV,oV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=lx();if(t.firebase!==void 0){HC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&HC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const vi=nV;iV();var aV="firebase",lV="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.registerVersion(aV,lV,"app-compat");function vx(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s}const od={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},hc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function DM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uV=cV,dV=DM,NM=new Io("auth","Firebase",DM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Ba("@firebase/auth");function mV(t,...e){Uh.logLevel<=Bt.WARN&&Uh.warn(`Auth (${si}): ${t}`,...e)}function ih(t,...e){Uh.logLevel<=Bt.ERROR&&Uh.error(`Auth (${si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw yx(t,...e)}function gn(t,...e){return yx(t,...e)}function bx(t,e,s){const n=Object.assign(Object.assign({},dV()),{[e]:s});return new Io("auth","Firebase",n).create(e,{appName:t.name})}function $n(t){return bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Du(t,e,s){const n=s;if(!(e instanceof n))throw n.name!==e.constructor.name&&Dn(t,"argument-error"),bx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yx(t,...e){if(typeof t!="string"){const s=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(s,...n)}return NM.create(t,...e)}function tt(t,e,...s){if(!t)throw yx(e,...s)}function Go(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ih(e),new Error(e)}function Ao(t,e){t||Go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _x(){return GC()==="http:"||GC()==="https:"}function GC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_x()||dx()||"connection"in navigator)?navigator.onLine:!0}function pV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ao(s>e,"Short delay should be less than long delay!"),this.isMobile=cx()||J0()}get(){return fV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){Ao(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{static initialize(e,s,n){this.fetchImpl=e,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vV=new gf(3e4,6e4);function Xs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Js(t,e,s,n,r={}){return FM(t,r,async()=>{let o={},i={};n&&(e==="GET"?i=n:o={body:JSON.stringify(n)});const c=zl(Object.assign({key:t.config.apiKey},i)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},o);return SB()||(d.referrerPolicy="no-referrer"),OM.fetch()(await UM(t,t.config.apiHost,s,c),d)})}async function FM(t,e,s){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},hV),e);try{const r=new yV(t),o=await Promise.race([s(),r.promise]);r.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Td(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const c=o.ok?i.errorMessage:i.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Td(t,"credential-already-in-use",i);if(u==="EMAIL_EXISTS")throw Td(t,"email-already-in-use",i);if(u==="USER_DISABLED")throw Td(t,"user-disabled",i);const m=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bx(t,m,d);Dn(t,m)}}catch(r){if(r instanceof Mn)throw r;Dn(t,"network-request-failed",{message:String(r)})}}async function Li(t,e,s,n,r={}){const o=await Js(t,e,s,n,r);return"mfaPendingCredential"in o&&Dn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function UM(t,e,s,n){const r=`${e}${s}?${n}`,o=t,i=o.config.emulator?xx(t.config,r):`${t.config.apiScheme}://${r}`;return gV.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}function bV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(gn(this.auth,"network-request-failed")),vV.get())})}}function Td(t,e,s){const n={appName:t.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const r=gn(t,e,n);return r.customData._tokenResponse=s,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){return t!==void 0&&t.getResponse!==void 0}function WC(t){return t!==void 0&&t.enterprise!==void 0}class qM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return bV(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t){return(await Js(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function BM(t,e){return Js(t,"GET","/v2/recaptchaConfig",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t,e){return Js(t,"POST","/v1/accounts:delete",e)}async function kV(t,e){return Js(t,"POST","/v1/accounts:update",e)}async function qh(t,e){return Js(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wV(t,e=!1){const s=Ft(t),n=await s.getIdToken(e),r=eg(n);tt(r&&r.exp&&r.auth_time&&r.iat,s.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,i=o==null?void 0:o.sign_in_provider;return{claims:r,token:n,authTime:zd(jb(r.auth_time)),issuedAtTime:zd(jb(r.iat)),expirationTime:zd(jb(r.exp)),signInProvider:i||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function jb(t){return Number(t)*1e3}function eg(t){const[e,s,n]=t.split(".");if(e===void 0||s===void 0||n===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const r=Pm(s);return r?JSON.parse(r):(ih("Failed to decode base64 JWT payload"),null)}catch(r){return ih("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function zC(t){const e=eg(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e,s=!1){if(s)return e;try{return await e}catch(n){throw n instanceof Mn&&EV(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function EV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=zd(this.lastLoginAt),this.creationTime=zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t){var e;const s=t.auth,n=await t.getIdToken(),r=await Ti(t,qh(s,{idToken:n}));tt(r==null?void 0:r.users.length,s,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VM(o.providerUserInfo):[],c=TV(t.providerData,i),u=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new v_(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,f)}async function SV(t){const e=Ft(t);await Nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TV(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function VM(t){return t.map(e=>{var{providerId:s}=e,n=vx(e,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(t,e){const s=await FM(t,{},async()=>{const n=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,i=await UM(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",OM.fetch()(i,{method:"POST",headers:c,body:n})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function IV(t,e){return Js(t,"POST","/v2/accounts:revokeToken",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const s=zC(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:n,refreshToken:r,expiresIn:o}=await AV(e,s);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,s,n){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,s){const{refreshToken:n,accessToken:r,expirationTime:o}=s,i=new Wc;return n&&(tt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),r&&(tt(typeof r=="string","internal-error",{appName:e}),i.accessToken=r),o&&(tt(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wc,this.toJSON())}_performRefresh(){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ho{constructor(e){var{uid:s,auth:n,stsTokenManager:r}=e,o=vx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new v_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await Ti(this,this.stsTokenManager.getToken(this.auth,e));return tt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return wV(this,e)}reload(){return SV(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new ho(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),s&&await Nm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(As(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await Ti(this,xV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var n,r,o,i,c,u,d,m;const f=(n=s.displayName)!==null&&n!==void 0?n:void 0,p=(r=s.email)!==null&&r!==void 0?r:void 0,g=(o=s.phoneNumber)!==null&&o!==void 0?o:void 0,w=(i=s.photoURL)!==null&&i!==void 0?i:void 0,C=(c=s.tenantId)!==null&&c!==void 0?c:void 0,E=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,k=(d=s.createdAt)!==null&&d!==void 0?d:void 0,A=(m=s.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:S,emailVerified:T,isAnonymous:R,providerData:L,stsTokenManager:P}=s;tt(S&&P,e,"internal-error");const I=Wc.fromJSON(this.name,P);tt(typeof S=="string",e,"internal-error"),Gi(f,e.name),Gi(p,e.name),tt(typeof T=="boolean",e,"internal-error"),tt(typeof R=="boolean",e,"internal-error"),Gi(g,e.name),Gi(w,e.name),Gi(C,e.name),Gi(E,e.name),Gi(k,e.name),Gi(A,e.name);const D=new ho({uid:S,auth:e,email:p,emailVerified:T,displayName:f,isAnonymous:R,photoURL:w,phoneNumber:g,tenantId:C,stsTokenManager:I,createdAt:k,lastLoginAt:A});return L&&Array.isArray(L)&&(D.providerData=L.map(U=>Object.assign({},U))),E&&(D._redirectEventId=E),D}static async _fromIdTokenResponse(e,s,n=!1){const r=new Wc;r.updateFromServerResponse(s);const o=new ho({uid:s.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Nm(o),o}static async _fromGetAccountInfoResponse(e,s,n){const r=s.users[0];tt(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?VM(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new Wc;c.updateFromIdToken(n);const u=new ho({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:i}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new v_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Map;function Lr(t){Ao(t instanceof Function,"Expected a class definition");let e=QC.get(t);return e?(Ao(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}HM.type="NONE";const uu=HM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e,s){return`firebase:${t}:${e}:${s}`}class zc{constructor(e,s,n){this.persistence=e,this.auth=s,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=El(this.userKey,r.apiKey,o),this.fullPersistenceKey=El("persistence",r.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await qh(this.auth,{idToken:e}).catch(()=>{});return s?ho._fromGetAccountInfoResponse(this.auth,s,e):null}return ho._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,n="authUser"){if(!s.length)return new zc(Lr(uu),e,n);const r=(await Promise.all(s.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Lr(uu);const i=El(n,e.config.apiKey,e.name);let c=null;for(const d of s)try{const m=await d._get(i);if(m){let f;if(typeof m=="string"){const p=await qh(e,{idToken:m}).catch(()=>{});if(!p)break;f=await ho._fromGetAccountInfoResponse(e,p,m)}else f=ho._fromJSON(e,m);d!==o&&(c=f),o=d;break}}catch{}const u=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new zc(o,e,n):(o=u[0],c&&await o._set(i,c.toJSON()),await Promise.all(s.map(async d=>{if(d!==o)try{await d._remove(i)}catch{}})),new zc(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QM(e))return"Blackberry";if(KM(e))return"Webos";if(jM(e))return"Safari";if((e.includes("chrome/")||WM(e))&&!e.includes("edge/"))return"Chrome";if(vf(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function GM(t=un()){return/firefox\//i.test(t)}function jM(t=un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WM(t=un()){return/crios\//i.test(t)}function zM(t=un()){return/iemobile/i.test(t)}function vf(t=un()){return/android/i.test(t)}function QM(t=un()){return/blackberry/i.test(t)}function KM(t=un()){return/webos/i.test(t)}function bf(t=un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PV(t=un()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function MV(t=un()){var e;return bf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $V(){return bM()&&document.documentMode===10}function YM(t=un()){return bf(t)||vf(t)||KM(t)||QM(t)||/windows phone/i.test(t)||zM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t,e=[]){let s;switch(t){case"Browser":s=KC(un());break;case"Worker":s=`${KC(un())}-${t}`;break;default:s=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${si}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const n=o=>new Promise((i,c)=>{try{const u=e(o);i(u)}catch(u){c(u)}});n.onAbort=s,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const n of this.queue)await n(e),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const r of s)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e={}){return Js(t,"GET","/v2/passwordPolicy",Xs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=6;class NV{constructor(e){var s,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=i.minPasswordLength)!==null&&s!==void 0?s:DV,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,n,r,o,i,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(i=u.containsNumericCharacter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,s){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=e.length>=n),r&&(s.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,s,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,s,n,r){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YC(this),this.idTokenSubscription=new YC(this),this.beforeStateQueue=new RV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Lr(s)),this._initializationPromise=this.queue(async()=>{var n,r,o;if(!this._deleted&&(this.persistenceManager=await zc.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await qh(this,{idToken:e}),n=await ho._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(As(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!i||i===c)&&(u!=null&&u.user)&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Nm(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(As(this.app))return Promise.reject($n(this));const s=e?Ft(e):null;return s&&tt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return As(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return As(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LV(this),s=new NV(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Io("auth","Firebase",e())}onAuthStateChanged(e,s,n){return this.registerStateListener(this.authStateSubscription,e,s,n)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,n){return this.registerStateListener(this.idTokenSubscription,e,s,n)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await IV(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const n=await this.getOrInitRedirectPersistenceManager(s);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Lr(e)||this._popupRedirectResolver;tt(s,this,"argument-error"),this.redirectPersistenceManager=await zc.create(this,[Lr(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,n,r){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let i=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(c,this,"internal-error"),c.then(()=>{i||o(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,n,r);return()=>{i=!0,u()}}else{const u=e.addObserver(s);return()=>{i=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(s["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(s["X-Firebase-AppCheck"]=r),s}async _getAppCheckToken(){var e;if(As(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&mV(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function Bs(t){return Ft(t)}class YC{constructor(e){this.auth=e,this.observer=null,this.addObserver=xM(s=>this.observer=s)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FV(t){yf=t}function kx(t){return yf.loadJS(t)}function UV(){return yf.recaptchaV2Script}function qV(){return yf.recaptchaEnterpriseScript}function BV(){return yf.gapiScript}function JM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=500,HV=6e4,mp=1e12;class GV{constructor(e){this.auth=e,this.counter=mp,this._widgets=new Map}render(e,s){const n=this.counter;return this._widgets.set(n,new zV(e,this.auth.name,s||{})),this.counter++,n}reset(e){var s;const n=e||mp;(s=this._widgets.get(n))===null||s===void 0||s.delete(),this._widgets.delete(n)}getResponse(e){var s;const n=e||mp;return((s=this._widgets.get(n))===null||s===void 0?void 0:s.getResponse())||""}async execute(e){var s;const n=e||mp;return(s=this._widgets.get(n))===null||s===void 0||s.execute(),""}}class jV{constructor(){this.enterprise=new WV}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class WV{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class zV{constructor(e,s,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;tt(r,"argument-error",{appName:s}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=QV(50);const{callback:e,"expired-callback":s}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,s)try{s()}catch{}this.isVisible&&this.execute()},HV)},VV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function QV(t){const e=[],s="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<t;n++)e.push(s.charAt(Math.floor(Math.random()*s.length)));return e.join("")}const KV="recaptcha-enterprise",Qd="NO_RECAPTCHA";class ZM{constructor(e){this.type=KV,this.auth=Bs(e)}async verify(e="verify",s=!1){async function n(o){if(!s){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(i,c)=>{BM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new qM(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,i(d.siteKey)}}).catch(u=>{c(u)})})}function r(o,i,c){const u=window.grecaptcha;WC(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{i(d)}).catch(()=>{i(Qd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jV().execute("siteKey",{action:"verify"}):new Promise((o,i)=>{n(this.auth).then(c=>{if(!s&&WC(window.grecaptcha))r(c,o,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qV();u.length!==0&&(u+=c),kx(u).then(()=>{r(c,o,i)}).catch(d=>{i(d)})}}).catch(c=>{i(c)})})}}async function id(t,e,s,n=!1,r=!1){const o=new ZM(t);let i;if(r)i=Qd;else try{i=await o.verify(s)}catch{i=await o.verify(s,!0)}const c=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return n?Object.assign(c,{captchaResp:i}):Object.assign(c,{captchaResponse:i}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function pa(t,e,s,n,r){var o,i;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await id(t,e,s,s==="getOobCode");return n(t,c)}else return n(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await id(t,e,s,s==="getOobCode");return n(t,u)}else return Promise.reject(c)});else if(r==="PHONE_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("PHONE_PROVIDER")){const c=await id(t,e,s);return n(t,c).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${s} flow.`);const m=await id(t,e,s,!1,!0);return n(t,m)}return Promise.reject(u)})}else{const c=await id(t,e,s,!1,!0);return n(t,c)}else return Promise.reject(r+" provider is not supported.")}async function YV(t){const e=Bs(t),s=await BM(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new qM(s);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new ZM(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t,e){const s=Po(t,"auth");if(s.isInitialized()){const r=s.getImmediate(),o=s.getOptions();if(wa(o,e??{}))return r;Dn(r,"already-initialized")}return s.initialize({options:e})}function JV(t,e){const s=(e==null?void 0:e.persistence)||[],n=(Array.isArray(s)?s:[s]).map(Lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function ZV(t,e,s){const n=Bs(t);tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!!(s!=null&&s.disableWarnings),o=e4(e),{host:i,port:c}=eH(e),u=c===null?"":`:${c}`,d={url:`${o}//${i}${u}/`},m=Object.freeze({host:i,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){tt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),tt(wa(d,n.config.emulator)&&wa(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,r||tH()}function e4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eH(t){const e=e4(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const o=r[1];return{host:o,port:XC(n.substr(o.length+1))}}else{const[o,i]=n.split(":");return{host:o,port:XC(i)}}}function XC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tH(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Go("not implemented")}_getIdTokenResponse(e){return Go("not implemented")}_linkToIdToken(e,s){return Go("not implemented")}_getReauthenticationResolver(e){return Go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e){return Js(t,"POST","/v1/accounts:resetPassword",Xs(t,e))}async function sH(t,e){return Js(t,"POST","/v1/accounts:update",e)}async function nH(t,e){return Js(t,"POST","/v1/accounts:signUp",e)}async function rH(t,e){return Js(t,"POST","/v1/accounts:update",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){return Li(t,"POST","/v1/accounts:signInWithPassword",Xs(t,e))}async function tg(t,e){return Js(t,"POST","/v1/accounts:sendOobCode",Xs(t,e))}async function iH(t,e){return tg(t,e)}async function aH(t,e){return tg(t,e)}async function lH(t,e){return tg(t,e)}async function cH(t,e){return tg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uH(t,e){return Li(t,"POST","/v1/accounts:signInWithEmailLink",Xs(t,e))}async function dH(t,e){return Li(t,"POST","/v1/accounts:signInWithEmailLink",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Nu{constructor(e,s,n,r=null){super("password",n),this._email=e,this._password=s,this._tenantId=r}static _fromEmailAndPassword(e,s){return new Om(e,s,"password")}static _fromEmailAndCode(e,s,n=null){return new Om(e,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pa(e,s,"signInWithPassword",oH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uH(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const n={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pa(e,n,"signUpPassword",nH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dH(e,{idToken:s,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e){return Li(t,"POST","/v1/accounts:signInWithIdp",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH="http://localhost";class Jo extends Nu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Dn("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=s,o=vx(s,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Jo(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const s=this.buildRequest();return ki(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,ki(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,ki(e,s)}buildRequest(){const e={requestUri:mH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=zl(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(t,e){return Js(t,"POST","/v1/accounts:sendVerificationCode",Xs(t,e))}async function fH(t,e){return Li(t,"POST","/v1/accounts:signInWithPhoneNumber",Xs(t,e))}async function pH(t,e){const s=await Li(t,"POST","/v1/accounts:signInWithPhoneNumber",Xs(t,e));if(s.temporaryProof)throw Td(t,"account-exists-with-different-credential",s);return s}const hH={USER_NOT_FOUND:"user-not-found"};async function gH(t,e){const s=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Li(t,"POST","/v1/accounts:signInWithPhoneNumber",Xs(t,s),hH)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Nu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,s){return new Cl({verificationId:e,verificationCode:s})}static _fromTokenResponse(e,s){return new Cl({phoneNumber:e,temporaryProof:s})}_getIdTokenResponse(e){return fH(e,this._makeVerificationRequest())}_linkToIdToken(e,s){return pH(e,Object.assign({idToken:s},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return gH(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:s,verificationId:n,verificationCode:r}=this.params;return e&&s?{temporaryProof:e,phoneNumber:s}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:s,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return!n&&!s&&!r&&!o?null:new Cl({verificationId:s,verificationCode:n,phoneNumber:r,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bH(t){const e=$c(Sd(t)).link,s=e?$c(Sd(e)).deep_link_id:null,n=$c(Sd(t)).deep_link_id;return(n?$c(Sd(n)).link:null)||n||s||e||t}class sg{constructor(e){var s,n,r,o,i,c;const u=$c(Sd(e)),d=(s=u.apiKey)!==null&&s!==void 0?s:null,m=(n=u.oobCode)!==null&&n!==void 0?n:null,f=vH((r=u.mode)!==null&&r!==void 0?r:null);tt(d&&m&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(i=u.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const s=bH(e);try{return new sg(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.providerId=Va.PROVIDER_ID}static credential(e,s){return Om._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const n=sg.parseLink(s);return tt(n,"argument-error"),Om._fromEmailAndCode(e,n.code,n.tenantId)}}Va.PROVIDER_ID="password";Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qc extends Ou{static credentialFromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;return tt("providerId"in s&&"signInMethod"in s,"argument-error"),Jo._fromParams(s)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tt(e.idToken||e.accessToken,"argument-error"),Jo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Qc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Qc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:o,nonce:i,providerId:c}=e;if(!n&&!r&&!s&&!o||!c)return null;try{return new Qc(c)._credential({idToken:s,accessToken:n,nonce:i,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Ou{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Jo._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n}=e;if(!s&&!n)return null;try{return qo.credential(s,n)}catch{return null}}}qo.GOOGLE_SIGN_IN_METHOD="google.com";qo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Ou{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.GITHUB_SIGN_IN_METHOD="github.com";Bo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="http://localhost";class du extends Nu{constructor(e,s){super(e,e),this.pendingToken=s}_getIdTokenResponse(e){const s=this.buildRequest();return ki(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,ki(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,ki(e,s)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:o}=s;return!n||!r||!o||n!==r?null:new du(n,o)}static _create(e,s){return new du(e,s)}buildRequest(){return{requestUri:yH,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H="saml.";class Bh extends Di{constructor(e){tt(e.startsWith(_H),"argument-error"),super(e)}static credentialFromResult(e){return Bh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Bh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const s=du.fromJSON(e);return tt(s,"argument-error"),s}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:s,providerId:n}=e;if(!s||!n)return null;try{return du._create(n,s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Ou{constructor(){super("twitter.com")}static credential(e,s){return Jo._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=e;if(!s||!n)return null;try{return Vo.credential(s,n)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return Li(t,"POST","/v1/accounts:signUp",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,n,r=!1){const o=await ho._fromIdTokenResponse(e,n,r),i=ZC(n);return new no({user:o,providerId:i,_tokenResponse:n,operationType:s})}static async _forOperation(e,s,n){await e._updateTokensIfNecessary(n,!0);const r=ZC(n);return new no({user:e,providerId:r,_tokenResponse:n,operationType:s})}}function ZC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xH(t){var e;if(As(t.app))return Promise.reject($n(t));const s=Bs(t);if(await s._initializationPromise,!((e=s.currentUser)===null||e===void 0)&&e.isAnonymous)return new no({user:s.currentUser,providerId:null,operationType:"signIn"});const n=await s4(s,{returnSecureToken:!0}),r=await no._fromIdTokenResponse(s,"signIn",n,!0);return await s._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Mn{constructor(e,s,n,r){var o;super(s.code,s.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,s,n,r){return new Vh(e,s,n,r)}}function n4(t,e,s,n){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,o,e,n):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kH(t,e){const s=Ft(t);await ng(!0,s,e);const{providerUserInfo:n}=await kV(s.auth,{idToken:await s.getIdToken(),deleteProvider:[e]}),r=r4(n||[]);return s.providerData=s.providerData.filter(o=>r.has(o.providerId)),r.has("phone")||(s.phoneNumber=null),await s.auth._persistUserIfCurrent(s),s}async function wx(t,e,s=!1){const n=await Ti(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return no._forOperation(t,"link",n)}async function ng(t,e,s){await Nm(e);const n=r4(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";tt(n.has(s)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e,s=!1){const{auth:n}=t;if(As(n.app))return Promise.reject($n(n));const r="reauthenticate";try{const o=await Ti(t,n4(n,r,e,t),s);tt(o.idToken,n,"internal-error");const i=eg(o.idToken);tt(i,n,"internal-error");const{sub:c}=i;return tt(t.uid===c,n,"user-mismatch"),no._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Dn(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e,s=!1){if(As(t.app))return Promise.reject($n(t));const n="signIn",r=await n4(t,n,e),o=await no._fromIdTokenResponse(t,n,r);return s||await t._updateCurrentUser(o.user),o}async function rg(t,e){return i4(Bs(t),e)}async function a4(t,e){const s=Ft(t);return await ng(!1,s,e.providerId),wx(s,e)}async function l4(t,e){return o4(Ft(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(t,e){return Li(t,"POST","/v1/accounts:signInWithCustomToken",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EH(t,e){if(As(t.app))return Promise.reject($n(t));const s=Bs(t),n=await wH(s,{token:e,returnSecureToken:!0}),r=await no._fromIdTokenResponse(s,"signIn",n);return await s._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,s){this.factorId=e,this.uid=s.mfaEnrollmentId,this.enrollmentTime=new Date(s.enrolledAt).toUTCString(),this.displayName=s.displayName}static _fromServerResponse(e,s){return"phoneInfo"in s?Ex._fromServerResponse(e,s):"totpInfo"in s?Cx._fromServerResponse(e,s):Dn(e,"internal-error")}}class Ex extends _f{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,s){return new Ex(s)}}class Cx extends _f{constructor(e){super("totp",e)}static _fromServerResponse(e,s){return new Cx(s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e,s){var n;tt(((n=s.url)===null||n===void 0?void 0:n.length)>0,t,"invalid-continue-uri"),tt(typeof s.dynamicLinkDomain>"u"||s.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),tt(typeof s.linkDomain>"u"||s.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=s.url,e.dynamicLinkDomain=s.dynamicLinkDomain,e.linkDomain=s.linkDomain,e.canHandleCodeInApp=s.handleCodeInApp,s.iOS&&(tt(s.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=s.iOS.bundleId),s.android&&(tt(s.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=s.android.installApp,e.androidMinimumVersionCode=s.android.minimumVersion,e.androidPackageName=s.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t){const e=Bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CH(t,e,s){const n=Bs(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};s&&og(n,r,s),await pa(n,r,"getOobCode",aH,"EMAIL_PASSWORD_PROVIDER")}async function SH(t,e,s){await t4(Ft(t),{oobCode:e,newPassword:s}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Sx(t),n})}async function TH(t,e){await rH(Ft(t),{oobCode:e})}async function c4(t,e){const s=Ft(t),n=await t4(s,{oobCode:e}),r=n.requestType;switch(tt(r,s,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(n.newEmail,s,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(n.mfaInfo,s,"internal-error");default:tt(n.email,s,"internal-error")}let o=null;return n.mfaInfo&&(o=_f._fromServerResponse(Bs(s),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:o},operation:r}}async function AH(t,e){const{data:s}=await c4(Ft(t),e);return s.email}async function IH(t,e,s){if(As(t.app))return Promise.reject($n(t));const n=Bs(t),i=await pa(n,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s4,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Sx(t),u}),c=await no._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(c.user),c}function PH(t,e,s){return As(t.app)?Promise.reject($n(t)):rg(Ft(t),Va.credential(e,s)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Sx(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MH(t,e,s){const n=Bs(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(i,c){tt(c.handleCodeInApp,n,"argument-error"),c&&og(n,i,c)}o(r,s),await pa(n,r,"getOobCode",lH,"EMAIL_PASSWORD_PROVIDER")}function $H(t,e){const s=sg.parseLink(e);return(s==null?void 0:s.operation)==="EMAIL_SIGNIN"}async function RH(t,e,s){if(As(t.app))return Promise.reject($n(t));const n=Ft(t),r=Va.credentialWithLink(e,s||Dm());return tt(r._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),rg(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LH(t,e){return Js(t,"POST","/v1/accounts:createAuthUri",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DH(t,e){const s=_x()?Dm():"http://localhost",n={identifier:e,continueUri:s},{signinMethods:r}=await LH(Ft(t),n);return r||[]}async function NH(t,e){const s=Ft(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&og(s.auth,r,e);const{email:o}=await iH(s.auth,r);o!==t.email&&await t.reload()}async function OH(t,e,s){const n=Ft(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};s&&og(n.auth,o,s);const{email:i}=await cH(n.auth,o);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH(t,e){return Js(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const n=Ft(t),o={idToken:await n.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},i=await Ti(n,FH(n.auth,o));n.displayName=i.displayName||null,n.photoURL=i.photoUrl||null;const c=n.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=n.displayName,c.photoURL=n.photoURL),await n._updateTokensIfNecessary(i)}function qH(t,e){const s=Ft(t);return As(s.auth.app)?Promise.reject($n(s.auth)):u4(s,e,null)}function BH(t,e){return u4(Ft(t),null,e)}async function u4(t,e,s){const{auth:n}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),s&&(o.password=s);const i=await Ti(t,sH(n,o));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t){var e,s;if(!t)return null;const{providerId:n}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!n&&(t!=null&&t.idToken)){const i=(s=(e=eg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||s===void 0?void 0:s.sign_in_provider;if(i){const c=i!=="anonymous"&&i!=="custom"?i:null;return new Kc(o,c)}}if(!n)return null;switch(n){case"facebook.com":return new HH(o,r);case"github.com":return new GH(o,r);case"google.com":return new jH(o,r);case"twitter.com":return new WH(o,r,t.screenName||null);case"custom":case"anonymous":return new Kc(o,null);default:return new Kc(o,n,r)}}class Kc{constructor(e,s,n={}){this.isNewUser=e,this.providerId=s,this.profile=n}}class d4 extends Kc{constructor(e,s,n,r){super(e,s,n),this.username=r}}class HH extends Kc{constructor(e,s){super(e,"facebook.com",s)}}class GH extends d4{constructor(e,s){super(e,"github.com",s,typeof(s==null?void 0:s.login)=="string"?s==null?void 0:s.login:null)}}class jH extends Kc{constructor(e,s){super(e,"google.com",s)}}class WH extends d4{constructor(e,s,n){super(e,"twitter.com",s,n)}}function zH(t){const{user:e,_tokenResponse:s}=t;return e.isAnonymous&&!s?{providerId:null,isNewUser:!1,profile:null}:VH(s)}function QH(t,e,s,n){return Ft(t).onIdTokenChanged(e,s,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,s,n){this.type=e,this.credential=s,this.user=n}static _fromIdtoken(e,s){return new hl("enroll",e,s)}static _fromMfaPendingCredential(e){return new hl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var s,n;if(e!=null&&e.multiFactorSession){if(!((s=e.multiFactorSession)===null||s===void 0)&&s.pendingCredential)return hl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((n=e.multiFactorSession)===null||n===void 0)&&n.idToken)return hl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,s,n){this.session=e,this.hints=s,this.signInResolver=n}static _fromError(e,s){const n=Bs(e),r=s.customData._serverResponse,o=(r.mfaInfo||[]).map(c=>_f._fromServerResponse(n,c));tt(r.mfaPendingCredential,n,"internal-error");const i=hl._fromMfaPendingCredential(r.mfaPendingCredential);return new Tx(i,o,async c=>{const u=await c._process(n,i);delete r.mfaInfo,delete r.mfaPendingCredential;const d=Object.assign(Object.assign({},r),{idToken:u.idToken,refreshToken:u.refreshToken});switch(s.operationType){case"signIn":const m=await no._fromIdTokenResponse(n,s.operationType,d);return await n._updateCurrentUser(m.user),m;case"reauthenticate":return tt(s.user,n,"internal-error"),no._forOperation(s.user,s.operationType,d);default:Dn(n,"internal-error")}})}async resolveSignIn(e){const s=e;return this.signInResolver(s)}}function KH(t,e){var s;const n=Ft(t),r=e;return tt(e.customData.operationType,n,"argument-error"),tt((s=r.customData._serverResponse)===null||s===void 0?void 0:s.mfaPendingCredential,n,"argument-error"),Tx._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e){return Js(t,"POST","/v2/accounts/mfaEnrollment:start",Xs(t,e))}function YH(t,e){return Js(t,"POST","/v2/accounts/mfaEnrollment:finalize",Xs(t,e))}function XH(t,e){return Js(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Xs(t,e))}class Ax{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(s=>{s.mfaInfo&&(this.enrolledFactors=s.mfaInfo.map(n=>_f._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new Ax(e)}async getSession(){return hl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,s){const n=e,r=await this.getSession(),o=await Ti(this.user,n._process(this.user.auth,r,s));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const s=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const r=await Ti(this.user,XH(this.user.auth,{idToken:n,mfaEnrollmentId:s}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==s),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const Wb=new WeakMap;function JH(t){const e=Ft(t);return Wb.has(e)||Wb.set(e,Ax._fromUser(e)),Wb.get(e)}const Hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=1e3,eG=10;class f4 extends m4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),r=this.localCache[s];n!==r&&e(s,r,n)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((i,c,u)=>{this.notifyListeners(i,u)});return}const n=e.key;s?this.detachListener():this.stopPolling();const r=()=>{const i=this.storage.getItem(n);!s&&this.localCache[n]===i||this.notifyListeners(n,i)},o=this.storage.getItem(n);$V()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eG):r()}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n}),!0)})},ZH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}f4.type="LOCAL";const ig=f4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4 extends m4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}p4.type="SESSION";const Sa=p4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(r=>r.isListeningto(e));if(s)return s;const n=new ag(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:n,eventType:r,data:o}=s.data,i=this.handlersMap[r];if(!(i!=null&&i.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const c=Array.from(i).map(async d=>d(s.origin,o)),u=await tG(c);s.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ag.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t="",e=10){let s="";for(let n=0;n<e;n++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise((c,u)=>{const d=xf("",20);r.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(p.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:d,data:s},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function nG(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function rG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oG(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iG(){return Ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="firebaseLocalStorageDb",aG=1,Gh="firebaseLocalStorage",g4="fbase_key";class kf{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function lg(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function lG(){const t=indexedDB.deleteDatabase(h4);return new kf(t).toPromise()}function b_(){const t=indexedDB.open(h4,aG);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Gh,{keyPath:g4})}catch(r){s(r)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Gh)?e(n):(n.close(),await lG(),e(await b_()))})})}async function tS(t,e,s){const n=lg(t,!0).put({[g4]:e,value:s});return new kf(n).toPromise()}async function cG(t,e){const s=lg(t,!1).get(e),n=await new kf(s).toPromise();return n===void 0?null:n.value}function sS(t,e){const s=lg(t,!0).delete(e);return new kf(s).toPromise()}const uG=800,dG=3;class v4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b_(),this.db)}async _withRetries(e){let s=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(s++>dG)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ag._getInstance(iG()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await rG(),!this.activeServiceWorker)return;this.sender=new sG(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b_();return await tS(e,Hh,"1"),await sS(e,Hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>tS(n,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(n=>cG(n,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>sS(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=lg(r,!1).getAll();return new kf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),s.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),s.push(r));return s}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v4.type="LOCAL";const mu=v4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){return Js(t,"POST","/v2/accounts/mfaSignIn:start",Xs(t,e))}function mG(t,e){return Js(t,"POST","/v2/accounts/mfaSignIn:finalize",Xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=JM("rcb"),fG=new gf(3e4,6e4);class pG{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=an().grecaptcha)===null||e===void 0)&&e.render)}load(e,s=""){return tt(hG(s),e,"argument-error"),this.shouldResolveImmediately(s)&&jC(an().grecaptcha)?Promise.resolve(an().grecaptcha):new Promise((n,r)=>{const o=an().setTimeout(()=>{r(gn(e,"network-request-failed"))},fG.get());an()[zb]=()=>{an().clearTimeout(o),delete an()[zb];const c=an().grecaptcha;if(!c||!jC(c)){r(gn(e,"internal-error"));return}const u=c.render;c.render=(d,m)=>{const f=u(d,m);return this.counter++,f},this.hostLanguage=s,n(c)};const i=`${UV()}?${zl({onload:zb,render:"explicit",hl:s})}`;kx(i).catch(()=>{clearTimeout(o),r(gn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var s;return!!(!((s=an().grecaptcha)===null||s===void 0)&&s.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function hG(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class gG{async load(e){return new GV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="recaptcha",vG={theme:"light",type:"image"};let bG=class{constructor(e,s,n=Object.assign({},vG)){this.parameters=n,this.type=Kd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bs(e),this.isInvisible=this.parameters.size==="invisible",tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof s=="string"?document.getElementById(s):s;tt(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gG:new pG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),s=this.getAssertedRecaptcha(),n=s.getResponse(e);return n||new Promise(r=>{const o=i=>{i&&(this.tokenChangeListeners.delete(o),r(i))};this.tokenChangeListeners.add(o),this.isInvisible&&s.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return s=>{if(this.tokenChangeListeners.forEach(n=>n(s)),typeof e=="function")e(s);else if(typeof e=="string"){const n=an()[e];typeof n=="function"&&n(s)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const s=document.createElement("div");e.appendChild(s),e=s}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){tt(_x()&&!Ix(),this.auth,"internal-error"),await yG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await _V(this.auth);tt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function yG(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,s){this.verificationId=e,this.onConfirmation=s}confirm(e){const s=Cl._fromVerification(this.verificationId,e);return this.onConfirmation(s)}}async function _G(t,e,s){if(As(t.app))return Promise.reject($n(t));const n=Bs(t),r=await cg(n,e,Ft(s));return new Px(r,o=>rg(n,o))}async function xG(t,e,s){const n=Ft(t);await ng(!1,n,"phone");const r=await cg(n.auth,e,Ft(s));return new Px(r,o=>a4(n,o))}async function kG(t,e,s){const n=Ft(t);if(As(n.auth.app))return Promise.reject($n(n.auth));const r=await cg(n.auth,e,Ft(s));return new Px(r,o=>l4(n,o))}async function cg(t,e,s){var n;if(!t._getRecaptchaConfig())try{await YV(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const o=r.session;if("phoneNumber"in r){tt(o.type==="enroll",t,"internal-error");const i={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await pa(t,i,"mfaSmsEnrollment",async(m,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Qd){tt((s==null?void 0:s.type)===Kd,m,"argument-error");const p=await Qb(m,f,s);return eS(m,p)}return eS(m,f)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneSessionInfo.sessionInfo}else{tt(o.type==="signin",t,"internal-error");const i=((n=r.multiFactorHint)===null||n===void 0?void 0:n.uid)||r.multiFactorUid;tt(i,t,"missing-multi-factor-info");const c={mfaPendingCredential:o.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await pa(t,c,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===Qd){tt((s==null?void 0:s.type)===Kd,f,"argument-error");const g=await Qb(f,p,s);return nS(f,g)}return nS(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await pa(t,o,"sendVerificationCode",async(d,m)=>{if(m.captchaResponse===Qd){tt((s==null?void 0:s.type)===Kd,d,"argument-error");const f=await Qb(d,m,s);return JC(d,f)}return JC(d,m)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{s==null||s._reset()}}async function wG(t,e){const s=Ft(t);if(As(s.auth.app))return Promise.reject($n(s.auth));await wx(s,e)}async function Qb(t,e,s){tt(s.type===Kd,t,"argument-error");const n=await s.verify();tt(typeof n=="string",t,"argument-error");const r=Object.assign({},e);if("phoneEnrollmentInfo"in r){const o=r.phoneEnrollmentInfo.phoneNumber,i=r.phoneEnrollmentInfo.captchaResponse,c=r.phoneEnrollmentInfo.clientType,u=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:n,captchaResponse:i,clientType:c,recaptchaVersion:u}}),r}else if("phoneSignInInfo"in r){const o=r.phoneSignInInfo.captchaResponse,i=r.phoneSignInInfo.clientType,c=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:o,clientType:i,recaptchaVersion:c}}),r}else return Object.assign(r,{recaptchaToken:n}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=class ah{constructor(e){this.providerId=ah.PROVIDER_ID,this.auth=Bs(e)}verifyPhoneNumber(e,s){return cg(this.auth,e,Ft(s))}static credential(e,s){return Cl._fromVerification(e,s)}static credentialFromResult(e){const s=e;return ah.credentialFromTaggedObject(s)}static credentialFromError(e){return ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:s,temporaryProof:n}=e;return s&&n?Cl._fromTokenResponse(s,n):null}};Rl.PROVIDER_ID="phone";Rl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e){return e?Lr(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends Nu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ki(e,this._buildIdpRequest())}_linkToIdToken(e,s){return ki(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function EG(t){return i4(t.auth,new Mx(t),t.bypassAuthState)}function CG(t){const{auth:e,user:s}=t;return tt(s,e,"internal-error"),o4(s,new Mx(t),t.bypassAuthState)}async function SG(t){const{auth:e,user:s}=t;return tt(s,e,"internal-error"),wx(s,new Mx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,s,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:n,postBody:r,tenantId:o,error:i,type:c}=e;if(i){this.reject(i);return}const u={auth:this.auth,requestUri:s,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EG;case"linkViaPopup":case"linkViaRedirect":return SG;case"reauthViaPopup":case"reauthViaRedirect":return CG;default:Dn(this.auth,"internal-error")}}resolve(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TG=new gf(2e3,1e4);async function AG(t,e,s){if(As(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const n=Bs(t);Du(t,e,Di);const r=Ql(n,s);return new bi(n,"signInViaPopup",e,r).executeNotNull()}async function IG(t,e,s){const n=Ft(t);if(As(n.auth.app))return Promise.reject(gn(n.auth,"operation-not-supported-in-this-environment"));Du(n.auth,e,Di);const r=Ql(n.auth,s);return new bi(n.auth,"reauthViaPopup",e,r,n).executeNotNull()}async function PG(t,e,s){const n=Ft(t);Du(n.auth,e,Di);const r=Ql(n.auth,s);return new bi(n.auth,"linkViaPopup",e,r,n).executeNotNull()}class bi extends b4{constructor(e,s,n,r,o){super(e,s,r,o),this.provider=n,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ao(this.filter.length===1,"Popup operations only handle one event");const e=xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TG.get())};e()}}bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG="pendingRedirect",Yd=new Map;class $G extends b4{constructor(e,s,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const n=await RG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(s){e=()=>Promise.reject(s)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RG(t,e){const s=_4(e),n=y4(t);if(!await n._isAvailable())return!1;const r=await n._get(s)==="true";return await n._remove(s),r}async function $x(t,e){return y4(t)._set(_4(e),"true")}function LG(){Yd.clear()}function Rx(t,e){Yd.set(t._key(),e)}function y4(t){return Lr(t._redirectPersistence)}function _4(t){return El(MG,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(t,e,s){return NG(t,e,s)}async function NG(t,e,s){if(As(t.app))return Promise.reject($n(t));const n=Bs(t);Du(t,e,Di),await n._initializationPromise;const r=Ql(n,s);return await $x(r,n),r._openRedirect(n,e,"signInViaRedirect")}function OG(t,e,s){return FG(t,e,s)}async function FG(t,e,s){const n=Ft(t);if(Du(n.auth,e,Di),As(n.auth.app))return Promise.reject($n(n.auth));await n.auth._initializationPromise;const r=Ql(n.auth,s);await $x(r,n.auth);const o=await x4(n);return r._openRedirect(n.auth,e,"reauthViaRedirect",o)}function UG(t,e,s){return qG(t,e,s)}async function qG(t,e,s){const n=Ft(t);Du(n.auth,e,Di),await n.auth._initializationPromise;const r=Ql(n.auth,s);await ng(!1,n,e.providerId),await $x(r,n.auth);const o=await x4(n);return r._openRedirect(n.auth,e,"linkViaRedirect",o)}async function BG(t,e){return await Bs(t)._initializationPromise,ug(t,e,!1)}async function ug(t,e,s=!1){if(As(t.app))return Promise.reject($n(t));const n=Bs(t),r=Ql(n,e),i=await new $G(n,r,s).execute();return i&&!s&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}async function x4(t){const e=xf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=10*60*1e3;class k4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(s=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HG(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var n;if(e.error&&!w4(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(gn(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const n=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VG&&this.cachedEventUids.clear(),this.cachedEventUids.has(rS(e))}saveEventToCache(e){this.cachedEventUids.add(rS(e)),this.lastProcessedEventTime=Date.now()}}function rS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e={}){return Js(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jG=/^https?/;async function WG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E4(t);for(const s of e)try{if(zG(s))return}catch{}Dn(t,"unauthorized-domain")}function zG(t){const e=Dm(),{protocol:s,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&i.hostname===n}if(!jG.test(s))return!1;if(GG.test(t))return n===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG=new gf(3e4,6e4);function oS(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function KG(t){return new Promise((e,s)=>{var n,r,o;function i(){oS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oS(),s(gn(t,"network-request-failed"))},timeout:QG.get()})}if(!((r=(n=an().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=an().gapi)===null||o===void 0)&&o.load)i();else{const c=JM("iframefcb");return an()[c]=()=>{gapi.load?i():s(gn(t,"network-request-failed"))},kx(`${BV()}?onload=${c}`).catch(u=>s(u))}}).catch(e=>{throw lh=null,e})}let lh=null;function YG(t){return lh=lh||KG(t),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG=new gf(5e3,15e3),JG="__/auth/iframe",ZG="emulator/auth/iframe",ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sj(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?xx(e,ZG):`https://${t.config.authDomain}/${JG}`,n={apiKey:e.apiKey,appName:t.name,v:si},r=tj.get(t.config.apiHost);r&&(n.eid=r);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${s}?${zl(n).slice(1)}`}async function nj(t){const e=await YG(t),s=an().gapi;return tt(s,t,"internal-error"),e.open({where:document.body,url:sj(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ej,dontclear:!0},n=>new Promise(async(r,o)=>{await n.restyle({setHideOnLeave:!1});const i=gn(t,"network-request-failed"),c=an().setTimeout(()=>{o(i)},XG.get());function u(){an().clearTimeout(c),r(n)}n.ping(u).then(u,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oj=500,ij=600,aj="_blank",lj="http://localhost";class iS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cj(t,e,s,n=oj,r=ij){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u=Object.assign(Object.assign({},rj),{width:n.toString(),height:r.toString(),top:o,left:i}),d=un().toLowerCase();s&&(c=WM(d)?aj:s),GM(d)&&(e=e||lj,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(MV(d)&&c!=="_self")return uj(e||"",c),new iS(null);const f=window.open(e||"",c,m);tt(f,t,"popup-blocked");try{f.focus()}catch{}return new iS(f)}function uj(t,e){const s=document.createElement("a");s.href=t,s.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="__/auth/handler",mj="emulator/auth/handler",fj=encodeURIComponent("fac");async function y_(t,e,s,n,r,o){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:n,v:si,eventId:r};if(e instanceof Di){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",m_(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries(o||{}))i[m]=f}if(e instanceof Ou){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(i.scopes=m.join(","))}t.tenantId&&(i.tid=t.tenantId);const c=i;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${fj}=${encodeURIComponent(u)}`:"";return`${pj(t)}?${zl(c).slice(1)}${d}`}function pj({config:t}){return t.emulator?xx(t,mj):`https://${t.authDomain}/${dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="webStorageSupport";class hj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sa,this._completeRedirectFn=ug,this._overrideRedirectResult=Rx}async _openPopup(e,s,n,r){var o;Ao((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await y_(e,s,n,Dm(),r);return cj(e,i,xf())}async _openRedirect(e,s,n,r){await this._originValidation(e);const o=await y_(e,s,n,Dm(),r);return nG(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:r,promise:o}=this.eventManagers[s];return r?Promise.resolve(r):(Ao(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(e){const s=await nj(e),n=new k4(e);return s.register("authEvent",r=>(tt(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=s,n}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Kb,{type:Kb},r=>{var o;const i=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Kb];i!==void 0&&s(!!i),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=WG(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return YM()||jM()||bf()}}const C4=hj;class gj{constructor(e){this.factorId=e}_process(e,s,n){switch(s.type){case"enroll":return this._finalizeEnroll(e,s.credential,n);case"signin":return this._finalizeSignIn(e,s.credential);default:return Go("unexpected MultiFactorSessionType")}}}class Lx extends gj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Lx(e)}_finalizeEnroll(e,s,n){return YH(e,{idToken:s,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,s){return mG(e,{mfaPendingCredential:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class S4{constructor(){}static assertion(e){return Lx._fromCredential(e)}}S4.FACTOR_ID="phone";var aS="@firebase/auth",lS="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yj(t){qn(new Ln("auth",(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:c}=n.options;tt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:i,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XM(t)},d=new OV(n,r,o,u);return JV(d,s),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,n)=>{e.getProvider("auth-internal").initialize()})),qn(new Ln("auth-internal",e=>{const s=Bs(e.getProvider("auth").getImmediate());return(n=>new vj(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(aS,lS,bj(t)),qs(aS,lS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=5*60;wB("authIdTokenMaxAge");function xj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FV({loadJS(t){return new Promise((e,s)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=r=>{const o=gn("internal-error");o.customData=r,s(o)},n.type="text/javascript",n.charset="UTF-8",xj().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=2e3;async function wj(t,e,s){var n;const{BuildInfo:r}=Ll();Ao(e.sessionId,"AuthEvent did not contain a session ID");const o=await Aj(e.sessionId),i={};return bf()?i.ibi=r.packageName:vf()?i.apn=r.packageName:Dn(t,"operation-not-supported-in-this-environment"),r.displayName&&(i.appDisplayName=r.displayName),i.sessionId=o,y_(t,s,e.type,void 0,(n=e.eventId)!==null&&n!==void 0?n:void 0,i)}async function Ej(t){const{BuildInfo:e}=Ll(),s={};bf()?s.iosBundleId=e.packageName:vf()?s.androidPackageName=e.packageName:Dn(t,"operation-not-supported-in-this-environment"),await E4(t,s)}function Cj(t){const{cordova:e}=Ll();return new Promise(s=>{e.plugins.browsertab.isAvailable(n=>{let r=null;n?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,PV()?"_blank":"_system","location=yes"),s(r)})})}async function Sj(t,e,s){const{cordova:n}=Ll();let r=()=>{};try{await new Promise((o,i)=>{let c=null;function u(){var f;o();const p=(f=n.plugins.browsertab)===null||f===void 0?void 0:f.close;typeof p=="function"&&p(),typeof(s==null?void 0:s.close)=="function"&&s.close()}function d(){c||(c=window.setTimeout(()=>{i(gn(t,"redirect-cancelled-by-user"))},kj))}function m(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(u),document.addEventListener("resume",d,!1),vf()&&document.addEventListener("visibilitychange",m,!1),r=()=>{e.removePassiveListener(u),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",m,!1),c&&window.clearTimeout(c)}})}finally{r()}}function Tj(t){var e,s,n,r,o,i,c,u,d,m;const f=Ll();tt(typeof((e=f==null?void 0:f.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(typeof((s=f==null?void 0:f.BuildInfo)===null||s===void 0?void 0:s.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt(typeof((o=(r=(n=f==null?void 0:f.cordova)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((u=(c=(i=f==null?void 0:f.cordova)===null||i===void 0?void 0:i.plugins)===null||c===void 0?void 0:c.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((m=(d=f==null?void 0:f.cordova)===null||d===void 0?void 0:d.InAppBrowser)===null||m===void 0?void 0:m.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Aj(t){const e=Ij(t),s=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(s)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Ij(t){if(Ao(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),s=new Uint8Array(e);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=20;class Mj extends k4{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(s=>s(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function $j(t,e,s=null){return{type:e,eventId:s,urlResponse:null,sessionId:Dj(),postBody:null,tenantId:t.tenantId,error:gn(t,"no-auth-event")}}function Rj(t,e){return __()._set(x_(t),e)}async function cS(t){const e=await __()._get(x_(t));return e&&await __()._remove(x_(t)),e}function Lj(t,e){var s,n;const r=Oj(e);if(r.includes("/__/auth/callback")){const o=ch(r),i=o.firebaseError?Nj(decodeURIComponent(o.firebaseError)):null,c=(n=(s=i==null?void 0:i.code)===null||s===void 0?void 0:s.split("auth/"))===null||n===void 0?void 0:n[1],u=c?gn(c):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function Dj(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<Pj;s++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function __(){return Lr(ig)}function x_(t){return El("authEvent",t.config.apiKey,t.name)}function Nj(t){try{return JSON.parse(t)}catch{return null}}function Oj(t){const e=ch(t),s=e.link?decodeURIComponent(e.link):void 0,n=ch(s).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ch(r).link||r||n||s||t}function ch(t){if(!(t!=null&&t.includes("?")))return{};const[e,...s]=t.split("?");return $c(s.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=500;class Uj{constructor(){this._redirectPersistence=Sa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ug,this._overrideRedirectResult=Rx}async _initialize(e){const s=e._key();let n=this.eventManagers.get(s);return n||(n=new Mj(e),this.eventManagers.set(s,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Dn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,s,n,r){Tj(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),LG(),await this._originValidation(e);const i=$j(e,n,r);await Rj(e,i);const c=await wj(e,i,s),u=await Cj(c);return Sj(e,o,u)}_isIframeWebStorageSupported(e,s){throw new Error("Method not implemented.")}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=Ej(e)),this.originValidationPromises[s]}attachCallbackListeners(e,s){const{universalLinks:n,handleOpenURL:r,BuildInfo:o}=Ll(),i=setTimeout(async()=>{await cS(e),s.onEvent(uS())},Fj),c=async m=>{clearTimeout(i);const f=await cS(e);let p=null;f&&(m!=null&&m.url)&&(p=Lj(f,m.url)),s.onEvent(p||uS())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,c);const u=r,d=`${o.packageName.toLowerCase()}://`;Ll().handleOpenURL=async m=>{if(m.toLowerCase().startsWith(d)&&c({url:m}),typeof u=="function")try{u(m)}catch(f){console.error(f)}}}}const qj=Uj;function uS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){Bs(t)._logFramework(e)}var Vj="@firebase/auth-compat",Hj="0.5.20";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1e3;function Xd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function jj(){return Xd()==="http:"||Xd()==="https:"}function T4(t=un()){return!!((Xd()==="file:"||Xd()==="ionic:"||Xd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wj(){return J0()||ux()}function zj(){return bM()&&(document==null?void 0:document.documentMode)===11}function Qj(t=un()){return/Edge\/\d+/.test(t)}function Kj(t=un()){return zj()||Qj(t)}function A4(){try{const t=self.localStorage,e=xf();if(t)return t.setItem(e,"1"),t.removeItem(e),Kj()?ka():!0}catch{return Dx()&&ka()}return!1}function Dx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yb(){return(jj()||dx()||T4())&&!Wj()&&A4()&&!Dx()}function I4(){return T4()&&typeof document<"u"}async function Yj(){return I4()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Gj);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Xj(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={LOCAL:"local",NONE:"none",SESSION:"session"},ad=tt,P4="persistence";function Jj(t,e){if(ad(Object.values($r).includes(e),t,"invalid-persistence-type"),J0()){ad(e!==$r.SESSION,t,"unsupported-persistence-type");return}if(ux()){ad(e===$r.NONE,t,"unsupported-persistence-type");return}if(Dx()){ad(e===$r.NONE||e===$r.LOCAL&&ka(),t,"unsupported-persistence-type");return}ad(e===$r.NONE||A4(),t,"unsupported-persistence-type")}async function k_(t){await t._initializationPromise;const e=M4(),s=El(P4,t.config.apiKey,t.name);e&&e.setItem(s,t._getPersistenceType())}function Zj(t,e){const s=M4();if(!s)return[];const n=El(P4,t,e);switch(s.getItem(n)){case $r.NONE:return[uu];case $r.LOCAL:return[mu,Sa];case $r.SESSION:return[Sa];default:return[]}}function M4(){var t;try{return((t=Xj())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=tt;class la{constructor(){this.browserResolver=Lr(C4),this.cordovaResolver=Lr(qj),this.underlyingResolver=null,this._redirectPersistence=Sa,this._completeRedirectFn=ug,this._overrideRedirectResult=Rx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,s,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,s,n,r)}async _openRedirect(e,s,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,s,n,r)}_isIframeWebStorageSupported(e,s){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,s)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return I4()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return eW(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Yj();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){return t.unwrap()}function tW(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(t){return R4(t)}function nW(t,e){var s;const n=(s=e.customData)===null||s===void 0?void 0:s._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new rW(t,KH(t,e))}else if(n){const r=R4(e),o=e;r&&(o.credential=r,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function R4(t){const{_tokenResponse:e}=t instanceof Mn?t.customData:t;if(!e)return null;if(!(t instanceof Mn)&&"temporaryProof"in e&&"phoneNumber"in e)return Rl.credentialFromResult(t);const s=e.providerId;if(!s||s===od.PASSWORD)return null;let n;switch(s){case od.GOOGLE:n=qo;break;case od.FACEBOOK:n=Uo;break;case od.GITHUB:n=Bo;break;case od.TWITTER:n=Vo;break;default:const{oauthIdToken:r,oauthAccessToken:o,oauthTokenSecret:i,pendingToken:c,nonce:u}=e;return!o&&!i&&!r&&!c?null:c?s.startsWith("saml.")?du._create(s,c):Jo._fromParams({providerId:s,signInMethod:s,pendingToken:c,idToken:r,accessToken:o}):new Qc(s).credential({idToken:r,accessToken:o,rawNonce:u})}return t instanceof Mn?n.credentialFromError(t):n.credentialFromResult(t)}function br(t,e){return e.catch(s=>{throw s instanceof Mn&&nW(t,s),s}).then(s=>{const n=s.operationType,r=s.user;return{operationType:n,credential:sW(s),additionalUserInfo:zH(s),user:dg.getOrCreate(r)}})}async function w_(t,e){const s=await e;return{verificationId:s.verificationId,confirm:n=>br(t,s.confirm(n))}}class rW{constructor(e,s){this.resolver=s,this.auth=tW(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return br($4(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg=class Ad{constructor(e){this._delegate=e,this.multiFactor=JH(e)}static getOrCreate(e){return Ad.USER_MAP.has(e)||Ad.USER_MAP.set(e,new Ad(e)),Ad.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return br(this.auth,a4(this._delegate,e))}async linkWithPhoneNumber(e,s){return w_(this.auth,xG(this._delegate,e,s))}async linkWithPopup(e){return br(this.auth,PG(this._delegate,e,la))}async linkWithRedirect(e){return await k_(Bs(this.auth)),UG(this._delegate,e,la)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return br(this.auth,l4(this._delegate,e))}reauthenticateWithPhoneNumber(e,s){return w_(this.auth,kG(this._delegate,e,s))}reauthenticateWithPopup(e){return br(this.auth,IG(this._delegate,e,la))}async reauthenticateWithRedirect(e){return await k_(Bs(this.auth)),OG(this._delegate,e,la)}sendEmailVerification(e){return NH(this._delegate,e)}async unlink(e){return await kH(this._delegate,e),this}updateEmail(e){return qH(this._delegate,e)}updatePassword(e){return BH(this._delegate,e)}updatePhoneNumber(e){return wG(this._delegate,e)}updateProfile(e){return UH(this._delegate,e)}verifyBeforeUpdateEmail(e,s){return OH(this._delegate,e,s)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};dg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=tt;class E_{constructor(e,s){if(this.app=e,s.isInitialized()){this._delegate=s.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;ld(n,"invalid-api-key",{appName:e.name}),ld(n,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?la:void 0;this._delegate=s.initialize({options:{persistence:oW(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(uV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,s){ZV(this._delegate,e,s)}applyActionCode(e){return TH(this._delegate,e)}checkActionCode(e){return c4(this._delegate,e)}confirmPasswordReset(e,s){return SH(this._delegate,e,s)}async createUserWithEmailAndPassword(e,s){return br(this._delegate,IH(this._delegate,e,s))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return DH(this._delegate,e)}isSignInWithEmailLink(e){return $H(this._delegate,e)}async getRedirectResult(){ld(Yb(),this._delegate,"operation-not-supported-in-this-environment");const e=await BG(this._delegate,la);return e?br(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Bj(this._delegate,e)}onAuthStateChanged(e,s,n){const{next:r,error:o,complete:i}=dS(e,s,n);return this._delegate.onAuthStateChanged(r,o,i)}onIdTokenChanged(e,s,n){const{next:r,error:o,complete:i}=dS(e,s,n);return this._delegate.onIdTokenChanged(r,o,i)}sendSignInLinkToEmail(e,s){return MH(this._delegate,e,s)}sendPasswordResetEmail(e,s){return CH(this._delegate,e,s||void 0)}async setPersistence(e){Jj(this._delegate,e);let s;switch(e){case $r.SESSION:s=Sa;break;case $r.LOCAL:s=await Lr(mu)._isAvailable()?mu:ig;break;case $r.NONE:s=uu;break;default:return Dn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(s)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return br(this._delegate,xH(this._delegate))}signInWithCredential(e){return br(this._delegate,rg(this._delegate,e))}signInWithCustomToken(e){return br(this._delegate,EH(this._delegate,e))}signInWithEmailAndPassword(e,s){return br(this._delegate,PH(this._delegate,e,s))}signInWithEmailLink(e,s){return br(this._delegate,RH(this._delegate,e,s))}signInWithPhoneNumber(e,s){return w_(this._delegate,_G(this._delegate,e,s))}async signInWithPopup(e){return ld(Yb(),this._delegate,"operation-not-supported-in-this-environment"),br(this._delegate,AG(this._delegate,e,la))}async signInWithRedirect(e){return ld(Yb(),this._delegate,"operation-not-supported-in-this-environment"),await k_(this._delegate),DG(this._delegate,e,la)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return AH(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}E_.Persistence=$r;function dS(t,e,s){let n=t;typeof t!="function"&&({next:n,error:e,complete:s}=t);const r=n;return{next:i=>r(i&&dg.getOrCreate(i)),error:e,complete:s}}function oW(t,e){const s=Zj(t,e);if(typeof self<"u"&&!s.includes(mu)&&s.push(mu),typeof window<"u")for(const n of[ig,Sa])s.includes(n)||s.push(n);return s.includes(uu)||s.push(uu),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{static credential(e,s){return Rl.credential(e,s)}constructor(){this.providerId="phone",this._delegate=new Rl($4(vi.auth()))}verifyPhoneNumber(e,s){return this._delegate.verifyPhoneNumber(e,s)}unwrap(){return this._delegate}}Nx.PHONE_SIGN_IN_METHOD=Rl.PHONE_SIGN_IN_METHOD;Nx.PROVIDER_ID=Rl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW=tt;class aW{constructor(e,s,n=vi.app()){var r;iW((r=n.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new bG(n.auth(),e,s),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW="auth-compat";function cW(t){t.INTERNAL.registerComponent(new Ln(lW,e=>{const s=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new E_(s,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hc.EMAIL_SIGNIN,PASSWORD_RESET:hc.PASSWORD_RESET,RECOVER_EMAIL:hc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:hc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:hc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:hc.VERIFY_EMAIL}},EmailAuthProvider:Va,FacebookAuthProvider:Uo,GithubAuthProvider:Bo,GoogleAuthProvider:qo,OAuthProvider:Qc,SAMLAuthProvider:Bh,PhoneAuthProvider:Nx,PhoneMultiFactorGenerator:S4,RecaptchaVerifier:aW,TwitterAuthProvider:Vo,Auth:E_,AuthCredential:Nu,Error:Mn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Vj,Hj)}cW(vi);var mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ha,L4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function D(){}D.prototype=I.prototype,P.D=I.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(U,M,x){for(var $=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)$[Z-2]=arguments[Z];return I.prototype[M].apply(U,$)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(P,I,D){D||(D=0);var U=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)U[M]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(M=0;16>M;++M)U[M]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=P.g[0],D=P.g[1],M=P.g[2];var x=P.g[3],$=I+(x^D&(M^x))+U[0]+3614090360&4294967295;I=D+($<<7&4294967295|$>>>25),$=x+(M^I&(D^M))+U[1]+3905402710&4294967295,x=I+($<<12&4294967295|$>>>20),$=M+(D^x&(I^D))+U[2]+606105819&4294967295,M=x+($<<17&4294967295|$>>>15),$=D+(I^M&(x^I))+U[3]+3250441966&4294967295,D=M+($<<22&4294967295|$>>>10),$=I+(x^D&(M^x))+U[4]+4118548399&4294967295,I=D+($<<7&4294967295|$>>>25),$=x+(M^I&(D^M))+U[5]+1200080426&4294967295,x=I+($<<12&4294967295|$>>>20),$=M+(D^x&(I^D))+U[6]+2821735955&4294967295,M=x+($<<17&4294967295|$>>>15),$=D+(I^M&(x^I))+U[7]+4249261313&4294967295,D=M+($<<22&4294967295|$>>>10),$=I+(x^D&(M^x))+U[8]+1770035416&4294967295,I=D+($<<7&4294967295|$>>>25),$=x+(M^I&(D^M))+U[9]+2336552879&4294967295,x=I+($<<12&4294967295|$>>>20),$=M+(D^x&(I^D))+U[10]+4294925233&4294967295,M=x+($<<17&4294967295|$>>>15),$=D+(I^M&(x^I))+U[11]+2304563134&4294967295,D=M+($<<22&4294967295|$>>>10),$=I+(x^D&(M^x))+U[12]+1804603682&4294967295,I=D+($<<7&4294967295|$>>>25),$=x+(M^I&(D^M))+U[13]+4254626195&4294967295,x=I+($<<12&4294967295|$>>>20),$=M+(D^x&(I^D))+U[14]+2792965006&4294967295,M=x+($<<17&4294967295|$>>>15),$=D+(I^M&(x^I))+U[15]+1236535329&4294967295,D=M+($<<22&4294967295|$>>>10),$=I+(M^x&(D^M))+U[1]+4129170786&4294967295,I=D+($<<5&4294967295|$>>>27),$=x+(D^M&(I^D))+U[6]+3225465664&4294967295,x=I+($<<9&4294967295|$>>>23),$=M+(I^D&(x^I))+U[11]+643717713&4294967295,M=x+($<<14&4294967295|$>>>18),$=D+(x^I&(M^x))+U[0]+3921069994&4294967295,D=M+($<<20&4294967295|$>>>12),$=I+(M^x&(D^M))+U[5]+3593408605&4294967295,I=D+($<<5&4294967295|$>>>27),$=x+(D^M&(I^D))+U[10]+38016083&4294967295,x=I+($<<9&4294967295|$>>>23),$=M+(I^D&(x^I))+U[15]+3634488961&4294967295,M=x+($<<14&4294967295|$>>>18),$=D+(x^I&(M^x))+U[4]+3889429448&4294967295,D=M+($<<20&4294967295|$>>>12),$=I+(M^x&(D^M))+U[9]+568446438&4294967295,I=D+($<<5&4294967295|$>>>27),$=x+(D^M&(I^D))+U[14]+3275163606&4294967295,x=I+($<<9&4294967295|$>>>23),$=M+(I^D&(x^I))+U[3]+4107603335&4294967295,M=x+($<<14&4294967295|$>>>18),$=D+(x^I&(M^x))+U[8]+1163531501&4294967295,D=M+($<<20&4294967295|$>>>12),$=I+(M^x&(D^M))+U[13]+2850285829&4294967295,I=D+($<<5&4294967295|$>>>27),$=x+(D^M&(I^D))+U[2]+4243563512&4294967295,x=I+($<<9&4294967295|$>>>23),$=M+(I^D&(x^I))+U[7]+1735328473&4294967295,M=x+($<<14&4294967295|$>>>18),$=D+(x^I&(M^x))+U[12]+2368359562&4294967295,D=M+($<<20&4294967295|$>>>12),$=I+(D^M^x)+U[5]+4294588738&4294967295,I=D+($<<4&4294967295|$>>>28),$=x+(I^D^M)+U[8]+2272392833&4294967295,x=I+($<<11&4294967295|$>>>21),$=M+(x^I^D)+U[11]+1839030562&4294967295,M=x+($<<16&4294967295|$>>>16),$=D+(M^x^I)+U[14]+4259657740&4294967295,D=M+($<<23&4294967295|$>>>9),$=I+(D^M^x)+U[1]+2763975236&4294967295,I=D+($<<4&4294967295|$>>>28),$=x+(I^D^M)+U[4]+1272893353&4294967295,x=I+($<<11&4294967295|$>>>21),$=M+(x^I^D)+U[7]+4139469664&4294967295,M=x+($<<16&4294967295|$>>>16),$=D+(M^x^I)+U[10]+3200236656&4294967295,D=M+($<<23&4294967295|$>>>9),$=I+(D^M^x)+U[13]+681279174&4294967295,I=D+($<<4&4294967295|$>>>28),$=x+(I^D^M)+U[0]+3936430074&4294967295,x=I+($<<11&4294967295|$>>>21),$=M+(x^I^D)+U[3]+3572445317&4294967295,M=x+($<<16&4294967295|$>>>16),$=D+(M^x^I)+U[6]+76029189&4294967295,D=M+($<<23&4294967295|$>>>9),$=I+(D^M^x)+U[9]+3654602809&4294967295,I=D+($<<4&4294967295|$>>>28),$=x+(I^D^M)+U[12]+3873151461&4294967295,x=I+($<<11&4294967295|$>>>21),$=M+(x^I^D)+U[15]+530742520&4294967295,M=x+($<<16&4294967295|$>>>16),$=D+(M^x^I)+U[2]+3299628645&4294967295,D=M+($<<23&4294967295|$>>>9),$=I+(M^(D|~x))+U[0]+4096336452&4294967295,I=D+($<<6&4294967295|$>>>26),$=x+(D^(I|~M))+U[7]+1126891415&4294967295,x=I+($<<10&4294967295|$>>>22),$=M+(I^(x|~D))+U[14]+2878612391&4294967295,M=x+($<<15&4294967295|$>>>17),$=D+(x^(M|~I))+U[5]+4237533241&4294967295,D=M+($<<21&4294967295|$>>>11),$=I+(M^(D|~x))+U[12]+1700485571&4294967295,I=D+($<<6&4294967295|$>>>26),$=x+(D^(I|~M))+U[3]+2399980690&4294967295,x=I+($<<10&4294967295|$>>>22),$=M+(I^(x|~D))+U[10]+4293915773&4294967295,M=x+($<<15&4294967295|$>>>17),$=D+(x^(M|~I))+U[1]+2240044497&4294967295,D=M+($<<21&4294967295|$>>>11),$=I+(M^(D|~x))+U[8]+1873313359&4294967295,I=D+($<<6&4294967295|$>>>26),$=x+(D^(I|~M))+U[15]+4264355552&4294967295,x=I+($<<10&4294967295|$>>>22),$=M+(I^(x|~D))+U[6]+2734768916&4294967295,M=x+($<<15&4294967295|$>>>17),$=D+(x^(M|~I))+U[13]+1309151649&4294967295,D=M+($<<21&4294967295|$>>>11),$=I+(M^(D|~x))+U[4]+4149444226&4294967295,I=D+($<<6&4294967295|$>>>26),$=x+(D^(I|~M))+U[11]+3174756917&4294967295,x=I+($<<10&4294967295|$>>>22),$=M+(I^(x|~D))+U[2]+718787259&4294967295,M=x+($<<15&4294967295|$>>>17),$=D+(x^(M|~I))+U[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(M+($<<21&4294967295|$>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+x&4294967295}n.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var D=I-this.blockSize,U=this.B,M=this.h,x=0;x<I;){if(M==0)for(;x<=D;)r(this,P,x),x+=this.blockSize;if(typeof P=="string"){for(;x<I;)if(U[M++]=P.charCodeAt(x++),M==this.blockSize){r(this,U),M=0;break}}else for(;x<I;)if(U[M++]=P[x++],M==this.blockSize){r(this,U),M=0;break}}this.h=M,this.o+=I},n.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var D=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=D&255,D/=256;for(this.u(P),P=Array(16),I=D=0;4>I;++I)for(var U=0;32>U;U+=8)P[D++]=this.g[I]>>>U&255;return P};function o(P,I){var D=c;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=I(P)}function i(P,I){this.h=I;for(var D=[],U=!0,M=P.length-1;0<=M;M--){var x=P[M]|0;U&&x==I||(D[M]=x,U=!1)}this.g=D}var c={};function u(P){return-128<=P&&128>P?o(P,function(I){return new i([I|0],0>I?-1:0)}):new i([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return E(d(-P));for(var I=[],D=1,U=0;P>=D;U++)I[U]=P/D|0,D*=4294967296;return new i(I,0)}function m(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return E(m(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(I,8)),U=f,M=0;M<P.length;M+=8){var x=Math.min(8,P.length-M),$=parseInt(P.substring(M,M+x),I);8>x?(x=d(Math.pow(I,x)),U=U.j(x).add(d($))):(U=U.j(D),U=U.add(d($)))}return U}var f=u(0),p=u(1),g=u(16777216);t=i.prototype,t.m=function(){if(C(this))return-E(this).m();for(var P=0,I=1,D=0;D<this.g.length;D++){var U=this.i(D);P+=(0<=U?U:4294967296+U)*I,I*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(w(this))return"0";if(C(this))return"-"+E(this).toString(P);for(var I=d(Math.pow(P,6)),D=this,U="";;){var M=T(D,I).g;D=k(D,M.j(I));var x=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=M,w(D))return x+U;for(;6>x.length;)x="0"+x;U=x+U}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function w(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function C(P){return P.h==-1}t.l=function(P){return P=k(this,P),C(P)?-1:w(P)?0:1};function E(P){for(var I=P.g.length,D=[],U=0;U<I;U++)D[U]=~P.g[U];return new i(D,~P.h).add(p)}t.abs=function(){return C(this)?E(this):this},t.add=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],U=0,M=0;M<=I;M++){var x=U+(this.i(M)&65535)+(P.i(M)&65535),$=(x>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);U=$>>>16,x&=65535,$&=65535,D[M]=$<<16|x}return new i(D,D[D.length-1]&-2147483648?-1:0)};function k(P,I){return P.add(E(I))}t.j=function(P){if(w(this)||w(P))return f;if(C(this))return C(P)?E(this).j(E(P)):E(E(this).j(P));if(C(P))return E(this.j(E(P)));if(0>this.l(g)&&0>P.l(g))return d(this.m()*P.m());for(var I=this.g.length+P.g.length,D=[],U=0;U<2*I;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var M=0;M<P.g.length;M++){var x=this.i(U)>>>16,$=this.i(U)&65535,Z=P.i(M)>>>16,me=P.i(M)&65535;D[2*U+2*M]+=$*me,A(D,2*U+2*M),D[2*U+2*M+1]+=x*me,A(D,2*U+2*M+1),D[2*U+2*M+1]+=$*Z,A(D,2*U+2*M+1),D[2*U+2*M+2]+=x*Z,A(D,2*U+2*M+2)}for(U=0;U<I;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=I;U<2*I;U++)D[U]=0;return new i(D,0)};function A(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function S(P,I){this.g=P,this.h=I}function T(P,I){if(w(I))throw Error("division by zero");if(w(P))return new S(f,f);if(C(P))return I=T(E(P),I),new S(E(I.g),E(I.h));if(C(I))return I=T(P,E(I)),new S(E(I.g),I.h);if(30<P.g.length){if(C(P)||C(I))throw Error("slowDivide_ only works with positive integers.");for(var D=p,U=I;0>=U.l(P);)D=R(D),U=R(U);var M=L(D,1),x=L(U,1);for(U=L(U,2),D=L(D,2);!w(U);){var $=x.add(U);0>=$.l(P)&&(M=M.add(D),x=$),U=L(U,1),D=L(D,1)}return I=k(P,M.j(I)),new S(M,I)}for(M=f;0<=P.l(I);){for(D=Math.max(1,Math.floor(P.m()/I.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),x=d(D),$=x.j(I);C($)||0<$.l(P);)D-=U,x=d(D),$=x.j(I);w(x)&&(x=p),M=M.add(x),P=k(P,$)}return new S(M,P)}t.A=function(P){return T(this,P).h},t.and=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],U=0;U<I;U++)D[U]=this.i(U)&P.i(U);return new i(D,this.h&P.h)},t.or=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],U=0;U<I;U++)D[U]=this.i(U)|P.i(U);return new i(D,this.h|P.h)},t.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],U=0;U<I;U++)D[U]=this.i(U)^P.i(U);return new i(D,this.h^P.h)};function R(P){for(var I=P.g.length+1,D=[],U=0;U<I;U++)D[U]=P.i(U)<<1|P.i(U-1)>>>31;return new i(D,P.h)}function L(P,I){var D=I>>5;I%=32;for(var U=P.g.length-D,M=[],x=0;x<U;x++)M[x]=0<I?P.i(x+D)>>>I|P.i(x+D+1)<<32-I:P.i(x+D);return new i(M,P.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,L4=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=d,i.fromString=m,ha=i}).apply(typeof mS<"u"?mS:typeof self<"u"?self:typeof window<"u"?window:{});var fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D4,Id,N4,uh,C_,O4,F4,U4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,F,ee){return y==Array.prototype||y==Object.prototype||(y[F]=ee.value),y};function s(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof fp=="object"&&fp];for(var F=0;F<y.length;++F){var ee=y[F];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}var n=s(this);function r(y,F){if(F)e:{var ee=n;y=y.split(".");for(var xe=0;xe<y.length-1;xe++){var Be=y[xe];if(!(Be in ee))break e;ee=ee[Be]}y=y[y.length-1],xe=ee[y],F=F(xe),F!=xe&&F!=null&&e(ee,y,{configurable:!0,writable:!0,value:F})}}function o(y,F){y instanceof String&&(y+="");var ee=0,xe=!1,Be={next:function(){if(!xe&&ee<y.length){var Ke=ee++;return{value:F(Ke,y[Ke]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return Be[Symbol.iterator]=function(){return Be},Be}r("Array.prototype.values",function(y){return y||function(){return o(this,function(F,ee){return ee})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},c=this||self;function u(y){var F=typeof y;return F=F!="object"?F:y?Array.isArray(y)?"array":F:"null",F=="array"||F=="object"&&typeof y.length=="number"}function d(y){var F=typeof y;return F=="object"&&y!=null||F=="function"}function m(y,F,ee){return y.call.apply(y.bind,arguments)}function f(y,F,ee){if(!y)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var Be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Be,xe),y.apply(F,Be)}}return function(){return y.apply(F,arguments)}}function p(y,F,ee){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,p.apply(null,arguments)}function g(y,F){var ee=Array.prototype.slice.call(arguments,1);return function(){var xe=ee.slice();return xe.push.apply(xe,arguments),y.apply(this,xe)}}function w(y,F){function ee(){}ee.prototype=F.prototype,y.aa=F.prototype,y.prototype=new ee,y.prototype.constructor=y,y.Qb=function(xe,Be,Ke){for(var at=Array(arguments.length-2),xs=2;xs<arguments.length;xs++)at[xs-2]=arguments[xs];return F.prototype[Be].apply(xe,at)}}function C(y){const F=y.length;if(0<F){const ee=Array(F);for(let xe=0;xe<F;xe++)ee[xe]=y[xe];return ee}return[]}function E(y,F){for(let ee=1;ee<arguments.length;ee++){const xe=arguments[ee];if(u(xe)){const Be=y.length||0,Ke=xe.length||0;y.length=Be+Ke;for(let at=0;at<Ke;at++)y[Be+at]=xe[at]}else y.push(xe)}}class k{constructor(F,ee){this.i=F,this.j=ee,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function A(y){return/^[\s\xa0]*$/.test(y)}function S(){var y=c.navigator;return y&&(y=y.userAgent)?y:""}function T(y){return T[" "](y),y}T[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(y,F,ee){for(const xe in y)F.call(ee,y[xe],xe,y)}function P(y,F){for(const ee in y)F.call(void 0,y[ee],ee,y)}function I(y){const F={};for(const ee in y)F[ee]=y[ee];return F}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(y,F){let ee,xe;for(let Be=1;Be<arguments.length;Be++){xe=arguments[Be];for(ee in xe)y[ee]=xe[ee];for(let Ke=0;Ke<D.length;Ke++)ee=D[Ke],Object.prototype.hasOwnProperty.call(xe,ee)&&(y[ee]=xe[ee])}}function M(y){var F=1;y=y.split(":");const ee=[];for(;0<F&&y.length;)ee.push(y.shift()),F--;return y.length&&ee.push(y.join(":")),ee}function x(y){c.setTimeout(()=>{throw y},0)}function $(){var y=se;let F=null;return y.g&&(F=y.g,y.g=y.g.next,y.g||(y.h=null),F.next=null),F}class Z{constructor(){this.h=this.g=null}add(F,ee){const xe=me.get();xe.set(F,ee),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var me=new k(()=>new re,y=>y.reset());class re{constructor(){this.next=this.g=this.h=null}set(F,ee){this.h=F,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let J,le=!1,se=new Z,z=()=>{const y=c.Promise.resolve(void 0);J=()=>{y.then(ce)}};var ce=()=>{for(var y;y=$();){try{y.h.call(y.g)}catch(ee){x(ee)}var F=me;F.j(y),100>F.h&&(F.h++,y.next=F.g,F.g=y)}le=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(y,F){this.type=y,this.g=this.target=F,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,F=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const ee=()=>{};c.addEventListener("test",ee,F),c.removeEventListener("test",ee,F)}catch{}return y}();function Ue(y,F){if(_e.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var ee=this.type=y.type,xe=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=F,F=y.relatedTarget){if(R){e:{try{T(F.nodeName);var Be=!0;break e}catch{}Be=!1}Be||(F=null)}}else ee=="mouseover"?F=y.fromElement:ee=="mouseout"&&(F=y.toElement);this.relatedTarget=F,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:ze[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Ue.aa.h.call(this)}}w(Ue,_e);var ze={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ce(y,F,ee,xe,Be){this.listener=y,this.proxy=null,this.src=F,this.type=ee,this.capture=!!xe,this.ha=Be,this.key=++$e,this.da=this.fa=!1}function Oe(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ve(y){this.src=y,this.g={},this.h=0}ve.prototype.add=function(y,F,ee,xe,Be){var Ke=y.toString();y=this.g[Ke],y||(y=this.g[Ke]=[],this.h++);var at=X(y,F,xe,Be);return-1<at?(F=y[at],ee||(F.fa=!1)):(F=new Ce(F,this.src,Ke,!!xe,Be),F.fa=ee,y.push(F)),F};function fe(y,F){var ee=F.type;if(ee in y.g){var xe=y.g[ee],Be=Array.prototype.indexOf.call(xe,F,void 0),Ke;(Ke=0<=Be)&&Array.prototype.splice.call(xe,Be,1),Ke&&(Oe(F),y.g[ee].length==0&&(delete y.g[ee],y.h--))}}function X(y,F,ee,xe){for(var Be=0;Be<y.length;++Be){var Ke=y[Be];if(!Ke.da&&Ke.listener==F&&Ke.capture==!!ee&&Ke.ha==xe)return Be}return-1}var H="closure_lm_"+(1e6*Math.random()|0),W={};function ge(y,F,ee,xe,Be){if(Array.isArray(F)){for(var Ke=0;Ke<F.length;Ke++)ge(y,F[Ke],ee,xe,Be);return null}return ee=ie(ee),y&&y[Re]?y.K(F,ee,d(xe)?!!xe.capture:!1,Be):Te(y,F,ee,!1,xe,Be)}function Te(y,F,ee,xe,Be,Ke){if(!F)throw Error("Invalid event type");var at=d(Be)?!!Be.capture:!!Be,xs=j(y);if(xs||(y[H]=xs=new ve(y)),ee=xs.add(F,ee,xe,at,Ke),ee.proxy)return ee;if(xe=Ie(),ee.proxy=xe,xe.src=y,xe.listener=ee,y.addEventListener)Ee||(Be=at),Be===void 0&&(Be=!1),y.addEventListener(F.toString(),xe,Be);else if(y.attachEvent)y.attachEvent(N(F.toString()),xe);else if(y.addListener&&y.removeListener)y.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return ee}function Ie(){function y(ee){return F.call(y.src,y.listener,ee)}const F=ue;return y}function Ne(y,F,ee,xe,Be){if(Array.isArray(F))for(var Ke=0;Ke<F.length;Ke++)Ne(y,F[Ke],ee,xe,Be);else xe=d(xe)?!!xe.capture:!!xe,ee=ie(ee),y&&y[Re]?(y=y.i,F=String(F).toString(),F in y.g&&(Ke=y.g[F],ee=X(Ke,ee,xe,Be),-1<ee&&(Oe(Ke[ee]),Array.prototype.splice.call(Ke,ee,1),Ke.length==0&&(delete y.g[F],y.h--)))):y&&(y=j(y))&&(F=y.g[F.toString()],y=-1,F&&(y=X(F,ee,xe,Be)),(ee=-1<y?F[y]:null)&&je(ee))}function je(y){if(typeof y!="number"&&y&&!y.da){var F=y.src;if(F&&F[Re])fe(F.i,y);else{var ee=y.type,xe=y.proxy;F.removeEventListener?F.removeEventListener(ee,xe,y.capture):F.detachEvent?F.detachEvent(N(ee),xe):F.addListener&&F.removeListener&&F.removeListener(xe),(ee=j(F))?(fe(ee,y),ee.h==0&&(ee.src=null,F[H]=null)):Oe(y)}}}function N(y){return y in W?W[y]:W[y]="on"+y}function ue(y,F){if(y.da)y=!0;else{F=new Ue(F,this);var ee=y.listener,xe=y.ha||y.src;y.fa&&je(y),y=ee.call(xe,F)}return y}function j(y){return y=y[H],y instanceof ve?y:null}var B="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(y){return typeof y=="function"?y:(y[B]||(y[B]=function(F){return y.handleEvent(F)}),y[B])}function V(){pe.call(this),this.i=new ve(this),this.M=this,this.F=null}w(V,pe),V.prototype[Re]=!0,V.prototype.removeEventListener=function(y,F,ee,xe){Ne(this,y,F,ee,xe)};function O(y,F){var ee,xe=y.F;if(xe)for(ee=[];xe;xe=xe.F)ee.push(xe);if(y=y.M,xe=F.type||F,typeof F=="string")F=new _e(F,y);else if(F instanceof _e)F.target=F.target||y;else{var Be=F;F=new _e(xe,y),U(F,Be)}if(Be=!0,ee)for(var Ke=ee.length-1;0<=Ke;Ke--){var at=F.g=ee[Ke];Be=te(at,xe,!0,F)&&Be}if(at=F.g=y,Be=te(at,xe,!0,F)&&Be,Be=te(at,xe,!1,F)&&Be,ee)for(Ke=0;Ke<ee.length;Ke++)at=F.g=ee[Ke],Be=te(at,xe,!1,F)&&Be}V.prototype.N=function(){if(V.aa.N.call(this),this.i){var y=this.i,F;for(F in y.g){for(var ee=y.g[F],xe=0;xe<ee.length;xe++)Oe(ee[xe]);delete y.g[F],y.h--}}this.F=null},V.prototype.K=function(y,F,ee,xe){return this.i.add(String(y),F,!1,ee,xe)},V.prototype.L=function(y,F,ee,xe){return this.i.add(String(y),F,!0,ee,xe)};function te(y,F,ee,xe){if(F=y.i.g[String(F)],!F)return!0;F=F.concat();for(var Be=!0,Ke=0;Ke<F.length;++Ke){var at=F[Ke];if(at&&!at.da&&at.capture==ee){var xs=at.listener,Nn=at.ha||at.src;at.fa&&fe(y.i,at),Be=xs.call(Nn,xe)!==!1&&Be}}return Be&&!xe.defaultPrevented}function G(y,F,ee){if(typeof y=="function")ee&&(y=p(y,ee));else if(y&&typeof y.handleEvent=="function")y=p(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:c.setTimeout(y,F||0)}function ne(y){y.g=G(()=>{y.g=null,y.i&&(y.i=!1,ne(y))},y.l);const F=y.h;y.h=null,y.m.apply(null,F)}class he extends pe{constructor(F,ee){super(),this.m=F,this.l=ee,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(y){pe.call(this),this.h=y,this.g={}}w(ye,pe);var ae=[];function de(y){L(y.g,function(F,ee){this.g.hasOwnProperty(ee)&&je(F)},y),y.g={}}ye.prototype.N=function(){ye.aa.N.call(this),de(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=c.JSON.stringify,Le=c.JSON.parse,it=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function Ze(){}Ze.prototype.h=null;function pt(y){return y.h||(y.h=y.i())}function ft(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ke(){_e.call(this,"d")}w(ke,_e);function Fe(){_e.call(this,"c")}w(Fe,_e);var Ae={},We=null;function nt(){return We=We||new V}Ae.La="serverreachability";function ot(y){_e.call(this,Ae.La,y)}w(ot,_e);function _t(y){const F=nt();O(F,new ot(F))}Ae.STAT_EVENT="statevent";function Mt(y,F){_e.call(this,Ae.STAT_EVENT,y),this.stat=F}w(Mt,_e);function ut(y){const F=nt();O(F,new Mt(F,y))}Ae.Ma="timingevent";function Kt(y,F){_e.call(this,Ae.Ma,y),this.size=F}w(Kt,_e);function Nt(y,F){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},F)}function Xt(){this.g=!0}Xt.prototype.xa=function(){this.g=!1};function zt(y,F,ee,xe,Be,Ke){y.info(function(){if(y.g)if(Ke)for(var at="",xs=Ke.split("&"),Nn=0;Nn<xs.length;Nn++){var rs=xs[Nn].split("=");if(1<rs.length){var Hn=rs[0];rs=rs[1];var Gn=Hn.split("_");at=2<=Gn.length&&Gn[1]=="type"?at+(Hn+"="+rs+"&"):at+(Hn+"=redacted&")}}else at=null;else at=Ke;return"XMLHTTP REQ ("+xe+") [attempt "+Be+"]: "+F+`
`+ee+`
`+at})}function mn(y,F,ee,xe,Be,Ke,at){y.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+Be+"]: "+F+`
`+ee+`
`+Ke+" "+at})}function hs(y,F,ee,xe){y.info(function(){return"XMLHTTP TEXT ("+F+"): "+Ni(y,ee)+(xe?" "+xe:"")})}function io(y,F){y.info(function(){return"TIMEOUT: "+F})}Xt.prototype.info=function(){};function Ni(y,F){if(!y.g)return F;if(!F)return null;try{var ee=JSON.parse(F);if(ee){for(y=0;y<ee.length;y++)if(Array.isArray(ee[y])){var xe=ee[y];if(!(2>xe.length)){var Be=xe[1];if(Array.isArray(Be)&&!(1>Be.length)){var Ke=Be[0];if(Ke!="noop"&&Ke!="stop"&&Ke!="close")for(var at=1;at<Be.length;at++)Be[at]=""}}}}return Me(ee)}catch{return F}}var rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wa;function Oi(){}w(Oi,Ze),Oi.prototype.g=function(){return new XMLHttpRequest},Oi.prototype.i=function(){return{}},Wa=new Oi;function ri(y,F,ee,xe){this.j=y,this.i=F,this.l=ee,this.R=xe||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zv}function Zv(){this.i=null,this.g="",this.h=!1}var eb={},Uf={};function qf(y,F,ee){y.L=1,y.v=jf(oi(F)),y.m=ee,y.P=!0,tb(y,null)}function tb(y,F){y.F=Date.now(),He(y),y.A=oi(y.v);var ee=y.A,xe=y.R;Array.isArray(xe)||(xe=[String(xe)]),x2(ee.i,"t",xe),y.C=0,ee=y.j.J,y.h=new Zv,y.g=U2(y.j,ee?F:null,!y.m),0<y.O&&(y.M=new he(p(y.Y,y,y.g),y.O)),F=y.U,ee=y.g,xe=y.ca;var Be="readystatechange";Array.isArray(Be)||(Be&&(ae[0]=Be.toString()),Be=ae);for(var Ke=0;Ke<Be.length;Ke++){var at=ge(ee,Be[Ke],xe||F.handleEvent,!1,F.h||F);if(!at)break;F.g[at.key]=at}F=y.H?I(y.H):{},y.m?(y.u||(y.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,F)):(y.u="GET",y.g.ea(y.A,y.u,null,F)),_t(),zt(y.i,y.u,y.A,y.l,y.R,y.m)}ri.prototype.ca=function(y){y=y.target;const F=this.M;F&&ii(y)==3?F.j():this.Y(y)},ri.prototype.Y=function(y){try{if(y==this.g)e:{const Gn=ii(this.g);var F=this.g.Ba();const cc=this.g.Z();if(!(3>Gn)&&(Gn!=3||this.g&&(this.h.h||this.g.oa()||A2(this.g)))){this.J||Gn!=4||F==7||(F==8||0>=cc?_t(3):_t(2)),vt(this);var ee=this.g.Z();this.X=ee;t:if(sb(this)){var xe=A2(this.g);y="";var Be=xe.length,Ke=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),qt(this);var at="";break t}this.h.i=new c.TextDecoder}for(F=0;F<Be;F++)this.h.h=!0,y+=this.h.i.decode(xe[F],{stream:!(Ke&&F==Be-1)});xe.length=0,this.h.g+=y,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=ee==200,mn(this.i,this.u,this.A,this.l,this.R,Gn,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var xs,Nn=this.g;if((xs=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(xs)){var rs=xs;break t}}rs=null}if(ee=rs)hs(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,ee);else{this.o=!1,this.s=3,ut(12),ns(this),qt(this);break e}}if(this.P){ee=!0;let ao;for(;!this.J&&this.C<at.length;)if(ao=Pe(this,at),ao==Uf){Gn==4&&(this.s=4,ut(14),ee=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(ao==eb){this.s=4,ut(15),hs(this.i,this.l,at,"[Invalid Chunk]"),ee=!1;break}else hs(this.i,this.l,ao,null),bs(this,ao);if(sb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gn!=4||at.length!=0||this.h.h||(this.s=1,ut(16),ee=!1),this.o=this.o&&ee,!ee)hs(this.i,this.l,at,"[Invalid Chunked Response]"),ns(this),qt(this);else if(0<at.length&&!this.W){this.W=!0;var Hn=this.j;Hn.g==this&&Hn.ba&&!Hn.M&&(Hn.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),lb(Hn),Hn.M=!0,ut(11))}}else hs(this.i,this.l,at,null),bs(this,at);Gn==4&&ns(this),this.o&&!this.J&&(Gn==4?D2(this.j,this):(this.o=!1,He(this)))}else v6(this.g),ee==400&&0<at.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),ns(this),qt(this)}}}catch{}finally{}};function sb(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Pe(y,F){var ee=y.C,xe=F.indexOf(`
`,ee);return xe==-1?Uf:(ee=Number(F.substring(ee,xe)),isNaN(ee)?eb:(xe+=1,xe+ee>F.length?Uf:(F=F.slice(xe,xe+ee),y.C=xe+ee,F)))}ri.prototype.cancel=function(){this.J=!0,ns(this)};function He(y){y.S=Date.now()+y.I,ht(y,y.I)}function ht(y,F){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Nt(p(y.ba,y),F)}function vt(y){y.B&&(c.clearTimeout(y.B),y.B=null)}ri.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(io(this.i,this.A),this.L!=2&&(_t(),ut(17)),ns(this),this.s=2,qt(this)):ht(this,this.S-y)};function qt(y){y.j.G==0||y.J||D2(y.j,y)}function ns(y){vt(y);var F=y.M;F&&typeof F.ma=="function"&&F.ma(),y.M=null,de(y.U),y.g&&(F=y.g,y.g=null,F.abort(),F.ma())}function bs(y,F){try{var ee=y.j;if(ee.G!=0&&(ee.g==y||nb(ee.h,y))){if(!y.K&&nb(ee.h,y)&&ee.G==3){try{var xe=ee.Da.g.parse(F)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var Be=xe;if(Be[0]==0){e:if(!ee.u){if(ee.g)if(ee.g.F+3e3<y.F)Xf(ee),Kf(ee);else break e;ab(ee),ut(18)}}else ee.za=Be[1],0<ee.za-ee.T&&37500>Be[2]&&ee.F&&ee.v==0&&!ee.C&&(ee.C=Nt(p(ee.Za,ee),6e3));if(1>=Vf(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else Qa(ee,11)}else if((y.K||ee.g==y)&&Xf(ee),!A(F))for(Be=ee.Da.g.parse(F),F=0;F<Be.length;F++){let rs=Be[F];if(ee.T=rs[0],rs=rs[1],ee.G==2)if(rs[0]=="c"){ee.K=rs[1],ee.ia=rs[2];const Hn=rs[3];Hn!=null&&(ee.la=Hn,ee.j.info("VER="+ee.la));const Gn=rs[4];Gn!=null&&(ee.Aa=Gn,ee.j.info("SVER="+ee.Aa));const cc=rs[5];cc!=null&&typeof cc=="number"&&0<cc&&(xe=1.5*cc,ee.L=xe,ee.j.info("backChannelRequestTimeoutMs_="+xe)),xe=ee;const ao=y.g;if(ao){const Zf=ao.g?ao.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zf){var Ke=xe.h;Ke.g||Zf.indexOf("spdy")==-1&&Zf.indexOf("quic")==-1&&Zf.indexOf("h2")==-1||(Ke.j=Ke.l,Ke.g=new Set,Ke.h&&(rb(Ke,Ke.h),Ke.h=null))}if(xe.D){const cb=ao.g?ao.g.getResponseHeader("X-HTTP-Session-Id"):null;cb&&(xe.ya=cb,Ps(xe.I,xe.D,cb))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-y.F,ee.j.info("Handshake RTT: "+ee.R+"ms")),xe=ee;var at=y;if(xe.qa=F2(xe,xe.J?xe.ia:null,xe.W),at.K){f2(xe.h,at);var xs=at,Nn=xe.L;Nn&&(xs.I=Nn),xs.B&&(vt(xs),He(xs)),xe.g=at}else R2(xe);0<ee.i.length&&Yf(ee)}else rs[0]!="stop"&&rs[0]!="close"||Qa(ee,7);else ee.G==3&&(rs[0]=="stop"||rs[0]=="close"?rs[0]=="stop"?Qa(ee,7):ib(ee):rs[0]!="noop"&&ee.l&&ee.l.ta(rs),ee.v=0)}}_t(4)}catch{}}var Ns=class{constructor(y,F){this.g=y,this.map=F}};function Zs(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bf(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Vf(y){return y.h?1:y.g?y.g.size:0}function nb(y,F){return y.h?y.h==F:y.g?y.g.has(F):!1}function rb(y,F){y.g?y.g.add(F):y.h=F}function f2(y,F){y.h&&y.h==F?y.h=null:y.g&&y.g.has(F)&&y.g.delete(F)}Zs.prototype.cancel=function(){if(this.i=p2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function p2(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let F=y.i;for(const ee of y.g.values())F=F.concat(ee.D);return F}return C(y.i)}function s6(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(u(y)){for(var F=[],ee=y.length,xe=0;xe<ee;xe++)F.push(y[xe]);return F}F=[],ee=0;for(xe in y)F[ee++]=y[xe];return F}function n6(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(u(y)||typeof y=="string"){var F=[];y=y.length;for(var ee=0;ee<y;ee++)F.push(ee);return F}F=[],ee=0;for(const xe in y)F[ee++]=xe;return F}}}function h2(y,F){if(y.forEach&&typeof y.forEach=="function")y.forEach(F,void 0);else if(u(y)||typeof y=="string")Array.prototype.forEach.call(y,F,void 0);else for(var ee=n6(y),xe=s6(y),Be=xe.length,Ke=0;Ke<Be;Ke++)F.call(void 0,xe[Ke],ee&&ee[Ke],y)}var g2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r6(y,F){if(y){y=y.split("&");for(var ee=0;ee<y.length;ee++){var xe=y[ee].indexOf("="),Be=null;if(0<=xe){var Ke=y[ee].substring(0,xe);Be=y[ee].substring(xe+1)}else Ke=y[ee];F(Ke,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function za(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof za){this.h=y.h,Hf(this,y.j),this.o=y.o,this.g=y.g,Gf(this,y.s),this.l=y.l;var F=y.i,ee=new Ku;ee.i=F.i,F.g&&(ee.g=new Map(F.g),ee.h=F.h),v2(this,ee),this.m=y.m}else y&&(F=String(y).match(g2))?(this.h=!1,Hf(this,F[1]||"",!0),this.o=zu(F[2]||""),this.g=zu(F[3]||"",!0),Gf(this,F[4]),this.l=zu(F[5]||"",!0),v2(this,F[6]||"",!0),this.m=zu(F[7]||"")):(this.h=!1,this.i=new Ku(null,this.h))}za.prototype.toString=function(){var y=[],F=this.j;F&&y.push(Qu(F,b2,!0),":");var ee=this.g;return(ee||F=="file")&&(y.push("//"),(F=this.o)&&y.push(Qu(F,b2,!0),"@"),y.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ee=this.s,ee!=null&&y.push(":",String(ee))),(ee=this.l)&&(this.g&&ee.charAt(0)!="/"&&y.push("/"),y.push(Qu(ee,ee.charAt(0)=="/"?a6:i6,!0))),(ee=this.i.toString())&&y.push("?",ee),(ee=this.m)&&y.push("#",Qu(ee,c6)),y.join("")};function oi(y){return new za(y)}function Hf(y,F,ee){y.j=ee?zu(F,!0):F,y.j&&(y.j=y.j.replace(/:$/,""))}function Gf(y,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);y.s=F}else y.s=null}function v2(y,F,ee){F instanceof Ku?(y.i=F,u6(y.i,y.h)):(ee||(F=Qu(F,l6)),y.i=new Ku(F,y.h))}function Ps(y,F,ee){y.i.set(F,ee)}function jf(y){return Ps(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function zu(y,F){return y?F?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Qu(y,F,ee){return typeof y=="string"?(y=encodeURI(y).replace(F,o6),ee&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function o6(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var b2=/[#\/\?@]/g,i6=/[#\?:]/g,a6=/[#\?]/g,l6=/[#\?@]/g,c6=/#/g;function Ku(y,F){this.h=this.g=null,this.i=y||null,this.j=!!F}function Fi(y){y.g||(y.g=new Map,y.h=0,y.i&&r6(y.i,function(F,ee){y.add(decodeURIComponent(F.replace(/\+/g," ")),ee)}))}t=Ku.prototype,t.add=function(y,F){Fi(this),this.i=null,y=ac(this,y);var ee=this.g.get(y);return ee||this.g.set(y,ee=[]),ee.push(F),this.h+=1,this};function y2(y,F){Fi(y),F=ac(y,F),y.g.has(F)&&(y.i=null,y.h-=y.g.get(F).length,y.g.delete(F))}function _2(y,F){return Fi(y),F=ac(y,F),y.g.has(F)}t.forEach=function(y,F){Fi(this),this.g.forEach(function(ee,xe){ee.forEach(function(Be){y.call(F,Be,xe,this)},this)},this)},t.na=function(){Fi(this);const y=Array.from(this.g.values()),F=Array.from(this.g.keys()),ee=[];for(let xe=0;xe<F.length;xe++){const Be=y[xe];for(let Ke=0;Ke<Be.length;Ke++)ee.push(F[xe])}return ee},t.V=function(y){Fi(this);let F=[];if(typeof y=="string")_2(this,y)&&(F=F.concat(this.g.get(ac(this,y))));else{y=Array.from(this.g.values());for(let ee=0;ee<y.length;ee++)F=F.concat(y[ee])}return F},t.set=function(y,F){return Fi(this),this.i=null,y=ac(this,y),_2(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[F]),this.h+=1,this},t.get=function(y,F){return y?(y=this.V(y),0<y.length?String(y[0]):F):F};function x2(y,F,ee){y2(y,F),0<ee.length&&(y.i=null,y.g.set(ac(y,F),C(ee)),y.h+=ee.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],F=Array.from(this.g.keys());for(var ee=0;ee<F.length;ee++){var xe=F[ee];const Ke=encodeURIComponent(String(xe)),at=this.V(xe);for(xe=0;xe<at.length;xe++){var Be=Ke;at[xe]!==""&&(Be+="="+encodeURIComponent(String(at[xe]))),y.push(Be)}}return this.i=y.join("&")};function ac(y,F){return F=String(F),y.j&&(F=F.toLowerCase()),F}function u6(y,F){F&&!y.j&&(Fi(y),y.i=null,y.g.forEach(function(ee,xe){var Be=xe.toLowerCase();xe!=Be&&(y2(this,xe),x2(this,Be,ee))},y)),y.j=F}function d6(y,F){const ee=new Xt;if(c.Image){const xe=new Image;xe.onload=g(Ui,ee,"TestLoadImage: loaded",!0,F,xe),xe.onerror=g(Ui,ee,"TestLoadImage: error",!1,F,xe),xe.onabort=g(Ui,ee,"TestLoadImage: abort",!1,F,xe),xe.ontimeout=g(Ui,ee,"TestLoadImage: timeout",!1,F,xe),c.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=y}else F(!1)}function m6(y,F){const ee=new Xt,xe=new AbortController,Be=setTimeout(()=>{xe.abort(),Ui(ee,"TestPingServer: timeout",!1,F)},1e4);fetch(y,{signal:xe.signal}).then(Ke=>{clearTimeout(Be),Ke.ok?Ui(ee,"TestPingServer: ok",!0,F):Ui(ee,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Be),Ui(ee,"TestPingServer: error",!1,F)})}function Ui(y,F,ee,xe,Be){try{Be&&(Be.onload=null,Be.onerror=null,Be.onabort=null,Be.ontimeout=null),xe(ee)}catch{}}function f6(){this.g=new it}function p6(y,F,ee){const xe=ee||"";try{h2(y,function(Be,Ke){let at=Be;d(Be)&&(at=Me(Be)),F.push(xe+Ke+"="+encodeURIComponent(at))})}catch(Be){throw F.push(xe+"type="+encodeURIComponent("_badmap")),Be}}function Wf(y){this.l=y.Ub||null,this.j=y.eb||!1}w(Wf,Ze),Wf.prototype.g=function(){return new zf(this.l,this.j)},Wf.prototype.i=function(y){return function(){return y}}({});function zf(y,F){V.call(this),this.D=y,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(zf,V),t=zf.prototype,t.open=function(y,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=F,this.readyState=1,Xu(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(F.body=y),(this.D||c).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yu(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Xu(this)),this.g&&(this.readyState=3,Xu(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;k2(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function k2(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var F=y.value?y.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!y.done}))&&(this.response=this.responseText+=F)}y.done?Yu(this):Xu(this),this.readyState==3&&k2(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,Yu(this))},t.Qa=function(y){this.g&&(this.response=y,Yu(this))},t.ga=function(){this.g&&Yu(this)};function Yu(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Xu(y)}t.setRequestHeader=function(y,F){this.u.append(y,F)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],F=this.h.entries();for(var ee=F.next();!ee.done;)ee=ee.value,y.push(ee[0]+": "+ee[1]),ee=F.next();return y.join(`\r
`)};function Xu(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function w2(y){let F="";return L(y,function(ee,xe){F+=xe,F+=":",F+=ee,F+=`\r
`}),F}function ob(y,F,ee){e:{for(xe in ee){var xe=!1;break e}xe=!0}xe||(ee=w2(ee),typeof y=="string"?ee!=null&&encodeURIComponent(String(ee)):Ps(y,F,ee))}function Vs(y){V.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Vs,V);var h6=/^https?$/i,g6=["POST","PUT"];t=Vs.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,F,ee,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);F=F?F.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wa.g(),this.v=this.o?pt(this.o):pt(Wa),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(F,String(y),!0),this.B=!1}catch(Ke){E2(this,Ke);return}if(y=ee||"",ee=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var Be in xe)ee.set(Be,xe[Be]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const Ke of xe.keys())ee.set(Ke,xe.get(Ke));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(ee.keys()).find(Ke=>Ke.toLowerCase()=="content-type"),Be=c.FormData&&y instanceof c.FormData,!(0<=Array.prototype.indexOf.call(g6,F,void 0))||xe||Be||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ke,at]of ee)this.g.setRequestHeader(Ke,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{T2(this),this.u=!0,this.g.send(y),this.u=!1}catch(Ke){E2(this,Ke)}};function E2(y,F){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=F,y.m=5,C2(y),Qf(y)}function C2(y){y.A||(y.A=!0,O(y,"complete"),O(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,O(this,"complete"),O(this,"abort"),Qf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qf(this,!0)),Vs.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?S2(this):this.bb())},t.bb=function(){S2(this)};function S2(y){if(y.h&&typeof i<"u"&&(!y.v[1]||ii(y)!=4||y.Z()!=2)){if(y.u&&ii(y)==4)G(y.Ea,0,y);else if(O(y,"readystatechange"),ii(y)==4){y.h=!1;try{const at=y.Z();e:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var ee;if(!(ee=F)){var xe;if(xe=at===0){var Be=String(y.D).match(g2)[1]||null;!Be&&c.self&&c.self.location&&(Be=c.self.location.protocol.slice(0,-1)),xe=!h6.test(Be?Be.toLowerCase():"")}ee=xe}if(ee)O(y,"complete"),O(y,"success");else{y.m=6;try{var Ke=2<ii(y)?y.g.statusText:""}catch{Ke=""}y.l=Ke+" ["+y.Z()+"]",C2(y)}}finally{Qf(y)}}}}function Qf(y,F){if(y.g){T2(y);const ee=y.g,xe=y.v[0]?()=>{}:null;y.g=null,y.v=null,F||O(y,"ready");try{ee.onreadystatechange=xe}catch{}}}function T2(y){y.I&&(c.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function ii(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var F=this.g.responseText;return y&&F.indexOf(y)==0&&(F=F.substring(y.length)),Le(F)}};function A2(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function v6(y){const F={};y=(y.g&&2<=ii(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<y.length;xe++){if(A(y[xe]))continue;var ee=M(y[xe]);const Be=ee[0];if(ee=ee[1],typeof ee!="string")continue;ee=ee.trim();const Ke=F[Be]||[];F[Be]=Ke,Ke.push(ee)}P(F,function(xe){return xe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ju(y,F,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[y]||F}function I2(y){this.Aa=0,this.i=[],this.j=new Xt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ju("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ju("baseRetryDelayMs",5e3,y),this.cb=Ju("retryDelaySeedMs",1e4,y),this.Wa=Ju("forwardChannelMaxRetries",2,y),this.wa=Ju("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Zs(y&&y.concurrentRequestLimit),this.Da=new f6,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=I2.prototype,t.la=8,t.G=1,t.connect=function(y,F,ee,xe){ut(0),this.W=y,this.H=F||{},ee&&xe!==void 0&&(this.H.OSID=ee,this.H.OAID=xe),this.F=this.X,this.I=F2(this,null,this.W),Yf(this)};function ib(y){if(P2(y),y.G==3){var F=y.U++,ee=oi(y.I);if(Ps(ee,"SID",y.K),Ps(ee,"RID",F),Ps(ee,"TYPE","terminate"),Zu(y,ee),F=new ri(y,y.j,F),F.L=2,F.v=jf(oi(ee)),ee=!1,c.navigator&&c.navigator.sendBeacon)try{ee=c.navigator.sendBeacon(F.v.toString(),"")}catch{}!ee&&c.Image&&(new Image().src=F.v,ee=!0),ee||(F.g=U2(F.j,null),F.g.ea(F.v)),F.F=Date.now(),He(F)}O2(y)}function Kf(y){y.g&&(lb(y),y.g.cancel(),y.g=null)}function P2(y){Kf(y),y.u&&(c.clearTimeout(y.u),y.u=null),Xf(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&c.clearTimeout(y.s),y.s=null)}function Yf(y){if(!Bf(y.h)&&!y.s){y.s=!0;var F=y.Ga;J||z(),le||(J(),le=!0),se.add(F,y),y.B=0}}function b6(y,F){return Vf(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=F.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Nt(p(y.Ga,y,F),N2(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const Be=new ri(this,this.j,y);let Ke=this.o;if(this.S&&(Ke?(Ke=I(Ke),U(Ke,this.S)):Ke=this.S),this.m!==null||this.O||(Be.H=Ke,Ke=null),this.P)e:{for(var F=0,ee=0;ee<this.i.length;ee++){t:{var xe=this.i[ee];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(F+=xe,4096<F){F=ee;break e}if(F===4096||ee===this.i.length-1){F=ee+1;break e}}F=1e3}else F=1e3;F=$2(this,Be,F),ee=oi(this.I),Ps(ee,"RID",y),Ps(ee,"CVER",22),this.D&&Ps(ee,"X-HTTP-Session-Id",this.D),Zu(this,ee),Ke&&(this.O?F="headers="+encodeURIComponent(String(w2(Ke)))+"&"+F:this.m&&ob(ee,this.m,Ke)),rb(this.h,Be),this.Ua&&Ps(ee,"TYPE","init"),this.P?(Ps(ee,"$req",F),Ps(ee,"SID","null"),Be.T=!0,qf(Be,ee,null)):qf(Be,ee,F),this.G=2}}else this.G==3&&(y?M2(this,y):this.i.length==0||Bf(this.h)||M2(this))};function M2(y,F){var ee;F?ee=F.l:ee=y.U++;const xe=oi(y.I);Ps(xe,"SID",y.K),Ps(xe,"RID",ee),Ps(xe,"AID",y.T),Zu(y,xe),y.m&&y.o&&ob(xe,y.m,y.o),ee=new ri(y,y.j,ee,y.B+1),y.m===null&&(ee.H=y.o),F&&(y.i=F.D.concat(y.i)),F=$2(y,ee,1e3),ee.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),rb(y.h,ee),qf(ee,xe,F)}function Zu(y,F){y.H&&L(y.H,function(ee,xe){Ps(F,xe,ee)}),y.l&&h2({},function(ee,xe){Ps(F,xe,ee)})}function $2(y,F,ee){ee=Math.min(y.i.length,ee);var xe=y.l?p(y.l.Na,y.l,y):null;e:{var Be=y.i;let Ke=-1;for(;;){const at=["count="+ee];Ke==-1?0<ee?(Ke=Be[0].g,at.push("ofs="+Ke)):Ke=0:at.push("ofs="+Ke);let xs=!0;for(let Nn=0;Nn<ee;Nn++){let rs=Be[Nn].g;const Hn=Be[Nn].map;if(rs-=Ke,0>rs)Ke=Math.max(0,Be[Nn].g-100),xs=!1;else try{p6(Hn,at,"req"+rs+"_")}catch{xe&&xe(Hn)}}if(xs){xe=at.join("&");break e}}}return y=y.i.splice(0,ee),F.D=y,xe}function R2(y){if(!y.g&&!y.u){y.Y=1;var F=y.Fa;J||z(),le||(J(),le=!0),se.add(F,y),y.v=0}}function ab(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Nt(p(y.Fa,y),N2(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,L2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Nt(p(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Kf(this),L2(this))};function lb(y){y.A!=null&&(c.clearTimeout(y.A),y.A=null)}function L2(y){y.g=new ri(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var F=oi(y.qa);Ps(F,"RID","rpc"),Ps(F,"SID",y.K),Ps(F,"AID",y.T),Ps(F,"CI",y.F?"0":"1"),!y.F&&y.ja&&Ps(F,"TO",y.ja),Ps(F,"TYPE","xmlhttp"),Zu(y,F),y.m&&y.o&&ob(F,y.m,y.o),y.L&&(y.g.I=y.L);var ee=y.g;y=y.ia,ee.L=1,ee.v=jf(oi(F)),ee.m=null,ee.P=!0,tb(ee,y)}t.Za=function(){this.C!=null&&(this.C=null,Kf(this),ab(this),ut(19))};function Xf(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function D2(y,F){var ee=null;if(y.g==F){Xf(y),lb(y),y.g=null;var xe=2}else if(nb(y.h,F))ee=F.D,f2(y.h,F),xe=1;else return;if(y.G!=0){if(F.o)if(xe==1){ee=F.m?F.m.length:0,F=Date.now()-F.F;var Be=y.B;xe=nt(),O(xe,new Kt(xe,ee)),Yf(y)}else R2(y);else if(Be=F.s,Be==3||Be==0&&0<F.X||!(xe==1&&b6(y,F)||xe==2&&ab(y)))switch(ee&&0<ee.length&&(F=y.h,F.i=F.i.concat(ee)),Be){case 1:Qa(y,5);break;case 4:Qa(y,10);break;case 3:Qa(y,6);break;default:Qa(y,2)}}}function N2(y,F){let ee=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(ee*=2),ee*F}function Qa(y,F){if(y.j.info("Error code "+F),F==2){var ee=p(y.fb,y),xe=y.Xa;const Be=!xe;xe=new za(xe||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Hf(xe,"https"),jf(xe),Be?d6(xe.toString(),ee):m6(xe.toString(),ee)}else ut(2);y.G=0,y.l&&y.l.sa(F),O2(y),P2(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function O2(y){if(y.G=0,y.ka=[],y.l){const F=p2(y.h);(F.length!=0||y.i.length!=0)&&(E(y.ka,F),E(y.ka,y.i),y.h.i.length=0,C(y.i),y.i.length=0),y.l.ra()}}function F2(y,F,ee){var xe=ee instanceof za?oi(ee):new za(ee);if(xe.g!="")F&&(xe.g=F+"."+xe.g),Gf(xe,xe.s);else{var Be=c.location;xe=Be.protocol,F=F?F+"."+Be.hostname:Be.hostname,Be=+Be.port;var Ke=new za(null);xe&&Hf(Ke,xe),F&&(Ke.g=F),Be&&Gf(Ke,Be),ee&&(Ke.l=ee),xe=Ke}return ee=y.D,F=y.ya,ee&&F&&Ps(xe,ee,F),Ps(xe,"VER",y.la),Zu(y,xe),xe}function U2(y,F,ee){if(F&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=y.Ca&&!y.pa?new Vs(new Wf({eb:ee})):new Vs(y.pa),F.Ha(y.J),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function q2(){}t=q2.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jf(){}Jf.prototype.g=function(y,F){return new Ar(y,F)};function Ar(y,F){V.call(this),this.g=new I2(F),this.l=y,this.h=F&&F.messageUrlParams||null,y=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(y?y["X-WebChannel-Content-Type"]=F.messageContentType:y={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(y?y["X-WebChannel-Client-Profile"]=F.va:y={"X-WebChannel-Client-Profile":F.va}),this.g.S=y,(y=F&&F.Sb)&&!A(y)&&(this.g.m=y),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!A(F)&&(this.g.D=F,y=this.h,y!==null&&F in y&&(y=this.h,F in y&&delete y[F])),this.j=new lc(this)}w(Ar,V),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){ib(this.g)},Ar.prototype.o=function(y){var F=this.g;if(typeof y=="string"){var ee={};ee.__data__=y,y=ee}else this.u&&(ee={},ee.__data__=Me(y),y=ee);F.i.push(new Ns(F.Ya++,y)),F.G==3&&Yf(F)},Ar.prototype.N=function(){this.g.l=null,delete this.j,ib(this.g),delete this.g,Ar.aa.N.call(this)};function B2(y){ke.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var F=y.__sm__;if(F){e:{for(const ee in F){y=ee;break e}y=void 0}(this.i=y)&&(y=this.i,F=F!==null&&y in F?F[y]:void 0),this.data=F}else this.data=y}w(B2,ke);function V2(){Fe.call(this),this.status=1}w(V2,Fe);function lc(y){this.g=y}w(lc,q2),lc.prototype.ua=function(){O(this.g,"a")},lc.prototype.ta=function(y){O(this.g,new B2(y))},lc.prototype.sa=function(y){O(this.g,new V2)},lc.prototype.ra=function(){O(this.g,"b")},Jf.prototype.createWebChannel=Jf.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,U4=function(){return new Jf},F4=function(){return nt()},O4=Ae,C_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,uh=rt,ic.COMPLETE="complete",N4=ic,ft.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",V.prototype.listen=V.prototype.K,Id=ft,Vs.prototype.listenOnce=Vs.prototype.L,Vs.prototype.getLastError=Vs.prototype.Ka,Vs.prototype.getLastErrorCode=Vs.prototype.Ba,Vs.prototype.getStatus=Vs.prototype.Z,Vs.prototype.getResponseJson=Vs.prototype.Oa,Vs.prototype.getResponseText=Vs.prototype.oa,Vs.prototype.send=Vs.prototype.ea,Vs.prototype.setWithCredentials=Vs.prototype.Ha,D4=Vs}).apply(typeof fp<"u"?fp:typeof self<"u"?self:typeof window<"u"?window:{});const fS="@firebase/firestore",pS="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qn.UNAUTHENTICATED=new Qn(null),Qn.GOOGLE_CREDENTIALS=new Qn("google-credentials-uid"),Qn.FIRST_PARTY=new Qn("first-party-uid"),Qn.MOCK_USER=new Qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Ba("@firebase/firestore");function Tc(){return Dl.logLevel}function mt(t,...e){if(Dl.logLevel<=Bt.DEBUG){const s=e.map(Ox);Dl.debug(`Firestore (${Fu}): ${t}`,...s)}}function Ai(t,...e){if(Dl.logLevel<=Bt.ERROR){const s=e.map(Ox);Dl.error(`Firestore (${Fu}): ${t}`,...s)}}function fu(t,...e){if(Dl.logLevel<=Bt.WARN){const s=e.map(Ox);Dl.warn(`Firestore (${Fu}): ${t}`,...s)}}function Ox(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t="Unexpected state"){const e=`FIRESTORE (${Fu}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function ps(t,e){t||At()}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends Mn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Qn.UNAUTHENTICATED))}shutdown(){}}class dW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class mW{constructor(e){this.t=e,this.currentUser=Qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){ps(this.o===void 0);let n=this.i;const r=u=>this.i!==n?(n=this.i,s(u)):Promise.resolve();let o=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ga,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},c=u=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ga)}},0),i()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ps(typeof n.accessToken=="string"),new q4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ps(e===null||typeof e=="string"),new Qn(e)}}class fW{constructor(e,s,n){this.l=e,this.h=s,this.P=n,this.type="FirstParty",this.user=Qn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class pW{constructor(e,s,n){this.l=e,this.h=s,this.P=n}getToken(){return Promise.resolve(new fW(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(Qn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hW{constructor(e,s){this.A=s,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,As(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,s){ps(this.o===void 0);const n=o=>{o.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.R;return this.R=o.token,mt("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const r=o=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new hS(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(ps(typeof s.token=="string"),this.R=s.token,new hS(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=gW(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<s&&(n+=e.charAt(r[o]%62))}return n}}function Vt(t,e){return t<e?-1:t>e?1:0}function S_(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=t.codePointAt(s),r=e.codePointAt(s);if(n!==r){if(n<128&&r<128)return Vt(n,r);{const o=B4(),i=vW(o.encode(gS(t,s)),o.encode(gS(e,s)));return i!==0?i:Vt(n,r)}}s+=n>65535?2:1}return Vt(t.length,e.length)}function gS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function vW(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return Vt(t[s],e[s]);return Vt(t.length,e.length)}function pu(t,e,s){return t.length===e.length&&t.every((n,r)=>s(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=-62135596800,bS=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor((e-1e3*s)*bS);return new vn(s,n)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new kt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new kt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<vS)throw new kt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bS}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-vS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{static fromTimestamp(e){return new $t(e)}static min(){return new $t(new vn(0,0))}static max(){return new $t(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="__name__";class No{constructor(e,s,n){s===void 0?s=0:s>e.length&&At(),n===void 0?n=e.length-s:n>e.length-s&&At(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return No.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof No?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let r=0;r<n;r++){const o=No.compareSegments(e.get(r),s.get(r));if(o!==0)return o}return Vt(e.length,s.length)}static compareSegments(e,s){const n=No.isNumericId(e),r=No.isNumericId(s);return n&&!r?-1:!n&&r?1:n&&r?No.extractNumericId(e).compare(No.extractNumericId(s)):S_(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class zs extends No{construct(e,s,n){return new zs(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new kt(st.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(r=>r.length>0))}return new zs(s)}static emptyPath(){return new zs([])}}const bW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends No{construct(e,s,n){return new Un(e,s,n)}static isValidIdentifier(e){return bW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yS}static keyField(){return new Un([yS])}static fromServerFormat(e){const s=[];let n="",r=0;const o=()=>{if(n.length===0)throw new kt(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let i=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new kt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new kt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,r+=2}else c==="`"?(i=!i,r++):c!=="."||i?(n+=c,r++):(o(),r++)}if(o(),i)throw new kt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(s)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(zs.fromString(e))}static fromName(e){return new wt(zs.fromString(e).popFirst(5))}static empty(){return new wt(zs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return zs.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new zs(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function yW(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,r=$t.fromTimestamp(n===1e9?new vn(s+1,0):new vn(s,n));return new Ta(r,wt.empty(),e)}function _W(t){return new Ta(t.readTime,t.key,Fm)}class Ta{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new Ta($t.min(),wt.empty(),Fm)}static max(){return new Ta($t.max(),wt.empty(),Fm)}}function xW(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=wt.comparator(t.documentKey,e.documentKey),s!==0?s:Vt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t){if(t.code!==st.FAILED_PRECONDITION||t.message!==kW)throw t;mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Xe((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(s,o).next(n,r)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof Xe?s:Xe.resolve(s)}catch(s){return Xe.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):Xe.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):Xe.reject(s)}static resolve(e){return new Xe((s,n)=>{s(e)})}static reject(e){return new Xe((s,n)=>{n(e)})}static waitFor(e){return new Xe((s,n)=>{let r=0,o=0,i=!1;e.forEach(c=>{++r,c.next(()=>{++o,i&&o===r&&s()},u=>n(u))}),i=!0,o===r&&s()})}static or(e){let s=Xe.resolve(!1);for(const n of e)s=s.next(r=>r?Xe.resolve(r):n());return s}static forEach(e,s){const n=[];return e.forEach((r,o)=>{n.push(s.call(this,r,o))}),this.waitFor(n)}static mapArray(e,s){return new Xe((n,r)=>{const o=e.length,i=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;s(e[d]).next(m=>{i[d]=m,++c,c===o&&n(i)},m=>r(m))}})}static doWhile(e,s){return new Xe((n,r)=>{const o=()=>{e()===!0?s().next(()=>{o()},r):n()};o()})}}function EW(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function qu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.oe(n),this._e=n=>s.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}mg.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=-1;function fg(t){return t==null}function jh(t){return t===0&&1/t==-1/0}function CW(t){return typeof t=="number"&&Number.isInteger(t)&&!jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="";function SW(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=_S(e)),e=TW(t.get(s),e);return _S(e)}function TW(t,e){let s=e;const n=t.length;for(let r=0;r<n;r++){const o=t.charAt(r);switch(o){case"\0":s+="";break;case H4:s+="";break;default:s+=o}}return s}function _S(t){return t+H4+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Kl(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function G4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class T_{constructor(e,s){this.comparator=e,this.root=s||va.EMPTY}insert(e,s){return new T_(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,va.BLACK,null,null))}remove(e){return new T_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,va.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return s+n.left.size;r<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pp(this.root,e,this.comparator,!0)}},pp=class{constructor(e,s,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=s?n(e.key,s):1,s&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},va=class ui{constructor(e,s,n,r,o){this.key=e,this.value=s,this.color=n??ui.RED,this.left=r??ui.EMPTY,this.right=o??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,r,o){return new ui(e??this.key,s??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,s,n),null):o===0?r.copy(null,s,null,null,null):r.copy(null,null,null,null,r.right.insert(e,s,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,r=this;if(s(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,s),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),s(e,r.key)===0){if(r.right.isEmpty())return ui.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,s))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}};va.EMPTY=null,va.RED=!0,va.BLACK=!1;va.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(e,s,n,r,o){return this}insert(e,s,n){return new va(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;s(r.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new kS(this.data.getIterator())}getIteratorFrom(e){return new kS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const r=s.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new bn(this.comparator);return s.data=e,s}}class kS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new go([])}unionWith(e){let s=new bn(Un.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new go(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return pu(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j4("Invalid base64 string: "+o):o}}(e);return new Bn(s)}static fromUint8Array(e){const s=function(r){let o="";for(let i=0;i<r.length;++i)o+=String.fromCharCode(r[i]);return o}(e);return new Bn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let r=0;r<s.length;r++)n[r]=s.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const AW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(t){if(ps(!!t),typeof t=="string"){let e=0;const s=AW.exec(t);if(ps(!!s),s[1]){let r=s[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:en(t.seconds),nanos:en(t.nanos)}}function en(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ia(t){return typeof t=="string"?Bn.fromBase64String(t):Bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="server_timestamp",z4="__type__",Q4="__previous_value__",K4="__local_write_time__";function Ux(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[z4])===null||s===void 0?void 0:s.stringValue)===W4}function pg(t){const e=t.mapValue.fields[Q4];return Ux(e)?pg(e):e}function Um(t){const e=Aa(t.mapValue.fields[K4].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,s,n,r,o,i,c,u,d){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}const Wh="(default)";class qm{constructor(e,s){this.projectId=e,this.database=s||Wh}static empty(){return new qm("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof qm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="__type__",PW="__max__",hp={mapValue:{}},X4="__vector__",zh="value";function Pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ux(t)?4:$W(t)?9007199254740991:MW(t)?10:11:At()}function Zo(t,e){if(t===e)return!0;const s=Pa(t);if(s!==Pa(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Um(t).isEqual(Um(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const i=Aa(r.timestampValue),c=Aa(o.timestampValue);return i.seconds===c.seconds&&i.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ia(r.bytesValue).isEqual(Ia(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return en(r.geoPointValue.latitude)===en(o.geoPointValue.latitude)&&en(r.geoPointValue.longitude)===en(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return en(r.integerValue)===en(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const i=en(r.doubleValue),c=en(o.doubleValue);return i===c?jh(i)===jh(c):isNaN(i)&&isNaN(c)}return!1}(t,e);case 9:return pu(t.arrayValue.values||[],e.arrayValue.values||[],Zo);case 10:case 11:return function(r,o){const i=r.mapValue.fields||{},c=o.mapValue.fields||{};if(xS(i)!==xS(c))return!1;for(const u in i)if(i.hasOwnProperty(u)&&(c[u]===void 0||!Zo(i[u],c[u])))return!1;return!0}(t,e);default:return At()}}function Bm(t,e){return(t.values||[]).find(s=>Zo(s,e))!==void 0}function hu(t,e){if(t===e)return 0;const s=Pa(t),n=Pa(e);if(s!==n)return Vt(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Vt(t.booleanValue,e.booleanValue);case 2:return function(o,i){const c=en(o.integerValue||o.doubleValue),u=en(i.integerValue||i.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return wS(t.timestampValue,e.timestampValue);case 4:return wS(Um(t),Um(e));case 5:return S_(t.stringValue,e.stringValue);case 6:return function(o,i){const c=Ia(o),u=Ia(i);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,i){const c=o.split("/"),u=i.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=Vt(c[d],u[d]);if(m!==0)return m}return Vt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,i){const c=Vt(en(o.latitude),en(i.latitude));return c!==0?c:Vt(en(o.longitude),en(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ES(t.arrayValue,e.arrayValue);case 10:return function(o,i){var c,u,d,m;const f=o.fields||{},p=i.fields||{},g=(c=f[zh])===null||c===void 0?void 0:c.arrayValue,w=(u=p[zh])===null||u===void 0?void 0:u.arrayValue,C=Vt(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((m=w==null?void 0:w.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:ES(g,w)}(t.mapValue,e.mapValue);case 11:return function(o,i){if(o===hp.mapValue&&i===hp.mapValue)return 0;if(o===hp.mapValue)return 1;if(i===hp.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=i.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const p=S_(u[f],m[f]);if(p!==0)return p;const g=hu(c[u[f]],d[m[f]]);if(g!==0)return g}return Vt(u.length,m.length)}(t.mapValue,e.mapValue);default:throw At()}}function wS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Vt(t,e);const s=Aa(t),n=Aa(e),r=Vt(s.seconds,n.seconds);return r!==0?r:Vt(s.nanos,n.nanos)}function ES(t,e){const s=t.values||[],n=e.values||[];for(let r=0;r<s.length&&r<n.length;++r){const o=hu(s[r],n[r]);if(o)return o}return Vt(s.length,n.length)}function gu(t){return A_(t)}function A_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=Aa(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Ia(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return wt.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",r=!0;for(const o of s.values||[])r?r=!1:n+=",",n+=A_(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let r="{",o=!0;for(const i of n)o?o=!1:r+=",",r+=`${i}:${A_(s.fields[i])}`;return r+"}"}(t.mapValue):At()}function dh(t){switch(Pa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pg(t);return e?16+dh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ia(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((r,o)=>r+dh(o),0)}(t.arrayValue);case 10:case 11:return function(n){let r=0;return Kl(n.fields,(o,i)=>{r+=o.length+dh(i)}),r}(t.mapValue);default:throw At()}}function I_(t){return!!t&&"integerValue"in t}function qx(t){return!!t&&"arrayValue"in t}function CS(t){return!!t&&"nullValue"in t}function SS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mh(t){return!!t&&"mapValue"in t}function MW(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Y4])===null||s===void 0?void 0:s.stringValue)===X4}function Jd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Kl(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=Jd(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Jd(t.arrayValue.values[s]);return e}return Object.assign({},t)}function $W(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!mh(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jd(s)}setAll(e){let s=Un.emptyPath(),n={},r=[];e.forEach((i,c)=>{if(!s.isImmediateParentOf(c)){const u=this.getFieldsMap(s);this.applyChanges(u,n,r),n={},r=[],s=c.popLast()}i?n[c.lastSegment()]=Jd(i):r.push(c.lastSegment())});const o=this.getFieldsMap(s);this.applyChanges(o,n,r)}delete(e){const s=this.field(e.popLast());mh(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Zo(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=s.mapValue.fields[e.get(n)];mh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=r),s=r}return s.mapValue.fields}applyChanges(e,s,n){Kl(s,(r,o)=>e[r]=o);for(const r of n)delete e[r]}clone(){return new Qr(Jd(this.value))}}function J4(t){const e=[];return Kl(t.fields,(s,n)=>{const r=new Un([s]);if(mh(n)){const o=J4(n.mapValue).fields;if(o.length===0)e.push(r);else for(const i of o)e.push(r.child(i))}else e.push(r)}),new go(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,s,n,r,o,i,c){this.key=e,this.documentType=s,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=c}static newInvalidDocument(e){return new Jn(e,0,$t.min(),$t.min(),$t.min(),Qr.empty(),0)}static newFoundDocument(e,s,n,r){return new Jn(e,1,s,$t.min(),n,r,0)}static newNoDocument(e,s){return new Jn(e,2,s,$t.min(),$t.min(),Qr.empty(),0)}static newUnknownDocument(e,s){return new Jn(e,3,s,$t.min(),$t.min(),Qr.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,s){this.position=e,this.inclusive=s}}function TS(t,e,s){let n=0;for(let r=0;r<t.position.length;r++){const o=e[r],i=t.position[r];if(o.field.isKeyField()?n=wt.comparator(wt.fromName(i.referenceValue),s.key):n=hu(i,s.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function AS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Zo(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,s="asc"){this.field=e,this.dir=s}}function RW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{}class fn extends Z4{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new DW(e,s,n):s==="array-contains"?new FW(e,n):s==="in"?new UW(e,n):s==="not-in"?new qW(e,n):s==="array-contains-any"?new BW(e,n):new fn(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new NW(e,n):new OW(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(hu(s,this.value)):s!==null&&Pa(this.value)===Pa(s)&&this.matchesComparison(hu(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends Z4{constructor(e,s){super(),this.filters=e,this.op=s,this.ce=null}static create(e,s){return new ei(e,s)}matches(e){return e$(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function e$(t){return t.op==="and"}function t$(t){return LW(t)&&e$(t)}function LW(t){for(const e of t.filters)if(e instanceof ei)return!1;return!0}function P_(t){if(t instanceof fn)return t.field.canonicalString()+t.op.toString()+gu(t.value);if(t$(t))return t.filters.map(e=>P_(e)).join(",");{const e=t.filters.map(s=>P_(s)).join(",");return`${t.op}(${e})`}}function s$(t,e){return t instanceof fn?function(n,r){return r instanceof fn&&n.op===r.op&&n.field.isEqual(r.field)&&Zo(n.value,r.value)}(t,e):t instanceof ei?function(n,r){return r instanceof ei&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((o,i,c)=>o&&s$(i,r.filters[c]),!0):!1}(t,e):void At()}function n$(t){return t instanceof fn?function(s){return`${s.field.canonicalString()} ${s.op} ${gu(s.value)}`}(t):t instanceof ei?function(s){return s.op.toString()+" {"+s.getFilters().map(n$).join(" ,")+"}"}(t):"Filter"}class DW extends fn{constructor(e,s,n){super(e,s,n),this.key=wt.fromName(n.referenceValue)}matches(e){const s=wt.comparator(e.key,this.key);return this.matchesComparison(s)}}class NW extends fn{constructor(e,s){super(e,"in",s),this.keys=r$("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class OW extends fn{constructor(e,s){super(e,"not-in",s),this.keys=r$("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function r$(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>wt.fromName(n.referenceValue))}class FW extends fn{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return qx(s)&&Bm(s.arrayValue,this.value)}}class UW extends fn{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Bm(this.value.arrayValue,s)}}class qW extends fn{constructor(e,s){super(e,"not-in",s)}matches(e){if(Bm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!Bm(this.value.arrayValue,s)}}class BW extends fn{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!qx(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>Bm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,s=null,n=[],r=[],o=null,i=null,c=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=c,this.le=null}}function IS(t,e=null,s=[],n=[],r=null,o=null,i=null){return new VW(t,e,s,n,r,o,i)}function Bx(t){const e=Dt(t);if(e.le===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>P_(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),fg(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>gu(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>gu(n)).join(",")),e.le=s}return e.le}function Vx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!RW(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!s$(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AS(t.startAt,e.startAt)&&AS(t.endAt,e.endAt)}function M_(t){return wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,s=null,n=[],r=[],o=null,i="F",c=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=c,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function HW(t,e,s,n,r,o,i,c){return new hg(t,e,s,n,r,o,i,c)}function Hx(t){return new hg(t)}function PS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GW(t){return t.collectionGroup!==null}function Zd(t){const e=Dt(t);if(e.he===null){e.he=[];const s=new Set;for(const o of e.explicitOrderBy)e.he.push(o),s.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let c=new bn(Un.comparator);return i.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{s.has(o.canonicalString())||o.isKeyField()||e.he.push(new Kh(o,n))}),s.has(Un.keyField().canonicalString())||e.he.push(new Kh(Un.keyField(),n))}return e.he}function Qo(t){const e=Dt(t);return e.Pe||(e.Pe=jW(e,Zd(t))),e.Pe}function jW(t,e){if(t.limitType==="F")return IS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Kh(r.field,o)});const s=t.endAt?new Qh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Qh(t.startAt.position,t.startAt.inclusive):null;return IS(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function $_(t,e,s){return new hg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function gg(t,e){return Vx(Qo(t),Qo(e))&&t.limitType===e.limitType}function o$(t){return`${Bx(Qo(t))}|lt:${t.limitType}`}function Ac(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(r=>n$(r)).join(", ")}]`),fg(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(r=>gu(r)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(r=>gu(r)).join(",")),`Target(${n})`}(Qo(t))}; limitType=${t.limitType})`}function vg(t,e){return e.isFoundDocument()&&function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):wt.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,r){for(const o of Zd(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,c,u){const d=TS(i,c,u);return i.inclusive?d<=0:d<0}(n.startAt,Zd(n),r)||n.endAt&&!function(i,c,u){const d=TS(i,c,u);return i.inclusive?d>=0:d>0}(n.endAt,Zd(n),r))}(t,e)}function WW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function i$(t){return(e,s)=>{let n=!1;for(const r of Zd(t)){const o=zW(r,e,s);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function zW(t,e,s){const n=t.field.isKeyField()?wt.comparator(e.key,s.key):function(o,i,c){const u=i.data.field(o),d=c.data.field(o);return u!==null&&d!==null?hu(u,d):At()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[r,o]of n)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,s]);r.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[s]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(s,n)=>{for(const[r,o]of n)e(r,o)})}isEmpty(){return G4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW=new dn(wt.comparator);function Ii(){return QW}const a$=new dn(wt.comparator);function Pd(...t){let e=a$;for(const s of t)e=e.insert(s.key,s);return e}function l$(t){let e=a$;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function gl(){return em()}function c$(){return em()}function em(){return new Yl(t=>t.toString(),(t,e)=>t.isEqual(e))}const KW=new dn(wt.comparator),YW=new bn(wt.comparator);function Qt(...t){let e=YW;for(const s of t)e=e.add(s);return e}const XW=new bn(Vt);function JW(){return XW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function u$(t){return{integerValue:""+t}}function ZW(t,e){return CW(e)?u$(e):Gx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this._=void 0}}function ez(t,e,s){return t instanceof Yh?function(r,o){const i={fields:{[z4]:{stringValue:W4},[K4]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ux(o)&&(o=pg(o)),o&&(i.fields[Q4]=o),{mapValue:i}}(s,e):t instanceof Vm?m$(t,e):t instanceof Hm?f$(t,e):function(r,o){const i=d$(r,o),c=MS(i)+MS(r.Ie);return I_(i)&&I_(r.Ie)?u$(c):Gx(r.serializer,c)}(t,e)}function tz(t,e,s){return t instanceof Vm?m$(t,e):t instanceof Hm?f$(t,e):s}function d$(t,e){return t instanceof Xh?function(n){return I_(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class Yh extends bg{}class Vm extends bg{constructor(e){super(),this.elements=e}}function m$(t,e){const s=p$(e);for(const n of t.elements)s.some(r=>Zo(r,n))||s.push(n);return{arrayValue:{values:s}}}class Hm extends bg{constructor(e){super(),this.elements=e}}function f$(t,e){let s=p$(e);for(const n of t.elements)s=s.filter(r=>!Zo(r,n));return{arrayValue:{values:s}}}class Xh extends bg{constructor(e,s){super(),this.serializer=e,this.Ie=s}}function MS(t){return en(t.integerValue||t.doubleValue)}function p$(t){return qx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sz(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Vm&&r instanceof Vm||n instanceof Hm&&r instanceof Hm?pu(n.elements,r.elements,Zo):n instanceof Xh&&r instanceof Xh?Zo(n.Ie,r.Ie):n instanceof Yh&&r instanceof Yh}(t.transform,e.transform)}class nz{constructor(e,s){this.version=e,this.transformResults=s}}class Ko{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Ko}static exists(e){return new Ko(void 0,e)}static updateTime(e){return new Ko(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yg{}function h$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jx(t.key,Ko.none()):new wf(t.key,t.data,Ko.none());{const s=t.data,n=Qr.empty();let r=new bn(Un.comparator);for(let o of e.fields)if(!r.has(o)){let i=s.field(o);i===null&&o.length>1&&(o=o.popLast(),i=s.field(o)),i===null?n.delete(o):n.set(o,i),r=r.add(o)}return new Xl(t.key,n,new go(r.toArray()),Ko.none())}}function rz(t,e,s){t instanceof wf?function(r,o,i){const c=r.value.clone(),u=RS(r.fieldTransforms,o,i.transformResults);c.setAll(u),o.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,s):t instanceof Xl?function(r,o,i){if(!fh(r.precondition,o))return void o.convertToUnknownDocument(i.version);const c=RS(r.fieldTransforms,o,i.transformResults),u=o.data;u.setAll(g$(r)),u.setAll(c),o.convertToFoundDocument(i.version,u).setHasCommittedMutations()}(t,e,s):function(r,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,s)}function tm(t,e,s,n){return t instanceof wf?function(o,i,c,u){if(!fh(o.precondition,i))return c;const d=o.value.clone(),m=LS(o.fieldTransforms,u,i);return d.setAll(m),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),null}(t,e,s,n):t instanceof Xl?function(o,i,c,u){if(!fh(o.precondition,i))return c;const d=LS(o.fieldTransforms,u,i),m=i.data;return m.setAll(g$(o)),m.setAll(d),i.convertToFoundDocument(i.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,s,n):function(o,i,c){return fh(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):c}(t,e,s)}function oz(t,e){let s=null;for(const n of t.fieldTransforms){const r=e.data.field(n.field),o=d$(n.transform,r||null);o!=null&&(s===null&&(s=Qr.empty()),s.set(n.field,o))}return s||null}function $S(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&pu(n,r,(o,i)=>sz(o,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wf extends yg{constructor(e,s,n,r=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xl extends yg{constructor(e,s,n,r,o=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function g$(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function RS(t,e,s){const n=new Map;ps(t.length===s.length);for(let r=0;r<s.length;r++){const o=t[r],i=o.transform,c=e.data.field(o.field);n.set(o.field,tz(i,c,s[r]))}return n}function LS(t,e,s){const n=new Map;for(const r of t){const o=r.transform,i=s.data.field(r.field);n.set(r.field,ez(o,i,e))}return n}class jx extends yg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iz extends yg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,s,n,r){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&rz(o,e,n[r])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=tm(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=tm(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=c$();return this.mutations.forEach(r=>{const o=e.get(r.key),i=o.overlayedDocument;let c=this.applyToLocalView(i,o.mutatedFields);c=s.has(r.key)?null:c;const u=h$(i,c);u!==null&&n.set(r.key,u),i.isValidDocument()||i.convertToNoDocument($t.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Qt())}isEqual(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,(s,n)=>$S(s,n))&&pu(this.baseMutations,e.baseMutations,(s,n)=>$S(s,n))}}class Wx{constructor(e,s,n,r){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=r}static from(e,s,n){ps(e.mutations.length===n.length);let r=function(){return KW}();const o=e.mutations;for(let i=0;i<o.length;i++)r=r.insert(o[i].key,n[i].version);return new Wx(e,s,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,Jt;function uz(t){switch(t){case st.OK:return At();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return At()}}function v$(t){if(t===void 0)return Ai("GRPC error has no .code"),st.UNKNOWN;switch(t){case rn.OK:return st.OK;case rn.CANCELLED:return st.CANCELLED;case rn.UNKNOWN:return st.UNKNOWN;case rn.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case rn.INTERNAL:return st.INTERNAL;case rn.UNAVAILABLE:return st.UNAVAILABLE;case rn.UNAUTHENTICATED:return st.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case rn.NOT_FOUND:return st.NOT_FOUND;case rn.ALREADY_EXISTS:return st.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return st.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case rn.ABORTED:return st.ABORTED;case rn.OUT_OF_RANGE:return st.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return st.UNIMPLEMENTED;case rn.DATA_LOSS:return st.DATA_LOSS;default:return At()}}(Jt=rn||(rn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=new ha([4294967295,4294967295],0);function DS(t){const e=B4().encode(t),s=new L4;return s.update(e),new Uint8Array(s.digest())}function NS(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ha([s,n],0),new ha([r,o],0)]}class zx{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new Md(`Invalid padding: ${s}`);if(n<0)throw new Md(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Md(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new Md(`Invalid padding when bitmap length is 0: ${s}`);this.Ee=8*e.length-s,this.de=ha.fromNumber(this.Ee)}Ae(e,s,n){let r=e.add(s.multiply(ha.fromNumber(n)));return r.compare(dz)===1&&(r=new ha([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const s=DS(e),[n,r]=NS(s);for(let o=0;o<this.hashCount;o++){const i=this.Ae(n,r,o);if(!this.Re(i))return!1}return!0}static create(e,s,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new zx(o,r,s);return n.forEach(c=>i.insert(c)),i}insert(e){if(this.Ee===0)return;const s=DS(e),[n,r]=NS(s);for(let o=0;o<this.hashCount;o++){const i=this.Ae(n,r,o);this.Ve(i)}}Ve(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class Md extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,s,n,r,o){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const r=new Map;return r.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new _g($t.min(),r,new dn(Vt),Ii(),Qt())}}class Ef{constructor(e,s,n,r,o){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new Ef(n,s,Qt(),Qt(),Qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,s,n,r){this.me=e,this.removedTargetIds=s,this.key=n,this.fe=r}}class b${constructor(e,s){this.targetId=e,this.ge=s}}class y${constructor(e,s,n=Bn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=r}}class OS{constructor(){this.pe=0,this.ye=FS(),this.we=Bn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Qt(),s=Qt(),n=Qt();return this.ye.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:s=s.add(r);break;case 1:n=n.add(r);break;default:At()}}),new Ef(this.we,this.Se,e,s,n)}Me(){this.be=!1,this.ye=FS()}xe(e,s){this.be=!0,this.ye=this.ye.insert(e,s)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ps(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class mz{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ii(),this.$e=gp(),this.Ue=gp(),this.Ke=new dn(Vt)}We(e){for(const s of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(s,e.fe):this.ze(s,e.key,e.fe);for(const s of e.removedTargetIds)this.ze(s,e.key,e.fe)}je(e){this.forEachTarget(e,s=>{const n=this.He(s);switch(e.state){case 0:this.Je(s)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(s);break;case 3:this.Je(s)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(s)&&(this.Ye(s),n.Ce(e.resumeToken));break;default:At()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.qe.forEach((n,r)=>{this.Je(r)&&s(r)})}Ze(e){const s=e.targetId,n=e.ge.count,r=this.Xe(s);if(r){const o=r.target;if(M_(o))if(n===0){const i=new wt(o.path);this.ze(s,i,Jn.newNoDocument(i,$t.min()))}else ps(n===1);else{const i=this.et(s);if(i!==n){const c=this.tt(e),u=c?this.nt(c,e,i):1;if(u!==0){this.Ye(s);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(s,d)}}}}}tt(e){const s=e.ge.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=s;let i,c;try{i=Ia(n).toUint8Array()}catch(u){if(u instanceof j4)return fu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new zx(i,r,o)}catch(u){return fu(u instanceof Md?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ee===0?null:c}nt(e,s,n){return s.ge.count===n-this.st(e,s.targetId)?0:2}st(e,s){const n=this.ke.getRemoteKeysForTarget(s);let r=0;return n.forEach(o=>{const i=this.ke.it(),c=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.ze(s,o,null),r++)}),r}ot(e){const s=new Map;this.qe.forEach((o,i)=>{const c=this.Xe(i);if(c){if(o.current&&M_(c.target)){const u=new wt(c.target.path);this._t(u).has(i)||this.ut(i,u)||this.ze(i,u,Jn.newNoDocument(u,e))}o.ve&&(s.set(i,o.Fe()),o.Me())}});let n=Qt();this.Ue.forEach((o,i)=>{let c=!0;i.forEachWhile(u=>{const d=this.Xe(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(o))}),this.Qe.forEach((o,i)=>i.setReadTime(e));const r=new _g(e,s,this.Ke,this.Qe,n);return this.Qe=Ii(),this.$e=gp(),this.Ue=gp(),this.Ke=new dn(Vt),r}Ge(e,s){if(!this.Je(e))return;const n=this.ut(e,s.key)?2:0;this.He(e).xe(s.key,n),this.Qe=this.Qe.insert(s.key,s),this.$e=this.$e.insert(s.key,this._t(s.key).add(e)),this.Ue=this.Ue.insert(s.key,this.ct(s.key).add(e))}ze(e,s,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,s)?r.xe(s,1):r.Oe(s),this.Ue=this.Ue.insert(s,this.ct(s).delete(e)),this.Ue=this.Ue.insert(s,this.ct(s).add(e)),n&&(this.Qe=this.Qe.insert(s,n))}removeTarget(e){this.qe.delete(e)}et(e){const s=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let s=this.qe.get(e);return s||(s=new OS,this.qe.set(e,s)),s}ct(e){let s=this.Ue.get(e);return s||(s=new bn(Vt),this.Ue=this.Ue.insert(e,s)),s}_t(e){let s=this.$e.get(e);return s||(s=new bn(Vt),this.$e=this.$e.insert(e,s)),s}Je(e){const s=this.Xe(e)!==null;return s||mt("WatchChangeAggregator","Detected inactive target",e),s}Xe(e){const s=this.qe.get(e);return s&&s.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new OS),this.ke.getRemoteKeysForTarget(e).forEach(s=>{this.ze(e,s,null)})}ut(e,s){return this.ke.getRemoteKeysForTarget(e).has(s)}}function gp(){return new dn(wt.comparator)}function FS(){return new dn(wt.comparator)}const fz={asc:"ASCENDING",desc:"DESCENDING"},pz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hz={and:"AND",or:"OR"};class gz{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function R_(t,e){return t.useProto3Json||fg(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vz(t,e){return Jh(t,e.toTimestamp())}function Yo(t){return ps(!!t),$t.fromTimestamp(function(s){const n=Aa(s);return new vn(n.seconds,n.nanos)}(t))}function Qx(t,e){return L_(t,e).canonicalString()}function L_(t,e){const s=function(r){return new zs(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?s:s.child(e)}function x$(t){const e=zs.fromString(t);return ps(S$(e)),e}function D_(t,e){return Qx(t.databaseId,e.path)}function Xb(t,e){const s=x$(e);if(s.get(1)!==t.databaseId.projectId)throw new kt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new kt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new wt(w$(s))}function k$(t,e){return Qx(t.databaseId,e)}function bz(t){const e=x$(t);return e.length===4?zs.emptyPath():w$(e)}function N_(t){return new zs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w$(t){return ps(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function US(t,e,s){return{name:D_(t,e),fields:s.value.mapValue.fields}}function yz(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:At()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(ps(m===void 0||typeof m=="string"),Bn.fromBase64String(m||"")):(ps(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Bn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,c=i&&function(d){const m=d.code===void 0?st.UNKNOWN:v$(d.code);return new kt(m,d.message||"")}(i);s=new y$(n,r,o,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=Xb(t,n.document.name),o=Yo(n.document.updateTime),i=n.document.createTime?Yo(n.document.createTime):$t.min(),c=new Qr({mapValue:{fields:n.document.fields}}),u=Jn.newFoundDocument(r,o,i,c),d=n.targetIds||[],m=n.removedTargetIds||[];s=new ph(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=Xb(t,n.document),o=n.readTime?Yo(n.readTime):$t.min(),i=Jn.newNoDocument(r,o),c=n.removedTargetIds||[];s=new ph([],c,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=Xb(t,n.document),o=n.removedTargetIds||[];s=new ph([],o,r,null)}else{if(!("filter"in e))return At();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:o}=n,i=new cz(r,o),c=n.targetId;s=new b$(c,i)}}return s}function _z(t,e){let s;if(e instanceof wf)s={update:US(t,e.key,e.value)};else if(e instanceof jx)s={delete:D_(t,e.key)};else if(e instanceof Xl)s={update:US(t,e.key,e.data),updateMask:Iz(e.fieldMask)};else{if(!(e instanceof iz))return At();s={verify:D_(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(o,i){const c=i.transform;if(c instanceof Yh)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hm)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xh)return{fieldPath:i.field.canonicalString(),increment:c.Ie};throw At()}(0,n))),e.precondition.isNone||(s.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:vz(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:At()}(t,e.precondition)),s}function xz(t,e){return t&&t.length>0?(ps(e!==void 0),t.map(s=>function(r,o){let i=r.updateTime?Yo(r.updateTime):Yo(o);return i.isEqual($t.min())&&(i=Yo(o)),new nz(i,r.transformResults||[])}(s,e))):[]}function kz(t,e){return{documents:[k$(t,e.path)]}}function wz(t,e){const s={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=k$(t,r);const o=function(d){if(d.length!==0)return C$(ei.create(d,"and"))}(e.filters);o&&(s.structuredQuery.where=o);const i=function(d){if(d.length!==0)return d.map(m=>function(p){return{field:Ic(p.field),direction:Sz(p.dir)}}(m))}(e.orderBy);i&&(s.structuredQuery.orderBy=i);const c=R_(t,e.limit);return c!==null&&(s.structuredQuery.limit=c),e.startAt&&(s.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ht:s,parent:r}}function Ez(t){let e=bz(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let r=null;if(n>0){ps(n===1);const m=s.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];s.where&&(o=function(f){const p=E$(f);return p instanceof ei&&t$(p)?p.getFilters():[p]}(s.where));let i=[];s.orderBy&&(i=function(f){return f.map(p=>function(w){return new Kh(Pc(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(s.orderBy));let c=null;s.limit&&(c=function(f){let p;return p=typeof f=="object"?f.value:f,fg(p)?null:p}(s.limit));let u=null;s.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Qh(g,p)}(s.startAt));let d=null;return s.endAt&&(d=function(f){const p=!f.before,g=f.values||[];return new Qh(g,p)}(s.endAt)),HW(e,r,i,o,c,"F",u,d)}function Cz(t,e){const s=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function E$(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=Pc(s.unaryFilter.field);return fn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Pc(s.unaryFilter.field);return fn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pc(s.unaryFilter.field);return fn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pc(s.unaryFilter.field);return fn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return At()}}(t):t.fieldFilter!==void 0?function(s){return fn.create(Pc(s.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return ei.create(s.compositeFilter.filters.map(n=>E$(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return At()}}(s.compositeFilter.op))}(t):At()}function Sz(t){return fz[t]}function Tz(t){return pz[t]}function Az(t){return hz[t]}function Ic(t){return{fieldPath:t.canonicalString()}}function Pc(t){return Un.fromServerFormat(t.fieldPath)}function C$(t){return t instanceof fn?function(s){if(s.op==="=="){if(SS(s.value))return{unaryFilter:{field:Ic(s.field),op:"IS_NAN"}};if(CS(s.value))return{unaryFilter:{field:Ic(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(SS(s.value))return{unaryFilter:{field:Ic(s.field),op:"IS_NOT_NAN"}};if(CS(s.value))return{unaryFilter:{field:Ic(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ic(s.field),op:Tz(s.op),value:s.value}}}(t):t instanceof ei?function(s){const n=s.getFilters().map(r=>C$(r));return n.length===1?n[0]:{compositeFilter:{op:Az(s.op),filters:n}}}(t):At()}function Iz(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function S$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,s,n,r,o=$t.min(),i=$t.min(),c=Bn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.Tt=e}}function Mz(t){const e=Ez({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(){this.Tn=new Rz}addToCollectionParentIndex(e,s){return this.Tn.add(s),Xe.resolve()}getCollectionParents(e,s){return Xe.resolve(this.Tn.getEntries(s))}addFieldIndex(e,s){return Xe.resolve()}deleteFieldIndex(e,s){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,s){return Xe.resolve()}getDocumentsMatchingTarget(e,s){return Xe.resolve(null)}getIndexType(e,s){return Xe.resolve(0)}getFieldIndexes(e,s){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,s){return Xe.resolve(Ta.min())}getMinOffsetFromCollectionGroup(e,s){return Xe.resolve(Ta.min())}updateCollectionGroup(e,s,n){return Xe.resolve()}updateIndexEntries(e,s){return Xe.resolve()}}class Rz{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s]||new bn(zs.comparator),o=!r.has(n);return this.index[s]=r.add(n),o}has(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s];return r&&r.has(n)}getEntries(e){return(this.index[e]||new bn(zs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T$=41943040;class yr{static withCacheSize(e){return new yr(e,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr.DEFAULT_COLLECTION_PERCENTILE=10,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yr.DEFAULT=new yr(T$,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yr.DISABLED=new yr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new vu(0)}static Kn(){return new vu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="LruGarbageCollector",Lz=1048576;function VS([t,e],[s,n]){const r=Vt(t,s);return r===0?Vt(e,n):r}class Dz{constructor(e){this.Hn=e,this.buffer=new bn(VS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const s=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(s);else{const n=this.buffer.last();VS(s,n)<0&&(this.buffer=this.buffer.delete(n).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Nz{constructor(e,s,n){this.garbageCollector=e,this.asyncQueue=s,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){mt(BS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){qu(s)?mt(BS,"Ignoring IndexedDB error during garbage collection: ",s):await Uu(s)}await this.er(3e5)})}}class Oz{constructor(e,s){this.tr=e,this.params=s}calculateTargetCount(e,s){return this.tr.nr(e).next(n=>Math.floor(s/100*n))}nthSequenceNumber(e,s){if(s===0)return Xe.resolve(mg.ae);const n=new Dz(s);return this.tr.forEachTarget(e,r=>n.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>n.Zn(r))).next(()=>n.maxValue)}removeTargets(e,s,n){return this.tr.removeTargets(e,s,n)}removeOrphanedDocuments(e,s){return this.tr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(qS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qS):this.ir(e,s))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,s){let n,r,o,i,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,i=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(n=f,c=Date.now(),this.removeTargets(e,n,s))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),Tc()<=Bt.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-m}ms
	Determined least recently used ${r} in `+(c-i)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:f})))}}function Fz(t,e){return new Oz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.changes=new Yl(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?Xe.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,s,n,r){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,s))).next(r=>(n!==null&&tm(n.mutation,r,go.empty(),vn.now()),r))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Qt()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Qt()){const r=gl();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,n).next(o=>{let i=Pd();return o.forEach((c,u)=>{i=i.insert(c,u.overlayedDocument)}),i}))}getOverlayedDocuments(e,s){const n=gl();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Qt()))}populateOverlays(e,s,n){const r=[];return n.forEach(o=>{s.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((i,c)=>{s.set(i,c)})})}computeViews(e,s,n,r){let o=Ii();const i=em(),c=function(){return em()}();return s.forEach((u,d)=>{const m=n.get(d.key);r.has(d.key)&&(m===void 0||m.mutation instanceof Xl)?o=o.insert(d.key,d):m!==void 0?(i.set(d.key,m.mutation.getFieldMask()),tm(m.mutation,d,m.mutation.getFieldMask(),vn.now())):i.set(d.key,go.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>i.set(d,m)),s.forEach((d,m)=>{var f;return c.set(d,new qz(m,(f=i.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,s){const n=em();let r=new dn((i,c)=>i-c),o=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(i=>{for(const c of i)c.keys().forEach(u=>{const d=s.get(u);if(d===null)return;let m=n.get(u)||go.empty();m=c.applyToLocalView(d,m),n.set(u,m);const f=(r.get(c.batchId)||Qt()).add(u);r=r.insert(c.batchId,f)})}).next(()=>{const i=[],c=r.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=c$();m.forEach(p=>{if(!o.has(p)){const g=h$(s.get(p),n.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),i.push(this.documentOverlayCache.saveOverlays(e,d,f))}return Xe.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,r){return function(i){return wt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):GW(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,r):this.getDocumentsMatchingCollectionQuery(e,s,n,r)}getNextDocuments(e,s,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,r).next(o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,r-o.size):Xe.resolve(gl());let c=Fm,u=o;return i.next(d=>Xe.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),o.get(m)?Xe.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Qt())).next(m=>({batchId:c,changes:l$(m)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new wt(s)).next(n=>{let r=Pd();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,s,n,r){const o=s.collectionGroup;let i=Pd();return this.indexManager.getCollectionParents(e,o).next(c=>Xe.forEach(c,u=>{const d=function(f,p){return new hg(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(s,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(m=>{m.forEach((f,p)=>{i=i.insert(f,p)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,s,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,o,r))).next(i=>{o.forEach((u,d)=>{const m=d.getKey();i.get(m)===null&&(i=i.insert(m,Jn.newInvalidDocument(m)))});let c=Pd();return i.forEach((u,d)=>{const m=o.get(u);m!==void 0&&tm(m.mutation,d,go.empty(),vn.now()),vg(s,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,s){return Xe.resolve(this.dr.get(s))}saveBundleMetadata(e,s){return this.dr.set(s.id,function(r){return{id:r.id,version:r.version,createTime:Yo(r.createTime)}}(s)),Xe.resolve()}getNamedQuery(e,s){return Xe.resolve(this.Ar.get(s))}saveNamedQuery(e,s){return this.Ar.set(s.name,function(r){return{name:r.name,query:Mz(r.bundledQuery),readTime:Yo(r.readTime)}}(s)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(){this.overlays=new dn(wt.comparator),this.Rr=new Map}getOverlay(e,s){return Xe.resolve(this.overlays.get(s))}getOverlays(e,s){const n=gl();return Xe.forEach(s,r=>this.getOverlay(e,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((r,o)=>{this.Et(e,s,o)}),Xe.resolve()}removeOverlaysForBatchId(e,s,n){const r=this.Rr.get(n);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(n)),Xe.resolve()}getOverlaysForCollection(e,s,n){const r=gl(),o=s.length+1,i=new wt(s.child("")),c=this.overlays.getIteratorFrom(i);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!s.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Xe.resolve(r)}getOverlaysForCollectionGroup(e,s,n,r){let o=new dn((d,m)=>d-m);const i=this.overlays.getIterator();for(;i.hasNext();){const d=i.getNext().value;if(d.getKey().getCollectionGroup()===s&&d.largestBatchId>n){let m=o.get(d.largestBatchId);m===null&&(m=gl(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=gl(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=r)););return Xe.resolve(c)}Et(e,s,n){const r=this.overlays.get(n.key);if(r!==null){const i=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lz(s,n));let o=this.Rr.get(s);o===void 0&&(o=Qt(),this.Rr.set(s,o)),this.Rr.set(s,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.Vr=new bn(Cn.mr),this.gr=new bn(Cn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,s){const n=new Cn(e,s);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.wr(new Cn(e,s))}Sr(e,s){e.forEach(n=>this.removeReference(n,s))}br(e){const s=new wt(new zs([])),n=new Cn(s,e),r=new Cn(s,e+1),o=[];return this.gr.forEachInRange([n,r],i=>{this.wr(i),o.push(i.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const s=new wt(new zs([])),n=new Cn(s,e),r=new Cn(s,e+1);let o=Qt();return this.gr.forEachInRange([n,r],i=>{o=o.add(i.key)}),o}containsKey(e){const s=new Cn(e,0),n=this.Vr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class Cn{constructor(e,s){this.key=e,this.Cr=s}static mr(e,s){return wt.comparator(e.key,s.key)||Vt(e.Cr,s.Cr)}static pr(e,s){return Vt(e.Cr,s.Cr)||wt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Fr=1,this.Mr=new bn(Cn.mr)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,r){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new az(o,s,n,r);this.mutationQueue.push(i);for(const c of r)this.Mr=this.Mr.add(new Cn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Xe.resolve(i)}lookupMutationBatch(e,s){return Xe.resolve(this.Or(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,r=this.Nr(n),o=r<0?0:r;return Xe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?Fx:this.Fr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new Cn(s,0),r=new Cn(s,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([n,r],i=>{const c=this.Or(i.Cr);o.push(c)}),Xe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new bn(Vt);return s.forEach(r=>{const o=new Cn(r,0),i=new Cn(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,i],c=>{n=n.add(c.Cr)})}),Xe.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,r=n.length+1;let o=n;wt.isDocumentKey(o)||(o=o.child(""));const i=new Cn(new wt(o),0);let c=new bn(Vt);return this.Mr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(c=c.add(u.Cr)),!0)},i),Xe.resolve(this.Br(c))}Br(e){const s=[];return e.forEach(n=>{const r=this.Or(n);r!==null&&s.push(r)}),s}removeMutationBatch(e,s){ps(this.Lr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return Xe.forEach(s.mutations,r=>{const o=new Cn(r.key,s.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,s){const n=new Cn(s,0),r=this.Mr.firstAfterOrEqual(n);return Xe.resolve(s.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}Lr(e,s){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const s=this.Nr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.kr=e,this.docs=function(){return new dn(wt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,r=this.docs.get(n),o=r?r.size:0,i=this.kr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return Xe.resolve(n?n.document.mutableCopy():Jn.newInvalidDocument(s))}getEntries(e,s){let n=Ii();return s.forEach(r=>{const o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Jn.newInvalidDocument(r))}),Xe.resolve(n)}getDocumentsMatchingQuery(e,s,n,r){let o=Ii();const i=s.path,c=new wt(i.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!i.isPrefixOf(d.path))break;d.path.length>i.length+1||xW(_W(m),n)<=0||(r.has(m.key)||vg(s,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Xe.resolve(o)}getAllFromCollectionGroup(e,s,n,r){At()}qr(e,s){return Xe.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new zz(this)}getSize(e){return Xe.resolve(this.size)}}class zz extends Uz{constructor(e){super(),this.Ir=e}applyChanges(e){const s=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?s.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)}),Xe.waitFor(s)}getFromCache(e,s){return this.Ir.getEntry(e,s)}getAllFromCache(e,s){return this.Ir.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e){this.persistence=e,this.Qr=new Yl(s=>Bx(s),Vx),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Kx,this.targetCount=0,this.Kr=vu.Un()}forEachTarget(e,s){return this.Qr.forEach((n,r)=>s(r)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.$r&&(this.$r=s),Xe.resolve()}zn(e){this.Qr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.Kr=new vu(s),this.highestTargetId=s),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,s){return this.zn(s),this.targetCount+=1,Xe.resolve()}updateTargetData(e,s){return this.zn(s),Xe.resolve()}removeTargetData(e,s){return this.Qr.delete(s.target),this.Ur.br(s.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,s,n){let r=0;const o=[];return this.Qr.forEach((i,c)=>{c.sequenceNumber<=s&&n.get(c.targetId)===null&&(this.Qr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),Xe.waitFor(o).next(()=>r)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,s){const n=this.Qr.get(s)||null;return Xe.resolve(n)}addMatchingKeys(e,s,n){return this.Ur.yr(s,n),Xe.resolve()}removeMatchingKeys(e,s,n){this.Ur.Sr(s,n);const r=this.persistence.referenceDelegate,o=[];return r&&s.forEach(i=>{o.push(r.markPotentiallyOrphaned(e,i))}),Xe.waitFor(o)}removeMatchingKeysForTargetId(e,s){return this.Ur.br(s),Xe.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Ur.vr(s);return Xe.resolve(n)}containsKey(e,s){return Xe.resolve(this.Ur.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,s){this.Wr={},this.overlays={},this.Gr=new mg(0),this.zr=!1,this.zr=!0,this.jr=new Gz,this.referenceDelegate=e(this),this.Hr=new Qz(this),this.indexManager=new $z,this.remoteDocumentCache=function(r){return new Wz(r)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new Pz(s),this.Yr=new Vz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new Hz,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.Wr[e.toKey()];return n||(n=new jz(s,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,s,n){mt("MemoryPersistence","Starting transaction:",e);const r=new Kz(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next(o=>this.referenceDelegate.Xr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}ei(e,s){return Xe.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,s)))}}class Kz extends wW{constructor(e){super(),this.currentSequenceNumber=e}}class Yx{constructor(e){this.persistence=e,this.ti=new Kx,this.ni=null}static ri(e){return new Yx(e)}get ii(){if(this.ni)return this.ni;throw At()}addReference(e,s,n){return this.ti.addReference(n,s),this.ii.delete(n.toString()),Xe.resolve()}removeReference(e,s,n){return this.ti.removeReference(n,s),this.ii.add(n.toString()),Xe.resolve()}markPotentiallyOrphaned(e,s){return this.ii.add(s.toString()),Xe.resolve()}removeTarget(e,s){this.ti.br(s.targetId).forEach(r=>this.ii.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(r=>{r.forEach(o=>this.ii.add(o.toString()))}).next(()=>n.removeTargetData(e,s))}Zr(){this.ni=new Set}Xr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.ii,n=>{const r=wt.fromPath(n);return this.si(e,r).next(o=>{o||s.removeEntry(r,$t.min())})}).next(()=>(this.ni=null,s.apply(e)))}updateLimboDocument(e,s){return this.si(e,s).next(n=>{n?this.ii.delete(s.toString()):this.ii.add(s.toString())})}Jr(e){return 0}si(e,s){return Xe.or([()=>Xe.resolve(this.ti.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.ei(e,s)])}}class Zh{constructor(e,s){this.persistence=e,this.oi=new Yl(n=>SW(n.path),(n,r)=>n.isEqual(r)),this.garbageCollector=Fz(this,s)}static ri(e,s){return new Zh(e,s)}Zr(){}Xr(e){return Xe.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}nr(e){const s=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>s.next(r=>n+r))}sr(e){let s=0;return this.rr(e,n=>{s++}).next(()=>s)}rr(e,s){return Xe.forEach(this.oi,(n,r)=>this.ar(e,n,r).next(o=>o?Xe.resolve():s(r)))}removeTargets(e,s,n){return this.persistence.getTargetCache().removeTargets(e,s,n)}removeOrphanedDocuments(e,s){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.qr(e,i=>this.ar(e,i,s).next(c=>{c||(n++,o.removeEntry(i,$t.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,s){return this.oi.set(s,e.currentSequenceNumber),Xe.resolve()}removeTarget(e,s){const n=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,s,n){return this.oi.set(n,e.currentSequenceNumber),Xe.resolve()}removeReference(e,s,n){return this.oi.set(n,e.currentSequenceNumber),Xe.resolve()}updateLimboDocument(e,s){return this.oi.set(s,e.currentSequenceNumber),Xe.resolve()}Jr(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=dh(e.data.value)),s}ar(e,s,n){return Xe.or([()=>this.persistence.ei(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const r=this.oi.get(s);return Xe.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,s,n,r){this.targetId=e,this.fromCache=s,this.Hi=n,this.Ji=r}static Yi(e,s){let n=Qt(),r=Qt();for(const o of s.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Xx(e,s.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return AB()?8:EW(un())>0?6:4}()}initialize(e,s){this.ns=e,this.indexManager=s,this.Zi=!0}getDocumentsMatchingQuery(e,s,n,r){const o={result:null};return this.rs(e,s).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.ss(e,s,r,n).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new Yz;return this._s(e,s,i).next(c=>{if(o.result=c,this.Xi)return this.us(e,s,i,c.size)})}).next(()=>o.result)}us(e,s,n,r){return n.documentReadCount<this.es?(Tc()<=Bt.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",Ac(s),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Xe.resolve()):(Tc()<=Bt.DEBUG&&mt("QueryEngine","Query:",Ac(s),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Tc()<=Bt.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",Ac(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qo(s))):Xe.resolve())}rs(e,s){if(PS(s))return Xe.resolve(null);let n=Qo(s);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(s.limit!==null&&r===1&&(s=$_(s,null,"F"),n=Qo(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const i=Qt(...o);return this.ns.getDocuments(e,i).next(c=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.cs(s,c);return this.ls(s,d,i,u.readTime)?this.rs(e,$_(s,null,"F")):this.hs(e,d,s,u)}))})))}ss(e,s,n,r){return PS(s)||r.isEqual($t.min())?Xe.resolve(null):this.ns.getDocuments(e,n).next(o=>{const i=this.cs(s,o);return this.ls(s,i,n,r)?Xe.resolve(null):(Tc()<=Bt.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ac(s)),this.hs(e,i,s,yW(r,Fm)).next(c=>c))})}cs(e,s){let n=new bn(i$(e));return s.forEach((r,o)=>{vg(e,o)&&(n=n.add(o))}),n}ls(e,s,n,r){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const o=e.limitType==="F"?s.last():s.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}_s(e,s,n){return Tc()<=Bt.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",Ac(s)),this.ns.getDocumentsMatchingQuery(e,s,Ta.min(),n)}hs(e,s,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next(o=>(s.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="LocalStore",Jz=3e8;class Zz{constructor(e,s,n,r){this.persistence=e,this.Ps=s,this.serializer=r,this.Ts=new dn(Vt),this.Is=new Yl(o=>Bx(o),Vx),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bz(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.Ts))}}function eQ(t,e,s,n){return new Zz(t,e,s,n)}async function I$(t,e){const s=Dt(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let r;return s.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,s.As(e),s.mutationQueue.getAllMutationBatches(n))).next(o=>{const i=[],c=[];let u=Qt();for(const d of r){i.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return s.localDocuments.getDocuments(n,u).next(d=>({Rs:d,removedBatchIds:i,addedBatchIds:c}))})})}function tQ(t,e){const s=Dt(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),o=s.ds.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,p=f.keys();let g=Xe.resolve();return p.forEach(w=>{g=g.next(()=>m.getEntry(u,w)).next(C=>{const E=d.docVersions.get(w);ps(E!==null),C.version.compareTo(E)<0&&(f.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),g.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(s,n,e,o).next(()=>o.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let u=Qt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>s.localDocuments.getDocuments(n,r))})}function P$(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Hr.getLastRemoteSnapshotVersion(s))}function sQ(t,e){const s=Dt(t),n=e.snapshotVersion;let r=s.Ts;return s.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=s.ds.newChangeBuffer({trackRemovals:!0});r=s.Ts;const c=[];e.targetChanges.forEach((m,f)=>{const p=r.get(f);if(!p)return;c.push(s.Hr.removeMatchingKeys(o,m.removedDocuments,f).next(()=>s.Hr.addMatchingKeys(o,m.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Bn.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):m.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(m.resumeToken,n)),r=r.insert(f,g),function(C,E,k){return C.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Jz?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(p,g,m)&&c.push(s.Hr.updateTargetData(o,g))});let u=Ii(),d=Qt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(s.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(nQ(o,i,e.documentUpdates).next(m=>{u=m.Vs,d=m.fs})),!n.isEqual($t.min())){const m=s.Hr.getLastRemoteSnapshotVersion(o).next(f=>s.Hr.setTargetsMetadata(o,o.currentSequenceNumber,n));c.push(m)}return Xe.waitFor(c).next(()=>i.apply(o)).next(()=>s.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(s.Ts=r,o))}function nQ(t,e,s){let n=Qt(),r=Qt();return s.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let i=Ii();return s.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual($t.min())?(e.removeEntry(c,u.readTime),i=i.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),i=i.insert(c,u)):mt(Jx,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Vs:i,fs:r}})}function rQ(t,e){const s=Dt(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Fx),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function oQ(t,e){const s=Dt(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return s.Hr.getTargetData(n,e).next(o=>o?(r=o,Xe.resolve(r)):s.Hr.allocateTargetId(n).next(i=>(r=new ca(e,i,"TargetPurposeListen",n.currentSequenceNumber),s.Hr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=s.Ts.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(s.Ts=s.Ts.insert(n.targetId,n),s.Is.set(e,n.targetId)),n})}async function O_(t,e,s){const n=Dt(t),r=n.Ts.get(e),o=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",o,i=>n.persistence.referenceDelegate.removeTarget(i,r))}catch(i){if(!qu(i))throw i;mt(Jx,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ts=n.Ts.remove(e),n.Is.delete(r.target)}function HS(t,e,s){const n=Dt(t);let r=$t.min(),o=Qt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(u,d,m){const f=Dt(u),p=f.Is.get(m);return p!==void 0?Xe.resolve(f.Ts.get(p)):f.Hr.getTargetData(d,m)}(n,i,Qo(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(i,c.targetId).next(u=>{o=u})}).next(()=>n.Ps.getDocumentsMatchingQuery(i,e,s?r:$t.min(),s?o:Qt())).next(c=>(iQ(n,WW(e),c),{documents:c,gs:o})))}function iQ(t,e,s){let n=t.Es.get(e)||$t.min();s.forEach((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.Es.set(e,n)}class GS{constructor(){this.activeTargetIds=JW()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aQ{constructor(){this.ho=new GS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e,s=!0){return s&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,s,n){this.Po[e]=s}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new GS,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="ConnectivityMonitor";class WS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){mt(jS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){mt(jS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp=null;function F_(){return vp===null?vp=function(){return 268435456+Math.round(2147483648*Math.random())}():vp++,"0x"+vp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="RestConnection",cQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uQ{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=s+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Wh?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,s,n,r,o){const i=F_(),c=this.bo(e,s.toUriEncodedString());mt(Jb,`Sending RPC '${e}' ${i}:`,c,n);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,r,o),this.vo(e,c,u,n).then(d=>(mt(Jb,`Received RPC '${e}' ${i}: `,d),d),d=>{throw fu(Jb,`RPC '${e}' ${i} failed with error: `,d,"url: ",c,"request:",n),d})}Co(e,s,n,r,o,i){return this.So(e,s,n,r,o)}Do(e,s,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>e[o]=r),n&&n.headers.forEach((r,o)=>e[o]=r)}bo(e,s){const n=cQ[e];return`${this.po}/v1/${s}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class mQ extends uQ{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,s,n,r){const o=F_();return new Promise((i,c)=>{const u=new D4;u.setWithCredentials(!0),u.listenOnce(N4.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case uh.NO_ERROR:const m=u.getResponseJson();mt(jn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),i(m);break;case uh.TIMEOUT:mt(jn,`RPC '${e}' ${o} timed out`),c(new kt(st.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const f=u.getStatus();if(mt(jn,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const w=function(E){const k=E.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(k)>=0?k:st.UNKNOWN}(g.status);c(new kt(w,g.message))}else c(new kt(st.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new kt(st.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{mt(jn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);mt(jn,`RPC '${e}' ${o} sending request:`,r),u.send(s,"POST",d,n,15)})}Wo(e,s,n){const r=F_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=U4(),c=F4(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,s,n),u.encodeInitMessageHeaders=!0;const m=o.join("");mt(jn,`Creating RPC '${e}' stream ${r}: ${m}`,u);const f=i.createWebChannel(m,u);let p=!1,g=!1;const w=new dQ({Fo:E=>{g?mt(jn,`Not sending because RPC '${e}' stream ${r} is closed:`,E):(p||(mt(jn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),p=!0),mt(jn,`RPC '${e}' stream ${r} sending:`,E),f.send(E))},Mo:()=>f.close()}),C=(E,k,A)=>{E.listen(k,S=>{try{A(S)}catch(T){setTimeout(()=>{throw T},0)}})};return C(f,Id.EventType.OPEN,()=>{g||(mt(jn,`RPC '${e}' stream ${r} transport opened.`),w.Qo())}),C(f,Id.EventType.CLOSE,()=>{g||(g=!0,mt(jn,`RPC '${e}' stream ${r} transport closed`),w.Uo())}),C(f,Id.EventType.ERROR,E=>{g||(g=!0,fu(jn,`RPC '${e}' stream ${r} transport errored:`,E),w.Uo(new kt(st.UNAVAILABLE,"The operation could not be completed")))}),C(f,Id.EventType.MESSAGE,E=>{var k;if(!g){const A=E.data[0];ps(!!A);const S=A,T=(S==null?void 0:S.error)||((k=S[0])===null||k===void 0?void 0:k.error);if(T){mt(jn,`RPC '${e}' stream ${r} received error:`,T);const R=T.status;let L=function(D){const U=rn[D];if(U!==void 0)return v$(U)}(R),P=T.message;L===void 0&&(L=st.INTERNAL,P="Unknown error status: "+R+" with message "+T.message),g=!0,w.Uo(new kt(L,P)),f.close()}else mt(jn,`RPC '${e}' stream ${r} received:`,A),w.Ko(A)}}),C(c,O4.STAT_EVENT,E=>{E.stat===C_.PROXY?mt(jn,`RPC '${e}' stream ${r} detected buffering proxy`):E.stat===C_.NOPROXY&&mt(jn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function Zb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){return new gz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,s,n=1e3,r=1.5,o=6e4){this.Ti=e,this.timerId=s,this.Go=n,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const s=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,s-n);r>0&&mt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="PersistentStream";class $${constructor(e,s,n,r,o,i,c,u){this.Ti=e,this.n_=n,this.r_=r,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new M$(e,s)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,s){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():s&&s.code===st.RESOURCE_EXHAUSTED?(Ai(s.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):s&&s.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(s)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),s=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.i_===s&&this.V_(n,r)},n=>{e(()=>{const r=new kt(st.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(r)})})}V_(e,s){const n=this.R_(this.i_);this.stream=this.f_(e,s),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{n(()=>this.m_(r))}),this.stream.onMessage(r=>{n(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return mt(zS,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return s=>{this.Ti.enqueueAndForget(()=>this.i_===e?s():(mt(zS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fQ extends $${constructor(e,s,n,r,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,r,i),this.serializer=o}f_(e,s){return this.connection.Wo("Listen",e,s)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const s=yz(this.serializer,e),n=function(o){if(!("targetChange"in o))return $t.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?$t.min():i.readTime?Yo(i.readTime):$t.min()}(e);return this.listener.p_(s,n)}y_(e){const s={};s.database=N_(this.serializer),s.addTarget=function(o,i){let c;const u=i.target;if(c=M_(u)?{documents:kz(o,u)}:{query:wz(o,u).ht},c.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){c.resumeToken=_$(o,i.resumeToken);const d=R_(o,i.expectedCount);d!==null&&(c.expectedCount=d)}else if(i.snapshotVersion.compareTo($t.min())>0){c.readTime=Jh(o,i.snapshotVersion.toTimestamp());const d=R_(o,i.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=Cz(this.serializer,e);n&&(s.labels=n),this.I_(s)}w_(e){const s={};s.database=N_(this.serializer),s.removeTarget=e,this.I_(s)}}class pQ extends $${constructor(e,s,n,r,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,r,i),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,s){return this.connection.Wo("Write",e,s)}g_(e){return ps(!!e.streamToken),this.lastStreamToken=e.streamToken,ps(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ps(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const s=xz(e.writeResults,e.commitTime),n=Yo(e.commitTime);return this.listener.v_(n,s)}C_(){const e={};e.database=N_(this.serializer),this.I_(e)}b_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>_z(this.serializer,n))};this.I_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{}class gQ extends hQ{constructor(e,s,n,r){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new kt(st.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,s,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.So(e,L_(s,n),r,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new kt(st.UNKNOWN,o.toString())})}Co(e,s,n,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,c])=>this.connection.Co(e,L_(s,n),r,i,c,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new kt(st.UNKNOWN,i.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class vQ{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ai(s),this.N_=!1):mt("OnlineStateTracker",s)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="RemoteStore";class bQ{constructor(e,s,n,r,o){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(i=>{n.enqueueAndForget(async()=>{Jl(this)&&(mt(Nl,"Restarting streams for network reachability change."),await async function(u){const d=Dt(u);d.W_.add(4),await Cf(d),d.j_.set("Unknown"),d.W_.delete(4),await kg(d)}(this))})}),this.j_=new vQ(n,r)}}async function kg(t){if(Jl(t))for(const e of t.G_)await e(!0)}async function Cf(t){for(const e of t.G_)await e(!1)}function R$(t,e){const s=Dt(t);s.K_.has(e.targetId)||(s.K_.set(e.targetId,e),sk(s)?tk(s):Bu(s).c_()&&ek(s,e))}function Zx(t,e){const s=Dt(t),n=Bu(s);s.K_.delete(e),n.c_()&&L$(s,e),s.K_.size===0&&(n.c_()?n.P_():Jl(s)&&s.j_.set("Unknown"))}function ek(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Bu(t).y_(e)}function L$(t,e){t.H_.Ne(e),Bu(t).w_(e)}function tk(t){t.H_=new mz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Bu(t).start(),t.j_.B_()}function sk(t){return Jl(t)&&!Bu(t).u_()&&t.K_.size>0}function Jl(t){return Dt(t).W_.size===0}function D$(t){t.H_=void 0}async function yQ(t){t.j_.set("Online")}async function _Q(t){t.K_.forEach((e,s)=>{ek(t,e)})}async function xQ(t,e){D$(t),sk(t)?(t.j_.q_(e),tk(t)):t.j_.set("Unknown")}async function kQ(t,e,s){if(t.j_.set("Online"),e instanceof y$&&e.state===2&&e.cause)try{await async function(r,o){const i=o.cause;for(const c of o.targetIds)r.K_.has(c)&&(await r.remoteSyncer.rejectListen(c,i),r.K_.delete(c),r.H_.removeTarget(c))}(t,e)}catch(n){mt(Nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await e0(t,n)}else if(e instanceof ph?t.H_.We(e):e instanceof b$?t.H_.Ze(e):t.H_.je(e),!s.isEqual($t.min()))try{const n=await P$(t.localStore);s.compareTo(n)>=0&&await function(o,i){const c=o.H_.ot(i);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.K_.get(d);m&&o.K_.set(d,m.withResumeToken(u.resumeToken,i))}}),c.targetMismatches.forEach((u,d)=>{const m=o.K_.get(u);if(!m)return;o.K_.set(u,m.withResumeToken(Bn.EMPTY_BYTE_STRING,m.snapshotVersion)),L$(o,u);const f=new ca(m.target,u,d,m.sequenceNumber);ek(o,f)}),o.remoteSyncer.applyRemoteEvent(c)}(t,s)}catch(n){mt(Nl,"Failed to raise snapshot:",n),await e0(t,n)}}async function e0(t,e,s){if(!qu(e))throw e;t.W_.add(1),await Cf(t),t.j_.set("Offline"),s||(s=()=>P$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{mt(Nl,"Retrying IndexedDB access"),await s(),t.W_.delete(1),await kg(t)})}function N$(t,e){return e().catch(s=>e0(t,s,e))}async function wg(t){const e=Dt(t),s=Ma(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:Fx;for(;wQ(e);)try{const r=await rQ(e.localStore,n);if(r===null){e.U_.length===0&&s.P_();break}n=r.batchId,EQ(e,r)}catch(r){await e0(e,r)}O$(e)&&F$(e)}function wQ(t){return Jl(t)&&t.U_.length<10}function EQ(t,e){t.U_.push(e);const s=Ma(t);s.c_()&&s.S_&&s.b_(e.mutations)}function O$(t){return Jl(t)&&!Ma(t).u_()&&t.U_.length>0}function F$(t){Ma(t).start()}async function CQ(t){Ma(t).C_()}async function SQ(t){const e=Ma(t);for(const s of t.U_)e.b_(s.mutations)}async function TQ(t,e,s){const n=t.U_.shift(),r=Wx.from(n,e,s);await N$(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await wg(t)}async function AQ(t,e){e&&Ma(t).S_&&await async function(n,r){if(function(i){return uz(i)&&i!==st.ABORTED}(r.code)){const o=n.U_.shift();Ma(n).h_(),await N$(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r)),await wg(n)}}(t,e),O$(t)&&F$(t)}async function QS(t,e){const s=Dt(t);s.asyncQueue.verifyOperationInProgress(),mt(Nl,"RemoteStore received new credentials");const n=Jl(s);s.W_.add(3),await Cf(s),n&&s.j_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.W_.delete(3),await kg(s)}async function IQ(t,e){const s=Dt(t);e?(s.W_.delete(2),await kg(s)):e||(s.W_.add(2),await Cf(s),s.j_.set("Unknown"))}function Bu(t){return t.J_||(t.J_=function(s,n,r){const o=Dt(s);return o.M_(),new fQ(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{xo:yQ.bind(null,t),No:_Q.bind(null,t),Lo:xQ.bind(null,t),p_:kQ.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),sk(t)?tk(t):t.j_.set("Unknown")):(await t.J_.stop(),D$(t))})),t.J_}function Ma(t){return t.Y_||(t.Y_=function(s,n,r){const o=Dt(s);return o.M_(),new pQ(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:CQ.bind(null,t),Lo:AQ.bind(null,t),D_:SQ.bind(null,t),v_:TQ.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await wg(t)):(await t.Y_.stop(),t.U_.length>0&&(mt(Nl,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,s,n,r,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,r,o){const i=Date.now()+n,c=new nk(e,s,i,r,o);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kt(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rk(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),qu(t))return new kt(st.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{static emptySet(e){return new Yc(e.comparator)}constructor(e){this.comparator=e?(s,n)=>e(s,n)||wt.comparator(s.key,n.key):(s,n)=>wt.comparator(s.key,n.key),this.keyedMap=Pd(),this.sortedSet=new dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Yc)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const r=s.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new Yc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.Z_=new dn(wt.comparator)}track(e){const s=e.doc.key,n=this.Z_.get(s);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(s,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(s):e.type===1&&n.type===2?this.Z_=this.Z_.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(s,{type:2,doc:e.doc}):At():this.Z_=this.Z_.insert(s,e)}X_(){const e=[];return this.Z_.inorderTraversal((s,n)=>{e.push(n)}),e}}class bu{constructor(e,s,n,r,o,i,c,u,d){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,s,n,r,o){const i=[];return s.forEach(c=>{i.push({type:0,doc:c})}),new bu(e,s,Yc.emptySet(s),i,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++)if(s[r].type!==n[r].type||!s[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class MQ{constructor(){this.queries=YS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(s,n){const r=Dt(s),o=r.queries;r.queries=YS(),o.forEach((i,c)=>{for(const u of c.ta)u.onError(n)})})(this,new kt(st.ABORTED,"Firestore shutting down"))}}function YS(){return new Yl(t=>o$(t),gg)}async function $Q(t,e){const s=Dt(t);let n=3;const r=e.query;let o=s.queries.get(r);o?!o.na()&&e.ra()&&(n=2):(o=new PQ,n=e.ra()?0:1);try{switch(n){case 0:o.ea=await s.onListen(r,!0);break;case 1:o.ea=await s.onListen(r,!1);break;case 2:await s.onFirstRemoteStoreListen(r)}}catch(i){const c=rk(i,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(c)}s.queries.set(r,o),o.ta.push(e),e.sa(s.onlineState),o.ea&&e.oa(o.ea)&&ok(s)}async function RQ(t,e){const s=Dt(t),n=e.query;let r=3;const o=s.queries.get(n);if(o){const i=o.ta.indexOf(e);i>=0&&(o.ta.splice(i,1),o.ta.length===0?r=e.ra()?0:1:!o.na()&&e.ra()&&(r=2))}switch(r){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function LQ(t,e){const s=Dt(t);let n=!1;for(const r of e){const o=r.query,i=s.queries.get(o);if(i){for(const c of i.ta)c.oa(r)&&(n=!0);i.ea=r}}n&&ok(s)}function DQ(t,e,s){const n=Dt(t),r=n.queries.get(e);if(r)for(const o of r.ta)o.onError(s);n.queries.delete(e)}function ok(t){t.ia.forEach(e=>{e.next()})}var U_,XS;(XS=U_||(U_={}))._a="default",XS.Cache="cache";class NQ{constructor(e,s,n){this.query=e,this.aa=s,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new bu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.ua?this.la(e)&&(this.aa.next(e),s=!0):this.ha(e,this.onlineState)&&(this.Pa(e),s=!0),this.ca=e,s}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let s=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),s=!0),s}ha(e,s){if(!e.fromCache||!this.ra())return!0;const n=s!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}la(e){if(e.docChanges.length>0)return!0;const s=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Pa(e){e=bu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==U_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.key=e}}class q${constructor(e){this.key=e}}class OQ{constructor(e,s){this.query=e,this.fa=s,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Qt(),this.mutatedKeys=Qt(),this.ya=i$(e),this.wa=new Yc(this.ya)}get Sa(){return this.fa}ba(e,s){const n=s?s.Da:new KS,r=s?s.wa:this.wa;let o=s?s.mutatedKeys:this.mutatedKeys,i=r,c=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,f)=>{const p=r.get(m),g=vg(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;p&&g?p.data.isEqual(g.data)?w!==C&&(n.track({type:3,doc:g}),E=!0):this.va(p,g)||(n.track({type:2,doc:g}),E=!0,(u&&this.ya(g,u)>0||d&&this.ya(g,d)<0)&&(c=!0)):!p&&g?(n.track({type:0,doc:g}),E=!0):p&&!g&&(n.track({type:1,doc:p}),E=!0,(u||d)&&(c=!0)),E&&(g?(i=i.add(g),o=C?o.add(m):o.delete(m)):(i=i.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const m=this.query.limitType==="F"?i.last():i.first();i=i.delete(m.key),o=o.delete(m.key),n.track({type:1,doc:m})}return{wa:i,Da:n,ls:c,mutatedKeys:o}}va(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,r){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const i=e.Da.X_();i.sort((m,f)=>function(g,w){const C=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return C(g)-C(w)}(m.type,f.type)||this.ya(m.doc,f.doc)),this.Ca(n),r=r!=null&&r;const c=s&&!r?this.Fa():[],u=this.pa.size===0&&this.current&&!r?1:0,d=u!==this.ga;return this.ga=u,i.length!==0||d?{snapshot:new bu(this.query,e.wa,o,i,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new KS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(s=>this.fa=this.fa.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.fa=this.fa.delete(s)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Qt(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const s=[];return e.forEach(n=>{this.pa.has(n)||s.push(new q$(n))}),this.pa.forEach(n=>{e.has(n)||s.push(new U$(n))}),s}Oa(e){this.fa=e.gs,this.pa=Qt();const s=this.ba(e.documents);return this.applyChanges(s,!0)}Na(){return bu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ik="SyncEngine";class FQ{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class UQ{constructor(e){this.key=e,this.Ba=!1}}class qQ{constructor(e,s,n,r,o,i){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.La={},this.ka=new Yl(c=>o$(c),gg),this.qa=new Map,this.Qa=new Set,this.$a=new dn(wt.comparator),this.Ua=new Map,this.Ka=new Kx,this.Wa={},this.Ga=new Map,this.za=vu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function BQ(t,e,s=!0){const n=W$(t);let r;const o=n.ka.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Na()):r=await B$(n,e,s,!0),r}async function VQ(t,e){const s=W$(t);await B$(s,e,!0,!1)}async function B$(t,e,s,n){const r=await oQ(t.localStore,Qo(e)),o=r.targetId,i=t.sharedClientState.addLocalQueryTarget(o,s);let c;return n&&(c=await HQ(t,e,o,i==="current",r.resumeToken)),t.isPrimaryClient&&s&&R$(t.remoteStore,r),c}async function HQ(t,e,s,n,r){t.Ha=(f,p,g)=>async function(C,E,k,A){let S=E.view.ba(k);S.ls&&(S=await HS(C.localStore,E.query,!1).then(({documents:P})=>E.view.ba(P,S)));const T=A&&A.targetChanges.get(E.targetId),R=A&&A.targetMismatches.get(E.targetId)!=null,L=E.view.applyChanges(S,C.isPrimaryClient,T,R);return ZS(C,E.targetId,L.Ma),L.snapshot}(t,f,p,g);const o=await HS(t.localStore,e,!0),i=new OQ(e,o.gs),c=i.ba(o.documents),u=Ef.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",r),d=i.applyChanges(c,t.isPrimaryClient,u);ZS(t,s,d.Ma);const m=new FQ(e,s,i);return t.ka.set(e,m),t.qa.has(s)?t.qa.get(s).push(e):t.qa.set(s,[e]),d.snapshot}async function GQ(t,e,s){const n=Dt(t),r=n.ka.get(e),o=n.qa.get(r.targetId);if(o.length>1)return n.qa.set(r.targetId,o.filter(i=>!gg(i,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await O_(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),s&&Zx(n.remoteStore,r.targetId),q_(n,r.targetId)}).catch(Uu)):(q_(n,r.targetId),await O_(n.localStore,r.targetId,!0))}async function jQ(t,e){const s=Dt(t),n=s.ka.get(e),r=s.qa.get(n.targetId);s.isPrimaryClient&&r.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Zx(s.remoteStore,n.targetId))}async function WQ(t,e,s){const n=ZQ(t);try{const r=await function(i,c){const u=Dt(i),d=vn.now(),m=c.reduce((g,w)=>g.add(w.key),Qt());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Ii(),C=Qt();return u.ds.getEntries(g,m).next(E=>{w=E,w.forEach((k,A)=>{A.isValidDocument()||(C=C.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,w)).next(E=>{f=E;const k=[];for(const A of c){const S=oz(A,f.get(A.key).overlayedDocument);S!=null&&k.push(new Xl(A.key,S,J4(S.value.mapValue),Ko.exists(!0)))}return u.mutationQueue.addMutationBatch(g,d,k,c)}).next(E=>{p=E;const k=E.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(g,E.batchId,k)})}).then(()=>({batchId:p.batchId,changes:l$(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(i,c,u){let d=i.Wa[i.currentUser.toKey()];d||(d=new dn(Vt)),d=d.insert(c,u),i.Wa[i.currentUser.toKey()]=d}(n,r.batchId,s),await Sf(n,r.changes),await wg(n.remoteStore)}catch(r){const o=rk(r,"Failed to persist write");s.reject(o)}}async function V$(t,e){const s=Dt(t);try{const n=await sQ(s.localStore,e);e.targetChanges.forEach((r,o)=>{const i=s.Ua.get(o);i&&(ps(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?i.Ba=!0:r.modifiedDocuments.size>0?ps(i.Ba):r.removedDocuments.size>0&&(ps(i.Ba),i.Ba=!1))}),await Sf(s,n,e)}catch(n){await Uu(n)}}function JS(t,e,s){const n=Dt(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const r=[];n.ka.forEach((o,i)=>{const c=i.view.sa(e);c.snapshot&&r.push(c.snapshot)}),function(i,c){const u=Dt(i);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const p of f.ta)p.sa(c)&&(d=!0)}),d&&ok(u)}(n.eventManager,e),r.length&&n.La.p_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function zQ(t,e,s){const n=Dt(t);n.sharedClientState.updateQueryState(e,"rejected",s);const r=n.Ua.get(e),o=r&&r.key;if(o){let i=new dn(wt.comparator);i=i.insert(o,Jn.newNoDocument(o,$t.min()));const c=Qt().add(o),u=new _g($t.min(),new Map,new dn(Vt),i,c);await V$(n,u),n.$a=n.$a.remove(o),n.Ua.delete(e),ak(n)}else await O_(n.localStore,e,!1).then(()=>q_(n,e,s)).catch(Uu)}async function QQ(t,e){const s=Dt(t),n=e.batch.batchId;try{const r=await tQ(s.localStore,e);G$(s,n,null),H$(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await Sf(s,r)}catch(r){await Uu(r)}}async function KQ(t,e,s){const n=Dt(t);try{const r=await function(i,c){const u=Dt(i);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(ps(f!==null),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(n.localStore,e);G$(n,e,s),H$(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await Sf(n,r)}catch(r){await Uu(r)}}function H$(t,e){(t.Ga.get(e)||[]).forEach(s=>{s.resolve()}),t.Ga.delete(e)}function G$(t,e,s){const n=Dt(t);let r=n.Wa[n.currentUser.toKey()];if(r){const o=r.get(e);o&&(s?o.reject(s):o.resolve(),r=r.remove(e)),n.Wa[n.currentUser.toKey()]=r}}function q_(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.qa.get(e))t.ka.delete(n),s&&t.La.Ja(n,s);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(n=>{t.Ka.containsKey(n)||j$(t,n)})}function j$(t,e){t.Qa.delete(e.path.canonicalString());const s=t.$a.get(e);s!==null&&(Zx(t.remoteStore,s),t.$a=t.$a.remove(e),t.Ua.delete(s),ak(t))}function ZS(t,e,s){for(const n of s)n instanceof U$?(t.Ka.addReference(n.key,e),YQ(t,n)):n instanceof q$?(mt(ik,"Document no longer in limbo: "+n.key),t.Ka.removeReference(n.key,e),t.Ka.containsKey(n.key)||j$(t,n.key)):At()}function YQ(t,e){const s=e.key,n=s.path.canonicalString();t.$a.get(s)||t.Qa.has(n)||(mt(ik,"New document in limbo: "+s),t.Qa.add(n),ak(t))}function ak(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const s=new wt(zs.fromString(e)),n=t.za.next();t.Ua.set(n,new UQ(s)),t.$a=t.$a.insert(s,n),R$(t.remoteStore,new ca(Qo(Hx(s.path)),n,"TargetPurposeLimboResolution",mg.ae))}}async function Sf(t,e,s){const n=Dt(t),r=[],o=[],i=[];n.ka.isEmpty()||(n.ka.forEach((c,u)=>{i.push(n.Ha(u,e,s).then(d=>{var m;if((d||s)&&n.isPrimaryClient){const f=d?!d.fromCache:(m=s==null?void 0:s.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){r.push(d);const f=Xx.Yi(u.targetId,d);o.push(f)}}))}),await Promise.all(i),n.La.p_(r),await async function(u,d){const m=Dt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(d,p=>Xe.forEach(p.Hi,g=>m.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>Xe.forEach(p.Ji,g=>m.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!qu(f))throw f;mt(Jx,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const g=m.Ts.get(p),w=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(w);m.Ts=m.Ts.insert(p,C)}}}(n.localStore,o))}async function XQ(t,e){const s=Dt(t);if(!s.currentUser.isEqual(e)){mt(ik,"User change. New user:",e.toKey());const n=await I$(s.localStore,e);s.currentUser=e,function(o,i){o.Ga.forEach(c=>{c.forEach(u=>{u.reject(new kt(st.CANCELLED,i))})}),o.Ga.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Sf(s,n.Rs)}}function JQ(t,e){const s=Dt(t),n=s.Ua.get(e);if(n&&n.Ba)return Qt().add(n.key);{let r=Qt();const o=s.qa.get(e);if(!o)return r;for(const i of o){const c=s.ka.get(i);r=r.unionWith(c.view.Sa)}return r}}function W$(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zQ.bind(null,e),e.La.p_=LQ.bind(null,e.eventManager),e.La.Ja=DQ.bind(null,e.eventManager),e}function ZQ(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KQ.bind(null,e),e}class t0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,s){return null}nu(e,s){return null}eu(e){return eQ(this.persistence,new Xz,e.initialUser,this.serializer)}Xa(e){return new A$(Yx.ri,this.serializer)}Za(e){return new aQ}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}t0.provider={build:()=>new t0};class eK extends t0{constructor(e){super(),this.cacheSizeBytes=e}tu(e,s){ps(this.persistence.referenceDelegate instanceof Zh);const n=this.persistence.referenceDelegate.garbageCollector;return new Nz(n,e.asyncQueue,s)}Xa(e){const s=this.cacheSizeBytes!==void 0?yr.withCacheSize(this.cacheSizeBytes):yr.DEFAULT;return new A$(n=>Zh.ri(n,s),this.serializer)}}class B_{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>JS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=XQ.bind(null,this.syncEngine),await IQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MQ}()}createDatastore(e){const s=xg(e.databaseInfo.databaseId),n=function(o){return new mQ(o)}(e.databaseInfo);return function(o,i,c,u){return new gQ(o,i,c,u)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,r,o,i,c){return new bQ(n,r,o,i,c)}(this.localStore,this.datastore,e.asyncQueue,s=>JS(this.syncEngine,s,0),function(){return WS.D()?new WS:new lQ}())}createSyncEngine(e,s){return function(r,o,i,c,u,d,m){const f=new qQ(r,o,i,c,u,d);return m&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(r){const o=Dt(r);mt(Nl,"RemoteStore shutting down."),o.W_.add(5),await Cf(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}B_.provider={build:()=>new B_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="FirestoreClient";class sK{constructor(e,s,n,r,o){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=r,this.user=Qn.UNAUTHENTICATED,this.clientId=V4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async i=>{mt($a,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(mt($a,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=rk(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ey(t,e){t.asyncQueue.verifyOperationInProgress(),mt($a,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async r=>{n.isEqual(r)||(await I$(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eT(t,e){t.asyncQueue.verifyOperationInProgress();const s=await nK(t);mt($a,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>QS(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,r)=>QS(e.remoteStore,r)),t._onlineComponents=e}async function nK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){mt($a,"Using user provided OfflineComponentProvider");try{await ey(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(r){return r.name==="FirebaseError"?r.code===st.FAILED_PRECONDITION||r.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(s))throw s;fu("Error using user provided cache. Falling back to memory cache: "+s),await ey(t,new t0)}}else mt($a,"Using default OfflineComponentProvider"),await ey(t,new eK(void 0));return t._offlineComponents}async function z$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(mt($a,"Using user provided OnlineComponentProvider"),await eT(t,t._uninitializedComponentsProvider._online)):(mt($a,"Using default OnlineComponentProvider"),await eT(t,new B_))),t._onlineComponents}function rK(t){return z$(t).then(e=>e.syncEngine)}async function oK(t){const e=await z$(t),s=e.eventManager;return s.onListen=BQ.bind(null,e.syncEngine),s.onUnlisten=GQ.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=VQ.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=jQ.bind(null,e.syncEngine),s}function iK(t,e,s={}){const n=new ga;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,c,u,d){const m=new tK({next:p=>{m.su(),i.enqueueAndForget(()=>RQ(o,f));const g=p.docs.has(c);!g&&p.fromCache?d.reject(new kt(st.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?d.reject(new kt(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new NQ(Hx(c.path),m,{includeMetadataChanges:!0,Ta:!0});return $Q(o,f)}(await oK(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t,e,s){if(!s)throw new kt(st.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lK(t,e,s,n){if(e===!0&&n===!0)throw new kt(st.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function sT(t){if(!wt.isDocumentKey(t))throw new kt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lk(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":At()}function yu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=lk(t);throw new kt(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$="firestore.googleapis.com",nT=!0;class rT{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new kt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K$,this.ssl=nT}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:nT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T$;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Lz)throw new kt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q$((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new kt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new kt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new kt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ck{constructor(e,s,n,r){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new kt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new uW;switch(n.type){case"firstParty":return new pW(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new kt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=tT.get(s);n&&(mt("ComponentProvider","Removing Datastore"),tT.delete(s),n.terminate())}(this),Promise.resolve()}}function cK(t,e,s,n={}){var r;const o=(t=yu(t,ck))._getSettings(),i=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${s}`;o.host!==K$&&o.host!==c&&fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:!1,emulatorOptions:n});if(!wa(u,i)&&(t._setSettings(u),n.mockUserToken)){let d,m;if(typeof n.mockUserToken=="string")d=n.mockUserToken,m=Qn.MOCK_USER;else{d=EB(n.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new kt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Qn(f)}t._authCredentials=new dW(new q4(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uk(this.firestore,e,this._query)}}class so{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new so(this.firestore,e,this._key)}}class Gm extends uk{constructor(e,s,n){super(e,s,Hx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new so(this.firestore,null,new wt(e))}withConverter(e){return new Gm(this.firestore,e,this._path)}}function bp(t,e,...s){if(t=Ft(t),arguments.length===1&&(e=V4.newId()),aK("doc","path",e),t instanceof ck){const n=zs.fromString(e,...s);return sT(n),new so(t,null,new wt(n))}{if(!(t instanceof so||t instanceof Gm))throw new kt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(zs.fromString(e,...s));return sT(n),new so(t.firestore,t instanceof Gm?t.converter:null,new wt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="AsyncQueue";class iT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new M$(this,"async_queue_retry"),this.Su=()=>{const n=Zb();n&&mt(oT,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const s=Zb();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const s=Zb();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const s=new ga;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!qu(e))throw e;mt(oT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const s=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const r=function(i){let c=i.message||"";return i.stack&&(c=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),c}(n);throw Ai("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.pu=!1,n))));return this.bu=s,s}enqueueAfterDelay(e,s,n){this.Du(),this.wu.indexOf(e)>-1&&(s=0);const r=nk.createAndSchedule(this,e,s,n,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&At()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const s of this.fu)if(s.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.fu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const s=this.fu.indexOf(e);this.fu.splice(s,1)}}class Eg extends ck{constructor(e,s,n,r){super(e,s,n,r),this.type="firestore",this._queue=new iT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iT(e),this._firestoreClient=void 0,await e}}}function uK(t,e){const s=Lu(),n=Wh,r=Po(s,"firestore").getImmediate({identifier:n});if(!r._initialized){const o=kB("firestore");o&&cK(r,...o)}return r}function Y$(t){if(t._terminated)throw new kt(st.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dK(t),t._firestoreClient}function dK(t){var e,s,n;const r=t._freezeSettings(),o=function(c,u,d,m){return new IW(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Q$(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((s=r.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new sK(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _u(Bn.fromBase64String(e))}catch(s){throw new kt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new _u(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new kt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new kt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new kt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=/^__.*__$/;class fK{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new Xl(e,this.data,this.fieldMask,s,this.fieldTransforms):new wf(e,this.data,s,this.fieldTransforms)}}function J$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class pk{constructor(e,s,n,r,o,i){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new pk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return s0(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(J$(this.Lu)&&mK.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class pK{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||xg(e)}ju(e,s,n,r=!1){return new pk({Lu:e,methodName:s,zu:n,path:Un.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hK(t){const e=t._freezeSettings(),s=xg(t._databaseId);return new pK(t._databaseId,!!e.ignoreUndefinedProperties,s)}function gK(t,e,s,n,r,o={}){const i=t.ju(o.merge||o.mergeFields?2:0,e,s,r);sR("Data must be an object, but it was:",i,n);const c=eR(n,i);let u,d;if(o.merge)u=new go(i.fieldMask),d=i.fieldTransforms;else if(o.mergeFields){const m=[];for(const f of o.mergeFields){const p=vK(e,f,s);if(!i.contains(p))throw new kt(st.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);yK(m,p)||m.push(p)}u=new go(m),d=i.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=i.fieldTransforms;return new fK(new Qr(c),u,d)}function Z$(t,e){if(tR(t=Ft(t)))return sR("Unsupported field value:",e,t),eR(t,e);if(t instanceof X$)return function(n,r){if(!J$(r.Lu))throw r.Wu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,r){const o=[];let i=0;for(const c of n){let u=Z$(c,r.Ku(i));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),i++}return{arrayValue:{values:o}}}(t,e)}return function(n,r){if((n=Ft(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ZW(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=vn.fromDate(n);return{timestampValue:Jh(r.serializer,o)}}if(n instanceof vn){const o=new vn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jh(r.serializer,o)}}if(n instanceof mk)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof _u)return{bytesValue:_$(r.serializer,n._byteString)};if(n instanceof so){const o=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(o))throw r.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Qx(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof fk)return function(i,c){return{mapValue:{fields:{[Y4]:{stringValue:X4},[zh]:{arrayValue:{values:i.toArray().map(d=>{if(typeof d!="number")throw c.Wu("VectorValues must only contain numeric values.");return Gx(c.serializer,d)})}}}}}}(n,r);throw r.Wu(`Unsupported field value: ${lk(n)}`)}(t,e)}function eR(t,e){const s={};return G4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(t,(n,r)=>{const o=Z$(r,e.qu(n));o!=null&&(s[n]=o)}),{mapValue:{fields:s}}}function tR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vn||t instanceof mk||t instanceof _u||t instanceof so||t instanceof X$||t instanceof fk)}function sR(t,e,s){if(!tR(s)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(s)){const n=lk(s);throw n==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+n)}}function vK(t,e,s){if((e=Ft(e))instanceof dk)return e._internalPath;if(typeof e=="string")return nR(t,e);throw s0("Field path arguments must be of type string or ",t,!1,void 0,s)}const bK=new RegExp("[~\\*/\\[\\]]");function nR(t,e,s){if(e.search(bK)>=0)throw s0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new dk(...e.split("."))._internalPath}catch{throw s0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function s0(t,e,s,n,r){const o=n&&!n.isEmpty(),i=r!==void 0;let c=`Function ${e}() called with invalid data`;s&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||i)&&(u+=" (found",o&&(u+=` in field ${n}`),i&&(u+=` in document ${r}`),u+=")"),new kt(st.INVALID_ARGUMENT,c+t+u)}function yK(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,s,n,r,o){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new so(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _K(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(oR("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class _K extends rR{data(){return super.data()}}function oR(t,e){return typeof e=="string"?nR(t,e):e instanceof dk?e._internalPath:e._delegate._internalPath}class xK{convertValue(e,s="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return en(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw At()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Kl(e,(r,o)=>{n[r]=this.convertValue(o,s)}),n}convertVectorValue(e){var s,n,r;const o=(r=(n=(s=e.fields)===null||s===void 0?void 0:s[zh].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(i=>en(i.doubleValue));return new fk(o)}convertGeoPoint(e){return new mk(en(e.latitude),en(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=pg(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(Um(e));default:return null}}convertTimestamp(e){const s=Aa(e);return new vn(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=zs.fromString(e);ps(S$(n));const r=new qm(n.get(1),n.get(3)),o=new wt(n.popFirst(5));return r.isEqual(s)||Ai(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(t,e,s){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iR extends rR{constructor(e,s,n,r,o,i){super(e,s,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new EK(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(oR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class EK extends iR{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){t=yu(t,so);const e=yu(t.firestore,Eg);return iK(Y$(e),t._key).then(s=>AK(e,t,s))}class CK extends xK{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new so(this.firestore,null,s)}}function SK(t,e,s){t=yu(t,so);const n=yu(t.firestore,Eg),r=kK(t.converter,e);return aR(n,[gK(hK(n),"setDoc",t._key,r,t.converter!==null,s).toMutation(t._key,Ko.none())])}function TK(t){return aR(yu(t.firestore,Eg),[new jx(t._key,Ko.none())])}function aR(t,e){return function(n,r){const o=new ga;return n.asyncQueue.enqueueAndForget(async()=>WQ(await rK(n),r,o)),o.promise}(Y$(t),e)}function AK(t,e,s){const n=s.docs.get(e._key),r=new CK(t);return new iR(t,r,e._key,n,new wK(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(r){Fu=r})(si),qn(new Ln("firestore",(n,{instanceIdentifier:r,options:o})=>{const i=n.getProvider("app").getImmediate(),c=new Eg(new mW(n.getProvider("auth-internal")),new hW(i,n.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new kt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qm(d.options.projectId,m)}(i,r),i);return o=Object.assign({useFetchStreams:s},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),qs(fS,pS,e),qs(fS,pS,"esm2017")})();const lR="@firebase/installations",hk="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1e4,uR=`w:${hk}`,dR="FIS_v2",IK="https://firebaseinstallations.googleapis.com/v1",PK=60*60*1e3,MK="installations",$K="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ol=new Io(MK,$K,RK);function mR(t){return t instanceof Mn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR({projectId:t}){return`${IK}/projects/${t}/installations`}function pR(t){return{token:t.token,requestStatus:2,expiresIn:DK(t.expiresIn),creationTime:Date.now()}}async function hR(t,e){const n=(await e.json()).error;return Ol.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function gR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function LK(t,{refreshToken:e}){const s=gR(t);return s.append("Authorization",NK(e)),s}async function vR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function DK(t){return Number(t.replace("s","000"))}function NK(t){return`${dR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OK({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const n=fR(t),r=gR(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const i={fid:s,authVersion:dR,appId:t.appId,sdkVersion:uR},c={method:"POST",headers:r,body:JSON.stringify(i)},u=await vR(()=>fetch(n,c));if(u.ok){const d=await u.json();return{fid:d.fid||s,registrationStatus:2,refreshToken:d.refreshToken,authToken:pR(d.authToken)}}else throw await hR("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK=/^[cdef][\w-]{21}$/,V_="";function qK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=BK(t);return UK.test(s)?s:V_}catch{return V_}}function BK(t){return FK(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Map;function _R(t,e){const s=Cg(t);xR(s,e),VK(s,e)}function xR(t,e){const s=yR.get(t);if(s)for(const n of s)n(e)}function VK(t,e){const s=HK();s&&s.postMessage({key:t,fid:e}),GK()}let vl=null;function HK(){return!vl&&"BroadcastChannel"in self&&(vl=new BroadcastChannel("[Firebase] FID Change"),vl.onmessage=t=>{xR(t.data.key,t.data.fid)}),vl}function GK(){yR.size===0&&vl&&(vl.close(),vl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK="firebase-installations-database",WK=1,Fl="firebase-installations-store";let sy=null;function gk(){return sy||(sy=SM(jK,WK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fl)}}})),sy}async function n0(t,e){const s=Cg(t),r=(await gk()).transaction(Fl,"readwrite"),o=r.objectStore(Fl),i=await o.get(s);return await o.put(e,s),await r.done,(!i||i.fid!==e.fid)&&_R(t,e.fid),e}async function kR(t){const e=Cg(t),n=(await gk()).transaction(Fl,"readwrite");await n.objectStore(Fl).delete(e),await n.done}async function Sg(t,e){const s=Cg(t),r=(await gk()).transaction(Fl,"readwrite"),o=r.objectStore(Fl),i=await o.get(s),c=e(i);return c===void 0?await o.delete(s):await o.put(c,s),await r.done,c&&(!i||i.fid!==c.fid)&&_R(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t){let e;const s=await Sg(t.appConfig,n=>{const r=zK(n),o=QK(t,r);return e=o.registrationPromise,o.installationEntry});return s.fid===V_?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function zK(t){const e=t||{fid:qK(),registrationStatus:0};return wR(e)}function QK(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ol.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=KK(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:YK(t)}:{installationEntry:e}}async function KK(t,e){try{const s=await OK(t,e);return n0(t.appConfig,s)}catch(s){throw mR(s)&&s.customData.serverCode===409?await kR(t.appConfig):await n0(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function YK(t){let e=await aT(t.appConfig);for(;e.registrationStatus===1;)await bR(100),e=await aT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await vk(t);return n||s}return e}function aT(t){return Sg(t,e=>{if(!e)throw Ol.create("installation-not-found");return wR(e)})}function wR(t){return XK(t)?{fid:t.fid,registrationStatus:0}:t}function XK(t){return t.registrationStatus===1&&t.registrationTime+cR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JK({appConfig:t,heartbeatServiceProvider:e},s){const n=ZK(t,s),r=LK(t,s),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const i={installation:{sdkVersion:uR,appId:t.appId}},c={method:"POST",headers:r,body:JSON.stringify(i)},u=await vR(()=>fetch(n,c));if(u.ok){const d=await u.json();return pR(d)}else throw await hR("Generate Auth Token",u)}function ZK(t,{fid:e}){return`${fR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e=!1){let s;const n=await Sg(t.appConfig,o=>{if(!ER(o))throw Ol.create("not-registered");const i=o.authToken;if(!e&&sY(i))return o;if(i.requestStatus===1)return s=eY(t,e),o;{if(!navigator.onLine)throw Ol.create("app-offline");const c=rY(o);return s=tY(t,c),c}});return s?await s:n.authToken}async function eY(t,e){let s=await lT(t.appConfig);for(;s.authToken.requestStatus===1;)await bR(100),s=await lT(t.appConfig);const n=s.authToken;return n.requestStatus===0?bk(t,e):n}function lT(t){return Sg(t,e=>{if(!ER(e))throw Ol.create("not-registered");const s=e.authToken;return oY(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function tY(t,e){try{const s=await JK(t,e),n=Object.assign(Object.assign({},e),{authToken:s});return await n0(t.appConfig,n),s}catch(s){if(mR(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await kR(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await n0(t.appConfig,n)}throw s}}function ER(t){return t!==void 0&&t.registrationStatus===2}function sY(t){return t.requestStatus===2&&!nY(t)}function nY(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+PK}function rY(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function oY(t){return t.requestStatus===1&&t.requestTime+cR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iY(t){const e=t,{installationEntry:s,registrationPromise:n}=await vk(e);return n?n.catch(console.error):bk(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(t,e=!1){const s=t;return await lY(s),(await bk(s,e)).token}async function lY(t){const{registrationPromise:e}=await vk(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(t){if(!t||!t.options)throw ny("App Configuration");if(!t.name)throw ny("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw ny(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ny(t){return Ol.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="installations",uY="installations-internal",dY=t=>{const e=t.getProvider("app").getImmediate(),s=cY(e),n=Po(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},mY=t=>{const e=t.getProvider("app").getImmediate(),s=Po(e,CR).getImmediate();return{getId:()=>iY(s),getToken:r=>aY(s,r)}};function fY(){qn(new Ln(CR,dY,"PUBLIC")),qn(new Ln(uY,mY,"PRIVATE"))}fY();qs(lR,hk);qs(lR,hk,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="analytics",pY="firebase_id",hY="origin",gY=60*1e3,vY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yk="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Ba("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qr=new Io("analytics","Analytics",bY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(t){if(!t.startsWith(yk)){const e=qr.create("invalid-gtag-resource",{gtagURL:t});return Sr.warn(e.message),""}return t}function SR(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function _Y(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function xY(t,e){const s=_Y("firebase-js-sdk-policy",{createScriptURL:yY}),n=document.createElement("script"),r=`${yk}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function kY(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wY(t,e,s,n,r,o){const i=n[r];try{if(i)await e[i];else{const u=(await SR(s)).find(d=>d.measurementId===r);u&&await e[u.appId]}}catch(c){Sr.error(c)}t("config",r,o)}async function EY(t,e,s,n,r){try{let o=[];if(r&&r.send_to){let i=r.send_to;Array.isArray(i)||(i=[i]);const c=await SR(s);for(const u of i){const d=c.find(f=>f.measurementId===u),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",n,r||{})}catch(o){Sr.error(o)}}function CY(t,e,s,n){async function r(o,...i){try{if(o==="event"){const[c,u]=i;await EY(t,e,s,c,u)}else if(o==="config"){const[c,u]=i;await wY(t,e,s,n,c,u)}else if(o==="consent"){const[c,u]=i;t("consent",c,u)}else if(o==="get"){const[c,u,d]=i;t("get",c,u,d)}else if(o==="set"){const[c]=i;t("set",c)}else t(o,...i)}catch(c){Sr.error(c)}}return r}function SY(t,e,s,n,r){let o=function(...i){window[n].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=CY(o,t,e,s),{gtagCore:o,wrappedGtag:window[r]}}function TY(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(yk)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=30,IY=1e3;class PY{constructor(e={},s=IY){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TR=new PY;function MY(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $Y(t){var e;const{appId:s,apiKey:n}=t,r={method:"GET",headers:MY(n)},o=vY.replace("{app-id}",s),i=await fetch(o,r);if(i.status!==200&&i.status!==304){let c="";try{const u=await i.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw qr.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function RY(t,e=TR,s){const{appId:n,apiKey:r,measurementId:o}=t.options;if(!n)throw qr.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:n};throw qr.create("no-api-key")}const i=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new NY;return setTimeout(async()=>{c.abort()},gY),AR({appId:n,apiKey:r,measurementId:o},i,c,e)}async function AR(t,{throttleEndTimeMillis:e,backoffCount:s},n,r=TR){var o;const{appId:i,measurementId:c}=t;try{await LY(n,e)}catch(u){if(c)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:c};throw u}try{const u=await $Y(t);return r.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!DY(d)){if(r.deleteThrottleMetadata(i),c)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:c};throw u}const m=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?f_(s,r.intervalMillis,AY):f_(s,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+m,backoffCount:s+1};return r.setThrottleMetadata(i,f),Sr.debug(`Calling attemptFetch again in ${m} millis`),AR(t,f,n,r)}}function LY(t,e){return new Promise((s,n)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(s,r);t.addEventListener(()=>{clearTimeout(o),n(qr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function DY(t){if(!(t instanceof Mn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class NY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function OY(t,e,s,n,r){if(r&&r.global){t("event",s,n);return}else{const o=await e,i=Object.assign(Object.assign({},n),{send_to:o});t("event",s,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FY(){if(ka())try{await mx()}catch(t){return Sr.warn(qr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Sr.warn(qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UY(t,e,s,n,r,o,i){var c;const u=RY(t);u.then(g=>{s[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Sr.error(g)),e.push(u);const d=FY().then(g=>{if(g)return n.getId()}),[m,f]=await Promise.all([u,d]);TY(o)||xY(o,m.measurementId),r("js",new Date);const p=(c=i==null?void 0:i.config)!==null&&c!==void 0?c:{};return p[hY]="firebase",p.update=!0,f!=null&&(p[pY]=f),r("config",m.measurementId,p),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e){this.app=e}_delete(){return delete sm[this.app.options.appId],Promise.resolve()}}let sm={},cT=[];const uT={};let ry="dataLayer",BY="gtag",dT,IR,mT=!1;function VY(){const t=[];if(dx()&&t.push("This is a browser extension environment."),yM()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,r)=>`(${r+1}) ${n}`).join(" "),s=qr.create("invalid-analytics-context",{errorInfo:e});Sr.warn(s.message)}}function HY(t,e,s){VY();const n=t.options.appId;if(!n)throw qr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qr.create("no-api-key");if(sm[n]!=null)throw qr.create("already-exists",{id:n});if(!mT){kY(ry);const{wrappedGtag:o,gtagCore:i}=SY(sm,cT,uT,ry,BY);IR=o,dT=i,mT=!0}return sm[n]=UY(t,cT,uT,e,dT,ry,s),new qY(t)}function GY(t=Lu()){t=Ft(t);const e=Po(t,r0);return e.isInitialized()?e.getImmediate():jY(t)}function jY(t,e={}){const s=Po(t,r0);if(s.isInitialized()){const r=s.getImmediate();if(wa(e,s.getOptions()))return r;throw qr.create("already-initialized")}return s.initialize({options:e})}function WY(t,e,s,n){t=Ft(t),OY(IR,sm[t.app.options.appId],e,s,n).catch(r=>Sr.error(r))}const fT="@firebase/analytics",pT="0.10.12";function zY(){qn(new Ln(r0,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return HY(n,r,s)},"PUBLIC")),qn(new Ln("analytics-internal",t,"PRIVATE")),qs(fT,pT),qs(fT,pT,"esm2017");function t(e){try{const s=e.getProvider(r0).getImmediate();return{logEvent:(n,r,o)=>WY(s,n,r,o)}}catch(s){throw qr.create("interop-component-reg-failed",{reason:s})}}}zY();var H_,hT,Tg=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},PR=function(t){if(document.readyState==="loading")return"loading";var e=Tg();if(e){if(t<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||t<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||t<e.domComplete)return"dom-content-loaded"}return"complete"},QY=function(t){var e=t.nodeName;return t.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},_k=function(t,e){var s="";try{for(;t&&t.nodeType!==9;){var n=t,r=n.id?"#"+n.id:QY(n)+(n.classList&&n.classList.value&&n.classList.value.trim()&&n.classList.value.trim().length?"."+n.classList.value.trim().replace(/\s+/g,"."):"");if(s.length+r.length>(e||100)-1)return s||r;if(s=s?r+">"+s:r,n.id)break;t=n.parentNode}}catch{}return s},MR=-1,KY=function(){return MR},Tf=function(t){addEventListener("pageshow",function(e){e.persisted&&(MR=e.timeStamp,t(e))},!0)},xk=function(){var t=Tg();return t&&t.activationStart||0},Ra=function(t,e){var s=Tg(),n="navigate";return KY()>=0?n="back-forward-cache":s&&(document.prerendering||xk()>0?n="prerender":document.wasDiscarded?n="restore":s.type&&(n=s.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Vu=function(t,e,s){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver(function(r){Promise.resolve().then(function(){e(r.getEntries())})});return n.observe(Object.assign({type:t,buffered:!0},s||{})),n}}catch{}},La=function(t,e,s,n){var r,o;return function(i){e.value>=0&&(i||n)&&((o=e.value-(r||0))||r===void 0)&&(r=e.value,e.delta=o,e.rating=function(c,u){return c>u[1]?"poor":c>u[0]?"needs-improvement":"good"}(e.value,s),t(e))}},kk=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Ag=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},wk=function(t){var e=!1;return function(){e||(t(),e=!0)}},Rc=-1,gT=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},o0=function(t){document.visibilityState==="hidden"&&Rc>-1&&(Rc=t.type==="visibilitychange"?t.timeStamp:0,YY())},vT=function(){addEventListener("visibilitychange",o0,!0),addEventListener("prerenderingchange",o0,!0)},YY=function(){removeEventListener("visibilitychange",o0,!0),removeEventListener("prerenderingchange",o0,!0)},$R=function(){return Rc<0&&(Rc=gT(),vT(),Tf(function(){setTimeout(function(){Rc=gT(),vT()},0)})),{get firstHiddenTime(){return Rc}}},Ek=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},bT=[1800,3e3],XY=function(t,e){e=e||{},Ek(function(){var s,n=$R(),r=Ra("FCP"),o=Vu("paint",function(i){i.forEach(function(c){c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-xk(),0),r.entries.push(c),s(!0)))})});o&&(s=La(t,r,bT,e.reportAllChanges),Tf(function(i){r=Ra("FCP"),s=La(t,r,bT,e.reportAllChanges),kk(function(){r.value=performance.now()-i.timeStamp,s(!0)})}))})},yT=[.1,.25],JY=function(t,e){(function(s,n){n=n||{},XY(wk(function(){var r,o=Ra("CLS",0),i=0,c=[],u=function(m){m.forEach(function(f){if(!f.hadRecentInput){var p=c[0],g=c[c.length-1];i&&f.startTime-g.startTime<1e3&&f.startTime-p.startTime<5e3?(i+=f.value,c.push(f)):(i=f.value,c=[f])}}),i>o.value&&(o.value=i,o.entries=c,r())},d=Vu("layout-shift",u);d&&(r=La(s,o,yT,n.reportAllChanges),Ag(function(){u(d.takeRecords()),r(!0)}),Tf(function(){i=0,o=Ra("CLS",0),r=La(s,o,yT,n.reportAllChanges),kk(function(){return r()})}),setTimeout(r,0))}))})(function(s){var n=function(r){var o,i={};if(r.entries.length){var c=r.entries.reduce(function(d,m){return d&&d.value>m.value?d:m});if(c&&c.sources&&c.sources.length){var u=(o=c.sources).find(function(d){return d.node&&d.node.nodeType===1})||o[0];u&&(i={largestShiftTarget:_k(u.node),largestShiftTime:c.startTime,largestShiftValue:c.value,largestShiftSource:u,largestShiftEntry:c,loadState:PR(c.startTime)})}}return Object.assign(r,{attribution:i})}(s);t(n)},e)},RR=0,oy=1/0,yp=0,ZY=function(t){t.forEach(function(e){e.interactionId&&(oy=Math.min(oy,e.interactionId),yp=Math.max(yp,e.interactionId),RR=yp?(yp-oy)/7+1:0)})},LR=function(){return H_?RR:performance.interactionCount||0},eX=function(){"interactionCount"in performance||H_||(H_=Vu("event",ZY,{type:"event",buffered:!0,durationThreshold:0}))},mo=[],nm=new Map,DR=0,tX=function(){var t=Math.min(mo.length-1,Math.floor((LR()-DR)/50));return mo[t]},NR=[],sX=function(t){if(NR.forEach(function(r){return r(t)}),t.interactionId||t.entryType==="first-input"){var e=mo[mo.length-1],s=nm.get(t.interactionId);if(s||mo.length<10||t.duration>e.latency){if(s)t.duration>s.latency?(s.entries=[t],s.latency=t.duration):t.duration===s.latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t);else{var n={id:t.interactionId,latency:t.duration,entries:[t]};nm.set(n.id,n),mo.push(n)}mo.sort(function(r,o){return o.latency-r.latency}),mo.length>10&&mo.splice(10).forEach(function(r){return nm.delete(r.id)})}}},Ck=function(t){var e=self.requestIdleCallback||self.setTimeout,s=-1;return t=wk(t),document.visibilityState==="hidden"?t():(s=e(t),Ag(t)),s},_T=[200,500],nX=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},Ek(function(){var s;eX();var n,r=Ra("INP"),o=function(c){Ck(function(){c.forEach(sX);var u=tX();u&&u.latency!==r.value&&(r.value=u.latency,r.entries=u.entries,n())})},i=Vu("event",o,{durationThreshold:(s=e.durationThreshold)!==null&&s!==void 0?s:40});n=La(t,r,_T,e.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),Ag(function(){o(i.takeRecords()),n(!0)}),Tf(function(){DR=LR(),mo.length=0,nm.clear(),r=Ra("INP"),n=La(t,r,_T,e.reportAllChanges)}))}))},Xc=[],aa=[],G_=0,Sk=new WeakMap,Jc=new Map,j_=-1,rX=function(t){Xc=Xc.concat(t),OR()},OR=function(){j_<0&&(j_=Ck(oX))},oX=function(){Jc.size>10&&Jc.forEach(function(i,c){nm.has(c)||Jc.delete(c)});var t=mo.map(function(i){return Sk.get(i.entries[0])}),e=aa.length-50;aa=aa.filter(function(i,c){return c>=e||t.includes(i)});for(var s=new Set,n=0;n<aa.length;n++){var r=aa[n];FR(r.startTime,r.processingEnd).forEach(function(i){s.add(i)})}var o=Xc.length-1-50;Xc=Xc.filter(function(i,c){return i.startTime>G_&&c>o||s.has(i)}),j_=-1};NR.push(function(t){t.interactionId&&t.target&&!Jc.has(t.interactionId)&&Jc.set(t.interactionId,t.target)},function(t){var e,s=t.startTime+t.duration;G_=Math.max(G_,t.processingEnd);for(var n=aa.length-1;n>=0;n--){var r=aa[n];if(Math.abs(s-r.renderTime)<=8){(e=r).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:s,entries:[t]},aa.push(e)),(t.interactionId||t.entryType==="first-input")&&Sk.set(t,e),OR()});var FR=function(t,e){for(var s,n=[],r=0;s=Xc[r];r++)if(!(s.startTime+s.duration<t)){if(s.startTime>e)break;n.push(s)}return n},iX=function(t,e){hT||(hT=Vu("long-animation-frame",rX)),nX(function(s){var n=function(r){var o=r.entries[0],i=Sk.get(o),c=o.processingStart,u=i.processingEnd,d=i.entries.sort(function(E,k){return E.processingStart-k.processingStart}),m=FR(o.startTime,u),f=r.entries.find(function(E){return E.target}),p=f&&f.target||Jc.get(o.interactionId),g=[o.startTime+o.duration,u].concat(m.map(function(E){return E.startTime+E.duration})),w=Math.max.apply(Math,g),C={interactionTarget:_k(p),interactionTargetElement:p,interactionType:o.name.startsWith("key")?"keyboard":"pointer",interactionTime:o.startTime,nextPaintTime:w,processedEventEntries:d,longAnimationFrameEntries:m,inputDelay:c-o.startTime,processingDuration:u-c,presentationDelay:Math.max(w-u,0),loadState:PR(o.startTime)};return Object.assign(r,{attribution:C})}(s);t(n)},e)},xT=[2500,4e3],iy={},aX=function(t,e){(function(s,n){n=n||{},Ek(function(){var r,o=$R(),i=Ra("LCP"),c=function(m){n.reportAllChanges||(m=m.slice(-1)),m.forEach(function(f){f.startTime<o.firstHiddenTime&&(i.value=Math.max(f.startTime-xk(),0),i.entries=[f],r())})},u=Vu("largest-contentful-paint",c);if(u){r=La(s,i,xT,n.reportAllChanges);var d=wk(function(){iy[i.id]||(c(u.takeRecords()),u.disconnect(),iy[i.id]=!0,r(!0))});["keydown","click"].forEach(function(m){addEventListener(m,function(){return Ck(d)},{once:!0,capture:!0})}),Ag(d),Tf(function(m){i=Ra("LCP"),r=La(s,i,xT,n.reportAllChanges),kk(function(){i.value=performance.now()-m.timeStamp,iy[i.id]=!0,r(!0)})})}})})(function(s){var n=function(r){var o={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:r.value};if(r.entries.length){var i=Tg();if(i){var c=i.activationStart||0,u=r.entries[r.entries.length-1],d=u.url&&performance.getEntriesByType("resource").filter(function(w){return w.name===u.url})[0],m=Math.max(0,i.responseStart-c),f=Math.max(m,d?(d.requestStart||d.startTime)-c:0),p=Math.max(f,d?d.responseEnd-c:0),g=Math.max(p,u.startTime-c);o={element:_k(u.element),timeToFirstByte:m,resourceLoadDelay:f-m,resourceLoadDuration:p-f,elementRenderDelay:g-p,navigationEntry:i,lcpEntry:u},u.url&&(o.url=u.url),d&&(o.lcpResourceEntry=d)}}return Object.assign(r,{attribution:o})}(s);t(n)},e)};const kT="@firebase/performance",W_="0.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=W_,lX="FB-PERF-TRACE-START",cX="FB-PERF-TRACE-STOP",z_="FB-PERF-TRACE-MEASURE",qR="_wt_",BR="_fp",VR="_fcp",HR="_fid",GR="_lcp",uX="lcp_element",jR="_inp",dX="inp_interactionTarget",WR="_cls",mX="cls_largestShiftTarget",zR="@firebase/performance/config",QR="@firebase/performance/configexpire",fX="performance",KR="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Kn=new Io(fX,KR,pX);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Ba(KR);Da.logLevel=Bt.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay,YR;class yn{constructor(e){if(this.window=e,!e)throw Kn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=aX,this.onINP=iX,this.onCLS=JY}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,s,n){!this.performance||!this.performance.measure||this.performance.measure(e,s,n)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!yM()?(Da.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):ka()?!0:(Da.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,s){if(!this.PerformanceObserver)return;new this.PerformanceObserver(r=>{for(const o of r.getEntries())s(o)}).observe({entryTypes:[e]})}static getInstance(){return ay===void 0&&(ay=new yn(YR)),ay}}function hX(t){YR=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XR;function gX(t){const e=t.getId();return e.then(s=>{XR=s}),e}function Tk(){return XR}function vX(t){const e=t.getToken();return e.then(s=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e){const s=t.length-e.length;if(s<0||s>1)throw Kn.create("invalid String merger input");const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),e.length>r&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;class Dr{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=wT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=wT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return ly===void 0&&(ly=new Dr),ly}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rm;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(rm||(rm={}));const bX=["firebase_","google_","ga_"],yX=new RegExp("^[a-zA-Z]\\w*$"),_X=40,xX=100;function kX(){const t=yn.getInstance().navigator;return t!=null&&t.serviceWorker?t.serviceWorker.controller?2:3:1}function wX(){switch(yn.getInstance().document.visibilityState){case"visible":return rm.VISIBLE;case"hidden":return rm.HIDDEN;default:return rm.UNKNOWN}}function EX(){const e=yn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function CX(t){return t.length===0||t.length>_X?!1:!bX.some(s=>t.startsWith(s))&&!!t.match(yX)}function SX(t){return t.length!==0&&t.length<=xX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){var e;const s=(e=t.options)===null||e===void 0?void 0:e.appId;if(!s)throw Kn.create("no app id");return s}function TX(t){var e;const s=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!s)throw Kn.create("no project id");return s}function AX(t){var e;const s=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!s)throw Kn.create("no api key");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IX="0.0.1",uo={loggingEnabled:!0},PX="FIREBASE_INSTALLATIONS_AUTH";function MX(t,e){const s=$X();return s?(ET(s),Promise.resolve()):DX(t,e).then(ET).then(n=>RX(n),()=>{})}function $X(){const t=yn.getInstance().localStorage;if(!t)return;const e=t.getItem(QR);if(!e||!NX(e))return;const s=t.getItem(zR);if(s)try{return JSON.parse(s)}catch{return}}function RX(t){const e=yn.getInstance().localStorage;!t||!e||(e.setItem(zR,JSON.stringify(t)),e.setItem(QR,String(Date.now()+Dr.getInstance().configTimeToLive*60*60*1e3)))}const LX="Could not fetch config, will use default configs";function DX(t,e){return vX(t.installations).then(s=>{const n=TX(t.app),r=AX(t.app),o=`https://firebaseremoteconfig.googleapis.com/v1/projects/${n}/namespaces/fireperf:fetch?key=${r}`,i=new Request(o,{method:"POST",headers:{Authorization:`${PX} ${s}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:s,app_id:JR(t.app),app_version:UR,sdk_version:IX})});return fetch(i).then(c=>{if(c.ok)return c.json();throw Kn.create("RC response not ok")})}).catch(()=>{Da.info(LX)})}function ET(t){if(!t)return t;const e=Dr.getInstance(),s=t.entries||{};return s.fpr_enabled!==void 0?e.loggingEnabled=String(s.fpr_enabled)==="true":e.loggingEnabled=uo.loggingEnabled,s.fpr_log_source?e.logSource=Number(s.fpr_log_source):uo.logSource&&(e.logSource=uo.logSource),s.fpr_log_endpoint_url?e.logEndPointUrl=s.fpr_log_endpoint_url:uo.logEndPointUrl&&(e.logEndPointUrl=uo.logEndPointUrl),s.fpr_log_transport_key?e.transportKey=s.fpr_log_transport_key:uo.transportKey&&(e.transportKey=uo.transportKey),s.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(s.fpr_vc_network_request_sampling_rate):uo.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=uo.networkRequestsSamplingRate),s.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(s.fpr_vc_trace_sampling_rate):uo.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=uo.tracesSamplingRate),e.logTraceAfterSampling=CT(e.tracesSamplingRate),e.logNetworkAfterSampling=CT(e.networkRequestsSamplingRate),t}function NX(t){return Number(t)>Date.now()}function CT(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ak=1,cy;function ZR(t){return Ak=2,cy=cy||FX(t),cy}function OX(){return Ak===3}function FX(t){return UX().then(()=>gX(t.installations)).then(e=>MX(t,e)).then(()=>ST(),()=>ST())}function UX(){const t=yn.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const s=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",s),e())};t.addEventListener("readystatechange",s)}else e()})}function ST(){Ak=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=10*1e3,qX=5.5*1e3,BX=1e3,tL=3;let hh=tL,Sl=[],TT=!1;function VX(){TT||(Ik(qX),TT=!0)}function Ik(t){setTimeout(()=>{hh<=0||(Sl.length>0&&sL(),Ik(eL))},t)}function sL(){const t=Sl.splice(0,BX),e=t.map(n=>({source_extension_json_proto3:n.message,event_time_ms:String(n.eventTime)})),s={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Dr.getInstance().logSource,log_event:e};HX(s).then(()=>{hh=tL}).catch(()=>{Sl=[...t,...Sl],hh--,Da.info(`Tries left: ${hh}.`),Ik(eL)})}function HX(t){const e=Dr.getInstance().getFlTransportFullUrl(),s=JSON.stringify(t);return navigator.sendBeacon&&navigator.sendBeacon(e,s)?Promise.resolve():fetch(e,{method:"POST",body:s,keepalive:!0}).then()}function GX(t){if(!t.eventTime||!t.message)throw Kn.create("invalid cc log");Sl=[...Sl,t]}function jX(t){return(...e)=>{const s=t(...e);GX({message:s,eventTime:Date.now()})}}function WX(){for(;Sl.length>0;)sL()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om;function nL(t,e){om||(om={send:jX(KX),flush:WX}),om.send(t,e)}function _p(t){const e=Dr.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||yn.getInstance().requiredApisAvailable()&&(OX()?uy(t):ZR(t.performanceController).then(()=>uy(t),()=>uy(t)))}function zX(){om&&om.flush()}function uy(t){if(!Tk())return;const e=Dr.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||nL(t,1)}function QX(t){const e=Dr.getInstance();if(!e.instrumentationEnabled)return;const s=t.url,n=e.logEndPointUrl.split("?")[0],r=e.flTransportEndpointUrl.split("?")[0];s===n||s===r||!e.loggingEnabled||!e.logNetworkAfterSampling||nL(t,0)}function KX(t,e){return e===0?YX(t):XX(t)}function YX(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},s={application_info:rL(t.performanceController.app),network_request_metric:e};return JSON.stringify(s)}function XX(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const s=t.getAttributes();Object.keys(s).length!==0&&(e.custom_attributes=s);const n={application_info:rL(t.performanceController.app),trace_metric:e};return JSON.stringify(n)}function rL(t){return{google_app_id:JR(t),app_instance_id:Tk(),web_app_info:{sdk_version:UR,page_url:yn.getInstance().getUrl(),service_worker_status:kX(),visibility_state:wX(),effective_connection_type:EX()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e){const s=e;if(!s||s.responseStart===void 0)return;const n=yn.getInstance().getTimeOrigin(),r=Math.floor((s.startTime+n)*1e3),o=s.responseStart?Math.floor((s.responseStart-s.startTime)*1e3):void 0,i=Math.floor((s.responseEnd-s.startTime)*1e3),c=s.name&&s.name.split("?")[0],u={performanceController:t,url:c,responsePayloadBytes:s.transferSize,startTimeUs:r,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:i};QX(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX=100,ZX="_",eJ=[BR,VR,HR,GR,WR,jR];function tJ(t,e){return t.length===0||t.length>JX?!1:e&&e.startsWith(qR)&&eJ.indexOf(t)>-1||!t.startsWith(ZX)}function sJ(t){const e=Math.floor(t);return e<t&&Da.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,s,n=!1,r){this.performanceController=e,this.name=s,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=yn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${lX}-${this.randomId}-${this.name}`,this.traceStopMark=`${cX}-${this.randomId}-${this.name}`,this.traceMeasure=r||`${z_}-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Kn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Kn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),_p(this)}record(e,s,n){if(e<=0)throw Kn.create("nonpositive trace startTime",{traceName:this.name});if(s<=0)throw Kn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(s*1e3),this.startTimeUs=Math.floor(e*1e3),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const r of Object.keys(n.metrics))isNaN(Number(n.metrics[r]))||(this.counters[r]=Math.floor(Number(n.metrics[r])));_p(this)}incrementMetric(e,s=1){this.counters[e]===void 0?this.putMetric(e,s):this.putMetric(e,this.counters[e]+s)}putMetric(e,s){if(tJ(e,this.name))this.counters[e]=sJ(s??0);else throw Kn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,s){const n=CX(e),r=SX(s);if(n&&r){this.customAttributes[e]=s;return}if(!n)throw Kn.create("invalid attribute name",{attributeName:e});if(!r)throw Kn.create("invalid attribute value",{attributeValue:s})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),s=e&&e[0];s&&(this.durationUs=Math.floor(s.duration*1e3),this.startTimeUs=Math.floor((s.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,s,n,r,o){const i=yn.getInstance().getUrl();if(!i)return;const c=new jm(e,qR+i,!0),u=Math.floor(yn.getInstance().getTimeOrigin()*1e3);c.setStartTime(u),s&&s[0]&&(c.setDuration(Math.floor(s[0].duration*1e3)),c.putMetric("domInteractive",Math.floor(s[0].domInteractive*1e3)),c.putMetric("domContentLoadedEventEnd",Math.floor(s[0].domContentLoadedEventEnd*1e3)),c.putMetric("loadEventEnd",Math.floor(s[0].loadEventEnd*1e3)));const d="first-paint",m="first-contentful-paint";if(n){const f=n.find(g=>g.name===d);f&&f.startTime&&c.putMetric(BR,Math.floor(f.startTime*1e3));const p=n.find(g=>g.name===m);p&&p.startTime&&c.putMetric(VR,Math.floor(p.startTime*1e3)),o&&c.putMetric(HR,Math.floor(o*1e3))}this.addWebVitalMetric(c,GR,uX,r.lcp),this.addWebVitalMetric(c,WR,mX,r.cls),this.addWebVitalMetric(c,jR,dX,r.inp),_p(c),zX()}static addWebVitalMetric(e,s,n,r){r&&(e.putMetric(s,Math.floor(r.value*1e3)),r.elementAttribution&&e.putAttribute(n,r.elementAttribution))}static createUserTimingTrace(e,s){const n=new jm(e,s,!1,s);_p(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={},IT=!1,oL;function PT(t){Tk()&&(setTimeout(()=>rJ(t),0),setTimeout(()=>nJ(t),0),setTimeout(()=>oJ(t),0))}function nJ(t){const e=yn.getInstance(),s=e.getEntriesByType("resource");for(const n of s)AT(t,n);e.setupObserver("resource",n=>AT(t,n))}function rJ(t){const e=yn.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>dy(t)):e.document.addEventListener("unload",()=>dy(t)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&dy(t)}),e.onFirstInputDelay&&e.onFirstInputDelay(s=>{oL=s}),e.onLCP(s=>{var n;gh.lcp={value:s.value,elementAttribution:(n=s.attribution)===null||n===void 0?void 0:n.element}}),e.onCLS(s=>{var n;gh.cls={value:s.value,elementAttribution:(n=s.attribution)===null||n===void 0?void 0:n.largestShiftTarget}}),e.onINP(s=>{var n;gh.inp={value:s.value,elementAttribution:(n=s.attribution)===null||n===void 0?void 0:n.interactionTarget}})}function oJ(t){const e=yn.getInstance(),s=e.getEntriesByType("measure");for(const n of s)MT(t,n);e.setupObserver("measure",n=>MT(t,n))}function MT(t,e){const s=e.name;s.substring(0,z_.length)!==z_&&jm.createUserTimingTrace(t,s)}function dy(t){if(!IT){IT=!0;const e=yn.getInstance(),s=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");setTimeout(()=>{jm.createOobTrace(t,s,n,gh,oL)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e,s){this.app=e,this.installations=s,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),yn.getInstance().requiredApisAvailable()?mx().then(s=>{s&&(VX(),ZR(this).then(()=>PT(this),()=>PT(this)),this.initialized=!0)}).catch(s=>{Da.info(`Environment doesn't support IndexedDB: ${s}`)}):Da.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Dr.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Dr.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Dr.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Dr.getInstance().dataCollectionEnabled}}const aJ="[DEFAULT]";function lJ(t=Lu()){return t=Ft(t),Po(t,"performance").getImmediate()}const cJ=(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),n=t.getProvider("installations-internal").getImmediate();if(s.name!==aJ)throw Kn.create("FB not default");if(typeof window>"u")throw Kn.create("no window");hX(window);const r=new iJ(s,n);return r._init(e),r};function uJ(){qn(new Ln("performance",cJ,"PUBLIC")),qs(kT,W_),qs(kT,W_,"esm2017")}uJ();const iL=vi.initializeApp({apiKey:"AIzaSyB9I7pYK5TndAgqWDt7mB7h7U1cYZfGmao",authDomain:"idleantfarm-v2.firebaseapp.com",projectId:"idleantfarm-v2",storageBucket:"idleantfarm-v2.firebasestorage.app",messagingSenderId:"895441338329",appId:"1:895441338329:web:3b848fba758d25358563c8",measurementId:"G-FM1KHXL0R0"}),xp=uK();GY();lJ(iL);function Pk(){const t=Y(null),e=Y(!0),s=Y(null);let n=null;return Et(()=>{n=vi.auth().onAuthStateChanged(i=>{t.value=i,e.value=!1,s.value=null},i=>{s.value=i.message,e.value=!1})}),ar(()=>{n&&n()}),{currentUser:t,isLoading:e,error:s,signInWithGoogle:async()=>{try{e.value=!0,s.value=null;const i=new vi.auth.GoogleAuthProvider;return i.addScope("email"),(await vi.auth().signInWithPopup(i)).user}catch(i){return s.value=i.message,console.error("Google sign in failed:",i),null}finally{e.value=!1}},signOut:async()=>{try{return e.value=!0,s.value=null,await vi.auth().signOut(),!0}catch(i){return s.value=i.message,console.error("Sign out failed:",i),!1}finally{e.value=!1}}}}const Hu=Es("antMorale",()=>{const t=Y(100),e=Y(100),s=Y(.01),n=Y(5),r=q(()=>{const m=.3999999999999999/e.value;return l(.8+t.value*m)});function o(d){const m=d??n.value;t.value=Math.min(e.value,t.value+m)}function i(d=1){const m=s.value*d;t.value=Math.max(0,t.value-m)}return{morale:t,maxMorale:e,moraleDecayRate:s,moraleBoostAmount:n,moraleBoostMultiplier:r,increaseMorale:o,decreaseMorale:i,getState:()=>({morale:t.value,maxMorale:e.value,moraleDecayRate:s.value,moraleBoostAmount:n.value}),loadState:d=>{d.morale!==void 0&&(t.value=d.morale),d.maxMorale!==void 0&&(e.value=d.maxMorale),d.moraleDecayRate!==void 0&&(s.value=d.moraleDecayRate),d.moraleBoostAmount!==void 0&&(n.value=d.moraleBoostAmount)}}}),kp="idle-ant-farm-save",dJ=6e4,mJ=2e3,$T=3600,RT=3e5*3,wp=3e5,Tr=Es("saveSystem",()=>{const t=Ht(),{currentUser:e,isLoading:s}=Pk(),n=Y(!1);dt(s,Ae=>{Ae||(n.value=!0,Qe("Firebase auth state initialized, currentUser:",e.value?"logged in":"not logged in"))});const r=async()=>!n.value&&s.value?(Qe(),new Promise(Ae=>{const We=dt([s,n],([nt,ot])=>{!nt&&ot&&(Qe(),We(),Ae())})})):Promise.resolve(),o=Y(!0),i=Y(!0),c=Y(!0),u=Y(!1),d=Y(100),m=Y(!1),f=Y(!0),p=Y(!0),g=Y(Date.now()),w=Y(Date.now()),C=Y(null),E=Y(Date.now()),k=Y(0),A=Y(!1),S=Y(!1),T=Y(Date.now()),R=Y(!1),L=Y(!1),P=Y(!1),I=Y(0),D=Y(0),U=Y(0),M=Y(!1),x=Y(null),$=Y(new Se(0)),Z=Y(new Se(0)),me=[],re=Y([]);let J=null,le=null,se=null;const z=()=>({gameStore:Vn(),generatorStore:Ht(),prestigeStore:St(),generatorUpgradeStore:tn(),inventoryStore:hn(),adventureStore:ir(),tourStore:G0(),progressionStore:Cr(),filterStore:z1(),achievementStore:Or(),pheromoneEssenceStore:Ks(),pheromoneShopStore:Ml(),colonyRushStore:Am(),wikiStore:Ri(),questStore:Qs(),megaAntStore:Wt(),aphidFarmStore:Ls(),bossStore:kn(),collectibleStore:uf(),dailyRewardStore:hf(),neurotrailsStore:Fr(),antMoraleStore:Hu()}),ce=()=>{const Ae=z(),We=Date.now();return C.value||(C.value=We,Qe(` First save time set: ${new Date(C.value).toLocaleString()}`)),{settings:{autoSaveEnabled:o.value,offlineProgressEnabled:i.value,autoEnableGeneratorsAfterPrestige:c.value,processAllTicksIndividually:u.value,offlineTickBatchSize:d.value,confirmMaxUpgradePurchase:m.value,confirmEvolution:f.value,cloudSyncEnabled:p.value},lastSaveTime:We,firstSaveTime:C.value,lastManualCloudSaveTime:k.value,gameStore:Ae.gameStore.getState(),generatorStore:Ae.generatorStore.getState(),prestigeStore:Ae.prestigeStore.getState(),generatorUpgradeStore:Ae.generatorUpgradeStore.getState(),inventoryStore:Ae.inventoryStore.getState(),adventureStore:Ae.adventureStore.getState(),tourStore:Ae.tourStore.collectState(),progressionStore:Ae.progressionStore.getState(),filterStore:Ae.filterStore.getState(),achievementStore:Ae.achievementStore.getState(),pheromoneEssenceStore:Ae.pheromoneEssenceStore.getState(),pheromoneShopStore:Ae.pheromoneShopStore.getState(),colonyRush:Ae.colonyRushStore.getState(),wikiStore:Ae.wikiStore.getState(),questStore:Ae.questStore.getState(),megaAntStore:Ae.megaAntStore.getState(),aphidFarmStore:Ae.aphidFarmStore.getState(),bossStore:Ae.bossStore.getState(),collectibleStore:Ae.collectibleStore.getState(),dailyReward:Ae.dailyRewardStore.getState(),neurotrails:Ae.neurotrailsStore.getState(),antMorale:Ae.antMoraleStore.getState()}},pe=async Ae=>{if(!Ae)return!1;try{const We=z();return Ae.settings&&(o.value=Ae.settings.autoSaveEnabled??!0,i.value=Ae.settings.offlineProgressEnabled??!0,c.value=Ae.settings.autoEnableGeneratorsAfterPrestige??!0,u.value=Ae.settings.processAllTicksIndividually??!1,d.value=Ae.settings.offlineTickBatchSize??100,m.value=Ae.settings.confirmMaxUpgradePurchase??!1,f.value=Ae.settings.confirmEvolution??!0,p.value=Ae.settings.cloudSyncEnabled??!0),Ae.lastSaveTime&&(g.value=Ae.lastSaveTime),Ae.lastManualCloudSaveTime&&(k.value=Ae.lastManualCloudSaveTime,Qe(` Loaded last manual cloud save time: ${new Date(k.value).toLocaleString()}, cooldown remaining: ${Math.ceil((wp-(Date.now()-k.value))/1e3)}s`)),Ae.firstSaveTime&&!C.value&&(C.value=Ae.firstSaveTime,Qe(` Loaded first save time: ${new Date(C.value??0).toLocaleString()}`)),Ae.gameStore&&await Promise.resolve(We.gameStore.loadState(Ae.gameStore)),Ae.generatorStore&&await Promise.resolve(We.generatorStore.loadState(Ae.generatorStore)),Ae.prestigeStore&&await Promise.resolve(We.prestigeStore.loadState(Ae.prestigeStore)),Ae.generatorUpgradeStore&&await Promise.resolve(We.generatorUpgradeStore.loadState(Ae.generatorUpgradeStore)),Ae.inventoryStore&&await Promise.resolve(We.inventoryStore.loadState(Ae.inventoryStore)),Ae.adventureStore&&await Promise.resolve(We.adventureStore.loadState(Ae.adventureStore)),Ae.tourStore&&await Promise.resolve(We.tourStore.applyState(Ae.tourStore)),Ae.progressionStore&&await Promise.resolve(We.progressionStore.loadState(Ae.progressionStore)),Ae.filterStore&&await Promise.resolve(We.filterStore.loadState(Ae.filterStore)),Ae.achievementStore&&await Promise.resolve(We.achievementStore.loadState(Ae.achievementStore)),Ae.pheromoneEssenceStore&&await Promise.resolve(We.pheromoneEssenceStore.loadState(Ae.pheromoneEssenceStore)),Ae.pheromoneShopStore&&await Promise.resolve(We.pheromoneShopStore.loadState(Ae.pheromoneShopStore)),Ae.colonyRush&&await Promise.resolve(We.colonyRushStore.loadState(Ae.colonyRush)),Ae.wikiStore&&await Promise.resolve(We.wikiStore.loadState(Ae.wikiStore)),Ae.questStore&&await Promise.resolve(We.questStore.loadState(Ae.questStore)),Ae.megaAntStore&&await Promise.resolve(We.megaAntStore.loadState(Ae.megaAntStore)),Ae.aphidFarmStore&&await Promise.resolve(We.aphidFarmStore.loadState(Ae.aphidFarmStore)),Ae.bossStore&&await Promise.resolve(We.bossStore.loadState(Ae.bossStore)),Ae.collectibleStore&&await Promise.resolve(We.collectibleStore.loadState(Ae.collectibleStore)),Ae.dailyReward&&await Promise.resolve(We.dailyRewardStore.loadState(Ae.dailyReward)),Ae.neurotrails&&await Promise.resolve(We.neurotrailsStore.loadState(Ae.neurotrails)),Ae.antMorale&&await Promise.resolve(We.antMoraleStore.loadState(Ae.antMorale)),Qe(" Game state loaded successfully"),w.value=Date.now(),!0}catch(We){return ks("Error applying saved state:",We),!1}},_e=async(Ae=!1)=>{try{if(await r(),!Ae&&j.value)return Qe("Skipping auto cloud save while conflict resolution or offline calculation is in progress"),!1;if(!e.value||!Ae&&!p.value||A.value)return!1;if(Ae){const Mt=Date.now()-k.value;if(Mt<wp)return Qe(`Manual cloud save rejected: cooldown active (${Math.ceil((wp-Mt)/1e3)} seconds remaining)`),!1}A.value=!0;const We=ce(),nt=e.value.uid,ot=JSON.stringify(We),_t=btoa(ot);return await SK(bp(xp,"saves",nt),{data:_t,lastSaveTime:We.lastSaveTime,version:1}),E.value=Date.now(),Ae&&(k.value=Date.now()),Qe(`Game saved to cloud successfully${Ae?" (manual save)":""}`),!0}catch(We){return ks("Error saving game to cloud:",We),!1}finally{A.value=!1}},Ee=async()=>{try{if(await r(),!e.value||S.value)return!1;S.value=!0;const Ae=e.value.uid,We=bp(xp,"saves",Ae),nt=await ty(We);if(nt.exists()){const ot=nt.data(),_t=ot.data,Mt=atob(_t),ut=JSON.parse(Mt);return E.value=ot.lastSaveTime||Date.now(),await pe(ut),Qe("Game loaded from cloud successfully"),!0}else return Qe("No cloud save found"),!1}catch(Ae){return ks("Error loading game from cloud:",Ae),!1}finally{S.value=!1}},Ue=async(Ae,We,nt=!1)=>{if(Ae<=0){Qe();return}Qe();const ot=nt?1:20;let _t=0;We.gameStore.tickDuration;const Mt=We.prestigeStore.getUpgradeCount("unlockAdventure").gt(0);let ut=null;if(Mt&&!nt&&(Qe(),ut=We.adventureStore.calculateOfflineCombatProgress(Ae*2),Qe(`[OfflineProgress] Adventure results: ${ut.kills} kills, ${ut.totalFoodGained.toString()} food, ${ut.totalEssenceGained.toString()} essence`),ut.kills>0)){if(We.generatorStore.food=We.generatorStore.food.add(ut.totalFoodGained),We.pheromoneEssenceStore.addPheromoneEssence(ut.totalEssenceGained,!0),We.questStore.activeQuest){const Nt=ut.kills+ut.totalDoubleKills*2,Xt=We.adventureStore.selectedBugId;if(Xt){if(We.questStore.updateDefeatBugProgress(Xt,Nt),We.bossStore.recordBugKill(Xt,ut.kills),ut.totalDoubleKills>0){const zt=ut.totalDoubleKills*1;zt>0&&We.bossStore.recordBugKill(Xt,zt)}Qe(`[OfflineProgress] Recorded ${ut.kills+ut.totalDoubleKills*1} total bug kills to bossStore`)}}else if(We.adventureStore.selectedBugId){const Kt=We.adventureStore.selectedBugId;if(We.bossStore.recordBugKill(Kt,ut.kills),ut.totalDoubleKills>0){const Xt=ut.totalDoubleKills*1;Xt>0&&We.bossStore.recordBugKill(Kt,Xt),Qe(`[OfflineProgress] Recorded ${ut.kills+ut.totalDoubleKills*1} total bug kills to bossStore (no active quest)`)}}}for(;_t<Ae;){const Kt=Ae-_t,Nt=Math.min(ot,Kt);if(We.gameStore.tick(Nt,nt),We.prestigeStore.getUpgradeCount("unlockMegaAnt").gt(0)){const zt=We.gameStore.tickDuration,mn=Nt*zt;We.megaAntStore.processOfflineProgress(mn)}We.adventureStore.tick(Nt),We.adventureStore.tick(Nt),_t+=Nt;const Xt=Math.min(D.value+Nt,I.value);if(D.value=Xt,_t%Math.max(1,Math.floor(Ae/10))===0||_t===Ae){const zt=Math.floor(D.value/I.value*100);Qe(`[OfflineProgress] Precise processing: ${zt}% total (${D.value}/${I.value})`)}await new Promise(zt=>setTimeout(zt,0))}Qe()},ze=async(Ae,We)=>{if(Ae<=0)return Qe(),Promise.resolve();if(Qe(),We.prestigeStore.getUpgradeCount("unlockAdventure").gt(0)){Qe();const ot=We.adventureStore.calculateOfflineCombatProgress(Ae*2);if(Qe(`[OfflineProgress] Adventure batch results: ${ot.kills} kills, ${ot.totalFoodGained.toString()} food, ${ot.totalEssenceGained.toString()} essence`),ot.kills>0){if(We.generatorStore.food=We.generatorStore.food.add(ot.totalFoodGained),We.pheromoneEssenceStore.addPheromoneEssence(ot.totalEssenceGained,!0),We.questStore.activeQuest){const Mt=ot.kills+ot.totalDoubleKills*2,ut=We.adventureStore.selectedBugId;if(ut){if(We.questStore.updateDefeatBugProgress(ut,Mt),We.bossStore.recordBugKill(ut,ot.kills),ot.totalDoubleKills>0){const Kt=ot.totalDoubleKills*1;Kt>0&&We.bossStore.recordBugKill(ut,Kt)}Qe(`[OfflineProgress] Batch recorded ${ot.kills+ot.totalDoubleKills*1} total bug kills to bossStore`)}}else if(We.adventureStore.selectedBugId){const _t=We.adventureStore.selectedBugId;if(We.bossStore.recordBugKill(_t,ot.kills),ot.totalDoubleKills>0){const ut=ot.totalDoubleKills*1;ut>0&&We.bossStore.recordBugKill(_t,ut),Qe(`[OfflineProgress] Batch recorded ${ot.kills+ot.totalDoubleKills*1} total bug kills to bossStore (no active quest)`)}}}try{Qs().tick()}catch(_t){console.error("Error processing quests:",_t)}}return new Promise(ot=>{const _t=d.value;let Mt=0;const ut=()=>{const Kt=Ae-Mt,Nt=Math.min(_t,Kt);if(Nt<=0){Qe(),ot();return}if(We.gameStore.tick(Nt),We.prestigeStore.getUpgradeCount("unlockMegaAnt").gt(0)){const zt=We.gameStore.tickDuration,mn=Nt*zt;We.megaAntStore.processOfflineProgress(mn)}if(We.prestigeStore.getUpgradeCount("unlockColony").gt(0))try{Qe(`[OfflineProgress] Processing Neurotrails for ${Nt} ticks in batch mode`),We.neurotrailsStore.tick(Nt)}catch(zt){console.error("Error processing Neurotrails during offline progress:",zt)}We.aphidFarmStore.update(Nt),Qe(),Mt+=Nt;const Xt=Math.min(D.value+Nt,I.value);if(D.value=Xt,Mt%Math.max(1,Math.floor(Ae/10))===0||Mt===Ae){const zt=Math.floor(D.value/I.value*100);Qe(`[OfflineProgress] Batch processing: ${zt}% total (${D.value}/${I.value})`)}setTimeout(ut,0)};ut()})},Re=(Ae,We=!1)=>new Promise(async nt=>{if(!i.value){nt(null);return}await r();const ot=We?Ae:(Date.now()-Ae)/1e3;if(Qe(`Calculating offline progress for ${ot.toFixed(1)} seconds`),ot<60){nt(null);return}if(Ce.value&&Oe.value&&ve.value)return Qe(),x.value={localSaveTime:Oe.value.lastSaveTime||0,cloudSaveTime:ve.value.lastSaveTime||0,localState:Oe.value,cloudState:ve.value},M.value=!0,nt({pendingConflict:!0,timeParam:Ae,isElapsedTime:We});const _t=1*24*60*60,Mt=Math.min(ot,_t);ot>_t&&Qe();const ut=z(),Kt=ut.gameStore.tickDuration,Nt=Math.floor(Mt/Kt);if(Nt<=0){nt(null);return}Qe(),Fe(),R.value=!0;const Xt=Am();P.value=!Xt.isProcessingRush,setTimeout(async()=>{if(I.value=Nt,D.value=0,U.value=Mt,L.value=!1,Qe(),u.value)Qe(),await Ue(Nt,ut,!0);else if(Mt<$T)Qe(`[OfflineProgress] Using precise tick processing for ${Mt.toFixed(1)}s (< 1 hour)`),await Ue(Nt,ut);else{Qe(`[OfflineProgress] Using hybrid processing for ${Mt.toFixed(1)}s (>= 1 hour)`);const zt=Math.floor($T/Kt),mn=Math.max(0,Nt-zt);if(mn+zt!==Nt){Qe();const io=Nt-zt;Qe(),Qe(),io>0&&(Qe(),await ze(io,ut)),Qe()}else Qe(),mn>0&&(Qe(),await ze(mn,ut)),Qe();zt>0&&(Qe(),await Ue(zt,ut)),Qe()}$e(nt)},50)}),$e=Ae=>{Qe(),D.value>I.value&&(Qe(` Warning: Processed ticks (${D.value}) exceeds total ticks (${I.value}). Capping to total.`),D.value=I.value),R.value=!1,L.value=!0,Qe(),ft();const We=t.food.sub($.value);Qe(` Food generated during offline progress: ${We.toString()}`),Qe(` Food values: initial=${$.value.toString()}, final=${t.food.toString()}`);const nt=Ls(),ot=nt.honeydew.sub(Z.value);Qe(` Honeydew generated during offline progress: ${ot.toString()}`),Qe(` Honeydew values: initial=${Z.value.toString()}, final=${nt.honeydew.toString()}`),fe(),Qe(),Qe(),Ae({elapsedTime:U.value,ticks:I.value,processedTicks:D.value,foodGenerated:We,honeydewGenerated:ot})},Ce=Y(!1),Oe=Y(null),ve=Y(null),fe=()=>{try{if(j.value)return Qe("Skipping auto-save while conflict resolution or offline calculation is in progress"),!1;const Ae=ce(),We=JSON.stringify(Ae),nt=btoa(We);return localStorage.setItem(kp,nt),g.value=Ae.lastSaveTime,Qe("Game saved locally successfully (base64)"),p.value&&e.value&&Date.now()-E.value>RT&&_e().catch(ot=>ks("Cloud save failed:",ot)),!0}catch(Ae){return ks("Error saving game:",Ae),!1}},X=(Ae=!1)=>new Promise(We=>{try{g.value=Ae?Date.now():g.value;const nt=ce(),ot=JSON.stringify(nt),_t=btoa(ot);localStorage.setItem(kp,_t),Qe("Game saved locally successfully (base64)"),Ae&&p.value&&e.value&&_e(!0).catch(Mt=>ks("Cloud save failed:",Mt)),We(!0)}catch(nt){ks("Error saving game:",nt),We(!1)}}),H=async Ae=>{try{await r(),Ce.value=!1;const We=Ae?Oe.value:ve.value;if(!We)return ks("No save data available to resolve conflict"),!1;const nt=await pe(We);if(nt&&(Ae&&e.value?(await _e(),Qe("Local save pushed to cloud after conflict resolution")):Ae||(fe(),Qe("Cloud save saved locally after conflict resolution")),i.value)){const ot=We.lastSaveTime||Date.now();Qe(`Calculating offline progress from resolved save time: ${new Date(ot).toLocaleString()}`),await Re(ot)}return Oe.value=null,ve.value=null,nt}catch(We){return ks("Error resolving save conflict:",We),!1}},W=async Ae=>{try{if(await r(),M.value=!1,!x.value)return ks("No conflict data available to resolve offline conflict"),!1;const We=Ae?x.value.localState:x.value.cloudState;if(!We)return ks("No save data available to resolve offline conflict"),!1;const nt=await pe(We);if(nt){Ae&&e.value?(await _e(),Qe("Local save pushed to cloud after offline conflict resolution")):Ae||(fe(),Qe("Cloud save saved locally after offline conflict resolution"));const ot=We.lastSaveTime||Date.now();Qe(`Continuing with offline progress calculation from resolved save time: ${new Date(ot).toLocaleString()}`),await Re(ot)}return Ce.value=!1,Oe.value=null,ve.value=null,x.value=null,nt}catch(We){return ks("Error resolving offline conflict:",We),!1}},ge=async()=>{var Ae,We;try{await r();let nt=null,ot=null,_t=0,Mt=0;const ut=localStorage.getItem(kp);if(ut){try{nt=JSON.parse(ut),Qe("Loaded local save data as JSON (legacy format)")}catch{try{const zt=atob(ut);nt=JSON.parse(zt),Qe("Loaded local save data as base64 (new format)")}catch(zt){ks("Failed to parse local save data:",zt)}}nt&&(_t=nt.lastSaveTime||0)}if(console.log("currentUser",e.value),e.value&&p.value)try{const Xt=e.value.uid,zt=bp(xp,"saves",Xt),mn=await ty(zt);if(console.log("docSnap",mn),mn.exists()){const hs=mn.data(),io=hs.data,Ni=atob(io);ot=JSON.parse(Ni),Mt=hs.lastSaveTime||0,Qe("Loaded cloud save data")}}catch(Xt){ks("Error loading cloud save:",Xt)}if(nt&&ot){const zt=Math.abs(_t-Mt)>1e4,mn=((Ae=nt.gameStore)==null?void 0:Ae.totalTicks)&&new Se(nt.gameStore.totalTicks).gt(0),hs=((We=ot.gameStore)==null?void 0:We.totalTicks)&&new Se(ot.gameStore.totalTicks).gt(0);if(zt&&mn&&hs)return Oe.value=nt,ve.value=ot,Ce.value=!0,x.value={localSaveTime:_t,cloudSaveTime:Mt,localState:nt,cloudState:ot},M.value=!0,P.value=!1,Qe("Save conflict detected, waiting for user resolution"),{conflict:!0,localSaveTime:_t,cloudSaveTime:Mt,localState:nt,cloudState:ot}}let Kt=null;if(nt&&ot?Mt>_t?(Qe("Using cloud save (more recent than local)"),Kt=ot):(Qe("Using local save (more recent than cloud)"),Kt=nt):nt&&!ot?(Qe("Using local save (no cloud save available)"),Kt=nt):ot&&(Qe("Using cloud save (no local save available)"),Kt=ot),!Kt)return Qe("No save data found (local or cloud)"),!1;Kt.firstSaveTime||(Kt.firstSaveTime=Date.now(),Qe(` Setting missing firstSaveTime to now: ${new Date(Kt.firstSaveTime).toLocaleString()}`));const Nt=await pe(Kt);if(Nt&&(Kt===ot&&nt&&Mt>_t?(fe(),Qe("Synced cloud save to local storage")):Kt===nt&&ot&&_t>Mt&&(_e(),Qe("Synced local save to cloud")),i.value)){const Xt=Kt.lastSaveTime||Date.now();Qe(`Calculating offline progress from saved time: ${new Date(Xt).toLocaleString()}`),await Re(Xt)}return Nt}catch(nt){return ks("Error loading game:",nt),!1}},Te=()=>{try{const Ae=ce(),We=JSON.stringify(Ae);return btoa(We)}catch(Ae){return ks("Error exporting save:",Ae),null}},Ie=()=>{try{const Ae=Te();if(!Ae)return!1;const ot=`idle-ant-farm-save-${new Date().toISOString().split("T")[0]}.txt`,_t=new Blob([Ae],{type:"text/plain"}),Mt=window.URL.createObjectURL(_t),ut=document.createElement("a");return ut.href=Mt,ut.download=ot,document.body.appendChild(ut),ut.click(),window.URL.revokeObjectURL(Mt),document.body.removeChild(ut),!0}catch(Ae){return ks("Error exporting save to file:",Ae),!1}},Ne=async Ae=>{try{const We=atob(Ae),nt=JSON.parse(We);return await pe(nt)}catch(We){return ks("Error importing save:",We),!1}},je=async Ae=>{try{return new Promise(async We=>{const nt=new FileReader;nt.onload=async ot=>{var _t;if((_t=ot.target)!=null&&_t.result){const Mt=ot.target.result,ut=await Ne(Mt);We(ut)}else We(!1)},nt.onerror=()=>{ks("Error reading file"),We(!1)},nt.readAsText(Ae)})}catch(We){return ks("Error importing save from file:",We),!1}},N=async()=>{try{if(localStorage.removeItem(kp),e.value){const Ae=bp(xp,"saves",e.value.uid);(await ty(Ae)).exists()&&await TK(Ae)}return window.location.reload(),Qe("Game reset successfully"),!0}catch(Ae){return ks("Error resetting game:",Ae),!1}},ue=H0(()=>{o.value&&!j.value&&fe()},mJ),j=q(()=>P.value||M.value||R.value),B=()=>{J||(J=window.setInterval(()=>{o.value&&!j.value&&fe()},dJ),V(),te())},ie=()=>{J&&(clearInterval(J),J=null),O(),G()},V=()=>{le||(le=window.setInterval(()=>{p.value&&e.value&&!j.value&&_e().catch(Ae=>ks("Cloud save interval error:",Ae))},RT))},O=()=>{le&&(clearInterval(le),le=null)},te=()=>{se||(se=window.setInterval(()=>{T.value=Date.now()},1e3))},G=()=>{se&&(clearInterval(se),se=null)},ne=()=>{o.value=!o.value,o.value&&B(),ue()},he=()=>{i.value=!i.value,ue()},ye=()=>{c.value=!c.value,ue()},ae=()=>{u.value=!u.value,ue()},de=()=>{m.value=!m.value,ue()},Me=()=>{f.value=!f.value,ue()},Le=()=>{p.value?V():O()},it=Ae=>{const We=Math.max(10,Math.min(1e3,Ae));d.value=We,ue()},Ze=async Ae=>{if(Ae<=0)return!1;const We=Ae*60*60;return Qe(),await Re(We,!0),!0},pt=q(()=>((Date.now()-g.value)/1e3).toFixed(0)),ft=()=>{const Ae=t.generators;for(let We=0;We<me.length;We++){const nt=me[We];if(!nt)continue;const ot=Ae.find(_t=>_t.id===nt.id);if(ot){const _t=new Se(ot.count),Mt=_t.sub(nt.beforeCount),Kt=(ot.selfReplicated?new Se(ot.selfReplicated):new Se(0)).sub(nt.selfReplicated);me[We]={...nt,afterCount:_t,generated:Mt,selfReplicated:Kt}}}Qe()},Ve=q(()=>{const Ae=T.value-k.value;return Math.max(0,wp-Ae)}),ke=q(()=>Ve.value===0),Fe=()=>{$.value=new Se(t.food),Qe(` Initial food captured: ${$.value.toString()}`);const Ae=Ls();Z.value=new Se(Ae.honeydew),Qe(` Initial honeydew captured: ${Z.value.toString()}`),me.length=0;const We=t.generators;for(const nt of We)(nt.unlocked||nt.count.gt(0))&&me.push({id:nt.id,name:nt.name,beforeCount:new Se(nt.count),afterCount:new Se(nt.count),generated:new Se(0),selfReplicated:nt.selfReplicated?new Se(nt.selfReplicated):new Se(0),icon:nt.icon});Qe(` Initial generator state captured: ${me.length} generators`),me.length>0&&me[0]&&Qe(" First generator:",{id:me[0].id,count:me[0].beforeCount.toString(),selfReplicated:me[0].selfReplicated.toString()})};return{autoSaveEnabled:o,offlineProgressEnabled:i,autoEnableGeneratorsAfterPrestige:c,processAllTicksIndividually:u,offlineTickBatchSize:d,confirmMaxUpgradePurchase:m,confirmEvolution:f,cloudSyncEnabled:p,hasCheckedAuth:n,lastSaveTime:g,lastLoadTime:w,firstSaveTime:C,timeSinceLastSave:pt,lastCloudSaveTime:E,lastManualCloudSaveTime:k,isCloudSaving:A,isCloudLoading:S,manualCloudSaveCooldownRemaining:Ve,isManualCloudSaveAvailable:ke,isCalculatingOfflineProgress:R,isCalculationComplete:L,showOfflineProgressModal:P,offlineProgressTotalTicks:I,offlineProgressTicksProcessed:D,offlineProgressElapsedTime:U,shouldPauseSaving:j,generatorStats:me,initialFoodAmount:$,initialHoneydewAmount:Z,saveGame:fe,saveGameAsync:X,loadGame:ge,exportSave:Te,exportSaveToFile:Ie,importSave:Ne,importSaveFromFile:je,resetGame:N,saveGameToCloud:_e,loadGameFromCloud:Ee,startAutoSave:B,stopAutoSave:ie,toggleAutoSave:ne,debouncedSave:ue,toggleOfflineProgress:he,toggleAutoEnableGeneratorsAfterPrestige:ye,toggleProcessAllTicksIndividually:ae,toggleConfirmMaxUpgradePurchase:de,toggleConfirmEvolution:Me,toggleCloudSync:Le,setOfflineTickBatchSize:it,calculateOfflineProgress:Re,processRealTicks:Ue,simulateOfflineTime:Ze,captureInitialState:Fe,updateGeneratorStats:ft,getStores:z,calculationTimeouts:re,hasSaveConflict:Ce,localSaveData:Oe,cloudSaveData:ve,resolveSaveConflict:H,resolveOfflineConflict:W,currentTime:T,startClockInterval:te,stopClockInterval:G,showOfflineConflictModal:M,offlineConflictData:x}}),Vn=Es("game",()=>{const t=Y(10),e=Y(1),s=q(()=>{const U=St(),M=U.getUpgradeMultiplier("cycleTimeReduction").toNumber(),x=U.getUpgradeMultiplier("cycleTimeReductionAdvanced").toNumber(),$=U.getUpgradeMultiplier("cycleTimeReductionMaster").toNumber();return Math.max(.1,(t.value-M-x-$)/e.value)}),n=Y(0),r=Y(0),o=Y(0),i=Y(Date.now()),c=Y(!0),u=Y(l(0)),d=Y(l(0)),m=Y(!1),f=q(()=>Math.round(n.value*100)),p=q(()=>Math.round(r.value*100)),g=q(()=>Math.round(o.value*100)),w=q(()=>(s.value*(1-n.value)).toFixed(1)),C=q(()=>(s.value/2*(1-r.value)).toFixed(1)),E=q(()=>(s.value/1.5*(1-o.value)).toFixed(1)),k=q(()=>be(u.value,0)),A=q(()=>be(d.value,0));function S(U=1,M=!1){u.value=u.value.add(U),d.value=d.value.add(U);try{Hu().decreaseMorale(U)}catch(J){console.error("Error processing ant morale decay:",J)}Ht().tick(U);const $=St();$.updateLoopProgress(U),tn().updateWorkerProgress(U);try{Wt().update(U)}catch(J){console.error("Error processing Mega Ant update:",J)}try{Ls().update(U)}catch(J){console.error("Error processing Aphid Farm update:",J)}try{Fr().tick(U)}catch(J){console.error("Error processing Neurotrails update:",J)}try{const J=kn();J.isBossSystemUnlocked&&J.decrementCooldown(U)}catch(J){console.error("Error processing boss cooldown:",J)}Cr().checkProgression();try{Qs().tick(U)}catch(J){console.error("Error processing quests:",J)}try{Or().tick(U)}catch(J){console.error("Error processing achievements:",J)}if($.autoEvolveEnabled&&$.getUpgradeCount("autoEvolve").gt(0)&&$.canEvolve&&($.evolve(),console.log("Auto-Evolved!")),!M){const J=ir();J.tick(U),J.tick(U)}Tr().debouncedSave(),n.value=0,i.value=Date.now()}function T(){if(!c.value)return;const U=Date.now(),M=(U-i.value)/1e3;if(n.value+=M/s.value,St().getUpgradeCount("unlockAdventure").gt(0)){r.value+=M/(s.value/2),r.value>=1&&(ir().tick(),r.value=0);try{const Z=kn();Z.isBossSystemUnlocked&&Z.isBossFightActive&&(o.value+=M/(s.value/1.5),o.value>=1&&(Z.processBossCombatTick(!0),o.value=0))}catch(Z){console.error("Error processing boss combat:",Z)}}n.value>=1&&S(),i.value=U}function R(){c.value=!c.value,c.value&&(i.value=Date.now())}function L(U){e.value=U,console.log(`Game speed set to ${U}x`)}const P=()=>({totalTicks:u.value.toString(),currentEvolutionTicks:d.value.toString(),baseTickDuration:t.value,gameSpeed:e.value,showGameFinishedScreen:m.value}),I=U=>{U.totalTicks&&(u.value=l(U.totalTicks)),U.currentEvolutionTicks&&(d.value=l(U.currentEvolutionTicks)),U.baseTickDuration&&(t.value=U.baseTickDuration),U.gameSpeed&&(e.value=U.gameSpeed),typeof U.showGameFinishedScreen=="boolean"&&(m.value=U.showGameFinishedScreen)};function D(){d.value=l(0)}return{tickDuration:s,tickProgress:n,adventureTickProgress:r,bossTickProgress:o,isRunning:c,totalTicks:u,currentEvolutionTicks:d,showGameFinishedScreen:m,formattedTotalTicks:k,formattedCurrentEvolutionTicks:A,progressPercentage:f,adventureProgressPercentage:p,bossProgressPercentage:g,timeRemaining:w,adventureTimeRemaining:C,bossTimeRemaining:E,gameSpeed:e,setGameSpeed:L,tick:S,updateProgress:T,toggleRunning:R,getState:P,loadState:I,resetEvolutionTicks:D}}),kn=Es("boss",()=>{const t=Ht(),e=Ks(),s=hn(),n=ir(),r=St();sn();const o=Ts(),i=Vn(),c=Y(new Set),u=Y(null),d=Y(null),m=Y([]),f=30,p=Y(null),g=Y(0),w=10,C=Y({}),E=Y(null),k=Y(!1),A=Y(!0),S=Y("comfortable"),T=H=>{const W=ls.findIndex(N=>N.id===H.id),ge=Se.fromNumber(0).add(Se.fromNumber(.05).mul(W)),Te=Se.min(ge,Se.fromNumber(2)),Ne=t.foodPerSecond.mul(Te);return{reward:Se.max(Ne,l("1e6")),percentage:Te}},R=q(()=>r.getUpgradeCount("unlockBossChallenges").gt(0)),L=q(()=>ls),P=q(()=>{if(!u.value)return u.value===null?[]:[ls[0]];const H=ls.findIndex(W=>W.id===u.value);return H===-1?[]:ls.slice(0,H+1)}),I=q(()=>d.value&&ls.find(H=>{var W;return H.id===((W=d.value)==null?void 0:W.bossId)})||null),D=q(()=>d.value!==null),U=q(()=>g.value>0),M=q(()=>`${g.value} ticks`),x=q(()=>{if(!u.value){const ge=ls[0];return Ce(ge)}const H=ls.findIndex(ge=>ge.id===u.value);if(H===-1||H>=ls.length-1)return!1;const W=ls[H+1];return Ce(W)}),$=q(()=>({damage:n.playerDamage,maxHealth:n.playerMaxHealth,defense:n.playerDefense,regen:n.playerRegen})),Z=()=>{if(c.value.size===0)u.value=ls[0].id;else{let H=-1;c.value.forEach(W=>{const ge=ls.findIndex(Te=>Te.id===W);ge>H&&(H=ge)}),H<ls.length-1?u.value=ls[H+1].id:u.value=ls[ls.length-1].id}},me=(H,W="info")=>{const ge=crypto.randomUUID(),Te={timestamp:Date.now()+ge,message:H,type:W};m.value.push(Te),m.value.length>f&&(m.value=m.value.slice(-30))},re=H=>{const W=ls.find(Ne=>Ne.id===H);if(!W){me(`Error: Boss with ID ${H} not found.`,"info");return}const ge=ls.findIndex(Ne=>Ne.id===H),Te=ls.findIndex(Ne=>Ne.id===u.value);if(!(ge<=Te)&&!Ce(W)){me(`You haven't met the requirements to challenge ${W.name} yet. Check the requirements list.`,"info");return}if(U.value){me(`You must wait ${M.value} before challenging a boss again.`,"info");return}d.value={bossId:H,currentHealth:new Se(W.maxHealth)},p.value=new Se($.value.maxHealth),m.value=[],me(`You challenge ${W.name}! (${be(W.damage)} damage, ${be(W.maxHealth)} health)`,"info"),me(`Your stats: ${be($.value.damage)} damage, ${be($.value.maxHealth)} health, ${be($.value.defense)} defense`,"info")},J=H=>{if(!d.value||!p.value)return;const W=I.value;if(!W)return;const ge=p.value;if(p.value=Se.min($.value.maxHealth,p.value.add($.value.regen)),H&&p.value.gt(ge)){const Ne=p.value.minus(ge);Ne.gt(0)&&me(`You regenerate ${be(Ne)} health (${be(p.value)}/${be($.value.maxHealth)} HP)`,"info")}const Te=n.calculateDamage($.value.damage,W.defense);if(d.value.currentHealth=d.value.currentHealth.minus(Te).clamp(0,W.maxHealth),H&&me(`You deal ${be(Te)} damage to ${W.name} (${be(d.value.currentHealth)}/${be(W.maxHealth)} HP)`,"combat"),d.value.currentHealth.lte(0)){le();return}if(W.specialAbilities&&W.specialAbilities.length>0&&H&&Math.random()<.1){const Ne=W.specialAbilities[Math.floor(Math.random()*W.specialAbilities.length)];me(`${W.name} uses ${Ne.name}!`,"combat")}const Ie=n.calculateDamage(W.damage,$.value.defense);p.value=p.value.minus(Ie).clamp(0,$.value.maxHealth),H&&me(`${W.name} deals ${be(Ie)} damage to you (${be(p.value)}/${be($.value.maxHealth)} HP)`,"combat"),p.value.lte(0)&&se()},le=()=>{if(!d.value)return;const H=d.value.bossId,W=ls.find(j=>j.id===H);if(!W){ks("Boss not found during defeat handling",{bossId:H});return}const ge=c.value.has(H);c.value.add(H);const{reward:Te,percentage:Ie}=T(W);t.food=t.food.add(Te);const Ne=Ie.mul(100),je=be(Ne,0);me(`You gained ${be(Te)} food (+${je}% of your food/sec)!`,"reward");const N=ve(W),ue=e.addPheromoneEssence(N);if(me(`You gained ${be(ue)} Pheromone Essence!`,"reward"),W.reward.guaranteedItemId){const j=W.reward.itemChance||1;if(Math.random()<=j){const B=o.getItem(W.reward.guaranteedItemId);s.addItem(W.reward.guaranteedItemId,new Se(1)),me(`You found a rare ${(B==null?void 0:B.name)||W.reward.guaranteedItemId}!`,"reward")}}if(me(`You have defeated ${W.name}!`,"info"),H==="boss_omega_ant"&&!k.value&&(i.showGameFinishedScreen=!0,k.value=!0,me("Endless Mode unlocked! The colony marches on...","reward")),!ge){let j=H;c.value.forEach(ie=>{ls.findIndex(V=>V.id===ie)>ls.findIndex(V=>V.id===j)&&(j=ie)});const B=ls.find(ie=>ls.findIndex(V=>V.id===ie.id)>ls.findIndex(V=>V.id===j));B?(u.value=B.id,me(`You have unlocked the next boss: ${B.name}!`,"info")):me("Congratulations! You've defeated all available bosses!","info")}d.value=null,p.value=null,g.value=w},se=()=>{if(!d.value)return;const H=d.value.bossId,W=ls.find(ge=>ge.id===H);W&&(me(`You have been defeated by ${W.name}!`,"info"),d.value=null,p.value=null,g.value=w)},z=H=>{if(!d.value||d.value.bossId!==H)return 100;const W=ls.find(ge=>ge.id===H);return W?d.value.currentHealth.div(W.maxHealth).mul(100).toNumber():100},ce=()=>!p.value||!$.value.maxHealth?100:p.value.div($.value.maxHealth).mul(100).toNumber(),pe=H=>c.value.has(H),_e=(H=1)=>{g.value>0&&(g.value=Math.max(0,g.value-H),g.value===0&&me("Cooldown has ended! You can now challenge a boss.","info")),!d.value&&!U.value&&E.value&&(ls.find(ge=>ge.id===E.value)?re(E.value):(me(`Repeatable boss ID ${E.value} not found. Clearing setting.`,"info"),Oe(null)))},Ee=H=>{H.defeatedBossIds&&Array.isArray(H.defeatedBossIds)&&(c.value=new Set(H.defeatedBossIds)),typeof H.cooldownTicksRemaining=="number"&&(g.value=H.cooldownTicksRemaining),H.bugKillCounts&&typeof H.bugKillCounts=="object"&&(C.value=H.bugKillCounts),(typeof H.repeatableBossFightId=="string"||H.repeatableBossFightId===null)&&(E.value=H.repeatableBossFightId),typeof H.hasSeenGameFinishedScreen=="boolean"&&(k.value=H.hasSeenGameFinishedScreen),typeof H.showDefeatedBosses=="boolean"&&(A.value=H.showDefeatedBosses),typeof H.bossGridDensity=="string"&&(S.value=H.bossGridDensity),Z()},Ue=()=>({defeatedBossIds:Array.from(c.value),cooldownTicksRemaining:g.value,bugKillCounts:C.value,repeatableBossFightId:E.value,hasSeenGameFinishedScreen:k.value,showDefeatedBosses:A.value,bossGridDensity:S.value}),ze=(H,W=1)=>{C.value[H]||(C.value[H]=0),C.value[H]+=W},Re=H=>C.value[H]||0,$e=()=>Object.values(C.value).reduce((H,W)=>H+W,0),Ce=H=>!H.unlockRequirements||H.unlockRequirements.length===0?!0:H.unlockRequirements.every(W=>{switch(W.type){case"bugKills":return $e()>=W.value;case"specificBugKills":return Re(W.target)>=W.value;case"foodPerSecond":return t.foodPerSecond.gte(W.value);case"bossDeath":return pe(W.target);case"none":return!0;default:return!1}}),Oe=H=>{if(H===null){E.value=null,me("Repeatable boss fight cleared.","info");return}const W=ls.find(ge=>ge.id===H);W&&pe(H)?(E.value=H,me(`${W.name} set as repeatable boss fight.`,"info")):me(W?`Cannot set ${W.name} as repeatable. You must defeat it first.`:`Cannot set unknown boss ID ${H} as repeatable.`,"info")},ve=H=>{const W=ls.findIndex(N=>N.id===H.id),ge=Se.fromNumber(.05).add(Se.fromNumber(.02).mul(W)),Te=Se.min(ge,Se.fromNumber(.5)),Ne=e.pheromoneEssence.mul(Te),je=W>5?l(10):l(1);return Se.max(Ne.floor(),je)};return{defeatedBossIds:c,highestUnlockedBossId:u,currentFight:d,bossLogs:m,playerHealthDuringBossFight:p,cooldownTicksRemaining:g,bugKillCounts:C,repeatableBossFightId:E,hasSeenGameFinishedScreen:k,showDefeatedBosses:A,bossGridDensity:S,allBosses:L,unlockedAndAvailableBosses:P,currentBossData:I,isBossFightActive:D,canChallengeNextBoss:x,isBossSystemUnlocked:R,isBossCooldownActive:U,formattedCooldownTime:M,playerStats:$,initialize:Z,startBossFight:re,processBossCombatTick:J,getBossHealthPercentage:z,getPlayerHealthPercentage:ce,isBossDefeated:pe,loadState:Ee,getState:Ue,addBossLog:me,decrementCooldown:_e,recordBugKill:ze,getBugKillCount:Re,getTotalBugKills:$e,checkBossUnlockRequirements:Ce,setRepeatableBoss:Oe,calculateBossFoodReward:T,calculateBossEssenceReward:ve,setShowDefeatedBosses:H=>{A.value=H},setBossGridDensity:H=>{S.value=H}}}),ir=Es("adventure",()=>{const t=Ht(),e=Hr(),s=hn(),n=Ks(),r=St(),o=z1(),i=sn(),c=Ts(),u=Qs(),d=kn(),m=Ls(),f=uf(),p=q(()=>r.getUpgradeCount("unlockAdventure").gt(0)),g=q(()=>r.getUpgradeCount("unlockAutoQuestAdvance").gt(0)),w=q(()=>{const te=r.getUpgradeCount("doubleKill");return Se.fromNumber(.01).mul(te)}),C=q(()=>{const te=r.getUpgradeCount("doubleKillEffect");return Se.fromNumber(2).mul(te)}),E=te=>{let G=l(1);return r.evolutionUpgrades.filter(ye=>ye.level.gt(0)&&ye.appliesTo.includes(te)).forEach(ye=>{const ae=ye.effect(ye.level);G=G.mul(ae)}),G},k=q(()=>E("damage")),A=q(()=>E("health")),S=q(()=>E("defense")),T=q(()=>E("regen")),R=q(()=>{const te=t.generators[0].count.mul(Se.fromNumber(10)),G=t.generators[0].count,ne=s.totalStats.damage.mul(G),he=te.plus(ne),ae=f.getBoostMultipliers().combatStats.damage||0;return he.mul(k.value).add(ae)}),L=q(()=>{const te=t.generators[0].count.mul(Se.fromNumber(100)),G=t.generators[0].count,ne=s.totalStats.health.mul(G),he=te.plus(ne),ae=f.getBoostMultipliers().combatStats.health||0;return he.mul(A.value).add(ae)}),P=q(()=>{const te=t.generators[0].count,G=t.generators[0].count,ne=s.totalStats.regen.mul(G),he=te.plus(ne),ae=f.getBoostMultipliers().combatStats.regen||0;return he.mul(T.value).add(ae)}),I=q(()=>{const te=t.generators[0].count.mul(Se.fromNumber(10)),G=t.generators[0].count,ne=s.totalStats.defense.mul(G),he=te.plus(ne),ae=f.getBoostMultipliers().combatStats.defense||0;return he.mul(S.value).add(ae)}),D=Y(L.value),U=Y(!0),M=Y(!0),x=Y("safe"),$=Y([]),Z=30,me=Y(!1),re=Y(!1),J=Y(!1),le=Y("combat"),se=Y(!1),z=Y(!1),ce=Y(!1),pe=Y("comfortable"),_e=(te,G)=>{const ne=te.minus(G);return te.gt(0)&&ne.lte(0)?new Se(1):Se.max(ne,new Se(0))},Ee=(te,G="info")=>{const ne={timestamp:Date.now(),message:te,type:G};$.value.push(ne),$.value.length>Z&&($.value=$.value.slice(-30))},Ue=()=>{Ee("You died! Returning to safe training...","info"),D.value=L.value,x.value="safe",N("safe"),me.value=!0},ze=()=>{e.selectedBug&&(e.selectedBug.health=e.selectedBug.maxHealth,Ee(`A new ${e.selectedBug.name} appears with ${be(e.selectedBug.maxHealth)} health!`,"info"))},Re=te=>{const G=e.getBugById(te);return G?_e(R.value,G.defense).gte(G.maxHealth):!1},$e=te=>{const G=e.bugs.findIndex(ne=>ne.id===te);return G===-1||G===e.bugs.length-1?null:e.bugs[G+1].id},Ce=te=>{const G=e.bugs.findIndex(Me=>Me.id===te.id),ne=Se.fromNumber(.1).add(Se.fromNumber(.02).mul(G)),he=Se.min(ne,Se.fromNumber(2)),ae=t.foodPerSecond.mul(he);return{reward:Se.max(ae,Se.fromNumber(10)),percentage:he}},Oe=te=>{const G=e.bugs.findIndex(he=>he.id===te.id),ne=Se.fromNumber(5).mul(Se.pow(1.15,G));return G>50?ne.mul(Se.fromNumber(50+(G-50)*.3)):ne.floor()},ve=te=>{const G=P.value.mul(te);D.value=Se.min(L.value,D.value.add(G))},fe=te=>{var he;if(!e.selectedBug)return!1;if(me.value)return ze(),me.value=!1,!1;if(e.isBugDead)return!1;const G=_e(R.value,e.selectedBug.defense);if(e.attackBug(G),te&&Ee(`You deal ${be(G)} damage to ${e.selectedBug.name} (${be(e.selectedBug.health)}/${be(e.selectedBug.maxHealth)} HP)`,"combat"),e.isBugDead){const ye=u.activeQuest!==null,ae=((he=u.activeQuest)==null?void 0:he.title)||"";return W(e.selectedBug,te),ye&&u.activeQuest===null&&Ee(`Quest completed: ${ae}!`,"reward"),!1}const ne=_e(e.selectedBug.damage,I.value);return Ne(ne),te&&Ee(`${e.selectedBug.name} deals ${be(ne)} damage to you (${be(D.value)}/${be(L.value)} HP)`,"combat"),je.value},X=te=>{const G=e.getRandomDrops();if(G.length===0)return;const ne=G.filter(ye=>!o.isItemFiltered(ye.itemId)),he=G.filter(ye=>o.isItemFiltered(ye.itemId));if(ne.length>0&&ne.forEach(ye=>{s.addItem(ye.itemId,Se.fromNumber(ye.quantity)),te&&Ee(`You found ${ye.quantity}x ${ye.itemId}!`,"reward")}),he.length>0&&s.isAutoSalvageUnlocked&&s.isAutoSalvageEnabled){let ye=l(0);const ae={};he.forEach(de=>{ae[de.itemId]||(ae[de.itemId]=0),ae[de.itemId]+=de.quantity});for(const[de,Me]of Object.entries(ae)){const Le=c.getItem(de);if(!Le)continue;const it=n.calculateBatchSalvageValue(de,Me,Le);ye=ye.add(it)}if(ye.gt(0)){const de=i.getPheromoneGainMultiplier(),Me=n.addPheromoneEssence(ye,!0);if(te)if(de.gt(1)){const Le=be(ye),it=be(Me.sub(ye));Ee(`Auto-salvaged filtered items for ${Le} + ${it} bonus Pheromone Essence!`,"reward")}else Ee(`Auto-salvaged filtered items for ${be(Me)} Pheromone Essence!`,"reward")}}else G.length!==ne.length&&te&&Ee("Some items were filtered out based on your settings.","info")},H=(te,G)=>{if(!te.collectibleDrops||te.collectibleDrops.length===0)return;const ne=e.getRandomCollectibleDrops();ne.length!==0&&ne.forEach(he=>{const ye=f.addCollectible(he);if(ye&&G){const ae=f.getCollectible(he);if(!ae)return;ye.isNew?Ee(`You found a new collectible: ${ae.name}!`,"reward"):ye.leveledUp?Ee(`You found ${ae.name} and it leveled up to level ${ye.level.toString()}!`,"reward"):Ee(`You found ${ae.name} again! (Collection XP increased)`,"reward")}})},W=(te,G)=>{var it;const{reward:ne,percentage:he}=Ce(te);if(t.food=t.food.add(ne),G){const Ze=be(he.mul(100),0);Ee(`You defeated ${te.name} and gained ${be(ne)} food (${Ze}% of your food/trip)!`,"reward")}if(m.hasBugHoneydewDropUpgrade){const Ze=ge(te);m.honeydew=m.honeydew.add(Ze),G&&Ee(`Gained ${be(Ze)} honeydew from bug kill upgrade!`,"reward")}d.recordBugKill(te.id,1);const ye=Oe(te),ae=i.getPheromoneGainMultiplier(),de=n.addPheromoneEssence(ye,!0);if(G)if(ae.gt(1)){const Ze=be(ye),pt=be(de.sub(ye));Ee(`You collected ${Ze} + ${pt} bonus Pheromone Essence (${be(ae)}x multiplier)!`,"reward")}else Ee(`You collected ${be(de)} Pheromone Essence!`,"reward");X(G),H(te,G);let Me=1;if(Math.random()<w.value.toNumber()){G&&Ee(`DOUBLE KILL! (${be(C.value)}x multiplier)`,"reward");const Ze=ne.mul(C.value);t.food=t.food.add(Ze);const pt=ye.mul(C.value),ft=n.addPheromoneEssence(pt);if(m.hasBugHoneydewDropUpgrade){const ke=l(1).mul(C.value);m.honeydew=m.honeydew.add(ke),G&&Ee(`Double kill bonus: +${be(ke)} honeydew!`,"reward")}const Ve=C.value.toNumber()-1;if(Ve>1&&d.recordBugKill(te.id,Ve),G){let ke=`Double kill bonus: +${be(Ze)} food and +${be(ft)} Pheromone Essence`;if(m.hasBugHoneydewDropUpgrade){const Fe=l(1).mul(C.value);ke+=` and +${be(Fe)} honeydew!`}else ke+="!";Ee(ke,"reward")}X(G),H(te,G),Me=2*C.value.toNumber()}try{if(u.activeQuest){const Ze=u.activeQuest.goals.filter(pt=>pt.type===Ws.KILL_BUGS);if(Ze.length>0)for(const pt of Ze){const ft=!pt.target,Ve=pt.target&&te.id===pt.target,ke=["bug_slayer_initiate","extreme_bug_hunter"].includes(u.activeQuest.id)||u.activeQuest.id.includes("exterminator_");if(ft||Ve||ke){let Fe=pt.currentAmount instanceof Se?pt.currentAmount:l(pt.currentAmount||0);if(Fe=Fe.add(Me),pt.currentAmount=Fe,G){const Ae=pt.requiredAmount instanceof Se?pt.requiredAmount:l(pt.requiredAmount||0);Ee(ft||ke?`Quest progress: ${be(Fe)}/${be(Ae)} total kills`:`Quest progress: ${be(Fe)}/${be(Ae)} ${te.name} kills`,"info")}}}u.tick()}}catch(Ze){ks("Error updating quest progress for bug defeat:",Ze)}let Le=!1;if(J.value&&u.activeQuest&&g.value){const Ze=V();if(Ze&&Ze!==x.value){const pt=e.getBugById(Ze);pt&&(G&&Ee(`Prioritizing Quest: Auto advancing to target ${pt.name}`,"info"),ue(Ze),Le=!0)}}else if(!Le&&re.value){const Ze=$e(x.value);Ze&&Ze!==x.value&&Re(Ze)&&(G&&Ee(`Auto advancing to next one-hit kill bug: ${(it=e.getBugById(Ze))==null?void 0:it.name}`,"info"),ue(Ze),Le=!0)}me.value=!0},ge=te=>{const G=e.bugs.findIndex(de=>de.id===te.id),ne=Se.fromNumber(.1).add(Se.fromNumber(.02).mul(G)),he=Se.min(ne,Se.fromNumber(2)),ye=Se.fromNumber(10).mul(he);return Se.max(ye,Se.fromNumber(10))},Te=(te=1)=>{if(!p.value)return;if(ve(te),te===1){fe(!0)&&Ue();return}if(!e.selectedBug)return;if(me.value){ze(),me.value=!1,fe(!1)&&Ue();return}const G=_e(R.value,e.selectedBug.defense),ne=e.selectedBug.health;if(G.lte(0)){fe(!1)&&Ue();return}const he=ne.div(G).ceil(),ye=_e(e.selectedBug.damage,I.value);if(he.lte(1)||ye.lte(0)){fe(!1);return}const ae=D.value.div(ye).floor(),de=Se.min(te,ae).toNumber();if(he.gt(ae)){for(let Le=0;Le<de;Le++)fe(!1);de>=ae.toNumber()&&Ue();return}const Me=Se.min(he,te).toNumber();for(let Le=0;Le<Me;Le++)if(fe(!1)){Ue();break}},Ie=()=>{const te=D.value;if(D.value=D.value.plus(P.value).clamp(0,L.value),D.value.gt(te)&&P.value.gt(0)){const G=D.value.minus(te);G.gt(0)&&Ee(`You regenerate ${be(G)} health (${be(D.value)}/${be(L.value)} HP)`,"info")}},Ne=te=>{D.value=D.value.minus(te).clamp(0,L.value)},je=q(()=>D.value.lte(0)),N=te=>{var ne,he,ye;const G=e.selectedBug;if(e.selectBug(te),(G==null?void 0:G.id)!==te){Ee(`You start fighting ${(ne=e.selectedBug)==null?void 0:ne.name} (${be(((he=e.selectedBug)==null?void 0:he.damage)||Se.fromNumber(0))} damage, ${be(((ye=e.selectedBug)==null?void 0:ye.maxHealth)||Se.fromNumber(0))} health)`,"info");const ae=t.generators[0].count.mul(Se.fromNumber(10)),de=t.generators[0].count,Me=s.totalStats.damage.mul(de);Me.gt(0)&&Ee(`Your equipment provides a damage boost of ${be(Me)} (${be(ae)} base + ${be(Me)} equipment boost)`,"info"),me.value=!0}},ue=te=>{var G,ne;x.value!==te&&Ee(`Switching target from ${((G=e.getBugById(x.value))==null?void 0:G.name)||"unknown"} to ${((ne=e.getBugById(te))==null?void 0:ne.name)||"unknown"}`,"info"),x.value=te,N(te)},j=te=>{te.currentHealth&&(D.value=l(te.currentHealth)),te.selectedBugId&&(x.value=te.selectedBugId,N(te.selectedBugId)),typeof te.autoAdvance=="boolean"&&(re.value=te.autoAdvance),typeof te.autoQuestAdvance=="boolean"&&(J.value=te.autoQuestAdvance),te.filters&&(typeof te.filters.showOneHitOnly=="boolean"&&(se.value=te.filters.showOneHitOnly),typeof te.filters.showCanKillOnly=="boolean"&&(z.value=te.filters.showCanKillOnly),typeof te.filters.showAllEnemies=="boolean"&&(ce.value=te.filters.showAllEnemies),te.filters.gridDensity&&(pe.value=te.filters.gridDensity)),te.activeTab&&(le.value=te.activeTab),Ee("Adventure state loaded","info")},B=()=>({currentHealth:D.value.toString(),selectedBugId:x.value,autoAdvance:re.value,autoQuestAdvance:J.value,activeTab:le.value,filters:{showOneHitOnly:se.value,showCanKillOnly:z.value,showAllEnemies:ce.value,gridDensity:pe.value}}),ie=te=>{if(!u.activeQuest)return!1;const G=u.activeQuest.goals.filter(ne=>ne.type===Ws.KILL_BUGS);return G.length===0?!1:G.some(ne=>{const he=!ne.target,ye=ne.target===te,ae=["bug_slayer_initiate","extreme_bug_hunter"].includes(u.activeQuest.id)||u.activeQuest.id.includes("exterminator_");return he||ye||ae})},V=()=>{if(!u.activeQuest)return null;const te=u.activeQuest.goals.filter(ae=>ae.type===Ws.KILL_BUGS);if(te.length===0)return null;if(["bug_slayer_initiate","extreme_bug_hunter"].includes(u.activeQuest.id)||u.activeQuest.id.includes("exterminator_")){for(let ae=e.bugs.length-1;ae>=0;ae--){const de=e.bugs[ae];if(de&&Re(de.id))return de.id}return"safe"}const ne=te.filter(ae=>{const de=typeof ae.currentAmount=="string"?l(ae.currentAmount):ae.currentAmount||l(0),Me=typeof ae.requiredAmount=="string"?l(ae.requiredAmount):ae.requiredAmount||l(0);return de.lt(Me)});if(ne.length===0)return x.value;const he=ne.filter(ae=>ae.target).map(ae=>ae.target);if(he.length===0)return x.value||"safe";const ye=[...e.bugs].reverse();for(const ae of ye)if(he.includes(ae.id)&&Re(ae.id))return ae.id;return he[0]},O=te=>{if(!p.value||!e.selectedBug)return{kills:0,totalFoodGained:new Se(0),totalEssenceGained:new Se(0),totalDoubleKills:0,totalHoneydewGained:new Se(0)};const G=new Se(D.value),ne={kills:0,totalFoodGained:new Se(0),totalEssenceGained:new Se(0),totalDoubleKills:0,totalHoneydewGained:new Se(0)},he=e.selectedBug,ye=_e(R.value,he.defense),ae=_e(he.damage,I.value);if(ye.lte(0))return ne;const de=he.maxHealth.div(ye).ceil();let Me=new Se(0);if(ae.gt(0)){const pt=ae.mul(de);Me=P.value.mul(de).sub(pt)}else Me=P.value.mul(de);let Le=new Se(G),it=new Se(te);if(Me.gte(0)||ae.lte(0)){ne.kills=Math.floor(it.div(de).toNumber());const pt=Me.mul(ne.kills);Le=Se.min(L.value,Le.add(pt))}else for(;it.gte(de)&&Le.gt(0);){const pt=Le.div(ae.mul(de).sub(P.value.mul(de)).neg()).floor(),ft=Se.min(pt,it.div(de).floor()).toNumber();if(ft<=0||(ne.kills+=ft,it=it.sub(de.mul(ft)),Le=Le.add(Me.mul(ft)),Le.lte(0)))break}const Ze=w.value.toNumber();if(ne.totalDoubleKills=Math.floor(ne.kills*Ze),ne.kills>0){const{reward:pt}=Ce(he);if(ne.totalFoodGained=pt.mul(ne.kills),ne.totalDoubleKills>0){const Ve=pt.mul(C.value).mul(ne.totalDoubleKills);ne.totalFoodGained=ne.totalFoodGained.add(Ve)}const ft=Oe(he);if(ne.totalEssenceGained=ft.mul(ne.kills),ne.totalDoubleKills>0){const Ve=ft.mul(C.value).mul(ne.totalDoubleKills);ne.totalEssenceGained=ne.totalEssenceGained.add(Ve)}if(m.hasBugHoneydewDropUpgrade){const Ve=l(1);if(ne.totalHoneydewGained=Ve.mul(ne.kills),ne.totalDoubleKills>0){const ke=Ve.mul(C.value).mul(ne.totalDoubleKills);ne.totalHoneydewGained=ne.totalHoneydewGained.add(ke)}}}return D.value=Le.gt(0)?Le:L.value,ne};return N("safe"),{currentHealth:D,playerMaxHealth:L,playerDamage:R,playerRegen:P,playerDefense:I,isDead:je,isInCombat:U,autoCombatEnabled:M,selectedBugId:x,logs:$,isAdventureUnlocked:p,tick:Te,takeDamage:Ne,regenHealth:Ie,startCombat:N,toggleAutoCombat:ue,loadState:j,getState:B,autoAdvance:re,autoQuestAdvance:J,isAutoQuestAdvanceUnlocked:g,canOneHitBug:Re,willProgressQuest:ie,getBestQuestTarget:V,showOneHitOnly:se,showCanKillOnly:z,showAllEnemies:ce,gridDensity:pe,activeTab:le,calculateDamage:_e,addLog:Ee,calculateOfflineCombatProgress:O,getStatMultiplier:E,processCollectibleDrops:H}}),Hr=Es("bug",()=>{const t=Y(I8),e=Y(t.value[0]),s=Y("safe"),n=St(),r=q(()=>n.getUpgradeCount("reRollChance").div(100)),o=q(()=>e.value?e.value.health.lte(0):!1),i=q(()=>e.value?e.value.health.div(e.value.maxHealth).mul(100).toNumber():0),c=A=>{const S=t.value.find(T=>T.id===A);S&&(e.value=S,s.value=A,S.health=S.maxHealth)},u=A=>{e.value&&(e.value.health=e.value.health.minus(A).clamp(0,e.value.maxHealth))},d=()=>{if(!e.value)return[];const A=[],S=ir();return e.value.drops.forEach(T=>{if(Math.random()<=T.chance){const R=Math.floor(Math.random()*(T.maxQuantity-T.minQuantity+1)+T.minQuantity);A.push({itemId:T.itemId,quantity:R})}if(r.value.gt(0)&&Math.random()<=r.value.toNumber()){const R=Math.floor(Math.random()*(T.maxQuantity-T.minQuantity+1)+T.minQuantity);A.push({itemId:T.itemId,quantity:R}),S.addLog(`Re-roll successful! Gained ${R}x ${T.itemId}!`,"reward")}}),A},m=()=>{if(!e.value||!e.value.collectibleDrops)return[];const A=[],S=ir();return e.value.collectibleDrops.forEach(T=>{Math.random()<=T.chance&&A.push(T.collectibleId),r.value.gt(0)&&Math.random()<=r.value.toNumber()&&(A.push(T.collectibleId),S.addLog(`Re-roll successful! Found collectible: ${T.collectibleId}!`,"reward"))}),A},f=A=>{A.selectedBugId&&(c(A.selectedBugId),A.selectedBugHealth&&(e.value.health=l(A.selectedBugHealth)))},p=()=>{var A,S;return{selectedBugId:((A=e.value)==null?void 0:A.id)||null,selectedBugHealth:((S=e.value)==null?void 0:S.health.toString())||null}},g=A=>t.value.find(S=>S.id===A),w=A=>t.value.filter(S=>S.drops.some(T=>T.itemId===A)),C=A=>t.value.filter(S=>S.collectibleDrops&&S.collectibleDrops.some(T=>T.collectibleId===A)),E=(A,S)=>{const T=g(S);if(!T)return 0;const R=T.drops.find(L=>L.itemId===A);return R?R.chance:0},k=(A,S)=>{const T=g(S);if(!T||!T.collectibleDrops)return 0;const R=T.collectibleDrops.find(L=>L.collectibleId===A);return R?R.chance:0};return{bugs:t.value.sort((A,S)=>A.health.minus(S.health).toNumber()),selectedBug:e,selectedBugId:s,isBugDead:o,getBugHealthPercentage:i,selectBug:c,attackBug:u,getRandomDrops:d,getRandomCollectibleDrops:m,reRollChance:r,loadState:f,getState:p,getBugById:g,getBugsByItemId:w,getBugsByCollectibleId:C,getBugDropChance:E,getCollectibleDropChance:k}}),Ep=Y([]);let fJ=0;function Us(){const t=(s,n="info",r=3e3)=>{const o=fJ++;return Ep.value.push({id:o,message:s,type:n,timeout:r}),setTimeout(()=>{e(o)},r),o},e=s=>{const n=Ep.value.findIndex(r=>r.id===s);n!==-1&&Ep.value.splice(n,1)};return{toasts:Ep,showToast:t,removeToast:e}}function Q_(){const t=Ht(),e=St(),s=Ks(),n=sn(),r=(u,d=1)=>{const m=d>=1&&d<=5?d:1,f=Math.pow(2,m-1);switch(u){case Fs.FOOD:{const p=.5*f,g=t.foodPerSecond,w=60*f,C=g.mul(p).mul(w),E=l(1e3).mul(f);return Se.max(C,E)}case Fs.PHEROMONE:{const p=s.pheromoneEssence,g=.01*f;return p.mul(g)}case Fs.EP:{let p;if(e.loopsCompleted.gt(0)){const w=e.loopsCompleted.toNumber();l(1);const C=l(w),E=C,k=C.mul(C.sub(1)).mul(.05);p=E.add(k);const A=n.getEPBoostMultiplier();p=p.mul(A)}else p=l(100*f);if(p.lte(0))return l(100*f);const g=.05*f;return p.mul(g)}default:return l(0)}},o=(u,d=1)=>{const m=d>=1&&d<=5?d:1,f=Math.pow(2,m-1);switch(u){case Fs.FOOD:{const p=.5*f,g=60*f;return`${(p*100).toFixed(0)}% of food production  ${g}s`}case Fs.PHEROMONE:return`${(.01*f*100).toFixed(0)}% of current pheromone`;case Fs.EP:return`${(.05*f*100).toFixed(0)}% of potential EP gain`;default:return`Tier ${d} reward`}};return{calculateDynamicReward:r,getDynamicRewardDescription:o,formatReward:(u,d)=>{if(typeof u.value=="string"&&u.value.startsWith("tier:")){const f=parseInt(u.value.split(":")[1])||1,p=d||f;return o(u.type,p)}const m=typeof u.value=="string"?new Se(u.value):u.value instanceof Se?u.value:new Se(u.value);switch(u.type){case Fs.ITEM:return`${u.quantity||1}x ${u.value}`;case Fs.FOOD:return`${be(m)} Food`;case Fs.PHEROMONE:return typeof u.value=="number"?`${u.value}% of current Pheromone Essence`:`${be(m)} Pheromone Essence`;case Fs.EP:return`${be(m)} Evolution Points`;case Fs.MULTIPLIER:const f=u.target==="global"?"Global Production":u.target;return`${u.value}x ${f} multiplier permanently`;default:return"Unknown reward"}},getRewardValue:(u,d)=>{if(typeof u.value=="string"&&u.value.startsWith("tier:")){const m=parseInt(u.value.split(":")[1])||1,f=d||m;return r(u.type,f)}if(u.type===Fs.PHEROMONE&&typeof u.value=="number"){const m=u.value/100;return s.pheromoneEssence.mul(m)}return u.value instanceof Se?u.value:(typeof u.value=="string",l(u.value))}}}var $d=(t=>(t.DEFAULT="default",t.ALPHABETICAL="alphabetical",t.GOAL_TYPE="goal_type",t.REWARD_TYPE="reward_type",t.TIER="tier",t.REWARD_VALUE="reward_value",t))($d||{});function my(t,e){for(const s of t.goals)if(!(s.type!==Ws.KILL_BUGS||!s.target)&&!(t.id==="bug_slayer_initiate"||t.id.includes("exterminator_"))&&!e.getBugById(s.target))return!1;return!0}const Qs=Es("quest",()=>{sn();const t=Ht(),e=Hr(),s=Ks(),n=hn(),r=St(),{showToast:o}=Us(),{getRewardValue:i}=Q_(),c=O=>!O.rewards||O.rewards.length===0?l(0):O.rewards.reduce((te,G)=>{const ne=i(G,O.tier);if(G.type===Fs.MULTIPLIER){const he=typeof G.value=="number"?l(G.value):G.value instanceof Se?G.value:l(G.value.toString());return te.add(he.mul(1e3))}return te.add(ne)},l(0)),u=Y("available"),d=q(()=>!0),m=Y("comfortable"),f=Y(!1),p=Y("tier"),g=Y(null),w=Y(null),C=Y(""),E=Y(!0),k=Y(l(0)),A=Y(l(0)),S=Y([]),T=Y(null),R=Y([]),L=Y([]),P=Y(!0),I=Y(!1),D=Y(!0),U=q(()=>{let O=[...S.value];if(C.value.trim()){const te=C.value.toLowerCase().trim();O=O.filter(G=>G.title.toLowerCase().includes(te)||G.description.toLowerCase().includes(te))}switch(g.value&&(O=O.filter(te=>te.goals.some(G=>G.type===g.value))),w.value&&(O=O.filter(te=>te.rewards.some(G=>G.type===w.value))),p.value){case"alphabetical":O.sort((te,G)=>te.title.localeCompare(G.title));break;case"goal_type":O.sort((te,G)=>{const ne=te.goals&&te.goals.length>0?te.goals[0].type:null,he=G.goals&&G.goals.length>0?G.goals[0].type:null;if(ne&&he){if(ne!==he)return ne.localeCompare(he)}else{if(ne)return-1;if(he)return 1}return te.title.localeCompare(G.title)});break;case"reward_type":O.sort((te,G)=>{const ne=te.rewards&&te.rewards.length>0?te.rewards[0].type:null,he=G.rewards&&G.rewards.length>0?G.rewards[0].type:null;if(ne&&he){if(ne!==he)return ne.localeCompare(he)}else{if(ne)return-1;if(he)return 1}return te.title.localeCompare(G.title)});break;case"tier":O.sort((te,G)=>{const ne=te.tier||0,he=G.tier||0;return ne!==he?ne-he:te.title.localeCompare(G.title)});break;case"reward_value":O.sort((te,G)=>{const ne=c(te);return c(G).cmp(ne)});break}return O}),M=q(()=>{let O=[...R.value];if(C.value.trim()){const te=C.value.toLowerCase().trim();O=O.filter(G=>G.title.toLowerCase().includes(te)||G.description.toLowerCase().includes(te))}switch(g.value&&(O=O.filter(te=>te.goals.some(G=>G.type===g.value))),w.value&&(O=O.filter(te=>te.rewards.some(G=>G.type===w.value))),p.value){case"alphabetical":O.sort((te,G)=>te.title.localeCompare(G.title));break;case"goal_type":O.sort((te,G)=>{var ne,he,ye,ae;return((ne=te.goals[0])==null?void 0:ne.type)<((he=G.goals[0])==null?void 0:he.type)?-1:((ye=te.goals[0])==null?void 0:ye.type)>((ae=G.goals[0])==null?void 0:ae.type)?1:te.title.localeCompare(G.title)});break;case"reward_type":O.sort((te,G)=>{var ne,he,ye,ae;return((ne=te.rewards[0])==null?void 0:ne.type)<((he=G.rewards[0])==null?void 0:he.type)?-1:((ye=te.rewards[0])==null?void 0:ye.type)>((ae=G.rewards[0])==null?void 0:ae.type)?1:te.title.localeCompare(G.title)});break;case"reward_value":O.sort((te,G)=>{const ne=c(te);return c(G).cmp(ne)});break;case"default":default:O.reverse();break}return O}),x=()=>{g.value=null,w.value=null,C.value="",E.value=!0,p.value="tier"},$=O=>{p.value=O},Z=O=>{g.value=O},me=O=>{w.value=O},re=O=>{C.value=O},J=O=>{E.value=O};dt(T,O=>{!O&&u.value==="inProgress"&&(u.value="available"),O?(f.value=!1,O.isPaused=!1):f.value=!1});const le=(O=1)=>{if(!f.value){if(!T.value&&P.value&&L.value.length>0){const te=L.value[0],G=ue(te);G&&(D.value&&o(`Starting quest from queue: ${G.title}`,"info"),Ie());return}if(T.value){if(T.value.goals)for(const te of T.value.goals)(!(te.currentAmount instanceof Se)&&typeof te.currentAmount!="string"||!(te.requiredAmount instanceof Se)&&typeof te.requiredAmount!="string")&&(console.error("Invalid goal amounts in tick",{current:te.currentAmount,required:te.requiredAmount}),!(te.currentAmount instanceof Se)&&typeof te.currentAmount!="string"&&(console.log("Fixing invalid currentAmount in goal"),te.currentAmount=l(0)),!(te.requiredAmount instanceof Se)&&typeof te.requiredAmount!="string"&&(console.log("Fixing invalid requiredAmount in goal"),te.requiredAmount=l(10)));else{console.error("Quest has no goals array",T.value);return}ce()}}},se=O=>{if(!T.value||!T.value.goals||f.value)return;let te=!1;for(const G of T.value.goals)if(G.type===Ws.COLLECT_FOOD){const ne=G.currentAmount instanceof Se?G.currentAmount:l(G.currentAmount||0);G.currentAmount=ne.add(O),te=!0}te&&ce()},z=O=>{if(!T.value||!T.value.goals||f.value)return;let te=!1;for(const G of T.value.goals)if(G.type===Ws.COLLECT_PHEROMONE){const ne=G.currentAmount instanceof Se?G.currentAmount:l(G.currentAmount||0);G.currentAmount=ne.add(O),te=!0}te&&ce()},ce=()=>{if(!T.value||!T.value.goals||f.value)return;const O=T.value.goals.every(te=>{try{const G=te.currentAmount instanceof Se?te.currentAmount:l(te.currentAmount||0),ne=te.requiredAmount instanceof Se?te.requiredAmount:l(te.requiredAmount||0);return G.gte(ne)}catch(G){return console.error("Error comparing goal amounts:",G,{current:te.currentAmount,required:te.requiredAmount}),!1}});return O&&Ee(T.value),O},pe=O=>{if(T.value)return console.warn("Cannot start a new quest while another is active"),!1;const te=S.value.find(he=>he.id===O);if(!te)return console.warn(`Quest with ID ${O} not found`),!1;if(!my(te,e))return Q1(`Cannot start quest ${O} - one or more target bugs do not exist`),!1;if(!te.goals||te.goals.length===0)return console.warn(`Quest ${O} has no goals`),!1;for(const he of te.goals)!(he.requiredAmount instanceof Se)&&typeof he.requiredAmount!="string"&&(console.warn(`Quest ${O} has invalid requiredAmount in goal, fixing`,he.requiredAmount),he.requiredAmount=l(he.requiredAmount||10)),he.currentAmount instanceof Se||(console.warn(`Quest ${O} has invalid currentAmount in goal, fixing`,he.currentAmount),he.currentAmount=l(0));console.log("Starting quest with values:",{id:te.id,title:te.title,goals:te.goals.map(he=>({type:he.type,requiredAmount:he.requiredAmount.toString?he.requiredAmount.toString():he.requiredAmount,currentAmount:he.currentAmount.toString()}))});for(const he of te.goals)he.currentAmount=l(0);te.isActive=!0,te.isPaused=!1;const G=te.goals.some(he=>he.type===Ws.COLLECT_FOOD),ne=te.goals.some(he=>he.type===Ws.COLLECT_PHEROMONE);return G&&(k.value=new Se(t.food)),ne&&(A.value=new Se(s.pheromoneEssence)),T.value=te,f.value=!1,S.value=S.value.filter(he=>he.id!==O),!0},_e=()=>{if(!T.value)return console.warn("No active quest to cancel"),!1;const O={...T.value};O.goals&&Array.isArray(O.goals)&&(O.goals=O.goals.map(G=>({...G,currentAmount:l(0)}))),O.isActive=!1,O.isPaused=!1;const te=S.value.findIndex(G=>G.id===O.id);if(te===-1?S.value.push(O):S.value[te]=O,T.value=null,f.value=!1,P.value&&L.value.length>0){const G=L.value[0],ne=ue(G);ne&&D.value&&o(`Starting next quest: ${ne.title}`,"info"),Ie()}return!0},Ee=O=>{const{formatReward:te}=Q_();O.isCompleted=!0,O.isActive=!1,O.isPaused=!1;const G=[];O.rewards.forEach(he=>{G.push(te(he,O.tier)),Ue(he)});let ne="";if(G.length===1)ne=`Reward: ${G[0]}`;else if(G.length===2)ne=`Rewards: ${G[0]} and ${G[1]}`;else if(G.length>2){const he=G.pop();ne=`Rewards: ${G.join(", ")} and ${he}`}if(R.value.push({...O}),T.value=null,f.value=!1,D.value&&o(`Quest completed: ${O.title}. ${ne}`,"success",5e3),console.log(`Quest completed: ${O.title} with rewards: ${G.join(", ")}`),P.value&&L.value.length>0){const he=L.value[0],ye=ue(he);ye&&D.value&&o(`Starting next quest: ${ye.title}`,"info"),Ie()}return!0},Ue=O=>{var te,G;switch(O.type){case Fs.ITEM:if(typeof O.value=="string"&&O.quantity){const ne=typeof O.quantity=="number"?l(O.quantity):l(1);n.addItem(O.value,ne)}else console.error("Invalid item reward:",O);break;case Fs.EP:{try{const ne=i(O,(te=T.value)==null?void 0:te.tier);r.evolutionPoints=r.evolutionPoints.add(ne),console.log(`Added ${ne.toString()} Evolution Points from quest reward`)}catch(ne){console.error("Error processing EP reward:",ne)}break}case Fs.FOOD:{try{const ne=i(O,(G=T.value)==null?void 0:G.tier);t.food=t.food.add(ne),console.log(`Added ${ne.toString()} Food from quest reward`)}catch(ne){console.error("Error processing FOOD reward:",ne)}break}case Fs.PHEROMONE:{try{const ne=typeof O.value=="number"?O.value/100:.02,ye=s.pheromoneEssence.mul(ne);s.addPheromoneEssence(ye),console.log(`Added ${ye.toString()} Pheromone Essence (${ne*100}% of current) from quest reward`)}catch(ne){console.error("Error processing PHEROMONE reward:",ne)}break}case Fs.MULTIPLIER:if(typeof O.value=="number"&&typeof O.target=="string"){const ne=O.value;console.log(`Applied permanent multiplier: ${ne}x to ${O.target}`)}else console.error("Invalid MULTIPLIER reward:",O);break;default:console.warn(`Unhandled reward type: ${O.type}`)}},ze=()=>{const O=J1.map(G=>({...G,isPaused:!1,goals:G.goals.map(he=>({...he,requiredAmount:typeof he.requiredAmount=="string"?he.requiredAmount:l(he.requiredAmount||0).toString(),currentAmount:typeof he.currentAmount=="string"?he.currentAmount:l(he.currentAmount||0).toString()}))})),te=O.filter(G=>my(G,e));S.value=[...te],console.log(`Initialized ${S.value.length} quests (filtered from ${O.length} total templates)`)},Re=()=>({activeTab:u.value,gridDensity:m.value,sortOption:p.value,filterQuestType:g.value,filterRewardType:w.value,filterText:C.value,activeQuest:T.value,completedQuests:R.value,foodAtQuestStart:k.value.toString(),pheromoneAtQuestStart:A.value.toString(),questQueue:L.value,autoStartNextQuest:P.value,showQuestNotifications:D.value,isQueueModalOpen:I.value,isQuestPaused:f.value}),$e=O=>{var ne,he;if(console.log("Loading quest store state:",O),O.activeTab&&(u.value=O.activeTab),O.filters&&(O.filters.sortOption&&(p.value=O.filters.sortOption),O.filters.filterQuestType&&(g.value=O.filters.filterQuestType),O.filters.filterRewardType&&(w.value=O.filters.filterRewardType),O.filters.filterText&&(C.value=O.filters.filterText),typeof O.filters.showTooStrongBugs=="boolean"&&(E.value=O.filters.showTooStrongBugs),O.filters.gridDensity&&(m.value=O.filters.gridDensity)),ze(),Array.isArray(O.questQueue)&&(L.value=O.questQueue),typeof O.autoStartNextQuest=="boolean"&&(P.value=O.autoStartNextQuest),typeof O.isQueueModalOpen=="boolean"&&(I.value=O.isQueueModalOpen),typeof O.showQuestNotifications=="boolean"&&(D.value=O.showQuestNotifications),typeof O.isQuestPaused=="boolean"?f.value=O.isQuestPaused:f.value=!1,R.value=[],O.completedQuests&&Array.isArray(O.completedQuests))try{R.value=O.completedQuests.map(ye=>({...ye,isPaused:!1,goals:Array.isArray(ye.goals)?ye.goals.map(ae=>({...ae,requiredAmount:typeof ae.requiredAmount=="string"?ae.requiredAmount:l(ae.requiredAmount||0).toString(),currentAmount:typeof ae.currentAmount=="string"?ae.currentAmount:l(ae.currentAmount||0).toString()})):[]}))}catch(ye){console.error("Error loading completed quests:",ye)}if(T.value=null,O.activeQuest)try{const ye={...O.activeQuest,isPaused:f.value,goals:Array.isArray(O.activeQuest.goals)?O.activeQuest.goals.map(ae=>({...ae,requiredAmount:l(ae.requiredAmount||0),currentAmount:l(ae.currentAmount||0)})):[]};T.value=ye}catch(ye){console.error("Error loading active quest:",ye)}else f.value=!1;const te=R.value.map(ye=>ye.id),G=(ne=T.value)==null?void 0:ne.id;S.value=S.value.filter(ye=>!te.includes(ye.id)&&ye.id!==G),S.value=S.value.filter(ye=>my(ye,e)),O.foodAtQuestStart&&(k.value=l(O.foodAtQuestStart)),O.pheromoneAtQuestStart&&(A.value=l(O.pheromoneAtQuestStart)),console.log(`Loaded ${S.value.length} available quests, ${R.value.length} completed quests, active quest: ${((he=T.value)==null?void 0:he.id)||"none"}, paused: ${f.value}`)},Ce=()=>{var O;return T.value&&(T.value.isPaused=f.value),{activeTab:u.value,activeQuestId:((O=T.value)==null?void 0:O.id)||null,availableQuests:S.value.map(te=>({...te,goals:te.goals.map(G=>({...G,requiredAmount:G.requiredAmount.toString(),currentAmount:G.currentAmount.toString()}))})),activeQuest:T.value?{...T.value,goals:T.value.goals.map(te=>({...te,requiredAmount:te.requiredAmount.toString(),currentAmount:te.currentAmount.toString()}))}:null,completedQuests:R.value.map(te=>({...te,goals:te.goals.map(G=>({...G,requiredAmount:G.requiredAmount.toString(),currentAmount:G.currentAmount.toString()}))})),autoStartNextQuest:P.value,questQueue:L.value,filters:{sortOption:p.value,filterQuestType:g.value,filterRewardType:w.value,filterText:C.value,showTooStrongBugs:E.value,gridDensity:m.value},showQuestNotifications:D.value,foodAtQuestStart:k.value.toString(),pheromoneAtQuestStart:A.value.toString(),isQuestPaused:f.value}},Oe=()=>{S.value=[],R.value=[],T.value=null,f.value=!1,k.value=l(0),A.value=l(0),ze(),console.log("Quests reset to initial state")},ve=()=>{Oe(),L.value=[],console.log("Quests reset for ascension")},fe=(O,te)=>{if(f.value||(console.log("Updating defeat bug progress for bugId:",O,"with quantity:",te),!T.value||!T.value.goals))return;let G=!1;for(const ne of T.value.goals){if(ne.type!==Ws.KILL_BUGS||ne.target&&ne.target!==O)continue;let he=typeof ne.currentAmount=="string"?l(ne.currentAmount):ne.currentAmount;he=he.add(te),ne.currentAmount=he.toString(),G=!0}G&&ce()},X=O=>{!T.value||f.value||(ce(),I.value=!1)},H=O=>{if(L.value.includes(O))return o("This quest is already in the queue","warning"),!1;const te=S.value.find(G=>G.id===O);return te?(L.value.push(O),D.value&&o(`Added "${te.title}" to the quest queue`,"success"),!0):(console.error(`Quest with ID ${O} not found in available quests`),!1)},W=O=>{const te=L.value.length;if(L.value=L.value.filter(G=>G!==O),L.value.length<te){const G=S.value.find(ne=>ne.id===O);return G&&D.value&&o(`Removed "${G.title}" from the quest queue`,"info"),!0}return!1},ge=O=>{if(!O.length)return!1;let te=0,G=0;for(const ne of O){if(L.value.includes(ne)){G++;continue}S.value.find(ye=>ye.id===ne)&&(L.value.push(ne),te++)}return te>0?(D.value&&o(`Added ${te} quests to the queue`,"success"),!0):(G>0?D.value&&o("All selected quests are already in the queue","warning"):D.value&&o("No quests added to queue","warning"),te>0)},Te=(O,te)=>{if(O<0||O>=L.value.length||te<0||te>=L.value.length)return!1;const G=L.value[O];return L.value.splice(O,1),L.value.splice(te,0,G),!0},Ie=()=>{if(L.value.length===0)return!1;const O=L.value[0];return pe(O)?(L.value.shift(),!0):!1},Ne=()=>{L.value=[],D.value&&o("Quest queue cleared","info")},je=()=>(P.value=!P.value,P.value),N=()=>(D.value=!D.value,D.value),ue=O=>S.value.find(te=>te.id===O),j=()=>{I.value=!0},B=()=>{I.value=!1},ie=()=>{T.value&&(f.value=!0,T.value.isPaused=!0,o(`Quest "${T.value.title}" paused.`,"info"))},V=()=>{T.value&&(f.value=!1,T.value.isPaused=!1,o(`Quest "${T.value.title}" resumed.`,"info"))};return ze(),{activeTab:u,availableQuests:S,activeQuest:T,completedQuests:R,isQuestsUnlocked:d,gridDensity:m,questQueue:L,autoStartNextQuest:P,isQueueModalOpen:I,foodAtQuestStart:k,pheromoneAtQuestStart:A,isQuestPaused:f,sortOption:p,filterQuestType:g,filterRewardType:w,filterText:C,showTooStrongBugs:E,filteredAvailableQuests:U,filteredCompletedQuests:M,startQuest:pe,cancelQuest:_e,pauseQuest:ie,resumeQuest:V,isQuestComplete:ce,completeQuest:Ee,tick:le,updateDefeatBugProgress:fe,trackFoodGain:se,trackPheromoneGain:z,setQuestTypeFilter:Z,setRewardTypeFilter:me,setSortOption:$,setTextFilter:re,setShowTooStrongBugs:J,clearFilters:x,getSaveState:Re,loadState:$e,getState:Ce,resetQuests:Oe,resetForAscension:ve,updateQuestProgress:X,addQuestToQueue:H,removeQuestFromQueue:W,reorderQuestQueue:Te,startNextQuestFromQueue:Ie,clearQuestQueue:Ne,toggleAutoStartNextQuest:je,getAvailableQuestById:ue,openQueueModal:j,closeQueueModal:B,addMultipleQuestsToQueue:ge,toggleShowQuestNotifications:N,showQuestNotifications:D}}),Ks=Es("pheromoneEssence",()=>{const t=Y(l(0)),e=Y(l(0)),s=sn(),n=q(()=>be(t.value,2)),r=q(()=>be(e.value,2)),o={common:1,uncommon:3,rare:10,epic:25,legendary:75,mythic:200,divine:500},i=w=>{var E,k;let C=o[w.rarity]||1;return C=C*(1+(w.level.toNumber()-1)*.5),(E=w.maxXp)!=null&&E.gt(0)&&(C=C*(1+((k=w.xp)==null?void 0:k.div(w.maxXp).toNumber())*.2)),l(Math.round(C))};return{pheromoneEssence:t,totalCollectedEssence:e,formattedPheromoneEssence:n,formattedTotalCollectedEssence:r,calculateSalvageValue:i,calculateBatchSalvageValue:(w,C,E)=>{if(!E)return l(0);const A=(o[E.rarity]||1)*(1+(C-1)*.5);return l(Math.round(A*C))},addPheromoneEssence:(w,C=!1)=>{const E=C?w.mul(s.getPheromoneGainMultiplier()):w;t.value=t.value.add(E),e.value=e.value.add(E);try{Qs().trackPheromoneGain(E)}catch(k){console.error("Error tracking pheromone gain for quests:",k)}try{tn().updateMegacolonyProgress(E),tn().updateAlateHatcheryProgress(E.div(1e3))}catch(k){console.error("Error updating megacolony progress:",k)}return E},spendPheromoneEssence:w=>t.value.lt(w)?!1:(t.value=t.value.sub(w),!0),salvageItem:w=>{if(!w)return{success:!1,message:"Item not found"};const C=i(w),E=s.getPheromoneGainMultiplier(),k=C.mul(E);t.value=t.value.add(k),e.value=e.value.add(k);let A=`Salvaged ${w.name} (Lvl ${w.level.toString()}) for ${be(k)} Pheromone Essence`;if(E.gt(1)){const S=be(C),T=be(k.sub(C));A=`Salvaged ${w.name} (Lvl ${w.level.toString()}) for ${S} + ${T} bonus Pheromone Essence`}return{success:!0,message:A,salvageValue:k}},resetForAscension:()=>{t.value=l(0)},getState:()=>({pheromoneEssence:t.value.toString(),totalCollectedEssence:e.value.toString()}),loadState:w=>{w.pheromoneEssence&&(t.value=l(w.pheromoneEssence)),w.totalCollectedEssence&&(e.value=l(w.totalCollectedEssence))}}}),hn=Es("inventory",()=>{const t=Ts(),e=St();Hr();const s=Y([]),n=20,r=Y([]),o=10,i=q(()=>e.getUpgradeCount("equipmentSlots")),c=Y(!0),u=q(()=>e.getUpgradeCount("unlockAutoSalvage").gt(0)),d=q(()=>e.getUpgradeCount("unlockSalvageAll").gt(0)),m=Y("default"),f=Y("none"),p=Y("equipment"),g=Y({equipmentStats:!1,combatStats:!1,specialModifiers:!1,productionModifiers:!1}),w=W=>{g.value[W]=!g.value[W]},C=W=>{p.value=W},E=q(()=>{const W=l(n),ge=e.getUpgradeMultiplier("inventorySlots");return W.add(ge)}),k=q(()=>o),A=u3(),{indicators:S,addXpIndicator:T}=A,R=()=>{const W=Ts();r.value.forEach(ge=>{if(ge.item&&!s.value.some(Ie=>Ie.id===ge.item||typeof Ie.id=="string"&&typeof ge.item=="string"&&Ie.id.trim()===ge.item.trim())){const Ie=W.getItem(ge.item);if(Ie){const Ne=l(1),je=l(0),N=W.calculateMaxXp(Ne,Ie.rarity);s.value.push({...Ie,level:Ne,xp:je,maxXp:N,isLocked:ge.itemIsLocked||!1})}else console.warn(`Item with ID ${ge.item} not found in item store but referenced in equipment.`)}})},L=()=>{r.value.forEach(W=>{W.item&&(Object.prototype.hasOwnProperty.call(W,"itemIsLocked")?W.itemIsLocked===void 0&&(W.itemIsLocked=!1):W.itemIsLocked=!1)})},P=()=>{const W=r.value.map(Ie=>({id:Ie.id!==void 0?Ie.id:0,item:Ie.item,locked:Ie.locked,itemIsLocked:Ie.itemIsLocked})),ge=[],Te=k.value;for(let Ie=0;Ie<Te;Ie++){const Ne=W.find(ue=>ue.id===Ie||typeof ue.id=="string"&&parseInt(ue.id)===Ie),je=Ie>=i.value.toNumber(),N=(Ne==null?void 0:Ne.item)!==null&&(Ne==null?void 0:Ne.item)!==void 0;ge.push({id:Ie,item:(Ne==null?void 0:Ne.item)||null,locked:N?!1:je,itemIsLocked:(Ne==null?void 0:Ne.itemIsLocked)||!1})}r.value=ge,R()},I=W=>t.getItem(W),D=q(()=>{const W={damage:Se.fromNumber(0),health:Se.fromNumber(0),regen:Se.fromNumber(0),defense:Se.fromNumber(0)};return r.value.forEach(ge=>{if(ge.item){const Te=s.value.find(Ie=>Ie.id===ge.item);if(Te){const Ie=t.getItemStats(Te);Ie&&(Ie.damage&&(W.damage=W.damage.plus(Ie.damage)),Ie.health&&(W.health=W.health.plus(Ie.health)),Ie.regen&&(W.regen=W.regen.plus(Ie.regen)),Ie.defense&&(W.defense=W.defense.plus(Ie.defense)))}}}),W}),U=q(()=>{const W={};return r.value.forEach(ge=>{if(ge.item){const Te=s.value.find(Ie=>Ie.id===ge.item);if(Te){const Ie=t.getItemProductionModifiers(Te);Ie&&Object.entries(Ie).forEach(([Ne,je])=>{W[Ne]||(W[Ne]=Se.fromNumber(1)),W[Ne]=W[Ne].add(je)})}}}),Object.fromEntries(Object.entries(W).filter(([ge,Te])=>Te.gt(1)))}),M=q(()=>{const W={epBoost:Se.fromNumber(1),global:Se.fromNumber(1)};return r.value.forEach(ge=>{if(ge.item){const Te=s.value.find(Ie=>Ie.id===ge.item);if(Te){const Ie=t.getItemSpecialModifiers(Te);Ie&&Object.entries(Ie).forEach(([Ne,je])=>{W[Ne]||(W[Ne]=Se.fromNumber(1)),W[Ne]=W[Ne].add(je)})}}}),W}),x=W=>{const ge=s.value.findIndex(Ie=>Ie.id===W);if(ge!==-1)return{location:"inventory",index:ge};const Te=r.value.findIndex(Ie=>Ie.item===W);return Te!==-1?{location:"equipment",index:Te}:null},$=(W,ge)=>{const Te=Ts();let Ie=!1;for(W.xp=W.xp.add(ge),ge.gt(0)&&T(W.id,ge);W.xp.gte(W.maxXp);)W.level=W.level.add(1),Ie=!0,W.xp=W.xp.sub(W.maxXp),W.maxXp=Te.calculateMaxXp(W.level,W.rarity);return{leveledUp:Ie,newLevel:W.level}},Z=()=>{Ts();const W=new Set;for(let ge=0;ge<s.value.length;ge++)for(let Te=ge+1;Te<s.value.length;Te++)if(s.value[ge].id===s.value[Te].id){W.add(s.value[ge].id);break}W.forEach(ge=>{const Te=s.value.filter(N=>N.id===ge);if(Te.length<=1)return;let Ie=Te[0];const Ne=[...Te];for(let N=1;N<Te.length;N++)Te[N].level.gt(Ie.level)&&(Ie=Te[N]);const je=Ne.findIndex(N=>N===Ie);je!==-1&&Ne.splice(je,1),Ne.forEach(N=>{let ue=Se.fromNumber(5);ue=ue.add(N.level.mul(3)),N.maxXp.gt(0)&&(ue=ue.add(N.xp.div(N.maxXp).mul(5))),$(Ie,ue)}),s.value=s.value.filter(N=>N===Ie||N.id!==ge)})},me=()=>{Z()},re=(W,ge=Se.fromNumber(5),Te=!1)=>{const Ie=Ts();Hr();const Ne=x(W),je=Ie.getItem(W);if(!je)return;if(ge.eq(1)){const j={common:2,uncommon:5,rare:12,epic:30,legendary:75,mythic:180,divine:450}[je.rarity]||5;ge=l(Math.round(j))}if(Ne){let ue;if(Ne.location==="inventory")ue=s.value[Ne.index];else{const j=r.value[Ne.index].item;if(!j)return;const B=s.value.findIndex(ie=>ie.id===j);if(B===-1){const ie=Ie.createItem(W,Se.fromNumber(1),Se.fromNumber(0));if(!ie)return;ie.isLocked=Te,s.value.push(ie);return}ue=s.value[B]}$(ue,ge);return}const N=Ie.createItem(W);N&&(N.isLocked=Te,s.value.push(N),z())},J=W=>{s.value.splice(W,1),me()},le=W=>r.value.findIndex(ge=>ge.item===W),se=(W,ge,Te)=>{if(Te<0||Te>=s.value.length)return console.error("Invalid inventory index"),!1;if(ge<0||ge>=r.value.length)return console.error("Invalid equipment slot index"),!1;const Ie=r.value[ge];if(Ie.locked)return console.error("Cannot equip to a locked slot"),!1;const Ne=le(W);if(Ne!==-1&&Ne!==ge)return console.error("This item is already equipped in another slot"),!1;if(Ie.item&&(Ie.itemIsLocked,!ce(ge)))return console.error("Failed to unequip current item"),!1;const je=s.value[Te].isLocked||!1;return Ie.item=W,Ie.itemIsLocked=je,!0},z=()=>{s.value.sort((W,ge)=>{const Te={common:0,uncommon:1,rare:2,epic:3,legendary:4,mythic:5,divine:6},Ie=(Te[ge.rarity]||0)-(Te[W.rarity]||0);return Ie!==0?Ie:ge.level.cmp(W.level)})},ce=W=>{if(W<0||W>=r.value.length)return!1;const ge=r.value[W];if(!ge.item||ge.locked)return!1;const Te=ge.item;return!s.value.find(Ne=>Ne.id===Te)&&l(s.value.length).gte(E.value)?!1:(ge.itemIsLocked,ge.item=null,ge.itemIsLocked=!1,!0)},pe=Ks(),_e=pe.formattedPheromoneEssence,Ee=W=>{let ge=1;switch(W.rarity){case"common":ge=1;break;case"uncommon":ge=3;break;case"rare":ge=10;break;case"epic":ge=25;break;case"legendary":ge=75;break;case"mythic":ge=200;break;case"divine":ge=500;break;default:ge=1}return ge=ge*(1+(W.level.toNumber()-1)*.5),W.maxXp.gt(0)&&(ge=ge*(1+W.xp.div(W.maxXp).toNumber()*.2)),l(Math.round(ge))},Ue=W=>{if(W<0||W>=s.value.length)return{success:!1,message:"Item not found"};const ge=s.value[W];if(ge.isLocked)return{success:!1,message:"This item is locked. Unlock it first to salvage."};Ee(ge);const Ie=Ks().salvageItem(ge);return Ie.success&&s.value.splice(W,1),Ie},ze=()=>{if(!d.value)return;const W=s.value.filter(Te=>!Te.isLocked);let ge=l(0);W.forEach(Te=>{const Ie=Ee(Te);ge=ge.add(Ie)}),ge.gt(0)&&(Ks().addPheromoneEssence(ge,!0),s.value=s.value.filter(Ie=>Ie.isLocked))},Re=()=>{u.value&&(c.value=!c.value)},$e=W=>{const ge=r.value.find(Ie=>Ie.item===W);if(ge&&ge.itemIsLocked)return!0;const Te=s.value.find(Ie=>Ie.id===W);return!!(Te&&Te.isLocked)},Ce=(W,ge)=>{const Te=s.value.find(Ie=>Ie.id===W);Te&&(Te.isLocked=ge),r.value.forEach(Ie=>{Ie.item===W&&(Ie.itemIsLocked=ge)})},Oe=W=>{const ge=s.value[W];if(!ge)return!1;const Te=$e(ge.id);return Ce(ge.id,!Te),!0},ve=W=>{const ge=r.value[W];if(!ge||ge.locked||!ge.item)return!1;const Te=$e(ge.item);return Ce(ge.item,!Te),!0},fe=()=>({inventory:s.value.map(W=>({id:W.id,level:W.level.toString(),xp:W.xp.toString(),isLocked:W.isLocked})),equipmentSlots:r.value.map(W=>({id:W.id,item:W.item,locked:W.locked,itemIsLocked:W.itemIsLocked})),maxInventorySlots:E.value.toString(),selectedInventorySort:m.value,selectedInventoryFilter:f.value,collapsedSections:g.value,activeTab:p.value}),X=W=>{const ge=Ts();let Te=[];if(W.inventory&&(Te=W.inventory.map(Ne=>{const je=ge.getItem(Ne.id);if(!je)return null;let N=l(1);Ne.mergeLevel?N=l(l(Ne.mergeLevel).mul(2)):N=Ne.level?l(Ne.level):l(1);const ue=Ne.xp?l(Ne.xp):l(0),j=ge.calculateMaxXp(N,je.rarity);return{...je,level:N,xp:ue,maxXp:j,isLocked:Ne.isLocked||!1}}).filter(Boolean)),W.equipmentSlots){const Ne=new Set,je=W.equipmentSlots.map((N,ue)=>{if(N.item&&N.mergeLevel!==void 0){const B=ge.getItem(N.item);if(B){const ie=l(N.mergeLevel).mul(2),V=l(0),O=ge.calculateMaxXp(ie,B.rarity),te={...B,level:ie,xp:V,maxXp:O,isLocked:N.itemIsLocked||!1};Te.push(te)}}let j=N.item;return j&&Ne.has(j)?j=null:j&&Ne.add(j),{id:N.id!==void 0?N.id:ue,item:j,locked:N.locked,itemIsLocked:j&&N.itemIsLocked||!1}});r.value=je}P(),Te.sort((Ne,je)=>je.level.cmp(Ne.level));const Ie=new Map;Te.forEach(Ne=>{(!Ie.has(Ne.id)||Ne.level.gt(Ie.get(Ne.id).level))&&Ie.set(Ne.id,Ne)}),s.value=Array.from(Ie.values()),W.selectedInventorySort&&(m.value=W.selectedInventorySort),W.selectedInventoryFilter&&(f.value=W.selectedInventoryFilter),W.collapsedSections&&(g.value=W.collapsedSections),W.activeTab&&(p.value=W.activeTab),z()},H=(W,ge)=>{T(W,ge)};return{inventory:s,maxInventorySlots:E,equipmentSlots:r,maxEquipmentSlots:k,unlockedEquipmentSlots:i,totalStats:D,totalProductionModifiers:U,totalSpecialModifiers:M,collapsedSections:g,toggleSection:w,addItem:re,removeItem:J,equipItem:se,unequipItem:ce,stackItems:me,getState:fe,loadState:X,getItem:I,initializeEquipmentSlots:P,pheromoneEssence:pe.pheromoneEssence,formattedPheromoneEssence:_e,salvageItem:Ue,calculateSalvageValue:Ee,salvageAll:ze,isSalvageAllUnlocked:d,toggleItemLock:Oe,toggleEquippedItemLock:ve,isItemLocked:$e,migrateEquippedItemsLockStatus:L,setItemLockStatus:Ce,isAutoSalvageEnabled:c,isAutoSalvageUnlocked:u,toggleAutoSalvage:Re,selectedInventorySort:m,selectedInventoryFilter:f,activeTab:p,setActiveTab:C,addItemXp:$,xpIndicators:S,...A,triggerXpIndicator:H,isItemEquipped:le}}),sn=Es("multiplier",()=>{const t=Ht(),e=St(),s=tn(),n=hn(),r=Or(),o=Ml();Qs(),Wt(),Ts();const i=Ls(),c=uf(),u=hf();Fr(),kn();const d=()=>{const N=hn(),ue=Ts(),j=[],B=e.getAllMultipliers();e.evolutionUpgrades.forEach(G=>{if(!G.level.eq(0)&&!(G.category!=="production"&&G.category!=="synergy")&&G.appliesTo.includes("global"))if(G.category==="synergy"){const ne=`${G.id}Bonus`;B[ne]&&B[ne].gt(1)&&j.push({id:ne,name:G.name,getMultiplier:()=>B[ne]||l(1),appliesTo:()=>!0,isAdditive:G.isAdditive,source:"evolution"})}else j.push({id:G.id,name:G.name,getMultiplier:()=>e.getUpgradeMultiplier(G.id),appliesTo:()=>!0,isAdditive:G.isAdditive,source:"evolution"})});const V=N.totalSpecialModifiers;V.global&&V.global.gt(1)&&j.push({id:"item_global_multiplier",name:"Global Production Bonus",getMultiplier:()=>V.global,appliesTo:()=>!0,source:"item"}),N.equipmentSlots.forEach(G=>{if(G.item){const ne=N.inventory.find(he=>he.id===G.item);if(ne){const he=ue.getItemProductionModifiers(ne);he!=null&&he.global&&he.global.gt(1)&&j.push({id:`equipment_${G.id}_global_prod`,name:`${ne.name} (Lvl ${ne.level.toString()}) - Global Prod.`,getMultiplier:()=>he.global||Se.fromNumber(1),appliesTo:()=>!0,source:"equipment"});const ye=ue.getItemSpecialModifiers(ne);ye!=null&&ye.global&&ye.global.gt(1)&&j.push({id:`equipment_${G.id}_global_special`,name:`${ne.name} (Lvl ${ne.level.toString()}) - Global Special`,getMultiplier:()=>ye.global||Se.fromNumber(1),appliesTo:()=>!0,source:"equipment"})}}});const O=ge();O.gt(1)&&j.push({id:"colony_mega_global_multiplier",name:"Mega Ant Colony Global Bonus",getMultiplier:()=>O,appliesTo:()=>!0,source:"colony"});const te=U();return te.gt(1)&&j.push({id:"ascension_global_multiplier",name:"Ascension Tree Global Production",getMultiplier:()=>te,appliesTo:()=>!0,source:"ascension"}),j.push({id:"honeydew-global-boost",name:"Colony Symbiosis",getMultiplier:()=>{try{let G=l(1);return i.getGlobalUpgradeLevel("honeydew-global-boost")>0&&(G=G.mul(l(2).pow(i.getGlobalUpgradeLevel("honeydew-global-boost")))),i.getGlobalUpgradeLevel("honeydew-global-boost-2")>0&&(G=G.mul(l(20).pow(i.getGlobalUpgradeLevel("honeydew-global-boost-2")))),G}catch(G){return console.error("Error getting honeydew global boost:",G),l(1)}},appliesTo:()=>!0,source:"aphidFarm"}),j},m=()=>{const N=[],ue=e.getAllMultipliers();return e.evolutionUpgrades.forEach(B=>{B.level.eq(0)||B.isCombo||B.category!=="production"&&B.category!=="synergy"||(B.category==="synergy"&&!B.appliesTo.includes("global")?B.appliesTo.forEach(ie=>{const V=`${B.id}_${ie}Bonus`;ue[V]&&ue[V].gt(1)&&N.push({id:`prestige_${V}`,name:B.name,getMultiplier:()=>ue[V]||l(1),appliesTo:O=>O===ie,isAdditive:B.isAdditive,source:"evolution"})}):B.appliesTo&&B.appliesTo.length>0&&!B.appliesTo.includes("global")&&N.push({id:`prestige_${B.id}`,name:B.name,getMultiplier:()=>e.getUpgradeMultiplier(B.id),appliesTo:ie=>{var V;return((V=B.appliesTo)==null?void 0:V.includes(ie))||!1},isAdditive:B.isAdditive,source:"evolution"}))}),N.push({id:"prestige_advancedEfficiency",name:"Advanced Efficiency",getMultiplier:()=>e.getUpgradeMultiplier("strongerSoldiers"),appliesTo:B=>{const ie=t.getGenerator(B);return ie?ie.tier>4:!1},source:"evolution"}),N},f=()=>{const N=[];return e.evolutionUpgrades.forEach(j=>{j.level.eq(0)||j.isCombo&&(!j.effects||j.effects.length===0||j.effects.forEach(B=>{if(B.target==="ep")return;const ie=B.isMultiplier===void 0?j.isAdditive:!B.isMultiplier;B.target!=="global"?N.push({id:`combo_${j.id}_${B.target}`,name:j.name,getMultiplier:()=>B.multiplier(j.level),appliesTo:V=>V===B.target,isAdditive:ie,source:"evolution"}):B.target==="global"&&N.push({id:`combo_${j.id}_global`,name:j.name,getMultiplier:()=>B.multiplier(j.level),appliesTo:()=>!0,isAdditive:ie,source:"evolution"})}))}),N},p=N=>{let ue=l(1);return e.evolutionUpgrades.forEach(B=>{B.level.eq(0)||B.category==="level-requirement"&&(B.appliesTo.includes("global")||B.appliesTo.includes(N))&&(ue=ue.mul(B.effect(B.level)))}),ue},g=()=>{const N=[];return s.generatorUpgrades.filter(B=>!["Training","Expansion","Longevity","Automation","Fertility","Dominance"].some(V=>B.id.includes(V))).forEach(B=>{B.level.gt(0)&&N.push({id:`generator_${B.id}`,name:B.name,getMultiplier:()=>s.getUpgradeMultiplier(B.id),appliesTo:ie=>ie===B.generatorId,isAdditive:!1,source:"generatorUpgrade"})}),N.push({id:"honeydew-generator-boost",name:"Honeydew Infusion",getMultiplier:B=>{if(B==="ep"||B==="pheromone")return l(1);try{return i.getGlobalUpgradeLevel("honeydew-generator-boost")>0?l(2).pow(i.getGlobalUpgradeLevel("honeydew-generator-boost")):l(1)}catch(ie){return console.error("Error getting honeydew-generator-boost:",ie),l(1)}},appliesTo:B=>B!=="ep"&&B!=="pheromone",isAdditive:!1,source:"aphidFarm"}),N},w=()=>{const N=hn(),ue=Ts(),j=[];return N.equipmentSlots.forEach(B=>{if(B.item){const ie=N.inventory.find(V=>V.id===B.item);if(ie){const V=ue.getItemProductionModifiers(ie);V&&Object.entries(V).forEach(([O,te])=>{O!=="global"&&j.push({id:`equipment_${B.id}_${O}`,name:`${ie.name} (Lvl ${ie.level.toString()})`,getMultiplier:G=>G===O?te:Se.fromNumber(1),appliesTo:G=>G===O,isAdditive:!1,source:"equipment"})})}}}),j},C=()=>{const N=[{id:"tierBonus",name:"Tier Bonus",getMultiplier:j=>{const B=t.getGenerator(j);if(B&&B.tier>4){const ie=1+(B.tier-4)*.1;return l(ie)}return l(1)},appliesTo:j=>{const B=t.getGenerator(j);return B?B.tier>4:!1},isAdditive:!0,source:"evolution"},{id:"evolutionaryAdaptation",name:"Evolutionary Adaptation",getMultiplier:j=>{const B=e.getUpgrade("evolutionaryAdaptation");if(B&&B.level.gt(0)){const ie=e.evolutionCount;return l(1).add(ie.mul(.01))}return l(1)},appliesTo:j=>{const B=e.getUpgrade("evolutionaryAdaptation");return B?B.appliesTo.includes(j):!1},isAdditive:!0,source:"evolution"}],ue=n.totalSpecialModifiers;return ue.global&&ue.global.gt(1)&&N.push({id:"item_global_multiplier",name:"Global Production Bonus",getMultiplier:()=>ue.global,appliesTo:()=>!0,isAdditive:!1,source:"item"}),N},E=()=>{const N=[];return r.achievementList.filter(j=>j.completed&&j.modifiers&&j.modifiers.length>0).forEach(j=>{j.modifiers&&j.modifiers.forEach(B=>{N.push({id:`achievement_${j.id}_${B.target}`,name:j.name,getMultiplier:()=>B.multiplier,appliesTo:ie=>B.target==="global"?!0:B.target==="ep"?!1:ie===B.target,isAdditive:!0,source:"achievement"})})}),N},k=()=>{const N=Ml();Cr();const ue=Ls();let j=l(1);const B=N.shopItems;for(const ie of B){const V=N.getItemLevel(ie.id);if(V!==0)for(const O of ie.modifiers)O.target==="ep"&&V>=O.unlockLevel&&(j=j.mul(O.multiplier(V)))}try{ue.getGlobalUpgradeLevel("honeydew-ep-boost")>0&&(j=j.mul(l(1.5).pow(ue.getGlobalUpgradeLevel("honeydew-ep-boost"))))}catch(ie){console.error("Error calculating honeydew-ep-boost:",ie)}return j},A=()=>{try{let N=l(1),ue=l(1);const j=$e();j.gt(1)&&(N=N.add(j.minus(1)));const B=Ce();B.gt(1)&&(N=N.add(B.minus(1)));const ie=Oe();ie.gt(1)&&(N=N.add(ie.minus(1)));const V=ve();V.gt(1)&&(N=N.add(V.minus(1)));const O=fe();O.gt(1)&&(N=N.add(O.minus(1)));const te=H();te.gt(1)&&(N=N.add(te.minus(1)));const G=c.getBoostMultipliers();G.epGain.gt(1)&&(N=N.add(G.epGain.minus(1)));const ne=k();ne.gt(1)&&(N=N.add(ne.minus(1)));try{const he=Te("ep");he.gt(1)&&(N=N.add(he.minus(1)))}catch(he){console.error("Error calculating neurotrails EP boost:",he)}try{i.getGlobalUpgradeLevel("honeydew-ep-boost")>0&&(ue=ue.mul(l(1.5).pow(i.getGlobalUpgradeLevel("honeydew-ep-boost")))),i.getGlobalUpgradeLevel("honeydew-ep-boost-2")>0&&(ue=ue.mul(l(10).pow(i.getGlobalUpgradeLevel("honeydew-ep-boost-2"))))}catch(he){console.error("Error calculating honeydew-ep-boost:",he)}try{ue=ue.mul(u.epMultiplier)}catch(he){console.error("Error applying daily reward EP boost:",he)}try{const he=x();he.gt(1)&&(ue=ue.mul(he))}catch(he){console.error("Error calculating ascension EP boost:",he)}return N.mul(ue)}catch(N){return console.error("Error calculating EP boost multiplier:",N),l(1)}},S=N=>{try{let ue=l(1);const j=o.shopItems;for(const B of j){const ie=o.getItemLevel(B.id);if(ie!==0)for(const V of B.modifiers)V.target===N&&ie>=V.unlockLevel&&(ue=ue.mul(V.multiplier(ie)))}return ue}catch(ue){return console.error(`Error calculating Pheromone Shop multiplier for ${N}:`,ue),l(1)}},T=()=>{try{let N=l(1);const ue=o.shopItems;for(const j of ue){const B=o.getItemLevel(j.id);if(B!==0)for(const ie of j.modifiers)ie.target==="global"&&B>=ie.unlockLevel&&(N=N.mul(ie.multiplier(B)))}return N}catch(N){return console.error("Error calculating Pheromone Shop Global multiplier:",N),l(1)}},R=()=>{const N=Ls(),ue=Qs();let j=l(1),B=l(1);const ie=o.shopItems;for(const G of ie){const ne=o.getItemLevel(G.id);if(ne!==0){for(const he of G.modifiers)if(he.target==="pheromone"&&ne>=he.unlockLevel){const ye=he.multiplier(ne);j=j.add(ye.sub(1))}}}try{ue.completedQuests.forEach(G=>{G.rewards.forEach(ne=>{ne.type===Fs.MULTIPLIER&&ne.target==="pheromone"&&(j=j.add(l(ne.value).sub(1)))})})}catch(G){console.error("Error getting pheromone multipliers from quests:",G)}const V=e.evolutionUpgrades;V.forEach(G=>{if(G.level.eq(0)||G.category==="synergy")return;let ne=!1,he=l(1),ye=!1;if(G.isCombo&&G.effects){const ae=G.effects.find(de=>de.target==="pheromone");ae&&(ne=!0,he=ae.multiplier(G.level),ye=ae.isMultiplier!==!0)}!ne&&G.appliesTo.includes("pheromone")&&(ne=!0,he=G.effect(G.level),ye=G.isAdditive===!0),ne&&(ye?j=j.add(he.sub(1)):B=B.mul(he))}),V.filter(G=>G.category==="synergy"&&G.level.gt(0)&&G.synergyConfig&&G.appliesTo.includes("pheromone")).forEach(G=>{if(!G.synergyConfig)return;const ne=G.synergyConfig.countSource;if(ne)try{const he=Ht(),ye=kn(),ae=St();let de=ne({generatorStore:he,evolutionCount:ae.evolutionCount,aphidFarmStore:N,bossStore:ye});(G.id==="evolutionPower"||G.id==="evolutionaryInsight")&&(de.gt(0)?de=de.sqrt():de=l(0));const Me=G.synergyConfig.percentBoostPerItem,Le=G.level.mul(Me).mul(de);G.isAdditive!==!1?j=j.add(Le):B=B.mul(l(1).add(Le))}catch(he){console.error(`Error processing synergy upgrade ${G.id} for pheromone:`,he)}});try{N.getGlobalUpgradeLevel("honeydew-pheromone-boost")>0&&(B=B.mul(l(1.75).pow(N.getGlobalUpgradeLevel("honeydew-pheromone-boost")))),N.getGlobalUpgradeLevel("honeydew-pheromone-boost-2")>0&&(B=B.mul(l(15).pow(N.getGlobalUpgradeLevel("honeydew-pheromone-boost-2"))))}catch(G){console.error("Error calculating honeydew-pheromone-boost:",G)}B=B.mul(W()),B=B.mul($());const te=c.getBoostMultipliers();te.pheromoneGain.gt(1)&&(B=B.mul(te.pheromoneGain));try{const G=Te("pheromone");G.gt(1)&&(B=B.mul(G))}catch(G){console.error("Error calculating Neurotrails pheromone boost:",G)}return j.mul(B)},L=()=>{try{let N=l(1),ue=l(1);const j=o.shopItems;for(const ie of j){const V=o.getItemLevel(ie.id);if(V!==0)for(const O of ie.modifiers)O.target==="food"&&V>=O.unlockLevel&&(ue=ue.mul(O.multiplier(V)))}e.evolutionUpgrades.forEach(ie=>{ie.level.eq(0)||!ie.isCombo||!ie.effects||ie.effects.forEach(V=>{if(V.target==="food")if(V.isMultiplier){const O=V.multiplier(ie.level);ue=ue.mul(O)}else{const O=V.multiplier(ie.level);N=N.add(O.sub(1))}})});try{Qs().completedQuests.forEach(V=>{V.rewards.forEach(O=>{O.type===Fs.MULTIPLIER&&O.target==="food"&&(N=N.add(l(O.value).sub(1)))})})}catch(ie){console.error("Error getting food multipliers from quests:",ie)}return N.mul(ue)}catch(N){return console.error("Error calculating Food Production multiplier:",N),l(1)}},P=()=>{const N=[];return N.push({id:"pheromone_shop_global",name:"Pheromone Shop Global Bonus",getMultiplier:()=>T(),appliesTo:()=>!0,isAdditive:!1,source:"pheromoneShop"}),N.push({id:"pheromone_shop_generator",name:"Pheromone Shop Generator Bonus",getMultiplier:ue=>S(ue),appliesTo:()=>!0,isAdditive:!1,source:"pheromoneShop"}),N},I=()=>{const N=[];try{const ue=Qs();ue.completedQuests.length>0&&ue.completedQuests.forEach(j=>{j.rewards.forEach((B,ie)=>{B.type===Fs.MULTIPLIER&&B.target&&N.push({id:`quest_${j.id}_reward_${ie}`,name:`${j.title} Reward`,getMultiplier:()=>l(B.value),appliesTo:V=>B.target==="global"?!0:B.target==="food"||B.target==="pheromone"?!1:V===B.target,isAdditive:!0,source:"quest"})})})}catch(ue){console.error("Error retrieving quest multipliers:",ue)}return N},D=()=>{Wt();const N=[];return N.push({id:"ascension_global_production",name:"Ascension Global Production",getMultiplier:()=>U(),appliesTo:()=>!0,source:"ascension"}),["worker","nursery","queenChamber","colony","megacolony","hivemind","antopolis","alateHatchery"].forEach(j=>{const B=M(j);B.gt(1)&&N.push({id:`ascension_${j}_multiplier`,name:`Ascension ${j.charAt(0).toUpperCase()+j.slice(1)} Boost`,getMultiplier:()=>B,appliesTo:ie=>ie===j,source:"ascension"})}),N},U=()=>{try{return Wt().getGlobalProductionMultiplier()}catch(N){return console.error("Error calculating Ascension global boost:",N),l(1)}},M=N=>{try{return Wt().getAscensionEffectValue(N)||l(1)}catch(ue){return console.error(`Error calculating Ascension ${N} boost:`,ue),l(1)}},x=()=>{try{return Wt().getEpGainMultiplier()}catch(N){return console.error("Error calculating Ascension EP boost:",N),l(1)}},$=()=>{try{return Wt().getPheromoneGainMultiplier()}catch(N){return console.error("Error calculating Ascension pheromone boost:",N),l(1)}},Z=()=>{try{return Wt().getUpgradeCostReduction()}catch(N){return console.error("Error calculating Ascension upgrade cost reduction:",N),l(1)}},me=()=>{const N=[],ue=c.getBoostMultipliers();return ue.global.gt(1)&&N.push({id:"collectibles_global",name:"Collectibles",getMultiplier:()=>ue.global,appliesTo:()=>!0,source:"collectible"}),Object.keys(ue.specificGenerator).length>0&&N.push({id:"collectibles_specific",name:"Collectibles (Specific)",getMultiplier:j=>ue.specificGenerator[j]||Se.fromNumber(1),appliesTo:j=>!!ue.specificGenerator[j],source:"collectible"}),N},re=()=>{try{const N=Fr(),ue=[];return["global","workers","worker","nursery","queenChamber","colony","megacolony","hivemind","antopolis","pheromone","ep","regen","alateHatchery","damage","health","defense","neurotrail_steps","aphidYield","aphidGrowth","newFieldCost","cycle_trips","generator_upgrade_cost"].forEach(B=>{const ie=N.getBoostMultiplier(B);ie.gt(1)&&ue.push({id:`neurotrails_${B}`,name:`Neurotrails Network (${B})`,getMultiplier:()=>ie,appliesTo:V=>B==="global"?!0:V===B,source:"neurotrails"})}),ue}catch(N){return console.error("Error getting neurotrails multipliers:",N),[]}},J=()=>{const N=[];try{u.epMultiplier.gt(1)&&N.push({id:"daily_reward_ep_boost",name:"Daily Reward EP Boost",getMultiplier:()=>u.epMultiplier,appliesTo:ue=>ue==="ep",isAdditive:!1,source:"dailyReward"})}catch(ue){console.error("Error getting daily reward multipliers:",ue)}return N},le=()=>{const N=[];try{const ue=ve();ue.gt(1)&&N.push({id:"evolution_count_bonus",name:"Evolution Count Bonus",getMultiplier:()=>ue,appliesTo:j=>j==="ep",isAdditive:!0,source:"evolution"})}catch(ue){console.error("Error getting evolution bonus multipliers:",ue)}return N},se=()=>{const N=[];try{const ue=fe();ue.gt(1)&&N.push({id:"queen_chamber_ep_boost",name:"Queen Chamber Evolution Bonus",getMultiplier:()=>ue,appliesTo:j=>j==="ep",isAdditive:!0,source:"evolution"})}catch(ue){console.error("Error getting queen chamber multipliers:",ue)}return N},z=()=>{const N=[];try{i.getGlobalUpgradeLevel("honeydew-ep-boost")>0&&N.push({id:"honeydew-ep-boost",name:"Honeydew EP Boost",getMultiplier:()=>l(1.5).pow(i.getGlobalUpgradeLevel("honeydew-ep-boost")),appliesTo:ue=>ue==="ep",isAdditive:!1,source:"aphidFarm"}),i.getGlobalUpgradeLevel("honeydew-ep-boost-2")>0&&N.push({id:"honeydew-ep-boost-2",name:"Honeydew EP Boost II",getMultiplier:()=>l(10).pow(i.getGlobalUpgradeLevel("honeydew-ep-boost-2")),appliesTo:ue=>ue==="ep",isAdditive:!1,source:"aphidFarm"}),i.getGlobalUpgradeLevel("honeydew-pheromone-boost")>0&&N.push({id:"honeydew-pheromone-boost",name:"Honeydew Pheromone Boost",getMultiplier:()=>l(1.75).pow(i.getGlobalUpgradeLevel("honeydew-pheromone-boost")),appliesTo:ue=>ue==="pheromone",isAdditive:!1,source:"aphidFarm"}),i.getGlobalUpgradeLevel("honeydew-pheromone-boost-2")>0&&N.push({id:"honeydew-pheromone-boost-2",name:"Honeydew Pheromone Boost II",getMultiplier:()=>l(15).pow(i.getGlobalUpgradeLevel("honeydew-pheromone-boost-2")),appliesTo:ue=>ue==="pheromone",isAdditive:!1,source:"aphidFarm"})}catch(ue){console.error("Error getting Aphid Farm specific multipliers:",ue)}return N},ce=(N=!1)=>{let ue=[...d(),...g(),...w(),...C(),...I(),...D(),...me(),...m(),...f(),...P(),...re(),...J(),...le(),...se(),...z()];return N||(ue=[...ue,...E()]),ue},pe=(N,ue=!1)=>{const j=ce(ue);let B=l(1),ie=[];for(const O of j)if(O.appliesTo(N)){let te=O.getMultiplier(N);O.isAdditive?te.eq(1)||(B=B.add(te.sub(1))):te.eq(1)||ie.push(te)}let V=B;for(const O of ie)V=V.mul(O);return V},_e=(N,ue=!1)=>pe(N,ue),Ee=N=>be(N,2)+"x",Ue=(N,ue=!1)=>{const j=_e(N,ue);return Ee(j)},ze=(N,ue=!1)=>{const j=[],B=ce(ue);for(const ie of B)if(ie.appliesTo(N)){const V=ie.getMultiplier(N);if(!V.eq(1)){let O=ie.id;ie.source&&!ie.id.includes(ie.source)&&(O=`${ie.source}_${ie.id}`),j.push({name:ie.name,value:V,formatted:Ee(V),id:O,additive:ie.isAdditive??!1,source:ie.source})}}return j.sort((ie,V)=>{const O=ie.value.gt(1)?ie.value.sub(1):l(1).sub(ie.value);return(V.value.gt(1)?V.value.sub(1):l(1).sub(V.value)).cmp(O)})},Re=N=>{let ue=l(1);const j=E();for(const B of j)B.appliesTo(N)&&(ue=ue.mul(B.getMultiplier(N)));return ue},$e=()=>{const N=hn(),ue=Ts();let j=Se.fromNumber(1);return N.equipmentSlots.forEach(B=>{if(B.item){const ie=N.inventory.find(V=>V.id===B.item);if(ie){const V=ue.getItemSpecialModifiers(ie);V!=null&&V.epBoost&&(j=j.mul(V.epBoost))}}}),j},Ce=()=>{const N=e.evolutionUpgrades;let ue=l(1),j=l(1);N.forEach(B=>{var ie,V;B.level.eq(0)||((ie=B.effects)==null||ie.forEach(O=>{if(O.target==="ep")if(O.isMultiplier){const te=O.multiplier(B.level);j=j.mul(te)}else{const te=O.multiplier(B.level);ue=ue.add(te.sub(1))}}),B.isCombo||(V=B.appliesTo)==null||V.forEach(O=>{var te,G;if(O==="ep")if(B.isAdditive){const ne=((te=B.effect)==null?void 0:te.call(B,B.level))||l(1);ue=ue.add(ne.sub(1))}else{const ne=((G=B.effect)==null?void 0:G.call(B,B.level))||l(1);j=j.mul(ne)}}))});try{fe().gt(1)}catch(B){console.error("Error calculating generator upgrades EP boost:",B)}return ue.mul(j)},Oe=()=>{let N=l(1);return r.achievementList.filter(j=>j.completed&&j.modifiers&&j.modifiers.length>0).forEach(j=>{j.modifiers&&j.modifiers.forEach(B=>{B.target==="ep"&&(N=N.mul(B.multiplier))})}),N},ve=()=>{const N=e.evolutionCount;return l(1).add(N.div(10))},fe=()=>{var N;try{const ue=Ht(),j=tn(),B=St(),ie=ue.getGenerator("queenChamber");if(!ie||ie.manualPurchases.eq(0))return l(1);const V=j.getUpgrade("queenChamberEvolution");if(!V||V.level.eq(0))return l(1);const O=B.evolutionCount;if(O.eq(0))return l(1);const G=(((N=V.effect)==null?void 0:N.call(V,V.level))||l(0)).mul(ie.manualPurchases).mul(O);return l(1).add(G)}catch(ue){return console.error("Error calculating Queen Chamber EP boost:",ue),l(1)}},X=N=>{let ue=l(1);e.evolutionUpgrades.forEach(ie=>{if(!ie.level.eq(0))if(ie.isCombo)ie.isCombo&&ie.effects&&ie.effects.forEach(V=>{const O=V.category==="cost"||V.category===void 0&&V.multiplier(ie.level).lt(1);(V.target===N||V.target==="global")&&O&&(ue=ue.mul(V.multiplier(ie.level)))});else{if(ie.category!=="cost")return;ie.appliesTo&&ie.appliesTo.includes(N)&&(ue=ue.mul(e.getUpgradeMultiplier(ie.id)))}});const B=Z();return B.lt(1)&&(ue=ue.mul(B)),ue},H=()=>{try{const ue=Wt().getColonyMultiplierForTarget("ep");return l(ue)}catch(N){return console.error("Error calculating colony EP boost:",N),l(1)}},W=()=>{try{const ue=Wt().getColonyMultiplierForTarget("pheromone");return l(ue)}catch(N){return console.error("Error calculating colony pheromone boost:",N),l(1)}},ge=()=>{try{const ue=Wt().getColonyMultiplierForTarget("global");return l(ue)}catch(N){return console.error("Error calculating colony global boost:",N),l(1)}},Te=N=>{try{return Fr().getBoostMultiplier(N)}catch(ue){return console.error("Error getting neurotrails boost:",ue),l(1)}};return{getProductionMultiplier:_e,getFormattedMultiplier:Ue,getMultiplierBreakdown:ze,formatMultiplierValue:Ee,getCombinedAchievementMultiplier:Re,getItemEpBoost:$e,getUpgradesEpBoost:Ce,getAchievementEpBoost:Oe,getEPBoostMultiplier:A,getQueenChamberEPBoost:fe,getCostMultipliers:X,getAchievementMultipliers:E,getFoodProductionMultiplier:L,getPheromoneGainMultiplier:R,getPheromoneShopEpMultiplier:k,getPheromoneShopGlobalMultiplier:T,getPheromoneShopGeneratorMultiplier:S,getLevelRequirementMultipliers:p,loadState:N=>{},getState:()=>({foodMultiplier:L().toString(),pheromoneMultiplier:R().toString(),epMultiplier:k().toString()}),getColonyEPBoost:H,getColonyPheromoneBoost:W,getColonyGlobalBoost:ge,getAscensionGlobalBoost:U,getAscensionEPBoost:x,getAscensionPheromoneBoost:$,getAscensionUpgradeCostReduction:Z,getNeurotrailsBoost:Te,getNeurotrailsGlobalBoost:()=>Te("global")}}),tn=Es("generatorUpgrade",()=>{const t=Y({worker:l(1),nursery:l(1),queenChamber:l(1),colony:l(1),megacolony:l(1),hivemind:l(1),antopolis:l(1),alateHatchery:l(1)}),e=Y({worker:l(0),nursery:l(0),queenChamber:l(0),colony:l(0),megacolony:l(0),hivemind:l(0),antopolis:l(0),alateHatchery:l(0)}),s=Y({worker:l(0),nursery:l(0),queenChamber:l(0),colony:l(0),megacolony:l(0),hivemind:l(0),antopolis:l(0),alateHatchery:l(0)}),n=Y([]),r=(z,ce)=>{let pe,_e;switch(z){case"worker":pe=l(5),_e=1.5;break;case"nursery":return pe=l(1e3),_e=1.1,l(pe).mul(l(2).pow(l(ce).pow(2).div(2)));case"queenChamber":case"hivemind":case"antopolis":pe=l(10),_e=1.3;break;case"colony":pe=l(5),_e=1.2;break;case"megacolony":case"alateHatchery":return pe=l(1e3),_e=1.1,l(pe).mul(l(2).pow(l(ce).pow(2).div(1.2)));default:pe=l(100),_e=1.5}const Ee=pe.mul(ce.pow(_e));try{const ze=sn().getLevelRequirementMultipliers(z);return Ee.mul(ze)}catch(Ue){return console.error("Error applying level requirement multiplier:",Ue),Ee}},o=Y(T8),i=z=>o.value.filter(ce=>ce.generatorId===z),c=z=>o.value.find(ce=>ce.id===z),u=z=>{var pe;const ce=c(z);return ce?((pe=ce==null?void 0:ce.effect)==null?void 0:pe.call(ce,ce.level))??l(1):l(1)},d=z=>{const ce=o.value.filter(_e=>_e.generatorId===z),pe={};return ce.forEach(_e=>{var Ee;pe[_e.id]=((Ee=_e.effect)==null?void 0:Ee.call(_e,_e.level))??l(1)}),pe},m=(z,ce,pe=[])=>{const _e=`preset_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;pe.length>0&&(n.value=n.value.map(Ue=>Ue.generatorId===ce?{...Ue,isActive:!1}:Ue));const Ee={id:_e,name:z,generatorId:ce,upgradeIds:pe,isActive:pe.length>0,lastPurchasedIndex:-1};return n.value.push(Ee),Ee},f=(z,ce)=>{const pe=n.value.findIndex(_e=>_e.id===z);if(pe===-1)return!1;if(ce.isActive){const _e=n.value[pe].generatorId;n.value=n.value.map(Ee=>Ee.id!==z&&Ee.generatorId===_e?{...Ee,isActive:!1}:Ee)}return n.value[pe]={...n.value[pe],...ce},!0},p=z=>{const ce=n.value.length;return n.value=n.value.filter(pe=>pe.id!==z),n.value.length<ce},g=z=>n.value.filter(ce=>ce.generatorId===z),w=z=>n.value.find(ce=>ce.generatorId===z&&ce.isActive)||null,C=z=>{const ce=n.value.find(pe=>pe.id===z);return ce?(n.value=n.value.map(pe=>pe.generatorId===ce.generatorId?{...pe,isActive:pe.id===z}:pe),!0):!1},E=(z,ce)=>{const _e=Ht().generators.find(ze=>ze.id===z);if(_e!=null&&_e.count.eq(0))return;s.value[z]=s.value[z].add(ce);const Ee=t.value[z],Ue=r(z,Ee);s.value[z].gte(Ue)&&(t.value[z]=t.value[z].add(1),s.value[z]=s.value[z].sub(Ue),e.value[z]=e.value[z].add(1))},k=z=>{E("worker",l(z))},A=z=>{E("nursery",z)},S=z=>{typeof z=="number"?E("queenChamber",l(z)):E("queenChamber",z)},T=z=>{typeof z=="number"?E("colony",l(z)):E("colony",z)},R=z=>{E("megacolony",z)},L=z=>{typeof z=="number"?E("hivemind",l(z)):E("hivemind",z)},P=z=>{typeof z=="number"?E("antopolis",l(z)):E("antopolis",z)},I=z=>{typeof z=="number"?E("alateHatchery",l(z)):E("alateHatchery",z)},D=z=>{var Ue;const ce=c(z);if(!ce||ce.maxLevel!==null&&ce.level.gte(ce.maxLevel))return!1;const _e=St().getUpgradeMultiplier("generatorUpgradeCostReduction"),Ee=ce.cost.mul(_e);return e.value[ce.generatorId].lt(Ee)?!1:(e.value[ce.generatorId]=e.value[ce.generatorId].sub(Ee),ce.level=ce.level.add(1),T(1),(Ue=ce.apply)==null||Ue.call(ce),!0)},U=()=>({generatorLevels:Object.entries(t.value).reduce((z,[ce,pe])=>(M(ce)&&(z[ce]=pe.toString()),z),{}),generatorPoints:Object.entries(e.value).reduce((z,[ce,pe])=>(M(ce)&&(z[ce]=pe.toString()),z),{}),levelProgress:Object.entries(s.value).reduce((z,[ce,pe])=>(M(ce)&&(z[ce]=pe.toString()),z),{}),upgrades:o.value.map(z=>({id:z.id,level:z.level.toString()})),presets:n.value}),M=z=>["worker","nursery","queenChamber","colony","megacolony","hivemind","antopolis","alateHatchery"].includes(z);return{generatorLevels:t,generatorPoints:e,levelProgress:s,generatorUpgrades:o,upgradePresets:n,getUpgradesForGenerator:i,getUpgrade:c,getUpgradeMultiplier:u,getMultipliersForGenerator:d,updateWorkerProgress:k,updateNurseryProgress:A,updateQueenChamberProgress:S,updateColonyProgress:T,updateMegacolonyProgress:R,updateHivemindProgress:L,updateAntopolisProgress:P,updateAlateHatcheryProgress:I,purchaseUpgrade:D,resetProgress:()=>{const z=Object.keys(t.value).filter(M);z.forEach(ce=>{t.value[ce]=l(1)}),z.forEach(ce=>{e.value[ce]=l(0)}),z.forEach(ce=>{s.value[ce]=l(0)}),o.value.forEach(ce=>{ce.level=l(0)})},formatLevel:z=>be(t.value[z],0),formatPoints:z=>be(e.value[z],0),formatProgressPercentage:z=>{const ce=t.value[z],pe=r(z,ce),Ee=s.value[z].div(pe).mul(100).toNumber();return Math.min(100,Math.round(Ee))},formatNextLevelRequirement:z=>{const ce=t.value[z],pe=r(z,ce);return be(pe,0)},formatLevelRequirementReduction:z=>{try{const pe=sn().getLevelRequirementMultipliers(z);if(pe.gte(1))return"0%";const _e=l(1).sub(pe).mul(100);return`${be(_e,1)}%`}catch(ce){return console.error("Error formatting level requirement reduction:",ce),"0%"}},getState:U,loadState:z=>{z.generatorLevels&&Object.entries(z.generatorLevels).forEach(([ce,pe])=>{M(ce)&&(typeof pe=="string"||typeof pe=="number")&&(t.value[ce]=l(pe))}),z.generatorPoints&&Object.entries(z.generatorPoints).forEach(([ce,pe])=>{M(ce)&&(typeof pe=="string"||typeof pe=="number")&&(e.value[ce]=l(pe))}),z.levelProgress&&Object.entries(z.levelProgress).forEach(([ce,pe])=>{M(ce)&&(typeof pe=="string"||typeof pe=="number")&&(s.value[ce]=l(pe))}),z.upgrades&&Array.isArray(z.upgrades)&&z.upgrades.forEach(ce=>{const pe=c(ce.id);pe&&ce.level&&(typeof ce.level=="string"||typeof ce.level=="number")&&(pe.level=l(ce.level))}),z.presets&&Array.isArray(z.presets)&&(n.value=z.presets)},createPreset:m,updatePreset:f,deletePreset:p,getPresetsForGenerator:g,getActivePresetForGenerator:w,setActivePreset:C,updatePresetLastPurchasedIndex:(z,ce)=>{const pe=n.value.findIndex(_e=>_e.id===z);return pe===-1?!1:(n.value[pe].lastPurchasedIndex=ce,!0)}}});function aL(){const t=Or(),e=r=>{const o=t.achievementList.filter(c=>c.completed&&c.modifiers&&c.modifiers.length>0),i=[];return o.forEach(c=>{c.modifiers&&c.modifiers.forEach(u=>{(u.target===r||r!=="ep"&&u.target==="global")&&i.push({...u,achievementName:c.name,achievementId:c.id})})}),i},s=r=>{const o=e(r);return o.length===0?l(1):o.reduce((i,c)=>i.mul(c.multiplier),l(1))};return{getModifiersByTarget:e,getTotalMultiplier:s,getModifierSummary:r=>{const o=e(r);if(o.length===0)return"";const c=s(r).sub(1).mul(100);let u=r;return r==="global"?u="All generators":r==="ep"?u="Evolution points":r==="worker"?u="Workers":r==="nursery"?u="Nurseries":r==="queenChamber"?u="Queen chambers":r==="colony"?u="Colonies":r==="megacolony"?u="Megacolonies":r==="hivemind"?u="Hiveminds":r==="antopolis"?u="Antopolis":r==="alateHatchery"&&(u="Alate Hatcheries"),`${u} +${Lt(c)} from ${o.length} achievement${o.length>1?"s":""}`}}}function Pi(){const t=sn(),{getTotalMultiplier:e,getModifiersByTarget:s}=aL(),n=uf(),r=Ls(),o=Ml(),i=Hu(),c=k=>{if(t.getCombinedAchievementMultiplier){const T=t.getCombinedAchievementMultiplier("global"),R=t.getCombinedAchievementMultiplier(k);return T.mul(R)}const A=e("global"),S=e(k);return A.mul(S)},u=k=>{const A=s("global"),S=s(k),T=[];return A.forEach(R=>{const L=R;T.push({name:`${L.achievementName||"Achievement"} (Global)`,value:R.multiplier,formatted:t.formatMultiplierValue(R.multiplier),id:`achievement_${L.achievementId||"unknown"}_global`})}),S.forEach(R=>{const L=R;T.push({name:L.achievementName||"Achievement",value:R.multiplier,formatted:t.formatMultiplierValue(R.multiplier),id:`achievement_${L.achievementId||"unknown"}_${k}`})}),T.sort((R,L)=>L.value.cmp(R.value))},d=()=>{const k=[],A=t.getPheromoneShopEpMultiplier();A.gt(1)&&k.push({name:"Pheromone Shop EP Bonus",value:A,formatted:t.formatMultiplierValue(A),id:"pheromone_shop_ep"});const S=t.getFoodProductionMultiplier();S.gt(1)&&k.push({name:"Pheromone Shop Food Production Bonus",value:S,formatted:t.formatMultiplierValue(S),id:"pheromone_shop_food"});const T=t.getPheromoneGainMultiplier();T.gt(1)&&k.push({name:"Pheromone Shop Essence Gain Bonus",value:T,formatted:t.formatMultiplierValue(T),id:"pheromone_shop_pheromone"});const R=t.getPheromoneShopGlobalMultiplier();return R.gt(1)&&k.push({name:"Pheromone Shop Global Production Bonus",value:R,formatted:t.formatMultiplierValue(R),id:"pheromone_shop_global"}),k.sort((L,P)=>P.value.cmp(L.value))},m=()=>{const k=[],A=t.getItemEpBoost();A.gt(1)&&k.push({name:"Equipment EP Bonus",value:A,formatted:t.formatMultiplierValue(A),id:"item_ep_boost"});const S=t.getUpgradesEpBoost();S.gt(1)&&k.push({name:"Evolution Upgrades EP Bonus",value:S,formatted:t.formatMultiplierValue(S),id:"upgrades_ep_boost"});const T=t.getAchievementEpBoost();T.gt(1)&&k.push({name:"Achievement EP Bonus",value:T,formatted:t.formatMultiplierValue(T),id:"achievement_ep_boost"});const R=n.getBoostMultipliers();R.epGain.gt(1)&&k.push({name:"Collectibles EP Bonus",value:R.epGain,formatted:t.formatMultiplierValue(R.epGain),id:"collectible_ep_boost"});const P=St().evolutionCount,I=l(1).add(P.div(10));I.gt(1)&&k.push({name:"Metamorphosis Count Bonus",value:I,formatted:t.formatMultiplierValue(I),id:"evolution_count_bonus"});const D=t.getQueenChamberEPBoost();D.gt(1)&&k.push({name:"Royal Evolution Upgrade Bonus",value:D,formatted:t.formatMultiplierValue(D),id:"queen_chamber_ep_boost"});const U=t.getColonyEPBoost();U.gt(1)&&k.push({name:"Colony Bonus",value:U,formatted:t.formatMultiplierValue(U),id:"colony_ep_boost"});const M=t.getAscensionEPBoost();M.gt(1)&&k.push({name:"Ascension Tree Bonus",value:M,formatted:t.formatMultiplierValue(M),id:"ascension_ep_boost",additive:!1});const x=t.getPheromoneShopEpMultiplier();x.gt(1)&&k.push({name:"Pheromone Shop Bonus",value:x,formatted:t.formatMultiplierValue(x),id:"pheromone_shop_ep_boost"});try{const $=t.getNeurotrailsBoost("ep");$.gt(1)&&k.push({name:"Neurotrails Network Bonus",value:$,formatted:t.formatMultiplierValue($),id:"neurotrails_ep_boost"})}catch($){console.error("Error calculating Neurotrails EP boost for breakdown:",$)}try{let $=l(1);if(r.getGlobalUpgradeLevel("honeydew-ep-boost")>0){const Z=l(1.5).pow(r.getGlobalUpgradeLevel("honeydew-ep-boost"));$=$.mul(Z)}if(r.getGlobalUpgradeLevel("honeydew-ep-boost-2")>0){const Z=l(10).pow(r.getGlobalUpgradeLevel("honeydew-ep-boost-2"));$=$.mul(Z)}$.gt(1)&&k.push({name:"Aphid Farm Bonus",value:$,formatted:t.formatMultiplierValue($),id:"aphid_farm_ep_boost"})}catch($){console.error("Error calculating Aphid Farm EP boost for breakdown:",$)}try{const Z=hf().epMultiplier;Z.gt(1)&&k.push({name:"Daily Login Streak Bonus",value:Z,formatted:t.formatMultiplierValue(Z),id:"daily_reward_ep_boost"})}catch($){console.error("Error calculating Daily Reward EP boost for breakdown:",$)}return k.sort(($,Z)=>Z.value.cmp($.value))},f=()=>{const k=[],A=o.shopItems;let S=l(0);for(const Z of A){const me=o.getItemLevel(Z.id);if(me!==0)for(const re of Z.modifiers)re.target==="pheromone"&&me>=re.unlockLevel&&(S=S.add(re.multiplier(me).sub(1)))}S.gt(0)&&k.push({name:"Pheromone Shop Bonus",value:l(1).add(S),formatted:t.formatMultiplierValue(l(1).add(S)),id:"pheromone_shop_bonus",additive:!0});const T=St(),R=T.evolutionUpgrades;let L=l(0),P=l(1),I=!1,D=!1;R.forEach(Z=>{if(Z.level.eq(0))return;let me=Z.appliesTo.includes("pheromone"),re=!1;if(Z.isCombo&&Z.effects&&Z.effects.forEach(J=>{if(J.target==="pheromone")if(me=!0,re=!0,J.isMultiplier){D=!0;const le=J.multiplier(Z.level);P=P.mul(le)}else{I=!0;const le=J.multiplier(Z.level);L=L.add(le.sub(1))}}),me&&!re)if(!(Z.isAdditive===!0)){D=!0;const se=Z.effect(Z.level);P=P.mul(se)}else{I=!0;const se=Z.effect(Z.level);L=L.add(se.sub(1))}}),I&&k.push({name:"Evolution Upgrades Bonus (Additive)",value:l(1).add(L),formatted:t.formatMultiplierValue(l(1).add(L)),id:"evolution_pheromone_boost_additive",additive:!0}),D&&P.gt(1)&&k.push({name:"Evolution Upgrades Bonus (Multiplicative)",value:P,formatted:t.formatMultiplierValue(P),id:"evolution_pheromone_boost_multiplicative",additive:!1}),R.filter(Z=>Z.category==="synergy"&&Z.level.gt(0)&&Z.synergyConfig&&Z.appliesTo.includes("pheromone")).forEach(Z=>{try{if(!Z.synergyConfig||!Z.synergyConfig.countSource)return;const me=Ht(),re=kn(),J=Ls();let le=Z.synergyConfig.countSource({generatorStore:me,evolutionCount:T.evolutionCount,aphidFarmStore:J,bossStore:re});(Z.id==="evolutionPower"||Z.id==="evolutionaryInsight")&&(le.gt(0)?le=le.sqrt():le=l(0));const se=Z.synergyConfig.percentBoostPerItem,z=Z.level.mul(se).mul(le);if(z.gt(0)){const ce=Z.isAdditive!==!1;k.push({name:`${Z.name} Bonus`,value:l(1).add(z),formatted:t.formatMultiplierValue(l(1).add(z)),id:`synergy_${Z.id}`,additive:ce})}}catch(me){console.error(`Error adding synergy upgrade ${Z.id} to pheromone breakdown:`,me)}});const M=t.getColonyPheromoneBoost();M.gt(1)&&k.push({name:"Colony Bonus",value:M,formatted:t.formatMultiplierValue(M),id:"colony_pheromone_boost",additive:!1});const x=t.getAscensionPheromoneBoost();x.gt(1)&&k.push({name:"Ascension Tree Bonus",value:x,formatted:t.formatMultiplierValue(x),id:"ascension_pheromone_boost",additive:!1});const $=n.getBoostMultipliers();$.pheromoneGain.gt(1)&&k.push({name:"Collectibles Bonus",value:$.pheromoneGain,formatted:t.formatMultiplierValue($.pheromoneGain),id:"collectible_pheromone_boost",additive:!1});try{let Z=l(1);if(r.getGlobalUpgradeLevel("honeydew-pheromone-boost")>0){const me=l(1.75).pow(r.getGlobalUpgradeLevel("honeydew-pheromone-boost"));Z=Z.mul(me)}if(r.getGlobalUpgradeLevel("honeydew-pheromone-boost-2")>0){const me=l(15).pow(r.getGlobalUpgradeLevel("honeydew-pheromone-boost-2"));Z=Z.mul(me)}Z.gt(1)&&k.push({name:"Aphid Farm Bonus",value:Z,formatted:t.formatMultiplierValue(Z),id:"aphid_farm_pheromone_boost",additive:!1})}catch(Z){console.error("Error calculating Aphid Farm pheromone boost for breakdown:",Z)}try{const Z=t.getNeurotrailsBoost("pheromone");Z.gt(1)&&k.push({name:"Neurotrails Network Bonus",value:Z,formatted:t.formatMultiplierValue(Z),id:"neurotrails_pheromone_boost",additive:!1})}catch(Z){console.error("Error calculating Neurotrails pheromone boost for breakdown:",Z)}return k.sort((Z,me)=>Z.additive===!0&&(me.additive===!1||me.additive===void 0)?-1:(Z.additive===!1||Z.additive===void 0)&&me.additive===!0?1:me.value.cmp(Z.value))},p=(k,A=!1)=>{const S=t.getMultiplierBreakdown(k,A),T=new Map;S.forEach(L=>{T.set(L.id||L.name,{...L,formatted:t.formatMultiplierValue(L.value)})});const R=c(k);if(R.gt(1)&&T.set("achievement_combined",{name:"Achievement Bonuses",value:R,formatted:t.formatMultiplierValue(R),id:"achievement_combined"}),k==="worker"){const L=i.moraleBoostMultiplier;(L.gt(1)||L.lt(1))&&T.set("ant_morale",{name:"Ant Morale",value:L,formatted:t.formatMultiplierValue(L),id:"ant_morale",additive:!1})}return Array.from(T.values()).sort((L,P)=>P.value.cmp(L.value))},g=k=>{const A=t.getProductionMultiplier(k,!0),S=c(k);let T=A.mul(S);return k==="worker"&&(T=T.mul(i.moraleBoostMultiplier)),T};return{getEnhancedMultiplierBreakdown:p,getFormattedTotalMultiplier:k=>{const A=g(k);return t.formatMultiplierValue(A)},getTotalMultiplier:g,getAchievementMultiplier:c,getAchievementMultiplierBreakdown:u,getPheromoneShopMultiplierBreakdown:d,getAscensionMultiplierBreakdown:()=>{const k=[],A=t.getAscensionEPBoost();A.gt(1)&&k.push({name:"Ascension Tree EP Gain Bonus",value:A,formatted:t.formatMultiplierValue(A),id:"ascension_ep_boost"});const S=t.getAscensionPheromoneBoost();S.gt(1)&&k.push({name:"Ascension Tree Pheromone Gain Bonus",value:S,formatted:t.formatMultiplierValue(S),id:"ascension_pheromone_boost"});const T=t.getAscensionGlobalBoost();T.gt(1)&&k.push({name:"Ascension Tree Global Production Bonus",value:T,formatted:t.formatMultiplierValue(T),id:"ascension_global_boost"});const R=t.getAscensionUpgradeCostReduction();if(R.lt(1)){const L=l(1).sub(R).mul(100);k.push({name:"Ascension Tree Upgrade Cost Reduction",value:R,formatted:`-${L.toFixed(0)}%`,id:"ascension_cost_reduction"})}return k.sort((L,P)=>L.value.lt(1)&&P.value.lt(1)?L.value.cmp(P.value):L.value.lt(1)?-1:P.value.lt(1)?1:P.value.cmp(L.value))},getEPMultiplierBreakdown:m,getPheromoneGainMultiplierBreakdown:f,getNeurotrailsMultiplierBreakdown:()=>{const k=[];return["global","workers","worker","nursery","queenChamber","colony","megacolony","hivemind","antopolis","pheromone","ep","regen","alateHatchery","damage","health","defense"].forEach(S=>{try{const T=t.getNeurotrailsBoost(S);T.gt(1)&&k.push({name:`Neurotrails ${S.charAt(0).toUpperCase()+S.slice(1)} Bonus`,value:T,formatted:t.formatMultiplierValue(T),id:`neurotrails_${S}_boost`})}catch(T){console.error(`Error calculating Neurotrails ${S} boost for breakdown:`,T)}}),k.sort((S,T)=>T.value.cmp(S.value))},getProductionMultiplier:t.getProductionMultiplier,getFormattedMultiplier:t.getFormattedMultiplier,getMultiplierBreakdown:t.getMultiplierBreakdown,getPheromoneShopGlobalMultiplier:t.getPheromoneShopGlobalMultiplier,getPheromoneShopGeneratorMultiplier:t.getPheromoneShopGeneratorMultiplier,getFoodProductionMultiplier:t.getFoodProductionMultiplier,getPheromoneGainMultiplier:t.getPheromoneGainMultiplier,getPheromoneShopEpMultiplier:t.getPheromoneShopEpMultiplier,formatMultiplierValue:t.formatMultiplierValue,getAscensionGlobalBoost:t.getAscensionGlobalBoost,getAscensionEPBoost:t.getAscensionEPBoost,getAscensionPheromoneBoost:t.getAscensionPheromoneBoost,getAscensionUpgradeCostReduction:t.getAscensionUpgradeCostReduction,getItemEpBoost:t.getItemEpBoost,getUpgradesEpBoost:t.getUpgradesEpBoost,getAchievementEpBoost:t.getAchievementEpBoost,getQueenChamberEPBoost:t.getQueenChamberEPBoost,getColonyEPBoost:t.getColonyEPBoost,getNeurotrailsBoost:t.getNeurotrailsBoost,getNeurotrailsGlobalBoost:t.getNeurotrailsGlobalBoost}}function lL(){const t=tn(),e=Ht(),s=i=>{const u=t.getUpgradesForGenerator(i).filter(d=>d.maxLevel&&d.level.gte(d.maxLevel)?!1:t.generatorPoints[i].gte(d.cost));return u.sort((d,m)=>d.cost.eq(m.cost)?0:d.cost.lt(m.cost)?-1:1),u.length>0?u[0]:null},n=i=>{const c=t.getActivePresetForGenerator(i);if(!c||c.upgradeIds.length===0)return null;const d=((c.lastPurchasedIndex??-1)+1)%c.upgradeIds.length,m=c.upgradeIds[d],f=t.getUpgrade(m);return f?f.maxLevel&&f.level.gte(f.maxLevel)?(t.updatePresetLastPurchasedIndex(c.id,d),n(i)):t.generatorPoints[i].lt(f.cost)?null:{upgrade:f,index:d}:null};return{processAutoUpgrades:()=>{const i=e.generators;for(const c of i){if(!c.autoUpgradeEnabled||c.count.eq(0))continue;const u=c.id;try{const m=St(),f=`autoUpgrade${u.charAt(0).toUpperCase()+u.slice(1)}`;if(!m.getUpgradeMultiplier(f).gt(0))continue}catch(m){console.error(`Error checking auto-upgrade for ${u}:`,m);continue}const d=t.getActivePresetForGenerator(u);if(d&&d.upgradeIds.length>0){const m=n(u);if(m){const{upgrade:f,index:p}=m;if(t.purchaseUpgrade(f.id)){t.updatePresetLastPurchasedIndex(d.id,p);continue}}}if(!d||d.upgradeIds.length===0){const m=s(u);m&&t.purchaseUpgrade(m.id)}}},findCheapestUpgrade:s,findNextPresetUpgrade:n,hasAvailableUpgrades:i=>{const c=t.getActivePresetForGenerator(i);return c&&c.upgradeIds.length>0?n(i)!==null:s(i)!==null}}}const pJ=Object.freeze(Object.defineProperty({__proto__:null,useAutoUpgrade:lL},Symbol.toStringTag,{value:"Module"})),Ht=Es("generator",()=>{const t=Y([{id:"worker",name:"Worker Ant",description:"Gathers food and materials for the colony",tier:1,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(10),costGrowth:l(1.1),initialBaseProduction:l(10),unlocked:!0,purchasable:!1,icon:"i-heroicons-bug-ant",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"nursery",name:"Nursery",description:"Produces worker ants",tier:2,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(100),costGrowth:l(1.1),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-home-modern",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"queenChamber",name:"Queen Chamber",description:"Nurtures new queens",tier:3,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e3),costGrowth:l(1.1),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-crown",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"colony",name:"Colony",description:"Expands your ant empire",tier:4,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e4),costGrowth:l(1.1),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-building-storefront",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"megacolony",name:"Mega Colony",description:"A massive colony complex with advanced infrastructure",tier:5,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e5),costGrowth:l(1.2),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-building-office-2",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"hivemind",name:"Hive Mind",description:"A collective consciousness that coordinates all colonies",tier:6,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e6),costGrowth:l(1.2),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-cpu-chip",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"antopolis",name:"Antopolis",description:"An entire city-state of ants with advanced civilization",tier:7,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e7),costGrowth:l(1.2),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-building-library",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1},{id:"alateHatchery",name:"Alate Hatchery",description:"An entire city-state of ants with advanced civilization",tier:8,count:l(0),manualPurchases:l(0),selfReplicated:l(0),baseCost:l(1e8),costGrowth:l(1.3),initialBaseProduction:l(1),unlocked:!1,purchasable:!1,icon:"i-heroicons-building-library",autoPurchaseEnabled:!0,autoUpgradeEnabled:!1}]),e=Y(l(10)),s=q(()=>U("worker")),n=Y(0),r=5,o=se=>t.value.find(z=>z.id===se),i=q(()=>t.value.filter(se=>se.unlocked)),c=q(()=>{const z=Math.max(...t.value.filter(pe=>pe.unlocked).map(pe=>pe.tier))+1;return t.value.find(pe=>pe.tier===z)}),u=se=>{const z=o(se);return z?z.count.add(z.selfReplicated):l(0)},d=se=>{const z=o(se);if(!z)return l(0);let ce=l(1);try{const Ee=tn();if(se==="worker")ce=Ee.getUpgradeMultiplier("workerTraining");else if(se==="nursery")ce=Ee.getUpgradeMultiplier("nurseryExpansion");else if(se==="queenChamber")ce=Ee.getUpgradeMultiplier("queenChamberLongevity");else if(se==="colony")ce=Ee.getUpgradeMultiplier("colonyExpansion");else if(se==="megacolony"||se==="hivemind"||se==="antopolis")try{ce=St().getUpgradeMultiplier("strongerSoldiers")}catch(Ue){console.error("Error applying advanced generator cost reduction:",Ue)}}catch(Ee){console.error("Error applying cost reduction:",Ee)}const pe=ZP(z.tier,z.manualPurchases),_e=sn();return ce=ce.mul(_e.getCostMultipliers(se)),pe.mul(ce)},m=(se,z=1)=>{const ce=o(se);if(!ce||!ce.unlocked&&!ce.purchasable)return!1;if(se==="hivemind"){const _e=o("megacolony");if(!_e||_e.count.eq(0))return!1}else if(se==="antopolis"){const _e=o("hivemind");if(!_e||_e.count.eq(0))return!1}const pe=d(se);if(e.value.gte(pe)){e.value=e.value.sub(pe),ce.count=ce.count.add(z),ce.manualPurchases=ce.manualPurchases.add(z),p(ce.tier);try{tn().updateQueenChamberProgress(z)}catch(Ee){console.error("Error updating generator progress:",Ee)}Cr().checkProgression();try{Or().updateGeneratorCounts(se,ce.count)}catch(Ee){console.error("Error updating achievements:",Ee)}return!0}return!1},f=(se,z)=>{const ce=o(se);if(ce){ce.count=ce.count.add(z),ce.count.gte(10)&&p(ce.tier);try{Or().updateGeneratorCounts(se,ce.count)}catch(pe){console.error("Error updating achievements:",pe)}}},p=se=>{const z=t.value.find(pe=>pe.tier===se),ce=t.value.find(pe=>pe.tier===se+1);z&&ce&&!ce.unlocked&&z.count.gte(10)&&(ce.unlocked=!0)},g=se=>{const z=o(se);if(!z)return l(0);let ce=z.initialBaseProduction;try{const pe=tn(),_e=`${se}Base`,Ee=pe.getUpgrade(_e);Ee&&(se==="worker"?ce=ce.add(l(10).mul(Ee.level)):ce=ce.add(Ee.level))}catch(pe){console.error("Error calculating base production:",pe)}return ce},w=se=>g(se),C=(se,z,ce)=>{try{const pe=`${se}Reproduction`,_e=ce.getUpgradeMultiplier(pe);if(_e.gt(0)&&z>0&&Math.random()<_e.toNumber()){const Ue={nursery:"worker",queenChamber:"nursery",colony:"queenChamber",megacolony:"colony",hivemind:"megacolony",antopolis:"hivemind",alateHatchery:"antopolis"},ze={worker:"nursery",nursery:"queenChamber",queenChamber:"colony",colony:"megacolony",megacolony:"hivemind",hivemind:"antopolis",antopolis:"alateHatchery"};if(se==="worker"){const Ce=ze[se],Oe=o(Ce);if(Oe&&Oe.count.gt(0)){const X=U(Ce).mul(.01).floor(),H=X.gt(0)?X:l(1),W=o(se);return W&&(W.selfReplicated=W.selfReplicated.add(H)),H}const ve=o(se);return ve&&(ve.selfReplicated=ve.selfReplicated.add(1)),l(1)}const Re=ze[se];if(Re){const Ce=o(Re);if(Ce&&Ce.count.gt(0)){const ve=U(Re).mul(.01).floor(),fe=ve.gt(0)?ve:l(1),X=o(se);return X&&(X.selfReplicated=X.selfReplicated.add(fe)),fe}}const $e=o(se);return $e&&($e.selfReplicated=$e.selfReplicated.add(1)),l(1)}}catch(pe){console.error(`Error processing self-reproduction for ${se}:`,pe)}return l(0)},E=(se,z,ce,pe,_e)=>{if(_e.lte(0)||ce<=0)return;const Ee={worker:"nursery",nursery:"queenChamber",queenChamber:"colony",colony:"megacolony",megacolony:"hivemind",hivemind:"antopolis"},Ue=Math.floor(pe*_e.toNumber());if(Ue<=0)return;const ze=Ee[se];if(!ze){const fe=l(Ue);z.count=z.count.add(fe),z.selfReplicated=z.selfReplicated.add(fe);return}const Re=o(ze);if(!Re||Re.count.lte(0)){const fe=l(Ue);z.count=z.count.add(fe),z.selfReplicated=z.selfReplicated.add(fe);return}const Ce=U(ze).mul(.01).floor(),ve=(Ce.gt(0)?Ce:l(1)).mul(Ue);z.count=z.count.add(ve),z.selfReplicated=z.selfReplicated.add(ve)},k=se=>{try{const z=St(),ce={worker:"autoWorker",nursery:"autoNursery",queenChamber:"autoQueenChamber",colony:"autoColony",megacolony:"autoMegacolony",hivemind:"autoHivemind",antopolis:"autoAntopolis",alateHatchery:"autoAlateHatchery"},pe=(Ee,Ue)=>{if(!Ee.unlocked||!Ee.autoPurchaseEnabled)return;const ze=ce[Ee.id];if(!ze)return;const Re=z.getUpgradeMultiplier(ze);if(Re.gt(0))if(Ue){const $e=Math.min(100,se*Re.toNumber());for(let Ce=0;Ce<$e;Ce++)m(Ee.id,$e)}else for(let $e=0;$e<Re.toNumber();$e++)m(Ee.id,1)},_e=se>1;for(const Ee of[...t.value].reverse())pe(Ee,_e)}catch(z){console.error("Error applying auto-purchasing:",z)}},A=se=>{try{const z=Am();if(z.isProcessingRush)return;z.trackTick()}catch(z){console.error("Error tracking colony rush tick:",z)}},S=(se,z,ce,pe)=>{if(!se.unlocked||!se.count.gt(0))return;let _e=U(se.id);if(ce>1&&(_e=_e.mul(ce)),f(z.id,_e),ce<=1){const Ee=C(se.id,se.count.toNumber(),pe);Ee.gt(0)&&(se.count=se.count.add(Ee))}else{const Ee=`${se.id}Reproduction`,Ue=pe.getUpgradeMultiplier(Ee);E(se.id,se,se.count.toNumber(),ce,Ue)}},T=(se,z,ce,pe,_e=null)=>{if(!se.unlocked||!se.count.gt(0))return;let Ee=s.value;z>1&&(Ee=Ee.mul(z)),e.value=e.value.add(Ee);try{Qs().trackFoodGain(Ee)}catch(Ue){console.error("Error tracking food gain for quests:",Ue)}try{pe.updateNurseryProgress(Ee)}catch(Ue){console.error("Error updating nursery progress:",Ue)}if(z<=1){const Ue=C("worker",se.count.toNumber(),ce);Ue.gt(0)&&(se.count=se.count.add(Ue))}else{const ze=ce.getUpgradeMultiplier("workerReproduction");E("worker",se,se.count.toNumber(),z,ze)}_e&&_e.updateFoodStats(e.value,Ee)},R=(se=1)=>{const z=St(),ce=tn();if(k(se),A(),n.value+=1,n.value>=r){n.value=0;try{e3(async()=>{const{useAutoUpgrade:_e}=await Promise.resolve().then(()=>pJ);return{useAutoUpgrade:_e}},void 0).then(({useAutoUpgrade:_e})=>{const{processAutoUpgrades:Ee}=_e();Ee()}).catch(_e=>{console.error("Error processing auto-upgrades:",_e)})}catch(_e){console.error("Error importing auto-upgrade composable:",_e)}}for(let _e=t.value.length-1;_e>0;_e--){const Ee=t.value[_e],Ue=t.value[_e-1];p(Ee.tier),S(Ee,Ue,se,z)}if(se===1){const _e=t.value[0];T(_e,se,z,ce,Or());return}const pe=t.value[0];T(pe,se,z,ce)},L=se=>{const z=o(se);return z?be(z.count,0):"0"},P=se=>{const z=o(se);return z?be(z.manualPurchases,0):"0"},I=()=>be(e.value,2),D=se=>{try{const{getTotalMultiplier:z}=Pi();return z(se)}catch(z){return console.error("Error calculating production multiplier:",z),l(1)}},U=se=>{const z=o(se);if(!z)return l(0);const ce=w(se),pe=D(se);let _e=ce.mul(pe).mul(z.count.add(z.selfReplicated));if(se==="worker")try{const Ee=Hu();_e=_e.mul(Ee.moraleBoostMultiplier)}catch(Ee){console.error("Error applying morale boost:",Ee)}return _e},M=se=>{try{const{getFormattedTotalMultiplier:z}=Pi();return z(se)}catch(z){console.error("Error formatting production multiplier:",z);const ce=D(se);return`${be(ce,2)}x`}},x=se=>{const z=o(se);return z?(z.autoPurchaseEnabled=!z.autoPurchaseEnabled,!0):!1},$=se=>{const z=o(se);return z?(z.autoUpgradeEnabled=!z.autoUpgradeEnabled,!0):!1},Z=se=>{const z=o(se);return z?be(z.selfReplicated,0):"0"},me=se=>{const z=o(se);return z?z.selfReplicated:l(0)},re=()=>({food:e.value.toString(),generators:t.value.map(se=>({id:se.id,count:se.count.toString(),manualPurchases:se.manualPurchases.toString(),selfReplicated:se.selfReplicated.toString(),unlocked:se.unlocked,purchasable:se.purchasable,autoPurchaseEnabled:se.autoPurchaseEnabled,autoUpgradeEnabled:se.autoUpgradeEnabled}))}),J=se=>{se.food&&(e.value=l(se.food)),se.generators&&Array.isArray(se.generators)&&se.generators.forEach(z=>{const ce=o(z.id);ce&&(ce.count=l(z.count),z.manualPurchases?ce.manualPurchases=l(z.manualPurchases):ce.manualPurchases=l(z.count),z.selfReplicated?ce.selfReplicated=l(z.selfReplicated):ce.selfReplicated=l(0),ce.unlocked=z.unlocked,z.purchasable!==void 0?ce.purchasable=z.purchasable:ce.tier>=5&&z.unlocked&&(ce.purchasable=!0,ce.unlocked=!1),z.autoPurchaseEnabled!==void 0&&(ce.autoPurchaseEnabled=z.autoPurchaseEnabled),z.autoUpgradeEnabled!==void 0&&(ce.autoUpgradeEnabled=z.autoUpgradeEnabled))})},le=q(()=>{let se=0;return Object.values(tn().generatorPoints).forEach(z=>{se+=z.toNumber()}),se});return{generators:t,unlockedGenerators:i,nextUnlockableGenerator:c,food:e,foodPerSecond:s,totalPointsAvailable:le,getGenerator:o,getGeneratorCount:u,getGeneratorCost:d,buyGenerator:m,addGeneratorAuto:f,unlockNextTier:p,tick:R,formatGeneratorCount:L,formatManualPurchases:P,formatFood:I,getProductionMultiplier:D,formatProductionMultiplier:M,toggleAutoPurchase:x,toggleAutoUpgrade:$,getState:re,loadState:J,getBaseProduction:w,getActualProduction:U,formatSelfReplicated:Z,getSelfReplicatedCount:me,autoUpgradeCounter:n,AUTO_UPGRADE_FREQUENCY:r}}),qe=t=>Lt(t.sub(1)),ml=t=>{const e=(1-t.toNumber())*100;return e>=1e3?`-${Lt(e)}`:`-${e.toFixed(0)}%`},Ss=t=>`${be(t,2)}x`,ji=t=>{if(t.eq(0))return"1/0";const e=t.pow(-1);return`1/${be(e,0)}`},Wi=t=>`${be(t,0)}`,fy=t=>`${be(t,1)}s`,Os=t=>t.gt(0)?"Unlocked":"Locked",py=t=>`-${be(t,0)} trips`,jo=(t,e)=>{const s=e.find(u=>u.id===t);if(!s||s.prerequisites&&s.prerequisites.length>0&&!s.prerequisites.every(d=>{const m=e.find(f=>f.id===d);return m&&m.level.gt(0)}))return!1;if(s.ascensionRequirement&&s.ascensionRequirement>0)return Wt().ascensionCount>=s.ascensionRequirement;const n=e.find(u=>u.id==="unlockMegacolony"),r=e.find(u=>u.id==="unlockHivemind"),o=e.find(u=>u.id==="unlockAntopolis"),i=e.find(u=>u.id==="unlockMegaAnt"),c=e.find(u=>u.id==="unlockAlateHatchery");return e.find(u=>u.id==="unlockQueueAll"),["autoMegacolony","megacolonyEfficiency","unlockHivemind","autoUpgradeMegacolony"].includes(t)?n?n.level.gt(0):!1:["autoHivemind","hivemindEfficiency","unlockAntopolis","autoUpgradeHivemind"].includes(t)?r?r.level.gt(0):!1:["autoAntopolis","antopolisEfficiency","autoUpgradeAntopolis"].includes(t)?o?o.level.gt(0):!1:["autoAlateHatchery","alateHatcheryEfficiency","autoUpgradeAlateHatchery"].includes(t)?c?c.level.gt(0):!1:["unlockAutoFeed"].includes(t)?i?i.level.gt(0):!1:["rushCooldownReduction","rushDurationIncrease","rushMaxPerDay"].includes(t)?cd("unlockColonyRush",e):t==="cycleTimeReductionAdvanced"?cd("cycleTimeReduction",e):t==="unlockHivemind"?jo("unlockMegacolony",e):t==="unlockAntopolis"?cd("unlockHivemind",e):t==="unlockAlateHatchery"?cd("unlockAntopolis",e):t==="unlockQueueAll"?cd("unlockQuests",e):!0},cd=(t,e)=>{const s=e.find(n=>n.id===t);return s?s.level.eq(s.maxLevel||l(0)):!1},i0=(t,e,s)=>e.eq(0)?t:s?s({cost:t,level:e}):t.mul(l(1.5).pow(e)),hJ=(t,e)=>e.eq(0)?t.baseCost:t.costMultiplier?t.costMultiplier({cost:t.baseCost,level:e}):t.baseCost.mul(l(1.5).pow(e)),gJ=t=>{const e=new Map(t.map(s=>[s.id,s]));return t.forEach(s=>{let n=null,r;if(s.id.includes("Advanced")?n=s.id.replace("Advanced","Begin"):s.id.includes("Master")&&(n=s.id.replace("Master","Advanced")),n&&(r=e.get(n)),r&&r.maxLevel){const i=hJ(r,r.maxLevel).mul(1.1);s.baseCost=i,s.cost=i}}),t},vJ=()=>{const t=[{id:"foodProcessing",name:"Faster Food Processing",description:"Increases food production by 10% per level",baseCost:l(5),cost:l(5),costMultiplier:e=>l(e.cost).mul(l(1.05).pow(e.level)),level:l(0),maxLevel:l(200),effect:e=>l(1).add(e.mul(.1)),formatEffect:qe,icon:"i-heroicons-cake",position:{row:0,col:0},isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"additiveFoodProcessing",name:"Additive Food Processing",description:"Increases food production multiplier by adding 10% per level",baseCost:l(5),cost:l(5),costMultiplier:e=>l(e.cost).mul(l(1.05).pow(e.level)),level:l(0),isAdditive:!0,appliesTo:["worker"],prerequisites:["foodProcessing"],isUnlocked:()=>!0,category:"production",maxLevel:l(50),effect:e=>l(1).add(e.mul(.1)),formatEffect:qe,icon:"i-heroicons-cake",position:{row:1,col:0}},{id:"foodProcessingAdvanced",name:"Advanced Food Processing",description:"Increases food production by 20% per level",baseCost:l(1e6),cost:l(1e6),costMultiplier:e=>l(e.cost).mul(l(1.4).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.2)),formatEffect:qe,icon:"i-heroicons-cake",position:{row:3,col:0},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"foodProcessingExponential",name:"Exponential Food Processing",description:"Food production increases exponentially per level",baseCost:l(1e8),cost:l(1e8),costMultiplier:e=>l(e.cost).mul(l(1.4).pow(e.level)),level:l(0),maxLevel:l(5),effect:e=>l(2).pow(e),formatEffect:Ss,icon:"i-heroicons-cake",position:{row:2,col:1},prerequisites:["foodProcessingAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"doubleFood",name:"Double Food",description:"Doubles the amount of food produced per level",baseCost:l(100),cost:l(100),level:l(0),maxLevel:l(3),costMultiplier:e=>l(e.cost).mul(l(3).pow(e.level)),effect:e=>l(1).add(e.mul(1)),formatEffect:qe,icon:"i-heroicons-cake",position:{row:0,col:1},prerequisites:["foodProcessing"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"mutatedWorkers",name:"Mutated Worker Ants",description:"Worker ants produce 20% more food per level",baseCost:l(8),cost:l(8),costMultiplier:e=>l(e.cost).mul(l(1.7).pow(e.level)),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.2)),formatEffect:qe,icon:"i-heroicons-sparkles",position:{row:1,col:1},prerequisites:["doubleFood"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"efficientQueens",name:"Efficient Queens",description:"Queens produce 15% more nurseries per level",baseCost:l(1e3),cost:l(1e3),costMultiplier:e=>l(e.cost).mul(l(1.15).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.15)),formatEffect:qe,icon:"i-heroicons-bug-ant",position:{row:0,col:2},prerequisites:["foodProcessing"],isUnlocked:()=>!0,category:"production",appliesTo:["queenChamber"]},{id:"efficientQueensAdvanced",name:"Advanced Efficient Queens",description:"Queens produce 30% more nurseries per level",baseCost:l(1e6),cost:l(1e6),costMultiplier:e=>l(e.cost).mul(l(1.35).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.3)),formatEffect:qe,icon:"i-heroicons-bug-ant",position:{row:1,col:2},prerequisites:["efficientQueens"],isUnlocked:()=>!0,category:"production",appliesTo:["queenChamber"]},{id:"nurseryEfficiency",name:"Advanced Nursery Techniques",description:"Nurseries produce 25% more worker ants per level",baseCost:l(10),cost:l(10),costMultiplier:e=>l(e.cost).mul(l(1.35).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.25)),formatEffect:qe,icon:"i-heroicons-beaker",position:{row:2,col:2},prerequisites:["efficientQueensAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["nursery"]},{id:"reproductionNexus",isCombo:!0,name:"Reproduction Nexus",description:"Boosts queen reproduction by 15%, nursery efficiency by 10%, and reduces all ant costs by 5% per level",baseCost:l(7500),cost:l(7500),costMultiplier:e=>l(e.cost).mul(l(1.9).pow(e.level)),level:l(0),maxLevel:l(35),effect:e=>l(1).add(e.mul(.15)),formatEffect:qe,icon:"i-heroicons-heart",position:{row:3,col:2},prerequisites:["nurseryEfficiency"],isUnlocked:()=>!0,category:"reproduction",appliesTo:["global"],effects:[{target:"queenChamber",multiplier:e=>l(1).add(e.mul(.15)),formatEffect:qe,category:"reproduction"},{target:"nursery",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"efficiency"}]},{id:"colonyExpansion",name:"Colony Expansion Tactics",description:"Colonies produce 30% more queen chambers per level",baseCost:l(2500),cost:l(2500),costMultiplier:e=>l(e.cost).mul(l(1.65).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.3)),formatEffect:qe,icon:"i-heroicons-map",position:{row:0,col:3},prerequisites:["efficientQueensAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["colony"]},{id:"strongerSoldiers",name:"Stronger Soldier Ants",description:"Increases overall colony efficiency by 5% per level",baseCost:l(5),cost:l(5),costMultiplier:e=>l(e.cost).mul(l(1.6).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.05)),formatEffect:qe,icon:"i-heroicons-shield-check",position:{row:0,col:5},prerequisites:["colonyExpansion"],isUnlocked:()=>!0,category:"production",appliesTo:["global"]},{id:"exponentialGrowth",name:"Exponential Worker Growth",description:"All production increases by 2x per level",baseCost:l(1e3),cost:l(1e3),costMultiplier:e=>l(e.cost).mul(l(2).pow(l(e.level).mul(1.8))),level:l(0),maxLevel:l(16),effect:e=>l(2).pow(e),formatEffect:Ss,icon:"i-heroicons-chart-bar",position:{row:1,col:5},prerequisites:["doubleFood"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"]},{id:"compoundEvolution",name:"Compound Evolution",description:"All production increases by 2% per level, compounding with other upgrades",baseCost:l(50),cost:l(50),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)),level:l(0),maxLevel:l(5),effect:e=>l(1).add(e.mul(.02)),formatEffect:qe,icon:"i-heroicons-arrow-trending-up",position:{row:2,col:5},prerequisites:["exponentialGrowth"],isUnlocked:()=>!0,category:"production",appliesTo:["global"]},{id:"megacolonyEfficiency",name:"Mega Colony Optimization",description:"Mega Colonies produce 40% more colonies per level",baseCost:l(100),cost:l(100),costMultiplier:e=>l(e.cost).mul(l(2).pow(e.level)),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.4)),formatEffect:qe,icon:"i-heroicons-building-office-2",position:{row:1,col:4},prerequisites:["colonyExpansion"],isUnlocked:()=>!1,category:"production",appliesTo:["megacolony"]},{id:"hivemindEfficiency",name:"Hive Mind Optimization",description:"Hive Minds produce 50% more mega colonies per level",baseCost:l(500),cost:l(500),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.5)),formatEffect:qe,icon:"i-heroicons-cpu-chip",position:{row:2,col:4},prerequisites:["megacolonyEfficiency"],isUnlocked:()=>!1,category:"production",appliesTo:["hivemind"]},{id:"antopolisEfficiency",name:"Antopolis Optimization",description:"Antopolis produces 60% more hive minds per level",baseCost:l(2500),cost:l(2500),costMultiplier:e=>l(e.cost).mul(l(2.5).pow(e.level)),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.6)),formatEffect:qe,icon:"i-heroicons-building-library",position:{row:3,col:4},prerequisites:["hivemindEfficiency"],isUnlocked:()=>!1,category:"production",appliesTo:["antopolis"]},{id:"alateHatcheryProduction",name:"Alate Hatchery Production",description:"Alate Hatcheries produce 70% more colonies per level",baseCost:l(1e9),cost:l(1e9),costMultiplier:e=>l(e.cost).mul(l(2.7).pow(e.level)),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.7)),formatEffect:qe,icon:"i-heroicons-building-library",position:{row:4,col:4},prerequisites:["antopolisEfficiency"],isUnlocked:()=>!1,category:"production",appliesTo:["alateHatchery"]},{id:"exponentialPheromone",name:"Exponential Pheromone",description:"Pheromone production increases exponentially per level",baseCost:l(100),cost:l(100),costMultiplier:e=>l(e.cost).mul(l(1.2).pow(e.level)).pow(e.level),level:l(0),maxLevel:l(6),effect:e=>l(2).pow(e),formatEffect:Ss,icon:"i-heroicons-beaker",position:{row:0,col:6},prerequisites:[],isUnlocked:()=>!1,category:"production",appliesTo:["pheromone"],effects:[{target:"pheromone",multiplier:e=>l(2).pow(e),formatEffect:Ss,isMultiplier:!0}],isCombo:!0},{id:"pheromoneSynergyMultiplier",name:"Pheromone Synergy Multiplier",description:"Boosts pheromone production by 10% per level (multiplier) and adds 25% to the amount of pheromone produced per level",baseCost:l(5e6),cost:l(5e6),costMultiplier:e=>l(e.cost).mul(l(2).pow(e.level).mul(l(1.5))),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.1)),formatEffect:qe,icon:"i-heroicons-beaker",position:{row:1,col:6},prerequisites:["exponentialPheromone"],isUnlocked:()=>!0,category:"production",appliesTo:["pheromone"],isCombo:!0,effects:[{target:"pheromone",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,isMultiplier:!0},{target:"pheromone",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe}]},{id:"pheromoneExponentialAmplifier",name:"Pheromone Exponential Amplifier",description:"Multiplies pheromone production by 2.5x per level and boosts all production by 15% per level",baseCost:l(1e12),cost:l(1e12),costMultiplier:e=>l(e.cost).mul(l(4).pow(e.level)).mul(l(1.5).pow(e.level.mul(e.level))),level:l(0),maxLevel:l(10),effect:e=>l(2.5).pow(e),formatEffect:Ss,icon:"i-heroicons-flask",position:{row:2,col:6},prerequisites:["pheromoneSynergyMultiplier"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"pheromone",multiplier:e=>l(2.5).pow(e),formatEffect:Ss,isMultiplier:!0,category:"production"},{target:"global",multiplier:e=>l(1).add(e.mul(.15)),formatEffect:qe,category:"production"}],ascensionRequirement:1},{id:"exponentialEP",name:"Exponential EP",description:"EP production increases exponentially per level",baseCost:l(1e6),cost:l(1e6),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(e.level.gt(1)?e.level.mul(.9):1.1),level:l(0),maxLevel:l(3),effect:e=>l(2).pow(e),formatEffect:Ss,icon:"i-heroicons-sparkles",position:{row:3,col:5},prerequisites:["exponentialGrowth"],isUnlocked:()=>!1,category:"production",appliesTo:["ep"],effects:[{target:"ep",multiplier:e=>l(2).pow(e),formatEffect:Ss,isMultiplier:!0}],isCombo:!0},{id:"multiBoost",isCombo:!0,name:"Early Multi-Tier Enhancement",description:"Boosts worker ants by 5%, nurseries by 2.5%, and EP gain by 20% per level",baseCost:l(1e4),cost:l(1e4),costMultiplier:e=>l(e.cost).mul(l(3).pow(e.level)),level:l(0),maxLevel:l(50),effect:e=>l(1).add(e.mul(.05)),formatEffect:qe,icon:"i-heroicons-bolt-solid",position:{row:0,col:7},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["global"],effects:[{target:"worker",multiplier:e=>l(1).add(e.mul(.05)),formatEffect:qe,category:"production"},{target:"nursery",multiplier:e=>l(1).add(e.mul(.025)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"prestige"}]},{id:"midTierBoost",isCombo:!0,name:"Mid-Tier Synergy",description:"Boosts queen chambers by 8%, colonies by 5%, and pheromone production by 15% per level",baseCost:l(25e3),cost:l(25e3),costMultiplier:e=>l(e.cost).mul(l(2.8).pow(e.level)),level:l(0),maxLevel:l(40),effect:e=>l(1).add(e.mul(.08)),formatEffect:qe,icon:"i-heroicons-cube-transparent",position:{row:1,col:7},prerequisites:["multiBoost","colonyExpansion"],isUnlocked:()=>!0,category:"production",appliesTo:["global"],effects:[{target:"queenChamber",multiplier:e=>l(1).add(e.mul(.08)),formatEffect:qe,category:"production"},{target:"colony",multiplier:e=>l(1).add(e.mul(.05)),formatEffect:qe,category:"production"},{target:"pheromone",multiplier:e=>l(1).add(e.mul(.15)),formatEffect:qe,category:"production",isMultiplier:!0}]},{id:"advancedTierBoost",isCombo:!0,name:"Advanced Tier Integration",description:"Boosts mega colonies by 10%, hive minds by 7%, and doubles EP gain per level",baseCost:l(5e6),cost:l(5e6),costMultiplier:e=>l(e.cost).mul(l(3.5).pow(e.level)),level:l(0),maxLevel:l(30),effect:e=>l(1).add(e.mul(.1)),formatEffect:qe,icon:"i-heroicons-globe-alt",position:{row:2,col:7},prerequisites:["midTierBoost"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"megacolony",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"production"},{target:"hivemind",multiplier:e=>l(1).add(e.mul(.07)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(1)),formatEffect:qe,category:"prestige"}]},{id:"resourceSynergy",isCombo:!0,name:"Resource Synergy",description:"Boosts food production by 12%, pheromone production by 10% per level",baseCost:l(1e3),cost:l(1e3),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)),level:l(0),maxLevel:l(25),effect:e=>l(1).add(e.mul(.12)),formatEffect:qe,icon:"i-heroicons-archive-box",position:{row:0,col:8},prerequisites:["exponentialPheromone"],isUnlocked:()=>!0,category:"production",appliesTo:["global"],effects:[{target:"food",multiplier:e=>l(1).add(e.mul(.12)),formatEffect:qe,category:"production"},{target:"pheromone",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"production"}]},{id:"grandSynergy",isCombo:!0,name:"Grand Colony Synergy",description:"Boosts all production by 5%, EP gain by 25%",baseCost:l(25e6),cost:l(25e6),costMultiplier:e=>l(e.cost).mul(l(4).pow(e.level)),level:l(0),maxLevel:l(20),effect:e=>l(1).add(e.mul(.05)),formatEffect:qe,icon:"i-heroicons-fire",position:{row:1,col:8},prerequisites:["resourceSynergy","exponentialGrowth"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"global",multiplier:e=>l(1).add(e.mul(.05)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"prestige"}]},{id:"supremeColonyNexus",isCombo:!0,name:"Supreme Colony Nexus",description:"Boosts antopolis production by 25%, hive minds by 20%, and increases EP gain by 35% per level",baseCost:l(5e14),cost:l(5e14),costMultiplier:e=>l(e.cost).mul(l(4.5).pow(e.level)).mul(l(1.5).pow(e.level.pow(2))),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.25)),formatEffect:qe,icon:"i-heroicons-building-office",position:{row:2,col:8},prerequisites:["grandSynergy","advancedTierBoost","antopolisEfficiency"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"antopolis",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"production"},{target:"hivemind",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.35)),formatEffect:qe,category:"prestige"}],ascensionRequirement:1},{id:"alateEvolutionaryLeap",name:"Alate Evolutionary Leap",description:"Boosts alate hatcheries by 40%, antopolis by 30%, and increases EP gain by 50% per level",baseCost:l(25e14),cost:l(25e14),costMultiplier:e=>l(e.cost).mul(l(6.5).pow(e.level)).mul(l(2.8).pow(e.level.mul(1.5))),level:l(0),maxLevel:l(8),effect:e=>l(1).add(e.mul(.4)),formatEffect:qe,icon:"i-heroicons-academic-cap",position:{row:3,col:8},prerequisites:["supremeColonyNexus"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"alateHatchery",multiplier:e=>l(1).add(e.mul(.4)),formatEffect:qe,category:"production"},{target:"antopolis",multiplier:e=>l(1).add(e.mul(.3)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"prestige"}],ascensionRequirement:1},{id:"cascadingEfficiencyMatrix",name:"Cascading Efficiency Matrix",description:"Each level reduces all ant costs by 8%, increases global production by 18%, and boosts pheromone production by 30%",baseCost:l(1e12),cost:l(1e12),costMultiplier:e=>l(e.cost).mul(l(3.2).pow(e.level)).mul(l(1.4).pow(e.level.pow(1.5))),level:l(0),maxLevel:l(12),effect:e=>l(1).add(e.mul(.18)),formatEffect:qe,icon:"i-heroicons-puzzle-piece",position:{row:0,col:9},prerequisites:["grandSynergy"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"global",multiplier:e=>l(1).add(e.mul(.18)),formatEffect:qe,category:"production"},{target:"pheromone",multiplier:e=>l(1).add(e.mul(.3)),formatEffect:qe,category:"production"}],ascensionRequirement:1},{id:"evolutionaryConvergence",name:"Evolutionary Convergence",description:"Each level doubles EP gain, increases pheromone production by 25%, and boosts all generators by 10%",baseCost:l(1e16),cost:l(1e16),costMultiplier:e=>l(e.cost).mul(l(6).pow(e.level)).mul(l(4).pow(e.level)),level:l(0),maxLevel:l(5),effect:e=>l(2).pow(e),formatEffect:Ss,icon:"i-heroicons-variable",position:{row:1,col:9},prerequisites:["cascadingEfficiencyMatrix","alateEvolutionaryLeap"],isUnlocked:()=>!1,category:"production",appliesTo:["global"],effects:[{target:"ep",multiplier:e=>l(2).pow(e),formatEffect:Ss,category:"prestige"},{target:"pheromone",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"production"},{target:"global",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"production"}],ascensionRequirement:1},{id:"workerBegin",isCombo:!0,name:"Worker Optimization: Begin",description:"Increases worker ants production by 25% and EP gain by 5% per level",baseCost:l(100),cost:l(100),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.25)),formatEffect:qe,icon:"i-heroicons-bug-ant",position:{row:10,col:0},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["worker"],effects:[{target:"worker",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.05)),formatEffect:qe,category:"prestige"}]},{id:"workerAdvanced",isCombo:!0,name:"Worker Optimization: Advanced",description:"Increases worker ants production by 50% and EP gain by 10% per level",baseCost:l(1e4),cost:l(1e4),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.5)),formatEffect:qe,icon:"i-heroicons-bug-ant",position:{row:11,col:0},prerequisites:["workerBegin"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"],effects:[{target:"worker",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"prestige"}]},{id:"workerMaster",isCombo:!0,name:"Worker Optimization: Master",description:"Increases worker ants production by 100% and EP gain by 20% per level",baseCost:l(5e6),cost:l(5e6),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1)),formatEffect:qe,icon:"i-heroicons-bug-ant",position:{row:12,col:0},prerequisites:["workerAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["worker"],effects:[{target:"worker",multiplier:e=>l(1).add(e.mul(1)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"prestige"}]},{id:"nurseryBegin",isCombo:!0,name:"Nursery Optimization: Begin",description:"Increases nursery production by 20% and EP gain by 5% per level",baseCost:l(150),cost:l(150),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.2)),formatEffect:qe,icon:"i-heroicons-home-modern",position:{row:10,col:1},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["nursery"],effects:[{target:"nursery",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.05)),formatEffect:qe,category:"prestige"}]},{id:"nurseryAdvanced",isCombo:!0,name:"Nursery Optimization: Advanced",description:"Increases nursery production by 40% and EP gain by 10% per level",baseCost:l(15e3),cost:l(15e3),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.4)),formatEffect:qe,icon:"i-heroicons-home-modern",position:{row:11,col:1},prerequisites:["nurseryBegin"],isUnlocked:()=>!0,category:"production",appliesTo:["nursery"],effects:[{target:"nursery",multiplier:e=>l(1).add(e.mul(.4)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"prestige"}]},{id:"nurseryMaster",isCombo:!0,name:"Nursery Optimization: Master",description:"Increases nursery production by 80% and EP gain by 20% per level",baseCost:l(75e5),cost:l(75e5),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(.8)),formatEffect:qe,icon:"i-heroicons-home-modern",position:{row:12,col:1},prerequisites:["nurseryAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["nursery"],effects:[{target:"nursery",multiplier:e=>l(1).add(e.mul(.8)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"prestige"}]},{id:"queenChamberBegin",isCombo:!0,name:"Queen Chamber Optimization: Begin",description:"Increases queen chamber production by 25% and EP gain by 7% per level",baseCost:l(200),cost:l(200),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.25)),formatEffect:qe,icon:"i-heroicons-crown",position:{row:10,col:2},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["queenChamber"],effects:[{target:"queenChamber",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.07)),formatEffect:qe,category:"prestige"}]},{id:"queenChamberAdvanced",isCombo:!0,name:"Queen Chamber Optimization: Advanced",description:"Increases queen chamber production by 50% and EP gain by 15% per level",baseCost:l(2e4),cost:l(2e4),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.5)),formatEffect:qe,icon:"i-heroicons-crown",position:{row:11,col:2},prerequisites:["queenChamberBegin"],isUnlocked:()=>!0,category:"production",appliesTo:["queenChamber"],effects:[{target:"queenChamber",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.15)),formatEffect:qe,category:"prestige"}]},{id:"queenChamberMaster",isCombo:!0,name:"Queen Chamber Optimization: Master",description:"Increases queen chamber production by 100% and EP gain by 25% per level",baseCost:l(1e7),cost:l(1e7),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1)),formatEffect:qe,icon:"i-heroicons-crown",position:{row:12,col:2},prerequisites:["queenChamberAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["queenChamber"],effects:[{target:"queenChamber",multiplier:e=>l(1).add(e.mul(1)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"prestige"}]},{id:"colonyBegin",isCombo:!0,name:"Colony Optimization: Begin",description:"Increases colony production by 30% and EP gain by 10% per level",baseCost:l(5e3),cost:l(5e3),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.2),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.3)),formatEffect:qe,icon:"i-heroicons-building-storefront",position:{row:10,col:3},prerequisites:[],isUnlocked:()=>!0,category:"production",appliesTo:["colony"],effects:[{target:"colony",multiplier:e=>l(1).add(e.mul(.3)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.1)),formatEffect:qe,category:"prestige"}]},{id:"colonyAdvanced",isCombo:!0,name:"Colony Optimization: Advanced",description:"Increases colony production by 60% and EP gain by 20% per level",baseCost:l(5e5),cost:l(5e5),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.2),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.6)),formatEffect:qe,icon:"i-heroicons-building-storefront",position:{row:11,col:3},prerequisites:["colonyBegin"],isUnlocked:()=>!0,category:"production",appliesTo:["colony"],effects:[{target:"colony",multiplier:e=>l(1).add(e.mul(.6)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"prestige"}]},{id:"colonyMaster",isCombo:!0,name:"Colony Optimization: Master",description:"Increases colony production by 120% and EP gain by 30% per level",baseCost:l(5e8),cost:l(5e8),costMultiplier:e=>l(e.cost).mul(l(2.8).pow(e.level)).pow(1.2),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1.2)),formatEffect:qe,icon:"i-heroicons-building-storefront",position:{row:12,col:3},prerequisites:["colonyAdvanced"],isUnlocked:()=>!0,category:"production",appliesTo:["colony"],effects:[{target:"colony",multiplier:e=>l(1).add(e.mul(1.2)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.3)),formatEffect:qe,category:"prestige"}]},{id:"megacolonyBegin",isCombo:!0,name:"Megacolony Optimization: Begin",description:"Increases megacolony production by 35% and EP gain by 15% per level",baseCost:l(5e3),cost:l(5e3),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.35)),formatEffect:qe,icon:"i-heroicons-building-office-2",position:{row:10,col:4},prerequisites:[],isUnlocked:()=>!1,category:"production",appliesTo:["megacolony"],effects:[{target:"megacolony",multiplier:e=>l(1).add(e.mul(.35)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.15)),formatEffect:qe,category:"prestige"}]},{id:"megacolonyAdvanced",isCombo:!0,name:"Megacolony Optimization: Advanced",description:"Increases megacolony production by 70% and EP gain by 25% per level",baseCost:l(5e5),cost:l(5e5),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.7)),formatEffect:qe,icon:"i-heroicons-building-office-2",position:{row:11,col:4},prerequisites:["megacolonyBegin"],isUnlocked:()=>!1,category:"production",appliesTo:["megacolony"],effects:[{target:"megacolony",multiplier:e=>l(1).add(e.mul(.7)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"prestige"}]},{id:"megacolonyMaster",isCombo:!0,name:"Megacolony Optimization: Master",description:"Increases megacolony production by 140% and EP gain by 40% per level",baseCost:l(25e7),cost:l(25e7),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1.4)),formatEffect:qe,icon:"i-heroicons-building-office-2",position:{row:12,col:4},prerequisites:["megacolonyAdvanced"],isUnlocked:()=>!1,category:"production",appliesTo:["megacolony"],effects:[{target:"megacolony",multiplier:e=>l(1).add(e.mul(1.4)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.4)),formatEffect:qe,category:"prestige"}]},{id:"hivemindBegin",isCombo:!0,name:"Hivemind Optimization: Begin",description:"Increases hivemind production by 40% and EP gain by 20% per level",baseCost:l(2e4),cost:l(2e4),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.4)),formatEffect:qe,icon:"i-heroicons-cpu-chip",position:{row:10,col:5},prerequisites:[],isUnlocked:()=>!1,category:"production",appliesTo:["hivemind"],effects:[{target:"hivemind",multiplier:e=>l(1).add(e.mul(.4)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.2)),formatEffect:qe,category:"prestige"}]},{id:"hivemindAdvanced",isCombo:!0,name:"Hivemind Optimization: Advanced",description:"Increases hivemind production by 80% and EP gain by 35% per level",baseCost:l(2e6),cost:l(2e6),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.8)),formatEffect:qe,icon:"i-heroicons-cpu-chip",position:{row:11,col:5},prerequisites:["hivemindBegin"],isUnlocked:()=>!1,category:"production",appliesTo:["hivemind"],effects:[{target:"hivemind",multiplier:e=>l(1).add(e.mul(.8)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.35)),formatEffect:qe,category:"prestige"}]},{id:"hivemindMaster",isCombo:!0,name:"Hivemind Optimization: Master",description:"Increases hivemind production by 160% and EP gain by 50% per level",baseCost:l(1e9),cost:l(1e9),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1.6)),formatEffect:qe,icon:"i-heroicons-cpu-chip",position:{row:12,col:5},prerequisites:["hivemindAdvanced"],isUnlocked:()=>!1,category:"production",appliesTo:["hivemind"],effects:[{target:"hivemind",multiplier:e=>l(1).add(e.mul(1.6)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"prestige"}]},{id:"antopolisBegin",isCombo:!0,name:"Antopolis Optimization: Begin",description:"Increases antopolis production by 45% and EP gain by 25% per level",baseCost:l(1e5),cost:l(1e5),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.45)),formatEffect:qe,icon:"i-heroicons-building-library",position:{row:10,col:6},prerequisites:[],isUnlocked:()=>!1,category:"production",appliesTo:["antopolis"],effects:[{target:"antopolis",multiplier:e=>l(1).add(e.mul(.45)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.25)),formatEffect:qe,category:"prestige"}]},{id:"antopolisAdvanced",isCombo:!0,name:"Antopolis Optimization: Advanced",description:"Increases antopolis production by 90% and EP gain by 40% per level",baseCost:l(1e7),cost:l(1e7),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.9)),formatEffect:qe,icon:"i-heroicons-building-library",position:{row:11,col:6},prerequisites:["antopolisBegin"],isUnlocked:()=>!1,category:"production",appliesTo:["antopolis"],effects:[{target:"antopolis",multiplier:e=>l(1).add(e.mul(.9)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.4)),formatEffect:qe,category:"prestige"}]},{id:"antopolisMaster",isCombo:!0,name:"Antopolis Optimization: Master",description:"Increases antopolis production by 180% and EP gain by 60% per level",baseCost:l(5e9),cost:l(5e9),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(1.8)),formatEffect:qe,icon:"i-heroicons-building-library",position:{row:12,col:6},prerequisites:["antopolisAdvanced"],isUnlocked:()=>!1,category:"production",appliesTo:["antopolis"],effects:[{target:"antopolis",multiplier:e=>l(1).add(e.mul(1.8)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.6)),formatEffect:qe,category:"prestige"}]},{id:"alateHatcheryBegin",isCombo:!0,name:"Alate Hatchery Optimization: Begin",description:"Increases alate hatchery production by 50% and EP gain by 30% per level",baseCost:l(5e5),cost:l(5e5),costMultiplier:e=>l(e.cost).mul(l(1.5).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(.5)),formatEffect:qe,icon:"i-heroicons-beaker",position:{row:10,col:7},prerequisites:[],isUnlocked:()=>!1,category:"production",appliesTo:["alateHatchery"],effects:[{target:"alateHatchery",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.3)),formatEffect:qe,category:"prestige"}]},{id:"alateHatcheryAdvanced",isCombo:!0,name:"Alate Hatchery Optimization: Advanced",description:"Increases alate hatchery production by 100% and EP gain by 50% per level",baseCost:l(5e7),cost:l(5e7),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(15),effect:e=>l(1).add(e.mul(1)),formatEffect:qe,icon:"i-heroicons-beaker",position:{row:11,col:7},prerequisites:["alateHatcheryBegin"],isUnlocked:()=>!1,category:"production",appliesTo:["alateHatchery"],effects:[{target:"alateHatchery",multiplier:e=>l(1).add(e.mul(1)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.5)),formatEffect:qe,category:"prestige"}]},{id:"alateHatcheryMaster",isCombo:!0,name:"Alate Hatchery Optimization: Master",description:"Increases alate hatchery production by 200% and EP gain by 75% per level",baseCost:l(25e9),cost:l(25e9),costMultiplier:e=>l(e.cost).mul(l(2.2).pow(e.level)).pow(1.15),level:l(0),maxLevel:l(10),effect:e=>l(1).add(e.mul(2)),formatEffect:qe,icon:"i-heroicons-beaker",position:{row:12,col:7},prerequisites:["alateHatcheryAdvanced"],isUnlocked:()=>!1,category:"production",appliesTo:["alateHatchery"],effects:[{target:"alateHatchery",multiplier:e=>l(1).add(e.mul(2)),formatEffect:qe,category:"production"},{target:"ep",multiplier:e=>l(1).add(e.mul(.75)),formatEffect:qe,category:"prestige"}]}];return gJ(t)},bJ=()=>[{id:"workerCostDiscount",name:"Worker Cost Discount",description:"Reduces worker cost exponentially (1500^level)",baseCost:l(100),cost:l(100),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1500).pow(t)),formatEffect:ji,icon:"i-heroicons-user-group",isUnlocked:()=>!0,category:"cost",appliesTo:["worker"],position:{row:0,col:0}},{id:"nurseryCostDiscount",name:"Nursery Cost Discount",description:"Reduces nursery cost exponentially (8200^level)",baseCost:l(1e3),cost:l(1e3),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(8200).pow(t)),formatEffect:ji,icon:"i-heroicons-user-group",isUnlocked:()=>!0,category:"cost",appliesTo:["nursery"],position:{row:0,col:1},prerequisites:["workerCostDiscount"]},{id:"queenChamberCostDiscount",name:"Queen Chamber Cost Discount",description:"Reduces queen chamber cost exponentially (1e6^level)",baseCost:l(1e4),cost:l(1e4),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e6).pow(t)),formatEffect:ji,icon:"i-heroicons-user-group",isUnlocked:()=>!0,category:"cost",appliesTo:["queenChamber"],position:{row:0,col:2},prerequisites:["nurseryCostDiscount"]},{id:"colonyCostDiscount",name:"Colony Cost Discount",description:"Reduces colony cost exponentially (1e8^level)",baseCost:l(1e5),cost:l(1e5),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e8).pow(t)),formatEffect:ji,icon:"i-heroicons-building-storefront",isUnlocked:()=>!0,category:"cost",appliesTo:["colony"],position:{row:0,col:3},prerequisites:["queenChamberCostDiscount"]},{id:"megacolonyCostDiscount",name:"Mega Colony Cost Discount",description:"Reduces mega colony cost exponentially (1e10^level)",baseCost:l(1e6),cost:l(1e6),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e10).pow(t)),formatEffect:ji,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"cost",appliesTo:["megacolony"],position:{row:1,col:0},prerequisites:["colonyCostDiscount"]},{id:"hivemindCostDiscount",name:"Hive Mind Cost Discount",description:"Reduces hive mind cost exponentially (1e12^level)",baseCost:l(1e7),cost:l(1e7),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e12).pow(t)),formatEffect:ji,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!0,category:"cost",appliesTo:["hivemind"],position:{row:1,col:1},prerequisites:["megacolonyCostDiscount"]},{id:"antopolisCostDiscount",name:"Antopolis Cost Discount",description:"Reduces antopolis cost exponentially (1e15^level)",baseCost:l(1e8),cost:l(1e8),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e15).pow(t)),formatEffect:ji,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"cost",appliesTo:["antopolis"],position:{row:1,col:2},prerequisites:["hivemindCostDiscount"]},{id:"alateHatcheryCostDiscount",name:"Alate Hatchery Cost Discount",description:"Reduces alate hatchery cost exponentially (1e16^level)",baseCost:l(1e9),cost:l(1e9),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)).pow(l(t.level.gt(0)?2:1)),level:l(0),maxLevel:l(25),effect:t=>l(1).div(l(1e16).pow(t)),formatEffect:ji,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"cost",appliesTo:["alateHatchery"],position:{row:1,col:3},prerequisites:["antopolisCostDiscount"]}],yJ=()=>[{id:"unlockMegacolony",name:"Mega Colony",description:"Unlocks the Mega Colony generator",baseCost:l(1e3),cost:l(1e3),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"research",appliesTo:["global"],position:{row:0,col:0}},{id:"unlockHivemind",name:"Hive Mind",description:"Unlocks the Hive Mind generator",baseCost:l(1e9),cost:l(1e9),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!1,category:"research",appliesTo:["global"],position:{row:1,col:0},prerequisites:["unlockMegacolony"]},{id:"unlockAntopolis",name:"Antopolis",description:"Unlocks the Antopolis generator",baseCost:l(1e12),cost:l(1e12),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-building-library",isUnlocked:()=>!1,category:"research",appliesTo:["global"],position:{row:2,col:0},prerequisites:["unlockHivemind"]},{id:"unlockAlateHatchery",name:"Alate Hatchery",description:"Unlocks the Alate Hatchery generator",baseCost:l(1e13),cost:l(1e13),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-building-library",isUnlocked:()=>!1,category:"research",appliesTo:["global"],position:{row:3,col:0},prerequisites:["unlockAntopolis"]},{id:"unlockAdventure",name:"Adventure Mode",description:"Unlock Adventure mode and the Inventory system",baseCost:l(50),cost:l(50),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-bolt",isUnlocked:()=>!0,category:"research",appliesTo:["global"],position:{row:0,col:1}},{id:"unlockQuests",name:"Quests",description:"Unlock Quests",baseCost:l(1e3),cost:l(1e3),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-question-mark-circle",isUnlocked:()=>!0,category:"research",appliesTo:["global"],position:{row:1,col:1},prerequisites:["unlockAdventure"]},{id:"unlockBossChallenges",name:"Boss Challenges",description:"Unlock sequential boss challenges with unique rewards",baseCost:l(5e4),cost:l(5e4),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-trophy",isUnlocked:()=>!0,category:"research",appliesTo:["global"],position:{row:2,col:1},prerequisites:["unlockQuests"]}],_J=t=>{const e=t.toNumber();return`+${e} step${e!==1?"s":""}/tick`},xJ=()=>[{id:"cycleTimeReduction",name:"Time Manipulation",description:"Decreases cycle time by 0.15 seconds per level",baseCost:l(50),cost:l(50),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(.15).mul(t),formatEffect:fy,icon:"i-heroicons-clock-solid",isUnlocked:()=>!0,category:"efficiency",appliesTo:["global"],position:{row:0,col:0}},{id:"cycleTimeReductionAdvanced",name:"Advanced Time Manipulation",description:"Decreases cycle time by 0.25 seconds per level",baseCost:l(1e12),cost:l(1e12),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(.25).mul(t),formatEffect:fy,icon:"i-heroicons-clock-solid",isUnlocked:()=>!1,category:"efficiency",appliesTo:["global"],position:{row:1,col:0},prerequisites:["cycleTimeReduction"]},{id:"cycleTimeReductionMaster",name:"Master Time Manipulation",description:"Decreases cycle time by 0.35 seconds per level",baseCost:l(1e18),cost:l(1e18),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(.35).mul(t),formatEffect:fy,icon:"i-heroicons-clock-solid",isUnlocked:()=>!1,category:"efficiency",appliesTo:["global"],position:{row:2,col:0},prerequisites:["cycleTimeReductionAdvanced"]},{id:"cycleFoodReduction",name:"Cycle Food Reduction",description:"Reduces the food required for each cycle by 5% per level (max 75%)",baseCost:l(50),cost:l(50),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(15),effect:t=>l(1).sub(t.mul(.05).min(.75)),formatEffect:ml,icon:"i-heroicons-arrow-down-circle",isUnlocked:()=>!0,category:"efficiency",appliesTo:["global"],position:{row:0,col:1}},{id:"cycleTripReduction",name:"Trip Reduction",description:"Reduces the number of required trips per cycle by 5 per level",baseCost:l(100),cost:l(100),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level.mul(1.2))).pow(1.2),level:l(0),maxLevel:l(10),effect:t=>l(5).mul(t),formatEffect:py,icon:"i-heroicons-arrow-down-circle",isUnlocked:()=>!0,category:"efficiency",appliesTo:["cycle_trips"],position:{row:1,col:1},prerequisites:["cycleFoodReduction"]},{id:"advancedCycleTripReduction",name:"Advanced Trip Reduction",description:"Reduces the number of required trips per cycle by 10 per level and increases EP gain by 10% per level",baseCost:l(5e3),cost:l(5e3),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)).mul(l(1.5).pow(t.level.pow(1.5))),level:l(0),maxLevel:l(8),effect:t=>l(10).mul(t),formatEffect:py,icon:"i-heroicons-arrow-down-circle",isUnlocked:()=>!0,category:"efficiency",appliesTo:["cycle_trips","ep"],isCombo:!0,position:{row:2,col:1},prerequisites:["cycleTripReduction"],effects:[{target:"cycle_trips",multiplier:t=>l(10).mul(t),formatEffect:py,category:"efficiency"},{target:"ep",multiplier:t=>l(1).add(t.mul(.1)),formatEffect:qe,category:"prestige"}]},{id:"generatorUpgradeCostReduction",name:"Generator Upgrade Efficiency",description:"Reduces the cost scaling of generator upgrades by 2% per level (max 40%)",baseCost:l(1e6),cost:l(1e6),costMultiplier:t=>l(t.cost).mul(l(2.5).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).sub(t.mul(.02).min(.4)),formatEffect:ml,icon:"i-heroicons-currency-dollar-solid",isUnlocked:()=>!0,category:"efficiency",appliesTo:["generator_upgrade_cost"],position:{row:0,col:2}},{id:"neurotrailSpeed",name:"Neural Path Optimization",description:"Increases neurotrail movement speed by 1 step per tick per level (max 40)",baseCost:l(1e5),cost:l(1e5),costMultiplier:t=>l(t.cost).mul(l(1.35).pow(t.level)),level:l(0),maxLevel:l(40),effect:t=>l(1).add(t),formatEffect:_J,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"efficiency",appliesTo:["neurotrail_steps"],position:{row:0,col:3},isAdditive:!0}],kJ=()=>[{id:"autoWorker",name:"Worker Automation",description:"Automatically purchases Worker Ants each tick. Each level increases purchases per tick.",baseCost:l(5),cost:l(5),costMultiplier:t=>l(t.cost).mul(l(1.3).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"automation",appliesTo:["worker","global"],position:{row:0,col:0},prerequisites:[]},{id:"autoNursery",name:"Nursery Automation",description:"Automatically purchases Nurseries each tick. Each level increases purchases per tick.",baseCost:l(15),cost:l(15),costMultiplier:t=>l(t.cost).mul(l(1.35).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"automation",appliesTo:["nursery","global"],position:{row:1,col:0},prerequisites:["autoWorker"]},{id:"autoQueenChamber",name:"Queen Chamber Automation",description:"Automatically purchases Queen Chambers each tick. Each level increases purchases per tick.",baseCost:l(500),cost:l(500),costMultiplier:t=>l(t.cost).mul(l(1.4).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"automation",appliesTo:["queenChamber","global"],position:{row:2,col:0},prerequisites:["autoNursery"]},{id:"autoColony",name:"Colony Automation",description:"Automatically purchases Colonies each tick. Each level increases purchases per tick.",baseCost:l(2e5),cost:l(2e5),costMultiplier:t=>l(t.cost).mul(l(1.45).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"automation",appliesTo:["colony","global"],position:{row:3,col:0},prerequisites:["autoQueenChamber"]},{id:"autoMegacolony",name:"Mega Colony Automation",description:"Automatically purchases Mega Colonies each tick. Each level increases purchases per tick.",baseCost:l(2e7),cost:l(2e7),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!1,category:"automation",appliesTo:["megacolony","global"],position:{row:4,col:0},prerequisites:["autoColony"]},{id:"autoHivemind",name:"Hive Mind Automation",description:"Automatically purchases Hive Minds each tick. Each level increases purchases per tick.",baseCost:l(2e8),cost:l(2e8),costMultiplier:t=>l(t.cost).mul(l(1.55).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!1,category:"automation",appliesTo:["hivemind","global"],position:{row:5,col:0},prerequisites:["autoMegacolony"]},{id:"autoAntopolis",name:"Antopolis Automation",description:"Automatically purchases Antopolis each tick. Each level increases purchases per tick.",baseCost:l(2e9),cost:l(2e9),costMultiplier:t=>l(t.cost).mul(l(1.6).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!1,category:"automation",appliesTo:["antopolis","global"],position:{row:6,col:0},prerequisites:["autoHivemind"]},{id:"autoAlateHatchery",name:"Alate Hatchery Automation",description:"Automatically purchases Alate Hatcheries each tick. Each level increases purchases per tick.",baseCost:l(2e8),cost:l(2e8),costMultiplier:t=>l(t.cost).mul(l(1.65).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t,formatEffect:Wi,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!1,category:"automation",appliesTo:["alateHatchery"],position:{row:7,col:1},prerequisites:["autoColony"]},{id:"bulkAutomation",name:"Bulk Automation",description:"Multiplies the effectiveness of all automation upgrades",baseCost:l(50),cost:l(50),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(4)),formatEffect:Ss,icon:"i-heroicons-bolt",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:0,col:2},prerequisites:["autoWorker"]},{id:"unlockAutoQuestAdvance",name:"Quest Hunter Automation",description:"Enables automatic targeting of the best bug for your active quest in adventure mode",baseCost:l(25e3),cost:l(25e3),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-clipboard-document-check",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:0,col:3},prerequisites:[]},{id:"unlockAutoSalvage",name:"Auto Salvage",description:"Automatically salvage filtered items for Pheromone Essence",baseCost:l(200),cost:l(200),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-beaker",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:0,col:4},prerequisites:[]},{id:"unlockSalvageAll",name:"Mass Salvaging",description:"Unlock the ability to salvage all unlocked and unequipped items at once",baseCost:l(1e5),cost:l(1e5),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-trash",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:1,col:4},prerequisites:["unlockAutoSalvage"]},{id:"unlockColonyRush",name:"Colony Rush",description:"Unlock the Colony Rush ability, allowing you to skip ahead 30 seconds of production time. Limited to 50 uses per day with a cooldown period between uses.",baseCost:l(75),cost:l(75),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-bolt",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:0,col:5},prerequisites:[]},{id:"rushCooldownReduction",name:"Rush Efficiency",description:"Reduces the cooldown between Colony Rushes by 2 foraging trips per level.",baseCost:l(100),cost:l(100),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>t.mul(2),formatEffect:t=>`${t.toNumber()} foraging trips less cooldown`,icon:"i-heroicons-clock",isUnlocked:()=>!1,category:"automation",appliesTo:["global"],position:{row:1,col:5},prerequisites:["unlockColonyRush"]},{id:"rushDurationIncrease",name:"Extended Rush",description:"Increases Colony Rush duration by 10 seconds per level.",baseCost:l(150),cost:l(150),costMultiplier:t=>l(t.cost).mul(l(1.75).pow(t.level)),level:l(0),maxLevel:l(18),effect:t=>t.mul(10),formatEffect:t=>`+${t.toNumber()} seconds duration`,icon:"i-heroicons-hourglass",isUnlocked:()=>!1,category:"automation",appliesTo:["global"],position:{row:1,col:6},prerequisites:["rushCooldownReduction"]},{id:"rushMaxPerDay",name:"Rush Capacity",description:"Increases maximum Colony Rushes per day by 2 per level.",baseCost:l(125),cost:l(125),costMultiplier:t=>l(t.cost).mul(l(1.6).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>t.mul(2),formatEffect:t=>`+${t.toNumber()} max rushes per day`,icon:"i-heroicons-battery-100",isUnlocked:()=>!1,category:"automation",appliesTo:["global"],position:{row:2,col:5},prerequisites:["rushCooldownReduction"]},{id:"unlockMegaAnt",name:"Mega Ant Evolution",description:"Unlock the Mega Ant laboratory, allowing you to evolve your colony with powerful mutations.",baseCost:l(1e8),cost:l(1e8),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:4,col:2},prerequisites:["autoMegacolony"]},{id:"unlockAutoFeed",name:"Mega Ant Auto Feed",description:"Enables automatic feeding of food and pheromone essence to the Mega Ant when digestive systems are empty.",baseCost:l(5e7),cost:l(5e7),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!1,category:"automation",appliesTo:["global"],position:{row:5,col:2},prerequisites:["unlockMegaAnt"]},{id:"autoUpgradeWorker",name:"Worker Auto Specialization",description:"Enables automatic upgrading of Worker Ant specializations based on available points, from cheapest to most expensive.",baseCost:l(150),cost:l(150),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!0,category:"automation",appliesTo:["worker"],position:{row:0,col:1},prerequisites:["autoWorker"]},{id:"autoUpgradeNursery",name:"Nursery Auto Specialization",description:"Enables automatic upgrading of Nursery specializations based on available points, from cheapest to most expensive.",baseCost:l(1500),cost:l(1500),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!0,category:"automation",appliesTo:["nursery"],position:{row:1,col:1},prerequisites:["autoNursery"]},{id:"autoUpgradeQueenChamber",name:"Queen Chamber Auto Specialization",description:"Enables automatic upgrading of Queen Chamber specializations based on available points, from cheapest to most expensive.",baseCost:l(15e3),cost:l(15e3),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!0,category:"automation",appliesTo:["queenChamber"],position:{row:2,col:1},prerequisites:["autoQueenChamber"]},{id:"autoUpgradeColony",name:"Colony Auto Specialization",description:"Enables automatic upgrading of Colony specializations based on available points, from cheapest to most expensive.",baseCost:l(15e4),cost:l(15e4),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!0,category:"automation",appliesTo:["colony"],position:{row:3,col:1},prerequisites:["autoColony"]},{id:"autoUpgradeMegacolony",name:"Mega Colony Auto Specialization",description:"Enables automatic upgrading of Mega Colony specializations based on available points, from cheapest to most expensive.",baseCost:l(15e5),cost:l(15e5),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!1,category:"automation",appliesTo:["megacolony"],position:{row:4,col:1},prerequisites:["autoMegacolony"]},{id:"autoUpgradeHivemind",name:"Hive Mind Auto Specialization",description:"Enables automatic upgrading of Hive Mind specializations based on available points, from cheapest to most expensive.",baseCost:l(15e6),cost:l(15e6),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!1,category:"automation",appliesTo:["hivemind"],position:{row:5,col:1},prerequisites:["autoHivemind"]},{id:"autoUpgradeAntopolis",name:"Antopolis Auto Specialization",description:"Enables automatic upgrading of Antopolis specializations based on available points, from cheapest to most expensive.",baseCost:l(15e7),cost:l(15e7),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!1,category:"automation",appliesTo:["antopolis"],position:{row:6,col:1},prerequisites:["autoAntopolis"]},{id:"unlockQueueAll",name:"Mass Quest Queueing",description:"Enables queueing multiple quests at once with a single click",baseCost:l(1e5),cost:l(1e5),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-queue-list",isUnlocked:()=>!1,category:"automation",appliesTo:["global"],position:{row:1,col:3},prerequisites:["unlockAutoQuestAdvance"]},{id:"autoUpgradeAlateHatchery",name:"Alate Hatchery Auto Specialization",description:"Enables automatic upgrading of Alate Hatchery specializations based on available points, from cheapest to most expensive.",baseCost:l(1e10),cost:l(1e10),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!1,category:"automation",appliesTo:["alateHatchery"],position:{row:7,col:2},prerequisites:["autoAlateHatchery"]},{id:"autoEvolve",name:"Automated Evolution",description:"Automatically perform Evolution when the required cycles are met. Can be toggled in settings.",baseCost:l(1e18),cost:l(1e18),level:l(0),maxLevel:l(1),effect:t=>l(t),formatEffect:Os,icon:"i-heroicons-arrow-path-rounded-square",isUnlocked:()=>!0,category:"automation",appliesTo:["global"],position:{row:6,col:2},prerequisites:["unlockMegaAnt"]}],wJ=()=>[{id:"generatorSynergy",name:"Generator Synergy",description:"Each generator type boosts all others by 2% per level",baseCost:l(100),cost:l(100),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(1).add(t.mul(.02)),formatEffect:qe,icon:"i-heroicons-puzzle-piece",isUnlocked:()=>!0,category:"synergy",appliesTo:["global"],position:{row:0,col:0},synergyConfig:{countSource:t=>l(t.generatorStore.generators.filter(e=>e.unlocked||e.purchasable).length),percentBoostPerItem:.02}},{id:"evolutionSynergy",name:"Evolution Synergy",description:"Each evolution completed boosts production by 1% per level",baseCost:l(200),cost:l(200),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(1).add(t.mul(.01)),formatEffect:qe,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"synergy",appliesTo:["global"],position:{row:0,col:1},synergyConfig:{countSource:t=>t.evolutionCount,percentBoostPerItem:.01}},{id:"honeyDewSynergy",name:"Honey Dew Synergy",description:"Each upgraded field boosts production by 0.25% per level",baseCost:l(300),cost:l(300),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(1).add(t.mul(.0025)),formatEffect:qe,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"synergy",appliesTo:["global"],position:{row:0,col:2},synergyConfig:{countSource:t=>{const e=t.aphidFarmStore;if(!e||!e.fields||e.fields.length===0)return l(0);const s=e.fields.reduce((n,r)=>n+Math.max(0,r.level-1),0);return l(s)},percentBoostPerItem:.0025}},{id:"workerManualBoughtSynergy",name:"Worker Synergy",description:"Each worker ant manually bought boosts worker ant production by 1% per level",baseCost:l(400),cost:l(400),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.01)),formatEffect:qe,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"synergy",appliesTo:["worker"],position:{row:1,col:0},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("worker");return e?e.manualPurchases:l(0)},percentBoostPerItem:.01}},{id:"workerManualBoughtSynergyAdvanced",name:"Advanced Worker Synergy",description:"Each worker ant manually bought boosts worker ant production by 2.5% per level",baseCost:l("1e20"),cost:l("1e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.025)),formatEffect:qe,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"synergy",appliesTo:["worker"],position:{row:1,col:1},prerequisites:["workerManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("worker");return e?e.manualPurchases:l(0)},percentBoostPerItem:.025}},{id:"nurseryManualBoughtSynergy",name:"Nursery Synergy",description:"Each nursery manually bought boosts nursery production by 2% per level",baseCost:l(600),cost:l(600),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.02)),formatEffect:qe,icon:"i-heroicons-home-modern",isUnlocked:()=>!0,category:"synergy",appliesTo:["nursery"],position:{row:2,col:0},prerequisites:["workerManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("nursery");return e?e.manualPurchases:l(0)},percentBoostPerItem:.02}},{id:"nurseryManualBoughtSynergyAdvanced",name:"Advanced Nursery Synergy",description:"Each nursery manually bought boosts nursery production by 5% per level",baseCost:l("1e20"),cost:l("1e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.05)),formatEffect:qe,icon:"i-heroicons-home-modern",isUnlocked:()=>!0,category:"synergy",appliesTo:["nursery"],position:{row:2,col:1},prerequisites:["nurseryManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("nursery");return e?e.manualPurchases:l(0)},percentBoostPerItem:.05}},{id:"queenChamberManualBoughtSynergy",name:"Queen Chamber Synergy",description:"Each queen chamber manually bought boosts queen chamber production by 3% per level",baseCost:l(800),cost:l(800),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.03)),formatEffect:qe,icon:"i-heroicons-crown",isUnlocked:()=>!0,category:"synergy",appliesTo:["queenChamber"],position:{row:3,col:0},prerequisites:["nurseryManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("queenChamber");return e?e.manualPurchases:l(0)},percentBoostPerItem:.03}},{id:"queenChamberManualBoughtSynergyAdvanced",name:"Advanced Queen Chamber Synergy",description:"Each queen chamber manually bought boosts queen chamber production by 7.5% per level",baseCost:l("1e20"),cost:l("1e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.075)),formatEffect:qe,icon:"i-heroicons-crown",isUnlocked:()=>!0,category:"synergy",appliesTo:["queenChamber"],position:{row:3,col:1},prerequisites:["queenChamberManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("queenChamber");return e?e.manualPurchases:l(0)},percentBoostPerItem:.075}},{id:"colonyManualBoughtSynergy",name:"Colony Synergy",description:"Each colony manually bought boosts colony production by 4% per level",baseCost:l(1200),cost:l(1200),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.04)),formatEffect:qe,icon:"i-heroicons-building-storefront",isUnlocked:()=>!0,category:"synergy",appliesTo:["colony"],position:{row:4,col:0},prerequisites:["queenChamberManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("colony");return e?e.manualPurchases:l(0)},percentBoostPerItem:.04}},{id:"colonyManualBoughtSynergyAdvanced",name:"Advanced Colony Synergy",description:"Each colony manually bought boosts colony production by 10% per level",baseCost:l("2e20"),cost:l("2e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.1)),formatEffect:qe,icon:"i-heroicons-building-storefront",isUnlocked:()=>!0,category:"synergy",appliesTo:["colony"],position:{row:4,col:1},prerequisites:["colonyManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("colony");return e?e.manualPurchases:l(0)},percentBoostPerItem:.1}},{id:"megacolonyManualBoughtSynergy",name:"Mega Colony Synergy",description:"Each mega colony manually bought boosts mega colony production by 5% per level",baseCost:l(2e3),cost:l(2e3),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.05)),formatEffect:qe,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"synergy",appliesTo:["megacolony"],position:{row:5,col:0},prerequisites:["colonyManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("megacolony");return e?e.manualPurchases:l(0)},percentBoostPerItem:.05}},{id:"megacolonyManualBoughtSynergyAdvanced",name:"Advanced Mega Colony Synergy",description:"Each mega colony manually bought boosts mega colony production by 12.5% per level",baseCost:l("3e20"),cost:l("3e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.125)),formatEffect:qe,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"synergy",appliesTo:["megacolony"],position:{row:5,col:1},prerequisites:["megacolonyManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("megacolony");return e?e.manualPurchases:l(0)},percentBoostPerItem:.125}},{id:"hivemindManualBoughtSynergy",name:"Hive Mind Synergy",description:"Each hive mind manually bought boosts hive mind production by 7% per level",baseCost:l(3e3),cost:l(3e3),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.07)),formatEffect:qe,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!0,category:"synergy",appliesTo:["hivemind"],position:{row:6,col:0},prerequisites:["megacolonyManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("hivemind");return e?e.manualPurchases:l(0)},percentBoostPerItem:.07}},{id:"hivemindManualBoughtSynergyAdvanced",name:"Advanced Hive Mind Synergy",description:"Each hive mind manually bought boosts hive mind production by 17.5% per level",baseCost:l("5e20"),cost:l("5e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.175)),formatEffect:qe,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!0,category:"synergy",appliesTo:["hivemind"],position:{row:6,col:1},prerequisites:["hivemindManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("hivemind");return e?e.manualPurchases:l(0)},percentBoostPerItem:.175}},{id:"antopolisManualBoughtSynergy",name:"Antopolis Synergy",description:"Each antopolis manually bought boosts antopolis production by 10% per level",baseCost:l(5e3),cost:l(5e3),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.1)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["antopolis"],position:{row:7,col:0},prerequisites:["hivemindManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("antopolis");return e?e.manualPurchases:l(0)},percentBoostPerItem:.1}},{id:"antopolisManualBoughtSynergyAdvanced",name:"Advanced Antopolis Synergy",description:"Each antopolis manually bought boosts antopolis production by 25% per level",baseCost:l("8e20"),cost:l("8e20"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.25)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["antopolis"],position:{row:7,col:1},prerequisites:["antopolisManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("antopolis");return e?e.manualPurchases:l(0)},percentBoostPerItem:.25}},{id:"alateHatcheryManualBoughtSynergy",name:"Alate Hatchery Synergy",description:"Each alate hatchery manually bought boosts alate hatchery production by 15% per level",baseCost:l(8e3),cost:l(8e3),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.15)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["alateHatchery"],position:{row:8,col:0},prerequisites:["antopolisManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("alateHatchery");return e?e.manualPurchases:l(0)},percentBoostPerItem:.15}},{id:"alateHatcheryManualBoughtSynergyAdvanced",name:"Advanced Alate Hatchery Synergy",description:"Each alate hatchery manually bought boosts alate hatchery production by 37.5% per level",baseCost:l("1e21"),cost:l("1e21"),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.375)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["alateHatchery"],position:{row:8,col:1},prerequisites:["alateHatcheryManualBoughtSynergy"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("alateHatchery");return e?e.manualPurchases:l(0)},percentBoostPerItem:.375}},{id:"safeKillWorkerSynergy",name:"Training Bug Worker Synergy",description:"Each 1000 Training Bugs killed boosts worker ant production by 0.1% per level",baseCost:l(500),cost:l(500),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.001)),formatEffect:qe,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"synergy",appliesTo:["worker"],position:{row:1,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("safe");return l(Math.floor(e/1e3))},percentBoostPerItem:.001}},{id:"safeKillWorkerSynergyAdvanced",name:"Advanced Training Bug Worker Synergy",description:"Each 1000 Training Bugs killed boosts worker ant production by 0.25% per level",baseCost:l("2e24"),cost:l("2e24"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.0025)),formatEffect:qe,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"synergy",appliesTo:["worker"],position:{row:1,col:4},prerequisites:["safeKillWorkerSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("safe");return l(Math.floor(e/1e3))},percentBoostPerItem:.0025}},{id:"workerKillNurserySynergy",name:"Worker Ant Nursery Synergy",description:"Each 1000 Worker Ants killed boosts nursery production by 0.2% per level",baseCost:l(800),cost:l(800),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.002)),formatEffect:qe,icon:"i-heroicons-home-modern",isUnlocked:()=>!0,category:"synergy",appliesTo:["nursery"],position:{row:2,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("worker");return l(Math.floor(e/1e3))},percentBoostPerItem:.002}},{id:"workerKillNurserySynergyAdvanced",name:"Advanced Worker Ant Nursery Synergy",description:"Each 1000 Worker Ants killed boosts nursery production by 0.5% per level",baseCost:l("3e24"),cost:l("3e24"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.005)),formatEffect:qe,icon:"i-heroicons-home-modern",isUnlocked:()=>!0,category:"synergy",appliesTo:["nursery"],position:{row:2,col:4},prerequisites:["workerKillNurserySynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("worker");return l(Math.floor(e/1e3))},percentBoostPerItem:.005}},{id:"soldierKillQueenChamberSynergy",name:"Soldier Ant Queen Chamber Synergy",description:"Each 1000 Soldier Ants killed boosts queen chamber production by 0.4% per level",baseCost:l(1e3),cost:l(1e3),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.004)),formatEffect:qe,icon:"i-heroicons-crown",isUnlocked:()=>!0,category:"synergy",appliesTo:["queenChamber"],position:{row:3,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("soldier");return l(Math.floor(e/1e3))},percentBoostPerItem:.004}},{id:"soldierKillQueenChamberSynergyAdvanced",name:"Advanced Soldier Ant Queen Chamber Synergy",description:"Each 1000 Soldier Ants killed boosts queen chamber production by 1.0% per level",baseCost:l("4e24"),cost:l("4e24"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.01)),formatEffect:qe,icon:"i-heroicons-crown",isUnlocked:()=>!0,category:"synergy",appliesTo:["queenChamber"],position:{row:3,col:4},prerequisites:["soldierKillQueenChamberSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("soldier");return l(Math.floor(e/1e3))},percentBoostPerItem:.01}},{id:"beetleKillColonySynergy",name:"Beetle Colony Synergy",description:"Each 1000 Beetles killed boosts colony production by 0.8% per level",baseCost:l(1500),cost:l(1500),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.008)),formatEffect:qe,icon:"i-heroicons-building-storefront",isUnlocked:()=>!0,category:"synergy",appliesTo:["colony"],position:{row:4,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("beetle");return l(Math.floor(e/1e3))},percentBoostPerItem:.008}},{id:"beetleKillColonySynergyAdvanced",name:"Advanced Beetle Colony Synergy",description:"Each 1000 Beetles killed boosts colony production by 2.0% per level",baseCost:l("6e24"),cost:l("6e24"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.02)),formatEffect:qe,icon:"i-heroicons-building-storefront",isUnlocked:()=>!0,category:"synergy",appliesTo:["colony"],position:{row:4,col:4},prerequisites:["beetleKillColonySynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("beetle");return l(Math.floor(e/1e3))},percentBoostPerItem:.02}},{id:"scorpionKillMegacolonySynergy",name:"Scorpion Mega Colony Synergy",description:"Each 1000 Scorpions killed boosts mega colony production by 1.6% per level",baseCost:l(2500),cost:l(2500),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.016)),formatEffect:qe,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"synergy",appliesTo:["megacolony"],position:{row:5,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("scorpion");return l(Math.floor(e/1e3))},percentBoostPerItem:.016}},{id:"scorpionKillMegacolonySynergyAdvanced",name:"Advanced Scorpion Mega Colony Synergy",description:"Each 1000 Scorpions killed boosts mega colony production by 4.0% per level",baseCost:l("1e25"),cost:l("1e25"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.04)),formatEffect:qe,icon:"i-heroicons-building-office-2",isUnlocked:()=>!0,category:"synergy",appliesTo:["megacolony"],position:{row:5,col:4},prerequisites:["scorpionKillMegacolonySynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("scorpion");return l(Math.floor(e/1e3))},percentBoostPerItem:.04}},{id:"tarantulaKillHivemindSynergy",name:"Tarantula Hive Mind Synergy",description:"Each 1000 Tarantulas killed boosts hive mind production by 3.2% per level",baseCost:l(4e3),cost:l(4e3),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.032)),formatEffect:qe,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!0,category:"synergy",appliesTo:["hivemind"],position:{row:6,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("tarantula");return l(Math.floor(e/1e3))},percentBoostPerItem:.032}},{id:"tarantulaKillHivemindSynergyAdvanced",name:"Advanced Tarantula Hive Mind Synergy",description:"Each 1000 Tarantulas killed boosts hive mind production by 8.0% per level",baseCost:l("2e25"),cost:l("2e25"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.08)),formatEffect:qe,icon:"i-heroicons-cpu-chip",isUnlocked:()=>!0,category:"synergy",appliesTo:["hivemind"],position:{row:6,col:4},prerequisites:["tarantulaKillHivemindSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("tarantula");return l(Math.floor(e/1e3))},percentBoostPerItem:.08}},{id:"ultraBeetleKillAntopolisSynergy",name:"Ultra Beetle Antopolis Synergy",description:"Each 1000 Ultra Beetles killed boosts antopolis production by 6.4% per level",baseCost:l(6e3),cost:l(6e3),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.064)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["antopolis"],position:{row:7,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("ultra_beetle");return l(Math.floor(e/1e3))},percentBoostPerItem:.064}},{id:"ultraBeetleKillAntopolisSynergyAdvanced",name:"Advanced Ultra Beetle Antopolis Synergy",description:"Each 1000 Ultra Beetles killed boosts antopolis production by 16.0% per level",baseCost:l("2e25"),cost:l("2e25"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.16)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["antopolis"],position:{row:7,col:4},prerequisites:["ultraBeetleKillAntopolisSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("ultra_beetle");return l(Math.floor(e/1e3))},percentBoostPerItem:.16}},{id:"queenWaspKillAlateHatcherySynergy",name:"Queen Wasp Alate Hatchery Synergy",description:"Each 1000 Queen Wasps killed boosts alate hatchery production by 12% per level",baseCost:l(1e4),cost:l(1e4),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.12)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["alateHatchery"],position:{row:8,col:3},prerequisites:["generatorSynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("queen_wasp");return l(Math.floor(e/1e3))},percentBoostPerItem:.12}},{id:"queenWaspKillAlateHatcherySynergyAdvanced",name:"Advanced Queen Wasp Alate Hatchery Synergy",description:"Each 1000 Queen Wasps killed boosts alate hatchery production by 30% per level",baseCost:l("4e25"),cost:l("4e25"),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.3)),formatEffect:qe,icon:"i-heroicons-building-library",isUnlocked:()=>!0,category:"synergy",appliesTo:["alateHatchery"],position:{row:8,col:4},prerequisites:["queenWaspKillAlateHatcherySynergy"],synergyConfig:{countSource:t=>{const e=t.bossStore.getBugKillCount("queen_wasp");return l(Math.floor(e/1e3))},percentBoostPerItem:.3}},{id:"pheromoneEvolutionSynergy",name:"Evolution Pheromone Synergy",description:"Each evolution completed boosts pheromone production by 1.5% per level",baseCost:l(5e5),cost:l(5e5),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(1).add(t.mul(.015)),formatEffect:qe,icon:"i-heroicons-arrow-path-20-solid",isUnlocked:()=>!0,category:"synergy",appliesTo:["pheromone"],position:{row:0,col:3},prerequisites:["evolutionSynergy"],synergyConfig:{countSource:t=>t.evolutionCount,percentBoostPerItem:.015}}],EJ=()=>[{id:"epBoost",name:"Evolution Mastery",description:"Increases Evolution Points gained per cycle by 10% per level",baseCost:l(25),cost:l(25),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(25),effect:t=>l(1).add(t.mul(.1)),formatEffect:qe,icon:"i-heroicons-star",isUnlocked:()=>!0,category:"prestige",appliesTo:["ep"],position:{row:0,col:0}},{id:"evolutionPower",name:"Evolution Power",description:"Each evolution completed adds 2% boost to all generators per level (scales with diminishing returns based on the square root of evolutions)",baseCost:l(500),cost:l(500),costMultiplier:t=>l(t.cost).mul(l(4).pow(t.level)),level:l(0),maxLevel:l(10),effect:t=>l(1).add(t.mul(.02)),formatEffect:qe,icon:"i-heroicons-fire",isUnlocked:()=>!0,category:"prestige",appliesTo:["global"],position:{row:1,col:1},prerequisites:["epBoost"],synergyConfig:{countSource:t=>t.evolutionCount,percentBoostPerItem:.02}},{id:"evolutionaryInsight",name:"Evolutionary Insight",description:"Each evolution completed adds 1% boost to EP gain per level (scales with diminishing returns based on the square root of evolutions)",baseCost:l(750),cost:l(750),costMultiplier:t=>l(t.cost).mul(l(4.5).pow(t.level)),level:l(0),maxLevel:l(15),effect:t=>l(1).add(t.mul(.01)),formatEffect:qe,icon:"i-heroicons-light-bulb",isUnlocked:()=>!0,category:"prestige",appliesTo:["ep"],position:{row:1,col:0},prerequisites:["epBoost"],synergyConfig:{countSource:t=>t.evolutionCount,percentBoostPerItem:.01}},{id:"workerSynergyEP",name:"Worker Ant Synergy",description:"Each manually purchased worker ant adds 0.01% boost to EP gain per level",baseCost:l(250),cost:l(250),costMultiplier:t=>l(t.cost).mul(l(2.2).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(1e-4)),formatEffect:qe,icon:"i-heroicons-bug-ant",isUnlocked:()=>!0,category:"prestige",appliesTo:["ep"],position:{row:2,col:0},prerequisites:["evolutionaryInsight"],synergyConfig:{countSource:t=>{const e=t.generatorStore.getGenerator("worker");return e?e.manualPurchases:l(0)},percentBoostPerItem:1e-4}},{id:"exponentialEvolution",name:"Exponential Evolution",description:"Increases Evolution Points gained per cycle exponentially",baseCost:l(1e4),cost:l(1e4),level:l(0),maxLevel:l(3),effect:t=>l(2).pow(t),formatEffect:Ss,icon:"i-heroicons-star",isUnlocked:()=>!0,category:"prestige",appliesTo:["ep"],position:{row:3,col:0},prerequisites:["workerSynergyEP","doubleEvolution"]},{id:"doubleEvolution",name:"Double Evolution",description:"Doubles the amount of Evolution Points gained per cycle",baseCost:l(1e3),cost:l(1e3),costMultiplier:t=>l(t.cost).mul(l(10).pow(t.level)),level:l(0),maxLevel:l(2),effect:t=>t.gt(0)?l(2).pow(t):l(1),formatEffect:Ss,icon:"i-heroicons-star",isUnlocked:()=>!0,category:"prestige",appliesTo:["ep"],position:{row:2,col:1},prerequisites:["evolutionPower","evolutionaryInsight"]},{id:"inventorySlots",name:"Inventory Expansion",description:"Increase maximum inventory slots by 5. Each level adds more slots, but costs increase rapidly.",baseCost:l(100),cost:l(100),level:l(0),maxLevel:l(20),effect:t=>t.mul(5),formatEffect:t=>`+${t.toNumber()} slots`,isUnlocked:()=>!0,costMultiplier:({cost:t,level:e})=>t.mul(l(1.5).pow(e)),icon:"i-heroicons-squares-2x2",category:"prestige",appliesTo:["global"],position:{row:0,col:2}},{id:"equipmentSlots",name:"Equipment Mastery",description:"Unlock an additional equipment slot. Each level unlocks one more slot, up to a maximum of 10 slots.",baseCost:l(1e3),cost:l(1e3),level:l(1),maxLevel:l(10),effect:t=>t,formatEffect:t=>`${be(t,0)} slots`,isUnlocked:()=>!0,icon:"i-heroicons-shield-check",category:"prestige",costMultiplier:t=>l(t.cost).mul(l(2).pow(l(2).pow(t.level))),appliesTo:["global"],position:{row:1,col:2},prerequisites:["inventorySlots"]},{id:"evolutionaryAdaptation",name:"Evolutionary Adaptation",description:"Each evolution cycle grants a stacking 1% bonus to food production",baseCost:l(1e3),cost:l(1e3),level:l(0),maxLevel:l(1),effect:t=>t,formatEffect:Os,icon:"i-heroicons-arrow-trending-up",isUnlocked:()=>!0,category:"prestige",appliesTo:["worker"],position:{row:2,col:2},prerequisites:["equipmentSlots","evolutionPower"]}],CJ=()=>[{id:"workerReproduction",name:"Worker Self-Replication",description:"Workers have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(50),cost:l(50),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"reproduction",appliesTo:["worker"],position:{row:0,col:0}},{id:"nurseryReproduction",name:"Nursery Self-Replication",description:"Nurseries have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(500),cost:l(500),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"reproduction",appliesTo:["nursery"],position:{row:1,col:0},prerequisites:["workerReproduction"]},{id:"queenChamberReproduction",name:"Queen Chamber Self-Replication",description:"Queen Chambers have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(2500),cost:l(2500),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"reproduction",appliesTo:["queenChamber"],position:{row:2,col:0},prerequisites:["nurseryReproduction"]},{id:"colonyReproduction",name:"Colony Self-Replication",description:"Colonies have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(25e3),cost:l(25e3),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"reproduction",appliesTo:["colony"],position:{row:3,col:0},prerequisites:["queenChamberReproduction"]},{id:"megacolonyReproduction",name:"Mega Colony Self-Replication",description:"Mega Colonies have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(25e4),cost:l(25e4),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!1,category:"reproduction",appliesTo:["megacolony"],position:{row:4,col:0},prerequisites:["colonyReproduction"]},{id:"hivemindReproduction",name:"Hive Mind Self-Replication",description:"Hive Minds have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(25e7),cost:l(25e7),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!1,category:"reproduction",appliesTo:["hivemind"],position:{row:5,col:0},prerequisites:["megacolonyReproduction"]},{id:"antopolisReproduction",name:"Antopolis Self-Replication",description:"Antopolis has a 1% chance per level to reproduce itself each tick (max 5%)",baseCost:l(25e8),cost:l(25e8),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!1,category:"reproduction",appliesTo:["antopolis"],position:{row:6,col:0},prerequisites:["hivemindReproduction"]},{id:"alateHatcheryReproduction",name:"Alate Hatchery Self-Replication",description:"Alate Hatcheries have a 1% chance per level to reproduce themselves each tick (max 5%)",baseCost:l(1e9),cost:l(1e9),costMultiplier:t=>l(t.cost).mul(l(3).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>t.mul(.01).min(.05),formatEffect:t=>`${(t.toNumber()*100).toFixed(1)}%`,icon:"i-heroicons-arrow-path",isUnlocked:()=>!1,category:"reproduction",appliesTo:["alateHatchery"],position:{row:7,col:0},prerequisites:["antopolisReproduction"]}],SJ=()=>[{id:"levelUpReduction",name:"Swift Progression",description:"Reduces the requirements for all generator level-ups by 10% per level",baseCost:l(150),cost:l(150),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(5),effect:t=>l(1).sub(t.mul(.1)),formatEffect:ml,icon:"i-heroicons-arrow-trending-up",isUnlocked:()=>!0,category:"level-requirement",appliesTo:["global"],position:{row:0,col:0}},{id:"workerLevelUpReduction",name:"Worker Advancement",description:"Reduces worker level-up requirements by 15% per level",baseCost:l(75),cost:l(75),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(3),effect:t=>l(1).sub(t.mul(.15)),formatEffect:ml,icon:"i-heroicons-user-solid",isUnlocked:()=>!0,category:"level-requirement",appliesTo:["worker"],position:{row:1,col:0},prerequisites:["levelUpReduction"]},{id:"nurseryLevelUpReduction",name:"Nursery Advancement",description:"Reduces nursery level-up requirements by 20% per level",baseCost:l(300),cost:l(300),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(3),effect:t=>l(1).sub(t.mul(.2)),formatEffect:ml,icon:"i-heroicons-home-solid",isUnlocked:()=>!0,category:"level-requirement",appliesTo:["nursery"],position:{row:1,col:1},prerequisites:["levelUpReduction"]},{id:"queenChamberLevelUpReduction",name:"Queen Chamber Advancement",description:"Reduces queen chamber level-up requirements by 20% per level",baseCost:l(500),cost:l(500),costMultiplier:t=>l(t.cost).mul(l(1.6).pow(t.level)),level:l(0),maxLevel:l(3),effect:t=>l(1).sub(t.mul(.2)),formatEffect:ml,icon:"i-heroicons-crown-solid",isUnlocked:()=>!0,category:"level-requirement",appliesTo:["queenChamber"],position:{row:1,col:2},prerequisites:["levelUpReduction"]},{id:"advancedGeneratorLevelUpReduction",name:"Advanced Generator Advancement",description:"Reduces level-up requirements for high-tier generators by 25% per level",baseCost:l(2e3),cost:l(2e3),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(2),effect:t=>l(1).sub(t.mul(.25)),formatEffect:ml,icon:"i-heroicons-building-office-2",isUnlocked:()=>!1,category:"level-requirement",appliesTo:["colony","megacolony","hivemind","antopolis","alateHatchery"],position:{row:2,col:1},prerequisites:["nurseryLevelUpReduction","queenChamberLevelUpReduction"]}],TJ=()=>[{id:"reRollChance",name:"Re-Roll Chance",description:"Increases the chance to re-roll items from defeated bugs in adventure mode, giving you a better chance to get the items you want.",baseCost:l(1e4),cost:l(1e4),costMultiplier:t=>l(t.cost).mul(l(1.3).pow(t.level)),level:l(0),maxLevel:l(100),effect:t=>t,formatEffect:t=>`+${t.toNumber()}%`,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"adventure",appliesTo:["global"],position:{row:0,col:0}},{id:"doubleKill",name:"Double Kill",description:"Increases the chance to get a double kill in adventure mode, giving you a better chance to get the items you want.",baseCost:l(1e4),cost:l(1e4),costMultiplier:t=>l(t.cost).mul(l(1.3).pow(t.level)),level:l(0),maxLevel:l(100),effect:t=>t,formatEffect:t=>`+${t.toNumber()}%`,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"adventure",appliesTo:["global"],position:{row:1,col:0},prerequisites:["reRollChance"]},{id:"doubleKillEffect",name:"Double Kill Effect",description:"Increases the effect of the double kill in adventure mode, increases the quantity of bugs killed in a double kill.",baseCost:l(1e4),cost:l(1e4),costMultiplier:t=>l(t.cost).mul(l(1.6).pow(t.level).pow(1.2)),level:l(0),maxLevel:l(3),effect:t=>t,formatEffect:t=>`x${t.toNumber()}`,icon:"i-heroicons-cog-6-tooth",isUnlocked:()=>!0,category:"adventure",appliesTo:["global"],position:{row:2,col:0},prerequisites:["doubleKill"]},{id:"damageMultiplier",name:"Combat Training",description:"Increases the damage your ants deal in adventure mode.",baseCost:l(15e3),cost:l(15e3),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(50),effect:t=>l(1).add(t.mul(.1)),formatEffect:Ss,icon:"i-heroicons-bolt",isUnlocked:()=>!0,category:"adventure",appliesTo:["damage"],position:{row:0,col:1}},{id:"healthMultiplier",name:"Exoskeleton Reinforcement",description:"Increases the maximum health of your ants in adventure mode.",baseCost:l(2e4),cost:l(2e4),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(50),effect:t=>l(1).add(t.mul(.1)),formatEffect:Ss,icon:"i-heroicons-heart",isUnlocked:()=>!0,category:"adventure",appliesTo:["health"],position:{row:0,col:2}},{id:"defenseMultiplier",name:"Hardened Carapace",description:"Increases the defense of your ants in adventure mode, reducing damage taken from enemies.",baseCost:l(18e3),cost:l(18e3),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(50),effect:t=>l(1).add(t.mul(.1)),formatEffect:Ss,icon:"i-heroicons-shield-check",isUnlocked:()=>!0,category:"adventure",appliesTo:["defense","global"],position:{row:0,col:3}},{id:"regenMultiplier",name:"Cellular Regeneration",description:"Increases the health regeneration of your ants in adventure mode.",baseCost:l(25e3),cost:l(25e3),costMultiplier:t=>l(t.cost).mul(l(1.5).pow(t.level)),level:l(0),maxLevel:l(50),effect:t=>l(1).add(t.mul(.1)),formatEffect:Ss,icon:"i-heroicons-arrow-path",isUnlocked:()=>!0,category:"adventure",appliesTo:["regen"],position:{row:0,col:4}},{id:"advancedCombatTechniques",name:"Advanced Combat Techniques",description:"Teaches your ants advanced combat techniques, significantly boosting their damage output.",baseCost:l(1e5),cost:l(1e5),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(30),effect:t=>l(1).add(t.mul(.15)),formatEffect:Ss,icon:"i-heroicons-fire",isUnlocked:()=>!0,category:"adventure",appliesTo:["damage"],position:{row:1,col:1},prerequisites:["damageMultiplier"]},{id:"chitinEvolution",name:"Chitin Evolution",description:"Evolves your ants' exoskeletons to be more robust, substantially increasing their maximum health.",baseCost:l(15e4),cost:l(15e4),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(30),effect:t=>l(1).add(t.mul(.15)),formatEffect:Ss,icon:"i-heroicons-shield",isUnlocked:()=>!0,category:"adventure",appliesTo:["health"],position:{row:1,col:2},prerequisites:["healthMultiplier"]},{id:"organizedDefense",name:"Organized Defense",description:"Your ants learn to coordinate their defensive efforts, greatly reducing damage taken in combat.",baseCost:l(125e3),cost:l(125e3),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(30),effect:t=>l(1).add(t.mul(.15)),formatEffect:Ss,icon:"i-heroicons-shield-exclamation",isUnlocked:()=>!0,category:"adventure",appliesTo:["defense"],position:{row:1,col:3},prerequisites:["defenseMultiplier"]},{id:"advancedHealing",name:"Advanced Healing",description:"Your ant colony develops advanced healing methods, significantly improving health regeneration.",baseCost:l(175e3),cost:l(175e3),costMultiplier:t=>l(t.cost).mul(l(1.8).pow(t.level)),level:l(0),maxLevel:l(30),effect:t=>l(1).add(t.mul(.15)),formatEffect:Ss,icon:"i-heroicons-plus-circle",isUnlocked:()=>!0,category:"adventure",appliesTo:["regen"],position:{row:1,col:4},prerequisites:["regenMultiplier"]},{id:"ultimateCombatMastery",name:"Ultimate Combat Mastery",description:"Unlock the pinnacle of ant combat prowess, maximizing damage output against all foes.",baseCost:l(1e9),cost:l(1e9),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(.2)),formatEffect:Ss,icon:"i-heroicons-sparkles",isUnlocked:()=>!0,category:"adventure",appliesTo:["damage"],position:{row:2,col:1},prerequisites:["advancedCombatTechniques"]},{id:"bioAdaptiveArmor",name:"Bio-Adaptive Armor",description:"Develop biologically adaptive armor for your ants, drastically increasing their survivability.",baseCost:l(25e8),cost:l(25e8),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(.2)),formatEffect:Ss,icon:"i-heroicons-shield-check-solid",isUnlocked:()=>!0,category:"adventure",appliesTo:["health"],position:{row:2,col:2},prerequisites:["chitinEvolution"]},{id:"fortifiedColonyDefense",name:"Fortified Colony Defense",description:"Establish unparalleled defensive strategies, making your colony nearly impenetrable.",baseCost:l(15e8),cost:l(15e8),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(.2)),formatEffect:Ss,icon:"i-heroicons-academic-cap",isUnlocked:()=>!0,category:"adventure",appliesTo:["defense"],position:{row:2,col:3},prerequisites:["organizedDefense"]},{id:"rapidRegenerationSurge",name:"Rapid Regeneration Surge",description:"Achieve an unprecedented rate of health regeneration, allowing ants to recover swiftly from battles.",baseCost:l(3e9),cost:l(3e9),costMultiplier:t=>l(t.cost).mul(l(2).pow(t.level)),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(.2)),formatEffect:Ss,icon:"i-heroicons-bolt-slash",isUnlocked:()=>!0,category:"adventure",appliesTo:["regen"],position:{row:2,col:4},prerequisites:["advancedHealing"]}],AJ=()=>[{id:"honeydewBoost",name:"Enriched Honeydew",description:"Increases the base yield of all aphids.",baseCost:l(500),cost:l(500),level:l(0),maxLevel:l(20),effect:t=>l(1).add(t.mul(.1)),formatEffect:t=>`+${Lt(t.sub(1))}`,icon:"mdi:leaf",isUnlocked:()=>!0,category:"aphid-farm",appliesTo:["aphidYield"],position:{row:1,col:1}},{id:"aphidGrowthAccelerator",name:"Accelerated Maturation",description:"Reduces the growth time of all aphids.",baseCost:l(750),cost:l(750),level:l(0),maxLevel:l(15),effect:t=>l(1).sub(t.mul(.05)).max(.1),formatEffect:t=>`-${Lt(l(1).sub(t))}`,icon:"mdi:timer-sand",isUnlocked:()=>!0,category:"aphid-farm",appliesTo:["aphidGrowth"],position:{row:2,col:1},prerequisites:["honeydewBoost"]},{id:"fieldCostReducer",name:"Efficient Expansion",description:"Reduces the honeydew cost of purchasing new fields.",baseCost:l(1e3),cost:l(1e3),level:l(0),maxLevel:l(10),effect:t=>l(1).sub(t.mul(.08)).max(.2),formatEffect:t=>`-${Lt(l(1).sub(t))}`,icon:"mdi:shovel",isUnlocked:()=>!0,category:"aphid-farm",appliesTo:["newFieldCost"],position:{row:1,col:2},prerequisites:["honeydewBoost"]}],hy=15,gy=0,IJ=()=>[{id:"pheromoneBoostBasic",name:"Pheromone Amplification",description:"Increases pheromone production by 15% per level",baseCost:l(1e3),cost:l(1e3),costMultiplier:e=>l(e.cost).mul(l(1.2).pow(e.level)),level:l(0),maxLevel:l(100),effect:e=>l(1).add(e.mul(.15)),formatEffect:qe,icon:"i-heroicons-beaker-20-solid",position:{row:hy+0,col:gy+0},isUnlocked:()=>!0,category:"pheromone",appliesTo:["pheromone"],isAdditive:!0},{id:"advancedPheromoneSynthesis",name:"Advanced Pheromone Synthesis",description:"Significantly boosts pheromone production, increasing by 50% per level",baseCost:l(1e6),cost:l(1e6),costMultiplier:e=>l(e.cost).mul(l(1.8).pow(e.level)),level:l(0),maxLevel:l(30),effect:e=>l(1).add(e.mul(.5)),formatEffect:qe,icon:"i-heroicons-fire-20-solid",position:{row:hy+1,col:gy+0},prerequisites:["pheromoneBoostBasic"],isUnlocked:()=>!0,category:"pheromone",appliesTo:["pheromone"],isAdditive:!0},{id:"pheromoneExponential",name:"Exponential Pheromone Surge",description:"Pheromone production gains an exponential boost per level",baseCost:l(1e8),cost:l(1e8),costMultiplier:e=>l(e.cost).mul(l(3).pow(e.level)),level:l(0),maxLevel:l(10),effect:e=>l(1.5).pow(e),formatEffect:Ss,icon:"i-heroicons-bolt-20-solid",position:{row:hy+0,col:gy+1},prerequisites:["advancedPheromoneSynthesis"],isUnlocked:()=>!0,category:"pheromone",appliesTo:["pheromone"]}],PJ=()=>{const t=[...vJ(),...bJ(),...yJ(),...xJ(),...kJ(),...wJ(),...EJ(),...CJ(),...SJ(),...TJ(),...AJ(),...IJ()];return t.map(e=>{const s=e.isUnlocked;return s()===!1&&(e.isUnlocked=()=>jo(e.id,t)),e}),t.forEach(e=>{e.level.gt(0)&&e.costMultiplier&&(e.cost=i0(e.baseCost,e.level,e.costMultiplier))}),t},K_=PJ(),St=Es("prestige",()=>{const t=Y(l(0)),e=Y(l(0)),s=Y(l(0)),n=Y(l(0)),r=Y(l(0)),o=Y(l(3)),i=Y(l(1e3)),c=Y(l(0)),u=Y(l(0)),d=Y(!1),m=Y(!0),f=Y(!0),p=Y("all"),g=Y("all"),w=Y(""),C=Y("default"),E=Y("comfortable"),k=Y(!1),A=Y(1),S=Y("view"),T=Y(!1),R=q(()=>e.value.gt(0)),L=q(()=>Cr().isFeatureUnlocked.evolution),P=q(()=>{const V=e.value.toNumber();let O=3;return V<=100?O+=V*.95:V<=150?O=3+100*.95+(V-100)*1.35:V<=200?O=3+100*.95+50*1.35+(V-150)*1.95:V<=250?O=3+100*.95+50*1.35+50*1.95+(V-200)*2.55:V<=300?O=3+100*.95+50*1.35+50*1.95+50*2.55+(V-250)*3.25:O=3+100*.95+50*1.35+50*1.95+50*2.55+50*3.25+(V-300)*4.05,l(O).ceil()}),I=Y(K_),D=new Map;I.value.forEach(V=>{V.maxLevel&&D.set(V.id,V.maxLevel.toNumber())});const U=V=>{const O=M(V);return O?O.effect(O.level):l(1)},M=V=>I.value.find(O=>O.id===V),x=V=>{const O=M(V);return O?O.level:l(0)},$=()=>I.value.filter(V=>V.appliesTo.includes("aphidYield")&&V.level.gt(0)).reduce((V,O)=>V.mul(O.effect(O.level)),l(1)),Z=()=>I.value.filter(V=>V.appliesTo.includes("aphidGrowth")&&V.level.gt(0)).reduce((V,O)=>V.mul(O.effect(O.level)),l(1)),me=()=>I.value.filter(V=>V.appliesTo.includes("newFieldCost")&&V.level.gt(0)).reduce((V,O)=>V.mul(O.effect(O.level)),l(1)),re=V=>{const O=Ht(),te=Ls(),G=kn();return I.value.filter(he=>he.category==="synergy"&&he.level.gt(0)&&he.synergyConfig).forEach(he=>{if(!he.synergyConfig)return;const ye=he.synergyConfig.countSource;if(!ye)return;let ae=ye({generatorStore:O,evolutionCount:e.value,aphidFarmStore:te,bossStore:G});(he.id==="evolutionPower"||he.id==="evolutionaryInsight")&&(ae.gt(0)?ae=ae.sqrt():ae=l(0));const de=he.synergyConfig.percentBoostPerItem,Me=he.level.mul(de).mul(ae);he.appliesTo.includes("global")?V[`${he.id}Bonus`]=l(1).add(Me):he.appliesTo.forEach(Le=>{V[`${he.id}_${Le}Bonus`]=l(1).add(Me)})}),V},J=()=>{const V={};Ht(),I.value.forEach(te=>{te.isCombo||(V[te.id]=te.effect(te.level))}),I.value.forEach(te=>{te.isCombo&&(te.level.eq(0)||te.effects&&te.effects.forEach(G=>{const ne=`${te.id}_${G.target}`;V[ne]=G.multiplier(te.level)}))}),re(V);const O=I.value.find(te=>te.id==="bulkAutomation");return O&&O.level.gt(0)?V.bulkAutomationMultiplier=l(1).add(O.level.mul(4)):V.bulkAutomationMultiplier=l(1),V},le=q(()=>r.value.gte(P.value)),se=q(()=>{const V=r.value.add(1),O=ie(r.value.toNumber()),te=ie(V.toNumber()),G=sn().getEPBoostMultiplier();return te.sub(O).mul(G)}),z=()=>{l(1);const V=r.value.toNumber();if(V<=0)return l(0);const O=l(V);l(.1);const te=O,G=O.mul(O.sub(1)).mul(.05);let ne=te.add(G);const he=sn().getEPBoostMultiplier();return ne=ne.mul(he),ne},ce=({foodReset:V=!0,ticksReset:O=!0})=>{c.value=l(i.value.toString()),r.value=r.value.add(1),tn().updateHivemindProgress(1);try{Or().updateStats("maxLoopsInEvolution",r.value,!1)}catch(Me){console.error("Error updating loop achievements:",Me)}const te=sn().getEPBoostMultiplier(),G=r.value.sub(1),ne=ie(G.toNumber()),ye=ie(r.value.toNumber()).sub(ne).mul(te);u.value=u.value.add(ye);const ae=r.value.toNumber();o.value=j(ae);const de=U("cycleFoodReduction");if(O&&(s.value=l(0)),V){tn().updateAntopolisProgress(1);const Me=B(ae);i.value=Me.mul(de)}},pe=(V=1)=>{if(!L.value)return;s.value=s.value.add(V),n.value=n.value.add(V),s.value.gte(o.value)&&ce({foodReset:!1,ticksReset:!0}),Ht().food.gte(i.value)&&ce({foodReset:!0,ticksReset:!1})},_e=()=>be(t.value,2),Ee=()=>be(e.value,0),Ue=()=>be(r.value,0),ze=()=>be(P.value,0),Re=()=>be(u.value,2),$e=()=>be(se.value,2),Ce=()=>be(o.value,1),Oe=()=>be(i.value,0),ve=()=>be(n.value,0),fe=()=>{d.value=!1,m.value=!0,f.value=!0,p.value="all",g.value="all",w.value="",C.value="default",E.value="comfortable"},X=()=>({evolutionPoints:t.value.toString(),evolutionCount:e.value.toString(),currentLoopTicks:s.value.toString(),currentEvolutionTicks:n.value.toString(),loopsCompleted:r.value.toString(),ticksPerLoop:o.value.toString(),foodForNextLoop:i.value.toString(),previousFoodRequirement:c.value.toString(),potentialEPGain:u.value.toString(),upgrades:I.value.map(V=>({id:V.id,level:V.level.toString()})),filters:{showMaxed:d.value,showAffordable:m.value,showUnlocked:f.value,activeTab:p.value,sidebarActiveTab:g.value,searchQuery:w.value,selectedSort:C.value,gridDensity:E.value,sidebarCollapsed:k.value},autoEvolveEnabled:T.value,zoomLevel:A.value,currentMode:S.value}),H=V=>{V.evolutionPoints&&(t.value=l(V.evolutionPoints)),V.evolutionCount&&(e.value=l(V.evolutionCount)),V.loopsCompleted&&(r.value=l(V.loopsCompleted)),V.currentLoopTicks&&(s.value=l(V.currentLoopTicks)),V.currentEvolutionTicks&&(n.value=l(V.currentEvolutionTicks)),V.ticksPerLoop&&(o.value=l(V.ticksPerLoop)),V.foodForNextLoop?i.value=l(V.foodForNextLoop):V.antsForNextLoop&&(i.value=l(V.antsForNextLoop)),V.previousFoodRequirement?c.value=l(V.previousFoodRequirement):c.value=l(0),V.upgrades&&Array.isArray(V.upgrades)&&V.upgrades.forEach(O=>{const te=I.value.find(G=>G.id===O.id);if(te){te.level=l(O.level);const G=te.costMultiplier;G?te.cost=G({cost:te.baseCost,level:te.level}):te.cost=te.baseCost.mul(l(1.5).pow(te.level))}}),V.filters&&(typeof V.filters.showMaxed=="boolean"&&(d.value=V.filters.showMaxed),typeof V.filters.showAffordable=="boolean"&&(m.value=V.filters.showAffordable),typeof V.filters.showUnlocked=="boolean"&&(f.value=V.filters.showUnlocked),typeof V.filters.activeTab=="string"&&(p.value=V.filters.activeTab),typeof V.filters.sidebarActiveTab=="string"&&(g.value=V.filters.sidebarActiveTab),typeof V.filters.searchQuery=="string"&&(w.value=V.filters.searchQuery),typeof V.filters.selectedSort=="string"&&(C.value=V.filters.selectedSort),typeof V.filters.gridDensity=="string"&&(E.value=V.filters.gridDensity),typeof V.filters.sidebarCollapsed=="boolean"&&(k.value=V.filters.sidebarCollapsed)),typeof V.autoEvolveEnabled=="boolean"&&(T.value=V.autoEvolveEnabled),typeof V.zoomLevel=="number"&&(A.value=V.zoomLevel),typeof V.currentMode=="string"&&(S.value=V.currentMode),V.potentialEPGain?u.value=l(V.potentialEPGain):u.value=z();try{const O=Wt();O&&W(O.ascensionCount)}catch(O){console.error("Failed to update upgrade max levels:",O)}},W=V=>{if(!V)return;const O=["efficiency","prestige","automation"],te=["rush","unlock"];I.value.forEach(G=>{if(!G.maxLevel)return;if(O.includes(G.category)){G.maxLevel=l(D.get(G.id)||0),G.level.gt(G.maxLevel)&&(G.level=l(G.maxLevel.toString()));return}if(te.some(ye=>G.id.includes(ye)))return;const ne=D.get(G.id);if(ne===void 0||ne<=1)return;let he;ne<=5?he=Math.min(Math.floor(ne*.1*V),ne):ne<=10?he=Math.min(Math.floor(ne*.15*V),ne):he=Math.min(Math.floor(ne*.2*V),ne),G.maxLevel=l(ne+he),G.level.gt(G.maxLevel)&&(console.log(`Capping upgrade ${G.id} level from ${G.level.toString()} to maxLevel ${G.maxLevel.toString()}`),G.level=l(G.maxLevel.toString()),G.costMultiplier?G.cost=G.costMultiplier({cost:G.baseCost,level:G.level}):G.cost=G.baseCost.mul(l(1.5).pow(G.level)))})},ge=()=>{if(!le.value)return!1;const V=u.value;t.value=t.value.add(V),e.value=e.value.add(1);try{Or().updateEvolutionStats(t.value,V,e.value,r.value)}catch(O){console.error("Error updating achievement stats:",O)}Te();try{const O=Wt();O&&W(O.ascensionCount)}catch(O){console.error("Failed to update upgrade max levels after evolving:",O)}return!0},Te=()=>{var de;const V=Ht(),O=tn(),te=Vn(),G=Tr();te.resetEvolutionTicks(),V.generators.forEach(Me=>{if(Me.count=l(0),Me.manualPurchases=l(0),Me.selfReplicated=l(0),Me.tier>1&&Me.tier<=4&&(Me.unlocked=!1),Me.tier>=5){const Le=Me.id==="megacolony"?"unlockMegacolony":Me.id==="hivemind"?"unlockHivemind":Me.id==="antopolis"?"unlockAntopolis":Me.id==="alateHatchery"?"unlockAlateHatchery":"";if(Le){const it=I.value.find(Ze=>Ze.id===Le);Me.purchasable=it?it.level.gt(0):!1,Me.unlocked=!1}else Me.purchasable=!1,Me.unlocked=!1}G.autoEnableGeneratorsAfterPrestige&&(Me.autoPurchaseEnabled=!0)});const ne=l(10);V.food=ne,s.value=l(0),u.value=l(0);const he=((de=I.value.find(Me=>Me.id==="prestigeAcceleration"))==null?void 0:de.level)||l(0);if(he.gt(0)){r.value=new Se(he.toString());const Me=ie(r.value.toNumber()),Le=sn().getEPBoostMultiplier();u.value=Me.mul(Le)}else r.value=l(0);const ye=U("cycleFoodReduction"),ae=l(1e3);i.value=ae.mul(ye),c.value=l(0),o.value=l(3),O.resetProgress()},Ie=()=>{const V=Ht(),O=tn(),te=Vn(),G=Tr(),ne=Ks(),he=Ml(),ye=Qs(),ae=x("unlockAdventure").gt(0),de=x("unlockQuests").gt(0),Me=x("unlockAutoSalvage").gt(0),Le=x("unlockSalvageAll").gt(0),it=x("unlockMegaAnt").gt(0),Ze=x("unlockAutoQuestAdvance").gt(0),pt=x("autoWorker").gt(0),ft=x("autoNursery").gt(0),Ve=x("autoQueenChamber").gt(0),ke=x("autoColony").gt(0),Fe=x("autoMegacolony").gt(0),Ae=x("autoHivemind").gt(0),We=x("autoAntopolis").gt(0),nt=x("autoAlateHatchery").gt(0),ot=x("bulkAutomation").gt(0),_t=x("cycleTimeReduction"),Mt=x("cycleTimeReductionAdvanced"),ut=x("cycleTimeReductionMaster"),Kt=x("unlockColonyRush").gt(0),Nt=x("rushCooldownReduction"),Xt=x("rushDurationIncrease"),zt=x("rushMaxPerDay"),mn=x("equipmentSlots"),hs=x("inventorySlots");if(t.value=l(0),n.value=l(0),e.value=l(0),u.value=l(0),te.resetEvolutionTicks(),ne.resetForAscension(),he.resetForAscension(),V.generators.forEach(rt=>{rt.count=l(0),rt.manualPurchases=l(0),rt.selfReplicated=l(0),rt.tier>1&&rt.tier<=4&&(rt.unlocked=!1),rt.tier>=5&&(rt.purchasable=!1,rt.unlocked=!1),G.autoEnableGeneratorsAfterPrestige&&(rt.autoPurchaseEnabled=!0)}),I.value.forEach(rt=>{rt.level=l(0),rt.cost=rt.baseCost}),V.food=l(10),s.value=l(0),r.value=l(0),i.value=l(1e3),c.value=l(0),o.value=l(3),O.resetProgress(),ae){const rt=M("unlockAdventure");rt&&(rt.level=l(1))}if(de){const rt=M("unlockQuests");rt&&(rt.level=l(1))}if(Ze){const rt=M("unlockAutoQuestAdvance");rt&&(rt.level=l(1))}if(Me){const rt=M("unlockAutoSalvage");rt&&(rt.level=l(1))}if(Le){const rt=M("unlockSalvageAll");rt&&(rt.level=l(1))}if(pt){const rt=M("autoWorker");rt&&(rt.level=l(1))}if(ft){const rt=M("autoNursery");rt&&(rt.level=l(1))}if(Ve){const rt=M("autoQueenChamber");rt&&(rt.level=l(1))}if(ke){const rt=M("autoColony");rt&&(rt.level=l(1))}if(Fe){const rt=M("autoMegacolony");rt&&(rt.level=l(1))}if(Ae){const rt=M("autoHivemind");rt&&(rt.level=l(1))}if(We){const rt=M("autoAntopolis");rt&&(rt.level=l(1))}if(nt){const rt=M("autoAlateHatchery");rt&&(rt.level=l(1))}if(ot){const rt=M("bulkAutomation");rt&&(rt.level=l(1))}if(_t.gt(0)){const rt=M("cycleTimeReduction");rt&&(rt.level=_t)}if(Mt.gt(0)){const rt=M("cycleTimeReductionAdvanced");rt&&(rt.level=Mt)}if(ut.gt(0)){const rt=M("cycleTimeReductionMaster");rt&&(rt.level=ut)}if(it){const rt=M("unlockMegaAnt");rt&&(rt.level=l(1))}if(Kt){const rt=M("unlockColonyRush");rt&&(rt.level=l(1));const ic=M("rushCooldownReduction");ic&&(ic.level=Nt);const Wa=M("rushDurationIncrease");Wa&&(Wa.level=Xt);const Oi=M("rushMaxPerDay");Oi&&(Oi.level=zt)}const io=M("inventorySlots");io&&(io.level=hs);const Ni=M("equipmentSlots");Ni&&(Ni.level=mn),ye.resetForAscension();try{const rt=Wt();rt&&W(rt.ascensionCount)}catch(rt){console.error("Failed to update max levels during ascension reset:",rt)}},Ne=V=>{const O=I.value.find(G=>G.id===V);if(!O||O.maxLevel&&O.level.gte(O.maxLevel)||!jo(V,I.value)||t.value.lt(O.cost))return!1;t.value=t.value.sub(O.cost),O.level=O.level.add(1);const te=O.costMultiplier;return te?O.cost=te({cost:O.baseCost,level:O.level}):O.cost=O.baseCost.mul(l(1.5).pow(O.level)),!0},je=V=>{const O=I.value.find(ye=>ye.id===V);if(!O||O.maxLevel&&O.level.gte(O.maxLevel)||!jo(V,I.value)||t.value.lt(O.cost))return!1;let te=0,G=l(O.cost.toString()),ne=l(t.value.toString()),he=l(O.level.toString());if(O.maxLevel){const ye=O.maxLevel.sub(O.level).toNumber();if(ye<=0)return!1;let ae=0;for(;ne.gte(G)&&ae<ye;){ne=ne.sub(G),he=he.add(1),ae++;const de=O.costMultiplier;de?G=de({cost:O.baseCost,level:he}):G=O.baseCost.mul(l(1.5).pow(he))}return ae===0?!1:(t.value=ne,O.level=he,O.cost=G,!0)}for(;ne.gte(G);){ne=ne.sub(G),he=he.add(1),te++;const ye=O.costMultiplier;ye?G=ye({cost:O.baseCost,level:he}):G=O.baseCost.mul(l(1.5).pow(he))}return te===0?!1:(t.value=ne,O.level=he,O.cost=G,!0)},N=V=>{const O=I.value.find(ye=>ye.id===V);if(!O||O.maxLevel&&O.level.gte(O.maxLevel)||!jo(V,I.value)||t.value.lt(O.cost))return 0;let te=0,G=l(O.cost.toString()),ne=l(t.value.toString()),he=l(O.level.toString());if(O.maxLevel){const ye=O.maxLevel.sub(O.level).toNumber();if(ye<=0)return 0;let ae=0;for(;ne.gte(G)&&ae<ye;){ne=ne.sub(G),he=he.add(1),ae++;const de=O.costMultiplier;de?G=de({cost:O.baseCost,level:he}):G=O.baseCost.mul(l(1.5).pow(he))}return ae}for(;ne.gte(G);){ne=ne.sub(G),he=he.add(1),te++;const ye=O.costMultiplier;ye?G=ye({cost:O.baseCost,level:he}):G=O.baseCost.mul(l(1.5).pow(he))}return te},ue=V=>{let O=3;return V<=100?O+=V*.95:V<=150?O=3+100*.95+(V-100)*1.35:V<=200?O=3+100*.95+50*1.35+(V-150)*1.95:V<=250?O=3+100*.95+50*1.35+50*1.95+(V-200)*2.55:V<=300?O=3+100*.95+50*1.35+50*1.95+50*2.55+(V-250)*3.25:O=3+100*.95+50*1.35+50*1.95+50*2.55+50*3.25+(V-300)*4.05,l(O).ceil()},j=V=>{const O=l(3).plus(l(V)).mul(l(1.05).pow(l(V).div(5))).ceil();let te=l(0);return I.value.forEach(G=>{if(!G.level.lte(0)){if(G.isCombo&&G.effects)G.effects.forEach(ne=>{if(ne.target==="cycle_trips"){const he=ne.multiplier(G.level);te=te.add(he)}});else if(G.appliesTo.includes("cycle_trips")){const ne=G.effect(G.level);te=te.add(ne)}}}),O.sub(te).max(0)},B=V=>{const O=U("cycleFoodReduction");return l(1e3).mul(l(1.5).pow(l(V).mul(2).pow(1.4))).mul(O)},ie=V=>{l(1);const O=l(V),te=O,G=O.mul(O.sub(1)).mul(.05);return te.add(G)};return{evolutionPoints:t,evolutionCount:e,currentLoopTicks:s,currentEvolutionTicks:n,loopsCompleted:r,ticksPerLoop:o,foodForNextLoop:i,previousFoodRequirement:c,potentialEPGain:u,hasEvolved:R,requiredLoops:P,evolutionUpgrades:I,canEvolve:le,showMaxed:d,showAffordable:m,showUnlocked:f,activeTab:p,sidebarActiveTab:g,searchQuery:w,selectedSort:C,gridDensity:E,sidebarCollapsed:k,resetFilters:fe,getUpgrade:M,getUpgradeMultiplier:U,getAllMultipliers:J,evolve:ge,resetProgress:Te,purchaseUpgrade:Ne,purchaseMaxUpgrades:je,calculateMaxPurchasableLevels:N,updateLoopProgress:pe,formatEP:_e,formatEvolutionCount:Ee,formatLoopsCompleted:Ue,formatRequiredLoops:ze,formatPotentialEPGain:Re,formatPotentialEPGainForNextCycle:$e,formatTicksPerLoop:Ce,formatFoodForNextLoop:Oe,formatCurrentEvolutionTicks:ve,getState:X,loadState:H,isUpgradeUnlocked:jo,unlockedPrestige:L,getUpgradeCount:x,resetForAscension:Ie,calculateRequiredLoopsForEvolution:ue,calculateTripsPerCycle:j,calculateFoodForCycle:B,calculateEPGainForCycles:ie,autoEvolveEnabled:T,getAphidYieldMultiplier:$,getAphidGrowthMultiplier:Z,getNewFieldCostMultiplier:me,zoomLevel:A,currentMode:S,updateUpgradeMaxLevels:W}});function ud(){const t=St();return{isAdventureUnlocked:q(()=>t.getUpgradeCount("unlockAdventure").gt(0))}}function cL(t={}){const{storageKey:e="scrollPositions",debounceTime:s=100,saveOnUnmount:n=!0,scrollElementSelector:r="main"}=t,o=W1(),i=Tu(),c=Y(0);let u=null,d=null;const m=Y(!1),f=()=>u?u.scrollTop:0,p=()=>{if(!(!u||m.value))try{const A=JSON.parse(localStorage.getItem(e)||"{}"),S=f();A[o.path]=S,localStorage.setItem(e,JSON.stringify(A)),c.value=S}catch(A){console.error("Failed to save scroll position:",A)}},g=async()=>{if(u)try{m.value=!0;const S=JSON.parse(localStorage.getItem(e)||"{}")[o.path]||0;await vs(),u.scrollTo({top:S,behavior:"auto"}),c.value=S,setTimeout(()=>{m.value=!1},50)}catch(A){console.error("Failed to restore scroll position:",A),m.value=!1}},w=()=>{m.value||(d!==null&&window.clearTimeout(d),d=window.setTimeout(()=>{p()},s))},C=()=>{try{const A=JSON.parse(localStorage.getItem(e)||"{}");delete A[o.path],localStorage.setItem(e,JSON.stringify(A)),c.value=0,u&&u.scrollTo({top:0})}catch(A){console.error("Failed to clear scroll position:",A)}},E=()=>{try{localStorage.removeItem(e),c.value=0,u&&u.scrollTo({top:0})}catch(A){console.error("Failed to clear all scroll positions:",A)}},k=()=>(u=document.querySelector(r),u?(u.addEventListener("scroll",w,{passive:!0}),!0):(console.warn(`Scrollable element not found with selector: ${r}`),!1));return Et(()=>{setTimeout(()=>{k()&&g()},50)}),xn(()=>{u&&u.removeEventListener("scroll",w),n&&!m.value&&p(),d!==null&&window.clearTimeout(d)}),i.beforeEach((A,S,T)=>{S.path!==A.path&&!m.value&&p(),T()}),dt(()=>o.path,(A,S)=>{A!==S&&setTimeout(()=>{g()},150)}),{scrollPosition:c,saveScrollPosition:p,restoreScrollPosition:g,clearScrollPosition:C,clearAllScrollPositions:E}}const MJ=Je({__name:"ScrollToTopButton",props:{threshold:{default:300},buttonClass:{default:"fixed bottom-4 right-4 bg-amber-600 hover:bg-amber-700 text-white rounded-full p-3 shadow-lg transition-all duration-200 z-50"},iconClass:{default:"i-heroicons-arrow-up w-5 h-5"}},setup(t){const e=t,{scrollPosition:s}=cL(),n=Y(!1);dt(s,o=>{n.value=o>e.threshold});const r=()=>{const o=document.querySelector("main");o&&o.scrollTo({top:0,behavior:"smooth"})};return(o,i)=>(h(),Tt(or,{name:"fade"},{default:Rt(()=>[n.value?(h(),v("button",{key:0,onClick:r,class:K([o.buttonClass,"fixed bottom-25 right-6 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 text-white rounded-full p-3 shadow-lg transition-all duration-200 z-10 flex items-center justify-center transform hover:scale-105 active:scale-95"]),"aria-label":"Scroll to top"},[a("span",{class:K([o.iconClass,"w-5 h-5"])},null,2)],2)):Q("",!0)]),_:1}))}}),Ct=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},Ha=Ct(MJ,[["__scopeId","data-v-0c9d09dc"]]),LT="idle-ant-farm-animated-features";function uL(){const t=Cr(),s=Y((()=>{try{const c=localStorage.getItem(LT);return c?JSON.parse(c):{}}catch(c){return console.error("Error loading animated features:",c),{}}})()),n=()=>{try{localStorage.setItem(LT,JSON.stringify(s.value))}catch(c){console.error("Error saving animated features:",c)}},r=c=>t.isFeatureUnlocked[c]&&!s.value[c]?(s.value[c]=!0,n(),!0):!1,o=c=>{delete s.value[c],n()},i=()=>{s.value={},n()};return Et(()=>{Object.keys(t.isFeatureUnlocked).forEach(c=>{t.isFeatureUnlocked[c]&&s.value[c]===void 0&&(s.value[c]=!0)}),n()}),{shouldAnimateFeature:r,animatedFeatures:s,forceAnimateFeature:o,resetAllAnimations:i}}const $J={worker:{name:"Worker Ants",icon:"i-heroicons-bug-ant"},nursery:{name:"Nursery",icon:"i-heroicons-home-modern"},queenChamber:{name:"Queen Chamber",icon:"i-heroicons-crown"},colony:{name:"Colony",icon:"i-heroicons-building-storefront"},megacolony:{name:"Mega Colony",icon:"i-heroicons-building-office-2"},hivemind:{name:"Hive Mind",icon:"i-heroicons-cpu-chip"},antopolis:{name:"Antopolis",icon:"i-heroicons-building-library"},alateHatchery:{name:"Alate Hatchery",icon:"i-heroicons-building-library"}};function RJ(t){if(!t)return"";switch(t){case"worker":return"Levels up based on foraging ticks in current evolution";case"nursery":return"Levels up based on amount of food gained";case"queenChamber":return"Levels up based on total manual purchases (auto purchases are also counted)";case"colony":return"Levels up based on amount of upgrades purchased";case"megacolony":return"Levels up based on pheromone gained";case"hivemind":return"Levels up based on amount of cycles completed in current evolution";case"antopolis":return"Levels up based on total food cycles completed in current evolution";case"alateHatchery":return"Levels up based on pheromone gained";default:return""}}function LJ(t){if(!t)return"";switch(t){case"worker":return"ticks";case"nursery":return"food";case"queenChamber":return"purchases";case"colony":return"upgrades";case"megacolony":return"pheromone";case"hivemind":return"types";case"antopolis":return"levels";case"alateHatchery":return"pheromone";default:return""}}function Gr(){const t=Y(!1);return{isClosing:t,handleClose:(n,r=250)=>{r>0?(t.value=!0,setTimeout(()=>{n(),t.value=!1},r)):n()},preventBackgroundTouchMove:n=>{const r=n.target;(r.classList.contains("modal-backdrop")||r.getAttribute("data-modal-backdrop")==="true")&&n.preventDefault()}}}const DJ=Je({__name:"GeneratorInfoDialog",props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,{isClosing:r,handleClose:o,preventBackgroundTouchMove:i}=Gr(),c=()=>{o(()=>n("close"),250)},u=d=>{d.key==="Escape"&&s.show&&c()};return Et(()=>{window.addEventListener("keydown",u)}),xn(()=>{window.removeEventListener("keydown",u)}),dt(()=>s.show,d=>{}),(d,m)=>d.show?(h(),v("div",{key:0,class:"fixed inset-0 z-50 modal-backdrop","data-modal-backdrop":"true",onClick:xt(c,["self"]),onTouchmove:m[0]||(m[0]=xt((...f)=>b(i)&&b(i)(...f),["self"]))},[a("div",{class:K(["absolute inset-0 bg-black/50 animate-fadeIn",{"animate-fadeOut":b(r)}])},null,2),a("div",{class:K(["fixed inset-0 flex flex-col animate-fadeIn",{"animate-fadeOut":b(r)}])},[a("div",{class:K(["w-full h-full flex flex-col bg-amber-50 dark:bg-gray-900 text-amber-900 dark:text-amber-100 font-sans animate-slideUp",{"animate-slideDown":b(r)}])},[a("header",{class:"bg-gradient-to-r from-amber-800 to-amber-700 dark:from-amber-900 dark:to-amber-800 text-amber-50 shadow-lg"},[a("div",{class:"p-2 md:p-3"},[a("div",{class:"flex items-center justify-between"},[m[2]||(m[2]=a("h1",{class:"text-lg md:text-xl font-bold tracking-tight flex items-center"},[a("span",{class:"i-heroicons-information-circle text-amber-300 dark:text-amber-400 mr-2"}),oe(" About Ant Specialization ")],-1)),a("button",{onClick:c,class:"text-amber-50 hover:text-amber-300 dark:hover:text-amber-200 transition-colors p-1.5 rounded-full hover:bg-amber-900/30 dark:hover:bg-amber-950/40"},m[1]||(m[1]=[a("span",{class:"i-heroicons-x-mark text-lg"},null,-1)]))])])]),m[4]||(m[4]=js('<main class="flex-1 overflow-y-auto p-4 pb-6 scroll-smooth" data-v-620fc169><div class="space-y-3" data-v-620fc169><div class="bg-white dark:bg-gray-800 rounded-xl shadow-md border border-amber-200 dark:border-amber-700 p-3" data-v-620fc169><p class="text-sm text-amber-800 dark:text-amber-300 mb-2 font-medium" data-v-620fc169> How Ant Specialization Works: </p><ul class="text-xs text-amber-800 dark:text-amber-300 list-disc pl-4 space-y-1" data-v-620fc169><li data-v-620fc169>Each ant type has its own specialization level that increases based on different metrics: </li><li class="ml-3" data-v-620fc169><strong data-v-620fc169>Worker Ants:</strong> Level up based on foraging trips in current evolution (50% increase per level)</li><li class="ml-3" data-v-620fc169><strong data-v-620fc169>Nurseries:</strong> Level up based on amount of food gathered (100% increase per level)</li><li class="ml-3" data-v-620fc169><strong data-v-620fc169>Queen Chambers:</strong> Level up based on total manual purchases (30% increase per level)</li><li class="ml-3" data-v-620fc169><strong data-v-620fc169>Colonies:</strong> Level up based on amount of adaptations developed (20% increase per level)</li><li data-v-620fc169>Each level-up awards 1 adaptation point for that ant type</li><li data-v-620fc169>Adaptation points can be spent on specialized traits for that ant type</li><li data-v-620fc169>Specialization levels and adaptations reset when your colony undergoes metamorphosis </li></ul></div><div class="bg-white dark:bg-gray-800 rounded-xl shadow-md border border-amber-200 dark:border-amber-700 p-3" data-v-620fc169><p class="text-sm text-amber-800 dark:text-amber-300 mb-2 font-medium" data-v-620fc169> Types of Ant Adaptations: </p><ul class="text-xs text-amber-800 dark:text-amber-300 list-disc pl-4 space-y-1" data-v-620fc169><li data-v-620fc169><strong data-v-620fc169>Efficiency Adaptations:</strong> Increase production (+20% per level)</li><li data-v-620fc169><strong data-v-620fc169>Resource Adaptations:</strong> Decrease resource requirements (-5% per level)</li><li data-v-620fc169><strong data-v-620fc169>Special Adaptations:</strong> Add a chance for ants to reproduce themselves </li></ul></div></div></main>',1)),a("footer",{class:"bg-gradient-to-r from-amber-800 to-amber-700 dark:from-amber-900 dark:to-amber-800 text-amber-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]"},[a("div",{class:"flex justify-end p-3"},[a("button",{onClick:c,class:"px-3 py-2 bg-amber-900/20 dark:bg-amber-950/40 hover:bg-amber-900/30 dark:hover:bg-amber-950/50 rounded-lg text-amber-50 font-medium transition-colors duration-200 flex items-center justify-center active:scale-95 border border-amber-600 dark:border-amber-700"},m[3]||(m[3]=[a("span",{class:"i-heroicons-arrow-left text-base mr-1"},null,-1),oe(" Return to Dashboard ")]))])])],2)],2)],32)):Q("",!0)}}),NJ=Ct(DJ,[["__scopeId","data-v-620fc169"]]),OJ=["disabled"],Ul=Je({__name:"HoldableButton",props:{disabled:{type:Boolean},class:{},initialDelay:{},repeatInterval:{},accelerate:{type:Boolean},minInterval:{}},emits:["action"],setup(t,{emit:e}){const s=t,n=e,r=s.initialDelay??500,o=s.repeatInterval??100,i=s.accelerate??!0,c=s.minInterval??50,u=Y(!1),d=Y(null),m=Y(null),f=Y(o),p=Y(0),g=A=>{s.disabled||(A.preventDefault(),n("action"),u.value=!0,p.value=Date.now(),d.value=window.setTimeout(()=>{w()},r))},w=()=>{s.disabled||(m.value!==null&&clearInterval(m.value),f.value=o,m.value=window.setInterval(()=>{if(s.disabled){k();return}if(n("action"),i){const A=Date.now()-p.value;A>2e3&&(f.value=Math.max(c,o-Math.floor((A-2e3)/100)*5),f.value!==o&&m.value!==null&&(clearInterval(m.value),m.value=window.setInterval(()=>{s.disabled||n("action")},f.value)))}},f.value))},C=()=>{k()},E=()=>{k()},k=()=>{u.value=!1,d.value!==null&&(clearTimeout(d.value),d.value=null),m.value!==null&&(clearInterval(m.value),m.value=null)};return ar(()=>{k()}),(A,S)=>(h(),v("button",{class:K([s.class,"transition-all duration-150 flex items-center justify-center cursor-pointer disabled:cursor-not-allowed w-full py-2 px-2 text-xs rounded-md",u.value?"transform scale-95":"transform scale-100"]),disabled:A.disabled,onMousedown:g,onMouseup:C,onMouseleave:E,onTouchstart:xt(g,["prevent"]),onTouchend:xt(C,["prevent"]),onTouchcancel:xt(C,["prevent"])},[lf(A.$slots,"default")],42,OJ))}}),FJ={key:0,class:"bg-white/80 dark:bg-gray-800/80 p-3 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700 hover:border-amber-300 dark:hover:border-amber-600 transition-colors"},UJ={class:"flex justify-between items-start"},qJ={class:"flex items-center"},BJ={class:"font-medium text-gray-900 dark:text-gray-100"},VJ={class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},HJ={class:"text-right"},GJ={class:"text-xs text-amber-700 dark:text-amber-400"},jJ={class:"font-medium"},WJ={key:0},zJ={class:"text-xs text-amber-700 dark:text-amber-400 mt-1"},QJ={class:"font-medium"},KJ={class:"mt-3 flex justify-between items-center"},YJ={class:"text-xs text-amber-700 dark:text-amber-400"},XJ={key:0},JJ={class:"font-medium"},ZJ={key:1,class:"text-green-600 dark:text-green-500 font-medium"},eZ={key:0},tZ={key:1},sZ=Je({__name:"GeneratorUpgradeItem",props:{upgradeId:{type:String,required:!0}},setup(t){const e=t,s=tn(),n=q(()=>s.getUpgrade(e.upgradeId)),r=q(()=>!n.value||n.value.maxLevel!==null&&n.value.level.gte(n.value.maxLevel)?!1:s.generatorPoints[n.value.generatorId].gte(n.value.cost)),o=q(()=>{var d,m,f,p;if(!n.value)return"";const u=((m=(d=n.value).effect)==null?void 0:m.call(d,n.value.level))??l(1);return((p=(f=n.value).formatEffect)==null?void 0:p.call(f,u))??be(u,2)}),i=q(()=>{var u,d,m,f,p,g;return n.value?((f=(m=n.value).formatEffect)==null?void 0:f.call(m,((d=(u=n.value).effect)==null?void 0:d.call(u,n.value.level.add(1)))??l(1)))??be(((g=(p=n.value).effect)==null?void 0:g.call(p,n.value.level.add(1)))??l(1),2):""}),c=()=>{r.value&&n.value&&s.purchaseUpgrade(n.value.id)};return(u,d)=>n.value?(h(),v("div",FJ,[a("div",UJ,[a("div",null,[a("div",qJ,[a("span",{class:K(n.value.icon+" text-amber-600 dark:text-amber-500 mr-2")},null,2),a("span",BJ,_(n.value.name),1)]),a("div",VJ,_(n.value.description),1)]),a("div",HJ,[a("div",GJ,[d[0]||(d[0]=oe(" Level: ")),a("span",jJ,_(b(be)(n.value.level,0)),1),n.value.maxLevel!==null?(h(),v("span",WJ,"/"+_(b(be)(n.value.maxLevel,0)),1)):Q("",!0)]),a("div",zJ,[d[1]||(d[1]=oe(" Effect: ")),a("span",QJ,_(o.value),1)])])]),a("div",KJ,[a("div",YJ,[n.value.maxLevel===null||n.value.level.lt(n.value.maxLevel)?(h(),v("span",XJ,[d[2]||(d[2]=oe(" Next: ")),a("span",JJ,_(i.value),1)])):(h(),v("span",ZJ,"MAX LEVEL"))]),Ye(Ul,{onAction:c,disabled:!r.value,class:K(r.value?"px-3 py-1 text-xs rounded-md font-medium bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-700 text-white":"px-3 py-1 text-xs rounded-md font-medium bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"),"initial-delay":400,"repeat-interval":200,accelerate:!0},{default:Rt(()=>[n.value.maxLevel===null||n.value.level.lt(n.value.maxLevel)?(h(),v("span",eZ," Adapt ("+_(b(be)(n.value.cost,0))+" pts) ",1)):(h(),v("span",tZ,"Maxed"))]),_:1},8,["disabled","class"])])])):Q("",!0)}}),nZ={key:0,class:"fixed inset-0 z-50"},rZ={class:"bg-gradient-to-r from-amber-800 to-amber-700 dark:from-amber-900 dark:to-amber-800 text-amber-50 shadow-lg"},oZ={class:"p-2 md:p-3"},iZ={class:"flex items-center justify-between"},aZ={class:"text-lg md:text-xl font-bold tracking-tight flex items-center opacity-0 animate-fadeIn",style:{animationDelay:"150ms",animationFillMode:"forwards"}},lZ={class:"flex-1 overflow-y-auto p-4 pb-6 scroll-smooth"},cZ={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-amber-200 dark:border-amber-700 p-3 mb-4 opacity-0 animate-fadeIn",style:{animationDelay:"200ms",animationFillMode:"forwards"}},uZ={class:"flex flex-col md:flex-row md:justify-between md:items-center gap-3"},dZ={class:"text-xl font-bold text-amber-800 dark:text-amber-300 flex items-center"},mZ={class:"text-xl font-bold text-amber-800 dark:text-amber-300 flex items-center"},fZ={key:0},pZ={class:"text-xl font-bold text-amber-800 dark:text-amber-300 flex items-center"},hZ={class:"mt-3"},gZ={class:"text-sm text-amber-800 dark:text-amber-300 font-medium mb-1 flex justify-between"},vZ={class:"h-2.5 bg-amber-100 dark:bg-amber-900/50 rounded-full overflow-hidden"},bZ={class:"flex justify-between mt-1 text-xs text-amber-700 dark:text-amber-400"},yZ={class:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-700"},_Z={class:"text-xs text-amber-700 dark:text-amber-400"},xZ={key:0,class:"text-xs text-green-600 dark:text-green-400 mt-1"},kZ={class:"flex justify-between items-center mb-3 opacity-0 animate-fadeIn",style:{animationDelay:"250ms",animationFillMode:"forwards"}},wZ={key:0},EZ={key:0,class:"ml-1.5 text-xs bg-green-600 px-1.5 py-0.5 rounded"},CZ={key:1},SZ={key:0,class:"opacity-0 animate-fadeIn space-y-4",style:{animationDelay:"300ms",animationFillMode:"forwards"}},TZ={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700 p-4"},AZ={class:"text-lg font-bold text-amber-800 dark:text-amber-300 mb-3"},IZ={class:"mb-4"},PZ={class:"mb-4"},MZ={class:"mb-4"},$Z={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},RZ={class:"flex items-center mb-2"},LZ={class:"text-sm font-medium"},DZ={class:"ml-2 text-2xs bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 px-1.5 rounded-full"},NZ={class:"flex items-center justify-between mt-1"},OZ={class:"flex items-center space-x-1"},FZ=["onClick","disabled"],UZ={class:"w-12 h-8 flex items-center justify-center bg-white dark:bg-gray-700 border border-amber-200 dark:border-amber-700 rounded-md text-amber-900 dark:text-amber-100"},qZ=["onClick","disabled"],BZ={class:"flex space-x-1"},VZ=["onClick","disabled"],HZ=["onClick","disabled"],GZ={key:0,class:"mb-3 space-y-2"},jZ={class:"flex items-center justify-between"},WZ={class:"text-xs text-amber-500 dark:text-amber-400"},zZ={class:"bg-amber-50 dark:bg-gray-700 rounded-md p-2 border border-amber-200 dark:border-amber-700 max-h-60 overflow-y-auto"},QZ=["onDragstart","onDrop"],KZ={class:"flex items-center flex-1"},YZ={class:"ml-2 text-2xs bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 px-1.5 rounded-full"},XZ={class:"flex items-center mr-2"},JZ=["onClick","disabled"],ZZ=["onClick","disabled"],eee=["onClick"],tee={class:"flex justify-end space-x-2"},see=["disabled"],nee={key:1,class:"space-y-3"},ree={key:0,class:"space-y-3"},oee={class:"flex justify-between items-center"},iee={class:"flex items-center"},aee={key:0,class:"w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"},lee={class:"font-medium text-amber-800 dark:text-amber-300"},cee={class:"flex space-x-2"},uee=["onClick"],dee=["onClick"],mee={class:"mt-2 space-y-1"},fee={class:"text-xs text-amber-600 dark:text-amber-500 font-medium"},pee={class:"text-xs text-amber-700 dark:text-amber-400 line-clamp-2"},hee={key:0},gee={key:1},vee={class:"mt-3"},bee=["onClick"],yee={key:1,class:"text-center py-6 text-amber-600 dark:text-amber-500"},_ee={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 opacity-0 animate-fadeIn",style:{animationDelay:"300ms",animationFillMode:"forwards"}},xee=Je({__name:"GeneratorUpgradeModal",props:{show:{type:Boolean},selectedGenerator:{},generatorInfo:{}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,r=tn(),o=Y(!1),i=Y(!1),c=q(()=>s.selectedGenerator?r.getUpgradesForGenerator(s.selectedGenerator):[]);dt(()=>s.show,$e=>{$e?i.value=!0:o.value=!1});const u=()=>{o.value=!0,setTimeout(()=>{n("close"),i.value=!1},400)},d=q(()=>RJ(s.selectedGenerator)),m=q(()=>LJ(s.selectedGenerator)),f=q(()=>s.selectedGenerator?r.formatLevelRequirementReduction(s.selectedGenerator):"0%"),p=Y(!1),g=Y(!1),w=Y(!1),C=Y(""),E=Y(""),k=Y([]),A=Y(null),S=q(()=>s.selectedGenerator?r.getPresetsForGenerator(s.selectedGenerator):[]),T=q(()=>s.selectedGenerator?r.getActivePresetForGenerator(s.selectedGenerator):null),R=()=>{p.value=!p.value,p.value&&(g.value=!1,w.value=!1,C.value="",E.value="",k.value=[])},L=()=>{g.value=!0,w.value=!1,C.value="",k.value=[]},P=$e=>{g.value=!1,w.value=!0,E.value=$e.id,C.value=$e.name,k.value=[...$e.upgradeIds]},I=()=>{!s.selectedGenerator||!C.value.trim()||(r.createPreset(C.value.trim(),s.selectedGenerator,k.value),g.value=!1,C.value="",k.value=[])},D=()=>{!E.value||!C.value.trim()||(r.updatePreset(E.value,{name:C.value.trim(),upgradeIds:k.value}),w.value=!1,E.value="",C.value="",k.value=[])},U=()=>{g.value=!1,w.value=!1,E.value="",C.value="",k.value=[]},M=$e=>{confirm("Are you sure you want to delete this preset?")&&r.deletePreset($e)},x=$e=>{r.setActivePreset($e)},$=$e=>k.value.filter(Ce=>Ce===$e).length,Z=$e=>{const Ce=r.getUpgrade($e);Ce&&(Ce.maxLevel!==null?$($e)<Ce.maxLevel.toNumber()&&k.value.push($e):k.value.push($e))},me=($e,Ce)=>{k.value.splice(Ce,1)},re=$e=>{if($($e)>0){const Ce=k.value.lastIndexOf($e);Ce!==-1&&me($e,Ce)}},J=$e=>{k.value=k.value.filter(Ce=>Ce!==$e)},le=($e,Ce)=>{if(Ce!==null){const Oe=$($e),ve=Ce-Oe;for(let fe=0;fe<ve&&z($e);fe++)Z($e)}else for(let Oe=0;Oe<10&&z($e);Oe++)Z($e)},se=($e,Ce)=>1+k.value.slice(0,Ce).filter(Oe=>Oe===$e).length,z=$e=>{const Ce=r.getUpgrade($e);return Ce?Ce.maxLevel===null?!0:$($e)<Ce.maxLevel.toNumber():!1},ce=$e=>{const Ce=r.getUpgrade($e);return Ce?Ce.maxLevel===null?"":Ce.maxLevel.toString():""},pe=($e,Ce)=>{A.value=`${$e}:${Ce}`},_e=($e,Ce)=>{if(!A.value)return;const[Oe,ve]=A.value.split(":"),fe=parseInt(ve);if(isNaN(fe)||fe===Ce)return;const X=[...k.value],H=X.splice(fe,1)[0];X.splice(Ce,0,H),k.value=X,A.value=null},Ee=$e=>{if($e<=0)return;const Ce=[...k.value],Oe=Ce[$e];Ce[$e]=Ce[$e-1],Ce[$e-1]=Oe,k.value=Ce},Ue=$e=>{if($e>=k.value.length-1)return;const Ce=[...k.value],Oe=Ce[$e];Ce[$e]=Ce[$e+1],Ce[$e+1]=Oe,k.value=Ce},ze=q(()=>s.selectedGenerator?c.value.map($e=>{const Ce=$($e.id),Oe=z($e.id),ve=$e.maxLevel?$e.maxLevel.toNumber():null;return{...$e,occurrences:Ce,canAdd:Oe,maxLevel:ve}}):[]);Et(()=>{window.addEventListener("keydown",Re)}),ar(()=>{window.removeEventListener("keydown",Re)});const Re=$e=>{$e.key==="Escape"&&u()};return($e,Ce)=>{var Oe,ve,fe;return i.value?(h(),v("div",nZ,[a("div",{class:K(["absolute inset-0 bg-black/50 animate-fadeIn",{"animate-fadeOut":o.value}])},null,2),$e.selectedGenerator?(h(),v("div",{key:0,class:K(["fixed inset-0 flex flex-col animate-fadeIn",{"animate-fadeOut":o.value}])},[a("div",{class:K(["w-full h-full flex flex-col bg-amber-50 dark:bg-gray-900 text-amber-900 dark:text-amber-100 font-sans animate-slideUp",{"animate-slideDown":o.value}])},[a("header",rZ,[a("div",oZ,[a("div",iZ,[a("h1",aZ,[a("span",{class:K([(Oe=$e.generatorInfo[$e.selectedGenerator])==null?void 0:Oe.icon,"text-amber-300 dark:text-amber-200 mr-2"])},null,2),oe(" "+_((ve=$e.generatorInfo[$e.selectedGenerator])==null?void 0:ve.name)+" Adaptations ",1)]),a("button",{onClick:u,class:"text-amber-50 hover:text-amber-300 transition-colors p-1.5 rounded-full hover:bg-amber-900/30 dark:hover:bg-amber-950/40"},Ce[4]||(Ce[4]=[a("span",{class:"i-heroicons-x-mark text-lg"},null,-1)]))])])]),a("main",lZ,[a("div",cZ,[a("div",uZ,[a("div",null,[Ce[6]||(Ce[6]=a("div",{class:"text-sm text-amber-800 dark:text-amber-300 font-medium"},"Current Level",-1)),a("div",dZ,[Ce[5]||(Ce[5]=a("span",{class:"i-heroicons-star text-amber-500 dark:text-amber-400 mr-1"},null,-1)),oe(" Level "+_((fe=b(r).generatorLevels[$e.selectedGenerator])==null?void 0:fe.toNumber()),1)])]),a("div",null,[Ce[8]||(Ce[8]=a("div",{class:"text-sm text-amber-800 dark:text-amber-300 font-medium"},"Available Points",-1)),a("div",mZ,[Ce[7]||(Ce[7]=a("span",{class:"i-heroicons-bolt text-amber-500 dark:text-amber-400 mr-1"},null,-1)),oe(" "+_(b(r).formatPoints($e.selectedGenerator))+" points ",1)])]),f.value!=="0%"?(h(),v("div",fZ,[Ce[10]||(Ce[10]=a("div",{class:"text-sm text-amber-800 dark:text-amber-300 font-medium"},"Level Requirement Reduction",-1)),a("div",pZ,[Ce[9]||(Ce[9]=a("span",{class:"i-heroicons-arrow-trending-down text-green-500 dark:text-green-400 mr-1"},null,-1)),oe(" "+_(f.value),1)])])):Q("",!0)]),a("div",hZ,[a("div",gZ,[Ce[11]||(Ce[11]=a("span",null,"Progress to Next Level",-1)),a("span",null,_(b(r).formatProgressPercentage($e.selectedGenerator))+"%",1)]),a("div",vZ,[a("div",{class:"h-full bg-amber-500 dark:bg-amber-600 transition-all duration-300 ease-out",style:yt({width:`${b(r).formatProgressPercentage($e.selectedGenerator)}%`})},null,4)]),a("div",bZ,[a("span",null,"Current: "+_(b(be)(b(r).levelProgress[$e.selectedGenerator]||0,0)),1),a("span",null,"Next: "+_(b(r).formatNextLevelRequirement($e.selectedGenerator))+" "+_(m.value),1)])]),a("div",yZ,[a("div",_Z,_(d.value),1),f.value!=="0%"?(h(),v("div",xZ," Level requirements reduced by "+_(f.value)+" from prestige upgrades. ",1)):Q("",!0)])]),a("div",kZ,[Ce[15]||(Ce[15]=a("h4",{class:"text-base font-bold text-amber-800 dark:text-amber-300 flex items-center"},[a("span",{class:"i-heroicons-adjustments-horizontal text-amber-600 dark:text-amber-500 mr-2"}),oe(" Available Adaptations ")],-1)),a("button",{onClick:R,class:"px-3 py-1.5 bg-amber-600 dark:bg-amber-700 hover:bg-amber-700 dark:hover:bg-amber-800 text-white rounded-lg flex items-center text-sm font-medium transition-colors"},[p.value?(h(),v("span",CZ,Ce[14]||(Ce[14]=[a("span",{class:"i-heroicons-adjustments-horizontal text-base mr-1.5"},null,-1),oe(" Back to Upgrades ")]))):(h(),v("span",wZ,[Ce[12]||(Ce[12]=a("span",{class:"i-heroicons-list-bullet text-base mr-1.5"},null,-1)),Ce[13]||(Ce[13]=oe(" Manage Presets ")),T.value?(h(),v("span",EZ,"Active")):Q("",!0)]))])]),p.value?(h(),v("div",SZ,[g.value||w.value?(h(),v("div",TZ,[a("h3",AZ,_(g.value?"Create New Preset":"Edit Preset"),1),a("div",IZ,[Ce[16]||(Ce[16]=a("label",{for:"presetName",class:"block text-sm font-medium text-amber-700 dark:text-amber-400 mb-1"}," Preset Name ",-1)),Ut(a("input",{type:"text",id:"presetName","onUpdate:modelValue":Ce[0]||(Ce[0]=X=>C.value=X),class:"w-full px-3 py-2 rounded-md border border-amber-200 dark:border-amber-700 bg-amber-50 dark:bg-gray-700 text-amber-900 dark:text-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500"},null,512),[[xa,C.value]])]),a("div",PZ,[Ce[24]||(Ce[24]=a("h4",{class:"text-sm font-medium text-amber-700 dark:text-amber-400 mb-2"}," Configure your upgrade path ",-1)),a("div",MZ,[Ce[19]||(Ce[19]=a("div",{class:"text-xs font-medium text-amber-600 dark:text-amber-500 mb-1"}," Available Upgrades (use controls to set quantity): ",-1)),a("div",$Z,[(h(!0),v(De,null,Ge(ze.value,X=>(h(),v("div",{key:X.id,class:"bg-white dark:bg-gray-800 p-3 rounded text-left border border-amber-100 dark:border-amber-600 transition-colors"},[a("div",RZ,[a("span",{class:K(["text-amber-600 dark:text-amber-500 mr-2",X.icon])},null,2),a("span",LZ,_(X.name),1),a("span",DZ,_(X.occurrences)+"/"+_(X.maxLevel===null?"":X.maxLevel),1)]),a("div",NZ,[a("div",OZ,[a("button",{onClick:H=>re(X.id),disabled:X.occurrences<=0,class:K(["w-8 h-8 flex items-center justify-center rounded-md bg-amber-50 dark:bg-gray-700 border border-amber-200 dark:border-amber-700",X.occurrences<=0?"opacity-50 cursor-not-allowed":"hover:bg-amber-100 dark:hover:bg-gray-600"])},Ce[17]||(Ce[17]=[a("span",{class:"i-heroicons-minus text-base text-amber-700 dark:text-amber-400"},null,-1)]),10,FZ),a("div",UZ,_(X.occurrences),1),a("button",{onClick:H=>Z(X.id),disabled:!X.canAdd,class:K(["w-8 h-8 flex items-center justify-center rounded-md bg-amber-50 dark:bg-gray-700 border border-amber-200 dark:border-amber-700",X.canAdd?"hover:bg-amber-100 dark:hover:bg-gray-600":"opacity-50 cursor-not-allowed"])},Ce[18]||(Ce[18]=[a("span",{class:"i-heroicons-plus text-base text-amber-700 dark:text-amber-400"},null,-1)]),10,qZ)]),a("div",BZ,[a("button",{onClick:H=>J(X.id),disabled:X.occurrences<=0,class:K(["px-2 py-1 text-xs rounded-md bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400",X.occurrences<=0?"opacity-50 cursor-not-allowed":"hover:bg-red-100 dark:hover:bg-red-900/40"])}," Clear ",10,VZ),a("button",{onClick:H=>le(X.id,X.maxLevel),disabled:!X.canAdd,class:K(["px-2 py-1 text-xs rounded-md bg-amber-500 dark:bg-amber-600 text-white",X.canAdd?"hover:bg-amber-600 dark:hover:bg-amber-700":"opacity-50 cursor-not-allowed"])}," Max ",10,HZ)])])]))),128))])]),k.value.length>0?(h(),v("div",GZ,[a("div",jZ,[Ce[20]||(Ce[20]=a("div",{class:"text-xs text-amber-600 dark:text-amber-500"}," Purchase sequence (upgrades will be purchased in this order): ",-1)),a("div",WZ,_(k.value.length)+" upgrade"+_(k.value.length===1?"":"s")+" selected ",1)]),a("div",zZ,[(h(!0),v(De,null,Ge(k.value,(X,H)=>{var W,ge;return h(),v("div",{key:`${X}-${H}`,class:"bg-white dark:bg-gray-800 p-2 rounded mb-2 last:mb-0 border border-amber-100 dark:border-amber-600 flex justify-between items-center",draggable:"true",onDragstart:Te=>pe(X,H),onDragover:Ce[1]||(Ce[1]=xt(()=>{},["prevent"])),onDrop:Te=>_e(X,H)},[a("div",KZ,[a("span",{class:K(["text-amber-600 dark:text-amber-500 mr-2",(W=b(r).getUpgrade(X))==null?void 0:W.icon])},null,2),a("span",null,_((ge=b(r).getUpgrade(X))==null?void 0:ge.name),1),a("span",YZ," Level "+_(se(X,H))+"/"+_(ce(X)),1)]),a("div",XZ,[a("button",{onClick:Te=>Ee(H),disabled:H===0,class:K(["p-1.5 rounded-md text-amber-600 dark:text-amber-400",H===0?"opacity-30 cursor-not-allowed":"hover:bg-amber-100 dark:hover:bg-amber-900/40"])},Ce[21]||(Ce[21]=[a("span",{class:"i-heroicons-arrow-up text-base"},null,-1)]),10,JZ),a("button",{onClick:Te=>Ue(H),disabled:H===k.value.length-1,class:K(["p-1.5 rounded-md text-amber-600 dark:text-amber-400",H===k.value.length-1?"opacity-30 cursor-not-allowed":"hover:bg-amber-100 dark:hover:bg-amber-900/40"])},Ce[22]||(Ce[22]=[a("span",{class:"i-heroicons-arrow-down text-base"},null,-1)]),10,ZZ)]),a("button",{onClick:Te=>me(X,H),class:"text-red-500 hover:text-red-600 dark:hover:text-red-400 p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20"},Ce[23]||(Ce[23]=[a("span",{class:"i-heroicons-trash text-base"},null,-1)]),8,eee)],40,QZ)}),128))])])):Q("",!0)]),a("div",tee,[a("button",{onClick:U,class:"px-3 py-1.5 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition-colors"}," Cancel "),a("button",{onClick:Ce[2]||(Ce[2]=X=>g.value?I():D()),disabled:!C.value.trim(),class:K(["px-3 py-1.5 rounded-md transition-colors",C.value.trim()?"bg-amber-600 dark:bg-amber-700 hover:bg-amber-700 dark:hover:bg-amber-800 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},_(g.value?"Create Preset":"Update Preset"),11,see)])])):(h(),v("div",nee,[a("button",{onClick:L,class:"w-full bg-amber-100 dark:bg-amber-900/30 border border-dashed border-amber-300 dark:border-amber-700 rounded-lg p-3 text-amber-700 dark:text-amber-300 flex items-center justify-center hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors"},Ce[25]||(Ce[25]=[a("span",{class:"i-heroicons-plus-circle text-base mr-1.5"},null,-1),oe(" Create New Preset ")])),S.value.length>0?(h(),v("div",ree,[(h(!0),v(De,null,Ge(S.value,X=>(h(),v("div",{key:X.id,class:K(["bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700 p-3",{"ring-2 ring-green-500 dark:ring-green-600":X.isActive}])},[a("div",oee,[a("div",iee,[X.isActive?(h(),v("span",aee)):Q("",!0),a("h3",lee,_(X.name),1)]),a("div",cee,[a("button",{onClick:H=>P(X),class:"text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 p-1.5 rounded-full hover:bg-amber-50 dark:hover:bg-amber-900/20"},Ce[26]||(Ce[26]=[a("span",{class:"i-heroicons-pencil-square text-base"},null,-1)]),8,uee),a("button",{onClick:H=>M(X.id),class:"text-red-500 hover:text-red-600 dark:hover:text-red-400 p-1.5 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20"},Ce[27]||(Ce[27]=[a("span",{class:"i-heroicons-trash text-base"},null,-1)]),8,dee)])]),a("div",mee,[a("div",fee," Upgrades ("+_(X.upgradeIds.length)+"): ",1),a("div",pee,[X.upgradeIds.length===0?(h(),v("span",hee,"No upgrades selected")):(h(),v("span",gee,_(X.upgradeIds.map(H=>{var W;return(W=b(r).getUpgrade(H))==null?void 0:W.name}).join("  ")),1))])]),a("div",vee,[X.isActive?(h(),v("button",{key:1,onClick:Ce[3]||(Ce[3]=H=>x("none")),class:"w-full px-3 py-1.5 bg-amber-600 dark:bg-amber-700 hover:bg-amber-700 dark:hover:bg-amber-800 text-white rounded-md transition-colors text-sm flex items-center justify-center"},Ce[29]||(Ce[29]=[a("span",{class:"i-heroicons-pause text-base mr-1.5"},null,-1),oe(" Deactivate ")]))):(h(),v("button",{key:0,onClick:H=>x(X.id),class:"w-full px-3 py-1.5 bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-800 text-white rounded-md transition-colors text-sm flex items-center justify-center"},Ce[28]||(Ce[28]=[a("span",{class:"i-heroicons-play text-base mr-1.5"},null,-1),oe(" Activate Preset ")]),8,bee))])],2))),128))])):(h(),v("div",yee,Ce[30]||(Ce[30]=[a("div",{class:"i-heroicons-clipboard-document-list text-4xl mx-auto mb-2 opacity-50"},null,-1),a("p",null,"No presets created yet. Create your first preset to define a custom upgrade path.",-1)])))]))])):Q("",!0),p.value?Q("",!0):(h(),v("div",_ee,[(h(!0),v(De,null,Ge(c.value,X=>(h(),Tt(sZ,{key:X.id,upgradeId:X.id},null,8,["upgradeId"]))),128))]))]),a("footer",{class:"bg-gradient-to-r from-amber-800 to-amber-700 dark:from-amber-900 dark:to-amber-800 text-amber-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]"},[a("div",{class:"flex justify-end p-3"},[a("button",{onClick:u,class:"px-3 py-2 bg-amber-900/20 dark:bg-amber-950/40 hover:bg-amber-900/30 dark:hover:bg-amber-950/50 rounded-lg text-amber-50 font-medium transition-colors duration-200 flex items-center justify-center active:scale-95 border border-amber-600 dark:border-amber-700"},Ce[31]||(Ce[31]=[a("span",{class:"i-heroicons-arrow-left text-base mr-1"},null,-1),oe(" Return to Dashboard ")]))])])],2)],2)):Q("",!0)])):Q("",!0)}}}),kee=Ct(xee,[["__scopeId","data-v-ddf0b1d3"]]),wee={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-gray-300 dark:border-gray-700 transition-all duration-200 opacity-75 relative"},Eee={class:"absolute inset-0 bg-gray-100/85 dark:bg-gray-900/85 flex items-center justify-center z-10"},Cee={class:"text-center p-3"},See={class:"text-sm font-bold text-gray-700 dark:text-gray-300"},Tee={class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},Aee={class:"mt-2 w-full"},Iee={class:"text-xs text-gray-700 dark:text-gray-300 flex justify-between"},Pee={class:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full mt-1 overflow-hidden"},Mee={class:"flex flex-col"},$ee={class:"bg-gradient-to-r from-gray-500 to-gray-400 py-1.5 px-2 flex items-center justify-between text-white"},Ree={class:"flex items-center"},Lee={class:"font-bold text-sm"},Dee={class:"p-2 text-gray-700"},Nee={class:"flex mb-1.5"},Oee={class:"flex-grow pr-2"},Fee={class:"text-xs mb-1"},Uee={class:"text-xs text-gray-600"},qee={class:"flex justify-between"},Bee=Je({__name:"NextUnlockableGenerator",props:{generator:{}},setup(t){const e=t,s=q(()=>{if(!e.generator)return"";switch(e.generator.tier){case 1:return"food";case 2:return"worker ants";case 3:return"nurseries";case 4:return"queen chambers";default:return"colonies"}}),n=q(()=>10),r=Ht(),o=q(()=>{if(!e.generator)return;const c=e.generator.tier-1;return r.unlockedGenerators.find(u=>u.tier===c)}),i=q(()=>{if(!o.value||!e.generator)return 0;const c=o.value.count.toNumber();return Math.min(100,Math.round(c/n.value*100))});return(c,u)=>{var d;return c.generator?(h(),v("div",wee,[a("div",Eee,[a("div",Cee,[u[1]||(u[1]=a("span",{class:"i-heroicons-lock-closed text-2xl text-gray-500 dark:text-gray-400 mb-2 inline-block"},null,-1)),a("h4",See,"Unlock "+_(c.generator.name),1),a("p",Tee," Requires "+_(n.value)+" "+_(((d=o.value)==null?void 0:d.name)||"previous tier"),1),a("div",Aee,[a("div",Iee,[u[0]||(u[0]=a("span",null,"Progress:",-1)),a("span",null,_(i.value)+"%",1)]),a("div",Pee,[a("div",{class:"h-full bg-amber-500 transition-all duration-300 ease-out",style:yt({width:`${i.value}%`})},null,4)])])])]),a("div",Mee,[a("div",$ee,[a("div",Ree,[a("span",{class:K([c.generator.icon,"text-xl mr-1.5 text-gray-300"])},null,2),a("h3",Lee,_(c.generator.name),1)]),u[2]||(u[2]=a("div",{class:"text-xs font-medium bg-gray-600/30 px-1.5 py-0.5 rounded"}," 0 ",-1))]),a("div",Dee,[a("div",Nee,[a("div",Oee,[a("p",Fee,_(c.generator.description),1),a("div",Uee,[a("div",qee,[u[3]||(u[3]=a("span",null,"Base Production:",-1)),a("span",null,_(b(r).getBaseProduction(c.generator.id).toString())+" "+_(s.value)+"/trip",1)])])])]),u[4]||(u[4]=a("button",{disabled:"",class:"w-full py-1.5 px-3 rounded text-xs font-medium bg-gray-200 text-gray-500 cursor-not-allowed"},[a("span",{class:"i-heroicons-lock-closed text-sm mr-1"}),oe(" Locked ")],-1))])])])):Q("",!0)}}}),Mk="/assets/alateHatchery-BJC_1gpf.png",$k="/assets/antopolis-YGbSc9go.png",Rk="/assets/colony-BfbQRuWE.png",Lk="/assets/hivemind-D3XdIbo3.png",Dk="/assets/megacolony-s3ANOJ32.png",Nk="/assets/nursery-CPCbpZrN.png",Ok="/assets/queenChamber-JbZit7nF.png",Fk="/assets/worker-Dgp3tcyb.png",Vee={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] flex flex-col mx-auto border border-amber-200 dark:border-amber-700"},Hee={class:"text-base font-bold mb-3 flex items-center text-amber-800 dark:text-amber-300 p-5 pb-2 border-b border-amber-200 dark:border-amber-700"},Gee={class:"overflow-y-auto px-5 flex-grow"},jee={class:"space-y-2 mb-4"},Wee={class:"text-amber-700 dark:text-amber-400"},zee={class:"font-medium text-amber-900 dark:text-amber-200"},Qee={key:0,class:"text-green-600 dark:text-green-400"},Kee={key:1,class:"text-yellow-600 dark:text-yellow-400"},Yee={key:0,class:"mt-6 mb-4"},Xee={class:"border-t border-amber-200 dark:border-amber-700 pt-4 mb-3"},Jee={class:"flex items-center"},Zee={class:"font-medium text-green-900 dark:text-green-200 mr-2"},ete={key:0,class:"pl-2 space-y-2 mb-4 animate-fadeIn"},tte={class:"text-green-700 dark:text-green-400 text-sm"},ste={class:"font-medium text-green-900 dark:text-green-200 text-sm"},nte={class:"border-t-2 border-amber-200 dark:border-amber-700 pt-3 flex flex-col font-bold text-amber-900 dark:text-amber-200 px-5"},rte={class:"flex justify-between items-center mb-2 text-sm"},ote={class:"bg-amber-100 dark:bg-amber-800/50 px-2 py-0.5 rounded"},ite={class:"flex justify-between items-center mb-2 text-sm"},ate={class:"bg-yellow-100 dark:bg-yellow-900/30 px-2 py-0.5 rounded text-yellow-800 dark:text-yellow-300"},lte={key:0,class:"flex justify-between items-center mb-2 text-sm"},cte={class:"bg-green-100 dark:bg-green-900/30 px-2 py-0.5 rounded text-green-800 dark:text-green-300"},ute={class:"flex justify-between items-center mt-1"},dte={class:"bg-amber-200 dark:bg-amber-700 px-3 py-1 rounded-lg"},mte={class:"text-2xs text-amber-500 dark:text-amber-500 text-center mt-1"},fte={key:1,class:"flex flex-col mt-3 border-t border-amber-100 dark:border-amber-800 pt-2"},pte={class:"flex justify-between items-center"},hte={class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded"},gte={class:"text-2xs text-amber-500 dark:text-amber-500 mb-2 text-center"},vte={class:"flex justify-between items-center"},bte={class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded"},yte={class:"flex justify-between items-center"},_te={class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded"},xte={class:"flex justify-between items-center mt-1"},kte={class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded"},wte={class:"text-2xs text-amber-500 dark:text-amber-500 mb-2 text-center"},Ete={class:"flex justify-between items-center font-medium"},Cte={class:"text-xs bg-amber-200 dark:bg-amber-800 px-2 py-0.5 rounded"},Ste={class:"mt-4 flex justify-end px-5 pb-5"},Tte=Je({__name:"MultiplierBreakdownModal",props:{show:{type:Boolean},generatorId:{},generatorName:{}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,{handleClose:r,preventBackgroundTouchMove:o}=Gr(),i=Y(!1),c=()=>{r(()=>n("close"),0)},u=re=>{re.key==="Escape"&&s.show&&c()};Et(()=>{window.addEventListener("keydown",u)}),xn(()=>{window.removeEventListener("keydown",u)}),dt(()=>s.show,re=>{re&&me()},{immediate:!1});const{getEnhancedMultiplierBreakdown:d,getFormattedTotalMultiplier:m,getAchievementMultiplier:f,getAchievementMultiplierBreakdown:p,formatMultiplierValue:g,getTotalMultiplier:w,getProductionMultiplier:C}=Pi(),E=q(()=>d(s.generatorId,!0)),k=q(()=>C(s.generatorId,!0)),A=q(()=>f(s.generatorId)),S=q(()=>{const re=E.value.filter(le=>le.additive);let J=new Se(1);return re.forEach(le=>{J=J.add(le.value.sub(1))}),J});q(()=>E.value.filter(re=>!re.additive));const T=q(()=>k.value),R=q(()=>w(s.generatorId)),L=q(()=>S.value.mul(T.value).mul(f(s.generatorId))),P=q(()=>g(R.value)),I=q(()=>g(L.value)),D=q(()=>g(T.value)),U=q(()=>g(S.value)),M=q(()=>p(s.generatorId)),x=q(()=>M.value.length>0),$=q(()=>{const re=f(s.generatorId);return Pi().formatMultiplierValue(re)}),Z=()=>{i.value=!i.value},me=()=>{Qe(`=== Multiplier Breakdown for ${s.generatorName} (${s.generatorId}) ===`),Qe(`Additive Subtotal: ${S.value}`),Qe(`Store Multiplier (no achievements): ${k.value}`),Qe(`Achievement Multiplier: ${A.value}`),L.value;const re=k.value.mul(A.value);R.value,Qe(),Qe(`Direct Calculation: ${re} (${k.value}  ${A.value})`),Qe(),Qe(),E.value.forEach(J=>{Qe(`- ${J.name}: ${J.value} (Additive: ${J.additive?"Yes":"No"})`)}),x.value&&(Qe(),M.value.forEach(J=>{Qe(`- ${J.name}: ${J.value}`)}))};return(re,J)=>re.show?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm modal-backdrop","data-modal-backdrop":"true",onClick:xt(c,["self"]),onTouchmove:J[0]||(J[0]=xt((...le)=>b(o)&&b(o)(...le),["self"]))},[a("div",Vee,[a("h3",Hee,[J[1]||(J[1]=a("span",{class:"i-heroicons-chart-bar text-amber-600 dark:text-amber-400 mr-2"},null,-1)),oe(" "+_(re.generatorName)+" Multiplier Breakdown ",1)]),a("div",Gee,[J[4]||(J[4]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 mb-3 bg-amber-50/70 dark:bg-amber-900/20 p-2 rounded-lg"},[a("p",{class:"mb-1"},[a("strong",null,"How the total is calculated:")]),a("p",null,"1. Start with base value of 1"),a("p",null,[oe("2. Add all "),a("span",{class:"text-green-600 dark:text-green-400"},"+"),oe(" bonuses to the base")]),a("p",null,[oe("3. Multiply the result by all "),a("span",{class:"text-yellow-600 dark:text-yellow-400"},""),oe(" bonuses")])],-1)),a("div",jee,[(h(!0),v(De,null,Ge(E.value,(le,se)=>(h(),v("div",{key:se,class:"flex justify-between items-center py-2 px-3 rounded-lg bg-amber-50 dark:bg-amber-900/30"},[a("span",Wee,_(le.name),1),a("span",zee,[le.additive?(h(),v("span",Qee,"+")):(h(),v("span",Kee,"")),oe(" "+_(le.formatted),1)])]))),128))]),x.value?(h(),v("div",Yee,[a("div",Xee,[a("button",{onClick:Z,class:"flex justify-between items-center w-full py-2 px-3 rounded-lg bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors"},[J[2]||(J[2]=a("span",{class:"text-green-700 dark:text-green-400 flex items-center"},[a("span",{class:"i-heroicons-trophy mr-2"}),oe(" Achievement Bonuses ")],-1)),a("div",Jee,[a("span",Zee,_($.value),1),a("span",{class:K([{"i-heroicons-chevron-down":!i.value,"i-heroicons-chevron-up":i.value},"text-green-600 dark:text-green-400"])},null,2)])])]),i.value?(h(),v("div",ete,[(h(!0),v(De,null,Ge(M.value,(le,se)=>(h(),v("div",{key:se,class:"flex justify-between items-center py-2 px-3 rounded-lg bg-green-50/50 dark:bg-green-900/20"},[a("span",tte,_(le.name),1),a("span",ste,[J[3]||(J[3]=a("span",{class:"text-yellow-600 dark:text-yellow-400"},"",-1)),oe(" "+_(le.formatted),1)])]))),128))])):Q("",!0)])):Q("",!0)]),a("div",nte,[a("div",rte,[J[5]||(J[5]=a("span",{class:"font-medium"},"Additive Subtotal:",-1)),a("span",ote,_(U.value),1)]),a("div",ite,[J[6]||(J[6]=a("span",{class:"font-medium flex items-center"},[a("span",{class:"text-yellow-600 dark:text-yellow-400"},""),oe(" Base Multiplier (non-achievements): ")],-1)),a("span",ate,_(D.value),1)]),x.value?(h(),v("div",lte,[J[7]||(J[7]=a("span",{class:"font-medium flex items-center"},[a("span",{class:"text-yellow-600 dark:text-yellow-400"},""),oe(" Achievement Bonuses: ")],-1)),a("span",cte,_($.value),1)])):Q("",!0),a("div",ute,[J[8]||(J[8]=a("span",null,"Total Multiplier:",-1)),a("span",dte,_(P.value),1)]),a("div",mte," ("+_(b(g)(k.value))+"  "+_($.value)+" = "+_(P.value)+") ",1),b(Co)()?(h(),v("div",fte,[J[14]||(J[14]=a("h4",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1"},"Debug Information:",-1)),a("div",pte,[J[9]||(J[9]=a("span",{class:"text-xs text-amber-600 dark:text-amber-400"},"Corrected calc (Store  Achv):",-1)),a("span",hte,_(b(g)(k.value.mul(A.value))),1)]),a("div",gte," ("+_(b(g)(k.value))+"  "+_($.value)+" = "+_(b(g)(k.value.mul(A.value)))+") ",1),a("div",vte,[J[10]||(J[10]=a("span",{class:"text-xs text-amber-600 dark:text-amber-400"},"Breakdown sources total:",-1)),a("span",bte,_(I.value),1)]),J[15]||(J[15]=a("div",{class:"text-2xs text-amber-500 dark:text-amber-500 mb-2 text-center"},[a("span",{class:"text-amber-400 dark:text-amber-300"},"(Note: This doesn't match because of multiplier categorization issues)")],-1)),a("div",yte,[J[11]||(J[11]=a("span",{class:"text-xs text-amber-600 dark:text-amber-400"},"Store multiplier only:",-1)),a("span",_te,_(b(g)(k.value)),1)]),a("div",xte,[J[12]||(J[12]=a("span",{class:"text-xs text-amber-600 dark:text-amber-400"},"Direct store  achievement:",-1)),a("span",kte,_(b(g)(k.value.mul(A.value))),1)]),a("div",wte," ("+_(b(g)(k.value))+"  "+_($.value)+" = "+_(b(g)(k.value.mul(A.value)))+") ",1),a("div",Ete,[J[13]||(J[13]=a("span",{class:"text-xs text-amber-700 dark:text-amber-300"},"getTotalMultiplier result:",-1)),a("span",Cte,_(P.value),1)])])):Q("",!0)]),a("div",Ste,[b(Co)()?(h(),v("button",{key:0,onClick:me,class:"py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors mr-2"}," Debug ")):Q("",!0),a("button",{onClick:c,class:"py-2 px-4 bg-amber-600 hover:bg-amber-700 dark:bg-amber-700 dark:hover:bg-amber-800 rounded-lg text-white text-sm font-medium transition-colors"}," Close ")])])],32)):Q("",!0)}}),Ate=Ct(Tte,[["__scopeId","data-v-66b01dd8"]]),Ite={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-amber-200 dark:border-amber-700 transition-all duration-200"},Pte={class:"flex flex-col h-full"},Mte={class:"bg-gradient-to-r from-amber-600 to-amber-500 dark:from-amber-700 dark:to-amber-600 py-1.5 px-2.5 flex items-center justify-between text-white"},$te={class:"flex items-center"},Rte={class:"font-bold text-xs md:text-sm"},Lte={class:"text-xs font-medium bg-amber-700/30 dark:bg-amber-800/40 px-1.5 py-0.5 rounded"},Dte={class:"relative px-2.5 pt-2 pb-1 text-amber-900 dark:text-amber-100 flex-grow text-xs overflow-hidden"},Nte=["src"],Ote={class:"relative z-10"},Fte={class:"mb-1.5"},Ute={class:"grid grid-cols-2 gap-x-2 gap-y-0 mb-2 -mx-1"},qte={class:"text-right font-semibold text-amber-800 dark:text-amber-200 px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},Bte={class:"text-right text-amber-600 dark:text-amber-500 px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},Vte={key:0},Hte={key:1},Gte={class:"text-right text-amber-700 dark:text-amber-400 px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},jte={class:"text-right text-amber-700 dark:text-amber-400 px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},Wte={class:"text-right text-amber-700 dark:text-amber-400 px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},zte={key:0,class:"border-t border-amber-200 dark:border-amber-700 pt-1.5 mb-2"},Qte={class:"flex justify-between items-center mb-1"},Kte={class:"text-xs bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 px-1.5 py-0.5 rounded-full"},Yte={class:"h-1.5 bg-amber-100 dark:bg-amber-900/50 rounded-full overflow-hidden"},Xte={class:"flex justify-between mt-0.5 text-2xs text-amber-700 dark:text-amber-400"},Jte={key:1,class:"flex justify-between items-center mb-2 border-t border-amber-200 dark:border-amber-700 pt-1.5"},Zte={key:2,class:"flex flex-col mb-2 border-t border-amber-200 dark:border-amber-700 pt-1.5"},ese={class:"flex justify-between items-center"},tse={class:"font-medium text-amber-800 dark:text-amber-300 flex items-center group relative"},sse={key:0,class:"ml-1 px-1.5 py-0.5 text-2xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-300 rounded"},nse={key:0,class:"text-2xs text-right mt-1"},rse={key:0,class:"text-purple-600 dark:text-purple-400"},ose={key:1,class:"text-green-600 dark:text-green-400"},ise={key:2,class:"text-amber-600 dark:text-amber-500"},ase={key:1,class:"text-2xs text-amber-600 dark:text-amber-400 mt-1 text-right"},lse={class:"px-2.5 py-2 mt-auto border-t border-amber-100 dark:border-amber-800"},cse={key:0,class:"text-xs text-red-600 dark:text-red-400 mb-1 flex items-center"},use=Je({__name:"GeneratorItem",props:{generator:{}},emits:["upgrade"],setup(t,{emit:e}){const s=t,n=Ht(),r=St(),o=Wt();sn();const i=Cr(),c=tn(),{hasAvailableUpgrades:u}=lL(),d=Y(!1),{getTotalMultiplier:m,getFormattedTotalMultiplier:f,getEnhancedMultiplierBreakdown:p}=Pi(),g=q(()=>n.getGeneratorCost(s.generator.id)),w=q(()=>be(g.value,2)),C=q(()=>n.food.gte(g.value)),E=q(()=>be(s.generator.count.add(s.generator.selfReplicated),0)),k=q(()=>be(s.generator.manualPurchases,0)),A=q(()=>s.generator.count.sub(s.generator.manualPurchases)),S=q(()=>be(A.value,0)),T=q(()=>be(n.getBaseProduction(s.generator.id),1));q(()=>m(s.generator.id));const R=q(()=>f(s.generator.id)),L=q(()=>n.getActualProduction(s.generator.id)),P=q(()=>be(L.value,1)),I=q(()=>s.generator.selfReplicated),D=q(()=>be(I.value,0)),U=q(()=>{const X=`${s.generator.id}Reproduction`;return r.getUpgradeMultiplier(X).gt(0)}),M={worker:"autoWorker",nursery:"autoNursery",queenChamber:"autoQueenChamber",colony:"autoColony",megacolony:"autoMegacolony",hivemind:"autoHivemind",antopolis:"autoAntopolis"},x=q(()=>{const X=M[s.generator.id];return X?r.getUpgradeMultiplier(X).gt(0):!1}),$=q(()=>{const X=`autoUpgrade${s.generator.id.charAt(0).toUpperCase()+s.generator.id.slice(1)}`;return r.getUpgradeMultiplier(X).gt(0)}),Z=q(()=>!s.generator.autoUpgradeEnabled||!$.value?!1:u(s.generator.id)),me=q(()=>c.getActivePresetForGenerator(s.generator.id)),re=q(()=>n.autoUpgradeCounter),J=q(()=>n.AUTO_UPGRADE_FREQUENCY),le=q(()=>Math.max(0,J.value-re.value)),se=()=>{n.toggleAutoPurchase(s.generator.id)},z=()=>{n.toggleAutoUpgrade(s.generator.id)},ce=()=>{C.value&&!pe.value&&n.buyGenerator(s.generator.id)},pe=q(()=>{if(s.generator.id==="hivemind"){const X=n.getGenerator("megacolony");return!X||X.count.eq(0)}else if(s.generator.id==="antopolis"){const X=n.getGenerator("hivemind");return!X||X.count.eq(0)}return!1}),_e=q(()=>s.generator.id==="hivemind"?"Requires at least one Mega Colony":s.generator.id==="antopolis"?"Requires at least one Hive Mind":""),Ee=q(()=>{switch(s.generator.tier){case 1:return"food";case 2:return"worker ants";case 3:return"nurseries";case 4:return"queen chambers";case 5:return"colonies";case 6:return"mega colonies";case 7:return"hive minds";default:return"resources"}}),Ue=q(()=>C.value&&!pe.value?"w-full py-1.5 px-2.5 rounded text-xs font-medium bg-amber-600 hover:bg-amber-700 dark:bg-amber-700 dark:hover:bg-amber-800 text-white":"w-full py-1.5 px-2.5 rounded text-xs font-medium bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"),ze=q(()=>i.isFeatureUnlocked.upgrades),Re=q(()=>{var X;return((X=c.generatorLevels[s.generator.id])==null?void 0:X.toNumber())||0}),$e=q(()=>c.formatProgressPercentage(s.generator.id)),Ce=q(()=>c.formatPoints(s.generator.id));Y(!1);const Oe=()=>{ve("upgrade",s.generator.id)},ve=e,fe=X=>{try{return new URL(Object.assign({"../assets/generators/alateHatchery.png":Mk,"../assets/generators/antopolis.png":$k,"../assets/generators/colony.png":Rk,"../assets/generators/hivemind.png":Lk,"../assets/generators/megacolony.png":Dk,"../assets/generators/nursery.png":Nk,"../assets/generators/queenChamber.png":Ok,"../assets/generators/worker.png":Fk})[`../assets/generators/${X}.png`],import.meta.url).href}catch(H){return console.error(`Error loading image for generator ${X}:`,H),""}};return(X,H)=>(h(),v(De,null,[a("div",Ite,[a("div",Pte,[a("div",Mte,[a("div",$te,[a("h3",Rte,_(X.generator.name),1)]),a("div",Lte,_(E.value),1)]),a("div",Dte,[a("img",{src:fe(X.generator.id),alt:"",class:"absolute inset-0 m-auto h-full object-contain opacity-5 dark:opacity-[0.2] pointer-events-none z-0",onError:H[0]||(H[0]=W=>W.target.style.display="none")},null,40,Nte),a("div",Ote,[a("p",Fte,_(X.generator.description),1),a("div",Ute,[H[5]||(H[5]=a("div",{class:"font-semibold text-amber-800 dark:text-amber-200 flex items-center px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[a("span",{class:"i-heroicons-currency-dollar mr-1"}),oe(" Production: ")],-1)),a("div",qte,_(P.value)+" "+_(Ee.value)+"/trip",1),H[6]||(H[6]=a("div",{class:"font-medium text-amber-600 dark:text-amber-500 flex items-center px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[a("span",{class:"i-heroicons-calculator mr-1"}),oe(" Base  Multiplier: ")],-1)),a("div",Bte,[oe(_(T.value)+"  ",1),R.value.length>0?(h(),v("span",Vte,[a("span",{class:"cursor-pointer inline-flex items-center",onClick:H[1]||(H[1]=W=>d.value=!0)},[oe(_(R.value)+" ",1),H[3]||(H[3]=a("span",{class:"i-heroicons-information-circle text-xs ml-1 text-amber-500 dark:text-amber-400"},null,-1))])])):(h(),v("span",Hte,_(R.value),1))]),H[7]||(H[7]=a("div",{class:"font-medium text-amber-700 dark:text-amber-400 flex items-center px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[a("span",{class:"i-heroicons-shopping-bag mr-1"}),oe(" Bought: ")],-1)),a("div",Gte,_(k.value),1),H[8]||(H[8]=a("div",{class:"font-medium text-amber-700 dark:text-amber-400 flex items-center px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[a("span",{class:"i-heroicons-sparkles mr-1"}),oe(" Generated: ")],-1)),a("div",jte,_(S.value),1),U.value?(h(),v(De,{key:0},[H[4]||(H[4]=a("div",{class:"font-medium text-amber-700 dark:text-amber-400 flex items-center px-1 py-0.5 rounded hover:bg-amber-50 dark:hover:bg-gray-700/50 transition-colors duration-150"},[a("span",{class:"i-heroicons-document-duplicate mr-1"}),oe(" Self-Replicated: ")],-1)),a("div",Wte,_(D.value),1)],64)):Q("",!0)]),ze.value&&X.generator.count.gt(0)||b(o).ascensionCount>0?(h(),v("div",zte,[a("div",Qte,[H[9]||(H[9]=a("span",{class:"font-medium text-amber-800 dark:text-amber-300 flex items-center"},[a("span",{class:"i-heroicons-star text-amber-600 dark:text-amber-400 mr-1"}),oe(" Specialization: ")],-1)),a("span",Kte," Lvl "+_(Re.value),1)]),a("div",Yte,[a("div",{class:"h-full bg-amber-500 dark:bg-amber-600 transition-all duration-700 ease-out",style:yt({width:`${$e.value}%`})},null,4)]),a("div",Xte,[a("span",null,_(Ce.value)+" points",1),a("span",null,_($e.value)+"%",1)]),a("button",{onClick:Oe,class:"mt-1 w-full text-xs bg-amber-600 dark:bg-amber-700 text-white px-2 py-1 rounded-md flex items-center justify-center hover:bg-amber-700 dark:hover:bg-amber-800 transition-colors"},H[10]||(H[10]=[a("span",{class:"i-heroicons-arrow-up-circle text-xs mr-1"},null,-1),oe(" Upgrade Specialization ")]))])):Q("",!0),x.value?(h(),v("div",Jte,[H[11]||(H[11]=a("span",{class:"font-medium text-amber-800 dark:text-amber-300"},"Auto-purchase:",-1)),a("button",{onClick:se,class:K(["w-8 h-4 rounded-full relative cursor-pointer transition-colors duration-200 ease-in-out",X.generator.autoPurchaseEnabled?"bg-green-500 dark:bg-green-600":"bg-gray-300 dark:bg-gray-600"])},[a("span",{class:K(["absolute top-0.5 left-0.5 w-3 h-3 bg-white dark:bg-gray-200 rounded-full shadow transform transition-transform duration-200 ease-in-out",X.generator.autoPurchaseEnabled?"translate-x-4":"translate-x-0"])},null,2)],2)])):Q("",!0),ze.value&&X.generator.count.gt(0)&&$.value?(h(),v("div",Zte,[a("div",ese,[a("span",tse,[H[12]||(H[12]=oe(" Auto-upgrade: ")),H[13]||(H[13]=a("span",{class:"i-heroicons-information-circle text-xs ml-1 text-amber-500 dark:text-amber-400 cursor-help",title:"Automatically spends specialization points on available upgrades or follows an active preset."},null,-1)),X.generator.autoUpgradeEnabled&&me.value?(h(),v("span",sse," Preset: "+_(me.value.name),1)):Q("",!0)]),a("button",{onClick:z,class:K(["w-8 h-4 rounded-full relative cursor-pointer transition-colors duration-200 ease-in-out",[X.generator.autoUpgradeEnabled?me.value?"bg-purple-500 dark:bg-purple-600":Z.value?"bg-green-500 dark:bg-green-600":"bg-amber-500 dark:bg-amber-600":"bg-gray-300 dark:bg-gray-600"]])},[a("span",{class:K(["absolute top-0.5 left-0.5 w-3 h-3 bg-white dark:bg-gray-200 rounded-full shadow transform transition-transform duration-200 ease-in-out",X.generator.autoUpgradeEnabled?"translate-x-4":"translate-x-0"])},null,2)],2)]),X.generator.autoUpgradeEnabled?(h(),v("div",nse,[me.value?(h(),v("span",rse,"Preset: "+_(me.value.name),1)):Z.value?(h(),v("span",ose,"Actively upgrading...")):(h(),v("span",ise,"Enabled"))])):Q("",!0),X.generator.autoUpgradeEnabled?(h(),v("div",ase," Next check: "+_(le.value)+" / "+_(J.value)+" ticks ",1)):Q("",!0)])):Q("",!0)])]),a("div",lse,[pe.value?(h(),v("div",cse,[H[14]||(H[14]=a("span",{class:"i-heroicons-exclamation-triangle text-xs mr-1"},null,-1)),oe(" "+_(_e.value),1)])):Q("",!0),Ye(Ul,{onAction:ce,disabled:!C.value||pe.value,class:K(Ue.value),"initial-delay":400,"repeat-interval":150,accelerate:!0,"min-interval":30},{default:Rt(()=>[H[15]||(H[15]=a("span",{class:"i-heroicons-shopping-cart text-xs mr-1"},null,-1)),oe(" Buy for "+_(w.value)+" food ",1)]),_:1},8,["disabled","class"])])])]),Ye(Ate,{show:d.value,"generator-id":X.generator.id,"generator-name":X.generator.name,onClose:H[2]||(H[2]=W=>d.value=!1)},null,8,["show","generator-id","generator-name"])],64))}}),dse={class:"text-base font-bold mb-2 flex items-center justify-between"},mse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},fse=Je({__name:"AntHierarchySection",props:{className:{}},emits:["upgrade","showInfo"],setup(t,{emit:e}){const s=e,n=Ht(),r=Cr(),o=q(()=>n.unlockedGenerators),i=q(()=>n.nextUnlockableGenerator),c=m=>{s("upgrade",m)},u=q(()=>r.isFeatureUnlocked.upgrades),d=()=>{s("showInfo")};return(m,f)=>{const p=use,g=Bee;return h(),v("section",{id:"generator-section",class:K(["bg-gradient-to-br from-amber-100 to-amber-50 rounded-xl p-3 shadow-md dark:from-amber-900/30 dark:to-amber-800/30 dark:text-amber-50",m.className])},[a("h2",dse,[f[1]||(f[1]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-cog-6-tooth text-amber-700 mr-2"}),oe(" Ant Hierarchy ")],-1)),b(u)?(h(),v("button",{key:0,onClick:d,class:"w-5 h-5 rounded-full bg-amber-200 hover:bg-amber-300 dark:bg-amber-800 dark:hover:bg-amber-700 flex items-center justify-center text-amber-700 dark:text-amber-300 transition-colors"},f[0]||(f[0]=[a("span",{class:"i-heroicons-question-mark-circle text-base"},null,-1)]))):Q("",!0)]),a("div",mse,[(h(!0),v(De,null,Ge(b(o),w=>(h(),Tt(p,{key:w.id,generator:w,onUpgrade:c},null,8,["generator"]))),128)),b(i)?(h(),Tt(g,{key:0,generator:b(i)},null,8,["generator"])):Q("",!0)])],2)}}}),pse={class:"space-y-4"},hse=Je({__name:"IndexPage",setup(t){Vn(),Ht(),St();const e=Cr();tn();const{isFeatureUnlocked:s}=e,{shouldAnimateFeature:n}=uL(),r=Y(!1),o=Y(!1),i=Y(!1),c=Y(null),u=Y(!1),d=g=>{c.value=g,u.value=!0},m=()=>{u.value=!1},f=Y(!1),p=()=>{f.value=!f.value};return Et(()=>{n("colonyStatus")&&(r.value=!0,setTimeout(()=>{r.value=!1},1500)),n("upgrades")&&(o.value=!0,setTimeout(()=>{o.value=!1},1500)),n("upgrades")&&(i.value=!0,setTimeout(()=>{i.value=!1},1500))}),dt(()=>s.colonyStatus,(g,w)=>{g&&!w&&(r.value=!0,setTimeout(()=>{r.value=!1},1500))}),dt(()=>s.upgrades,(g,w)=>{g&&!w&&(o.value=!0,i.value=!0,setTimeout(()=>{o.value=!1,i.value=!1},1500))}),(g,w)=>(h(),v("div",pse,[Q("",!0),Ye(fse,{onUpgrade:d,onShowInfo:p}),Ye(NJ,{show:f.value,onClose:p},null,8,["show"]),Ye(kee,{show:u.value,"selected-generator":c.value,"generator-info":b($J),onClose:m},null,8,["show","selected-generator","generator-info"]),Ye(Ha,{threshold:400})]))}});function gse(){const t=Y(null),e=Y(!1),s=Y(!1),n=Y(!0),r=()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"))&&(s.value=!0)},o=()=>{const d=navigator.userAgent.toLowerCase(),m=d.indexOf("chrome")>-1&&d.indexOf("edg")===-1,f=d.indexOf("edg")>-1,p=d.indexOf("safari")>-1&&d.indexOf("chrome")===-1,g=d.indexOf("firefox")>-1,w=d.indexOf("arc")>-1,C=d.indexOf("macintosh")>-1;(s.value||w||p&&C||!m&&!f&&!p&&!g)&&(n.value=!1)},i=d=>{d.preventDefault(),t.value=d,e.value=!0},c=()=>{s.value=!0,e.value=!1,t.value=null,console.log("PWA was installed")},u=async()=>{if(!t.value){n.value&&alert('To install this app: tap the share/menu button in your browser and select "Add to Home Screen" or "Install"');return}t.value.prompt(),(await t.value.userChoice).outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),t.value=null,e.value=!1};return Et(()=>{r(),o(),window.addEventListener("beforeinstallprompt",i),window.addEventListener("appinstalled",c)}),ar(()=>{window.removeEventListener("beforeinstallprompt",i),window.removeEventListener("appinstalled",c)}),{isInstallable:e,isInstalled:s,browserSupportsInstall:n,promptInstall:u}}const vse="0.46.0";function dL(){return{version:vse}}function mL(t){let e=t;return e=e.replace(/```([^`]+)```/g,(s,n)=>`<pre class="bg-amber-100 dark:bg-amber-950/40 p-4 rounded-lg overflow-x-auto my-3"><code>${n.trim()}</code></pre>`),e=e.replace(/`([^`]+)`/g,(s,n)=>`<code class="bg-amber-100 dark:bg-amber-950/40 px-1 py-0.5 rounded font-mono text-sm">${n}</code>`),e=e.replace(/^## (.+)$/gm,(s,n)=>`<h2 class="text-xl font-bold mt-6 mb-3 text-amber-800 dark:text-amber-300">${n}</h2>`),e=e.replace(/^### (.+)$/gm,(s,n)=>`<h3 class="text-lg font-bold mt-4 mb-2 text-amber-700 dark:text-amber-400">${n}</h3>`),e=e.replace(/\*\*([^*]+)\*\*/g,(s,n)=>`<strong class="font-bold">${n}</strong>`),e=e.replace(/\*([^*]+)\*/g,(s,n)=>`<em class="italic">${n}</em>`),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(s,n,r)=>`<a href="${r}" class="text-amber-600 dark:text-amber-400 hover:underline" target="_blank" rel="noopener noreferrer">${n}</a>`),e=e.replace(/^\s*-\s+(.+)$/gm,(s,n)=>`<li class="mb-1">${n}</li>`),e=e.replace(/<li class="mb-1">(.+)<\/li>\n<li class="mb-1">/g,`<li class="mb-1">$1</li>
<li class="mb-1">`),e=e.replace(/(<li class="mb-1">.+<\/li>\n)+/g,s=>`<ul class="list-disc pl-6 my-3">${s}</ul>`),e=e.replace(/^([^<\n].+)$/gm,(s,n)=>`<p class="my-2">${n}</p>`),e=e.replace(/## \[(.+)\] - (.+)/g,(s,n,r)=>`<h2 class="text-xl font-bold mt-6 mb-3 text-amber-800 dark:text-amber-300">
      <span class="inline-block bg-amber-200 dark:bg-amber-800/80 text-amber-800 dark:text-amber-200 px-2 py-1 rounded mr-2">${n}</span>
      <span class="text-amber-600 dark:text-amber-400 text-base">${r}</span>
    </h2>`),e}const DT="idle-ant-farm-last-version",NT="idle-ant-farm-announcements-enabled",dd=(t,e)=>{const s=t.split(".").map(Number),n=e.split(".").map(Number);for(let r=0;r<Math.max(s.length,n.length);r++){const o=r<s.length?s[r]:0,i=r<n.length?n[r]:0;if(o>i)return 1;if(o<i)return-1}return 0};function fL(){const{version:t}=dL(),e=Y(!1),s=Y(!0),n=Y({versionRange:"",date:"",content:""}),r=Y(!0),o=()=>localStorage.getItem(DT)||"0.0.0",i=()=>{localStorage.setItem(DT,t)},c=()=>{const C=localStorage.getItem(NT);C!==null&&(s.value=C==="true")},u=()=>{s.value=!s.value,localStorage.setItem(NT,s.value.toString())},d=q(()=>{const C=o();return dd(t,C)>0}),m=(C,E)=>{const k=`## [${E}]`,A=C.indexOf(k);if(A===-1)return null;const S=C.substring(A).match(/## \[[^\]]+\] - ([^\n]+)/);if(!S)return null;const T=S[1],R=C.indexOf(`

`,A)+2,L=C.indexOf("## [",R),P=L!==-1?L:C.length,I=C.substring(R,P).trim();return{version:E,date:T,content:I}},f=C=>{const E=[],k=/## \[([^\]]+)\] - ([^\n]+)/g;let A;for(;(A=k.exec(C))!==null;){const S=A[1];A[2];const T=m(C,S);T&&E.push(T)}return E.sort((S,T)=>dd(T.version,S.version)),E},p=(C,E,k)=>{const A=f(C);if(A.length===0)return null;const S=A.filter(L=>dd(L.version,E)>0&&dd(L.version,k)<=0);if(S.length===0)return null;S.sort((L,P)=>dd(P.version,L.version));let T="";return S.forEach(L=>{T+=`<h2 class="text-xl font-bold mt-6 mb-3 text-amber-800 dark:text-amber-300">
        <span class="inline-block bg-amber-200 dark:bg-amber-800/80 text-amber-800 dark:text-amber-200 px-2 py-1 rounded mr-2">v${L.version}</span>
        <span class="text-amber-600 dark:text-amber-400 text-base">${L.date}</span>
      </h2>
${mL(L.content)}

`}),{versionRange:S.length===1?S[0].version:`${S[S.length-1].version} to ${S[0].version}`,date:S[0].date,content:T}},g=async()=>{try{r.value=!0;const E=await(await fetch("/CHANGELOG.md")).text(),k=o(),A=p(E,k,t);A&&(n.value=A,d.value&&s.value&&(e.value=!0))}catch(C){console.error("Failed to load changelog:",C)}finally{r.value=!1}},w=()=>{e.value=!1,i()};return c(),Et(()=>{g()}),{showAnnouncement:e,updateDetails:n,isLoading:r,hasVersionUpdate:d,closeAnnouncement:w,announcementsEnabled:s,toggleAnnouncementsEnabled:u}}const bse=Es("darkMode",()=>{const t=Y(!1);function e(){const o=localStorage.getItem("darkMode");o==="true"?t.value=!0:o==="false"?t.value=!1:t.value=window.matchMedia("(prefers-color-scheme: dark)").matches,r(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{localStorage.getItem("darkMode")===null&&n(i.matches)})}function s(){t.value=!t.value,r()}function n(o){t.value=o,r()}function r(){t.value?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))}return{isDarkMode:t,initialize:e,toggleDarkMode:s,setDarkMode:n}});function Af(){const t=bse();return Et(()=>{t.initialize()}),{isDarkMode:t.isDarkMode,toggleDarkMode:t.toggleDarkMode,setDarkMode:t.setDarkMode}}const yse={class:"flex items-center justify-between"},_se={class:"relative inline-flex items-center cursor-pointer"},xse=Je({__name:"DarkModeToggle",setup(t){const{isDarkMode:e,toggleDarkMode:s}=Af();return(n,r)=>(h(),v("div",yse,[r[3]||(r[3]=a("div",null,[a("div",{class:"text-sm font-medium"},"Dark Mode"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Toggle between light and dark theme")],-1)),a("label",_se,[Ut(a("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>ws(e)?e.value=o:null),type:"checkbox",class:"sr-only peer",onChange:r[1]||(r[1]=(...o)=>b(s)&&b(s)(...o))},null,544),[[ln,b(e)]]),r[2]||(r[2]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]))}}),kse="0.46.0",pL="/assets/background-BSJaSWun.png",wse={class:"w-full max-w-lg px-5 py-10 mx-auto my-4 bg-blue-950/80 rounded-xl shadow-lg overflow-hidden"},Ese={class:"px-4 pb-4 space-y-4"},Cse={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Sse={class:"flex justify-between items-center mb-2"},Tse={key:0,class:"text-xs bg-green-600 text-white px-2 py-0.5 rounded-full"},Ase={class:"text-xs space-y-1 text-gray-300"},Ise={key:0},Pse={key:1},Mse={key:2},$se={class:"flex justify-between items-center mb-2"},Rse={key:0,class:"text-xs bg-green-600 text-white px-2 py-0.5 rounded-full"},Lse={class:"text-xs space-y-1 text-gray-300"},Dse={key:0},Nse={key:1},Ose={key:2},Fse={class:"text-xs text-gray-400 text-center pt-2"},Use={class:"pt-4 flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-4"},qse=["disabled"],Bse={key:0,class:"i-heroicons-arrow-path animate-spin mr-1"},Vse=["disabled"],Hse={key:0,class:"i-heroicons-arrow-path animate-spin mr-1"},Gse=Je({__name:"SaveConflictModal",props:{show:{type:Boolean},localSaveTime:{},cloudSaveTime:{},localFoodAmount:{},cloudFoodAmount:{},localAntCount:{},cloudAntCount:{},localEvolutionStage:{},cloudEvolutionStage:{}},emits:["close","useLocal","useCloud"],setup(t,{emit:e}){const s=t,n=e,r=Y(!1);dt(()=>s.show,f=>{f&&(r.value=!1)});const o=()=>{r.value=!0,n("close"),n("useLocal")},i=()=>{r.value=!0,n("close"),n("useCloud")},c=q(()=>IC(s.localSaveTime)),u=q(()=>IC(s.cloudSaveTime)),d=q(()=>{const f=Math.abs(s.localSaveTime-s.cloudSaveTime),p=Math.floor(f/(1e3*60)),g=Math.floor(p/60),w=Math.floor(g/24);return w>0?`${w} day${w>1?"s":""}`:g>0?`${g} hour${g>1?"s":""}`:`${p} minute${p>1?"s":""}`}),m=q(()=>s.localSaveTime>s.cloudSaveTime);return(f,p)=>f.show?(h(),v("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-md overflow-auto flex-col",style:yt({background:`url(${b(pL)}) no-repeat center top fixed`,backgroundSize:"cover"})},[a("div",wse,[p[14]||(p[14]=a("div",{class:"p-4 mb-4 text-center border-b border-blue-800"},[a("h2",{class:"text-xl font-bold text-amber-300 flex items-center justify-center"},[a("span",{class:"i-heroicons-exclamation-triangle mr-2"}),oe(" Save Conflict Detected ")]),a("p",{class:"text-sm text-gray-300 mt-1"}," We found different saves on your device and in the cloud. ")],-1)),a("div",Ese,[p[12]||(p[12]=a("p",{class:"text-base text-gray-300 text-center mb-4"}," Please choose which save you want to keep: ",-1)),a("div",Cse,[a("div",{class:K(["bg-blue-900/70 p-3 rounded-lg border-2",m.value?"border-green-500":"border-blue-800"])},[a("div",Sse,[p[0]||(p[0]=a("h3",{class:"font-semibold text-gray-200"},"Device Save",-1)),m.value?(h(),v("span",Tse," Newer ")):Q("",!0)]),a("div",Ase,[a("p",null,[p[1]||(p[1]=a("span",{class:"font-medium text-gray-400"},"Date:",-1)),oe(" "+_(c.value),1)]),f.localFoodAmount?(h(),v("p",Ise,[p[2]||(p[2]=a("span",{class:"font-medium text-gray-400"},"Food:",-1)),oe(" "+_(f.localFoodAmount),1)])):Q("",!0),f.localAntCount?(h(),v("p",Pse,[p[3]||(p[3]=a("span",{class:"font-medium text-gray-400"},"Ants:",-1)),oe(" "+_(f.localAntCount),1)])):Q("",!0),f.localEvolutionStage?(h(),v("p",Mse,[p[4]||(p[4]=a("span",{class:"font-medium text-gray-400"},"Evolution:",-1)),oe(" "+_(f.localEvolutionStage),1)])):Q("",!0)])],2),a("div",{class:K(["bg-blue-900/70 p-3 rounded-lg border-2",m.value?"border-blue-800":"border-green-500"])},[a("div",$se,[p[5]||(p[5]=a("h3",{class:"font-semibold text-gray-200"},"Cloud Save",-1)),m.value?Q("",!0):(h(),v("span",Rse," Newer "))]),a("div",Lse,[a("p",null,[p[6]||(p[6]=a("span",{class:"font-medium text-gray-400"},"Date:",-1)),oe(" "+_(u.value),1)]),f.cloudFoodAmount?(h(),v("p",Dse,[p[7]||(p[7]=a("span",{class:"font-medium text-gray-400"},"Food:",-1)),oe(" "+_(f.cloudFoodAmount),1)])):Q("",!0),f.cloudAntCount?(h(),v("p",Nse,[p[8]||(p[8]=a("span",{class:"font-medium text-gray-400"},"Ants:",-1)),oe(" "+_(f.cloudAntCount),1)])):Q("",!0),f.cloudEvolutionStage?(h(),v("p",Ose,[p[9]||(p[9]=a("span",{class:"font-medium text-gray-400"},"Evolution:",-1)),oe(" "+_(f.cloudEvolutionStage),1)])):Q("",!0)])],2)]),a("div",Fse," Time difference: "+_(d.value),1),a("div",Use,[a("button",{onClick:o,disabled:r.value,class:"py-2 px-5 bg-amber-600 hover:bg-amber-700 text-white rounded-lg text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center transition-colors"},[r.value?(h(),v("span",Bse)):Q("",!0),p[10]||(p[10]=oe(" Use Device Save "))],8,qse),a("button",{onClick:i,disabled:r.value,class:"py-2 px-5 bg-amber-600 hover:bg-amber-700 text-white rounded-lg text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center transition-colors"},[r.value?(h(),v("span",Hse)):Q("",!0),p[11]||(p[11]=oe(" Use Cloud Save "))],8,Vse)]),p[13]||(p[13]=a("div",{class:"text-xs text-gray-400 text-center pt-4"},[a("p",null,"This choice will override the other save. Make sure you select the one with the most progress."),a("p",{class:"mt-1 text-amber-400"},"Auto-save is paused while this decision is pending.")],-1))])])],4)):Q("",!0)}}),jse={class:"space-y-4"},Wse={key:0,class:"bg-gradient-to-br from-green-100 to-green-50 dark:from-green-900 dark:to-green-800 rounded-xl p-3 shadow-md"},zse={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-green-200 dark:border-green-700"},Qse={class:"text-xs text-green-800 dark:text-green-200"},Kse={class:"text-xs font-medium mt-1"},Yse={class:"mt-2 flex justify-end"},Xse={key:1,class:"bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-900 dark:to-blue-800 rounded-xl p-3 shadow-md"},Jse={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-blue-200 dark:border-blue-700"},Zse={key:1,class:"text-sm text-blue-800 dark:text-blue-200"},ene={class:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 shadow-md"},tne={class:"space-y-2"},sne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},nne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},rne={class:"flex items-center justify-between"},one={class:"relative inline-flex items-center cursor-pointer"},ine={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},ane={class:"flex items-center justify-between"},lne={class:"relative inline-flex items-center cursor-pointer"},cne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},une={class:"flex items-center justify-between"},dne={class:"relative inline-flex items-center cursor-pointer"},mne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},fne={class:"flex items-center justify-between"},pne={class:"relative inline-flex items-center cursor-pointer"},hne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},gne={class:"flex items-center justify-between"},vne={class:"relative inline-flex items-center cursor-pointer"},bne={key:0,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},yne={class:"space-y-2"},_ne={class:"flex items-center justify-between"},xne={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},kne=["value"],wne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},Ene={class:"flex items-center justify-between"},Cne={class:"relative inline-flex items-center cursor-pointer"},Sne=["checked"],Tne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},Ane={class:"flex items-center justify-between"},Ine={class:"relative inline-flex items-center cursor-pointer"},Pne=["checked"],Mne={class:"bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-800 dark:to-blue-700 rounded-xl p-3 shadow-md"},$ne={class:"space-y-2"},Rne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-blue-200 dark:border-blue-600"},Lne={class:"flex items-center justify-between"},Dne={key:0,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Nne={key:1,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},One={class:"flex space-x-2"},Fne=["disabled"],Une={key:0,class:"i-heroicons-arrow-path animate-spin text-base mr-1"},qne={key:1,class:"i-heroicons-google text-base mr-1"},Bne=["disabled"],Vne={key:0,class:"i-heroicons-arrow-path animate-spin text-base mr-1"},Hne={key:1,class:"i-heroicons-arrow-right-on-rectangle text-base mr-1"},Gne={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-blue-200 dark:border-blue-600"},jne={class:"flex items-center justify-between"},Wne={class:"relative inline-flex items-center cursor-pointer"},zne=["disabled","checked"],Qne={key:0,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-blue-200 dark:border-blue-600"},Kne={class:"grid grid-cols-2 gap-2"},Yne=["disabled"],Xne={key:0,class:"i-heroicons-arrow-path animate-spin text-base mr-1"},Jne={key:1,class:"i-heroicons-cloud-arrow-up text-base mr-1"},Zne={key:2},ere={key:3},tre=["disabled"],sre={key:0,class:"i-heroicons-arrow-path animate-spin text-base mr-1"},nre={key:1,class:"i-heroicons-cloud-arrow-down text-base mr-1"},rre={key:0,class:"mt-2 text-xs text-red-600 dark:text-red-400"},ore={key:1,class:"mt-2 text-xs text-green-600 dark:text-green-400"},ire={key:2,class:"mt-2 text-xs text-red-600 dark:text-red-400"},are={key:1,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-blue-200 dark:border-blue-600"},lre={class:"flex items-center space-x-2"},cre={key:0,class:"text-xs text-green-600 dark:text-green-400 flex items-center"},ure={key:1,class:"text-xs text-blue-600 dark:text-blue-400 flex items-center"},dre={key:2,class:"text-xs text-blue-600 dark:text-blue-400 flex items-center"},mre={class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},fre={key:2,class:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 shadow-md"},pre={class:"space-y-2"},hre={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},gre={class:"flex items-center justify-between"},vre={class:"relative inline-flex items-center cursor-pointer"},bre={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},yre={class:"flex items-center justify-between"},_re={class:"relative inline-flex items-center cursor-pointer"},xre=["checked"],kre={key:0,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},wre={class:"flex items-center justify-between"},Ere={class:"relative inline-flex items-center cursor-pointer"},Cre={class:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 shadow-md"},Sre={class:"space-y-2"},Tre={key:0,class:"bg-green-100 dark:bg-green-900 p-2 rounded-lg border border-green-200 dark:border-green-700"},Are={class:"text-xs text-green-800 dark:text-green-200 flex items-center"},Ire={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},Pre={class:"mb-2"},Mre={key:0,class:"mt-1"},$re={key:0,class:"text-xs text-green-600 dark:text-green-400 mt-0.5"},Rre={class:"grid grid-cols-2 gap-2 mb-2"},Lre={class:"bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md p-1.5 mb-1 h-16 flex flex-col justify-center"},Dre={key:0,class:"text-xs text-red-600 dark:text-red-400 mt-0.5"},Nre={key:1,class:"text-xs text-green-600 dark:text-green-400 mt-0.5"},Ore={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},Fre={key:1,class:"space-y-1"},Ure={class:"grid grid-cols-2 gap-2"},qre={class:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 shadow-md"},Bre={key:0,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 mb-2"},Vre={key:0,class:"text-xs text-center text-purple-600 dark:text-purple-400 mt-1"},Hre={class:"grid grid-cols-2 gap-2"},Gre={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},jre={class:"text-sm font-medium"},Wre={class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600"},zre={class:"text-sm font-medium"},Qre=Je({__name:"SettingsPage",setup(t){const e=Tr(),s=Vn(),n=St(),r=Or();Wt();const o=Qs(),{announcementsEnabled:i,toggleAnnouncementsEnabled:c}=fL(),u=kn(),{currentUser:d,isLoading:m,error:f,signInWithGoogle:p,signOut:g}=Pk(),{isInstallable:w,promptInstall:C,browserSupportsInstall:E}=gse();Y(1);const k=Y(""),A=Y(""),S=Y(""),T=Y(!1),R=Y(!1),L=Y(null),P=Y(!1),I=Y(!1),D=Y(!1),U=Y(null);dt(()=>e.isCalculatingOfflineProgress,Oe=>{!Oe&&e.offlineProgressTotalTicks>0&&(U.value={elapsedTime:e.offlineProgressElapsedTime,ticks:e.offlineProgressTotalTicks})});const M=()=>{const Oe=e.exportSave();Oe&&(k.value=Oe,R.value=!0,setTimeout(()=>{R.value=!1},3e3))},x=async()=>{if(S.value="",!A.value){S.value="Please enter a save string";return}try{await e.importSave(A.value)?(T.value=!0,A.value="",setTimeout(()=>{T.value=!1},3e3)):S.value="Invalid save data"}catch(Oe){S.value="Error importing save",console.error(Oe)}},$=async Oe=>{S.value="";const ve=Oe.target;if(!ve.files||ve.files.length===0){S.value="No file selected";return}const fe=ve.files[0];try{await e.importSaveFromFile(fe)?(T.value=!0,setTimeout(()=>{T.value=!1},3e3)):S.value="Invalid save data in file"}catch(X){S.value="Error importing save from file",console.error(X)}L.value&&(L.value.value="")},Z=()=>{e.exportSaveToFile()},me=()=>{e.saveGame()&&(P.value=!0,setTimeout(()=>{P.value=!1},3e3))},re=async()=>{await e.loadGame()&&(I.value=!0,setTimeout(()=>{I.value=!1},3e3))},J=()=>{D.value?e.resetGame():(D.value=!0,setTimeout(()=>{D.value=!1},5e3))},le=Oe=>{if(Oe<60)return`${Math.floor(Oe)} seconds`;if(Oe<3600){const ve=Math.floor(Oe/60);return`${ve} minute${ve!==1?"s":""}`}else{const ve=Math.floor(Oe/3600),fe=Math.floor(Oe%3600/60);return`${ve} hour${ve!==1?"s":""} ${fe>0?`and ${fe} minute${fe!==1?"s":""}`:""}`}};Et(()=>{}),Y(0),Y(0);const se=()=>{s.showGameFinishedScreen=!0},z=Y(!1),ce=Y(""),pe=Y(!1);Y(!1),Y({localSaveTime:0,cloudSaveTime:0,localFoodAmount:"",cloudFoodAmount:"",localAntCount:"",cloudAntCount:"",localEvolutionStage:"",cloudEvolutionStage:""});const _e=async()=>{try{if(z.value=!0,ce.value="",await p()){const ve=await e.loadGame()}}catch(Oe){ce.value="Error signing in with Google",console.error(Oe)}finally{z.value=!1}},Ee=async()=>{try{z.value=!0,ce.value="",e.cloudSyncEnabled&&d.value&&await e.saveGameToCloud(!1),await g()&&(pe.value=!0,setTimeout(()=>{pe.value=!1},3e3))}catch(Oe){ce.value="Error signing out",console.error(Oe)}finally{z.value=!1}},Ue=q(()=>Math.ceil(e.manualCloudSaveCooldownRemaining/1e3)),ze=async()=>{if(!d.value){ce.value="Please sign in first to use cloud sync";return}if(!e.isManualCloudSaveAvailable){const Oe=Math.ceil(e.manualCloudSaveCooldownRemaining/1e3);ce.value=`Please wait ${Oe} seconds before saving again`,setTimeout(()=>{ce.value=""},3e3);return}try{z.value=!0,ce.value="",await e.saveGameToCloud(!0)&&(pe.value=!0,setTimeout(()=>{pe.value=!1},3e3))}catch(Oe){ce.value="Error syncing with cloud",console.error(Oe)}finally{z.value=!1}},Re=async()=>{if(!d.value){ce.value="Please sign in first to use cloud sync";return}try{z.value=!0,ce.value="",await e.loadGameFromCloud()?(pe.value=!0,setTimeout(()=>{pe.value=!1},3e3)):ce.value="No cloud save found or error loading from cloud"}catch(Oe){ce.value="Error loading from cloud",console.error(Oe)}finally{z.value=!1}},$e=q(()=>d.value?d.value.displayName||d.value.email||"Signed In User":null),Ce=q(()=>d.value&&e.cloudSyncEnabled&&!e.isCloudSaving&&!e.isCloudLoading);return(Oe,ve)=>{const fe=Ha;return h(),v("div",jse,[U.value?(h(),v("section",Wse,[ve[29]||(ve[29]=a("h2",{class:"text-base font-bold mb-2 flex items-center text-green-800 dark:text-green-200"},[a("span",{class:"i-heroicons-clock text-green-700 dark:text-green-300 mr-2"}),oe(" Offline Progress Applied ")],-1)),a("div",zse,[a("p",Qse," While you were away for "+_(le(U.value.elapsedTime))+", your colony continued to work! ",1),a("p",Kse,[ve[28]||(ve[28]=a("span",{class:"i-heroicons-check-circle text-green-600 dark:text-green-400 mr-1"},null,-1)),oe(" "+_(U.value.ticks)+" game cycles completed ",1)])]),a("div",Yse,[a("button",{onClick:ve[0]||(ve[0]=X=>U.value=null),class:"text-xs text-green-800 dark:text-green-200 bg-green-200 dark:bg-green-700 hover:bg-green-300 dark:hover:bg-green-600 px-2 py-1 rounded-md"}," Dismiss ")])])):Q("",!0),b(w)||b(E)?(h(),v("section",Xse,[ve[35]||(ve[35]=a("h2",{class:"text-base font-bold mb-2 flex items-center text-blue-800 dark:text-blue-200"},[a("span",{class:"i-heroicons-device-phone-mobile text-blue-700 dark:text-blue-300 mr-2"}),oe(" Install Colony App ")],-1)),a("div",Jse,[ve[34]||(ve[34]=a("p",{class:"text-sm text-blue-800 dark:text-blue-200 mb-2"}," Install Idle Ant Farm as an app on your device for the best experience! ",-1)),b(w)?(h(),v("button",{key:0,onClick:ve[1]||(ve[1]=(...X)=>b(C)&&b(C)(...X)),class:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium flex items-center justify-center"},ve[30]||(ve[30]=[a("span",{class:"i-heroicons-arrow-down-tray text-base mr-2"},null,-1),oe(" Install App ")]))):b(E)?(h(),v("div",Zse,[ve[32]||(ve[32]=a("p",{class:"mb-2"},"To install this app on your device:",-1)),ve[33]||(ve[33]=a("ol",{class:"list-decimal pl-5 space-y-1"},[a("li",null,"Tap the share/menu button in your browser"),a("li",null,'Select "Add to Home Screen" or "Install"')],-1)),a("button",{onClick:ve[2]||(ve[2]=(...X)=>b(C)&&b(C)(...X)),class:"mt-2 w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium flex items-center justify-center"},ve[31]||(ve[31]=[a("span",{class:"i-heroicons-information-circle text-base mr-2"},null,-1),oe(" Show Installation Help ")]))])):Q("",!0)])])):Q("",!0),a("section",ene,[ve[52]||(ve[52]=a("h2",{class:"text-base font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-cog-6-tooth text-gray-700 dark:text-gray-300 mr-2"}),oe(" Colony Settings ")],-1)),a("div",tne,[a("div",sne,[Ye(xse)]),a("div",nne,[a("div",rne,[ve[37]||(ve[37]=a("div",null,[a("div",{class:"text-sm font-medium"},"Achievement Notifications"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Show popup notifications when achievements are unlocked")],-1)),a("label",one,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[3]||(ve[3]=X=>b(r).notificationsEnabled=X),class:"sr-only peer"},null,512),[[ln,b(r).notificationsEnabled]]),ve[36]||(ve[36]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",ine,[a("div",ane,[ve[39]||(ve[39]=a("div",null,[a("div",{class:"text-sm font-medium"},"Update Announcements"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Show popup with details when the game is updated ")],-1)),a("label",lne,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[4]||(ve[4]=X=>ws(i)?i.value=X:null),onChange:ve[5]||(ve[5]=(...X)=>b(c)&&b(c)(...X)),class:"sr-only peer"},null,544),[[ln,b(i)]]),ve[38]||(ve[38]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",cne,[a("div",une,[ve[41]||(ve[41]=a("div",null,[a("div",{class:"text-sm font-medium"},"Pheromone Trail Preservation"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Automatically save your colony progress every minute ")],-1)),a("label",dne,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[6]||(ve[6]=X=>b(e).autoSaveEnabled=X),class:"sr-only peer"},null,512),[[ln,b(e).autoSaveEnabled]]),ve[40]||(ve[40]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",mne,[a("div",fne,[ve[43]||(ve[43]=a("div",null,[a("div",{class:"text-sm font-medium"},"Hibernation Progress"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Calculate colony progress while you're away")],-1)),a("label",pne,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[7]||(ve[7]=X=>b(e).offlineProgressEnabled=X),class:"sr-only peer"},null,512),[[ln,b(e).offlineProgressEnabled]]),ve[42]||(ve[42]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",hne,[a("div",gne,[ve[45]||(ve[45]=a("div",null,[a("div",{class:"text-sm font-medium"},"Precise Hibernation Calculation"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Process all offline ticks individually for maximum accuracy (slower but more precise)")],-1)),a("label",vne,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[8]||(ve[8]=X=>b(e).processAllTicksIndividually=X),class:"sr-only peer"},null,512),[[ln,b(e).processAllTicksIndividually]]),ve[44]||(ve[44]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),b(e).processAllTicksIndividually?Q("",!0):(h(),v("div",bne,[a("div",yne,[a("div",_ne,[ve[46]||(ve[46]=a("div",null,[a("div",{class:"text-sm font-medium"},"Hibernation Batch Size"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"}," Set how many ticks to process at once during offline calculation (smaller = more accurate but slower) ")],-1)),a("div",xne,_(b(e).offlineTickBatchSize),1)]),a("div",null,[a("input",{type:"range",min:"10",max:"1000",step:"10",value:b(e).offlineTickBatchSize,onInput:ve[9]||(ve[9]=X=>b(e).setOfflineTickBatchSize(Number(X.target.value))),class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600 dark:accent-blue-500"},null,40,kne),ve[47]||(ve[47]=a("div",{class:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1"},[a("span",null,"10 (More Accurate)"),a("span",null,"1000 (Faster)")],-1))])])])),a("div",wne,[a("div",Ene,[ve[49]||(ve[49]=a("div",null,[a("div",{class:"text-sm font-medium"},"Quest Notifications"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Show popups for quest start and completion")],-1)),a("label",Cne,[a("input",{type:"checkbox",checked:b(o).showQuestNotifications,onChange:ve[10]||(ve[10]=(...X)=>b(o).toggleShowQuestNotifications&&b(o).toggleShowQuestNotifications(...X)),class:"sr-only peer"},null,40,Sne),ve[48]||(ve[48]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",Tne,[a("div",Ane,[ve[51]||(ve[51]=a("div",null,[a("div",{class:"text-sm font-medium"},"Confirm Max Upgrade Purchase"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Show confirmation before purchasing max levels of evolution upgrades")],-1)),a("label",Ine,[a("input",{type:"checkbox",checked:b(e).confirmMaxUpgradePurchase,onChange:ve[11]||(ve[11]=(...X)=>b(e).toggleConfirmMaxUpgradePurchase&&b(e).toggleConfirmMaxUpgradePurchase(...X)),class:"sr-only peer"},null,40,Pne),ve[50]||(ve[50]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])])])]),a("section",Mne,[ve[67]||(ve[67]=a("h2",{class:"text-base font-bold mb-2 flex items-center text-blue-800 dark:text-blue-200"},[a("span",{class:"i-heroicons-cloud text-blue-700 dark:text-blue-300 mr-2"}),oe(" Cloud Sync ")],-1)),a("div",$ne,[a("div",Rne,[a("div",Lne,[a("div",null,[ve[55]||(ve[55]=a("div",{class:"text-sm font-medium"},"Cloud Save Status",-1)),b(d)?(h(),v("div",Dne,[ve[53]||(ve[53]=a("span",{class:"i-heroicons-check-circle text-green-600 dark:text-green-400 mr-1"},null,-1)),oe(" Signed in as "+_($e.value),1)])):(h(),v("div",Nne,ve[54]||(ve[54]=[a("span",{class:"i-heroicons-x-circle text-red-600 dark:text-red-400 mr-1"},null,-1),oe(" Not signed in ")])))]),a("div",One,[b(d)?(h(),v("button",{key:1,onClick:Ee,disabled:b(m)||z.value,class:"py-1.5 px-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-xs font-medium flex items-center justify-center min-w-24"},[b(m)||z.value?(h(),v("span",Vne)):(h(),v("span",Hne)),ve[57]||(ve[57]=oe(" Sign Out "))],8,Bne)):(h(),v("button",{key:0,onClick:_e,disabled:b(m)||z.value,class:"py-1.5 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs font-medium flex items-center justify-center min-w-24"},[b(m)||z.value?(h(),v("span",Une)):(h(),v("span",qne)),ve[56]||(ve[56]=oe(" Sign in with Google "))],8,Fne))])])]),a("div",Gne,[a("div",jne,[ve[59]||(ve[59]=a("div",null,[a("div",{class:"text-sm font-medium"},"Automatic Cloud Sync"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"}," Periodically save your colony progress to the cloud ")],-1)),a("label",Wne,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[12]||(ve[12]=X=>b(e).cloudSyncEnabled=X),disabled:!b(d),onChange:ve[13]||(ve[13]=(...X)=>b(e).toggleCloudSync&&b(e).toggleCloudSync(...X)),checked:b(e).cloudSyncEnabled,class:"sr-only peer"},null,40,zne),[[ln,b(e).cloudSyncEnabled]]),ve[58]||(ve[58]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 peer-disabled:opacity-50"},null,-1))])])]),b(d)?(h(),v("div",Qne,[ve[61]||(ve[61]=a("div",{class:"text-sm font-medium mb-1"},"Manual Cloud Sync",-1)),ve[62]||(ve[62]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400 mb-2"}," Manually save or load your colony data from the cloud ",-1)),a("div",Kne,[a("button",{onClick:ze,disabled:z.value||!b(e).isManualCloudSaveAvailable,class:"py-1.5 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[z.value&&!b(e).isCloudLoading?(h(),v("span",Xne)):(h(),v("span",Jne)),b(e).isManualCloudSaveAvailable?(h(),v("span",ere,"Save to Cloud")):(h(),v("span",Zne,"Save to Cloud ("+_(Ue.value)+"s)",1))],8,Yne),a("button",{onClick:Re,disabled:z.value,class:"py-1.5 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},[z.value&&b(e).isCloudLoading?(h(),v("span",sre)):(h(),v("span",nre)),ve[60]||(ve[60]=oe(" Load from Cloud "))],8,tre)]),ce.value?(h(),v("div",rre,_(ce.value),1)):Q("",!0),pe.value?(h(),v("div",ore," Cloud sync completed successfully! ")):Q("",!0),b(f)?(h(),v("div",ire," Authentication error: "+_(b(f)),1)):Q("",!0)])):Q("",!0),b(d)&&b(e).cloudSyncEnabled?(h(),v("div",are,[ve[66]||(ve[66]=a("div",{class:"text-sm font-medium mb-1"},"Cloud Sync Status",-1)),a("div",lre,[Ce.value?(h(),v("span",cre,ve[63]||(ve[63]=[a("span",{class:"i-heroicons-check-circle text-green-600 dark:text-green-400 mr-1"},null,-1),oe(" Synced with cloud ")]))):b(e).isCloudSaving?(h(),v("span",ure,ve[64]||(ve[64]=[a("span",{class:"i-heroicons-arrow-path animate-spin text-blue-600 dark:text-blue-400 mr-1"},null,-1),oe(" Saving to cloud... ")]))):b(e).isCloudLoading?(h(),v("span",dre,ve[65]||(ve[65]=[a("span",{class:"i-heroicons-arrow-path animate-spin text-blue-600 dark:text-blue-400 mr-1"},null,-1),oe(" Loading from cloud... ")]))):Q("",!0)]),a("div",mre," Last cloud save: "+_(new Date(b(e).lastCloudSaveTime).toLocaleString()),1)])):Q("",!0)])]),b(n).hasEvolved?(h(),v("section",fre,[ve[74]||(ve[74]=a("h2",{class:"text-base font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-arrow-path text-gray-700 dark:text-gray-300 mr-2"}),oe(" Evolution Settings ")],-1)),a("div",pre,[a("div",hre,[a("div",gre,[ve[69]||(ve[69]=a("div",null,[a("div",{class:"text-sm font-medium"},"Auto-Enable Auto Purchases After Evolution"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Automatically enable all auto-purchases after evolving")],-1)),a("label",vre,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[14]||(ve[14]=X=>b(e).autoEnableGeneratorsAfterPrestige=X),class:"sr-only peer"},null,512),[[ln,b(e).autoEnableGeneratorsAfterPrestige]]),ve[68]||(ve[68]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),a("div",bre,[a("div",yre,[ve[71]||(ve[71]=a("div",null,[a("div",{class:"text-sm font-medium"},"Confirm Evolution"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Show confirmation dialog before evolving")],-1)),a("label",_re,[a("input",{type:"checkbox",checked:b(e).confirmEvolution,onChange:ve[15]||(ve[15]=(...X)=>b(e).toggleConfirmEvolution&&b(e).toggleConfirmEvolution(...X)),class:"sr-only peer"},null,40,xre),ve[70]||(ve[70]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])]),b(n).getUpgradeCount("autoEvolve").gt(0)?(h(),v("div",kre,[a("div",wre,[ve[73]||(ve[73]=a("div",null,[a("div",{class:"text-sm font-medium"},"Automated Evolution"),a("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Automatically evolve when requirements are met")],-1)),a("label",Ere,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":ve[16]||(ve[16]=X=>b(n).autoEvolveEnabled=X),class:"sr-only peer"},null,512),[[ln,b(n).autoEvolveEnabled]]),ve[72]||(ve[72]=a("div",{class:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])])):Q("",!0)])])):Q("",!0),a("section",Cre,[ve[92]||(ve[92]=a("h2",{class:"text-base font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-document-text text-gray-700 dark:text-gray-300 mr-2"}),oe(" Colony Memory Management ")],-1)),a("div",Sre,[a("div",{class:"grid grid-cols-2 gap-2"},[a("button",{onClick:me,class:"py-1.5 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[75]||(ve[75]=[a("span",{class:"i-heroicons-document-arrow-down text-base mr-1"},null,-1),oe(" Save Colony ")])),a("button",{onClick:re,class:"py-1.5 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[76]||(ve[76]=[a("span",{class:"i-heroicons-document-arrow-up text-base mr-1"},null,-1),oe(" Load Colony ")]))]),P.value||I.value?(h(),v("div",Tre,[a("p",Are,[ve[77]||(ve[77]=a("span",{class:"i-heroicons-check-circle text-green-600 dark:text-green-400 mr-1"},null,-1)),a("span",null,_(P.value?"Colony saved successfully!":"Colony loaded successfully!"),1)])])):Q("",!0),a("div",Ire,[ve[87]||(ve[87]=a("div",{class:"text-sm font-medium mb-1"},"Export/Import Colony Data",-1)),a("div",Pre,[a("div",{class:"grid grid-cols-2 gap-2"},[a("button",{onClick:M,class:"py-1.5 px-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[78]||(ve[78]=[a("span",{class:"i-heroicons-arrow-down-tray text-base mr-1"},null,-1),oe(" Export as Code ")])),a("button",{onClick:Z,class:"py-1.5 px-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[79]||(ve[79]=[a("span",{class:"i-heroicons-document-arrow-down text-base mr-1"},null,-1),oe(" Export as File ")]))]),k.value?(h(),v("div",Mre,[ve[80]||(ve[80]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400 mb-0.5"},"Copy this code to save your colony data: ",-1)),Ut(a("textarea",{readonly:"",class:"w-full p-1.5 text-xs bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md h-16 font-mono dark:text-gray-200","onUpdate:modelValue":ve[17]||(ve[17]=X=>k.value=X)},null,512),[[xa,k.value]]),R.value?(h(),v("div",$re," Colony data exported successfully! ")):Q("",!0)])):Q("",!0)]),a("div",null,[ve[86]||(ve[86]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400 mb-0.5"},"Import your colony data:",-1)),a("div",Rre,[a("div",null,[ve[82]||(ve[82]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400 mb-0.5"},"Paste code:",-1)),Ut(a("textarea",{class:"w-full p-1.5 text-xs bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md h-16 font-mono mb-1 dark:text-gray-200","onUpdate:modelValue":ve[18]||(ve[18]=X=>A.value=X),placeholder:"Paste your colony data here..."},null,512),[[xa,A.value]]),a("button",{onClick:x,class:"w-full py-1.5 px-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[81]||(ve[81]=[a("span",{class:"i-heroicons-arrow-up-tray text-base mr-1"},null,-1),oe(" Import from Code ")]))]),a("div",null,[ve[85]||(ve[85]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400 mb-0.5"},"Select file:",-1)),a("div",Lre,[a("input",{type:"file",ref_key:"fileInputRef",ref:L,accept:".txt",class:"text-xs w-full dark:text-gray-200 hidden",onChange:$,id:"file-import-input"},null,544),ve[83]||(ve[83]=a("label",{for:"file-import-input",class:"cursor-pointer bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md py-1.5 px-3 text-xs font-medium text-center flex items-center justify-center"},[a("span",{class:"i-heroicons-document-plus text-base mr-1"}),oe(" Choose Save File ")],-1))]),a("button",{onClick:ve[19]||(ve[19]=()=>{var X;return(X=L.value)==null?void 0:X.click()}),class:"w-full py-1.5 px-3 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[84]||(ve[84]=[a("span",{class:"i-heroicons-folder-open text-base mr-1"},null,-1),oe(" Import from File ")]))])]),S.value?(h(),v("div",Dre,_(S.value),1)):Q("",!0),T.value?(h(),v("div",Nre," Colony data imported successfully! ")):Q("",!0)])]),a("div",Ore,[ve[90]||(ve[90]=a("div",{class:"text-sm font-medium mb-1"},"Reset Colony",-1)),ve[91]||(ve[91]=a("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-2"}," This will completely reset your colony progress. This action cannot be undone. ",-1)),D.value?(h(),v("div",Fre,[ve[89]||(ve[89]=a("p",{class:"text-xs text-red-600 dark:text-red-400 font-medium"},"Are you sure you want to reset your colony? ",-1)),a("div",Ure,[a("button",{onClick:ve[21]||(ve[21]=X=>D.value=!1),class:"py-1.5 px-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md text-xs font-medium"}," Cancel "),a("button",{onClick:ve[22]||(ve[22]=X=>J()),class:"py-1.5 px-3 bg-red-600 hover:bg-red-700 text-white rounded-md text-xs font-medium"}," Yes, Reset ")])])):(h(),v("button",{key:0,onClick:ve[20]||(ve[20]=X=>D.value=!0),class:"w-full py-1.5 px-3 bg-red-600 hover:bg-red-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[88]||(ve[88]=[a("span",{class:"i-heroicons-trash text-base mr-1"},null,-1),oe(" Reset Colony ")])))])])]),Q("",!0),ve[106]||(ve[106]=js('<section class="bg-gradient-to-br from-amber-100 to-amber-50 dark:from-amber-900 dark:to-amber-800 rounded-xl p-3 shadow-md"><h2 class="text-base font-bold mb-2 flex items-center text-amber-800 dark:text-amber-200"><span class="i-heroicons-heart text-amber-700 dark:text-amber-300 mr-2"></span> Support the Developer </h2><div class="bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"><p class="text-sm text-amber-800 dark:text-amber-200 mb-2"> Hi there! I&#39;m the sleep-deprived developer behind Idle Ant Farm. This game will always be free - no ads, no pay-to-win, and no colony surveillance operations! </p><p class="text-xs text-amber-700 dark:text-amber-300 mb-2"> Turns out, coffee is the secret ingredient to both ant pheromones AND game development. If you&#39;re enjoying watching these digital ants march across your screen, consider fueling my next 3AM coding session! </p><p class="text-xs text-amber-700 dark:text-amber-300 mb-3"> No pressure though - the ants will keep marching either way. Your enjoyment is the real motivation! </p><a href="https://buymeacoffee.com/idleantfarm" target="_blank" rel="noopener noreferrer" class="w-full flex items-center justify-center py-2 px-4 bg-amber-600 hover:bg-amber-700 text-white rounded-md text-sm font-medium transition-colors"><span class="i-heroicons-coffee text-base mr-2"></span> Feed the Developer  </a><p class="text-xs text-center text-amber-700 dark:text-amber-300 mt-2"> *Coffee not actually used to feed real ants. That would be weird. </p></div></section><section class="bg-gradient-to-br from-indigo-100 to-indigo-50 dark:from-indigo-900 dark:to-indigo-800 rounded-xl p-3 shadow-md"><h2 class="text-base font-bold mb-2 flex items-center text-indigo-800 dark:text-indigo-200"><span class="i-heroicons-chat-bubble-left-right text-indigo-700 dark:text-indigo-300 mr-2"></span> Join the Colony </h2><div class="bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-indigo-200 dark:border-indigo-700"><p class="text-sm text-indigo-800 dark:text-indigo-200 mb-2"> Connect with other ant enthusiasts! Join our Discord community to share strategies, report bugs, and chat about all things ant-related. </p><a href="https://discord.gg/cHyAFTx9kj" target="_blank" rel="noopener noreferrer" class="w-full flex items-center justify-center py-2 px-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors"><span class="i-heroicons-chat-bubble-left-right text-base mr-2"></span> Join Discord Server </a></div></section>',2)),a("section",qre,[ve[105]||(ve[105]=a("h2",{class:"text-base font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-information-circle text-gray-700 dark:text-gray-300 mr-2"}),oe(" Game Information ")],-1)),b(Co)()||b(u).isBossDefeated("boss_omega_ant")?(h(),v("div",Bre,[a("button",{onClick:se,class:"w-full py-1.5 px-3 bg-amber-600 hover:bg-amber-700 text-white rounded-md text-xs font-medium flex items-center justify-center"},ve[102]||(ve[102]=[a("span",{class:"i-heroicons-sparkles text-base mr-1"},null,-1),oe(" View Game Completion Screen ")])),b(Co)()?(h(),v("p",Vre,"(Visible in Debug Mode)")):Q("",!0)])):Q("",!0),a("div",Hre,[a("div",Gre,[ve[103]||(ve[103]=a("div",{class:"text-xs text-gray-800 dark:text-gray-400"},"Game Version:",-1)),a("div",jre,"v"+_(b(kse)),1)]),a("div",Wre,[ve[104]||(ve[104]=a("div",{class:"text-xs text-gray-800 dark:text-gray-400"},"Total Ticks:",-1)),a("div",zre,_(b(s).formattedTotalTicks),1)])])]),Ye(fe,{threshold:400})])}}}),vh=["production","efficiency","automation","research","synergy","prestige","reproduction","cost","level-requirement","adventure","aphid-farm","pheromone"],Kre=()=>[...vh],Yre=()=>["all",...Kre()],OT=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],wi=(()=>{if(typeof document>"u")return!1;const t=OT[0],e={};for(const s of OT)if((s==null?void 0:s[1])in document){for(const[r,o]of s.entries())e[t[r]]=o;return e}return!1})(),FT={change:wi.fullscreenchange,error:wi.fullscreenerror};let Ir={request(t=document.documentElement,e){return new Promise((s,n)=>{const r=()=>{Ir.off("change",r),s()};Ir.on("change",r);const o=t[wi.requestFullscreen](e);o instanceof Promise&&o.then(r).catch(n)})},exit(){return new Promise((t,e)=>{if(!Ir.isFullscreen){t();return}const s=()=>{Ir.off("change",s),t()};Ir.on("change",s);const n=document[wi.exitFullscreen]();n instanceof Promise&&n.then(s).catch(e)})},toggle(t,e){return Ir.isFullscreen?Ir.exit():Ir.request(t,e)},onchange(t){Ir.on("change",t)},onerror(t){Ir.on("error",t)},on(t,e){const s=FT[t];s&&document.addEventListener(s,e,!1)},off(t,e){const s=FT[t];s&&document.removeEventListener(s,e,!1)},raw:wi};Object.defineProperties(Ir,{isFullscreen:{get:()=>!!document[wi.fullscreenElement]},element:{enumerable:!0,get:()=>document[wi.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[wi.fullscreenEnabled]}});wi||(Ir={isEnabled:!1});const jt=Ir,gc={food:{icon:{light:"text-amber-600",dark:"text-amber-300"},text:{light:"text-amber-900",dark:"text-amber-100"},background:{light:"bg-amber-100/70",dark:"bg-amber-800/70"}},worker:{icon:{light:"text-red-600",dark:"text-red-300"},text:{light:"text-red-900",dark:"text-red-100"},background:{light:"bg-red-100/70",dark:"bg-red-800/70"}},honeydew:{icon:{light:"text-green-600",dark:"text-green-300"},text:{light:"text-green-900",dark:"text-green-100"},background:{light:"bg-green-100/70",dark:"bg-green-800/70"}},time:{icon:{light:"text-slate-600",dark:"text-slate-300"},text:{light:"text-slate-900",dark:"text-slate-100"},background:{light:"bg-slate-100/70",dark:"bg-slate-800/70"}},evolutionPoints:{icon:{light:"text-blue-600",dark:"text-blue-300"},text:{light:"text-blue-900",dark:"text-blue-100"},background:{light:"bg-blue-100/70",dark:"bg-blue-800/70"}},pheromoneEssence:{icon:{light:"text-indigo-600",dark:"text-indigo-300"},text:{light:"text-indigo-900",dark:"text-indigo-100"},background:{light:"bg-indigo-100/70",dark:"bg-indigo-800/70"}},ascension:{icon:{light:"text-purple-600",dark:"text-purple-300"},text:{light:"text-purple-900",dark:"text-purple-100"},background:{light:"bg-purple-100/70",dark:"bg-purple-800/70"}},default:{icon:{light:"text-gray-600",dark:"text-gray-300"},text:{light:"text-gray-900",dark:"text-gray-100"},background:{light:"bg-gray-100/70",dark:"bg-gray-800/70"}}};function Ga(){const{isDarkMode:t}=Af(),e=(i="default")=>q(()=>{const c=gc[i]||gc.default;return t?c.icon.dark:c.icon.light}),s=(i="default")=>q(()=>{const c=gc[i]||gc.default;return t?c.text.dark:c.text.light}),n=(i="default")=>q(()=>{const c=gc[i]||gc.default;return t?c.background.dark:c.background.light}),r=(i="default")=>q(()=>{if(t)switch(i){case"evolutionPoints":return"border-blue-400";case"food":return"border-red-400";case"worker":return"border-amber-400";case"honeydew":return"border-green-400";case"time":return"border-gray-400";case"pheromoneEssence":return"border-indigo-400";case"ascension":return"border-purple-400";default:return"border-amber-400"}else switch(i){case"evolutionPoints":return"border-blue-500";case"food":return"border-red-500";case"worker":return"border-amber-500";case"honeydew":return"border-green-500";case"time":return"border-gray-500";case"pheromoneEssence":return"border-indigo-500";case"ascension":return"border-purple-500";default:return"border-amber-500"}});return{getIconColor:e,getTextColor:s,getBackgroundColor:n,getBorderColor:r,getCurrencyClasses:(i="default")=>{const c=e(i),u=s(i),d=n(i),m=r(i);return{icon:c.value,text:u.value,background:d.value,border:m.value}}}}const Xre={class:"relative"},Jre={class:"relative"},Zre=["aria-expanded","aria-activedescendant"],eoe={class:"px-3 py-1 border-b border-gray-200 dark:border-gray-700 text-xs flex justify-between items-center text-gray-500 dark:text-gray-400"},toe={class:"py-1"},soe=["id","onClick","aria-selected"],noe={class:"flex items-center"},roe=["innerHTML"],ooe={class:"flex justify-between mt-1 text-xs"},ioe={class:"text-gray-500 dark:text-gray-400 capitalize"},aoe={class:"flex items-center justify-center text-gray-500 dark:text-gray-400 py-3 px-3"},loe={class:"text-sm"},coe={class:"font-medium"},uoe=Je({__name:"PrestigeUpgradeSearch",emits:["select"],setup(t,{emit:e}){const s=e,n=pr("componentRootRef",Y(null)),r=St(),o=Y(""),i=Y(!1),c=Y(null),u=Y(0),d=Y(document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches),m=Y(jt.isEnabled&&jt.isFullscreen),f=qa({position:"fixed",top:"0px",left:"0px",width:"300px",maxHeight:"300px",zIndex:"999999",backgroundColor:d.value?"#1e293b":"#f9fafb",color:d.value?"#e2e8f0":"#1f2937",border:d.value?"1px solid #475569":"1px solid #e5e7eb",borderRadius:"0.375rem",boxShadow:d.value?"0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",overflow:"auto",transition:"top 0.1s, bottom 0.1s, max-height 0.1s"}),p=q(()=>m.value&&n.value?n.value:document.body),g=q(()=>r.evolutionUpgrades),w=q(()=>{if(!o.value.trim())return[];const $=o.value.toLowerCase().trim();return g.value.filter(Z=>Z.name.toLowerCase().includes($)||Z.description.toLowerCase().includes($)||Z.category.toLowerCase().includes($)).slice(0,10)});dt(w,()=>{u.value=0});const C=()=>{m.value=jt.isEnabled&&jt.isFullscreen,i.value&&vs(()=>{E()})},E=()=>{if(!c.value)return;const $=c.value.getBoundingClientRect(),Z=window.innerHeight,me=Z-$.bottom-10,re=Math.max(100,Math.min(300,me));if(m.value&&n.value){const J=n.value.getBoundingClientRect(),le=$.bottom-J.top,se=$.left-J.left;if(f.position="absolute",f.top=`${le+5}px`,f.left=`${se}px`,f.width=`${$.width}px`,f.maxHeight=`${re}px`,le+5+re>J.height){const z=$.top-J.top-10;z>le+5+re-J.height&&z>100&&(f.top="auto",f.bottom=`${J.height-($.top-J.top)+5}px`,f.maxHeight=`${Math.min(300,z)}px`)}}else if(f.position="fixed",f.top=`${$.bottom+5}px`,f.left=`${$.left}px`,f.width=`${$.width}px`,f.maxHeight=`${re}px`,$.bottom+5+re>Z){const J=$.top-10;J>me&&J>100&&(f.top="auto",f.bottom=`${Z-$.top+5}px`,f.maxHeight=`${Math.min(300,J)}px`)}},k=()=>{if(!c.value)return;let $=c.value.parentElement;const Z=[];for(;$;){const me=window.getComputedStyle($),re=me.overflow+me.overflowY+me.overflowX;(re.includes("scroll")||re.includes("auto"))&&(Z.push($),$.addEventListener("scroll",E,{passive:!0})),$=$.parentElement}return Z};let A=null;dt(i,$=>{$?vs(()=>{E(),A=k(),window.addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E,{passive:!0})}):(A&&(A.forEach(Z=>{Z.removeEventListener("scroll",E)}),A=null),window.removeEventListener("scroll",E),window.removeEventListener("resize",E))});const S=H0(()=>{o.value.trim().length>0&&(i.value=!0)},200),T=$=>{o.value=$.target.value,S()},R=()=>{o.value.trim()&&w.value.length>0&&(i.value=!0)},L=$=>{s("select",$),o.value=$.name,i.value=!1},P=$=>{i.value&&c.value&&!c.value.contains($.target)&&!$.target.closest(".upgrade-search-dropdown")&&(i.value=!1)},I=$=>{if(!(!i.value||w.value.length===0))switch($.key){case"ArrowDown":$.preventDefault(),u.value=(u.value+1)%w.value.length;break;case"ArrowUp":$.preventDefault(),u.value=(u.value-1+w.value.length)%w.value.length;break;case"Enter":$.preventDefault(),w.value[u.value]&&L(w.value[u.value]);break;case"Escape":$.preventDefault(),i.value=!1;break}},D=()=>{o.value="",i.value=!1};Et(()=>{document.addEventListener("click",P),jt.isEnabled&&jt.on("change",C),vs(()=>{E()});const $=new MutationObserver(re=>{re.forEach(J=>{J.attributeName==="class"&&(d.value=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches,x())})});$.observe(document.documentElement,{attributes:!0});const Z=window.matchMedia("(prefers-color-scheme: dark)"),me=re=>{d.value=document.documentElement.classList.contains("dark")||re.matches,x()};Z.addEventListener("change",me),xn(()=>{$.disconnect(),Z.removeEventListener("change",me),jt.isEnabled&&jt.off("change",C)})}),xn(()=>{document.removeEventListener("click",P),A&&A.forEach($=>{$.removeEventListener("scroll",E)}),window.removeEventListener("scroll",E),window.removeEventListener("resize",E)});const U=$=>{const Z=$.level,me=$.maxLevel;return Z.gt(0)?me&&Z.gte(me)?`Max level ${be(Z,0)}`:`Level ${be(Z,0)}${me?`/${be(me,0)}`:""}`:"Not purchased"},M=($,Z)=>{if(!Z.trim())return $;const me=new RegExp(`(${Z.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return $.replace(me,'<span class="bg-yellow-200 dark:bg-yellow-800">$1</span>')},x=()=>{f.backgroundColor=d.value?"#1e293b":"#f9fafb",f.color=d.value?"#e2e8f0":"#1f2937",f.border=d.value?"1px solid #475569":"1px solid #e5e7eb",f.boxShadow=d.value?"0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"};return($,Z)=>(h(),v("div",Xre,[a("div",Jre,[Ut(a("input",{ref_key:"searchInputRef",ref:c,type:"text","onUpdate:modelValue":Z[0]||(Z[0]=me=>o.value=me),onInput:T,onFocus:R,onKeydown:I,placeholder:"Search upgrades...","aria-label":"Search upgrades",autocomplete:"off","aria-autocomplete":"list","aria-expanded":i.value,"aria-activedescendant":i.value&&w.value.length>0?`upgrade-result-${u.value}`:void 0,class:"w-full px-3 py-1.5 pl-7 pr-7 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 placeholder-gray-400 dark:placeholder-gray-500"},null,40,Zre),[[xa,o.value]]),Z[2]||(Z[2]=a("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500 dark:text-gray-400"},[a("span",{class:"i-mdi-magnify w-3.5 h-3.5"})],-1)),o.value?(h(),v("button",{key:0,onClick:D,class:"absolute inset-y-0 right-0 flex items-center pr-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Clear search"},Z[1]||(Z[1]=[a("span",{class:"i-mdi-close-circle w-3.5 h-3.5"},null,-1)]))):Q("",!0)]),(h(),Tt(QI,{to:p.value},[i.value&&w.value.length>0?(h(),v("div",{key:0,class:"upgrade-search-dropdown",role:"listbox","aria-label":"Search results",style:yt(f)},[a("div",eoe,[a("span",null,_(w.value.length)+" "+_(w.value.length===1?"result":"results"),1),Z[3]||(Z[3]=a("div",{class:"flex items-center gap-1"},[a("span",{class:"i-mdi-keyboard text-xs"}),a("span",{class:"text-xs"}," to navigate, Enter to select")],-1))]),a("ul",toe,[(h(!0),v(De,null,Ge(w.value,(me,re)=>(h(),v("li",{key:me.id,id:`upgrade-result-${re}`,onClick:J=>L(me),class:K(["px-3 py-2 cursor-pointer flex flex-col hover:bg-gray-100 dark:hover:bg-gray-700 border-l-2",u.value===re?"bg-gray-100 dark:bg-gray-700 border-l-blue-500 dark:border-l-blue-400":"border-l-transparent"]),role:"option","aria-selected":u.value===re},[a("div",noe,[a("span",{class:K([me.icon,"mr-2 text-base flex-shrink-0"])},null,2),a("span",{class:"font-medium text-gray-800 dark:text-gray-200",innerHTML:M(me.name,o.value)},null,8,roe)]),a("div",ooe,[a("span",ioe," Category: "+_(me.category),1),a("span",{class:K({"text-emerald-600 dark:text-emerald-400":me.level.gt(0),"text-gray-500 dark:text-gray-400":me.level.eq(0)})},_(U(me)),3)])],10,soe))),128))])],4)):i.value&&o.value&&w.value.length===0?(h(),v("div",{key:1,class:"upgrade-search-dropdown",style:yt(f)},[a("div",aoe,[Z[6]||(Z[6]=a("span",{class:"i-mdi-magnify-remove w-5 h-5 mr-2 opacity-70"},null,-1)),a("p",loe,[Z[4]||(Z[4]=oe('No upgrades found matching "')),a("span",coe,_(o.value),1),Z[5]||(Z[5]=oe('"'))])])],4)):Q("",!0)],8,["to"]))]))}}),doe={class:"prestige-upgrade-sidepanel relative h-full select-none flex flex-col max-h-[80vh]"},moe=["aria-label"],foe={class:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900"},poe={class:"flex items-center gap-2 mb-2"},hoe={class:"space-y-3"},goe={class:"relative"},voe=["value"],boe=["value"],yoe={class:"flex flex-col gap-1"},_oe={class:"flex items-center text-xs text-gray-700 dark:text-gray-300"},xoe={class:"flex items-center text-xs text-gray-700 dark:text-gray-300"},koe={class:"flex items-center text-xs text-gray-700 dark:text-gray-300"},woe={class:"flex-1 overflow-y-auto upgrade-list"},Eoe={key:0,class:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm"},Coe={key:1,class:"py-1"},Soe={class:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 border-l-2 border-l-transparent focus-within:bg-gray-100 dark:focus-within:bg-gray-700 focus-within:border-l-blue-500 dark:focus-within:border-l-blue-400 transition-colors"},Toe={class:"flex justify-between items-start"},Aoe=["onClick"],Ioe={class:"flex items-center"},Poe={class:"font-medium text-gray-800 dark:text-gray-200 text-sm truncate flex items-center"},Moe={class:"text-xs text-gray-500 dark:text-gray-400 capitalize flex items-center"},$oe={class:"flex flex-col gap-1"},Roe=["onClick","disabled"],Loe=["onClick"],Doe={key:0,class:"mt-1 flex justify-between items-center"},Noe={class:"mt-2 text-xs space-y-2 bg-gray-50 dark:bg-gray-800/50 p-2 rounded-md"},Ooe={class:"text-gray-600 dark:text-gray-400"},Foe={class:"space-y-1"},Uoe={key:0,class:"flex items-center"},qoe={class:"text-green-600 dark:text-green-400 font-medium"},Boe={key:1},Voe={class:"mr-1 text-gray-600 dark:text-gray-400"},Hoe={class:"text-green-600 dark:text-green-400 font-medium"},Goe={key:2,class:"flex items-center"},joe={class:"text-blue-600 dark:text-blue-400 font-medium"},Woe={key:3},zoe={class:"mr-1 text-gray-600 dark:text-gray-400"},Qoe={class:"text-blue-600 dark:text-blue-400 font-medium"},Koe={key:0},Yoe={class:"flex flex-wrap gap-1"},Xoe={key:1},Joe={class:"text-gray-600 dark:text-gray-400"},Zoe={class:"px-3 py-2 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900 text-xs text-gray-500 dark:text-gray-400 flex-shrink-0"},eie=Je({__name:"PrestigeUpgradeSidepanel",emits:["select-upgrade"],setup(t,{emit:e}){const s=e,n=St(),{getTextColor:r}=Ga(),{showToast:o}=Us(),i=q({get:()=>!n.sidebarCollapsed,set:re=>n.sidebarCollapsed=!re}),c=Y(!0),u=[{id:"default",label:"Default"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"cost",label:"Cost"},{id:"level",label:"Level"}],d=q({get:()=>n.selectedSort,set:re=>n.selectedSort=re}),m=q({get:()=>n.sidebarActiveTab,set:re=>n.sidebarActiveTab=re}),f=q({get:()=>n.showUnlocked,set:re=>n.showUnlocked=re}),p=q({get:()=>n.showAffordable,set:re=>n.showAffordable=re}),g=q({get:()=>n.showMaxed,set:re=>n.showMaxed=re}),w=q({get:()=>n.searchQuery,set:re=>n.searchQuery=re}),C=q(()=>{const re=new Set;return n.evolutionUpgrades.forEach(J=>{re.add(J.category)}),Array.from(re)}),E=q(()=>{let re=[...n.evolutionUpgrades];if(m.value!=="all"&&(re=re.filter(J=>J.category===m.value)),f.value&&(re=re.filter(J=>jo(J.id,n.evolutionUpgrades))),p.value&&(re=re.filter(J=>n.evolutionPoints.gte(J.cost))),g.value&&(re=re.filter(J=>!J.maxLevel||J.level.lt(J.maxLevel))),w.value){const J=w.value.toLowerCase();re=re.filter(le=>le.name.toLowerCase().includes(J)||le.description.toLowerCase().includes(J))}switch(d.value){case"name":re.sort((J,le)=>J.name.localeCompare(le.name));break;case"category":re.sort((J,le)=>J.category.localeCompare(le.category));break;case"cost":re.sort((J,le)=>J.cost.lt(le.cost)?-1:J.cost.gt(le.cost)?1:0);break;case"level":re.sort((J,le)=>J.level.lt(le.level)?-1:J.level.gt(le.level)?1:0);break}return re}),k=re=>{s("select-upgrade",re),i.value=!1},A=()=>{i.value=!i.value},S=()=>{n.resetFilters()},T=re=>{const J=n.evolutionUpgrades.find(le=>le.id===re);return!(!J||!jo(re,n.evolutionUpgrades)||n.evolutionPoints.lt(J.cost)||J.maxLevel&&J.level.gte(J.maxLevel))},R=(re,J)=>{if(J.stopPropagation(),!T(re.id))return;n.purchaseUpgrade(re.id)?o(`Purchased ${re.name} for ${be(re.cost)} EP`,"success"):o("Failed to purchase upgrade","error")},L=(re,J)=>{if(J.stopPropagation(),!T(re.id))return;if(n.purchaseMaxUpgrades(re.id))o(`Purchased max levels of ${re.name}`,"success");else{const se=n.getUpgrade(re.id);se!=null&&se.maxLevel&&se.level.gte(se.maxLevel)?o(`${re.name} is already at max level`,"info"):n.evolutionPoints.lt((se==null?void 0:se.cost)??new Se(1/0))?o(`Not enough EP to purchase ${re.name}`,"warning"):o("Could not purchase max levels","error")}},P=re=>n.calculateMaxPurchasableLevels(re),I=re=>re.level.eq(0)?"Not purchased":re.maxLevel&&re.level.gte(re.maxLevel)?`Max level (${be(re.level,0)})`:`Level ${be(re.level,0)}${re.maxLevel?`/${be(re.maxLevel,0)}`:""}`,D=re=>re.level.gt(0)?re.maxLevel&&re.level.gte(re.maxLevel)?"text-purple-600 dark:text-purple-400":"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400",U=re=>n.evolutionPoints.gte(re.cost),M=re=>n.getUpgradeCount(re.id).gt(0)&&re.maxLevel&&re.level.gte(re.maxLevel)?"bg-emerald-500 text-white cursor-not-allowed opacity-50 text-xs":T(re.id)?"bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-500 text-white text-xs hover:shadow-sm":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed opacity-50 text-xs",x=re=>re.isAdditive===!0,$=re=>re.isMultiplier===!1,Z=re=>x(re)?"+":"",me=re=>re?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400";return(re,J)=>(h(),v("div",doe,[a("button",{onClick:A,class:K(["absolute z-20 top-4 bg-slate-700 dark:bg-slate-800 hover:bg-slate-600 dark:hover:bg-slate-700 text-white p-1 rounded-r-md shadow-md transition-all duration-300",i.value?"-right-16 -translate-x-full":"left-0"]),"aria-label":i.value?"Close upgrade list":"Open upgrade list"},[a("span",{class:K([i.value?"i-mdi-chevron-left":"i-mdi-chevron-right","w-5 h-5"])},null,2)],10,moe),a("div",{class:K(["h-full flex flex-col overflow-hidden transition-all duration-300 bg-white dark:bg-slate-800 border-r border-gray-200 dark:border-gray-700 shadow-md",[i.value?"max-w-[320px]":"max-w-0"]])},[a("div",{class:"p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900 flex items-center gap-4 flex-shrink-0"},[J[7]||(J[7]=a("h3",{class:"font-medium text-gray-800 dark:text-gray-200 flex-grow"},"Upgrade List",-1)),a("button",{onClick:S,class:"text-blue-500 dark:text-blue-400 text-sm hover:underline flex-shrink-0"}," Reset ")]),a("div",foe,[a("div",poe,[J[8]||(J[8]=a("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase flex-grow"},"Filters",-1)),a("button",{onClick:J[0]||(J[0]=le=>c.value=!c.value),class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[a("span",{class:K([c.value?"i-mdi-chevron-up":"i-mdi-chevron-down","w-4 h-4"])},null,2)])]),Ye(or,{name:"fade-fast"},{default:Rt(()=>[Ut(a("div",hoe,[a("div",goe,[Ut(a("input",{"onUpdate:modelValue":J[1]||(J[1]=le=>w.value=le),type:"text",placeholder:"Search upgrades...",class:"w-full px-3 py-1.5 pl-7 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"},null,512),[[xa,w.value]]),J[9]||(J[9]=a("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2 text-gray-500 dark:text-gray-400"},[a("span",{class:"i-mdi-magnify w-3.5 h-3.5"})],-1))]),a("div",null,[J[10]||(J[10]=a("label",{for:"sort-select",class:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Sort by",-1)),Ut(a("select",{id:"sort-select","onUpdate:modelValue":J[2]||(J[2]=le=>d.value=le),class:"w-full px-3 py-1.5 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"},[(h(),v(De,null,Ge(u,le=>a("option",{key:le.id,value:le.id},_(le.label),9,voe)),64))],512),[[Em,d.value]])]),a("div",null,[J[12]||(J[12]=a("label",{for:"category-select",class:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Category",-1)),Ut(a("select",{id:"category-select","onUpdate:modelValue":J[3]||(J[3]=le=>m.value=le),class:"w-full px-3 py-1.5 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"},[J[11]||(J[11]=a("option",{value:"all"},"All Categories",-1)),(h(!0),v(De,null,Ge(C.value,le=>(h(),v("option",{key:le,value:le},_(le.charAt(0).toUpperCase()+le.slice(1)),9,boe))),128))],512),[[Em,m.value]])]),a("div",yoe,[a("label",_oe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":J[4]||(J[4]=le=>f.value=le),class:"rounded text-blue-500 focus:ring-blue-500 mr-1.5"},null,512),[[ln,f.value]]),J[13]||(J[13]=oe(" Show unlocked only "))]),a("label",xoe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":J[5]||(J[5]=le=>p.value=le),class:"rounded text-blue-500 focus:ring-blue-500 mr-1.5"},null,512),[[ln,p.value]]),J[14]||(J[14]=oe(" Show affordable only "))]),a("label",koe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":J[6]||(J[6]=le=>g.value=le),class:"rounded text-blue-500 focus:ring-blue-500 mr-1.5"},null,512),[[ln,g.value]]),J[15]||(J[15]=oe(" Hide maxed upgrades "))])])],512),[[fl,c.value]])]),_:1})]),a("div",woe,[E.value.length===0?(h(),v("div",Eoe," No upgrades match your filters ")):(h(),v("div",Coe,[(h(!0),v(De,null,Ge(E.value,le=>(h(),v("div",{key:le.id,class:"border-b border-gray-100 dark:border-gray-700 last:border-0"},[a("div",Soe,[a("div",Toe,[a("div",{class:"flex-1 cursor-pointer",onClick:se=>k(le)},[a("div",Ioe,[a("span",{class:K([le.icon,"mr-2 text-base flex-shrink-0"])},null,2),a("div",null,[a("div",Poe,[oe(_(le.name)+" ",1),a("span",{class:K([me(x(le)),"ml-1 text-xs font-bold"])},_(Z(le)),3)]),a("div",Moe,[oe(_(le.category)+"  ",1),a("span",{class:K([D(le),"ml-1"])},_(I(le)),3)])])])],8,Aoe),a("div",$oe,[!le.maxLevel||le.level.lt(le.maxLevel)?(h(),v("button",{key:0,onClick:se=>R(le,se),disabled:!T(le.id),class:K(["px-2 py-0.5 rounded text-xs font-medium transition-colors focus:outline-none",M(le)])}," Buy ",10,Roe)):Q("",!0),T(le.id)&&(!le.maxLevel||le.level.lt(le.maxLevel))?(h(),v("button",{key:1,onClick:se=>L(le,se),class:"px-2 py-0.5 rounded text-xs font-medium transition-colors focus:outline-none bg-amber-600 hover:bg-amber-700 dark:bg-amber-700 dark:hover:bg-amber-600 text-white hover:shadow-sm"}," Max ("+_(P(le.id))+") ",9,Loe)):Q("",!0)])]),!le.maxLevel||le.level.lt(le.maxLevel)?(h(),v("div",Doe,[J[16]||(J[16]=a("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"Cost:",-1)),a("span",{class:K([U(le)?b(r)("evolutionPoints"):"text-red-500 dark:text-red-400","text-xs font-medium"])},_(b(be)(le.cost,0))+" EP ",3)])):Q("",!0),a("div",Noe,[a("div",Ooe,_(le.description),1),a("div",Foe,[le.level.gt(0)&&!le.isCombo?(h(),v("div",Uoe,[J[17]||(J[17]=a("span",{class:"text-gray-600 dark:text-gray-400 mr-1"},"Current:",-1)),a("span",{class:K([me(x(le)),"mr-1 font-semibold"])},_(Z(le)),3),a("span",qoe,_(le.formatEffect(le.effect(le.level))),1)])):Q("",!0),le.isCombo&&le.effects&&le.effects.length>0&&le.level.gt(0)?(h(),v("div",Boe,[J[18]||(J[18]=a("div",{class:"text-gray-600 dark:text-gray-400 mb-1"},"Current effects:",-1)),(h(!0),v(De,null,Ge(le.effects,(se,z)=>(h(),v("div",{key:z,class:"ml-2 flex items-center"},[a("span",{class:K([me($(se)),"mr-1 font-semibold"])},_($(se)?"+":""),3),a("span",Voe,_(se.target==="global"?"Global":se.target.charAt(0).toUpperCase()+se.target.slice(1))+": ",1),a("span",Hoe,_(se.formatEffect?se.formatEffect(se.multiplier(le.level)):le.formatEffect(se.multiplier(le.level))),1)]))),128))])):Q("",!0),(!le.maxLevel||le.level.lt(le.maxLevel))&&!le.isCombo?(h(),v("div",Goe,[J[19]||(J[19]=a("span",{class:"text-gray-600 dark:text-gray-400 mr-1"},"Next:",-1)),a("span",{class:K([me(x(le)),"mr-1 font-semibold"])},_(Z(le)),3),a("span",joe,_(le.formatEffect(le.effect(le.level.add(1)))),1)])):Q("",!0),le.isCombo&&le.effects&&le.effects.length>0&&(!le.maxLevel||le.level.lt(le.maxLevel))?(h(),v("div",Woe,[J[20]||(J[20]=a("div",{class:"text-gray-600 dark:text-gray-400 mb-1"},"Next level effects:",-1)),(h(!0),v(De,null,Ge(le.effects,(se,z)=>(h(),v("div",{key:z,class:"ml-2 flex items-center"},[a("span",{class:K([me($(se)),"mr-1 font-semibold"])},_($(se)?"+":""),3),a("span",zoe,_(se.target==="global"?"Global":se.target.charAt(0).toUpperCase()+se.target.slice(1))+": ",1),a("span",Qoe,_(se.formatEffect?se.formatEffect(se.multiplier(le.level.add(1))):le.formatEffect(se.multiplier(le.level.add(1)))),1)]))),128))])):Q("",!0)]),le.prerequisites&&le.prerequisites.length>0?(h(),v("div",Koe,[J[21]||(J[21]=a("div",{class:"text-gray-600 dark:text-gray-400 mb-1"},"Prerequisites:",-1)),a("div",Yoe,[(h(!0),v(De,null,Ge(le.prerequisites,se=>{var z;return h(),v("span",{key:se,class:K(["px-1 py-0.5 rounded-full text-xs",b(n).getUpgradeCount(se).gt(0)?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},_(((z=b(n).getUpgrade(se))==null?void 0:z.name)||se),3)}),128))])])):Q("",!0),le.ascensionRequirement&&le.ascensionRequirement>0?(h(),v("div",Xoe,[a("div",Joe," Requires "+_(le.ascensionRequirement)+" Ascension"+_(le.ascensionRequirement>1?"s":""),1)])):Q("",!0)])])]))),128))]))]),a("div",Zoe,_(E.value.length)+" upgrade"+_(E.value.length!==1?"s":"")+" found ",1)],2)]))}}),tie=Ct(eie,[["__scopeId","data-v-9c5c33be"]]),sie={class:"flex items-center mb-2"},nie={class:"font-bold text-gray-800 dark:text-gray-100"},rie={key:0,class:"ml-2 text-xs font-medium px-1.5 py-0.5 rounded bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300"},oie={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},iie={key:0,class:"text-xs mb-1"},aie={class:"text-green-600 dark:text-green-400"},lie={key:1,class:"text-xs mb-1"},cie={class:"mr-1"},uie={class:"text-green-600 dark:text-green-400"},die={key:2,class:"text-xs"},mie={key:0},fie={class:"text-blue-600 dark:text-blue-400"},pie={key:1},hie={class:"mr-1"},gie={class:"text-blue-600 dark:text-blue-400"},vie={key:3,class:"mt-2 text-xs"},bie={class:"mt-2 flex items-center gap-1"},yie={key:0,class:"text-xs font-medium px-1.5 py-0.5 rounded-full bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300"},_ie={key:1,class:"text-xs font-medium px-1.5 py-0.5 rounded-full bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300"},xie={key:2,class:"text-xs font-medium px-1.5 py-0.5 rounded-full bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300"},kie=Je({__name:"PrestigeUpgradeTooltip",props:{upgrade:{},anchorEl:{},scrollContainer:{}},setup(t){const e=t,s=St(),n=Wt(),r=Y(null),o=Y({top:0,left:0}),i=Y("top"),c=q(()=>{if(!e.upgrade)return!1;const g=e.upgrade;s.getUpgradeCount(g.id).gt(0);const w=g.prerequisites?g.prerequisites.every(S=>s.getUpgradeCount(S).gt(0)):!0,C=s.evolutionPoints.gte(g.cost),E=g.maxLevel&&g.level.gte(g.maxLevel),A=(g.ascensionRequirement||0)<=n.ascensionCount;return w&&C&&!E&&A}),u=g=>`${be(g)} EP`,d=()=>{if(!e.anchorEl)return;if(!r.value){vs(()=>{e.anchorEl&&r.value&&e.scrollContainer&&d()});return}if(!e.scrollContainer)return;const g=e.anchorEl.getBoundingClientRect(),w=r.value.getBoundingClientRect(),C=e.scrollContainer.getBoundingClientRect(),E=e.scrollContainer;if(w.width===0||w.height===0){vs(()=>{e.upgrade&&e.anchorEl&&d()});return}const k=10,A=g.top-C.top+E.scrollTop,S=g.left-C.left+E.scrollLeft,T=S+g.width,R=A+g.height,L=E.scrollWidth,P=E.scrollHeight,I=E.scrollTop,D=E.scrollLeft,U=I+C.height,M=D+C.width,x=A-I,$=M-T,Z=U-R,me=S-D,re=[{dir:"right",space:$,needed:w.width},{dir:"left",space:me,needed:w.width},{dir:"bottom",space:Z,needed:w.height},{dir:"top",space:x,needed:w.height}];let J="bottom",le=-1/0;for(const _e of re)_e.space>=_e.needed+k&&_e.space>le&&(le=_e.space,J=_e.dir);if(le===-1/0){const _e=re.find(Ee=>Ee.space>=Ee.needed+k);_e&&(J=_e.dir)}i.value=J;let se=0,z=0;switch(i.value){case"right":se=A+g.height/2-w.height/2,z=T+k;break;case"left":se=A+g.height/2-w.height/2,z=S-w.width-k;break;case"bottom":se=R+k,z=S+g.width/2-w.width/2;break;case"top":default:se=A-w.height-k,z=S+g.width/2-w.width/2;break}const ce=Math.max(k,Math.min(z,L-w.width-k)),pe=Math.max(k,Math.min(se,P-w.height-k));o.value={top:pe,left:ce}};dt(()=>[e.upgrade,e.anchorEl],async([g,w])=>{g&&w&&(await vs(),d())},{immediate:!0,deep:!0}),Et(async()=>{e.upgrade&&e.anchorEl&&(await vs(),d())});const m=g=>g.isAdditive===!0?"+":"",f=g=>g?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400",p=g=>g.isMultiplier===!1;return(g,w)=>(h(),Tt(or,{name:"tooltip-fade"},{default:Rt(()=>[g.upgrade?(h(),v("div",{key:0,ref_key:"tooltipRef",ref:r,class:K(["absolute z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3 max-w-xs tooltip-panel",`tooltip-${i.value}`]),style:yt({top:`${o.value.top}px`,left:`${o.value.left}px`})},[w[5]||(w[5]=a("div",{class:"tooltip-arrow"},null,-1)),a("div",sie,[a("span",{class:K([g.upgrade.icon,"mr-2 text-lg flex-shrink-0"])},null,2),a("h5",nie,_(g.upgrade.name),1),g.upgrade.level.gt(0)?(h(),v("span",rie," Level "+_(b(be)(g.upgrade.level,0))+_(g.upgrade.maxLevel?`/${b(be)(g.upgrade.maxLevel,0)}`:""),1)):Q("",!0)]),a("p",oie,_(g.upgrade.description),1),g.upgrade.level.gt(0)&&!g.upgrade.isCombo?(h(),v("div",iie,[w[0]||(w[0]=a("span",{class:"font-semibold"},"Current Effect:",-1)),a("span",{class:K([f(g.upgrade.isAdditive===!0),"mx-1 font-bold"])},_(m(g.upgrade)),3),a("span",aie,_(g.upgrade.formatEffect(g.upgrade.effect(g.upgrade.level))),1)])):Q("",!0),g.upgrade.isCombo&&g.upgrade.effects&&g.upgrade.effects.length>0&&g.upgrade.level.gt(0)?(h(),v("div",lie,[w[1]||(w[1]=a("div",{class:"font-semibold"},"Current Effects:",-1)),(h(!0),v(De,null,Ge(g.upgrade.effects,(C,E)=>(h(),v("div",{key:E,class:"ml-2 flex items-center"},[a("span",{class:K([f(p(C)),"mr-1 font-bold"])},_(p(C)?"+":""),3),a("span",cie,_(C.target==="global"?"Global":C.target.charAt(0).toUpperCase()+C.target.slice(1))+":",1),a("span",uie,_(C.formatEffect?C.formatEffect(C.multiplier(g.upgrade.level)):g.upgrade.formatEffect(C.multiplier(g.upgrade.level))),1)]))),128))])):Q("",!0),!g.upgrade.maxLevel||g.upgrade.level.lt(g.upgrade.maxLevel)?(h(),v("div",die,[g.upgrade.isCombo?Q("",!0):(h(),v("div",mie,[w[2]||(w[2]=a("span",{class:"font-semibold"},"Next Level:",-1)),a("span",{class:K([f(g.upgrade.isAdditive===!0),"mx-1 font-bold"])},_(m(g.upgrade)),3),a("span",fie,_(g.upgrade.formatEffect(g.upgrade.effect(g.upgrade.level.add(1)))),1)])),g.upgrade.isCombo&&g.upgrade.effects?(h(),v("div",pie,[w[3]||(w[3]=a("div",{class:"font-semibold"},"Next Level:",-1)),(h(!0),v(De,null,Ge(g.upgrade.effects,(C,E)=>(h(),v("div",{key:`next-${E}`,class:"ml-2 flex items-center"},[a("span",{class:K([f(p(C)),"mr-1 font-bold"])},_(p(C)?"+":""),3),a("span",hie,_(C.target==="global"?"Global":C.target.charAt(0).toUpperCase()+C.target.slice(1))+":",1),a("span",gie,_(C.formatEffect?C.formatEffect(C.multiplier(g.upgrade.level.add(1))):g.upgrade.formatEffect(C.multiplier(g.upgrade.level.add(1)))),1)]))),128))])):Q("",!0)])):Q("",!0),!g.upgrade.maxLevel||g.upgrade.level.lt(g.upgrade.maxLevel)?(h(),v("div",vie,[w[4]||(w[4]=a("span",{class:"font-semibold"},"Cost:",-1)),a("span",{class:K(c.value?"text-amber-600 dark:text-amber-400":"text-gray-600 dark:text-gray-400")},_(u(g.upgrade.cost)),3)])):Q("",!0),a("div",bie,[g.upgrade.level.gt(0)?(h(),v("span",yie," Purchased ")):Q("",!0),g.upgrade.maxLevel&&g.upgrade.level.gte(g.upgrade.maxLevel)?(h(),v("span",_ie," Max Level ")):c.value?(h(),v("span",xie," Affordable ")):Q("",!0)])],6)):Q("",!0)]),_:1}))}}),wie=Ct(kie,[["__scopeId","data-v-3b0d3454"]]),Eie={class:"flex flex-col gap-2 p-2"},Cie={class:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between w-full"},Sie={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex gap-1 border border-gray-200 dark:border-gray-700 flex-wrap"},Tie=["onClick","aria-current"],Aie={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1.5 px-2 flex items-center border border-gray-200 dark:border-gray-700 self-end sm:self-auto"},Iie={class:"flex gap-2 items-center flex-wrap justify-end"},Pie={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex gap-1 border border-gray-200 dark:border-gray-700"},Mie={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex gap-1 border border-gray-200 dark:border-gray-700"},$ie={class:"text-xs ml-1"},Rie={key:0,class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex border border-gray-200 dark:border-gray-700"},Lie=["aria-label","title"],Die={key:0,class:"i-mdi-fullscreen w-4 h-4"},Nie={key:1,class:"i-mdi-fullscreen-exit w-4 h-4"},Oie={class:"w-full relative",style:{"z-index":"1"}},Fie={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1.5 border border-gray-200 dark:border-gray-700 w-full sm:max-w-md"},Uie={class:"relative flex max-h-[80vh] overflow-hidden"},qie=["id"],Bie={class:"relative z-10 min-w-max min-h-max"},Vie={key:0,class:"text-center text-gray-500 dark:text-gray-400 italic py-4"},Hie=["data-id","onClick","onMouseenter","onKeyup","aria-label","aria-describedby","tabindex"],Gie=["title"],jie={class:"text-[10px] sm:text-xs font-semibold text-center overflow-hidden text-ellipsis leading-tight line-clamp-2 min-h-[1.8rem] px-1"},Wie=["title"],zie={key:2,class:"absolute -top-2 -right-2 bg-emerald-600 dark:bg-emerald-500 text-white dark:text-gray-900 rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center shadow-md opacity-80"},Qie=["title"],Kie={key:4,class:"absolute -top-2 -right-2 rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center shadow-md bg-emerald-500 dark:bg-emerald-400 text-white dark:text-gray-900",title:"Purchased"},Yie=["id"],Xie=["id"],Jie={key:1,class:"w-20 h-20 sm:w-24 sm:h-24 opacity-0 flex-shrink-0"},Zie=["aria-labelledby","aria-describedby"],eae={class:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4"},tae={class:"flex-grow pr-6"},sae={class:"flex items-center mb-2"},nae=["id"],rae={key:0,class:"ml-3 text-xs font-medium px-1.5 py-0.5 rounded bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300"},oae=["id"],iae={class:"space-y-1.5"},aae={key:0,class:"text-sm"},lae={class:"text-green-600 dark:text-green-400"},cae={key:1,class:"text-sm"},uae={class:"mr-1"},dae={class:"text-green-600 dark:text-green-400"},mae={key:2,class:"text-sm"},fae={class:"text-blue-600 dark:text-blue-400"},pae={key:3,class:"text-sm"},hae={class:"mr-1"},gae={class:"text-blue-600 dark:text-blue-400"},vae={class:"text-left sm:text-right flex-shrink-0 w-full sm:w-auto space-y-2 mt-3 sm:mt-0"},bae={class:"text-sm font-semibold"},yae={key:0,class:"text-amber-600 dark:text-amber-400"},_ae={key:1,class:"text-emerald-600 dark:text-emerald-400"},xae={class:"flex flex-col sm:flex-row sm:justify-end gap-2"},kae=["disabled"],wae={key:0,class:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700/50"},Eae={class:"flex flex-wrap gap-1"},Cae={key:1,class:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700/50"},Sae={class:"flex items-center"},Tae={key:2,class:"mt-3 text-sm text-red-600 dark:text-red-400"},Aae={key:0},Iae={key:1},Pae={key:2},Mae=Je({__name:"PrestigeUpgradeTree",props:IO({upgrades:{},availableCategories:{}},{category:{required:!0},categoryModifiers:{}}),emits:["update:category"],setup(t){const e=t,s=XO(t,"category"),n=St(),r=Wt(),{showToast:o}=Us(),{getCurrencyClasses:i}=Ga(),c=Y(null),u=Y(null),d=Y(window.innerWidth<640);let m=null;const f=Y(null),p=Y(null),g=Y(new Map),w=Y(null),C=q({get:()=>n.currentMode,set:j=>n.currentMode=j}),E=Y(jt.isFullscreen),k=q({get:()=>n.zoomLevel,set:j=>n.zoomLevel=j}),A=Y(!1),S=Y(null),T=Y(null),R=Y(!1),L=Y(null),P=q(()=>i("evolutionPoints"));q(()=>{const j=new Map;return e.upgrades.forEach(B=>{var ie;if(B.category===s.value&&B.position){const V=B.position.row;j.has(V)||j.set(V,[]),(ie=j.get(V))==null||ie.push(B)}}),j.forEach(B=>{B.sort((ie,V)=>{var O,te;return(((O=ie.position)==null?void 0:O.col)??0)-(((te=V.position)==null?void 0:te.col)??0)})}),Array.from(j.entries()).sort(([B],[ie])=>B-ie)});const I=q(()=>{const j=new Map;e.upgrades.forEach(ie=>{var V;if(ie.category===s.value&&ie.position){const O=ie.position.row,te=ie.position.col;j.has(O)||j.set(O,new Map),(V=j.get(O))==null||V.set(te,ie)}});const B=new Map;return j.forEach((ie,V)=>{const O=Array.from(ie.keys()),te=Math.min(...O),G=Math.max(...O),ne=[];for(let he=te;he<=G;he++){const ye=ie.get(he)||null;ne.push({upgrade:ye,col:he})}B.set(V,ne)}),Array.from(B.entries()).sort(([ie],[V])=>ie-V)}),D=q(()=>n.evolutionUpgrades),U=q(()=>{if(!u.value)return"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700";const j=u.value.id,B=n.getUpgradeCount(j).gt(0),ie=Ee(j);return B?"bg-emerald-50 dark:bg-emerald-900/50 border-emerald-400 dark:border-emerald-500":ie?"bg-amber-50 dark:bg-amber-900/50 border-amber-400 dark:border-amber-500":"bg-gray-100 dark:bg-gray-800/80 border-gray-300 dark:border-gray-600 opacity-95"}),M=()=>{jt.isEnabled&&c.value?jt.toggle(c.value).catch(j=>{console.error("Failed to toggle fullscreen:",j),o("Could not enter fullscreen mode.","error")}):jt.isEnabled?c.value||console.warn("Component root ref not available for fullscreen toggle."):o("Fullscreen is not supported by your browser or is disabled.","warning")},x=()=>{k.value=Math.min(k.value+.25,3),me()},$=()=>{k.value=Math.max(k.value-.25,.5),me()},Z=()=>{k.value=1,me()},me=()=>{if(!f.value)return;const j=f.value.querySelector(".min-w-max");if(j){if(k.value>1){const B=k.value;f.value.style.setProperty("--zoom-scale",B.toString()),j.classList.add("zoomed")}else f.value.style.setProperty("--zoom-scale",k.value.toString()),j.classList.remove("zoomed");j.style.transform=`scale(${k.value})`,setTimeout(()=>{Re()},300)}},re=()=>{E.value=jt.isFullscreen},J=j=>{switch(C.value){case"view":ce(j);break;case"buy":Ee(j.id)?se(j):o("Cannot purchase this upgrade.","warning");break;case"max":Ee(j.id)?z(j):o("Cannot purchase max levels of this upgrade.","warning");break}},le=j=>{C.value=j},se=j=>{if(!Ee(j.id))return;n.purchaseUpgrade(j.id)?o(`Purchased ${j.name} for ${be(j.cost)} EP`,"success"):o("Failed to purchase upgrade","error")},z=j=>{if(!Ee(j.id))return;if(n.purchaseMaxUpgrades(j.id))o(`Purchased max levels of ${j.name}`,"success");else{const ie=n.getUpgrade(j.id);ie!=null&&ie.maxLevel&&ie.level.gte(ie.maxLevel)?o(`${j.name} is already at max level`,"info"):n.evolutionPoints.lt((ie==null?void 0:ie.cost)??1/0)?o(`Not enough EP to purchase ${j.name}`,"warning"):_e(j.id)?o("Could not purchase max levels","error"):o(`Prerequisites not met for ${j.name}`,"warning")}},ce=j=>{document.activeElement instanceof HTMLElement&&document.activeElement.classList.contains("prestige-node")?w.value=document.activeElement:w.value=null,u.value=j},pe=()=>{u.value=null,vs(()=>{w.value&&w.value.focus()})},_e=j=>{const B=n.getUpgrade(j);return!(B!=null&&B.prerequisites)||B.prerequisites.length===0?!0:B.prerequisites.every(ie=>n.getUpgradeCount(ie).gt(0))},Ee=j=>{const B=D.value.find(ie=>ie.id===j);return!(!B||!jo(j,D.value)||n.evolutionPoints.lt(B.cost)||B.maxLevel&&B.level.gte(B.maxLevel))},Ue=j=>{const B=j.id,ie=n.getUpgradeCount(B).gt(0),V=Ee(B),O=_e(B),te=j.maxLevel&&j.level.gte(j.maxLevel),G=j.ascensionRequirement||0,ne=G>0,he=ne?r.ascensionCount>=G:!0;let ye="border-2 ",ae="",de="transition-all ";return ie?te?(ae="bg-emerald-100 dark:bg-emerald-900 border-emerald-300 dark:border-emerald-700 shadow-md shadow-emerald-400/20 dark:shadow-emerald-600/20 opacity-90 ",de+="cursor-not-allowed"):V?(ae="bg-emerald-50 dark:bg-emerald-900/70 border-emerald-400 dark:border-emerald-500 shadow-lg shadow-emerald-400/30 dark:shadow-emerald-500/30 ",ae+="ring-1 ring-amber-500 ring-offset-1 ring-offset-emerald-50 dark:ring-offset-emerald-900/70 ",de+="cursor-pointer hover:shadow-xl hover:shadow-emerald-400/40 dark:hover:shadow-emerald-500/40 hover:scale-105"):(ae="bg-emerald-50 dark:bg-emerald-900/60 border-emerald-400 dark:border-emerald-600 shadow-md shadow-emerald-400/25 dark:shadow-emerald-500/25 ",de+="cursor-pointer hover:shadow-lg hover:shadow-emerald-400/35 dark:hover:shadow-emerald-500/35 hover:scale-105"):V?(ae="bg-amber-50 dark:bg-amber-900/50 border-amber-400 dark:border-amber-500 shadow-md shadow-amber-400/30 dark:shadow-amber-300/30 ",de+="cursor-pointer hover:shadow-lg hover:shadow-amber-400/40 dark:hover:shadow-amber-300/40 hover:scale-105"):O&&he?(ae="bg-gray-100 dark:bg-gray-800/80 border-gray-300 dark:border-gray-600 opacity-90 ",de+="cursor-not-allowed"):ne&&!he?(ae="bg-gray-100 dark:bg-gray-900/60 border-purple-300 dark:border-purple-700 opacity-70 filter grayscale ",ae+="ring-1 ring-purple-400/30 dark:ring-purple-500/30 ",de+="cursor-not-allowed"):(ae="bg-gray-100 dark:bg-gray-900/60 border-gray-200 dark:border-gray-700 opacity-60 filter grayscale ",de+="cursor-not-allowed"),ye+ae+de},ze=j=>n.getUpgradeCount(j.id).gt(0)?"bg-emerald-500 text-white cursor-not-allowed font-bold":Ee(j.id)?"bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-500 text-white font-bold hover:shadow-md":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed",Re=H0(()=>{d.value=window.innerWidth<640,$e()},150),$e=async()=>{var ye;if(m=(ye=c.value)==null?void 0:ye.querySelector(`#connections-svg-${s.value}`),!m)return;m.innerHTML="",await vs();const j=f.value;if(!j){console.warn("Tree scroll container ref not found for drawing connections.");return}const B=j.querySelectorAll(".prestige-node")??[];if(B.length===0)return;const ie=new Map;let V=0,O=0;const te=[],G=j.getBoundingClientRect(),ne=j.scrollTop,he=j.scrollLeft;if(B.forEach(ae=>{const Me=ae.getBoundingClientRect();te.push(Me),V=Math.max(V,Me.right-G.left+he),O=Math.max(O,Me.bottom-G.top+ne)}),V>0&&O>0)m.style.width=`${V+20}px`,m.style.height=`${O+20}px`;else{m.style.width="0px",m.style.height="0px";return}B.forEach((ae,de)=>{const Me=ae.getAttribute("data-id");if(Me){const Le=te[de];if(Le.width>0&&Le.height>0){const it=Le.left-G.left+he+Le.width/2,Ze=Le.top-G.top+ne+Le.height/2;ie.set(Me,new DOMRect(it,Ze,Le.width,Le.height))}}}),e.upgrades.forEach(ae=>{var Me;if(ae.category!==s.value)return;const de=ie.get(ae.id);de&&((Me=ae.prerequisites)==null||Me.forEach(Le=>{const it=D.value.find(pt=>pt.id===Le),Ze=ie.get(Le);if(it&&Ze){if(![Ze.x,Ze.y,de.x,de.y].every(nt=>Number.isFinite(nt))){console.warn(`Invalid coordinates for connection ${Le} -> ${ae.id}, skipping.`);return}const ft=document.createElementNS("http://www.w3.org/2000/svg","line");ft.setAttribute("x1",Ze.x.toString()),ft.setAttribute("y1",Ze.y.toString()),ft.setAttribute("x2",de.x.toString()),ft.setAttribute("y2",de.y.toString());const Ve=n.getUpgradeCount(Le).gt(0),ke=n.getUpgradeCount(ae.id).gt(0),Fe=_e(ae.id),Ae=d.value?"1.5px":"3px",We=d.value?"1px":"2px";Ve&&ke?(ft.setAttribute("class","stroke-emerald-500 dark:stroke-emerald-400"),ft.setAttribute("stroke-width",Ae)):Ve&&Fe?(ft.setAttribute("class","stroke-amber-400 dark:stroke-amber-300"),ft.setAttribute("stroke-width",Ae),ft.setAttribute("stroke-dasharray",d.value?"3,3":"5,5")):(ft.setAttribute("class","stroke-gray-300 dark:stroke-gray-600 opacity-60"),ft.setAttribute("stroke-width",We)),m==null||m.appendChild(ft)}}))})},Ce=()=>{d.value=window.innerWidth<640,d.value&&R.value&&(R.value=!1,S.value=null,T.value=null),Re()},Oe=async j=>{var ie;j.category!==s.value&&(s.value=j.category,await vs(),await new Promise(V=>setTimeout(V,150))),await vs();const B=Array.from(((ie=f.value)==null?void 0:ie.querySelectorAll(".prestige-node"))||[]).find(V=>V.dataset.id===j.id);if(B){g.value.has(j.id)||g.value.set(j.id,B),B.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),B.classList.add("pulse-highlight");const V=j.id;ve.has(V)&&clearTimeout(ve.get(V));const O=setTimeout(()=>{B.classList.remove("pulse-highlight"),ve.delete(V)},4e3);ve.set(V,O),B.focus(),o(`Found: ${j.name}`,"success")}else o(`Could not locate upgrade: ${j.name}`,"warning"),console.warn(`Upgrade button not found for ID: ${j.id} in category ${j.category}`)},ve=new Map,fe=j=>{Oe(j),setTimeout(()=>{ce(j)},300)};Et(async()=>{var j;await vs(),f.value?(Re(),me()):console.warn(`Tree container ref not found on mount for category: ${s.value}`),window.addEventListener("resize",Ce),dt(()=>n.evolutionPoints,Re),dt(()=>I.value,Re,{deep:!0}),dt(()=>k.value,me),g.value=new Map,(j=f.value)==null||j.querySelectorAll(".prestige-node").forEach(B=>{const ie=B,V=ie.dataset.id;V&&g.value.set(V,ie)}),dt(u,(B,ie)=>{vs(()=>{B&&p.value?(o3(p,pe,{ignore:[w.value]}),p.value.focus()):!B&&ie&&p.value})},{immediate:!1}),jt.isEnabled&&jt.on("change",re)}),dt(s,()=>{vs(()=>{var j;g.value=new Map,(j=f.value)==null||j.querySelectorAll(".prestige-node").forEach(B=>{const ie=B,V=ie.dataset.id;V&&g.value.set(V,ie)}),Re(),u.value=null})},{immediate:!1}),xn(()=>{window.removeEventListener("resize",Ce),w.value=null,jt.isEnabled&&jt.off("change",re),L.value!==null&&(clearTimeout(L.value),L.value=null)});const X=j=>`${be(j)} EP`,H=j=>j.prerequisites?j.prerequisites.map(B=>{var ie;return((ie=D.value.find(V=>V.id===B))==null?void 0:ie.name)||B}):[],W=(j,B)=>{j?g.value.set(B,j):g.value.delete(B)};Hc("componentRootRef",c);const ge=j=>j.isAdditive===!0,Te=j=>j.isMultiplier===!1,Ie=j=>ge(j)?"+":"",Ne=j=>j?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400",je=(j,B)=>{if(d.value)return;L.value!==null&&clearTimeout(L.value);const ie=B.currentTarget;L.value=window.setTimeout(()=>{S.value=j,T.value=ie,R.value=!0,L.value=null},300)},N=()=>{L.value!==null&&(clearTimeout(L.value),L.value=null),setTimeout(()=>{R.value=!1,S.value=null,T.value=null},100)},ue=()=>{R.value=!1,S.value=null,T.value=null};return(j,B)=>(h(),v("div",{ref_key:"componentRootRef",ref:c,class:"relative w-full min-h-[80vh] border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/50 shadow-inner"},[a("div",Eie,[a("div",Cie,[a("div",Sie,[(h(!0),v(De,null,Ge(j.availableCategories,ie=>(h(),v("button",{key:`quick-${ie}`,onClick:V=>s.value=ie,class:K(["px-2 py-1 rounded text-xs font-medium transition-colors focus:outline-none focus:ring-1 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-blue-500 capitalize",s.value===ie?"bg-blue-100 dark:bg-blue-900/60 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"]),"aria-current":s.value===ie?"page":void 0},_(ie),11,Tie))),128))]),a("div",Aie,[a("span",{class:K([P.value.icon,"i-heroicons-sparkles mr-1 w-4 h-4"])},null,2),a("span",{class:K([P.value.text,"text-xs font-semibold whitespace-nowrap"])},_(b(be)(b(n).evolutionPoints))+" EP ",3)])]),a("div",Iie,[a("div",Pie,[a("button",{onClick:B[0]||(B[0]=ie=>le("view")),class:K(["p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-blue-500",C.value==="view"?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"]),"aria-label":"Set mode to View Details",title:"View Details (Click to open panel)"},B[8]||(B[8]=[a("span",{class:"i-mdi-information-outline w-4 h-4"},null,-1)]),2),a("button",{onClick:B[1]||(B[1]=ie=>le("buy")),class:K(["p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-emerald-500",C.value==="buy"?"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"]),"aria-label":"Set mode to Buy Single",title:"Buy Single (Click to purchase one level)"},B[9]||(B[9]=[a("span",{class:"i-mdi-cart-plus w-4 h-4"},null,-1)]),2),a("button",{onClick:B[2]||(B[2]=ie=>le("max")),class:K(["p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-amber-500",C.value==="max"?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"]),"aria-label":"Set mode to Buy Max",title:"Buy Max (Click to purchase max affordable levels)"},B[10]||(B[10]=[a("span",{class:"i-mdi-cart-arrow-down w-4 h-4"},null,-1)]),2)]),a("div",Mie,[a("button",{onClick:x,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom In",title:"Zoom In (+25%)"},B[11]||(B[11]=[a("span",{class:"i-mdi-magnify-plus-outline w-4 h-4"},null,-1)])),a("button",{onClick:Z,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Reset Zoom",title:"Reset Zoom (100%)"},[B[12]||(B[12]=a("span",{class:"i-mdi-magnify-scan w-4 h-4"},null,-1)),a("span",$ie,_(Math.round(k.value*100))+"%",1)]),a("button",{onClick:$,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom Out",title:"Zoom Out (-25%)"},B[13]||(B[13]=[a("span",{class:"i-mdi-magnify-minus-outline w-4 h-4"},null,-1)]))]),b(jt).isEnabled?(h(),v("div",Rie,[a("button",{onClick:M,class:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500","aria-label":E.value?"Exit Fullscreen":"Enter Fullscreen",title:E.value?"Exit Fullscreen":"Enter Fullscreen"},[E.value?(h(),v("span",Nie)):(h(),v("span",Die))],8,Lie)])):Q("",!0)]),a("div",Oie,[a("div",Fie,[Ye(uoe,{onSelect:Oe})])])]),a("div",Uie,[Ye(tie,{collapsed:A.value,"onUpdate:collapsed":B[3]||(B[3]=ie=>A.value=ie),onSelectUpgrade:fe},null,8,["collapsed"]),a("div",{ref_key:"treeContainerRef",ref:f,class:"relative flex-1 overflow-auto rounded-lg p-2 sm:p-4 tree-scroll-container",onScroll:B[4]||(B[4]=(...ie)=>b(Re)&&b(Re)(...ie)),onClick:xt(pe,["self"]),style:{"max-height":"80vh","--zoom-scale":"1"}},[(h(),v("svg",{id:`connections-svg-${s.value}`,class:"absolute inset-0 pointer-events-none z-0"},null,8,qie)),a("div",Bie,[I.value.length===0?(h(),v("p",Vie," No upgrades found with position data for the '"+_(s.value)+"' category. ",1)):Q("",!0),(h(!0),v(De,null,Ge(I.value,([ie,V])=>(h(),v("div",{key:`${s.value}-row-${ie}`,class:"flex flex-row justify-start items-center my-8 gap-12"},[(h(!0),v(De,null,Ge(V,({upgrade:O,col:te},G)=>(h(),v(De,{key:`${s.value}-row-${ie}-col-${te}`},[O?(h(),v("button",{key:0,ref_for:!0,ref:ne=>W(ne,O.id),class:"prestige-node relative z-10","data-id":O.id,onClick:ne=>{J(O),ue()},onMouseenter:ne=>je(O,ne),onMouseleave:N,onKeyup:Pl(ne=>J(O),["enter"]),"aria-label":`${O.name}. ${b(n).getUpgradeCount(O.id).gt(0)?O.maxLevel&&O.level.gte(O.maxLevel)?"Purchased (Max Level)":"Purchased":Ee(O.id)?"Available for purchase":"Locked"}`,"aria-describedby":`${O.id}-cost ${O.id}-prereqs`,tabindex:Ee(O.id)||b(n).getUpgradeCount(O.id).gt(0)&&(!O.maxLevel||O.level.lt(O.maxLevel))?0:-1},[a("div",{class:K(["w-20 h-20 sm:w-24 sm:h-24 rounded-lg flex flex-col items-center justify-center p-1 sm:p-2 transition-all focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 relative",[Ue(O)]])},[a("div",{class:K(["absolute top-1 right-1 text-[10px] font-bold px-1 rounded-full",Ne(ge(O))])},_(Ie(O)),3),a("div",{class:K(["absolute top-1 left-1 text-[9px] sm:text-[10px] px-1 rounded-sm bg-black/10 dark:bg-white/10 shadow-sm",O.level.gt(0)?"text-emerald-700 dark:text-emerald-300 font-medium":"text-gray-600 dark:text-gray-400"])}," Lvl "+_(b(be)(O.level,0))+_(O.maxLevel?`/${b(be)(O.maxLevel,0)}`:""),3),O.ascensionRequirement&&O.ascensionRequirement>0?(h(),v("div",{key:0,class:K(["absolute top-6 right-1 text-[8px] sm:text-[9px] px-1 rounded-sm bg-black/10 dark:bg-white/10 shadow-sm flex items-center",b(r).ascensionCount>=(O.ascensionRequirement||0)?"text-purple-700 dark:text-purple-300 font-medium":"text-red-600 dark:text-red-400"]),title:`Requires ${O.ascensionRequirement} Ascension${O.ascensionRequirement>1?"s":""}`},[B[14]||(B[14]=a("span",{class:"i-mdi-arrow-up-bold-circle-outline w-3 h-3 mr-0.5"},null,-1)),a("span",null,_(O.ascensionRequirement),1)],10,Gie)):Q("",!0),a("div",{class:K([O.icon,"text-xl sm:text-2xl mb-0.5 sm:mb-1 flex-shrink-0"])},null,2),a("div",jie,_(O.name),1),O.level.gt(0)?(h(),v("div",{key:1,class:"absolute bottom-1 left-1/2 -translate-x-1/2 text-[8px] sm:text-[9px] px-1 rounded-sm bg-gray-200/90 dark:bg-gray-900/80 text-gray-800 dark:text-gray-200 font-semibold shadow-sm whitespace-nowrap",title:`Current effect: ${O.formatEffect(O.effect(O.level))}`},_(O.formatEffect(O.effect(O.level))),9,Wie)):Q("",!0),O.maxLevel&&O.level.gte(O.maxLevel)?(h(),v("div",zie,B[15]||(B[15]=[a("span",{class:"i-mdi-check-all text-xs sm:text-sm",title:"Max Level Reached"},null,-1)]))):Ee(O.id)?(h(),v("div",{key:3,class:"absolute -top-2 -right-2 rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center shadow-md bg-amber-500 dark:bg-amber-400 text-white dark:text-gray-900 animate-pulse",title:b(n).getUpgradeCount(O.id).gt(0)?"Next level affordable":"Affordable"},B[16]||(B[16]=[a("span",{class:"i-mdi-plus text-xs sm:text-sm"},null,-1)]),8,Qie)):b(n).getUpgradeCount(O.id).gt(0)?(h(),v("div",Kie,B[17]||(B[17]=[a("span",{class:"i-mdi-check text-xs sm:text-sm"},null,-1)]))):Q("",!0),!O.maxLevel||O.level.lt(O.maxLevel)?(h(),v("div",{key:5,class:K(["absolute -bottom-3 -right-2 rounded-full text-[9px] sm:text-[10px] px-1 font-bold shadow-md",{"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300":Ee(O.id),"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300":b(n).getUpgradeCount(O.id).gt(0)&&!Ee(O.id),"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200":b(n).getUpgradeCount(O.id).lte(0)&&!Ee(O.id)}])},[oe(_(b(be)(O.cost))+" ",1),a("span",{id:`${O.id}-cost`,class:"sr-only"}," Cost: "+_(X(O.cost))+". ",9,Yie)],2)):Q("",!0),a("span",{id:`${O.id}-prereqs`,class:"sr-only"},_(O.prerequisites&&O.prerequisites.length>0?`Requires: ${H(O).join(", ")}.`:"No prerequisites."),9,Xie)],2)],40,Hie)):(h(),v("div",Jie))],64))),128))]))),128))]),!d.value&&R.value?(h(),Tt(wie,{key:0,upgrade:S.value,"anchor-el":T.value,"scroll-container":f.value},null,8,["upgrade","anchor-el","scroll-container"])):Q("",!0)],544)]),Ye(or,{name:"fade"},{default:Rt(()=>[u.value?(h(),v("div",{key:0,class:"fixed inset-0 z-30 flex items-center justify-center p-4 bg-black/50 dark:bg-black/60 backdrop-blur-sm",onClick:pe},[a("div",{ref_key:"detailsPanelRef",ref:p,role:"dialog","aria-modal":"true","aria-labelledby":`details-title-${u.value.id}`,"aria-describedby":`details-desc-${u.value.id}`,tabindex:"-1",class:K(["relative rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-2xl max-h-[60vh] overflow-y-auto z-40 border-2 focus:outline-none focus:ring-2 focus:ring-emerald-500",U.value]),onClick:B[7]||(B[7]=xt(()=>{},["stop"])),onKeydown:Pl(pe,["esc"])},[a("button",{onClick:pe,class:"absolute top-2 right-2 p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 dark:focus:ring-offset-gray-800","aria-label":"Close details"},B[18]||(B[18]=[a("span",{class:"i-mdi-close w-5 h-5"},null,-1)])),a("div",eae,[a("div",tae,[a("div",sae,[a("span",{class:K([u.value.icon,"mr-2 text-xl sm:text-2xl flex-shrink-0"])},null,2),a("h4",{id:`details-title-${u.value.id}`,class:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100"},_(u.value.name),9,nae),u.value.level.gt(0)?(h(),v("span",rae," Level "+_(b(be)(u.value.level,0))+_(u.value.maxLevel?`/${b(be)(u.value.maxLevel,0)}`:""),1)):Q("",!0)]),a("p",{id:`details-desc-${u.value.id}`,class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base mb-3 sm:mb-4"},_(u.value.description),9,oae),a("div",iae,[u.value.level.gt(0)&&!u.value.isCombo?(h(),v("div",aae,[B[19]||(B[19]=a("span",{class:"font-semibold"},"Current Effect:",-1)),a("span",{class:K([Ne(ge(u.value)),"mx-1 font-bold"])},_(Ie(u.value)),3),a("span",lae,_(u.value.formatEffect(u.value.effect(u.value.level))),1)])):Q("",!0),u.value.isCombo&&u.value.effects&&u.value.effects.length>0&&u.value.level.gt(0)?(h(),v("div",cae,[B[20]||(B[20]=a("div",{class:"font-semibold mb-1"},"Current Effects:",-1)),(h(!0),v(De,null,Ge(u.value.effects,(ie,V)=>(h(),v("div",{key:V,class:"ml-2 flex items-center"},[a("span",{class:K([Ne(Te(ie)),"mr-1 font-bold"])},_(Te(ie)?"+":""),3),a("span",uae,_(ie.target==="global"?"Global Production":ie.target.charAt(0).toUpperCase()+ie.target.slice(1))+":",1),a("span",dae,_(ie.formatEffect?ie.formatEffect(ie.multiplier(u.value.level)):u.value.formatEffect(ie.multiplier(u.value.level))),1)]))),128))])):Q("",!0),(!u.value.maxLevel||u.value.level.lt(u.value.maxLevel))&&!u.value.isCombo?(h(),v("div",mae,[B[21]||(B[21]=a("span",{class:"font-semibold"},"Next Level Effect:",-1)),a("span",{class:K([Ne(ge(u.value)),"mx-1 font-bold"])},_(Ie(u.value)),3),a("span",fae,_(u.value.formatEffect(u.value.effect(u.value.level.add(1)))),1)])):Q("",!0),u.value.isCombo&&u.value.effects&&u.value.effects.length>0&&(!u.value.maxLevel||u.value.level.lt(u.value.maxLevel))?(h(),v("div",pae,[B[22]||(B[22]=a("div",{class:"font-semibold mb-1"},"Next Level Effects:",-1)),(h(!0),v(De,null,Ge(u.value.effects,(ie,V)=>(h(),v("div",{key:V,class:"ml-2 flex items-center"},[a("span",{class:K([Ne(Te(ie)),"mr-1 font-bold"])},_(Te(ie)?"+":""),3),a("span",hae,_(ie.target==="global"?"Global Production":ie.target.charAt(0).toUpperCase()+ie.target.slice(1))+":",1),a("span",gae,_(ie.formatEffect?ie.formatEffect(ie.multiplier(u.value.level.add(1))):u.value.formatEffect(ie.multiplier(u.value.level.add(1)))),1)]))),128))])):Q("",!0)])]),a("div",vae,[a("div",bae,[!u.value.maxLevel||u.value.level.lt(u.value.maxLevel)?(h(),v("span",yae," Cost: "+_(X(u.value.cost)),1)):(h(),v("span",_ae," Max Level Reached "))]),a("div",xae,[(!u.value.maxLevel||u.value.level.lt(u.value.maxLevel))&&Ee(u.value.id)?(h(),v("button",{key:0,onClick:B[5]||(B[5]=xt(ie=>z(u.value),["stop"])),class:K(["px-3 py-1.5 rounded text-sm font-semibold transition-colors w-full sm:w-auto text-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:focus:ring-offset-gray-800",ze(u.value)]),title:"Purchase maximum affordable levels"}," Buy Max ("+_(b(n).calculateMaxPurchasableLevels(u.value.id))+") ",3)):Q("",!0),a("button",{onClick:B[6]||(B[6]=xt(ie=>se(u.value),["stop"])),class:K(["px-3 py-1.5 rounded text-sm font-semibold transition-colors w-full sm:w-auto text-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 dark:focus:ring-offset-gray-800",ze(u.value)]),disabled:u.value===null?!0:!Ee(u.value.id)||u.value.maxLevel!=null&&u.value.level.gte(u.value.maxLevel)},_(b(n).getUpgradeCount(u.value.id).gt(0)&&(!u.value.maxLevel||u.value.level.lt(u.value.maxLevel))?"Buy Next":b(n).getUpgradeCount(u.value.id).gt(0)?"Purchased":"Purchase"),11,kae)])])]),u.value.prerequisites&&u.value.prerequisites.length>0?(h(),v("div",wae,[B[23]||(B[23]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1"},"Prerequisites:",-1)),a("div",Eae,[(h(!0),v(De,null,Ge(H(u.value),ie=>{var V;return h(),v("span",{key:ie,class:K(["text-xs px-1.5 py-0.5 rounded-full",b(n).getUpgradeCount(((V=D.value.find(O=>O.name===ie))==null?void 0:V.id)||"").gt(0)?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},_(ie),3)}),128))])])):Q("",!0),u.value.ascensionRequirement&&u.value.ascensionRequirement>0?(h(),v("div",Cae,[B[25]||(B[25]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1"},"Ascension Requirement:",-1)),a("div",Sae,[B[24]||(B[24]=a("span",{class:"i-mdi-arrow-up-bold-circle text-purple-500 dark:text-purple-400 mr-1"},null,-1)),a("span",{class:K(["text-xs px-1.5 py-0.5 rounded-full",b(r).ascensionCount>=(u.value.ascensionRequirement||0)?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},_(u.value.ascensionRequirement)+" Ascension"+_(u.value.ascensionRequirement>1?"s":""),3)])])):Q("",!0),!b(n).getUpgradeCount(u.value.id).gt(0)&&!Ee(u.value.id)?(h(),v("div",Tae,[u.value.ascensionRequirement&&u.value.ascensionRequirement>0&&b(r).ascensionCount<(u.value.ascensionRequirement||0)?(h(),v("span",Aae," Requires "+_(u.value.ascensionRequirement)+" Ascension"+_(u.value.ascensionRequirement>1?"s":"")+". ",1)):_e(u.value.id)?b(n).evolutionPoints.lt(u.value.cost)?(h(),v("span",Pae,"Not enough Evolution Points.")):Q("",!0):(h(),v("span",Iae,"Prerequisites not met."))])):Q("",!0)],42,Zie)])):Q("",!0)]),_:1})],512))}}),$ae=Ct(Mae,[["__scopeId","data-v-519a1012"]]),Rae={class:"overflow-y-auto px-5 flex-grow"},Lae={class:"space-y-2 mb-4"},Dae={class:"text-blue-700 dark:text-blue-400"},Nae={class:"font-medium text-blue-900 dark:text-blue-200"},Oae={key:0,class:"text-yellow-600 dark:text-yellow-400"},Fae={key:1,class:"text-green-600 dark:text-green-400"},Uae={key:0,class:"py-2 px-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-center text-gray-500 dark:text-gray-400"},qae={class:"border-t-2 border-blue-200 dark:border-blue-700 pt-3 flex flex-col font-bold text-blue-900 dark:text-blue-200 px-5"},Bae={class:"flex justify-between items-center mb-2 text-sm"},Vae={class:"bg-blue-100 dark:bg-blue-800/50 px-2 py-0.5 rounded"},Hae={class:"font-medium flex items-center"},Gae={class:"bg-yellow-100 dark:bg-yellow-900/30 px-2 py-0.5 rounded text-yellow-800 dark:text-yellow-300"},jae={class:"flex justify-between items-center mt-1"},Wae={class:"bg-blue-200 dark:bg-blue-700 px-3 py-1 rounded-lg"},zae={class:"mt-4 flex justify-between px-5 pb-5"},Qae={key:1,class:"flex-1"},Kae=Je({__name:"EPMultiplierBreakdownModal",props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,r=Co(),{isClosing:o,handleClose:i,preventBackgroundTouchMove:c}=Gr(),u=sn(),{getEPMultiplierBreakdown:d}=Pi(),m=S=>be(S,2)+"x",f=q(()=>d()),p=q(()=>{const S=f.value.filter(R=>R.id!=="aphid_farm_ep_boost"&&R.id!=="daily_reward_ep_boost"&&R.id!=="ascension_ep_boost");let T=new Se(1);return S.forEach(R=>{T=T.add(R.value.sub(1))}),T}),g=q(()=>f.value.filter(S=>S.id==="aphid_farm_ep_boost"||S.id==="daily_reward_ep_boost"||S.id==="ascension_ep_boost")),w=q(()=>u.getEPBoostMultiplier()),C=q(()=>m(w.value)),E=()=>{console.log("======== EP MULTIPLIER DEBUG ========");const S=f.value.map(R=>{const L=R.id==="aphid_farm_ep_boost"||R.id==="daily_reward_ep_boost"||R.id==="ascension_ep_boost";return{name:R.name,value:R.value.toString(),formatted:R.formatted,id:R.id,type:L?"Multiplicative":"Additive"}});console.table(S),console.log("Additive subtotal:",p.value.toString());let T=p.value;g.value.forEach(R=>{T=T.mul(R.value)}),console.log("Expected total (calculated):",T.toString()),console.log("Actual total (from store):",w.value.toString()),console.log("Difference:",w.value.sub(T).toString()),console.log("Item EP boost:",u.getItemEpBoost().toString()),console.log("Upgrades EP boost:",u.getUpgradesEpBoost().toString()),console.log("Achievement EP boost:",u.getAchievementEpBoost().toString()),console.log("Queen Chamber EP boost:",u.getQueenChamberEPBoost().toString()),console.log("Colony EP boost:",u.getColonyEPBoost().toString()),console.log("Ascension EP boost:",u.getAscensionEPBoost().toString()),console.log("Pheromone Shop EP boost:",u.getPheromoneShopEpMultiplier().toString()),console.log("Neurotrails EP boost:",u.getNeurotrailsBoost("ep").toString())},k=()=>{i(()=>n("close"),0)},A=S=>{S.key==="Escape"&&s.show&&k()};return Et(()=>{window.addEventListener("keydown",A)}),xn(()=>{window.removeEventListener("keydown",A)}),(S,T)=>S.show?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onTouchmove:T[1]||(T[1]=(...R)=>b(c)&&b(c)(...R)),onClick:xt(k,["self"])},[a("div",{class:K(["bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-blue-200 dark:border-blue-700 max-w-md w-full mx-auto overflow-hidden max-h-[90vh] flex flex-col",{"opacity-0 scale-95":b(o)}]),onTouchmove:T[0]||(T[0]=xt(()=>{},["stop"]))},[T[6]||(T[6]=a("div",{class:"bg-blue-100 dark:bg-blue-900/30 p-4 border-b border-blue-200 dark:border-blue-700"},[a("h3",{class:"text-base font-bold flex items-center text-blue-800 dark:text-blue-300"},[a("span",{class:"i-heroicons-sparkles text-blue-600 dark:text-blue-400 mr-2"}),oe(" EP Multiplier Breakdown ")])],-1)),a("div",Rae,[T[2]||(T[2]=a("div",{class:"text-xs text-blue-700 dark:text-blue-400 mb-3 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg"},[a("p",{class:"mb-1"},[a("strong",null,"How the total is calculated:")]),a("p",null,"1. Start with base value of 1"),a("p",null,[oe("2. Add all "),a("span",{class:"text-green-600 dark:text-green-400"},"+"),oe(" bonuses together")]),a("p",null,[oe("3. Multiply the result by all "),a("span",{class:"text-yellow-600 dark:text-yellow-400"},""),oe(" bonuses")])],-1)),a("div",Lae,[(h(!0),v(De,null,Ge(f.value,(R,L)=>(h(),v("div",{key:L,class:"flex justify-between items-center py-2 px-3 rounded-lg bg-blue-50 dark:bg-blue-900/30"},[a("span",Dae,_(R.name),1),a("span",Nae,[R.id==="aphid_farm_ep_boost"||R.id==="daily_reward_ep_boost"?(h(),v("span",Oae,"")):(h(),v("span",Fae,"+")),oe(" "+_(R.formatted),1)])]))),128)),f.value.length===0?(h(),v("div",Uae," No active EP multipliers ")):Q("",!0)])]),a("div",qae,[a("div",Bae,[T[3]||(T[3]=a("span",{class:"font-medium"},"Additive Subtotal:",-1)),a("span",Vae,_(m(p.value)),1)]),(h(!0),v(De,null,Ge(g.value,(R,L)=>(h(),v("div",{key:L,class:"flex justify-between items-center mb-2 text-sm"},[a("span",Hae,[T[4]||(T[4]=a("span",{class:"text-yellow-600 dark:text-yellow-400"},"",-1)),oe(" "+_(R.name)+": ",1)]),a("span",Gae,_(R.formatted),1)]))),128)),a("div",jae,[T[5]||(T[5]=a("span",null,"Total Multiplier:",-1)),a("span",Wae,_(C.value),1)])]),a("div",zae,[b(r)?(h(),v("button",{key:0,onClick:E,class:"py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors",title:"Log detailed multiplier info to console"}," Debug ")):(h(),v("div",Qae)),a("button",{onClick:k,class:"py-2 px-4 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 rounded-lg text-white text-sm font-medium transition-colors"}," Close ")])],34)],32)):Q("",!0)}}),Yae=Ct(Kae,[["__scopeId","data-v-db0bb95e"]]),Xae={class:"bg-gradient-to-br from-purple-200 to-purple-100 dark:from-purple-900/40 dark:to-purple-800/40 rounded-xl p-2 sm:p-4 shadow-md border border-purple-300/50 dark:border-purple-700/50 dark:text-purple-100"},Jae={class:"flex flex-col space-y-2 sm:space-y-3"},Zae={class:"flex items-center justify-between"},ele={class:"text-sm sm:text-base font-bold flex items-center text-purple-800 dark:text-purple-200"},tle={class:"grid grid-cols-1 sm:grid-cols-6 gap-2 sm:gap-3"},sle={class:"sm:col-span-4 grid grid-cols-2 gap-2"},nle={class:"flex justify-between items-center"},rle={class:"sm:col-span-2 flex sm:flex-col space-x-2 sm:space-x-0 sm:space-y-2"},ole={key:0,class:"bg-blue-100/90 dark:bg-blue-900/80 p-1.5 sm:p-2 rounded-lg shadow-sm border border-blue-300 dark:border-blue-700 flex-grow space-y-0.5"},ile={class:"text-2xs sm:text-xs text-blue-800 dark:text-blue-200 font-medium"},ale={class:"text-2xs sm:text-xs text-blue-800 dark:text-blue-200 font-medium"},lle={class:"text-2xs sm:text-xs text-blue-800 dark:text-blue-200 font-medium"},cle=["disabled"],ule={key:0,class:"i-heroicons-arrow-path animate-spin text-sm sm:text-base mr-1 sm:mr-1.5"},dle={key:1,class:"i-heroicons-shopping-cart text-sm sm:text-base mr-1 sm:mr-1.5"},mle={class:"text-2xs sm:text-sm"},fle=["disabled"],ple={key:0,class:"text-2xs sm:text-sm"},hle={key:1,class:"text-2xs sm:text-xs"},gle={key:0,class:"bg-blue-50 dark:bg-blue-900/30 p-2 sm:p-3 rounded-lg text-2xs sm:text-xs text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800"},vle={class:"grid grid-cols-1 sm:grid-cols-3 gap-2"},ble={class:"list-disc pl-4 mt-1 space-y-0.5"},yle=Je({__name:"EvolutionStatusSection",props:{showAboutEvolution:{type:Boolean}},emits:["toggleAboutEvolution","confirmEvolution"],setup(t,{emit:e}){const s=e,n=St(),r=Ht(),o=sn();tn();const{width:i}=X1(),{getEPMultiplierBreakdown:c}=Pi(),u=Y(!1),d=Y(!1),m=q(()=>i.value<640),f=q(()=>n.canEvolve),p=q(()=>n.ticksPerLoop.eq(0)?100:Math.round(n.currentLoopTicks.div(n.ticksPerLoop).mul(100).clamp(0,100).toNumber())),g=q(()=>n.foodForNextLoop.eq(0)?100:Math.round(r.food.div(n.foodForNextLoop).mul(100).clamp(0,100).toNumber())),w=q(()=>be(n.requiredLoops,1)),C=q(()=>be(n.currentLoopTicks,0)),E=q(()=>be(n.ticksPerLoop,1)),k=q(()=>be(r.food,0)),A=q(()=>be(n.foodForNextLoop,0)),S=q(()=>o.getEPBoostMultiplier()),T=M=>be(M.sub(1).mul(100),2)+"%",R=q(()=>!n.hasEvolved),{getCurrencyClasses:L}=Ga(),P=L("evolutionPoints"),I=()=>{if(!(!n.hasEvolved||d.value)){d.value=!0;try{const M=n.evolutionUpgrades.filter(x=>x.maxLevel&&x.level.gte(x.maxLevel)||!jo(x.id,n.evolutionUpgrades)?!1:n.evolutionPoints.gte(x.cost)).sort((x,$)=>x.cost.lt($.cost)?-1:1);for(;M.length>0&&n.evolutionPoints.gt(0);){const x=M.shift();x&&n.purchaseMaxUpgrades(x.id);let $=0;for(;$<M.length;)!M[$]||n.evolutionPoints.lt(M[$].cost)||M[$].maxLevel&&M[$].level.gte(M[$].maxLevel)?M.splice($,1):$++;M.length>1&&M.sort((Z,me)=>Z.cost.lt(me.cost)?-1:1)}}finally{d.value=!1}}},D=q(()=>[{label:m.value?"Evo Points":"Evolution Points",value:n.formatEP(),icon:"i-heroicons-sparkles",colorType:"evolutionPoints"},{label:m.value?"Meta":"Metamorphosis",value:n.formatEvolutionCount(),icon:"i-heroicons-arrow-path",colorType:"default"},{label:m.value?"Cycles":"Foraging Cycles",value:n.formatLoopsCompleted(),icon:"i-heroicons-arrow-path",colorType:"default"},{label:m.value?"Evo Req":"Evolution Requirement",value:`${w.value} Cycles`,icon:"i-heroicons-sparkles",colorType:"default"}]),U=Je({props:{label:{type:String,required:!0},percentage:{type:Number,required:!0},current:{type:String,required:!0},target:{type:String,required:!0}},setup(M){return()=>vr("div",{class:"bg-white/90 dark:bg-gray-800/90 p-1.5 sm:p-2 rounded-lg shadow-sm border border-purple-300 dark:border-purple-700"},[vr("div",{class:"flex justify-between items-center mb-0.5 sm:mb-1"},[vr("div",{class:"text-2xs sm:text-xs text-purple-800 dark:text-purple-300 font-medium"},M.label),vr("div",{class:"text-2xs sm:text-xs text-purple-800 dark:text-purple-300"},[vr("span",{},`${M.percentage}%`),vr("span",{class:"ml-1 text-purple-500 dark:text-purple-400"},`(${M.current}/${M.target})`)])]),vr("div",{class:"h-1.5 sm:h-2 bg-purple-100 dark:bg-purple-900/50 rounded-full overflow-hidden"},[vr("div",{class:"h-full bg-purple-600 dark:bg-purple-500 transition-all duration-300 ease-out",style:{width:`${M.percentage}%`}})])])}});return(M,x)=>(h(),v(De,null,[a("section",Xae,[a("div",Jae,[a("div",Zae,[a("h2",ele,[x[4]||(x[4]=a("span",{class:"i-heroicons-sparkles text-purple-700 dark:text-purple-400 mr-1 sm:mr-2"},null,-1)),a("span",null,_(m.value?"Meta Status":"Metamorphosis Status"),1)]),a("button",{onClick:x[0]||(x[0]=$=>s("toggleAboutEvolution")),class:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-purple-300 dark:bg-purple-700 hover:bg-purple-400 dark:hover:bg-purple-600 flex items-center justify-center text-purple-800 dark:text-purple-200 transition-colors"},x[5]||(x[5]=[a("span",{class:"i-heroicons-question-mark-circle text-sm sm:text-base"},null,-1)]))]),a("div",tle,[a("div",sle,[(h(!0),v(De,null,Ge(D.value,($,Z)=>(h(),v("div",{key:Z,class:K(["p-1.5 sm:p-2 rounded-lg shadow-sm border",$.colorType==="evolutionPoints"?"bg-blue-100/90 dark:bg-blue-900/80 border-blue-300 dark:border-blue-700":"bg-white/90 dark:bg-gray-800/90 border-purple-300 dark:border-purple-700"])},[a("div",nle,[a("div",{class:K(["text-2xs sm:text-xs font-medium",$.colorType==="evolutionPoints"?"text-blue-800 dark:text-blue-200":"text-purple-800 dark:text-purple-300"])},_($.label),3),a("div",{class:K(["text-xs sm:text-sm font-bold flex items-center min-w-[4rem] justify-end",[$.colorType==="evolutionPoints"?b(P).text:"text-purple-700 dark:text-purple-400"]])},[a("span",{class:K([$.icon,"mr-0.5 sm:mr-1 text-2xs sm:text-xs",$.colorType==="evolutionPoints"?b(P).icon:"text-purple-600 dark:text-purple-400"])},null,2),oe(" "+_($.value),1)],2)])],2))),128)),Ye(b(U),{label:m.value?"Trip Prog to Next Cycle":"Trip Progress towards Next Cycle",percentage:p.value,current:C.value,target:E.value},null,8,["label","percentage","current","target"]),Ye(b(U),{label:m.value?"Food Prog to Next Cycle":"Food Progress towards Next Cycle",percentage:g.value,current:k.value,target:A.value},null,8,["label","percentage","current","target"])]),a("div",rle,[f.value?(h(),v("div",ole,[a("div",null,[a("div",ile,_(m.value?"Potential":"Potential Gain"),1),a("div",{class:K(["text-xs sm:text-sm font-bold flex items-center min-w-[5rem] justify-end",b(P).text])},[a("span",{class:K(["i-heroicons-sparkles mr-0.5 sm:mr-1 text-2xs sm:text-xs",b(P).icon])},null,2),oe(" +"+_(b(n).formatPotentialEPGain())+" EP ",1)],2)]),a("div",null,[a("div",ale,_(m.value?"Next Cycle:":"Gain Next Cycle:"),1),a("div",{class:K(["text-2xs sm:text-xs font-semibold flex items-center min-w-[5rem] justify-end",b(P).text])},[a("span",{class:K(["i-heroicons-sparkles mr-0.5 sm:mr-1 text-3xs sm:text-2xs",b(P).icon])},null,2),oe(" +"+_(b(n).formatPotentialEPGainForNextCycle())+" EP ",1)],2)]),a("div",lle,[x[7]||(x[7]=oe(" Total: ")),a("span",{class:"cursor-pointer inline-flex items-center",onClick:x[1]||(x[1]=$=>u.value=!0)},[oe(" +"+_(T(S.value))+" bonus ",1),x[6]||(x[6]=a("span",{class:"i-heroicons-information-circle text-xs ml-1 text-blue-500 dark:text-blue-400"},null,-1))])])])):Q("",!0),b(n).hasEvolved?(h(),v("button",{key:1,onClick:I,title:"Automatically purchases the cheapest available upgrades until all Evolution Points are spent",class:"relative py-1.5 sm:py-2 px-2 sm:px-3 rounded-lg text-white font-bold transition-colors duration-200 flex items-center justify-center flex-grow bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 shadow-md group",disabled:!b(n).evolutionPoints.gt(0)||d.value},[d.value?(h(),v("span",ule)):(h(),v("span",dle)),a("span",mle,_(m.value?"Buy Max":d.value?"Purchasing...":"Buy Max Upgrades"),1),x[8]||(x[8]=a("div",{class:"absolute invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg shadow-lg z-10 w-48 whitespace-normal text-center after:content-[''] after:absolute after:left-1/2 after:top-full after:-ml-1.5 after:-mt-1 after:border-t-4 after:border-l-4 after:border-r-4 after:border-t-gray-800 after:border-l-transparent after:border-r-transparent"}," Automatically purchases the cheapest available upgrades until all Evolution Points are spent ",-1))],8,cle)):Q("",!0),a("button",{onClick:x[2]||(x[2]=$=>s("confirmEvolution")),class:K(["py-1.5 sm:py-2 px-2 sm:px-3 rounded-lg text-white font-bold transition-colors duration-200 flex items-center justify-center flex-grow min-h-[2.5rem]",f.value?"bg-gradient-to-r from-blue-700 to-blue-600 hover:from-blue-800 hover:to-blue-700 dark:from-blue-800 dark:to-blue-700 dark:hover:from-blue-900 dark:hover:to-blue-800 shadow-lg":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"]),disabled:!f.value},[x[9]||(x[9]=a("span",{class:"i-heroicons-sparkles text-sm sm:text-base mr-1 sm:mr-1.5"},null,-1)),f.value?(h(),v("span",ple,_(m.value?"Transform":"Metamorphose"),1)):(h(),v("span",hle," Need "+_(w.value)+" Cycles ",1))],10,fle)])]),R.value?(h(),v("div",gle,[a("div",vle,[a("div",null,[x[14]||(x[14]=a("p",{class:"font-medium mb-1"},"Foraging Cycles",-1)),a("p",null,[x[10]||(x[10]=oe("You need ")),a("strong",null,_(w.value)+" cycles",1),x[11]||(x[11]=oe(" to evolve. Complete cycles by:"))]),a("ul",ble,[a("li",null,[a("strong",null,_(E.value),1),x[12]||(x[12]=oe(" foraging trips, or"))]),a("li",null,[a("strong",null,_(A.value),1),x[13]||(x[13]=oe(" food"))])])]),x[15]||(x[15]=a("div",null,[a("p",{class:"font-medium mb-1"},"Trip Progress"),a("p",null,"Ants make foraging trips over time. Upgrades can increase speed and simultaneous trips.")],-1)),x[16]||(x[16]=a("div",null,[a("p",{class:"font-medium mb-1"},"Food Progress"),a("p",null,"Collecting enough food instantly completes a cycle - useful as you progress.")],-1))])])):Q("",!0)])]),Ye(Yae,{show:u.value,onClose:x[3]||(x[3]=$=>u.value=!1)},null,8,["show"])],64))}}),_le={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-auto border border-purple-200 dark:border-purple-700 overflow-hidden"},xle={class:"p-4"},kle={class:"text-center mb-5"},wle={class:"text-xl font-bold text-purple-600 dark:text-purple-400 mb-1"},Ele={class:"flex space-x-3"},Cle=Je({__name:"EvolutionConfirmationDialog",props:{show:{type:Boolean}},emits:["confirm","cancel"],setup(t,{emit:e}){const s=e,n=St();sn();const r=q(()=>n.formatPotentialEPGain());return(o,i)=>o.show?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onKeydown:i[2]||(i[2]=Pl(c=>s("cancel"),["esc"])),onClick:i[3]||(i[3]=xt(c=>s("cancel"),["self"]))},[a("div",_le,[i[7]||(i[7]=a("div",{class:"bg-purple-100 dark:bg-purple-900/30 p-4 border-b border-purple-200 dark:border-purple-700"},[a("h3",{class:"text-base font-bold flex items-center text-purple-800 dark:text-purple-300"},[a("span",{class:"i-heroicons-sparkles text-purple-600 dark:text-purple-400 mr-2"}),oe(" Confirm Metamorphosis ")])],-1)),a("div",xle,[a("div",kle,[a("div",wle," +"+_(r.value)+" EP ",1),i[4]||(i[4]=a("p",{class:"text-sm text-gray-700 dark:text-gray-300"}," Your colony will evolve, resetting progress but keeping evolutionary adaptations. ",-1))]),i[6]||(i[6]=a("div",{class:"flex items-start mb-4 p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-900/30 text-amber-800 dark:text-amber-300"},[a("span",{class:"i-heroicons-exclamation-triangle mr-2 text-amber-500 dark:text-amber-400 flex-shrink-0 mt-0.5"}),a("p",{class:"text-xs"}," This will reset your colony's food, ants, and progress. Your evolution points and upgrades will be preserved. ")],-1)),a("div",Ele,[a("button",{onClick:i[0]||(i[0]=c=>s("cancel")),class:"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel "),a("button",{onClick:i[1]||(i[1]=c=>s("confirm")),class:"flex-1 py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors flex items-center justify-center"},i[5]||(i[5]=[a("span",{class:"i-heroicons-sparkles mr-1.5"},null,-1),oe(" Metamorphose ")]))])])])],32)):Q("",!0)}}),Sle=Ct(Cle,[["__scopeId","data-v-4a717996"]]),Tle=Je({__name:"AboutEvolutionDialog",props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,{handleClose:r,preventBackgroundTouchMove:o}=Gr(),i=()=>{r(()=>n("close"),0)},c=u=>{u.key==="Escape"&&s.show&&i()};return Et(()=>{window.addEventListener("keydown",c)}),xn(()=>{window.removeEventListener("keydown",c)}),(u,d)=>u.show?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm modal-backdrop","data-modal-backdrop":"true",onClick:xt(i,["self"]),onTouchmove:d[0]||(d[0]=xt((...m)=>b(o)&&b(o)(...m),["self"]))},[a("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full p-5 mx-auto max-h-[80vh] overflow-y-auto border border-purple-200 dark:border-purple-700"},[a("div",{class:"flex justify-between items-center mb-3 pb-2 border-b border-purple-200 dark:border-purple-700"},[d[2]||(d[2]=a("h3",{class:"text-base font-bold flex items-center text-purple-800 dark:text-purple-300"},[a("span",{class:"i-heroicons-information-circle text-purple-600 dark:text-purple-400 mr-2"}),oe(" About Metamorphosis ")],-1)),a("button",{onClick:i,class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},d[1]||(d[1]=[a("span",{class:"i-heroicons-x-mark text-lg"},null,-1)]))]),d[3]||(d[3]=js('<div class="space-y-4 text-gray-700 dark:text-gray-300 text-sm"><p><strong>Metamorphosis</strong> is your colony&#39;s method of evolution, allowing you to transform your ants into more advanced forms and gain powerful permanent bonuses. </p><div class="bg-purple-50 dark:bg-purple-900/30 p-3 rounded-lg border border-purple-100 dark:border-purple-800"><h4 class="font-semibold text-purple-700 dark:text-purple-400 mb-2">Metamorphosis Process:</h4><ul class="list-disc pl-5 space-y-1"><li>Evolving resets most of your progress, including resources, structures, adaptations, and more.</li><li>You&#39;ll keep all EP (Evolution Points) and the bonuses they provide.</li><li>You&#39;ll gain EP based on your progress in the current evolution.</li><li>Each evolution unlocks new technologies, ant types, and game mechanics.</li></ul></div><div class="bg-green-50 dark:bg-green-900/30 p-3 rounded-lg border border-green-100 dark:border-green-800"><h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">What You Keep:</h4><ul class="list-disc pl-5 space-y-1"><li>Evolution Points (EP) and all bonuses from them</li><li>Unlocked achievements</li><li>Pheromone Essence</li></ul></div><div class="bg-red-50 dark:bg-red-900/30 p-3 rounded-lg border border-red-100 dark:border-red-800"><h4 class="font-semibold text-red-700 dark:text-red-400 mb-2">What Resets:</h4><ul class="list-disc pl-5 space-y-1"><li>All resources (food, minerals, etc.)</li><li>Purchased structures and their levels</li><li>Adaptations and specialization levels</li><li>Colony level and title</li><li>Research and technology</li></ul></div><p> For the optimal evolution, focus on maximizing food production, colony level, and unlocking adaptations to earn more EP. Remember that early evolutions may feel slower, but each evolution makes subsequent ones faster and more rewarding. </p></div>',1))])],32)):Q("",!0)}}),Ale={class:"flex flex-col gap-4 lg:gap-6 relative"},Ile={class:"min-w-0 space-y-4 lg:space-y-6 pb-20 lg:pb-6 max-w-screen-2xl mx-auto w-full"},Ple={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200/50 dark:border-gray-700/50 overflow-hidden"},Mle={class:"p-4"},$le={key:1,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Rle=Je({__name:"UpgradesPage",setup(t){const e=St(),s=Wt(),n=Tr(),r=q(()=>e.evolutionUpgrades),o=q({get:()=>e.activeTab,set:w=>{e.activeTab=w}}),i=q(()=>Yre().filter(w=>w!=="all")),c=Y(!1),u=Y(!1),d=()=>{e.canEvolve&&(n.confirmEvolution?c.value=!0:e.evolve())},m=()=>{e.canEvolve&&(e.evolve(),c.value=!1)},f=()=>{c.value=!1},p=()=>{u.value=!u.value};Et(()=>{(o.value==="all"||!i.value.includes(o.value))&&(o.value=i.value[0]);try{console.log("Updating upgrade max levels based on ascension count:",s.ascensionCount),e.updateUpgradeMaxLevels(s.ascensionCount)}catch(w){console.error("Failed to update upgrade max levels on page load:",w)}});const g=q(()=>o.value==="all"?[]:r.value.filter(w=>w.category===o.value&&w.position));return(w,C)=>(h(),v("div",Ale,[a("main",Ile,[Ye(yle,{showAboutEvolution:u.value,onToggleAboutEvolution:p,onConfirmEvolution:d},null,8,["showAboutEvolution"]),a("div",Ple,[a("div",Mle,[o.value&&o.value!=="all"?(h(),Tt($ae,{key:0,category:o.value,"onUpdate:category":C[0]||(C[0]=E=>o.value=E),upgrades:g.value,"available-categories":i.value},null,8,["category","upgrades","available-categories"])):(h(),v("div",$le," Loading category or no category selected... "))])]),Ye(Sle,{show:c.value,onConfirm:m,onCancel:f},null,8,["show"]),Ye(Tle,{show:u.value,onClose:p},null,8,["show"]),Ye(Ha,{threshold:400})])]))}}),Lle=Ct(Rle,[["__scopeId","data-v-9f6a9121"]]),Dle=Je({__name:"PheromoneMultiplierInfo",setup(t){const e=sn(),{getCurrencyClasses:s}=Ga(),n=s("pheromoneEssence"),r=q(()=>e.getPheromoneGainMultiplier()),o=q(()=>Lt(r.value)),i=q(()=>r.value.gt(1));return(c,u)=>i.value?(h(),v("div",{key:0,class:K(["flex items-center px-3 py-2 rounded-lg",b(n).background])},[a("span",{class:K(["i-heroicons-arrow-trending-up mr-2",b(n).icon])},null,2),a("div",null,[a("div",{class:K(["text-sm",b(n).text])},"Essence Gain Multiplier",2),a("div",{class:K(["text-md font-bold",b(n).text])},_(o.value),3)])],2)):Q("",!0)}}),Nle={class:"overflow-y-auto px-5 flex-grow"},Ole={class:"space-y-2 mb-4"},Fle={class:"text-purple-700 dark:text-purple-400"},Ule={class:"font-medium text-purple-900 dark:text-purple-200"},qle={key:0,class:"text-yellow-600 dark:text-yellow-400"},Ble={key:1,class:"text-green-600 dark:text-green-400"},Vle={key:0,class:"py-2 px-3 rounded-lg bg-gray-50 dark:bg-gray-700 text-center text-gray-500 dark:text-gray-400"},Hle={class:"border-t-2 border-purple-200 dark:border-purple-700 pt-3 flex flex-col font-bold text-purple-900 dark:text-purple-200 px-5"},Gle={class:"flex justify-between items-center mb-2 text-sm"},jle={class:"bg-purple-100 dark:bg-purple-800/50 px-2 py-0.5 rounded"},Wle={class:"font-medium flex items-center"},zle={class:"bg-yellow-100 dark:bg-yellow-900/30 px-2 py-0.5 rounded text-yellow-800 dark:text-yellow-300"},Qle={class:"flex justify-between items-center mt-1"},Kle={class:"bg-purple-200 dark:bg-purple-700 px-3 py-1 rounded-lg"},Yle={class:"mt-4 flex justify-between px-5 pb-5"},Xle={key:1,class:"flex-1"},Jle=Je({__name:"PheromoneMultiplierBreakdownModal",props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,r=Co(),{isClosing:o,handleClose:i,preventBackgroundTouchMove:c}=Gr(),u=sn(),{getPheromoneGainMultiplierBreakdown:d}=Pi(),m=S=>be(S,2)+"x",f=q(()=>d()),p=q(()=>{const S=f.value.filter(R=>R.additive===!0);let T=new Se(1);return S.forEach(R=>{T=T.add(R.value.sub(1))}),T}),g=q(()=>f.value.filter(S=>S.additive===!1)),w=q(()=>u.getPheromoneGainMultiplier()),C=q(()=>m(w.value)),E=()=>{var I,D,U,M,x,$,Z,me;console.log("======== PHEROMONE MULTIPLIER DEBUG ========");const S=f.value.map(re=>({name:re.name,value:re.value.toString(),formatted:re.formatted,id:re.id,type:re.additive===!0?"Additive":"Multiplicative"}));console.table(S);const T=f.value.filter(re=>re.additive===!0),R=f.value.filter(re=>re.additive===!1);console.log("Additive items:",T.map(re=>`${re.name}: ${re.value.toString()}`)),console.log("Multiplicative items:",R.map(re=>`${re.name}: ${re.value.toString()}`)),console.log("Additive subtotal (UI):",p.value.toString());let L=new Se(1);T.forEach(re=>{L=L.add(re.value.sub(1))}),console.log("Additive subtotal (calculated manually):",L.toString());let P=p.value;R.forEach(re=>{console.log(`Multiplying by ${re.name}: ${re.value.toString()}`),P=P.mul(re.value)}),console.log("Expected total (calculated):",P.toString()),console.log("Actual total (from store):",w.value.toString()),console.log("Difference:",w.value.sub(P).toString()),console.log("Direct from store getPheromoneGainMultiplier():",u.getPheromoneGainMultiplier().toString());try{console.log("Neurotrails pheromone boost:",u.getNeurotrailsBoost("pheromone").toString())}catch(re){console.log("Error getting Neurotrails boost:",re)}console.log("Evolution Upgrades Bonus (Additive):",((I=f.value.find(re=>re.id==="evolution_pheromone_boost_additive"))==null?void 0:I.value.toString())||"1"),console.log("Evolution Upgrades Bonus (Multiplicative):",((D=f.value.find(re=>re.id==="evolution_pheromone_boost_multiplicative"))==null?void 0:D.value.toString())||"1"),console.log("Pheromone Shop Bonus:",((U=f.value.find(re=>re.id==="pheromone_shop_bonus"))==null?void 0:U.value.toString())||"1"),console.log("Colony Bonus:",((M=f.value.find(re=>re.id==="colony_pheromone_boost"))==null?void 0:M.value.toString())||"1"),console.log("Ascension Tree Bonus:",((x=f.value.find(re=>re.id==="ascension_pheromone_boost"))==null?void 0:x.value.toString())||"1"),console.log("Collectibles Bonus:",(($=f.value.find(re=>re.id==="collectible_pheromone_boost"))==null?void 0:$.value.toString())||"1"),console.log("Aphid Farm Bonus:",((Z=f.value.find(re=>re.id==="aphid_farm_pheromone_boost"))==null?void 0:Z.value.toString())||"1"),console.log("Neurotrails Bonus:",((me=f.value.find(re=>re.id==="neurotrails_pheromone_boost"))==null?void 0:me.value.toString())||"1")},k=()=>{i(()=>n("close"),0)},A=S=>{S.key==="Escape"&&s.show&&k()};return Et(()=>{window.addEventListener("keydown",A)}),xn(()=>{window.removeEventListener("keydown",A)}),(S,T)=>S.show?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onTouchmove:T[1]||(T[1]=(...R)=>b(c)&&b(c)(...R)),onClick:xt(k,["self"])},[a("div",{class:K(["bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-purple-200 dark:border-purple-700 max-w-md w-full mx-auto overflow-hidden max-h-[90vh] flex flex-col",{"opacity-0 scale-95":b(o)}]),onTouchmove:T[0]||(T[0]=xt(()=>{},["stop"]))},[T[6]||(T[6]=a("div",{class:"bg-purple-100 dark:bg-purple-900/30 p-4 border-b border-purple-200 dark:border-purple-700"},[a("h3",{class:"text-base font-bold flex items-center text-purple-800 dark:text-purple-300"},[a("span",{class:"i-heroicons-flask text-purple-600 dark:text-purple-400 mr-2"}),oe(" Pheromone Multiplier Breakdown ")])],-1)),a("div",Nle,[T[2]||(T[2]=a("div",{class:"text-xs text-purple-700 dark:text-purple-400 mb-3 bg-purple-50 dark:bg-purple-900/20 p-2 rounded-lg"},[a("p",{class:"mb-1"},[a("strong",null,"How the total is calculated:")]),a("p",null,"1. Start with base value of 1"),a("p",null,[oe("2. Add all "),a("span",{class:"text-green-600 dark:text-green-400"},"+"),oe(" bonuses together (additive)")]),a("p",null,[oe("3. Multiply the result by all "),a("span",{class:"text-yellow-600 dark:text-yellow-400"},""),oe(" bonuses (multiplicative)")])],-1)),a("div",Ole,[(h(!0),v(De,null,Ge(f.value,(R,L)=>(h(),v("div",{key:L,class:"flex justify-between items-center py-2 px-3 rounded-lg bg-purple-50 dark:bg-purple-900/30"},[a("span",Fle,_(R.name),1),a("span",Ule,[R.additive===!1?(h(),v("span",qle,"")):(h(),v("span",Ble,"+")),oe(" "+_(R.formatted),1)])]))),128)),f.value.length===0?(h(),v("div",Vle," No active pheromone multipliers ")):Q("",!0)])]),a("div",Hle,[a("div",Gle,[T[3]||(T[3]=a("span",{class:"font-medium"},"Additive Subtotal:",-1)),a("span",jle,_(m(p.value)),1)]),(h(!0),v(De,null,Ge(g.value,(R,L)=>(h(),v("div",{key:L,class:"flex justify-between items-center mb-2 text-sm"},[a("span",Wle,[T[4]||(T[4]=a("span",{class:"text-yellow-600 dark:text-yellow-400"},"",-1)),oe(" "+_(R.name)+": ",1)]),a("span",zle,_(R.formatted),1)]))),128)),a("div",Qle,[T[5]||(T[5]=a("span",null,"Total Multiplier:",-1)),a("span",Kle,_(C.value),1)])]),a("div",Yle,[b(r)?(h(),v("button",{key:0,onClick:E,class:"py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors",title:"Log detailed multiplier info to console"}," Debug ")):(h(),v("div",Xle)),a("button",{onClick:k,class:"py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors"}," Close ")])],34)],32)):Q("",!0)}}),Zle=Ct(Jle,[["__scopeId","data-v-cb7ffc10"]]),ece={class:"space-y-4"},tce={class:"bg-gradient-to-br from-indigo-100 to-indigo-50 dark:from-indigo-900/40 dark:to-indigo-800/30 rounded-xl p-3 md:p-4 shadow-md"},sce={class:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-between mb-3"},nce={class:"flex items-center"},rce={class:"flex items-center justify-between mt-1 sm:mt-0"},oce={class:"flex items-center"},ice={class:"mb-3"},ace={class:"flex items-center justify-between mb-2"},lce={class:"flex flex-wrap gap-2 mb-3"},cce=["value"],uce=["value"],dce={key:0,class:"i-heroicons-arrow-up-20-solid"},mce={key:1,class:"i-heroicons-arrow-down-20-solid"},fce={class:"flex items-center"},pce={class:"space-y-3 sm:space-y-4"},hce={class:"flex flex-col overflow-hidden"},gce={class:"flex flex-col md:flex-row md:justify-between md:items-start mb-1 md:mb-2"},vce={class:"pr-1"},bce={class:"text-left md:text-right mt-1 md:mt-0 flex md:block justify-between items-center"},yce={key:0,class:"mt-2 md:mt-4 bg-gray-50 dark:bg-gray-700/30 p-2 md:p-3 rounded-lg border border-gray-200 dark:border-gray-700"},_ce={class:"flex items-center"},xce={class:"text-xs md:text-sm text-blue-600 dark:text-blue-400"},kce={class:"space-y-1 md:space-y-2 mt-2 md:mt-3"},wce={class:"flex items-center overflow-hidden"},Ece={key:0,class:"i-heroicons-check-circle text-green-500 dark:text-green-400 flex-shrink-0 mr-1 md:mr-2"},Cce={key:1,class:"i-heroicons-lock-closed text-gray-400 dark:text-gray-500 flex-shrink-0 mr-1 md:mr-2"},Sce={key:3,class:"text-gray-500 dark:text-gray-400 truncate"},Tce={class:"text-xs ml-1 hidden md:inline"},Ace={key:0,class:"font-medium text-green-600 dark:text-green-400 flex-shrink-0 ml-1"},Ice={class:"flex flex-col justify-center gap-1 md:gap-2 h-full"},Pce=["disabled","onClick"],Mce={key:0},$ce={key:1},Rce={key:2},Lce={key:3},Dce=["onClick","disabled","title"],Nce={key:0,class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-800 dark:bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10 shadow-lg"},Oce={class:"text-xs text-gray-300"},Fce={class:"flex items-start"},Uce=Je({__name:"PheromoneShopTab",setup(t){const e=Ks(),s=Ml(),{getCurrencyClasses:n}=Ga(),r=n("pheromoneEssence"),o=Y({}),i=Y({count:0,visible:!1,totalLevels:0}),c=Y(!1),u=[{value:"unlocked",label:"Unlocked Status"},{value:"level",label:"Current Level"},{value:"maxLevel",label:"Max Level"},{value:"price",label:"Price"},{value:"baseCost",label:"Base Cost"},{value:"name",label:"Name"}],d=q(()=>s.sortPreference.by),m=q(()=>s.sortPreference.direction),f=q(()=>s.hideMaxedItems);function p(U){if(U===d.value)s.setSortPreference(U,m.value==="asc"?"desc":"asc");else{const M=U==="name"?"asc":"desc";s.setSortPreference(U,M)}}function g(U){s.upgradeItem(U)}function w(U){const M=s.maxBuyItem(U);return M>0&&(o.value[U]={count:M,visible:!0},setTimeout(()=>{o.value[U]&&(o.value[U].visible=!1)},2e3)),M}function C(){let U=0,M=0,x=!0;for(;x;){const $=s.shopItems.filter(re=>s.isItemUnlocked(re.id)&&s.getItemLevel(re.id)<re.maxLevel).map(re=>({id:re.id,cost:s.getNextLevelCost(re.id)})).filter(re=>e.pheromoneEssence.gte(re.cost));if($.length===0){x=!1;continue}let Z=$[0];for(const re of $)re.cost.lt(Z.cost)&&(Z=re);s.upgradeItem(Z.id)?(U++,M++):x=!1,U>1e3&&(x=!1)}return U>0&&(i.value={count:U,visible:!0,totalLevels:M},setTimeout(()=>{i.value.visible=!1},2e3)),U}function E(U){return`+${(U instanceof Se?U:new Se(String(U))).sub(1).mul(100).toFixed(1)}%`}function k(U){const M=s.getNextLevelCost(U);return e.pheromoneEssence.gte(M)}function A(U){const M=s.shopItems.find(re=>re.id===U),x=M&&s.getItemLevel(U)>=M.maxLevel,$=k(U),Z=M&&s.isItemUnlocked(U),me="mt-4 w-full py-2 px-4 text-white rounded-lg transition-colors duration-200 flex items-center justify-center";return Z?x?`${me} opacity-50 cursor-not-allowed ${r.background.replace("bg-","bg-indigo-")}`:$?`${me} ${r.background.replace("bg-","bg-indigo-600 hover:bg-indigo-700")}`:`${me} opacity-50 cursor-not-allowed bg-red-600`:`${me} opacity-50 cursor-not-allowed bg-gray-500`}function S(U){const M=s.shopItems.find(Z=>Z.id===U),x=M&&s.getItemLevel(U)>=M.maxLevel;return!!(!(M&&s.isItemUnlocked(U))||x||!k(U))}const T=q(()=>s.getAllShopItemsWithStatus),R=q(()=>s.shopItems.filter(U=>{const M=s.getItemLevel(U.id);return s.isItemUnlocked(U.id)&&M>=U.maxLevel}).length);function L(){s.toggleHideMaxedItems()}function P(U){return s.calculateMaxBuyLevels(U)}function I(U){const M=P(U);return M<=0?"Cannot purchase any levels":`Buy ${M} levels`}function D(U){const M=P(U),x=s.calculateMaxBuyCost(U);return{levels:M,cost:be(x)}}return(U,M)=>(h(),v(De,null,[a("div",ece,[a("div",tce,[a("div",sce,[a("div",nce,[a("span",{class:K(["i-heroicons-beaker mr-2",b(r).icon])},null,2),M[4]||(M[4]=a("h2",{class:"text-lg font-bold"},"Pheromone Essence Shop",-1))]),a("div",rce,[a("div",oce,[a("span",{class:K(["i-heroicons-flask text-lg mr-1.5",b(r).icon])},null,2),a("span",{class:K(["text-sm font-medium",b(r).text])},_(b(e).formattedPheromoneEssence),3)]),a("button",{onClick:C,class:"ml-2 flex items-center justify-center py-1 px-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-lg transition-colors duration-200 relative"},[M[7]||(M[7]=a("span",{class:"i-heroicons-arrow-path mr-1"},null,-1)),M[8]||(M[8]=oe(" Max All ")),i.value.visible?(h(),v("div",{key:0,class:K(["absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-10 text-center text-xs font-medium text-green-600 dark:text-green-400 bg-green-100 dark:bg-gray-800 py-1 px-2 rounded-md transition-opacity duration-300 shadow-lg",i.value.visible?"opacity-100":"opacity-0"])},[M[5]||(M[5]=a("span",{class:"i-heroicons-plus-circle mr-1"},null,-1)),oe(" +"+_(i.value.totalLevels)+" levels! ",1),M[6]||(M[6]=a("div",{class:"absolute w-0 h-0 left-1/2 top-full -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-green-100 dark:border-t-gray-800"},null,-1))],2)):Q("",!0)])])]),a("div",ice,[a("div",{class:K(["p-2 rounded-lg",[b(r).background.replace("/70","/30")]])},[a("div",ace,[a("h4",{class:K(["text-sm font-medium",b(r).text])},"Active Pheromone Multipliers",2),a("button",{onClick:M[0]||(M[0]=x=>c.value=!0),class:"flex items-center text-xs py-1 px-2 rounded-lg transition-colors bg-purple-100 hover:bg-purple-200 dark:bg-purple-700/30 dark:hover:bg-purple-700/60 text-purple-700 dark:text-purple-300"},M[9]||(M[9]=[a("span",{class:"i-heroicons-chart-bar mr-1"},null,-1),a("span",null,"Detailed Breakdown",-1)]))]),Ye(Dle)],2)]),a("div",lce,[a("div",{class:K(["flex items-center p-2 rounded-lg flex-1 min-w-[140px] sm:min-w-0 sm:max-w-[220px]",b(r).background.replace("/70","/30")])},[a("span",{class:K(["i-heroicons-arrow-up-down text-sm mr-1",b(r).icon])},null,2),a("select",{value:d.value,onChange:M[1]||(M[1]=x=>p(x.target.value)),class:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-xs rounded-md px-1.5 py-1 flex-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"},[(h(),v(De,null,Ge(u,x=>a("option",{key:x.value,value:x.value},_(x.label),9,uce)),64))],40,cce),a("button",{onClick:M[2]||(M[2]=x=>p(d.value)),class:"ml-1 px-1.5 py-1 text-xs rounded-md bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 text-indigo-700 dark:text-indigo-300 transition-colors"},[m.value==="asc"?(h(),v("span",dce)):(h(),v("span",mce))])],2),a("div",{class:K(["flex items-center justify-between p-2 rounded-lg flex-1",b(r).background.replace("/70","/30")])},[a("div",fce,[a("span",{class:K(["i-heroicons-eye-slash mr-1.5 text-sm",b(r).icon])},null,2),a("span",{class:K(["text-xs sm:text-sm",b(r).text])},"Hide maxed",2),f.value&&R.value>0?(h(),v("span",{key:0,class:K(["ml-1.5 text-xs px-1.5 py-0.5 rounded-full",[b(r).background.replace("/70",""),b(r).text]])},_(R.value),3)):Q("",!0)]),a("button",{onClick:L,class:K(["relative inline-flex items-center h-5 sm:h-6 rounded-full w-10 sm:w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",f.value?"bg-indigo-600":"bg-gray-300 dark:bg-gray-600"])},[a("span",{class:K(["inline-block w-3.5 sm:w-4 h-3.5 sm:h-4 transform bg-white rounded-full transition-transform",f.value?"translate-x-5 sm:translate-x-6":"translate-x-1"])},null,2)],2)],2)]),a("div",pce,[(h(!0),v(De,null,Ge(T.value,x=>{var $,Z;return h(),v("div",{key:x.id,class:K(["bg-white dark:bg-gray-800 rounded-lg p-3 md:p-4 shadow-sm border grid grid-cols-[2fr_1fr] md:grid-cols-[3fr_1fr] gap-2 md:gap-4",x.unlocked?"border-indigo-200 dark:border-indigo-800":"border-gray-300 dark:border-gray-700 border-dashed"])},[a("div",hce,[a("div",gce,[a("div",vce,[a("h3",{class:K(["text-base md:text-lg font-semibold truncate",b(r).text])},_(x.name),3),a("p",{class:K(["text-xs md:text-sm line-clamp-2 md:line-clamp-none",b(r).text])},_(x.description),3)]),a("div",bce,[a("div",{class:K(["text-xs md:text-sm",b(r).text])}," Level "+_(b(s).getItemLevel(x.id))+"/"+_(x.maxLevel),3),a("div",{class:K(["text-xs",k(x.id)?b(r).text:"text-red-500 dark:text-red-300"])}," Next: "+_(b(be)(b(s).getNextLevelCost(x.id)))+" Essence ",3)])]),x.unlocked?Q("",!0):(h(),v("div",yce,[a("div",_ce,[M[10]||(M[10]=a("span",{class:"i-heroicons-information-circle text-blue-500 dark:text-blue-400 mr-1 md:mr-2"},null,-1)),a("div",xce," To unlock: "+_(b(s).getUnlockRequirementText(x.id)),1)])])),a("div",kce,[(h(!0),v(De,null,Ge(x.modifiers,(me,re)=>(h(),v("div",{key:me.target,class:K(["flex items-center justify-between text-xs md:text-sm py-1 px-1.5 md:px-2 rounded-md",b(s).getItemLevel(x.id)>=me.unlockLevel?"bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800/50":"bg-gray-50 dark:bg-gray-700/30 border border-gray-100 dark:border-gray-700/50"])},[a("div",wce,[b(s).getItemLevel(x.id)>=me.unlockLevel?(h(),v("span",Ece)):(h(),v("span",Cce)),b(s).getItemLevel(x.id)>=me.unlockLevel?(h(),v("span",{key:2,class:K([b(r).text,"truncate"])},_(me.description),3)):(h(),v("span",Sce,[M[11]||(M[11]=oe(" Mystery enhancement ")),a("span",Tce,"(Unlocks at level "+_(me.unlockLevel)+")",1)]))]),b(s).getItemLevel(x.id)>=me.unlockLevel?(h(),v("div",Ace,_(E(b(s).getCurrentModifierValue(x.id,re))),1)):Q("",!0)],2))),128))]),($=o.value[x.id])!=null&&$.visible?(h(),v("div",{key:1,class:K(["mt-1 md:mt-2 text-center text-xs md:text-sm font-medium text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 py-0.5 md:py-1 px-2 rounded-md transition-opacity duration-300",(Z=o.value[x.id])!=null&&Z.visible?"opacity-100":"opacity-0"])},[M[12]||(M[12]=a("span",{class:"i-heroicons-plus-circle mr-1"},null,-1)),oe(" Purchased "+_(o.value[x.id].count)+" levels! ",1)],2)):Q("",!0)]),a("div",Ice,[a("button",{class:K([A(x.id),"flex items-center justify-center py-1.5 md:py-2 flex-1 text-sm md:text-base"]),disabled:S(x.id),onClick:me=>g(x.id)},[M[13]||(M[13]=a("span",{class:"i-heroicons-arrow-up-circle mr-1 md:mr-2"},null,-1)),b(s).getItemLevel(x.id)>=x.maxLevel?(h(),v("span",Mce,"Max")):x.unlocked?k(x.id)?(h(),v("span",Lce,"Upgrade")):(h(),v("span",Rce,"Can't Afford")):(h(),v("span",$ce,"Unlock"))],10,Pce),a("button",{onClick:me=>w(x.id),disabled:S(x.id),class:K([A(x.id),"flex items-center justify-center py-1.5 md:py-2 relative group flex-1 text-sm md:text-base"]),title:I(x.id)},[M[15]||(M[15]=a("span",{class:"i-heroicons-arrow-path mr-1"},null,-1)),M[16]||(M[16]=oe(" Max ")),P(x.id)>0&&!S(x.id)?(h(),v("div",Nce,[oe(" Buy "+_(D(x.id).levels)+" levels ",1),a("div",Oce,"Cost: "+_(D(x.id).cost)+" Essence",1),M[14]||(M[14]=a("div",{class:"absolute w-0 h-0 left-1/2 top-full -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800 dark:border-t-gray-900"},null,-1))])):Q("",!0)],10,Dce)])],2)}),128))]),a("div",{class:K(["mt-3 md:mt-4 text-xs md:text-sm p-2 md:p-3 rounded-lg",[b(r).text,b(r).background.replace("/70","/30")]])},[a("div",Fce,[a("span",{class:K(["i-heroicons-information-circle mt-0.5 mr-1.5 md:mr-2",b(r).icon])},null,2),M[17]||(M[17]=a("div",null,[a("p",{class:"mb-1"},"Pheromone Essence is collected from defeated enemies in the Adventure mode."),a("p",null,"Higher-level enemies provide more essence. Defeat tougher bugs to collect more!"),a("p",{class:"mt-1 text-blue-600 dark:text-blue-400"},"Upgrade existing items to discover new pheromone enhancements!")],-1))])],2)])]),Ye(Zle,{show:c.value,onClose:M[3]||(M[3]=x=>c.value=!1)},null,8,["show"])],64))}}),qce=()=>{const t=Qs(),e=ir(),s=Hr(),n=Y(!1),r=Y(t.filterText),o=Y(t.showTooStrongBugs);(!t.sortOption||t.sortOption===$d.DEFAULT)&&t.setSortOption($d.REWARD_VALUE),dt(()=>r.value,w=>{t.setTextFilter(w)}),dt(()=>t.filterText,w=>{r.value=w}),dt(()=>o.value,w=>{t.setShowTooStrongBugs(w)}),dt(()=>t.showTooStrongBugs,w=>{o.value=w});const i=w=>{t.setQuestTypeFilter(w)},c=w=>{t.setRewardTypeFilter(w)},u=w=>{t.setSortOption(w)},d=()=>{r.value="",t.clearFilters(),o.value=!0,t.setSortOption($d.REWARD_VALUE)},m=w=>{const C=s.getBugById(w);if(!C)return!1;const E=e.calculateDamage(e.playerDamage,C.defense);return E.lte(0)?!1:C.maxHealth.div(E).ceil().lte(10)},f=q(()=>o.value?t.filteredAvailableQuests:t.filteredAvailableQuests.filter(w=>{const C=w.goals.filter(k=>k.type===Ws.KILL_BUGS);return C.length===0||["bug_slayer_initiate","extreme_bug_hunter"].includes(w.id)||w.id.includes("exterminator_")?!0:C.every(k=>k.target?m(k.target):!0)})),p=q(()=>!!(t.filterQuestType||t.filterRewardType||t.filterText||!o.value)),g=q(()=>{let w=0;return t.filterQuestType&&w++,t.filterRewardType&&w++,t.filterText&&w++,o.value||w++,w});return{isFilterPanelOpen:n,searchQuery:r,showTooStrongBugs:o,sortOption:q(()=>t.sortOption),filterQuestType:q(()=>t.filterQuestType),filterRewardType:q(()=>t.filterRewardType),hasActiveFilters:p,activeFilterCount:g,filteredQuestsByStrength:f,setQuestTypeFilter:i,setRewardTypeFilter:c,setSortOption:u,clearAllFilters:d,canDefeatBug:m,QuestType:Ws,RewardType:Fs,QuestSortOption:$d}};function hL(){const t=Qs(),e=Y(null),s=q(()=>t.questQueue.map(k=>t.getAvailableQuestById(k)).filter(k=>k!==void 0)),n=q(()=>t.questQueue.length),r=q(()=>n.value===0),o=q(()=>t.isQueueModalOpen),i=()=>{t.openQueueModal()},c=()=>{t.closeQueueModal(),e.value=null},u=k=>t.addQuestToQueue(k),d=k=>t.addMultipleQuestsToQueue(k),m=k=>t.removeQuestFromQueue(k),f=()=>t.startNextQuestFromQueue(),p=()=>{t.clearQuestQueue()},g=()=>t.toggleAutoStartNextQuest(),w=k=>{e.value=k},C=()=>{e.value=null},E=k=>{e.value!==null&&(t.reorderQuestQueue(e.value,k),e.value=null)};return{isQueueModalOpen:o,queuedQuests:s,queueLength:n,isQueueEmpty:r,openQueueModal:i,closeQueueModal:c,addToQueue:u,addAllToQueue:d,removeFromQueue:m,startNextQuest:f,clearQueue:p,toggleAutoStart:g,autoStartEnabled:q(()=>t.autoStartNextQuest),onDragStart:w,onDragEnd:C,onDrop:E,draggedItemIndex:e}}function Bce(){const t=Y(!1),e=Y(null),s=Y(null),n=Y(0),r=Y(0);return{isDragging:t,draggedItemId:e,draggedItemIndex:s,touchStartX:n,touchStartY:r,startDrag:(u,d,m)=>{t.value=!0,e.value=u,s.value=d,m instanceof MouseEvent?(n.value=m.clientX,r.value=m.clientY):m.touches&&m.touches.length>0&&(n.value=m.touches[0].clientX,r.value=m.touches[0].clientY,m.preventDefault())},endDrag:()=>{t.value=!1,e.value=null,s.value=null},isDraggedOver:(u,d)=>{const m=u.getBoundingClientRect();let f,p;if(d instanceof MouseEvent)f=d.clientX,p=d.clientY;else if(d.touches&&d.touches.length>0)f=d.touches[0].clientX,p=d.touches[0].clientY;else return!1;return f>=m.left&&f<=m.right&&p>=m.top&&p<=m.bottom}}}const Vce={class:"p-6 overflow-y-auto max-h-[60vh]"},Hce={class:"mb-4 flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md"},Gce={class:"relative inline-flex items-center cursor-pointer"},jce=["checked"],Wce={key:0,class:"text-center py-8"},zce={key:1,class:"space-y-3"},Qce={class:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-3"},Kce={class:"space-y-3"},Yce=["draggable","onDragstart","onDrop","onTouchstart"],Xce={class:"flex items-center p-3"},Jce={key:0,class:"flex-shrink-0 cursor-move px-2 text-gray-400"},Zce={key:1,class:"flex-shrink-0 flex flex-col px-1.5"},eue=["onClick","disabled"],tue=["onClick","disabled"],sue={class:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-xs text-blue-700 dark:text-blue-300 mr-3"},nue={class:"flex-grow min-w-0"},rue={class:"font-medium text-gray-800 dark:text-gray-200 truncate"},oue={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},iue={class:"ml-3"},aue={key:0,class:"px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},lue={key:1,class:"px-2 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},cue=["onClick"],uue={class:"flex justify-end mt-4"},due=Je({__name:"QuestQueueModal",setup(t){const{isQueueModalOpen:e,queuedQuests:s,queueLength:n,isQueueEmpty:r,closeQueueModal:o,removeFromQueue:i,clearQueue:c,toggleAutoStart:u,autoStartEnabled:d,onDragStart:m,onDragEnd:f,onDrop:p,draggedItemIndex:g}=hL(),{isClosing:w,handleClose:C,preventBackgroundTouchMove:E}=Gr(),k=Bce(),A=i3("(max-width: 767px)"),S=$=>{switch($){case Ws.KILL_BUGS:return"Kill Bugs";case Ws.COLLECT_FOOD:return"Collect Food";case Ws.COLLECT_PHEROMONE:return"Collect Pheromone";default:return"Unknown"}},T=$=>{if($==null)return"0";try{return be(l($),2)}catch(Z){return console.error("Error formatting value:",$,Z),"0"}},R=$=>{if(!$.goals||$.goals.length===0)return"No requirements";if($.goals.length===1){const Z=$.goals[0];switch(Z.type){case Ws.KILL_BUGS:return`Kill ${T(Z.requiredAmount)} ${Z.target||"bugs"}`;case Ws.COLLECT_FOOD:return`Collect ${T(Z.requiredAmount)} food`;case Ws.COLLECT_PHEROMONE:return`Collect ${T(Z.requiredAmount)} pheromone essence`;default:return"Unknown requirement"}}return`Complete ${$.goals.length} objectives`},L=($,Z,me)=>{Z.touches&&Z.touches.length>0&&(k.startDrag(me,$,Z),m($))},P=$=>{k.isDragging.value&&$.preventDefault()},I=$=>{if(k.isDragging.value&&k.draggedItemIndex.value!==null){const Z=document.querySelectorAll(".quest-queue-item");for(let me=0;me<Z.length;me++)if(k.isDraggedOver(Z[me],$)){p(me);break}k.endDrag(),f()}},D=()=>{C(o)},U=$=>{$.key==="Escape"&&e.value&&D()};Et(()=>{window.addEventListener("keydown",U)}),xn(()=>{window.removeEventListener("keydown",U)});const M=$=>{$>0&&(m($),p($-1),f())},x=$=>{$<s.value.length-1&&(m($),p($+1),f())};return($,Z)=>(h(),Tt(or,{name:"fade"},{default:Rt(()=>[b(e)?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/30 dark:bg-black/60 z-50 backdrop-blur-sm flex items-center justify-center p-4 modal-backdrop","data-modal-backdrop":"true",onClick:xt(D,["self"]),onTouchmove:Z[7]||(Z[7]=xt((...me)=>b(E)&&b(E)(...me),["self"]))},[a("div",{class:K(["relative bg-white dark:bg-slate-900 rounded-lg shadow-lg max-w-3xl w-full max-h-[calc(100vh-2rem)] overflow-hidden",{"opacity-75":b(w)}])},[a("div",{class:"px-6 py-4 border-b border-blue-200 dark:border-blue-700 flex items-center"},[Z[9]||(Z[9]=a("div",{class:"flex-grow"},[a("h2",{class:"text-xl font-bold text-blue-800 dark:text-blue-300"}," Quest Queue "),a("div",{class:"text-sm text-blue-600 dark:text-blue-400 mt-1"}," Manage your upcoming quests ")],-1)),a("button",{class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors","aria-label":"Close modal",onClick:D},Z[8]||(Z[8]=[a("svg",{class:"w-5 h-5 text-slate-500 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",Vce,[a("div",Hce,[Z[11]||(Z[11]=a("div",null,[a("h3",{class:"font-medium text-blue-800 dark:text-blue-300"},"Auto-start next quest"),a("p",{class:"text-sm text-blue-600 dark:text-blue-400"}," Automatically start the next quest in queue when the current one completes ")],-1)),a("label",Gce,[a("input",{type:"checkbox",checked:b(d),onChange:Z[0]||(Z[0]=(...me)=>b(u)&&b(u)(...me)),class:"sr-only peer"},null,40,jce),Z[10]||(Z[10]=a("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),b(r)?(h(),v("div",Wce,Z[12]||(Z[12]=[a("div",{class:"i-heroicons-queue-list text-blue-400 dark:text-blue-500 w-12 h-12 mx-auto mb-3"},null,-1),a("h3",{class:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2"},"No quests in queue",-1),a("p",{class:"text-gray-500 dark:text-gray-400"}," Add quests to the queue from the available quests tab ",-1)]))):(h(),v("div",zce,[a("h3",Qce," Queued quests ("+_(b(n))+") ",1),a("ul",Kce,[(h(!0),v(De,null,Ge(b(s),(me,re)=>(h(),v("li",{key:re,class:K(["quest-queue-item bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",{"opacity-50":b(g)===re}]),draggable:!b(A),onDragstart:J=>!b(A)&&b(m)(re),onDragend:Z[1]||(Z[1]=J=>!b(A)&&b(f)),onDragover:Z[2]||(Z[2]=xt(()=>{},["prevent"])),onDragenter:Z[3]||(Z[3]=xt(()=>{},["prevent"])),onDrop:J=>!b(A)&&b(p)(re),onTouchstart:J=>!b(A)&&L(re,J,me.id),onTouchmove:Z[4]||(Z[4]=J=>!b(A)&&P(J)),onTouchend:Z[5]||(Z[5]=J=>!b(A)&&I(J))},[a("div",Xce,[b(A)?(h(),v("div",Zce,[a("button",{class:K(["text-gray-400 hover:text-blue-500 p-0.5",{"opacity-30 cursor-not-allowed":re===0}]),onClick:xt(J=>M(re),["stop"]),disabled:re===0},Z[14]||(Z[14]=[a("div",{class:"i-heroicons-chevron-up w-4 h-4"},null,-1)]),10,eue),a("button",{class:K(["text-gray-400 hover:text-blue-500 p-0.5",{"opacity-30 cursor-not-allowed":re===b(s).length-1}]),onClick:xt(J=>x(re),["stop"]),disabled:re===b(s).length-1},Z[15]||(Z[15]=[a("div",{class:"i-heroicons-chevron-down w-4 h-4"},null,-1)]),10,tue)])):(h(),v("div",Jce,Z[13]||(Z[13]=[a("div",{class:"i-heroicons-bars-3 w-5 h-5"},null,-1)]))),a("div",sue,_(re+1),1),a("div",nue,[a("h4",rue,_(me.title),1),a("p",oue,_(R(me)),1)]),a("div",iue,[me.goals&&me.goals.length===1?(h(),v("span",aue,_(S(me.goals[0].type)),1)):(h(),v("span",lue,_(me.goals.length)+" Goals ",1))]),a("button",{onClick:J=>b(i)(me.id),class:"ml-2 p-1.5 rounded-full text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"},Z[16]||(Z[16]=[a("div",{class:"i-heroicons-trash w-4 h-4"},null,-1)]),8,cue)])],42,Yce))),128))]),a("div",uue,[a("button",{onClick:Z[6]||(Z[6]=(...me)=>b(c)&&b(c)(...me)),class:"px-3 py-1.5 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-800/50 text-red-700 dark:text-red-300 text-sm rounded-md transition-colors flex items-center"},Z[17]||(Z[17]=[a("span",{class:"i-heroicons-trash mr-1"},null,-1),oe(" Clear Queue ")]))])]))]),a("div",{class:"px-6 py-4 border-t border-blue-200 dark:border-blue-700 flex justify-end"},[a("button",{class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors font-medium",onClick:D}," Close ")])],2)],32)):Q("",!0)]),_:1}))}}),mue=Ct(due,[["__scopeId","data-v-86bb6094"]]),fue={class:"space-y-4"},pue={key:0,class:"space-y-3"},hue={class:"flex items-center justify-between"},gue={class:"text-lg font-semibold flex items-center"},vue={key:0,class:"i-heroicons-pause text-gray-600 dark:text-gray-400 mr-2"},bue={key:1,class:"i-heroicons-play text-amber-600 dark:text-amber-400 mr-2"},yue={key:0,class:"px-2.5 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 flex items-center"},_ue={key:1,class:"px-2.5 py-1 rounded-full text-xs bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300 flex items-center"},xue={class:"bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-900/30 dark:to-amber-800/20 rounded-lg shadow-lg p-4 border border-amber-200/50 dark:border-amber-700/30"},kue={class:"flex items-center mb-2"},wue={class:"text-xl font-bold text-amber-800 dark:text-amber-300"},Eue={class:"text-amber-700 dark:text-amber-400 mb-4"},Cue={class:"mb-4"},Sue={class:"flex justify-between text-sm mb-1"},Tue={class:"text-amber-700 dark:text-amber-400 font-medium"},Aue={class:"w-full bg-amber-200 dark:bg-amber-700/50 rounded-full h-3"},Iue={key:0,class:"space-y-4"},Pue={class:"flex justify-between text-sm"},Mue={class:"text-amber-700 dark:text-amber-400"},$ue={class:"text-amber-700 dark:text-amber-400"},Rue={class:"w-full bg-amber-200 dark:bg-amber-700/50 rounded-full h-2.5"},Lue={class:"mt-6 bg-amber-50/50 dark:bg-amber-900/20 p-3 rounded-md border border-amber-200/30 dark:border-amber-700/30"},Due={class:"space-y-2"},Nue={class:"w-5 h-5 mr-2 rounded-full bg-amber-200 dark:bg-amber-700/50 flex items-center justify-center text-xs text-amber-700 dark:text-amber-300"},Oue={class:"mt-4 flex gap-2"},Fue={class:"mb-4"},Uue={class:"flex border-b border-gray-200 dark:border-gray-700"},que={class:"flex flex-wrap gap-2 mt-3 justify-between"},Bue={key:0,class:"ml-1 w-5 h-5 flex items-center justify-center rounded-full bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-300 text-xs"},Vue={class:"flex gap-2"},Hue={key:0,class:"ml-1 w-5 h-5 flex items-center justify-center rounded-full bg-blue-200 dark:bg-blue-800 text-blue-800 dark:text-blue-300 text-xs"},Gue=["title"],jue={class:"flex gap-1 items-center"},Wue={class:"flex bg-gray-100 dark:bg-gray-700 rounded-lg p-0.5"},zue={key:1,class:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mb-4"},Que={class:"flex flex-col gap-4"},Kue={class:"w-full"},Yue={class:"relative rounded-md shadow-sm"},Xue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Jue={class:"w-full"},Zue=["value"],ede=["value"],tde=["value"],sde=["value"],nde={class:"w-full"},rde=["value"],ode=["value"],ide=["value"],ade=["value"],lde=["value"],cde=["value"],ude={class:"w-full"},dde={class:"inline-flex items-center text-sm"},mde={class:"w-full"},fde=["value"],pde=["value"],hde=["value"],gde=["value"],vde=["value"],bde=["value"],yde=["value"],_de={class:"flex justify-end mt-2"},xde={key:2,class:"space-y-3"},kde={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700/50"},wde={class:"text-blue-700 dark:text-blue-400"},Ede={key:1,class:"space-y-4"},Cde={class:"text-lg font-semibold mb-2 flex items-center"},Sde={class:"ml-2 px-2 py-0.5 rounded-full text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300"},Tde={key:0,class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},Ade={class:"bg-blue-50 dark:bg-blue-900/20 px-4 py-2 border-b border-blue-100 dark:border-blue-800 flex justify-between items-center"},Ide={class:"flex items-center"},Pde={class:"font-semibold text-blue-800 dark:text-blue-300"},Mde={key:0,class:"px-2 py-0.5 rounded-full text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300"},$de={key:1,class:"px-2 py-0.5 rounded-full text-xs bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-300"},Rde={class:"p-4 space-y-3"},Lde={key:0,class:"text-gray-700 dark:text-gray-300 text-sm"},Dde={class:"bg-gray-50 dark:bg-gray-700/50 rounded-md p-2 text-sm space-y-2"},Nde={key:0,class:"flex justify-between items-center"},Ode={class:"text-gray-700 dark:text-gray-300"},Fde={key:1},Ude={class:"space-y-1 pl-5"},qde={class:"flex items-start"},Bde={class:"w-4 h-4 mr-1.5 mt-0.5 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-xs text-blue-600 dark:text-blue-400 flex-shrink-0"},Vde={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},Hde={key:2,class:"space-y-1"},Gde={class:"ml-4 space-y-2"},jde={class:"w-4 h-4 mr-2 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-xs text-blue-600 dark:text-blue-400"},Wde={class:"text-gray-600 dark:text-gray-400"},zde={class:"flex gap-2 mt-2"},Qde=["onClick","disabled"],Kde={key:0,class:"i-heroicons-play mr-1"},Yde={key:1,class:"i-heroicons-clock mr-1"},Xde=["onClick","disabled"],Jde={key:3,class:"space-y-3"},Zde={key:0,class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-700/50"},eme={class:"text-green-700 dark:text-green-400"},tme={key:1,class:"space-y-4"},sme={class:"text-lg font-semibold mb-2 flex items-center"},nme={class:"ml-2 px-2 py-0.5 rounded-full text-xs bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300"},rme={key:0,class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},ome={class:"bg-green-50 dark:bg-green-900/20 px-4 py-2 border-b border-green-100 dark:border-green-800 flex justify-between items-center"},ime={class:"flex items-center"},ame={class:"font-semibold text-green-800 dark:text-green-300"},lme={class:"flex items-center"},cme={key:0,class:"px-2 py-0.5 rounded-full text-xs bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 mr-2"},ume={key:1,class:"px-2 py-0.5 rounded-full text-xs bg-green-100 dark:bg-green-800 text-green-800 dark:text-green-300 mr-2"},dme={class:"p-4 space-y-3"},mme={key:0,class:"text-gray-700 dark:text-gray-300 text-sm"},fme={class:"bg-green-50 dark:bg-green-900/20 rounded-md p-2 text-sm space-y-2"},pme={key:0,class:"mt-1 pl-5"},hme={class:"space-y-1"},gme={class:"flex items-start"},vme={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},bme={key:2,class:"space-y-1"},yme={class:"ml-4 space-y-2"},_me={class:"w-4 h-4 mr-2 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-xs text-green-600 dark:text-green-400"},xme={class:"text-gray-600 dark:text-gray-400"},kme={key:4,class:"mt-8 border-t pt-4 border-gray-200 dark:border-gray-700"},wme={class:"flex gap-2"},gL=Je({__name:"QuestTabContent",setup(t){const e=Qs();Ks();const{showToast:s}=Us(),n=St(),{getRewardValue:r,formatReward:o}=Q_(),{isFilterPanelOpen:i,searchQuery:c,sortOption:u,filterQuestType:d,filterRewardType:m,hasActiveFilters:f,activeFilterCount:p,setQuestTypeFilter:g,setRewardTypeFilter:w,setSortOption:C,clearAllFilters:E,QuestType:k,RewardType:A,QuestSortOption:S,showTooStrongBugs:T,filteredQuestsByStrength:R}=qce(),{queueLength:L,isQueueEmpty:P,openQueueModal:I,addToQueue:D,addAllToQueue:U}=hL(),M=X=>{if(!X.goals||X.goals.length===0)return!1;for(const H of X.goals)H.type===k.KILL_BUGS&&H.target;return!0},x=q(()=>R.value.filter(X=>M(X))),$=X=>{e.activeTab=X},Z=X=>{e.startQuest(X)},me=()=>{e.activeQuest&&(e.cancelQuest(),console.log("Quest canceled"))},re=()=>{e.pauseQuest()},J=()=>{e.resumeQuest()},le=X=>{const W=X.target.value||null;g(W)},se=X=>{const W=X.target.value||null;w(W)},z=X=>{const W=X.target.value;C(W)},ce=X=>{switch(X){case k.KILL_BUGS:return"Kill Bugs";case k.COLLECT_FOOD:return"Collect Food";case k.COLLECT_PHEROMONE:return"Collect Pheromone";default:return"Unknown"}},pe=X=>{if(!X.goals||X.goals.length===0)return"No requirements";if(X.goals.length===1){const H=X.goals[0];switch(H.type){case k.KILL_BUGS:return`Kill ${Ue(H.requiredAmount)} ${H.target||"bugs"}`;case k.COLLECT_FOOD:return`Collect ${Ue(H.requiredAmount)} food`;case k.COLLECT_PHEROMONE:return`Collect ${Ue(H.requiredAmount)} pheromone essence`;default:return"Unknown requirement"}}return`Complete ${X.goals.length} objectives`},_e=X=>{if((!(X.requiredAmount instanceof Se)||!(X.currentAmount instanceof Se))&&(Q1("Invalid goal amounts - not Decimal instances",{current:X.currentAmount,required:X.requiredAmount}),X.currentAmount=l(X.currentAmount||0),X.requiredAmount=l(X.requiredAmount||0)),X.requiredAmount.eq(0))return 100;try{const H=X.currentAmount.div(X.requiredAmount);return Math.min(100,Math.floor(H.toNumber()*100))}catch(H){return console.error("Error calculating goal progress percentage:",H),0}},Ee=X=>{if(!X.goals||X.goals.length===0)return 0;const W=X.goals.map(ge=>_e(ge)).reduce((ge,Te)=>ge+Te,0);return Math.floor(W/X.goals.length)},Ue=X=>be(new Se(X),2),ze=Y(null),Re=Y(null);dt(()=>e.activeQuest,(X,H)=>{H&&(ze.value=H.id,Re.value=H.title),H&&!X&&ze.value&&e.completedQuests.some(ge=>ge.id===ze.value)&&console.log("Quest completed!",ze.value),ze.value=(X==null?void 0:X.id)||null,Re.value=(X==null?void 0:X.title)||null},{immediate:!0});const $e=q(()=>e.gridDensity==="compact"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4"),Ce=q(()=>n.getUpgradeCount("unlockQueueAll").gt(0)),Oe=()=>{if(Ce.value){const X=x.value.map(H=>H.id);U(X)}else s('Unlock "Mass Quest Queueing" in the Evolution tab to queue all quests at once',"info")},ve=X=>!X.rewards||X.rewards.length===0?l(0):X.rewards.reduce((H,W)=>{const ge=r(W,X.tier);return H.add(ge)},l(0)),fe=X=>{const H=ve(X);return H.gte(1e6)?"High Value":H.gte(1e5)?"Medium Value":"Low Value"};return(X,H)=>(h(),v(De,null,[a("div",fue,[b(e).activeQuest?(h(),v("div",pue,[a("div",hue,[a("h3",gue,[b(e).isQuestPaused?(h(),v("span",vue)):(h(),v("span",bue)),H[10]||(H[10]=oe(" Active Quest "))]),b(e).isQuestPaused?(h(),v("span",yue,H[11]||(H[11]=[a("span",{class:"i-heroicons-pause-circle-solid mr-1"},null,-1),oe(" Paused ")]))):(h(),v("span",_ue,H[12]||(H[12]=[a("span",{class:"i-heroicons-clock-solid mr-1"},null,-1),oe(" In Progress ")])))]),a("div",xue,[a("div",kue,[a("h3",wue,_(b(e).activeQuest.title),1),b(e).activeQuest.tier?(h(),v("span",{key:0,class:K(["ml-2 px-2 py-0.5 text-xs rounded-full",{"bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300":b(e).activeQuest.tier===1,"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300":b(e).activeQuest.tier===2,"bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300":b(e).activeQuest.tier===3,"bg-amber-100 dark:bg-amber-900/40 text-amber-800 dark:text-amber-300":b(e).activeQuest.tier===4,"bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300":b(e).activeQuest.tier===5}])}," Tier "+_(b(e).activeQuest.tier),3)):Q("",!0),a("span",{class:K(["ml-2 px-1.5 py-0.5 text-xs rounded-full",{"bg-gray-100 dark:bg-gray-900/40 text-gray-800 dark:text-gray-300":fe(b(e).activeQuest)==="Low Value","bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300":fe(b(e).activeQuest)==="Medium Value","bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-300":fe(b(e).activeQuest)==="High Value"}])},_(fe(b(e).activeQuest)),3)]),a("p",Eue,_(b(e).activeQuest.description),1),a("div",Cue,[a("div",Sue,[H[13]||(H[13]=a("span",{class:"text-amber-700 dark:text-amber-400 font-medium"},"Overall Progress",-1)),a("span",Tue,_(Ee(b(e).activeQuest))+"%",1)]),a("div",Aue,[a("div",{class:K(["h-3 rounded-full",b(e).isQuestPaused?"bg-gray-400 dark:bg-gray-600":"bg-amber-500 dark:bg-amber-500"]),style:yt({width:`${Ee(b(e).activeQuest)}%`})},null,6)])]),b(e).activeQuest.goals?(h(),v("div",Iue,[(h(!0),v(De,null,Ge(b(e).activeQuest.goals,(W,ge)=>(h(),v("div",{key:ge,class:"space-y-2"},[a("div",Pue,[a("span",Mue,[H[14]||(H[14]=a("span",{class:"i-heroicons-flag mr-1 inline-block"},null,-1)),oe(" "+_(W.description||ce(W.type)+" Progress"),1)]),a("span",$ue,_(Ue(W.currentAmount))+" / "+_(Ue(W.requiredAmount)),1)]),a("div",Rue,[a("div",{class:K(["h-2.5 rounded-full",[b(e).isQuestPaused?"bg-gray-400 dark:bg-gray-600":{"bg-blue-600 dark:bg-blue-500":W.type===b(k).COLLECT_FOOD,"bg-green-600 dark:bg-green-500":W.type===b(k).COLLECT_PHEROMONE,"bg-red-600 dark:bg-red-500":W.type===b(k).KILL_BUGS,"bg-amber-600 dark:bg-amber-500":W.type!==b(k).COLLECT_FOOD&&W.type!==b(k).COLLECT_PHEROMONE&&W.type!==b(k).KILL_BUGS}]]),style:yt({width:`${_e(W)}%`})},null,6)])]))),128))])):Q("",!0),a("div",Lue,[H[15]||(H[15]=a("h4",{class:"text-lg font-semibold text-amber-800 dark:text-amber-300 mb-2"},"Rewards:",-1)),a("ul",Due,[(h(!0),v(De,null,Ge(b(e).activeQuest.rewards,(W,ge)=>(h(),v("li",{key:ge,class:"flex items-center text-amber-700 dark:text-amber-400"},[a("span",Nue,_(ge+1),1),oe(" "+_(b(o)(W,b(e).activeQuest.tier)),1)]))),128))])]),a("div",Oue,[b(e).isQuestPaused?Q("",!0):(h(),v("button",{key:0,onClick:re,class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded focus:outline-none transition-colors duration-200 flex items-center justify-center",title:"Pause Quest Progress"},H[16]||(H[16]=[a("span",{class:"i-heroicons-pause mr-1"},null,-1),oe(" Pause ")]))),b(e).isQuestPaused?(h(),v("button",{key:1,onClick:J,class:"px-4 py-2 bg-green-100 hover:bg-green-200 dark:bg-green-900/50 dark:hover:bg-green-800/70 text-green-700 dark:text-green-300 rounded focus:outline-none transition-colors duration-200 flex items-center justify-center",title:"Resume Quest Progress"},H[17]||(H[17]=[a("span",{class:"i-heroicons-play mr-1"},null,-1),oe(" Resume ")]))):Q("",!0),a("button",{onClick:me,class:"px-4 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/50 dark:hover:bg-red-800/70 text-red-700 dark:text-red-300 rounded focus:outline-none transition-colors duration-200 flex items-center justify-center"},H[18]||(H[18]=[a("span",{class:"i-heroicons-x-mark mr-1"},null,-1),oe(" Abandon Quest ")]))])]),H[19]||(H[19]=a("div",{class:"border-t border-gray-200 dark:border-gray-700 my-4"},null,-1))])):Q("",!0),a("div",Fue,[a("div",Uue,[a("button",{onClick:H[0]||(H[0]=W=>$("available")),class:K(["px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200",b(e).activeTab==="available"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},H[20]||(H[20]=[a("span",{class:"i-heroicons-clipboard-document-check mr-1 inline-block"},null,-1),oe(" Available ")]),2),a("button",{onClick:H[1]||(H[1]=W=>$("completed")),class:K(["px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200",b(e).activeTab==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border-b-2 border-green-500":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},H[21]||(H[21]=[a("span",{class:"i-heroicons-check-badge mr-1 inline-block"},null,-1),oe(" Completed ")]),2)]),a("div",que,[a("button",{onClick:H[2]||(H[2]=W=>i.value=!b(i)),class:K(["px-3 py-1.5 text-sm rounded-md transition-colors flex items-center",[b(f)?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"]])},[H[22]||(H[22]=a("span",{class:"i-heroicons-funnel mr-1"},null,-1)),H[23]||(H[23]=a("span",null,"Filters",-1)),b(f)?(h(),v("span",Bue,_(b(p)),1)):Q("",!0)],2),a("div",Vue,[a("button",{onClick:H[3]||(H[3]=(...W)=>b(I)&&b(I)(...W)),class:K(["px-3 py-1.5 text-sm rounded-md transition-colors flex items-center",[b(P)?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"]])},[H[24]||(H[24]=a("span",{class:"i-heroicons-queue-list mr-1"},null,-1)),H[25]||(H[25]=a("span",null,"Queue",-1)),b(P)?Q("",!0):(h(),v("span",Hue,_(b(L)),1))],2),b(e).activeTab==="available"&&x.value.length>0?(h(),v("button",{key:0,onClick:Oe,class:K(["px-3 py-1.5 text-sm rounded-md transition-colors flex items-center",[Ce.value?"bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-800/50 text-green-800 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 opacity-75 cursor-not-allowed"]]),title:Ce.value?"Queue all filtered quests":"Unlock Mass Quest Queueing in the Evolution tab"},[H[26]||(H[26]=a("span",{class:"i-heroicons-plus-circle mr-1"},null,-1)),a("span",null,"Queue All Filtered ("+_(x.value.length)+")",1)],10,Gue)):Q("",!0)]),a("div",jue,[H[29]||(H[29]=a("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"Layout:",-1)),a("div",Wue,[a("button",{onClick:H[4]||(H[4]=W=>b(e).gridDensity="compact"),class:K(["px-2 py-1 text-xs rounded-md transition-colors",b(e).gridDensity==="compact"?"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"]),title:"Compact View"},H[27]||(H[27]=[a("div",{class:"i-heroicons-table-cells-solid w-3.5 h-3.5"},null,-1)]),2),a("button",{onClick:H[5]||(H[5]=W=>b(e).gridDensity="comfortable"),class:K(["px-2 py-1 text-xs rounded-md transition-colors",b(e).gridDensity==="comfortable"?"bg-white dark:bg-gray-600 text-gray-800 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white"]),title:"Comfortable View"},H[28]||(H[28]=[a("div",{class:"i-heroicons-squares-2x2-solid w-3.5 h-3.5"},null,-1)]),2)])])])]),b(i)?(h(),v("div",zue,[a("div",Que,[a("div",Kue,[H[31]||(H[31]=a("label",{for:"searchQuests",class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Search",-1)),a("div",Yue,[H[30]||(H[30]=a("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[a("span",{class:"i-heroicons-magnifying-glass text-gray-400 dark:text-gray-500"})],-1)),Ut(a("input",{id:"searchQuests","onUpdate:modelValue":H[6]||(H[6]=W=>ws(c)?c.value=W:null),type:"text",class:"block w-full py-1.5 pl-10 pr-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Search quests..."},null,512),[[xa,b(c)]])])]),a("div",Xue,[a("div",Jue,[H[33]||(H[33]=a("label",{for:"questTypeFilter",class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Quest Type",-1)),a("select",{id:"questTypeFilter",value:b(d),onChange:le,class:"block w-full py-1.5 px-3 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"},[H[32]||(H[32]=a("option",{value:""},"All Types",-1)),a("option",{value:b(k).KILL_BUGS},_(ce(b(k).KILL_BUGS)),9,ede),a("option",{value:b(k).COLLECT_FOOD},_(ce(b(k).COLLECT_FOOD)),9,tde),a("option",{value:b(k).COLLECT_PHEROMONE},_(ce(b(k).COLLECT_PHEROMONE)),9,sde)],40,Zue)]),a("div",nde,[H[35]||(H[35]=a("label",{for:"rewardTypeFilter",class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Reward Type",-1)),a("select",{id:"rewardTypeFilter",value:b(m),onChange:se,class:"block w-full py-1.5 px-3 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"},[H[34]||(H[34]=a("option",{value:""},"All Rewards",-1)),a("option",{value:b(A).FOOD},"Food",8,ode),a("option",{value:b(A).PHEROMONE},"Pheromone Essence",8,ide),a("option",{value:b(A).EP},"Evolution Points",8,ade),a("option",{value:b(A).ITEM},"Items",8,lde),a("option",{value:b(A).MULTIPLIER},"Multipliers",8,cde)],40,rde)]),a("div",ude,[a("label",dde,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":H[7]||(H[7]=W=>ws(T)?T.value=W:null),class:"rounded text-blue-600 focus:ring-blue-500 h-4 w-4 border-gray-300 dark:border-gray-600"},null,512),[[ln,b(T)]]),H[36]||(H[36]=a("span",{class:"ml-2 text-gray-700 dark:text-gray-300"},"Show Too Strong Bug Quests",-1))]),H[37]||(H[37]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," If unchecked, only shows quests with bug targets you can defeat ",-1))]),a("div",mde,[H[38]||(H[38]=a("label",{for:"sortOption",class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Sort By",-1)),a("select",{id:"sortOption",value:b(u),onChange:z,class:"block w-full py-1.5 px-3 text-sm rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"},[a("option",{value:b(S).DEFAULT},"Default",8,pde),a("option",{value:b(S).ALPHABETICAL},"Alphabetical (A-Z)",8,hde),a("option",{value:b(S).GOAL_TYPE},"Goal Type",8,gde),a("option",{value:b(S).REWARD_TYPE},"Reward Type",8,vde),a("option",{value:b(S).TIER},"Tier",8,bde),a("option",{value:b(S).REWARD_VALUE},"Reward Value (Best First)",8,yde)],40,fde)])]),a("div",_de,[a("button",{onClick:H[8]||(H[8]=(...W)=>b(E)&&b(E)(...W)),class:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm rounded-md transition-colors flex items-center"},H[39]||(H[39]=[a("span",{class:"i-heroicons-backspace mr-1"},null,-1),oe(" Clear All Filters ")]))])])])):Q("",!0),b(e).activeTab==="available"?(h(),v("div",xde,[x.value.length===0?(h(),v("div",kde,[H[40]||(H[40]=a("h3",{class:"text-lg font-semibold text-blue-800 dark:text-blue-300 mb-2"},"Available Quests",-1)),a("p",wde,_(b(f)?"No available quests match your current filters. Try adjusting your filters or check back later!":"There are no available quests at the moment. Check back later!"),1)])):(h(),v("div",Ede,[a("h3",Cde,[H[41]||(H[41]=a("span",{class:"i-heroicons-clipboard-document-list text-blue-600 dark:text-blue-400 mr-2"},null,-1)),H[42]||(H[42]=oe(" Available Quests ")),a("span",Sde,_(x.value.length),1),b(f)?(h(),v("span",Tde," (filtered from "+_(b(e).availableQuests.length)+") ",1)):Q("",!0)]),a("div",{class:K($e.value)},[(h(!0),v(De,null,Ge(x.value,W=>(h(),v("div",{key:W.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden h-full"},[a("div",Ade,[a("div",Ide,[H[43]||(H[43]=a("span",{class:"i-heroicons-clipboard-document-list text-blue-600 dark:text-blue-400 mr-2"},null,-1)),a("h4",Pde,_(W.title),1),W.tier?(h(),v("span",{key:0,class:K(["ml-2 px-1.5 py-0.5 text-xs rounded-full",{"bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300":W.tier===1,"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300":W.tier===2,"bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300":W.tier===3,"bg-amber-100 dark:bg-amber-900/40 text-amber-800 dark:text-amber-300":W.tier===4,"bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300":W.tier===5}])}," Tier "+_(W.tier),3)):Q("",!0),a("span",{class:K(["ml-2 px-1.5 py-0.5 text-xs rounded-full",{"bg-gray-100 dark:bg-gray-900/40 text-gray-800 dark:text-gray-300":fe(W)==="Low Value","bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300":fe(W)==="Medium Value","bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-300":fe(W)==="High Value"}])},_(fe(W)),3)]),W.goals&&W.goals.length===1?(h(),v("span",Mde,_(ce(W.goals[0].type)),1)):(h(),v("span",$de,_(W.goals.length)+" Goals ",1))]),a("div",Rde,[b(e).gridDensity!=="compact"?(h(),v("p",Lde,_(W.description),1)):Q("",!0),a("div",Dde,[W.goals&&W.goals.length===1?(h(),v("div",Nde,[a("span",Ode,[H[44]||(H[44]=a("span",{class:"i-heroicons-flag mr-1 inline-block"},null,-1)),oe(" Goal: "+_(pe(W)),1)])])):W.goals&&W.goals.length>1?(h(),v("div",Fde,[H[45]||(H[45]=a("div",{class:"flex items-center mb-1"},[a("span",{class:"i-heroicons-flag mr-1 inline-block text-gray-700 dark:text-gray-300"}),a("span",{class:"text-gray-700 dark:text-gray-300 font-medium"},"Multiple Goals:")],-1)),a("ul",Ude,[(h(!0),v(De,null,Ge(W.goals,(ge,Te)=>(h(),v("li",{key:Te,class:"text-gray-600 dark:text-gray-400"},[a("span",qde,[a("span",Bde,_(Te+1),1),a("span",null,_(ge.description||(ge.type===b(k).KILL_BUGS?`Defeat ${Ue(ge.requiredAmount)} ${ge.target||"bugs"}`:ge.type===b(k).COLLECT_FOOD?`Collect ${Ue(ge.requiredAmount)} food`:`Collect ${Ue(ge.requiredAmount)} pheromone essence`)),1)])]))),128))])])):Q("",!0)]),b(e).gridDensity==="compact"?(h(),v("div",Vde,[H[46]||(H[46]=a("span",{class:"font-medium"},"Rewards:",-1)),oe(" "+_(W.rewards.length)+" item(s) ",1)])):(h(),v("div",Hde,[H[47]||(H[47]=a("h5",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Rewards:",-1)),a("ul",Gde,[(h(!0),v(De,null,Ge(W.rewards,(ge,Te)=>(h(),v("li",{key:Te,class:"flex items-center text-sm"},[a("span",jde,_(Te+1),1),a("span",Wde,_(b(o)(ge,W.tier)),1)]))),128))])])),a("div",zde,[a("button",{onClick:ge=>Z(W.id),class:K(["flex-1 py-1.5 text-white rounded-md transition-colors duration-200 flex items-center justify-center",b(e).activeQuest!==null?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"]),disabled:b(e).activeQuest!==null},[b(e).activeQuest===null?(h(),v("span",Kde)):(h(),v("span",Yde)),oe(" "+_(b(e).activeQuest===null?"Start Quest":"Complete Active Quest First"),1)],10,Qde),a("button",{onClick:ge=>b(D)(W.id),class:K(["px-3 py-1.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition-colors flex items-center justify-center",{"opacity-50 cursor-not-allowed":b(e).questQueue.includes(W.id)}]),disabled:b(e).questQueue.includes(W.id)},[H[48]||(H[48]=a("span",{class:"i-heroicons-queue-list mr-1"},null,-1)),oe(" "+_(b(e).questQueue.includes(W.id)?"In Queue":"Queue"),1)],10,Xde)])])]))),128))],2)]))])):b(e).activeTab==="completed"?(h(),v("div",Jde,[b(e).filteredCompletedQuests.length===0?(h(),v("div",Zde,[H[49]||(H[49]=a("h3",{class:"text-lg font-semibold text-green-800 dark:text-green-300 mb-2"},"Completed Quests",-1)),a("p",eme,_(b(f)?"No completed quests match your current filters. Try adjusting your filters or complete some quests to see them here!":"You haven't completed any quests yet. Start some quests and finish them to see them here!"),1)])):(h(),v("div",tme,[a("h3",sme,[H[50]||(H[50]=a("span",{class:"i-heroicons-check-badge text-green-600 dark:text-green-400 mr-2"},null,-1)),H[51]||(H[51]=oe(" Completed Quests ")),a("span",nme,_(b(e).filteredCompletedQuests.length),1),b(f)?(h(),v("span",rme," (filtered from "+_(b(e).completedQuests.length)+") ",1)):Q("",!0)]),a("div",{class:K($e.value)},[(h(!0),v(De,null,Ge(b(e).filteredCompletedQuests,W=>(h(),v("div",{key:W.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden h-full"},[a("div",ome,[a("div",ime,[H[52]||(H[52]=a("span",{class:"i-heroicons-check-badge text-green-600 dark:text-green-400 mr-2"},null,-1)),a("h4",ame,_(W.title),1),W.tier?(h(),v("span",{key:0,class:K(["ml-2 px-1.5 py-0.5 text-xs rounded-full",{"bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300":W.tier===1,"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300":W.tier===2,"bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300":W.tier===3,"bg-amber-100 dark:bg-amber-900/40 text-amber-800 dark:text-amber-300":W.tier===4,"bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300":W.tier===5}])}," Tier "+_(W.tier),3)):Q("",!0),a("span",{class:K(["ml-2 px-1.5 py-0.5 text-xs rounded-full",{"bg-gray-100 dark:bg-gray-900/40 text-gray-800 dark:text-gray-300":fe(W)==="Low Value","bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300":fe(W)==="Medium Value","bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-300":fe(W)==="High Value"}])},_(fe(W)),3)]),a("div",lme,[W.goals&&W.goals.length===1?(h(),v("span",cme,_(ce(W.goals[0].type)),1)):(h(),v("span",ume,_(W.goals.length)+" Goals ",1)),H[53]||(H[53]=a("span",{class:"i-heroicons-check-circle text-green-500 dark:text-green-400"},null,-1))])]),a("div",dme,[b(e).gridDensity!=="compact"?(h(),v("p",mme,_(W.description),1)):Q("",!0),a("div",fme,[H[55]||(H[55]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-check-circle text-green-600 dark:text-green-400 mr-1"}),a("span",{class:"text-green-700 dark:text-green-300"},"Completed")],-1)),W.goals&&W.goals.length>1&&b(e).gridDensity!=="compact"?(h(),v("div",pme,[a("ul",hme,[(h(!0),v(De,null,Ge(W.goals,(ge,Te)=>(h(),v("li",{key:Te,class:"text-gray-600 dark:text-gray-400 text-xs"},[a("span",gme,[H[54]||(H[54]=a("span",{class:"w-3.5 h-3.5 mr-1 mt-0.5 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-xs text-green-600 dark:text-green-400 flex-shrink-0"},"  ",-1)),a("span",null,_(ge.description||(ge.type===b(k).KILL_BUGS?`Defeated ${Ue(ge.requiredAmount)} ${ge.target||"bugs"}`:ge.type===b(k).COLLECT_FOOD?`Collected ${Ue(ge.requiredAmount)} food`:`Collected ${Ue(ge.requiredAmount)} pheromone essence`)),1)])]))),128))])])):Q("",!0)]),b(e).gridDensity==="compact"?(h(),v("div",vme,[H[56]||(H[56]=a("span",{class:"font-medium"},"Rewards:",-1)),oe(" "+_(W.rewards.length)+" item(s) ",1)])):(h(),v("div",bme,[H[57]||(H[57]=a("h5",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Rewards:",-1)),a("ul",yme,[(h(!0),v(De,null,Ge(W.rewards,(ge,Te)=>(h(),v("li",{key:Te,class:"flex items-center text-sm"},[a("span",_me,_(Te+1),1),a("span",xme,_(b(o)(ge,W.tier)),1)]))),128))])]))])]))),128))],2)]))])):Q("",!0),b(Co)()?(h(),v("div",kme,[H[58]||(H[58]=a("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Development Tools",-1)),a("div",wme,[a("button",{onClick:H[9]||(H[9]=W=>b(e).resetQuests()),class:"px-3 py-1 bg-red-100 hover:bg-red-200 dark:bg-red-900/40 dark:hover:bg-red-800/60 text-red-800 dark:text-red-300 text-xs rounded-md transition-colors"}," Reset All Quests ")])])):Q("",!0),Ye(Ha,{threshold:400})]),Ye(mue)],64))}}),Eme={class:"overflow-y-auto flex-grow min-h-0 touch-auto"},Cme={key:0,class:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg mb-4 border border-teal-200 dark:border-teal-700"},Sme={class:"flex items-start"},Tme={class:"text-sm text-teal-600 dark:text-teal-400"},Ame={class:"font-bold"},Ime={class:"font-bold"},Pme={class:"mt-2 flex justify-between items-center"},Mme={class:"text-xs text-teal-600 dark:text-teal-400"},$me={class:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Rme={class:"flex justify-between items-center mt-2"},Lme={class:"flex items-center space-x-2"},Dme={class:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"},Nme={class:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg mb-4"},Ome={class:"flex justify-between mb-2"},Fme={class:"font-bold text-purple-800 dark:text-purple-300"},Ume={class:"flex justify-between"},qme={class:"font-bold text-purple-800 dark:text-purple-300"},Bme={class:"flex justify-between mb-2"},Vme={class:"font-bold text-purple-800 dark:text-purple-300"},Hme={class:"flex justify-between"},Gme={class:"font-bold text-purple-800 dark:text-purple-300"},jme={class:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg mb-4"},Wme={class:"flex justify-between mb-2"},zme={class:"font-bold text-indigo-800 dark:text-indigo-300"},Qme={class:"flex justify-between"},Kme={class:"font-bold text-indigo-800 dark:text-indigo-300"},Yme={class:"mt-3 bg-indigo-100 dark:bg-indigo-800/30 p-2 rounded"},Xme={class:"text-sm text-indigo-700 dark:text-indigo-300"},Jme={class:"flex justify-between"},Zme={class:"flex justify-between"},efe={class:"flex justify-between font-semibold mt-1 pt-1 border-t border-indigo-200 dark:border-indigo-700/30"},tfe={key:1,class:"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg mb-4 border border-amber-300 dark:border-amber-700"},sfe={class:"flex items-start"},nfe={class:"text-sm text-amber-600 dark:text-amber-400"},rfe={class:"flex-shrink-0 flex justify-between gap-3 mt-4"},ofe=["disabled"],ife={key:0,class:"inline-block animate-pulse"},afe={key:1},lfe=Je({__name:"AscensionConfirmationModal",props:{isClosing:{type:Boolean},isAscending:{type:Boolean},isAscensionRecommended:{type:Boolean},formattedAscensionMultiplier:{},formattedNextAscensionMultiplier:{}},emits:["close","ascend"],setup(t,{emit:e}){const s=Wt(),{questCompletionPercentage:n,canAscend:r,ascensionLockExplanation:o}=Z1(),i=e,c=l(3),u=q(()=>s.level.toNumber()),d=q(()=>s.calculateBonusPoints(u.value)),m=q(()=>s.getNextMilestone(u.value)),f=q(()=>m.value?m.value.level-u.value:null),p=q(()=>c.add(d.value)),g=C=>typeof C=="number"?C.toString():be(C),w=C=>{var E;C.target&&((E=C.target.dataset)==null?void 0:E.modalBackdrop)==="true"&&C.preventDefault()};return(C,E)=>(h(),v("div",{class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",onTouchmove:w,"data-modal-backdrop":"true"},[a("div",{class:K(["bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full mx-auto my-4 shadow-xl border border-purple-200 dark:border-purple-700 max-h-[90vh] flex flex-col transition-all duration-250 overflow-hidden",{"opacity-0 scale-95":C.isClosing}]),onTouchmove:E[2]||(E[2]=xt(()=>{},["stop"]))},[E[20]||(E[20]=js('<div class="flex-shrink-0"><div class="text-center mb-4"><span class="inline-block p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full text-purple-600 dark:text-purple-400"><span class="i-heroicons-arrow-up-circle text-2xl"></span></span></div><h3 class="text-xl font-bold text-center text-purple-800 dark:text-purple-300 mb-2">Ascension Confirmation</h3><p class="text-gray-600 dark:text-gray-300 mb-4 text-center"> Ascending will reset your <span class="font-bold text-purple-600 dark:text-purple-400">Mega Ant levels and experience, Ascension Points, and colony progress</span>, but <span class="font-bold text-purple-600 dark:text-purple-400">all Mega Ant upgrades and Adventure features will be preserved</span>. This allows you to progress faster in subsequent runs. </p></div>',1)),a("div",Eme,[m.value?(h(),v("div",Cme,[a("div",Sme,[E[6]||(E[6]=a("span",{class:"i-heroicons-arrow-trending-up text-teal-500 mt-0.5 mr-2 flex-shrink-0"},null,-1)),a("div",null,[E[5]||(E[5]=a("h4",{class:"font-semibold text-teal-700 dark:text-teal-300 mb-1"},"Next Bonus Milestone",-1)),a("p",Tme,[E[3]||(E[3]=oe(" Push to level ")),a("span",Ame,_(m.value.level),1),E[4]||(E[4]=oe(" to reach a total bonus of ")),a("span",Ime,"+"+_(g(m.value.points))+" Ascension Points",1),oe("! (Gain: +"+_(g(m.value.pointsIncrease))+") ",1)]),a("div",Pme,[a("span",Mme,_(f.value)+" level"+_(f.value===1?"":"s")+" to go",1),a("div",$me,[a("div",{class:"h-2 rounded-full bg-teal-500 dark:bg-teal-600",style:yt({width:`${Math.min(100,u.value/m.value.level*100)}%`})},null,4)])])])])])):Q("",!0),a("div",{class:K(["bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg mb-4",{"border border-red-300 dark:border-red-700":!b(r)}])},[a("h4",{class:K(["font-semibold",b(r)?"text-blue-800 dark:text-blue-300":"text-red-600 dark:text-red-400"])}," Quest Requirement ",2),a("div",Rme,[a("span",{class:K(b(r)?"text-blue-700 dark:text-blue-300":"text-red-600 dark:text-red-400")}," Quest Completion: ",2),a("div",Lme,[a("div",Dme,[a("div",{class:K(["h-2.5 rounded-full",b(r)?"bg-blue-600 dark:bg-blue-500":"bg-amber-500 dark:bg-amber-600"]),style:yt({width:`${Math.min(b(n),100)}%`})},null,6)]),a("span",{class:K(["text-sm font-medium",b(r)?"text-blue-700 dark:text-blue-300":"text-amber-600 dark:text-amber-400"])},_(Math.floor(b(n)))+"% ",3)])]),a("p",{class:K(["text-sm mt-2",b(r)?"text-blue-600 dark:text-blue-400":"text-red-500 dark:text-red-400"])},_(b(r)?"Requirement met!":b(o)),3)],2),a("div",Nme,[a("div",Ome,[E[7]||(E[7]=a("span",{class:"text-purple-700 dark:text-purple-300"},"Current Ascension:",-1)),a("span",Fme,_(b(s).ascensionCount),1)]),a("div",Ume,[E[8]||(E[8]=a("span",{class:"text-purple-700 dark:text-purple-300"},"After Ascension:",-1)),a("span",qme,_(b(s).ascensionCount+1),1)]),E[11]||(E[11]=a("div",{class:"border-t border-purple-200 dark:border-purple-700/30 my-2"},null,-1)),a("div",Bme,[E[9]||(E[9]=a("span",{class:"text-purple-700 dark:text-purple-300"},"Current Bonus:",-1)),a("span",Vme,_(C.formattedAscensionMultiplier)+"x",1)]),a("div",Hme,[E[10]||(E[10]=a("span",{class:"text-purple-700 dark:text-purple-300"},"Next Bonus:",-1)),a("span",Gme,_(C.formattedNextAscensionMultiplier)+"x",1)])]),a("div",jme,[E[16]||(E[16]=a("h4",{class:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2"},"Ascension Points",-1)),a("div",Wme,[E[12]||(E[12]=a("span",{class:"text-indigo-700 dark:text-indigo-300"},"Current Total:",-1)),a("span",zme,_(g(b(s).ascensionPoints))+" AP",1)]),a("div",Qme,[E[13]||(E[13]=a("span",{class:"text-indigo-700 dark:text-indigo-300"},"You'll gain:",-1)),a("span",Kme,_(g(p.value))+" AP",1)]),a("div",Yme,[a("div",Xme,[a("div",Jme,[E[14]||(E[14]=a("span",null,"Base:",-1)),a("span",null,_(g(b(c)))+" AP",1)]),a("div",Zme,[a("span",null,"Bonus (Lvl "+_(u.value)+"):",1),a("span",null,_(g(d.value))+" AP",1)]),a("div",efe,[E[15]||(E[15]=a("span",null,"Total:",-1)),a("span",null,_(g(p.value))+" AP",1)])])])]),E[19]||(E[19]=js('<div class="bg-green-50 dark:bg-green-900/20 p-3 rounded-lg mb-4"><h4 class="font-semibold text-green-800 dark:text-green-300 mb-2">Benefits of Ascension:</h4><ul class="text-sm text-green-700 dark:text-green-400 space-y-2"><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Keep all your Mega Ant and Colony upgrades</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Keep all Time Manipulation upgrades</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Keep all Aphid Farm progress and upgrades</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Retain all Collectibles and their levels</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Gain +0.25x multiplier per ascension level</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Earn Ascension Points to spend on powerful upgrades</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Retain all Adventure-related features and upgrades</span></li><li class="flex items-start"><span class="i-heroicons-check-circle mt-0.5 mr-1.5 text-green-600 dark:text-green-500"></span><span>Progress much faster on subsequent runs</span></li></ul><div class="mt-3 border-t border-green-200 dark:border-green-700/30 pt-2"><h4 class="font-semibold text-amber-700 dark:text-amber-400 mb-2">What gets reset:</h4><ul class="text-sm text-amber-700 dark:text-amber-400 space-y-2"><li class="flex items-start"><span class="i-heroicons-arrow-path mt-0.5 mr-1.5 text-amber-600 dark:text-amber-500"></span><span>Ascension Points and most Prestige Upgrades</span></li><li class="flex items-start"><span class="i-heroicons-arrow-path mt-0.5 mr-1.5 text-amber-600 dark:text-amber-500"></span><span>All food production and generator counts</span></li><li class="flex items-start"><span class="i-heroicons-arrow-path mt-0.5 mr-1.5 text-amber-600 dark:text-amber-500"></span><span>Mega Ant and Colony levels</span></li></ul></div></div>',1)),C.isAscensionRecommended?Q("",!0):(h(),v("div",tfe,[a("div",sfe,[E[18]||(E[18]=a("span",{class:"i-heroicons-exclamation-triangle text-amber-500 mt-0.5 mr-2"},null,-1)),a("div",null,[E[17]||(E[17]=a("h4",{class:"font-semibold text-amber-700 dark:text-amber-300 mb-1"},"Early Ascension Warning",-1)),a("p",nfe," You have only reached level "+_(b(s).level.toString())+". It's recommended to reach at least level 20 before ascending to maximize benefits. ",1)])])]))]),a("div",rfe,[a("button",{onClick:E[0]||(E[0]=k=>i("close")),class:"flex-1 py-2.5 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"}," Cancel "),a("button",{onClick:E[1]||(E[1]=k=>i("ascend")),disabled:C.isAscending||!b(r),class:K(["flex-1 py-2.5 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50",b(r)?"bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white focus:ring-purple-500":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[C.isAscending?(h(),v("span",ife,"Ascending...")):(h(),v("span",afe,_(b(r)?"Confirm Ascension":"Cannot Ascend Yet"),1))],10,ofe)])],34)],32))}}),cfe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},ufe={class:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3 overflow-y-auto max-h-40 scrollbar-hide digestion-log"},dfe={key:0,class:"text-center text-gray-500 dark:text-gray-400 italic py-2"},mfe={key:1,class:"space-y-2"},ffe={class:"flex justify-between"},pfe={class:"text-amber-800 dark:text-amber-300 font-medium"},hfe={class:"text-gray-500 dark:text-gray-400"},gfe={class:"text-green-600 dark:text-green-400"},vfe={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3 overflow-y-auto max-h-40 scrollbar-hide digestion-log"},bfe={key:0,class:"text-center text-gray-500 dark:text-gray-400 italic py-2"},yfe={key:1,class:"space-y-2"},_fe={class:"flex justify-between"},xfe={class:"text-purple-800 dark:text-purple-300 font-medium"},kfe={class:"text-gray-500 dark:text-gray-400"},wfe={class:"text-purple-600 dark:text-purple-400"},Efe=Je({__name:"DigestionLogs",props:{formatDigestionAmount:{type:Function},formatTimestamp:{type:Function},formatXpGained:{type:Function}},setup(t){const e=Wt();return(s,n)=>(h(),v("div",cfe,[a("div",null,[n[0]||(n[0]=a("h4",{class:"font-medium text-amber-700 dark:text-amber-300 mb-2"},"Crop Digestion Log",-1)),a("div",ufe,[b(e).decayLogs.length===0?(h(),v("div",dfe," No crop digestion events yet ")):(h(),v("div",mfe,[(h(!0),v(De,null,Ge([...b(e).decayLogs].reverse(),(r,o)=>(h(),v("div",{key:o,class:"text-xs border-b border-amber-100 dark:border-amber-800/30 pb-1 last:border-0"},[a("div",ffe,[a("span",pfe," Digested "+_(s.formatDigestionAmount(r.amount))+" food ",1),a("span",hfe,_(s.formatTimestamp(r.timestamp)),1)]),a("div",gfe," Gained "+_(s.formatXpGained(r.xpGained))+" Mega Ant XP ",1)]))),128))]))])]),a("div",null,[n[1]||(n[1]=a("h4",{class:"font-medium text-purple-700 dark:text-purple-300 mb-2"},"True Stomach Digestion Log",-1)),a("div",vfe,[b(e).pheromoneDecayLogs.length===0?(h(),v("div",bfe," No essence digestion events yet ")):(h(),v("div",yfe,[(h(!0),v(De,null,Ge([...b(e).pheromoneDecayLogs].reverse(),(r,o)=>(h(),v("div",{key:o,class:"text-xs border-b border-purple-100 dark:border-purple-800/30 pb-1 last:border-0"},[a("div",_fe,[a("span",xfe," Digested "+_(s.formatDigestionAmount(r.amount))+" essence ",1),a("span",kfe,_(s.formatTimestamp(r.timestamp)),1)]),a("div",wfe," Gained "+_(s.formatXpGained(r.xpGained))+" Colony XP ",1)]))),128))]))])])]))}}),Cfe=Ct(Efe,[["__scopeId","data-v-8eb0a0e0"]]),Sfe={class:"lg:hidden"},Tfe={class:"mb-4 border-b border-gray-200 dark:border-gray-700"},Afe={class:"flex items-center gap-1 overflow-x-auto scrollbar-hide"},Ife={key:0},Pfe={class:"bg-gradient-to-br from-emerald-100/50 to-emerald-50/50 dark:from-emerald-900/20 dark:to-emerald-800/10 rounded-xl p-4 shadow-md border border-emerald-200/50 dark:border-emerald-700/50 mb-4"},Mfe={class:"flex items-center mb-4 p-2 bg-emerald-100/80 dark:bg-emerald-900/30 rounded-lg border border-emerald-200 dark:border-emerald-800"},$fe={class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},Rfe={class:"font-bold"},Lfe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},Dfe={class:"font-bold text-emerald-700 dark:text-emerald-400 mb-1"},Nfe={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Ofe={class:"mb-3 space-y-2"},Ffe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},Ufe={class:"font-medium text-amber-700 dark:text-amber-300"},qfe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},Bfe={class:"font-medium text-purple-700 dark:text-purple-300"},Vfe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},Hfe={class:"font-medium text-amber-700 dark:text-amber-300"},Gfe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},jfe={class:"font-medium text-purple-700 dark:text-purple-300"},Wfe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},zfe={class:"font-medium text-amber-700 dark:text-amber-300"},Qfe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},Kfe={class:"font-medium text-purple-700 dark:text-purple-300"},Yfe={key:0,class:"mb-2"},Xfe={class:"text-xs text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 p-1.5 rounded flex items-center"},Jfe={key:0,class:"ml-1"},Zfe={key:1,class:"ml-1"},epe={key:2,class:"ml-1"},tpe={key:0,class:"i-heroicons-check-badge mr-1"},spe={key:1,class:"i-heroicons-sparkles mr-1"},npe={key:1},rpe={class:"bg-gradient-to-br from-purple-100/50 to-purple-50/50 dark:from-purple-900/20 dark:to-purple-800/10 rounded-xl p-4 shadow-md border border-purple-200/50 dark:border-purple-700/50 mb-4"},ope={class:"flex items-center mb-4 p-2 bg-purple-100/80 dark:bg-purple-900/30 rounded-lg border border-purple-200 dark:border-purple-800"},ipe={class:"text-sm font-medium text-purple-800 dark:text-purple-300"},ape={class:"font-bold"},lpe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},cpe={class:"font-bold text-purple-700 dark:text-purple-400 mb-1"},upe={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},dpe={class:"flex items-center justify-between text-xs bg-purple-50 dark:bg-purple-900/20 p-2 rounded mb-2"},mpe={class:"font-medium text-purple-700 dark:text-purple-300 bg-purple-100 dark:bg-purple-800/40 px-2 py-0.5 rounded"},fpe={class:"mb-2"},ppe={class:"text-xs inline-block bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded"},hpe={key:0,class:"text-blue-600 dark:text-blue-400 flex items-center"},gpe={key:1,class:"text-pink-600 dark:text-pink-400 flex items-center"},vpe={key:2,class:"text-teal-600 dark:text-teal-400 flex items-center"},bpe={key:0,class:"mb-2"},ype={class:"text-xs text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded flex items-center"},_pe={key:0,class:"ml-1"},xpe={key:1,class:"ml-1"},kpe={key:2,class:"ml-1"},wpe={key:0,class:"i-heroicons-check-badge mr-1"},Epe={key:1,class:"i-heroicons-sparkles mr-1"},Cpe=Je({__name:"MobileUpgradeTabView",props:{activeTab:{},formattedEffectiveStomachCapacity:{},formattedEffectivePheromoneStomachCapacity:{},formattedDecayEfficiencyMultiplier:{},formattedPheromoneEfficiencyMultiplier:{},formatUpgradeImprovement:{type:Function},buttonClass:{type:Function},upgradeButtonText:{type:Function},colonyButtonClass:{type:Function},colonyUpgradeButtonText:{type:Function},purchaseUpgrade:{type:Function},purchaseColonyUpgrade:{type:Function}},emits:["update:activeTab"],setup(t,{emit:e}){const s=Wt(),n=t,r=e;return(o,i)=>(h(),v("div",Sfe,[a("div",Tfe,[a("div",Afe,[lf(o.$slots,"default",{},void 0,!0),o.$slots.default?Q("",!0):(h(),v(De,{key:0},[a("button",{onClick:i[0]||(i[0]=c=>r("update:activeTab","megaAnt")),class:K(["flex-1 py-2 px-4 text-sm font-medium transition-colors rounded-t-lg",n.activeTab==="megaAnt"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border-b-2 border-amber-500":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},i[2]||(i[2]=[a("span",{class:"i-mdi-bug mr-1"},null,-1),oe(" Mega Ant ")]),2),a("button",{onClick:i[1]||(i[1]=c=>r("update:activeTab","colony")),class:K(["flex-1 py-2 px-4 text-sm font-medium transition-colors rounded-t-lg",n.activeTab==="colony"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border-b-2 border-amber-500":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},i[3]||(i[3]=[a("span",{class:"i-mdi-antenna mr-1"},null,-1),oe(" Colony ")]),2)],64))])]),n.activeTab==="megaAnt"?(h(),v("div",Ife,[a("div",Pfe,[i[15]||(i[15]=js('<h2 class="text-lg font-bold text-emerald-700 dark:text-emerald-300 mb-2 flex items-center" data-v-001368db><span class="i-heroicons-arrow-trending-up mr-2" data-v-001368db></span> Mega Ant Upgrades <span class="ml-2 text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 px-2 py-0.5 rounded-full" data-v-001368db> Uses Mega Ant Levels </span></h2><div class="text-sm text-emerald-600 dark:text-emerald-400 mb-4 bg-emerald-100/50 dark:bg-emerald-900/30 p-3 rounded-lg border border-emerald-200 dark:border-emerald-700/50" data-v-001368db><p class="flex items-start" data-v-001368db><span class="i-heroicons-light-bulb text-emerald-500 mr-2 mt-0.5" data-v-001368db></span><span data-v-001368db><span class="font-semibold" data-v-001368db>Mega Ant upgrades affect both digestive systems.</span> Every purchase increases capacity, speed, or efficiency for both crop and true stomach. </span></p></div>',2)),a("div",Mfe,[i[6]||(i[6]=a("span",{class:"i-heroicons-star text-amber-500 mr-2"},null,-1)),a("span",$fe,[i[4]||(i[4]=oe(" Available Points: ")),a("span",Rfe,_(b(s).availableLevels),1),i[5]||(i[5]=a("span",{class:"text-xs ml-1"},"(Each Mega Ant level provides 1 upgrade point)",-1))])]),a("div",Lfe,[(h(!0),v(De,null,Ge(b(s).upgrades,c=>(h(),v("div",{key:c.id,class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-emerald-200 dark:border-emerald-800 p-3 transition-all hover:shadow-md upgrade-card"},[a("div",{class:K(["absolute top-2 right-2 text-xs font-medium px-1.5 py-0.5 rounded-full",b(s).isUpgradeMaxed(c.id)?"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300":"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-300"])},_(c.level)+_(c.maxLevel?"/"+c.maxLevel:""),3),a("h3",Dfe,_(c.name),1),a("p",Nfe,_(c.description),1),a("div",Ofe,[c.id===b(Tn).STOMACH_CAPACITY?(h(),v(De,{key:0},[a("div",Ffe,[i[7]||(i[7]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Crop:")],-1)),a("span",Ufe,_(n.formattedEffectiveStomachCapacity)+" units",1)]),a("div",qfe,[i[8]||(i[8]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"True Stomach:")],-1)),a("span",Bfe,_(n.formattedEffectivePheromoneStomachCapacity)+" units",1)])],64)):c.id===b(Tn).DECAY_RATE?(h(),v(De,{key:1},[a("div",Vfe,[i[9]||(i[9]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Crop:")],-1)),a("span",Hfe,_(b(s).effectiveDecayRate.toFixed(2))+"/sec",1)]),a("div",Gfe,[i[10]||(i[10]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"True Stomach:")],-1)),a("span",jfe,_(b(s).effectivePheromoneDecayRate.toFixed(2))+"/sec",1)])],64)):c.id===b(Tn).EFFICIENCY?(h(),v(De,{key:2},[a("div",Wfe,[i[11]||(i[11]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Mega Ant XP:")],-1)),a("span",zfe,_(n.formattedDecayEfficiencyMultiplier)+"x",1)]),a("div",Qfe,[i[12]||(i[12]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"Colony XP:")],-1)),a("span",Kfe,_(n.formattedPheromoneEfficiencyMultiplier)+"x",1)])],64)):Q("",!0)]),b(s).isUpgradeMaxed(c.id)?Q("",!0):(h(),v("div",Yfe,[a("div",Xfe,[i[13]||(i[13]=a("span",{class:"i-heroicons-arrow-up text-emerald-500 mr-1"},null,-1)),i[14]||(i[14]=a("span",{class:"font-medium"},"Next level:",-1)),c.id===b(Tn).STOMACH_CAPACITY?(h(),v("span",Jfe,"+"+_(n.formatUpgradeImprovement(c.id,25))+" crop, +"+_(n.formatUpgradeImprovement(c.id,15))+" true stomach",1)):c.id===b(Tn).DECAY_RATE?(h(),v("span",Zfe,"+"+_(n.formatUpgradeImprovement(c.id,.2))+" & +"+_(n.formatUpgradeImprovement(c.id,.15))+" digest speed",1)):c.id===b(Tn).EFFICIENCY?(h(),v("span",epe,"+"+_(n.formatUpgradeImprovement(c.id,.25))+"x XP for both systems",1)):Q("",!0)])])),Ye(Ul,{onAction:u=>n.purchaseUpgrade(c.id),class:K(n.buttonClass(c.id)),disabled:!b(s).canUpgrade(c.id)},{default:Rt(()=>[b(s).isUpgradeMaxed(c.id)?(h(),v("span",tpe)):(h(),v("span",spe)),oe(" "+_(n.upgradeButtonText(c.id)),1)]),_:2},1032,["onAction","class","disabled"])]))),128))])])])):Q("",!0),n.activeTab==="colony"?(h(),v("div",npe,[a("div",rpe,[i[26]||(i[26]=js('<h2 class="text-lg font-bold text-purple-700 dark:text-purple-300 mb-2 flex items-center" data-v-001368db><span class="i-heroicons-cube-transparent mr-2" data-v-001368db></span> Colony Upgrades <span class="ml-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full" data-v-001368db> Uses Colony Levels </span></h2><div class="text-sm text-purple-600 dark:text-purple-400 mb-4 bg-purple-100/50 dark:bg-purple-900/30 p-3 rounded-lg border border-purple-200 dark:border-purple-700/50" data-v-001368db><p class="flex items-start" data-v-001368db><span class="i-heroicons-light-bulb text-purple-500 mr-2 mt-0.5" data-v-001368db></span><span data-v-001368db><span class="font-semibold" data-v-001368db>Colony upgrades affect your entire ant farm.</span> Each upgrade provides global bonuses that become stronger with each ascension level. </span></p></div>',2)),a("div",ope,[i[18]||(i[18]=a("span",{class:"i-heroicons-star text-purple-500 mr-2"},null,-1)),a("span",ipe,[i[16]||(i[16]=oe(" Available Points: ")),a("span",ape,_(b(s).availableColonyLevels),1),i[17]||(i[17]=a("span",{class:"text-xs ml-1"},"(Each Colony level provides 1 upgrade point)",-1))])]),a("div",lpe,[(h(!0),v(De,null,Ge(b(s).colonyUpgrades,c=>(h(),v("div",{key:c.id,class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-purple-200 dark:border-purple-800 p-3 transition-all hover:shadow-md upgrade-card"},[a("div",{class:K(["absolute top-2 right-2 text-xs font-medium px-1.5 py-0.5 rounded-full",b(s).isColonyUpgradeMaxed(c.id)?"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300":"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300"])},_(c.level)+_(c.maxLevel?"/"+c.maxLevel:""),3),a("h3",cpe,_(c.name),1),a("p",upe,_(c.description),1),a("div",dpe,[i[19]||(i[19]=a("span",{class:"text-purple-600 dark:text-purple-400"},"Current Effect:",-1)),a("span",mpe,_(b(s).getFormattedColonyEffect(c.id)),1)]),a("div",fpe,[a("div",ppe,[c.id===b(xr).EP_BOOST?(h(),v("span",hpe,i[20]||(i[20]=[a("span",{class:"i-heroicons-sparkles mr-1"},null,-1),oe(" Affects: Evolution Points ")]))):c.id===b(xr).PHEROMONE_BOOST?(h(),v("span",gpe,i[21]||(i[21]=[a("span",{class:"i-heroicons-beaker mr-1"},null,-1),oe(" Affects: Pheromone Essence ")]))):c.id===b(xr).GLOBAL_PRODUCTION?(h(),v("span",vpe,i[22]||(i[22]=[a("span",{class:"i-heroicons-globe-alt mr-1"},null,-1),oe(" Affects: All Production ")]))):Q("",!0)])]),b(s).isColonyUpgradeMaxed(c.id)?Q("",!0):(h(),v("div",bpe,[a("div",ype,[i[23]||(i[23]=a("span",{class:"i-heroicons-arrow-up text-purple-500 mr-1"},null,-1)),i[24]||(i[24]=a("span",{class:"font-medium"},"Next level:",-1)),c.id===b(xr).EP_BOOST?(h(),v("span",_pe,"+"+_(n.formatUpgradeImprovement(c.id,c.getMultiplier(c.level+1)-c.getMultiplier(c.level)))+" EP gain",1)):c.id===b(xr).PHEROMONE_BOOST?(h(),v("span",xpe,"+"+_(n.formatUpgradeImprovement(c.id,c.getMultiplier(c.level+1)-c.getMultiplier(c.level)))+" pheromone gain",1)):c.id===b(xr).GLOBAL_PRODUCTION?(h(),v("span",kpe,"+"+_(n.formatUpgradeImprovement(c.id,c.getMultiplier(c.level+1)-c.getMultiplier(c.level)))+" global production",1)):Q("",!0)])])),i[25]||(i[25]=a("div",{class:"mb-2 text-xs text-gray-500 dark:text-gray-400 flex items-center"},[a("span",{class:"i-heroicons-information-circle mr-1"}),a("span",null,"Improves by +20% per ascension level")],-1)),Ye(Ul,{onAction:u=>n.purchaseColonyUpgrade(c.id),class:K(n.colonyButtonClass(c.id)),disabled:!b(s).canColonyUpgrade(c.id)},{default:Rt(()=>[b(s).isColonyUpgradeMaxed(c.id)?(h(),v("span",wpe)):(h(),v("span",Epe)),oe(" "+_(n.colonyUpgradeButtonText(c.id)),1)]),_:2},1032,["onAction","class","disabled"])]))),128))])])])):Q("",!0)]))}}),Spe=Ct(Cpe,[["__scopeId","data-v-001368db"]]),Tpe={class:"hidden lg:grid lg:grid-cols-2 gap-4"},Ape={class:"bg-gradient-to-br from-emerald-100/50 to-emerald-50/50 dark:from-emerald-900/20 dark:to-emerald-800/10 rounded-xl p-4 shadow-md border border-emerald-200/50 dark:border-emerald-700/50"},Ipe={class:"flex items-center mb-4 p-2 bg-emerald-100/80 dark:bg-emerald-900/30 rounded-lg border border-emerald-200 dark:border-emerald-800"},Ppe={class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},Mpe={class:"font-bold"},$pe={class:"grid grid-cols-1 xl:grid-cols-2 gap-3"},Rpe={class:"font-bold text-emerald-700 dark:text-emerald-400 mb-1"},Lpe={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},Dpe={class:"mb-3 space-y-2"},Npe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},Ope={class:"font-medium text-amber-700 dark:text-amber-300"},Fpe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},Upe={class:"font-medium text-purple-700 dark:text-purple-300"},qpe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},Bpe={class:"font-medium text-amber-700 dark:text-amber-300"},Vpe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},Hpe={class:"font-medium text-purple-700 dark:text-purple-300"},Gpe={class:"flex justify-between items-center text-xs bg-amber-50 dark:bg-amber-900/20 p-1.5 rounded"},jpe={class:"font-medium text-amber-700 dark:text-amber-300"},Wpe={class:"flex justify-between items-center text-xs bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded"},zpe={class:"font-medium text-purple-700 dark:text-purple-300"},Qpe={key:0,class:"mb-2"},Kpe={class:"text-xs text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 p-1.5 rounded flex items-center"},Ype={key:0,class:"ml-1"},Xpe={key:1,class:"ml-1"},Jpe={key:2,class:"ml-1"},Zpe={key:0,class:"i-heroicons-check-badge mr-1"},ehe={key:1,class:"i-heroicons-sparkles mr-1"},the={class:"bg-gradient-to-br from-purple-100/50 to-purple-50/50 dark:from-purple-900/20 dark:to-purple-800/10 rounded-xl p-4 shadow-md border border-purple-200/50 dark:border-purple-700/50"},she={class:"flex items-center mb-4 p-2 bg-purple-100/80 dark:bg-purple-900/30 rounded-lg border border-purple-200 dark:border-purple-800"},nhe={class:"text-sm font-medium text-purple-800 dark:text-purple-300"},rhe={class:"font-bold"},ohe={class:"grid grid-cols-1 xl:grid-cols-2 gap-3"},ihe={class:"font-bold text-purple-700 dark:text-purple-400 mb-1"},ahe={class:"text-xs text-gray-600 dark:text-gray-400 mb-2"},lhe={class:"flex items-center justify-between text-xs bg-purple-50 dark:bg-purple-900/20 p-2 rounded mb-2"},che={class:"font-medium text-purple-700 dark:text-purple-300 bg-purple-100 dark:bg-purple-800/40 px-2 py-0.5 rounded"},uhe={class:"mb-2"},dhe={class:"text-xs inline-block bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded"},mhe={key:0,class:"text-blue-600 dark:text-blue-400 flex items-center"},fhe={key:1,class:"text-pink-600 dark:text-pink-400 flex items-center"},phe={key:2,class:"text-teal-600 dark:text-teal-400 flex items-center"},hhe={key:0,class:"mb-2"},ghe={class:"text-xs text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20 p-1.5 rounded flex items-center"},vhe={key:0,class:"ml-1"},bhe={key:1,class:"ml-1"},yhe={key:2,class:"ml-1"},_he={key:0,class:"i-heroicons-check-badge mr-1"},xhe={key:1,class:"i-heroicons-sparkles mr-1"},khe=Je({__name:"DesktopUpgradeLayout",props:{formattedEffectiveStomachCapacity:{},formattedEffectivePheromoneStomachCapacity:{},formattedDecayEfficiencyMultiplier:{},formattedPheromoneEfficiencyMultiplier:{},formatUpgradeImprovement:{type:Function},buttonClass:{type:Function},upgradeButtonText:{type:Function},colonyButtonClass:{type:Function},colonyUpgradeButtonText:{type:Function},purchaseUpgrade:{type:Function},purchaseColonyUpgrade:{type:Function}},setup(t){const e=Wt();return(s,n)=>(h(),v("div",Tpe,[a("div",Ape,[n[11]||(n[11]=js('<h2 class="text-lg font-bold text-emerald-700 dark:text-emerald-300 mb-2 flex items-center"><span class="i-heroicons-arrow-trending-up mr-2"></span> Mega Ant Upgrades <span class="ml-2 text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 px-2 py-0.5 rounded-full"> Uses Mega Ant Levels </span></h2><div class="text-sm text-emerald-600 dark:text-emerald-400 mb-4 bg-emerald-100/50 dark:bg-emerald-900/30 p-3 rounded-lg border border-emerald-200 dark:border-emerald-700/50"><p class="flex items-start"><span class="i-heroicons-light-bulb text-emerald-500 mr-2 mt-0.5"></span><span><span class="font-semibold">Mega Ant upgrades affect both digestive systems.</span> Every purchase increases capacity, speed, or efficiency for both crop and true stomach. </span></p></div>',2)),a("div",Ipe,[n[2]||(n[2]=a("span",{class:"i-heroicons-star text-amber-500 mr-2"},null,-1)),a("span",Ppe,[n[0]||(n[0]=oe(" Available Points: ")),a("span",Mpe,_(b(e).availableLevels),1),n[1]||(n[1]=a("span",{class:"text-xs ml-1"},"(Each Mega Ant level provides 1 upgrade point)",-1))])]),a("div",$pe,[(h(!0),v(De,null,Ge(b(e).upgrades,r=>(h(),v("div",{key:r.id,class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-emerald-200 dark:border-emerald-800 p-3 transition-all hover:shadow-md upgrade-card"},[a("div",{class:K(["absolute top-2 right-2 text-xs font-medium px-1.5 py-0.5 rounded-full",b(e).isUpgradeMaxed(r.id)?"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300":"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-300"])},_(r.level)+_(r.maxLevel?"/"+r.maxLevel:""),3),a("h3",Rpe,_(r.name),1),a("p",Lpe,_(r.description),1),a("div",Dpe,[r.id===b(Tn).STOMACH_CAPACITY?(h(),v(De,{key:0},[a("div",Npe,[n[3]||(n[3]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Crop:")],-1)),a("span",Ope,_(s.formattedEffectiveStomachCapacity)+" units",1)]),a("div",Fpe,[n[4]||(n[4]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"True Stomach:")],-1)),a("span",Upe,_(s.formattedEffectivePheromoneStomachCapacity)+" units",1)])],64)):r.id===b(Tn).DECAY_RATE?(h(),v(De,{key:1},[a("div",qpe,[n[5]||(n[5]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Crop:")],-1)),a("span",Bpe,_(b(e).effectiveDecayRate.toFixed(2))+"/sec",1)]),a("div",Vpe,[n[6]||(n[6]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"True Stomach:")],-1)),a("span",Hpe,_(b(e).effectivePheromoneDecayRate.toFixed(2))+"/sec",1)])],64)):r.id===b(Tn).EFFICIENCY?(h(),v(De,{key:2},[a("div",Gpe,[n[7]||(n[7]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-500 mr-1"}),a("span",{class:"text-amber-600 dark:text-amber-400"},"Mega Ant XP:")],-1)),a("span",jpe,_(s.formattedDecayEfficiencyMultiplier)+"x",1)]),a("div",Wpe,[n[8]||(n[8]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-500 mr-1"}),a("span",{class:"text-purple-600 dark:text-purple-400"},"Colony XP:")],-1)),a("span",zpe,_(s.formattedPheromoneEfficiencyMultiplier)+"x",1)])],64)):Q("",!0)]),b(e).isUpgradeMaxed(r.id)?Q("",!0):(h(),v("div",Qpe,[a("div",Kpe,[n[9]||(n[9]=a("span",{class:"i-heroicons-arrow-up text-emerald-500 mr-1"},null,-1)),n[10]||(n[10]=a("span",{class:"font-medium"},"Next level:",-1)),r.id===b(Tn).STOMACH_CAPACITY?(h(),v("span",Ype,"+"+_(s.formatUpgradeImprovement(r.id,25))+" crop, +"+_(s.formatUpgradeImprovement(r.id,15))+" true stomach",1)):r.id===b(Tn).DECAY_RATE?(h(),v("span",Xpe,"+"+_(s.formatUpgradeImprovement(r.id,.2))+" & +"+_(s.formatUpgradeImprovement(r.id,.15))+" digest speed",1)):r.id===b(Tn).EFFICIENCY?(h(),v("span",Jpe,"+"+_(s.formatUpgradeImprovement(r.id,.25))+"x XP for both systems",1)):Q("",!0)])])),Ye(Ul,{onAction:o=>s.purchaseUpgrade(r.id),class:K(s.buttonClass(r.id)),disabled:!b(e).canUpgrade(r.id)},{default:Rt(()=>[b(e).isUpgradeMaxed(r.id)?(h(),v("span",Zpe)):(h(),v("span",ehe)),oe(" "+_(s.upgradeButtonText(r.id)),1)]),_:2},1032,["onAction","class","disabled"])]))),128))])]),a("div",the,[n[22]||(n[22]=js('<h2 class="text-lg font-bold text-purple-700 dark:text-purple-300 mb-2 flex items-center"><span class="i-heroicons-cube-transparent mr-2"></span> Colony Upgrades <span class="ml-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded-full"> Uses Colony Levels </span></h2><div class="text-sm text-purple-600 dark:text-purple-400 mb-4 bg-purple-100/50 dark:bg-purple-900/30 p-3 rounded-lg border border-purple-200 dark:border-purple-700/50"><p class="flex items-start"><span class="i-heroicons-light-bulb text-purple-500 mr-2 mt-0.5"></span><span><span class="font-semibold">Colony upgrades affect your entire ant farm.</span> Each upgrade provides global bonuses that become stronger with each ascension level. </span></p></div>',2)),a("div",she,[n[14]||(n[14]=a("span",{class:"i-heroicons-star text-purple-500 mr-2"},null,-1)),a("span",nhe,[n[12]||(n[12]=oe(" Available Points: ")),a("span",rhe,_(b(e).availableColonyLevels),1),n[13]||(n[13]=a("span",{class:"text-xs ml-1"},"(Each Colony level provides 1 upgrade point)",-1))])]),a("div",ohe,[(h(!0),v(De,null,Ge(b(e).colonyUpgrades,r=>(h(),v("div",{key:r.id,class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-purple-200 dark:border-purple-800 p-3 transition-all hover:shadow-md upgrade-card"},[a("div",{class:K(["absolute top-2 right-2 text-xs font-medium px-1.5 py-0.5 rounded-full",b(e).isColonyUpgradeMaxed(r.id)?"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300":"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300"])},_(r.level)+_(r.maxLevel?"/"+r.maxLevel:""),3),a("h3",ihe,_(r.name),1),a("p",ahe,_(r.description),1),a("div",lhe,[n[15]||(n[15]=a("span",{class:"text-purple-600 dark:text-purple-400"},"Current Effect:",-1)),a("span",che,_(b(e).getFormattedColonyEffect(r.id)),1)]),a("div",uhe,[a("div",dhe,[r.id===b(xr).EP_BOOST?(h(),v("span",mhe,n[16]||(n[16]=[a("span",{class:"i-heroicons-sparkles mr-1"},null,-1),oe(" Affects: Evolution Points ")]))):r.id===b(xr).PHEROMONE_BOOST?(h(),v("span",fhe,n[17]||(n[17]=[a("span",{class:"i-heroicons-beaker mr-1"},null,-1),oe(" Affects: Pheromone Essence ")]))):r.id===b(xr).GLOBAL_PRODUCTION?(h(),v("span",phe,n[18]||(n[18]=[a("span",{class:"i-heroicons-globe-alt mr-1"},null,-1),oe(" Affects: All Production ")]))):Q("",!0)])]),b(e).isColonyUpgradeMaxed(r.id)?Q("",!0):(h(),v("div",hhe,[a("div",ghe,[n[19]||(n[19]=a("span",{class:"i-heroicons-arrow-up text-purple-500 mr-1"},null,-1)),n[20]||(n[20]=a("span",{class:"font-medium"},"Next level:",-1)),r.id===b(xr).EP_BOOST?(h(),v("span",vhe,"+"+_(s.formatUpgradeImprovement(r.id,r.getMultiplier(r.level+1)-r.getMultiplier(r.level)))+" EP gain",1)):r.id===b(xr).PHEROMONE_BOOST?(h(),v("span",bhe,"+"+_(s.formatUpgradeImprovement(r.id,r.getMultiplier(r.level+1)-r.getMultiplier(r.level)))+" pheromone gain",1)):r.id===b(xr).GLOBAL_PRODUCTION?(h(),v("span",yhe,"+"+_(s.formatUpgradeImprovement(r.id,r.getMultiplier(r.level+1)-r.getMultiplier(r.level)))+" global production",1)):Q("",!0)])])),n[21]||(n[21]=a("div",{class:"mb-2 text-xs text-gray-500 dark:text-gray-400 flex items-center"},[a("span",{class:"i-heroicons-information-circle mr-1"}),a("span",null,"Improves by +20% per ascension level")],-1)),Ye(Ul,{onAction:o=>s.purchaseColonyUpgrade(r.id),class:K(s.colonyButtonClass(r.id)),disabled:!b(e).canColonyUpgrade(r.id)},{default:Rt(()=>[b(e).isColonyUpgradeMaxed(r.id)?(h(),v("span",_he)):(h(),v("span",xhe)),oe(" "+_(s.colonyUpgradeButtonText(r.id)),1)]),_:2},1032,["onAction","class","disabled"])]))),128))])])]))}}),whe={class:"mb-4"},Ehe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Che={class:"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-200 dark:border-amber-700/50 mb-2"},She={class:"flex justify-between text-xs text-amber-700 dark:text-amber-300 mb-1"},The={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden"},Ahe={class:"flex justify-between mt-1 items-center"},Ihe={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center"},Phe={class:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3 border border-amber-200 dark:border-amber-700/50"},Mhe={class:"flex items-center justify-between"},$he={class:"text-gray-600 dark:text-gray-300"},Rhe=["disabled"],Lhe={key:0,class:"inline-block animate-pulse"},Dhe={key:1},Nhe={key:2},Ohe={class:"mt-3"},Fhe={key:0,class:"flex items-center justify-between bg-amber-100/70 dark:bg-amber-900/30 p-2 rounded border border-amber-200/80 dark:border-amber-800/30"},Uhe={key:0,class:"text-xs text-amber-600 dark:text-amber-400 flex items-center mt-0.5"},qhe={key:1,class:"relative"},Bhe={key:0,class:"absolute z-20 text-xs w-full max-w-xs bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-amber-200 dark:border-amber-800 sm:right-0 sm:top-full sm:mt-2 left-0 top-full mt-2"},Vhe={class:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg border border-purple-200 dark:border-purple-700/50 mb-2"},Hhe={class:"flex justify-between text-xs text-purple-700 dark:text-purple-300 mb-1"},Ghe={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden"},jhe={class:"flex justify-between mt-1 items-center"},Whe={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center"},zhe={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3 border border-purple-200 dark:border-purple-700/50"},Qhe={class:"flex items-center justify-between"},Khe={class:"text-gray-600 dark:text-gray-300"},Yhe=["disabled"],Xhe={key:0,class:"inline-block animate-pulse"},Jhe={key:1},Zhe={key:2},e0e={class:"mt-3"},t0e={key:0,class:"flex items-center justify-between bg-purple-100/70 dark:bg-purple-900/30 p-2 rounded border border-purple-200/80 dark:border-purple-800/30"},s0e={key:0,class:"text-xs text-purple-600 dark:text-purple-400 flex items-center mt-0.5"},n0e={key:1,class:"relative"},r0e={key:0,class:"absolute z-20 text-xs w-full max-w-xs bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-purple-200 dark:border-purple-800 sm:right-0 sm:top-full sm:mt-2 left-0 top-full mt-2"},o0e=Je({__name:"DigestiveSystems",props:{formattedStomachContent:{},formattedEffectiveStomachCapacity:{},formattedPheromoneStomachContent:{},formattedEffectivePheromoneStomachCapacity:{},formattedDecayRate:{},formattedPheromoneDecayRate:{},isFeeding:{type:Boolean},isFeedingPheromone:{type:Boolean},feedingResult:{},feedingPheromoneResult:{},feedAllToMegaAnt:{type:Function},feedPheromoneToMegaAnt:{type:Function}},setup(t){const e=Wt(),s=Ht(),n=Ks(),r=Y(!1),o=Y(!1),i=()=>{r.value=!r.value,o.value=!1},c=()=>{o.value=!o.value,r.value=!1},u=q(()=>{const d=e.AUTO_FEED_INTERVAL,m=e.autoFeedTickCounter;return d-m});return(d,m)=>(h(),v("div",whe,[m[28]||(m[28]=a("h3",{class:"font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center"},[a("span",{class:"i-heroicons-beaker text-indigo-500 mr-2"}),oe(" Digestive Systems "),a("span",{class:"ml-2 text-xs bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-2 py-0.5 rounded-full"},"Auto-digests over time")],-1)),a("div",Ehe,[a("div",null,[a("div",Che,[m[6]||(m[6]=a("h4",{class:"font-medium text-amber-700 dark:text-amber-300 mb-1 flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-amber-600 dark:text-amber-400 mr-1"}),oe(" Crop System "),a("span",{class:"ml-2 text-xs bg-amber-100/70 dark:bg-amber-800/30 text-amber-700 dark:text-amber-300 px-1.5 py-0.5 rounded-full"}," Mega Ant XP ")],-1)),a("div",She,[m[4]||(m[4]=a("span",null,"Food Storage",-1)),a("span",null,_(d.formattedStomachContent)+" / "+_(d.formattedEffectiveStomachCapacity),1)]),a("div",The,[a("div",{class:K(["h-2.5 rounded-full transition-all duration-300",[b(e).stomachFillPercentage<50?"bg-amber-300":b(e).stomachFillPercentage<80?"bg-amber-400":b(e).stomachFillPercentage<95?"bg-amber-500":"bg-amber-600"]]),style:yt(`width: ${b(e).stomachFillPercentage}%`)},null,6)]),a("div",Ahe,[a("span",Ihe,[m[5]||(m[5]=a("span",{class:"i-heroicons-clock text-amber-500 mr-1"},null,-1)),oe(" "+_(d.formattedDecayRate)+" units/min ",1)]),a("span",{class:K(["text-xs px-2 py-0.5 rounded",{"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":b(e).isStomachFull,"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":!b(e).isStomachFull&&b(e).stomachContent.gt(0),"text-gray-500 dark:text-gray-400":b(e).stomachContent.lte(0)}])},_(b(e).isStomachFull?" Full":b(e).stomachContent.gt(0)?" Digesting":"Empty"),3)])]),a("div",Phe,[m[14]||(m[14]=a("h4",{class:"font-medium text-amber-700 dark:text-amber-300 mb-2 flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square mr-1"}),oe(" Feed Crop (Food) ")],-1)),a("div",Mhe,[a("span",$he,"Available Food: "+_(b(be)(b(s).food)),1),a("button",{onClick:m[0]||(m[0]=(...f)=>d.feedAllToMegaAnt&&d.feedAllToMegaAnt(...f)),disabled:d.isFeeding||b(s).food.lte(0)||b(e).isStomachFull,class:"px-3 sm:px-4 py-2 bg-amber-600 hover:bg-amber-700 dark:bg-amber-700 dark:hover:bg-amber-600 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 flex items-center"},[m[7]||(m[7]=a("span",{class:"i-heroicons-arrow-down-tray mr-1"},null,-1)),d.isFeeding?(h(),v("span",Lhe,"Feeding...")):b(e).isStomachFull?(h(),v("span",Dhe,"Crop Full")):(h(),v("span",Nhe,"Feed All"))],8,Rhe)]),d.feedingResult?(h(),v("p",{key:0,class:K(["mt-2 text-sm",d.feedingResult.includes("error")?"text-red-500":"text-amber-600 dark:text-amber-400"])},_(d.feedingResult),3)):Q("",!0),a("div",Ohe,[b(e).isAutoFeedUnlocked?(h(),v("div",Fhe,[a("div",null,[m[9]||(m[9]=a("span",{class:"text-sm text-amber-700 dark:text-amber-300 flex items-center"},[a("span",{class:"i-heroicons-arrow-path mr-1"}),oe(" Auto Feed (1% of food every 10 ticks) ")],-1)),m[10]||(m[10]=a("p",{class:"text-xs text-amber-600 dark:text-amber-400 mt-0.5"},[a("span",{class:"i-heroicons-information-circle mr-1"}),oe(" Only feeds when crop is completely empty ")],-1)),b(e).autoFeedEnabled?(h(),v("span",Uhe,[m[8]||(m[8]=a("span",{class:"i-heroicons-clock-solid mr-1"},null,-1)),oe(" "+_(u.value)+" ticks until next auto feed ",1)])):Q("",!0)]),a("button",{onClick:m[1]||(m[1]=(...f)=>b(e).toggleAutoFeed&&b(e).toggleAutoFeed(...f)),class:K(["relative inline-flex items-center h-5 rounded-full w-9 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500",b(e).autoFeedEnabled?"bg-amber-600":"bg-gray-300 dark:bg-gray-600"])},[a("span",{class:K(["inline-block w-4 h-4 transform bg-white rounded-full transition-transform",b(e).autoFeedEnabled?"translate-x-5":"translate-x-1"])},null,2)],2)])):(h(),v("div",qhe,[a("div",{onClick:i,class:"flex items-center justify-between bg-gray-100/70 dark:bg-gray-900/30 p-2 rounded border border-gray-300 dark:border-gray-700 opacity-75 cursor-pointer"},m[11]||(m[11]=[js('<div><span class="text-sm text-gray-500 dark:text-gray-400 flex items-center"><span class="i-heroicons-lock-closed mr-1"></span> Auto Feed (1% of food every 10 ticks) </span><p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5"><span class="i-heroicons-information-circle mr-1"></span> Requires prestige upgrade </p></div><div class="relative inline-flex items-center h-5 rounded-full w-9 bg-gray-300 dark:bg-gray-600"><span class="inline-block w-4 h-4 transform bg-white rounded-full translate-x-1"></span></div>',2)])),r.value?(h(),v("div",Bhe,[a("button",{onClick:i,class:"absolute right-2 top-2 text-gray-400 hover:text-gray-500"},m[12]||(m[12]=[a("span",{class:"i-heroicons-x-mark w-4 h-4"},null,-1)])),m[13]||(m[13]=js('<p class="font-medium text-amber-700 dark:text-amber-400 mb-1">Feature Locked</p><p class="text-gray-600 dark:text-gray-300"> Purchase the <span class="font-medium">Mega Ant Auto Feed</span> evolution upgrade to unlock automatic feeding when stomachs are empty. </p><p class="mt-1 text-sm font-medium text-gray-500 dark:text-gray-400"> Cost: 50M Evolution Points </p><div class="absolute w-3 h-3 bg-white dark:bg-gray-800 transform rotate-45 sm:right-4 sm:-mt-4 sm:top-0 left-4 -mt-4 top-0"></div>',4))])):Q("",!0)]))]),m[15]||(m[15]=js('<div class="mt-2 text-xs text-gray-600 dark:text-gray-400 bg-amber-100/50 dark:bg-amber-900/30 p-2 rounded border border-amber-200/50 dark:border-amber-800/30"><p class="mb-1"><span class="font-semibold">How it works:</span> Feeding generates Mega Ant XP based on food magnitude</p><p class="flex items-center"><span class="i-heroicons-light-bulb text-amber-500 mr-1"></span><span>Example: 1e100 food = <span class="font-semibold">100 XP</span> (based on exponent)</span></p></div>',1))])]),a("div",null,[a("div",Vhe,[m[18]||(m[18]=a("h4",{class:"font-medium text-purple-700 dark:text-purple-300 mb-1 flex items-center"},[a("span",{class:"i-heroicons-beaker text-purple-600 dark:text-purple-400 mr-1"}),oe(" True Stomach "),a("span",{class:"ml-2 text-xs bg-purple-100/70 dark:bg-purple-800/30 text-purple-700 dark:text-purple-300 px-1.5 py-0.5 rounded-full"}," Colony XP ")],-1)),a("div",Hhe,[m[16]||(m[16]=a("span",null,"Pheromone Storage",-1)),a("span",null,_(d.formattedPheromoneStomachContent)+" / "+_(d.formattedEffectivePheromoneStomachCapacity),1)]),a("div",Ghe,[a("div",{class:K(["h-2.5 rounded-full transition-all duration-300",[b(e).pheromoneStomachFillPercentage<50?"bg-purple-300":b(e).pheromoneStomachFillPercentage<80?"bg-purple-400":b(e).pheromoneStomachFillPercentage<95?"bg-purple-500":"bg-purple-600"]]),style:yt(`width: ${b(e).pheromoneStomachFillPercentage}%`)},null,6)]),a("div",jhe,[a("span",Whe,[m[17]||(m[17]=a("span",{class:"i-heroicons-clock text-purple-500 mr-1"},null,-1)),oe(" "+_(d.formattedPheromoneDecayRate)+" units/min ",1)]),a("span",{class:K(["text-xs px-2 py-0.5 rounded",{"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":b(e).isPheromoneStomachFull,"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":!b(e).isPheromoneStomachFull&&b(e).pheromoneStomachContent.gt(0),"text-gray-500 dark:text-gray-400":b(e).pheromoneStomachContent.lte(0)}])},_(b(e).isPheromoneStomachFull?" Full":b(e).pheromoneStomachContent.gt(0)?" Digesting":"Empty"),3)])]),a("div",zhe,[m[26]||(m[26]=a("h4",{class:"font-medium text-purple-700 dark:text-purple-300 mb-2 flex items-center"},[a("span",{class:"i-heroicons-beaker mr-1"}),oe(" Feed True Stomach (Essence) ")],-1)),a("div",Qhe,[a("span",Khe,"Pheromone Essence: "+_(b(n).formattedPheromoneEssence),1),a("button",{onClick:m[2]||(m[2]=(...f)=>d.feedPheromoneToMegaAnt&&d.feedPheromoneToMegaAnt(...f)),disabled:d.isFeedingPheromone||b(n).pheromoneEssence.lte(0)||b(e).isPheromoneStomachFull,class:"px-3 sm:px-4 py-2 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 flex items-center"},[m[19]||(m[19]=a("span",{class:"i-heroicons-arrow-down-tray mr-1"},null,-1)),d.isFeedingPheromone?(h(),v("span",Xhe,"Feeding...")):b(e).isPheromoneStomachFull?(h(),v("span",Jhe,"Stomach Full")):(h(),v("span",Zhe,"Feed All"))],8,Yhe)]),d.feedingPheromoneResult?(h(),v("p",{key:0,class:K(["mt-2 text-sm",d.feedingPheromoneResult.includes("error")?"text-red-500":"text-purple-600 dark:text-purple-400"])},_(d.feedingPheromoneResult),3)):Q("",!0),a("div",e0e,[b(e).isAutoFeedUnlocked?(h(),v("div",t0e,[a("div",null,[m[21]||(m[21]=a("span",{class:"text-sm text-purple-700 dark:text-purple-300 flex items-center"},[a("span",{class:"i-heroicons-arrow-path mr-1"}),oe(" Auto Feed (1% of essence every 10 ticks) ")],-1)),m[22]||(m[22]=a("p",{class:"text-xs text-purple-600 dark:text-purple-400 mt-0.5"},[a("span",{class:"i-heroicons-information-circle mr-1"}),oe(" Only feeds when stomach is completely empty ")],-1)),b(e).autoFeedPheromoneEnabled?(h(),v("span",s0e,[m[20]||(m[20]=a("span",{class:"i-heroicons-clock-solid mr-1"},null,-1)),oe(" "+_(u.value)+" ticks until next auto feed ",1)])):Q("",!0)]),a("button",{onClick:m[3]||(m[3]=(...f)=>b(e).toggleAutoFeedPheromone&&b(e).toggleAutoFeedPheromone(...f)),class:K(["relative inline-flex items-center h-5 rounded-full w-9 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",b(e).autoFeedPheromoneEnabled?"bg-purple-600":"bg-gray-300 dark:bg-gray-600"])},[a("span",{class:K(["inline-block w-4 h-4 transform bg-white rounded-full transition-transform",b(e).autoFeedPheromoneEnabled?"translate-x-5":"translate-x-1"])},null,2)],2)])):(h(),v("div",n0e,[a("div",{onClick:c,class:"flex items-center justify-between bg-gray-100/70 dark:bg-gray-900/30 p-2 rounded border border-gray-300 dark:border-gray-700 opacity-75 cursor-pointer"},m[23]||(m[23]=[js('<div><span class="text-sm text-gray-500 dark:text-gray-400 flex items-center"><span class="i-heroicons-lock-closed mr-1"></span> Auto Feed (1% of essence every 10 ticks) </span><p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5"><span class="i-heroicons-information-circle mr-1"></span> Requires prestige upgrade </p></div><div class="relative inline-flex items-center h-5 rounded-full w-9 bg-gray-300 dark:bg-gray-600"><span class="inline-block w-4 h-4 transform bg-white rounded-full translate-x-1"></span></div>',2)])),o.value?(h(),v("div",r0e,[a("button",{onClick:c,class:"absolute right-2 top-2 text-gray-400 hover:text-gray-500"},m[24]||(m[24]=[a("span",{class:"i-heroicons-x-mark w-4 h-4"},null,-1)])),m[25]||(m[25]=js('<p class="font-medium text-purple-700 dark:text-purple-400 mb-1">Feature Locked</p><p class="text-gray-600 dark:text-gray-300"> Purchase the <span class="font-medium">Mega Ant Auto Feed</span> evolution upgrade to unlock automatic feeding when stomachs are empty. </p><p class="mt-1 text-sm font-medium text-gray-500 dark:text-gray-400"> Cost: 50M Evolution Points </p><div class="absolute w-3 h-3 bg-white dark:bg-gray-800 transform rotate-45 sm:right-4 sm:-mt-4 sm:top-0 left-4 -mt-4 top-0"></div>',4))])):Q("",!0)]))]),m[27]||(m[27]=js('<div class="mt-2 text-xs text-gray-600 dark:text-gray-400 bg-purple-100/50 dark:bg-purple-900/30 p-2 rounded border border-purple-200/50 dark:border-purple-800/30"><p class="mb-1"><span class="font-semibold">How it works:</span> Feeding generates Colony XP based on essence magnitude</p><p class="flex items-center"><span class="i-heroicons-light-bulb text-purple-500 mr-1"></span><span>Example: 1e50 essence = <span class="font-semibold">100 XP</span> (essence is 2x more effective)</span></p></div>',1))])])]),m[29]||(m[29]=a("div",{class:"mt-2 bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-xs text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800/50"},[a("div",{class:"flex items-start"},[a("span",{class:"i-heroicons-information-circle text-blue-500 mr-1.5 mt-0.5"}),a("p",null,"Both systems work independently and automatically digest content over time. Upgrades affect both systems simultaneously.")])],-1))]))}}),i0e={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-3 sm:p-4 shadow-md border border-blue-200 dark:border-blue-800/50"},a0e={class:"flex items-start"},l0e={class:"mt-2 flex justify-end"},c0e={key:1,class:"flex justify-end mb-2"},u0e=Je({__name:"TutorialSection",setup(t){const e=Wt(),s=q({get:()=>e.showHelpSection,set:n=>e.toggleHelpSection(n)});return(n,r)=>(h(),v(De,null,[s.value?(h(),v("div",i0e,[a("div",a0e,[r[3]||(r[3]=a("span",{class:"i-heroicons-information-circle text-blue-500 text-xl mr-3 mt-0.5"},null,-1)),a("div",null,[r[2]||(r[2]=js('<h3 class="font-semibold text-blue-700 dark:text-blue-300 mb-2">How The Mega Ant System Works</h3><div class="space-y-3 text-sm text-blue-700 dark:text-blue-300"><p>Your Mega Ant has two digestive systems that work in parallel:</p><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2"><div class="bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg"><h4 class="font-medium text-amber-700 dark:text-amber-300 flex items-center gap-1 mb-1"><span class="i-heroicons-arrow-path-rounded-square"></span>Crop System </h4><ol class="list-decimal list-inside space-y-1 pl-1 text-xs"><li>Feed <b>regular food</b> to your Mega Ant&#39;s crop</li><li>Food is digested automatically over time</li><li>Digestion grants <b>Mega Ant XP</b></li><li>Mega Ant levels unlock <b>upgrade points</b></li></ol></div><div class="bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg"><h4 class="font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1 mb-1"><span class="i-heroicons-beaker"></span>True Stomach System </h4><ol class="list-decimal list-inside space-y-1 pl-1 text-xs"><li>Feed <b>pheromone essence</b> to the true stomach</li><li>Essence is digested automatically over time</li><li>Digestion grants <b>Colony XP</b></li><li>Colony levels unlock <b>colony upgrade points</b></li></ol></div></div><p class="pt-1"> <b>Important:</b> The amount of XP gained is based on the <b>size</b> of what you feed, not the quantity. Feeding 1e100 food provides 100 XP potential.</p><p> <b>Ascension:</b> Reset your progress to gain a permanent multiplier to all XP gains. Your Mega Ant upgrades are preserved!</p></div>',2)),a("div",l0e,[a("button",{class:"text-xs text-blue-600 dark:text-blue-400 hover:underline",onClick:r[0]||(r[0]=o=>s.value=!1)}," Hide This Guide ")])])])])):Q("",!0),s.value?Q("",!0):(h(),v("div",c0e,[a("button",{class:"text-xs bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800/30 px-3 py-1.5 rounded-full flex items-center",onClick:r[1]||(r[1]=o=>s.value=!0)},r[4]||(r[4]=[a("span",{class:"i-heroicons-information-circle mr-1"},null,-1),oe(" Show Guide ")]))]))],64))}}),d0e={class:"flex justify-between items-center mb-4"},m0e={class:"relative tooltip-container group"},f0e={class:"flex items-center"},p0e={key:0,class:"ml-2 bg-purple-800 text-purple-100 px-2 py-0.5 rounded-full text-xs"},h0e={class:"mt-1 font-medium text-purple-600 dark:text-purple-400"},g0e={class:"text-gray-600 dark:text-gray-300"},v0e=Je({__name:"MegaAntHeader",props:{formattedAscensionMultiplier:{}},emits:["showAscensionModal"],setup(t){const e=Wt(),{canAscend:s,ascensionLockExplanation:n}=Z1(),r=Y(!1),o=()=>{r.value=!r.value},i=c=>{c.target.closest(".tooltip-container")||(r.value=!1)};return Et(()=>{document.addEventListener("click",i)}),ar(()=>{document.removeEventListener("click",i)}),(c,u)=>(h(),v(De,null,[a("div",d0e,[u[7]||(u[7]=a("h2",{class:"text-base sm:text-lg font-semibold text-green-800 dark:text-green-200 flex items-center"},[a("span",{class:"i-heroicons-bug-ant text-green-600 dark:text-green-400 mr-2"}),oe(" Mega Ant Evolution ")],-1)),a("div",m0e,[a("div",f0e,[a("button",{onClick:u[0]||(u[0]=d=>b(s)?c.$emit("showAscensionModal"):null),class:K(["px-2 py-1 sm:px-4 sm:py-2 text-sm rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 flex items-center",b(s)?"bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"])},[a("span",{class:K([b(s)?"i-heroicons-arrow-up-circle":"i-heroicons-lock-closed","mr-1"])},null,2),u[1]||(u[1]=a("span",null,"Ascend",-1)),b(e).ascensionCount>0?(h(),v("span",p0e,_(b(e).ascensionCount),1)):Q("",!0)],2),a("button",{onClick:xt(o,["stop"]),class:"ml-1 p-2 text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-full focus:outline-none","aria-label":"Ascension info"},u[2]||(u[2]=[a("span",{class:"i-heroicons-information-circle text-sm"},null,-1)]))]),a("div",{class:K(["absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-purple-200 dark:border-purple-700 z-10 text-xs transition-opacity duration-200",r.value?"block opacity-100":"hidden sm:group-hover:block opacity-0 sm:group-hover:opacity-100"])},[b(s)?(h(),v(De,{key:0},[u[3]||(u[3]=a("p",{class:"font-medium text-purple-700 dark:text-purple-300 mb-1"},"Ascension Reset",-1)),u[4]||(u[4]=a("p",{class:"text-gray-600 dark:text-gray-300"},[oe("Reset your progress but "),a("span",{class:"font-semibold"},"keep all upgrades"),oe(" to gain a permanent multiplier to XP gains.")],-1)),a("p",h0e,"Current bonus: "+_(c.formattedAscensionMultiplier)+"x",1)],64)):(h(),v(De,{key:1},[u[5]||(u[5]=a("p",{class:"font-medium text-red-500 dark:text-red-400 mb-1"},"Ascension Locked",-1)),a("p",g0e,_(b(n)),1),u[6]||(u[6]=a("p",{class:"mt-1 text-sm font-medium text-gray-500 dark:text-gray-400"},"Complete quests to unlock this feature",-1))],64))],2)])]),u[8]||(u[8]=a("p",{class:"text-green-700 dark:text-green-300 mb-4 flex items-start"},[a("span",{class:"i-heroicons-information-circle text-green-500 mr-2 mt-0.5"}),a("span",null,"Your colony's ultimate evolution. Feed your Mega Ant to grow its power and upgrade both digestive systems to enhance your entire ant farm.")],-1))],64))}}),b0e="/assets/Mega-ant-GPeYD705.png",y0e={class:"flex justify-center"},_0e={class:"relative"},x0e={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-green-300/70 to-transparent dark:from-green-800/70 py-1 text-center"},k0e={class:"text-green-900 dark:text-green-100 font-semibold text-sm"},w0e={key:0,class:"absolute top-0 right-0 transform translate-x-2 -translate-y-2 bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm border-2 border-white dark:border-gray-800 shadow-lg z-10"},E0e=Je({__name:"MegaAntImage",props:{isFeeding:{type:Boolean},isFeedingPheromone:{type:Boolean}},setup(t){const e=Wt();return(s,n)=>(h(),v("div",y0e,[a("div",_0e,[a("div",{class:K(["relative w-32 h-32 sm:w-40 sm:h-40 overflow-hidden rounded-full bg-gradient-to-b from-green-200 to-green-300 dark:from-green-900 dark:to-green-800 border-4 border-green-300 dark:border-green-700 shadow-lg transition-all duration-300",{"feeding-animation":s.isFeeding||s.isFeedingPheromone,"digesting-animation":b(e).stomachContent.gt(0)||b(e).pheromoneStomachContent.gt(0)}])},[a("img",{src:b0e,alt:"Mega Ant",class:K(["w-full h-full object-contain",{"animate-pulse":s.isFeeding||s.isFeedingPheromone}])},null,2),a("div",x0e,[a("span",k0e,"Level "+_(b(e).level.toString()),1)])],2),b(e).ascensionCount>0?(h(),v("div",w0e,_(b(e).ascensionCount),1)):Q("",!0)])]))}}),C0e=Ct(E0e,[["__scopeId","data-v-bebc8eeb"]]),S0e={class:"flex flex-col justify-center col-span-2"},T0e={class:"flex justify-between mb-1"},A0e={class:"text-green-700 dark:text-green-300"},I0e={class:"flex justify-between mb-1"},P0e={class:"text-purple-700 dark:text-purple-300"},M0e={class:"flex justify-between mb-1"},$0e={class:"text-green-700 dark:text-green-300"},R0e={class:"flex justify-between mb-1"},L0e={class:"text-purple-700 dark:text-purple-300"},D0e={key:0,class:"flex justify-between mb-1"},N0e={class:"text-purple-700 dark:text-purple-300"},O0e={class:"flex justify-between mb-1"},F0e={class:"text-amber-700 dark:text-amber-300"},U0e={class:"flex justify-between mb-1"},q0e={class:"text-amber-700 dark:text-amber-300"},B0e={class:"flex justify-between mb-1"},V0e={class:"text-purple-700 dark:text-purple-300"},H0e={class:"flex justify-between mb-1"},G0e={class:"text-purple-700 dark:text-purple-300"},j0e=Je({__name:"MegaAntStats",props:{formattedAscensionMultiplier:{},formattedEffectiveStomachCapacity:{},formattedDecayRate:{},formattedEffectivePheromoneStomachCapacity:{},formattedPheromoneDecayRate:{}},setup(t){const e=Wt();return(s,n)=>(h(),v("div",S0e,[a("div",T0e,[n[0]||(n[0]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Mega Ant Level:",-1)),a("span",A0e,_(b(e).level.toString()),1)]),a("div",I0e,[n[1]||(n[1]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Colony Level:",-1)),a("span",P0e,_(b(e).colonyLevel.toString()),1)]),a("div",M0e,[n[2]||(n[2]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Available Upgrade Points:",-1)),a("span",$0e,_(b(e).availableLevels),1)]),a("div",R0e,[n[3]||(n[3]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Ascension Level:",-1)),a("span",L0e,_(b(e).ascensionCount),1)]),b(e).ascensionCount>0?(h(),v("div",D0e,[n[4]||(n[4]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Ascension Bonus:",-1)),a("span",N0e,_(s.formattedAscensionMultiplier)+"x",1)])):Q("",!0),a("div",O0e,[n[5]||(n[5]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Crop Capacity:",-1)),a("span",F0e,_(s.formattedEffectiveStomachCapacity),1)]),a("div",U0e,[n[6]||(n[6]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"Crop Digestion Rate:",-1)),a("span",q0e,_(s.formattedDecayRate)+" units/min",1)]),a("div",B0e,[n[7]||(n[7]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"True Stomach Capacity:",-1)),a("span",V0e,_(s.formattedEffectivePheromoneStomachCapacity),1)]),a("div",H0e,[n[8]||(n[8]=a("span",{class:"text-green-800 dark:text-green-200 font-semibold"},"True Stomach Digestion:",-1)),a("span",G0e,_(s.formattedPheromoneDecayRate)+" units/min",1)])]))}}),W0e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},z0e={class:"flex justify-between text-xs text-green-700 dark:text-green-300 mb-1"},Q0e={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"},K0e={class:"flex justify-between text-xs text-purple-700 dark:text-purple-300 mb-1"},Y0e={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"},X0e=Je({__name:"ExperienceProgressBars",props:{formattedExperience:{},formattedExperienceForNextLevel:{},formattedColonyExperience:{},formattedColonyExperienceForNextLevel:{}},setup(t){const e=Wt();return(s,n)=>(h(),v("div",W0e,[a("div",null,[a("div",z0e,[n[0]||(n[0]=a("span",null,"Mega Ant Experience",-1)),a("span",null,_(s.formattedExperience)+" / "+_(s.formattedExperienceForNextLevel),1)]),a("div",Q0e,[a("div",{class:"bg-green-500 h-2.5 rounded-full",style:yt(`width: ${b(e).levelProgress}%`)},null,4)]),n[1]||(n[1]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Gained from crop digestion ",-1))]),a("div",null,[a("div",K0e,[n[2]||(n[2]=a("span",null,"Colony Experience",-1)),a("span",null,_(s.formattedColonyExperience)+" / "+_(s.formattedColonyExperienceForNextLevel),1)]),a("div",Y0e,[a("div",{class:"bg-purple-500 h-2.5 rounded-full",style:yt(`width: ${b(e).colonyLevelProgress}%`)},null,4)]),n[3]||(n[3]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Gained from true stomach digestion ",-1))])]))}}),J0e={class:"flex flex-wrap gap-2"},Z0e={class:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs sm:text-sm"},ege={class:"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 px-2 py-1 rounded-full text-xs sm:text-sm"},tge={key:0,class:"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-200 px-2 py-1 rounded-full text-xs sm:text-sm flex items-center"},sge=Je({__name:"LevelBadges",setup(t){const e=Wt();return(s,n)=>(h(),v("div",J0e,[a("span",Z0e," Level "+_(b(e).level.toString()),1),a("span",ege," Colony Lvl "+_(b(e).colonyLevel.toString()),1),b(e).ascensionCount>0?(h(),v("span",tge,[n[0]||(n[0]=a("span",{class:"i-heroicons-arrow-up-circle mr-1"},null,-1)),oe(" Ascension "+_(b(e).ascensionCount),1)])):Q("",!0)]))}}),nge={class:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow border border-purple-200 dark:border-purple-700"},rge={class:"flex items-center justify-between"},oge=["disabled"],ige={class:"px-4 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-200 font-medium rounded"},age=["disabled"],lge=Je({__name:"AscensionRequirementSettings",setup(t){const e=()=>{Mr.value<100&&(Mr.value+=5)},s=()=>{Mr.value>5&&(Mr.value-=5)},n=q(()=>`${Mr.value}%`);return(r,o)=>(h(),v("div",nge,[o[2]||(o[2]=a("div",{class:"flex items-center justify-between mb-2"},[a("h3",{class:"text-sm font-semibold text-purple-700 dark:text-purple-300"},"Ascension Requirement"),a("span",{class:"text-xs px-2 py-1 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"},"Debug Mode")],-1)),a("div",rge,[a("button",{onClick:s,disabled:b(Mr)<=5,class:"w-8 h-8 flex items-center justify-center bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 disabled:opacity-50 disabled:cursor-not-allowed"},o[0]||(o[0]=[a("span",{class:"i-heroicons-minus text-lg"},null,-1)]),8,oge),a("div",ige,_(n.value),1),a("button",{onClick:e,disabled:b(Mr)>=100,class:"w-8 h-8 flex items-center justify-center bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 disabled:opacity-50 disabled:cursor-not-allowed"},o[1]||(o[1]=[a("span",{class:"i-heroicons-plus text-lg"},null,-1)]),8,age)]),o[3]||(o[3]=a("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," Quests required to unlock ascension (only shown in debug mode) ",-1))]))}}),cge={class:"flex items-center justify-between mb-3 sm:mb-4"},uge={class:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold whitespace-nowrap"},dge={class:"flex gap-2 items-center flex-wrap justify-end mb-3"},mge={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex gap-1 border border-gray-200 dark:border-gray-700"},fge={class:"text-xs ml-1"},pge={key:0,class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex border border-gray-200 dark:border-gray-700"},hge=["aria-label","title"],gge={key:0,class:"i-mdi-fullscreen w-4 h-4"},vge={key:1,class:"i-mdi-fullscreen-exit w-4 h-4"},bge={class:"flex flex-wrap gap-1 sm:gap-2 mb-3 sm:mb-4"},yge={class:"relative z-10 min-w-max tree-content"},_ge=["data-id","onClick"],xge={class:"text-[10px] sm:text-xs font-semibold text-center overflow-hidden text-ellipsis leading-tight"},kge={key:0,class:"absolute -top-2 -right-2 bg-emerald-500 dark:bg-emerald-400 text-white dark:text-gray-900 rounded-full w-6 h-6 flex items-center justify-center shadow-md"},wge={key:1,class:"absolute -top-2 -right-2 bg-amber-500 dark:bg-amber-400 text-white dark:text-gray-900 rounded-full w-6 h-6 flex items-center justify-center shadow-md animate-pulse"},Ege={key:2,class:"absolute -top-2 -right-2 bg-gray-300 dark:bg-gray-500 text-gray-700 dark:text-gray-900 rounded-full text-[10px] px-1 font-bold shadow-md"},Cge=["aria-labelledby","aria-describedby"],Sge={class:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4"},Tge={class:"flex-grow pr-6"},Age={class:"flex items-center mb-2"},Ige=["id"],Pge=["id"],Mge={class:"text-left sm:text-right flex-shrink-0 w-full sm:w-auto"},$ge={class:"text-xs sm:text-sm font-semibold text-amber-600 dark:text-amber-400 mb-1"},Rge=["disabled"],Lge={key:0,class:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700/50"},Dge={class:"flex items-center mb-2"},Nge={class:"font-semibold text-xs sm:text-sm"},Oge={class:"space-y-1.5"},Fge={key:0,class:"i-mdi-multiplication text-blue-500 dark:text-blue-400 mr-2 flex-shrink-0 mt-0.5 text-sm sm:text-base"},Uge={key:1,class:"i-mdi-plus text-green-500 dark:text-green-400 mr-2 flex-shrink-0 mt-0.5 text-sm sm:text-base"},qge={key:2,class:"i-mdi-check-circle text-emerald-500 dark:text-emerald-400 mr-2 flex-shrink-0 mt-0.5 text-sm sm:text-base"},Bge={class:"font-medium"},Vge={key:1,class:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700/50"},Hge={class:"flex flex-wrap gap-2"},Gge={key:2,class:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700/50 bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-lg text-sm text-emerald-800 dark:text-emerald-300 flex items-center"},jge=Je({__name:"AscensionTreeView",setup(t){const e=Wt(),{showToast:s}=Us(),n=q(()=>e.getAscensionUpgrades()),r=q(()=>{const pe=new Map;return n.value.forEach(_e=>{if(_e.category&&!pe.has(_e.category)){const Ee=_e.category.charAt(0).toUpperCase()+_e.category.slice(1);pe.set(_e.category,Ee)}}),pe}),o=q(()=>e.ascensionPoints),i=Y(null),c=Y(null),u=Y(null),d=Y(null),m=Y(1),f=Y(jt.isFullscreen),p=Y(window.innerWidth<640),g=()=>{jt.isEnabled&&i.value?jt.toggle(i.value).catch(pe=>{console.error("Failed to toggle fullscreen:",pe),s("Could not enter fullscreen mode.","error")}):jt.isEnabled||s("Fullscreen is not supported by your browser or is disabled.","warning")},w=()=>{f.value=jt.isFullscreen},C=()=>{m.value=Math.min(m.value+.25,3),A()},E=()=>{m.value=Math.max(m.value-.25,.5),A()},k=()=>{m.value=1,A()},A=()=>{if(!c.value)return;const pe=c.value.querySelector(".tree-content");pe&&(c.value.style.setProperty("--zoom-scale",m.value.toString()),pe.classList.toggle("zoomed",m.value>1),pe.style.transform=`scale(${m.value})`,setTimeout(()=>{$()},300))},S=pe=>{if(!pe)return"bg-gray-100 dark:bg-gray-800";switch(pe){case"core":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 border-yellow-300 dark:border-yellow-800";case"megaAnt":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border-green-300 dark:border-green-800";case"colony":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border-purple-300 dark:border-purple-800";case"resource":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border-blue-300 dark:border-blue-800";case"qol":return"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border-amber-300 dark:border-amber-800";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 border-gray-300 dark:border-gray-700"}},T=pe=>{if(!pe)return"i-mdi-star";switch(pe){case"core":return"i-mdi-radioactive text-yellow-600 dark:text-yellow-500";case"megaAnt":return"i-mdi-bug text-green-600 dark:text-green-500";case"colony":return"i-mdi-antenna text-purple-600 dark:text-purple-500";case"resource":return"i-mdi-database text-blue-600 dark:text-blue-500";case"qol":return"i-mdi-star text-amber-600 dark:text-amber-500";default:return"i-mdi-star text-gray-600 dark:text-gray-500"}},R=pe=>e.hasAscensionUpgrade(pe.id)?"border-4 border-emerald-500 dark:border-emerald-400 bg-emerald-50 dark:bg-emerald-900/40 shadow-emerald-500/30 dark:shadow-emerald-400/30 shadow-lg":e.canPurchaseAscensionUpgrade(pe.id)?"border-4 border-amber-400 dark:border-amber-300 bg-amber-50 dark:bg-amber-900/40 shadow-amber-400/30 dark:shadow-amber-300/30 shadow-md cursor-pointer hover:shadow-lg hover:shadow-amber-400/40 dark:hover:shadow-amber-300/40 transition-all hover:scale-105":e.areAscensionPrerequisitesMet(pe.id)?"border-4 border-gray-300 dark:border-gray-500 bg-gray-50 dark:bg-gray-800 opacity-90 cursor-not-allowed":"border-4 border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 opacity-50 filter grayscale cursor-not-allowed",L=pe=>e.hasAscensionUpgrade(pe.id)?"bg-emerald-500 text-white cursor-not-allowed font-bold":e.canPurchaseAscensionUpgrade(pe.id)?"bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-500 text-white font-bold hover:shadow-md":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed",P=pe=>{if(!e.canPurchaseAscensionUpgrade(pe.id))return;e.purchaseAscensionUpgrade(pe.id)?s(`Purchased ${pe.name} for ${pe.cost} Ascension Points`,"success"):s("Failed to purchase upgrade","error")},I=Y(null),D=pe=>{document.activeElement instanceof HTMLElement&&document.activeElement.classList.contains("ascension-node")?d.value=document.activeElement:d.value=null,I.value=pe},U=()=>{I.value=null,vs(()=>{d.value&&d.value.focus()})},M=q(()=>{const pe=new Map;return n.value.forEach(_e=>{var Ue,ze;const Ee=((Ue=_e.position)==null?void 0:Ue.row)||0;pe.has(Ee)||pe.set(Ee,[]),(ze=pe.get(Ee))==null||ze.push(_e)}),pe.forEach(_e=>{_e.sort((Ee,Ue)=>{var ze,Re;return(((ze=Ee.position)==null?void 0:ze.col)||0)-(((Re=Ue.position)==null?void 0:Re.col)||0)})}),Array.from(pe.entries()).sort(([_e],[Ee])=>_e-Ee)});let x=null;const $=H0(()=>{p.value=window.innerWidth<640,me()},150),Z=()=>{p.value=window.innerWidth<640,$()};Et(async()=>{await vs(),x=document.getElementById("connections-svg"),c.value?(me(),A()):console.warn("Tree container ref not found on mount."),window.addEventListener("resize",Z),jt.isEnabled&&jt.on("change",w),dt(()=>e.ascensionPoints,$),dt(()=>m.value,A),dt(I,pe=>{vs(()=>{pe&&u.value&&(o3(u,U,{ignore:[d.value]}),u.value.focus())})},{immediate:!1})}),xn(()=>{window.removeEventListener("resize",Z),d.value=null,jt.isEnabled&&jt.off("change",w)});const me=async()=>{if(!x){console.warn("Attempted to draw connections but SVG container is null.");return}if(x.innerHTML="",p.value)return;await vs();const pe=document.querySelectorAll(".ascension-node"),_e=new Map,Ee=c.value;if(!Ee){console.warn("Tree container ref not found for drawing connections.");return}const Ue=Ee.getBoundingClientRect(),ze=Ee.scrollTop,Re=Ee.scrollLeft;if(Ue.width===0||Ue.height===0){console.warn("Container has zero dimensions, skipping connection drawing.");return}let $e=0,Ce=0;if(pe.forEach(Oe=>{const ve=Oe.getAttribute("data-id");if(ve){const fe=Oe.getBoundingClientRect();if(fe.width>0&&fe.height>0){const X=fe.left-Ue.left+Re+fe.width/2,H=fe.top-Ue.top+ze+fe.height/2;$e=Math.max($e,X+fe.width/2),Ce=Math.max(Ce,H+fe.height/2),_e.set(ve,new DOMRect(X,H,fe.width,fe.height))}else console.warn(`Node ${ve} has zero dimensions, skipping.`)}}),$e>0&&Ce>0)x.style.width=`${$e+20}px`,x.style.height=`${Ce+20}px`;else{x.style.width="0px",x.style.height="0px";return}n.value.forEach(Oe=>{const ve=_e.get(Oe.id);ve&&Oe.prerequisites.forEach(fe=>{const X=_e.get(fe);if(!X)return;const H=[X.x,X.y,ve.x,ve.y];if(!H.every(ue=>Number.isFinite(ue))){console.warn(`Invalid coordinates for connection ${fe} -> ${Oe.id}: [${H.join(", ")}], skipping.`);return}const W=X.x,ge=X.y,Te=ve.x,Ie=ve.y,Ne=document.createElementNS("http://www.w3.org/2000/svg","line");Ne.setAttribute("x1",W.toString()),Ne.setAttribute("y1",ge.toString()),Ne.setAttribute("x2",Te.toString()),Ne.setAttribute("y2",Ie.toString());const je=p.value?"1.5px":"3px",N=p.value?"1px":"2px";e.hasAscensionUpgrade(fe)&&e.hasAscensionUpgrade(Oe.id)?(Ne.setAttribute("class","stroke-emerald-500 dark:stroke-emerald-400"),Ne.setAttribute("stroke-width",je)):e.hasAscensionUpgrade(fe)?(Ne.setAttribute("class","stroke-amber-400 dark:stroke-amber-300 stroke-dashed"),Ne.setAttribute("stroke-width",je)):(Ne.setAttribute("class","stroke-gray-300 dark:stroke-gray-600 opacity-60"),Ne.setAttribute("stroke-width",N)),x==null||x.appendChild(Ne)})})};Hc("componentRootRef",i);const re=pe=>`${pe} AP`,J=pe=>{const _e=new Set;return pe.effects.forEach(Ee=>{Ee.category&&_e.add(Ee.category)}),Array.from(_e)},le=pe=>pe?pe.replace(/([A-Z])/g," $1").replace(/^./,_e=>_e.toUpperCase()):"Miscellaneous",se=pe=>({megaAntXpGain:"Mega Ant XP Gain",baseStomachCapacity:"Stomach Capacity",decayRate:"Food Digestion Rate",megaAntEfficiency:"Food XP Efficiency",pheromoneStomachCapacity:"Pheromone Stomach Capacity",pheromoneDecayRate:"Pheromone Digestion Rate",pheromoneEfficiency:"Pheromone XP Efficiency",colonyXpGain:"Colony XP Gain",colonyUpgradePower:"Colony Upgrade Power",colonyEfficiency:"Colony Efficiency",epGain:"EP Gain",pheromoneGain:"Pheromone Gain",globalProduction:"Global Production",worker:"Worker Ant Production",nursery:"Nursery Production",queenChamber:"Queen Chamber Production",colony:"Colony Production",megacolony:"Mega Colony Production",hivemind:"Hivemind Production",antopolis:"Antopolis Production",alateHatchery:"Alate Hatchery Production",upgradeCostReduction:"Upgrade Cost Reduction",offlineProgressRate:"Offline Progress Rate",unlockAscensionTree:"Ascension Tree"})[pe]||pe.replace(/([A-Z])/g," $1").replace(/^./,Ee=>Ee.toUpperCase()),z=(pe,_e)=>pe.effects.filter(Ee=>Ee.category===_e),ce=q(()=>{if(!I.value)return"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700";const pe=I.value.id,_e=e.hasAscensionUpgrade(pe),Ee=e.canPurchaseAscensionUpgrade(pe);return _e?"bg-emerald-50 dark:bg-emerald-900/50 border-emerald-400 dark:border-emerald-500":Ee?"bg-amber-50 dark:bg-amber-900/50 border-amber-400 dark:border-amber-500":"bg-gray-100 dark:bg-gray-800/80 border-gray-300 dark:border-gray-600 opacity-95"});return(pe,_e)=>(h(),v("div",{ref_key:"componentRootRef",ref:i,class:"relative w-full min-h-[80vh] bg-white dark:bg-gray-800 rounded-xl p-2 sm:p-4 shadow-lg border border-gray-200 dark:border-gray-700"},[a("div",cge,[_e[3]||(_e[3]=a("h3",{class:"text-base sm:text-lg font-bold text-amber-600 dark:text-amber-400"},"Ascension Tree",-1)),a("div",uge,_(b(be)(o.value))+" AP ",1)]),a("div",dge,[a("div",mge,[a("button",{onClick:C,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom In",title:"Zoom In (+25%)"},_e[4]||(_e[4]=[a("span",{class:"i-mdi-magnify-plus-outline w-4 h-4"},null,-1)])),a("button",{onClick:k,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Reset Zoom",title:"Reset Zoom (100%)"},[_e[5]||(_e[5]=a("span",{class:"i-mdi-magnify-scan w-4 h-4"},null,-1)),a("span",fge,_(Math.round(m.value*100))+"%",1)]),a("button",{onClick:E,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom Out",title:"Zoom Out (-25%)"},_e[6]||(_e[6]=[a("span",{class:"i-mdi-magnify-minus-outline w-4 h-4"},null,-1)]))]),b(jt).isEnabled?(h(),v("div",pge,[a("button",{onClick:g,class:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500","aria-label":f.value?"Exit Fullscreen":"Enter Fullscreen",title:f.value?"Exit Fullscreen":"Enter Fullscreen"},[f.value?(h(),v("span",vge)):(h(),v("span",gge))],8,hge)])):Q("",!0)]),a("div",bge,[(h(!0),v(De,null,Ge(r.value,([Ee,Ue])=>(h(),v("div",{key:Ee,class:K(["flex items-center px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium",S(Ee)])},[a("span",{class:K([T(Ee),"mr-1 text-xs sm:text-sm"])},null,2),oe(" "+_(Ue),1)],2))),128))]),a("div",{ref_key:"treeContainerRef",ref:c,class:"relative w-full overflow-auto tree-scroll-container",style:{"min-height":"350px","--zoom-scale":"1"},onScroll:_e[0]||(_e[0]=(...Ee)=>b($)&&b($)(...Ee))},[_e[9]||(_e[9]=a("svg",{id:"connections-svg",class:"absolute inset-0 w-full h-full pointer-events-none z-0"},null,-1)),a("div",yge,[(h(!0),v(De,null,Ge(M.value,([Ee,Ue])=>(h(),v("div",{key:Ee,class:"flex flex-col sm:flex-row sm:justify-center items-center my-6 sm:my-8 gap-6 sm:gap-12"},[(h(!0),v(De,null,Ge(Ue,ze=>(h(),v("div",{key:ze.id,class:"ascension-node relative z-10","data-id":ze.id,onClick:Re=>D(ze)},[a("div",{class:K(["w-16 h-16 sm:w-20 sm:h-20 rounded-lg flex flex-col items-center justify-center p-1 sm:p-2 cursor-pointer transition-all",[S(ze.category),R(ze)]])},[a("div",{class:K([ze.icon||T(ze.category),"text-xl sm:text-2xl mb-0.5 sm:mb-1"])},null,2),a("div",xge,_(ze.name),1),b(e).hasAscensionUpgrade(ze.id)?(h(),v("div",kge,_e[7]||(_e[7]=[a("span",{class:"i-mdi-check text-sm"},null,-1)]))):b(e).canPurchaseAscensionUpgrade(ze.id)?(h(),v("div",wge,_e[8]||(_e[8]=[a("span",{class:"i-mdi-plus text-sm"},null,-1)]))):b(e).areAscensionPrerequisitesMet(ze.id)?(h(),v("div",Ege,_(ze.cost)+"AP ",1)):Q("",!0)],2)],8,_ge))),128))]))),128))])],544),Ye(or,{name:"fade"},{default:Rt(()=>[I.value?(h(),v("div",{key:0,class:"fixed inset-0 z-30 flex items-center justify-center p-4 bg-black/50 dark:bg-black/60 backdrop-blur-sm",onClick:U},[a("div",{ref_key:"detailsPanelRef",ref:u,role:"dialog","aria-modal":"true","aria-labelledby":`details-title-${I.value.id}`,"aria-describedby":`details-desc-${I.value.id}`,tabindex:"-1",class:K(["relative rounded-lg shadow-xl p-4 sm:p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto z-40 border-2 focus:outline-none focus:ring-2 focus:ring-emerald-500",ce.value]),onClick:_e[2]||(_e[2]=xt(()=>{},["stop"])),onKeydown:Pl(U,["esc"])},[a("button",{onClick:U,class:"absolute top-2 right-2 p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 dark:focus:ring-offset-gray-800","aria-label":"Close details"},_e[10]||(_e[10]=[a("span",{class:"i-mdi-close w-5 h-5"},null,-1)])),a("div",Sge,[a("div",Tge,[a("div",Age,[a("span",{class:K([I.value.icon||T(I.value.category),"mr-2 text-xl sm:text-2xl flex-shrink-0"])},null,2),a("h4",{id:`details-title-${I.value.id}`,class:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100"},_(I.value.name),9,Ige)]),a("p",{id:`details-desc-${I.value.id}`,class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base mb-3 sm:mb-4"},_(I.value.description),9,Pge)]),a("div",Mge,[a("div",$ge," Cost: "+_(re(I.value.cost)),1),a("button",{onClick:_e[1]||(_e[1]=xt(Ee=>P(I.value),["stop"])),class:K(["px-3 py-1.5 rounded text-sm font-semibold transition-colors w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 dark:focus:ring-offset-gray-800",L(I.value)]),disabled:!b(e).canPurchaseAscensionUpgrade(I.value.id)||b(e).hasAscensionUpgrade(I.value.id)},_(b(e).hasAscensionUpgrade(I.value.id)?"Purchased":"Purchase"),11,Rge)])]),I.value.effects.length>0?(h(),v("div",Lge,[_e[11]||(_e[11]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Effects:",-1)),(h(!0),v(De,null,Ge(J(I.value),Ee=>(h(),v("div",{key:Ee,class:K(["mb-3 p-2 rounded-lg",S(Ee)])},[a("div",Dge,[a("span",{class:K([T(Ee),"mr-2 text-sm sm:text-base"])},null,2),a("span",Nge,_(le(Ee))+" Effects",1)]),a("ul",Oge,[(h(!0),v(De,null,Ge(z(I.value,Ee),(Ue,ze)=>(h(),v("li",{key:ze,class:"flex items-start text-xs sm:text-sm p-1.5 bg-white/60 dark:bg-gray-800/60 rounded"},[Ue.effectMethod==="multiplicative_increase"?(h(),v("span",Fge)):Ue.effectMethod==="additive"?(h(),v("span",Uge)):(h(),v("span",qge)),a("div",null,[a("div",Bge,_(se(Ue.target)),1),a("div",null,_(Ue.formatEffect(Ue.value)),1)])]))),128))])],2))),128))])):Q("",!0),I.value.prerequisites.length>0?(h(),v("div",Vge,[_e[12]||(_e[12]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Prerequisites:",-1)),a("div",Hge,[(h(!0),v(De,null,Ge(I.value.prerequisites,Ee=>{var Ue;return h(),v("div",{key:Ee,class:K(["text-xs px-2 py-1 rounded-full",b(e).hasAscensionUpgrade(Ee)?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},_(((Ue=n.value.find(ze=>ze.id===Ee))==null?void 0:Ue.name)||Ee),3)}),128))])])):Q("",!0),b(e).hasAscensionUpgrade(I.value.id)?(h(),v("div",Gge,_e[13]||(_e[13]=[a("span",{class:"i-mdi-check-circle text-lg mr-2"},null,-1),a("span",null,"This upgrade is active and its effects are currently applied.",-1)]))):Q("",!0)],42,Cge)])):Q("",!0)]),_:1})],512))}}),UT=Ct(jge,[["__scopeId","data-v-8602faa9"]]),Wge={class:"space-y-4"},zge={key:0,class:"mb-4"},Qge={class:"bg-green-50 dark:bg-green-900/20 rounded-xl p-3 sm:p-4 shadow-md border border-green-200 dark:border-green-800/50"},Kge={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Yge={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 sm:p-4 mb-4"},Xge={class:"flex flex-col sm:flex-row sm:items-center justify-between mb-2 gap-2"},Jge=["onClick"],Zge={key:0,class:"pt-4"},eve={key:1,class:"mt-6"},tve=Je({__name:"MegaAntTab",setup(t){const e=Tu(),s=Wt(),n=Ht(),r=Ks(),{showToast:o}=Us(),{isClosing:i,handleClose:c}=Gr(),{canAscend:u,ascensionLockExplanation:d}=Z1(),m=Y(!1),f=Y(null);q({get:()=>s.showHelpSection,set:H=>s.toggleHelpSection(H)});const p=Y(!1),g=Y(!1),w=q(()=>s.level.gte(20)||s.ascensionCount>0),C=Y(!1),E=Y(null),k=q(()=>be(s.stomachContent,1)),A=q(()=>be(s.pheromoneStomachContent,1)),S=q(()=>l(s.effectiveDecayRate).mul(60).toFixed(1)),T=q(()=>l(s.effectivePheromoneDecayRate).mul(60).toFixed(1)),R=q(()=>be(s.effectiveStomachCapacity)),L=q(()=>be(s.effectivePheromoneStomachCapacity)),P=q(()=>s.decayEfficiencyMultiplier.toFixed(2)),I=q(()=>s.pheromoneEfficiencyMultiplier.toFixed(2)),D=q(()=>s.ascensionMultiplier.toFixed(2)),U=q(()=>s.ascensionMultiplier.add(l(.25)).toFixed(2)),M=q(()=>be(s.experience)),x=q(()=>be(s.experienceForNextLevel)),$=q(()=>be(s.colonyExperience)),Z=q(()=>be(s.colonyExperienceForNextLevel)),me=H=>be(H,1),re=H=>be(H,1),J=H=>{const W=Date.now(),ge=Math.floor((W-H)/1e3);return ge<60?`${ge}s ago`:ge<3600?`${Math.floor(ge/60)}m ago`:`${Math.floor(ge/3600)}h ago`},le=(H,W)=>Object.values(Tn).includes(H)?s.formatUpgradeImprovement(H,W):Object.values(xr).includes(H)?s.formatColonyUpgradeImprovement(H,W):"",se=H=>{s.purchaseUpgrade(H)},z=H=>{s.purchaseColonyUpgrade(H)},ce=H=>{const W=H;return s.isUpgradeMaxed(W)?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 cursor-not-allowed":s.canUpgrade(W)?"bg-emerald-500 hover:bg-emerald-600 dark:bg-emerald-600 dark:hover:bg-emerald-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"},pe=H=>{const W=H;return s.isColonyUpgradeMaxed(W)?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 cursor-not-allowed":s.canColonyUpgrade(W)?"bg-purple-500 hover:bg-purple-600 dark:bg-purple-600 dark:hover:bg-purple-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"},_e=H=>{const W=H;return s.isUpgradeMaxed(W)?"Maxed":"Upgrade (1 level)"},Ee=H=>{const W=H;return s.isColonyUpgradeMaxed(W)?"Maxed":"Upgrade (1 level)"},Ue=()=>{try{if(n.food.lte(0)){f.value="No food available to feed",setTimeout(()=>{f.value=null},3e3);return}if(s.isStomachFull){f.value="Crop is full, wait for digestion",setTimeout(()=>{f.value=null},3e3);return}m.value=!0;const H=new Se(n.food.toString()),W=l(Math.max(1,Math.floor(Math.log10(parseFloat(H.toString()))))),{xpValue:ge,foodConsumed:Te}=s.feedAnt(H);n.food=n.food.sub(Te),f.value=`Fed ${be(Te)} food to the Mega Ant, potential XP: ${be(ge)}`,setTimeout(()=>{f.value=null},3e3)}catch(H){console.error("Error feeding Mega Ant:",H),f.value="An error occurred",setTimeout(()=>{f.value=null},3e3)}finally{m.value=!1}},ze=()=>{try{if(r.pheromoneEssence.lte(0)){E.value="No pheromone essence available to feed",setTimeout(()=>{E.value=null},3e3);return}if(s.isPheromoneStomachFull){E.value="True stomach is full, wait for digestion",setTimeout(()=>{E.value=null},3e3);return}C.value=!0;const H=s.effectivePheromoneStomachCapacity.sub(s.pheromoneStomachContent);if(H.lte(0)){E.value="True stomach is already full.",setTimeout(()=>{E.value=null},3e3),C.value=!1;return}const W=l(10).pow(H.div(2)),Te=r.pheromoneEssence.min(W);if(Te.lte(0)){E.value="Not enough essence to feed.",setTimeout(()=>{E.value=null},3e3),C.value=!1;return}const{xpValue:Ie,essenceConsumed:Ne}=s.feedAntPheromone(Te);r.pheromoneEssence=r.pheromoneEssence.sub(Ne),E.value=`Fed ${be(Ne)} pheromone essence to the Mega Ant, potential XP: ${be(Ie)}`,setTimeout(()=>{E.value=null},3e3)}catch(H){console.error("Error feeding pheromone essence to Mega Ant:",H),E.value="An error occurred",setTimeout(()=>{E.value=null},3e3)}finally{C.value=!1}},Re=()=>{if(!u.value){o(d.value,"error"),$e();return}g.value=!0;try{console.log("Starting ascension process...");const H=s.ascend();H!==!1?(o(`Ascension ${H.ascensionCount} complete! Gained ${be(H.pointsGained)} Ascension Points.`,"success"),setTimeout(()=>{o("Ascension Points and colony progress were reset, but your Mega Ant upgrades remain!","info")},2e3),setTimeout(()=>{const W=s.ascensionMultiplier.sub(l(1)).mul(100).toFixed(0);o(`You now have +${W}% XP gain from Ascension level ${H.ascensionCount}`,"info")},4e3),p.value=!1,console.log("Ascension complete:",H.ascensionCount,"Points gained:",be(H.pointsGained))):o("Ascension failed due to quest requirements","error")}catch(H){console.error("Error during ascension:",H),o("An error occurred during ascension","error")}finally{g.value=!1}e.push("/")},$e=()=>{c(()=>{p.value=!1})},Ce=Y("megaAnt"),Oe=[{id:"megaAnt",label:"Mega Ant",icon:"i-mdi-bug"},{id:"colony",label:"Colony",icon:"i-mdi-antenna"},{id:"ascension",label:"Ascension",icon:"i-mdi-star"}],ve=Co(),fe=Y(!1);Et(()=>{X(),window.addEventListener("resize",X)}),ar(()=>{window.removeEventListener("resize",X)});const X=()=>{fe.value=window.innerWidth<768};return(H,W)=>(h(),v(De,null,[a("div",Wge,[Ye(u0e),b(ve)?(h(),v("div",zge,[Ye(lge)])):Q("",!0),a("div",Qge,[Ye(v0e,{formattedAscensionMultiplier:D.value,onShowAscensionModal:W[0]||(W[0]=ge=>p.value=!0)},null,8,["formattedAscensionMultiplier"]),a("div",Kge,[Ye(C0e,{isFeeding:m.value,isFeedingPheromone:C.value},null,8,["isFeeding","isFeedingPheromone"]),Ye(j0e,{formattedAscensionMultiplier:D.value,formattedEffectiveStomachCapacity:R.value,formattedDecayRate:S.value,formattedEffectivePheromoneStomachCapacity:L.value,formattedPheromoneDecayRate:T.value},null,8,["formattedAscensionMultiplier","formattedEffectiveStomachCapacity","formattedDecayRate","formattedEffectivePheromoneStomachCapacity","formattedPheromoneDecayRate"])]),a("div",Yge,[a("div",Xge,[W[2]||(W[2]=a("h3",{class:"font-bold text-green-800 dark:text-green-200"},"Your Mega Ant",-1)),Ye(sge)]),Ye(X0e,{formattedExperience:M.value,formattedExperienceForNextLevel:x.value,formattedColonyExperience:$.value,formattedColonyExperienceForNextLevel:Z.value},null,8,["formattedExperience","formattedExperienceForNextLevel","formattedColonyExperience","formattedColonyExperienceForNextLevel"]),Ye(o0e,{formattedStomachContent:k.value,formattedEffectiveStomachCapacity:R.value,formattedPheromoneStomachContent:A.value,formattedEffectivePheromoneStomachCapacity:L.value,formattedDecayRate:S.value,formattedPheromoneDecayRate:T.value,isFeeding:m.value,isFeedingPheromone:C.value,feedingResult:f.value,feedingPheromoneResult:E.value,feedAllToMegaAnt:Ue,feedPheromoneToMegaAnt:ze},null,8,["formattedStomachContent","formattedEffectiveStomachCapacity","formattedPheromoneStomachContent","formattedEffectivePheromoneStomachCapacity","formattedDecayRate","formattedPheromoneDecayRate","isFeeding","isFeedingPheromone","feedingResult","feedingPheromoneResult"]),Ye(Cfe,{formatDigestionAmount:me,formatTimestamp:J,formatXpGained:re}),Ye(Spe,{activeTab:Ce.value,"onUpdate:activeTab":W[1]||(W[1]=ge=>Ce.value=ge),formattedEffectiveStomachCapacity:R.value,formattedEffectivePheromoneStomachCapacity:L.value,formattedDecayEfficiencyMultiplier:P.value,formattedPheromoneEfficiencyMultiplier:I.value,formatUpgradeImprovement:le,buttonClass:ce,upgradeButtonText:_e,colonyButtonClass:pe,colonyUpgradeButtonText:Ee,purchaseUpgrade:se,purchaseColonyUpgrade:z},{default:Rt(()=>[(h(),v(De,null,Ge(Oe,ge=>a("button",{key:ge.id,onClick:Te=>Ce.value=ge.id,class:K(["flex-1 py-2 px-4 text-sm font-medium transition-colors rounded-t-lg",Ce.value===ge.id?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border-b-2 border-amber-500":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},[a("span",{class:K([ge.icon,"mr-1"])},null,2),oe(" "+_(ge.label),1)],10,Jge)),64))]),_:1},8,["activeTab","formattedEffectiveStomachCapacity","formattedEffectivePheromoneStomachCapacity","formattedDecayEfficiencyMultiplier","formattedPheromoneEfficiencyMultiplier"]),Ce.value==="ascension"?(h(),v("div",Zge,[Ye(UT)])):Q("",!0),Ye(khe,{formattedEffectiveStomachCapacity:R.value,formattedEffectivePheromoneStomachCapacity:L.value,formattedDecayEfficiencyMultiplier:P.value,formattedPheromoneEfficiencyMultiplier:I.value,formatUpgradeImprovement:le,buttonClass:ce,upgradeButtonText:_e,colonyButtonClass:pe,colonyUpgradeButtonText:Ee,purchaseUpgrade:se,purchaseColonyUpgrade:z},null,8,["formattedEffectiveStomachCapacity","formattedEffectivePheromoneStomachCapacity","formattedDecayEfficiencyMultiplier","formattedPheromoneEfficiencyMultiplier"]),fe.value?Q("",!0):(h(),v("div",eve,[Ye(UT)]))])])]),p.value?(h(),Tt(lfe,{key:0,isClosing:b(i),isAscending:g.value,isAscensionRecommended:w.value,formattedAscensionMultiplier:D.value,formattedNextAscensionMultiplier:U.value,onClose:$e,onAscend:Re},null,8,["isClosing","isAscending","isAscensionRecommended","formattedAscensionMultiplier","formattedNextAscensionMultiplier"])):Q("",!0)],64))}}),sve=Ct(tve,[["__scopeId","data-v-85ebf224"]]),nve={class:"bg-gradient-to-br from-red-100 to-red-50 dark:from-red-900/40 dark:to-red-800/30 rounded-xl p-3 shadow-md"},rve={class:"flex items-center justify-between mb-2"},ove={class:"text-xs bg-red-900/30 dark:bg-red-950/50 px-2 py-0.5 rounded-full whitespace-nowrap"},ive={class:"w-full h-2 bg-red-900/30 dark:bg-red-950/50 rounded-full overflow-hidden"},ave={class:"text-xs text-red-600 dark:text-red-400 mt-1"},lve=Je({__name:"AdventureProgressBar",setup(t){const e=Vn();return(s,n)=>(h(),v("div",nve,[a("div",rve,[n[0]||(n[0]=a("h2",{class:"text-base font-bold flex items-center"},[a("span",{class:"i-heroicons-clock text-red-700 dark:text-red-500 mr-2"}),oe(" Adventure Progress ")],-1)),a("span",ove,_(b(e).adventureTimeRemaining)+"s ",1)]),a("div",ive,[a("div",{class:"h-full bg-gradient-to-r from-red-600 to-red-500 dark:from-red-500 dark:to-red-400 transition-all duration-100 ease-linear",style:yt({width:`${b(e).adventureProgressPercentage}%`})},null,4)]),a("div",ave,_(b(e).adventureProgressPercentage)+"% ",1)]))}}),Uk="/assets/ant_legion_commander-C5cKxXcU.png",qk="/assets/ant_queen_guardian-I7ddOW1u.png",Bk="/assets/ant_scout_master-qaafyEy9.png",Vk="/assets/ant_tactician-C-GWp6T6.png",Hk="/assets/ant_training_master-DhI7Ty-N.png",Gk="/assets/apocalyptic_termites-C-SwTaRu.png",jk="/assets/army_ant-BMrIvFIN.png",Wk="/assets/beetle-DFb7nM7X.png",zk="/assets/cockroach-Cub6YCf-.png",Qk="/assets/colossal_cockroach-BhWt9zbG.png",Kk="/assets/endless_ant_swarms-CyPswJ6S.png",Yk="/assets/fire_ant-CNsMjxeh.png",Xk="/assets/galactic_moth-D9hG3_XU.png",Jk="/assets/giant_firefly-Dkpiolxv.png",Zk="/assets/giant_moth-BIUE9a9k.png",ew="/assets/giant_stag_beetle-BUEGxrHm.png",tw="/assets/grasshopper-x_AIOsQP.png",sw="/assets/housefly-CSRtOeq8.png",nw="/assets/ladybug-DL6Y_zcL.png",rw="/assets/mosquito-Dp9dA8Y1.png",ow="/assets/mutant_fly-CJ0cMboN.png",iw="/assets/quantum_beetle--T5ffHWC.png",aw="/assets/queen_wasp-DesT5ckY.png",lw="/assets/radioactive_spider-D_F9GcKn.png",cw="/assets/safe-3YavcRxt.png",uw="/assets/scorpion-D22Gkv9_.png",dw="/assets/soldier-BsKI4Heo.png",mw="/assets/stag_beetle_swarm-_rP6jdjp.png",fw="/assets/swarm_lord-diHnktQ9.png",pw="/assets/tarantula-Cv5WKZZQ.png",hw="/assets/termite-HzWLYfUy.png",gw="/assets/ultra_beetle-BKBsMMxN.png",vw="/assets/wasp-LxnO7bdh.png",bw="/assets/worker-ChD_3XO8.png";function yw(){return{analyzeImage:e=>new Promise(s=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{const r=document.createElement("canvas"),o=r.getContext("2d");if(!o){s({dominantColor:"#ffffff",backgroundColor:"#f3f4f6",borderColor:"#e5e7eb"});return}r.width=32,r.height=32,o.drawImage(n,0,0,r.width,r.height);const c=o.getImageData(0,0,r.width,r.height).data;let u=0,d=0,m=0,f=0;for(let C=0;C<c.length;C+=16)u+=c[C],d+=c[C+1],m+=c[C+2],f++;u=Math.round(u/f),d=Math.round(d/f),m=Math.round(m/f);const p=(.299*u+.587*d+.114*m)/255,g=p>.5?"#f3f4f6":"#1f2937",w=p>.5?"#e5e7eb":"#374151";console.log("dominantColor",`rgb(${u}, ${d}, ${m})`),console.log("backgroundColor",g),console.log("borderColor",w),console.log("luminance",p),s({dominantColor:`rgb(${u}, ${d}, ${m})`,backgroundColor:g,borderColor:w})},n.onerror=()=>{s({dominantColor:"#ffffff",backgroundColor:"#f3f4f6",borderColor:"#e5e7eb"})},n.src=e})}}const cve={class:"flex flex-col items-center mb-4"},uve={class:"relative w-24 h-24 mb-2"},dve={class:"relative z-10 w-full h-full"},mve=["src","alt"],fve={key:1,class:"i-heroicons-bug-ant text-amber-700 dark:text-amber-500 text-4xl absolute inset-0 flex items-center justify-center"},pve={class:"flex flex-col items-center gap-2"},hve={class:"text-base font-bold text-amber-800 dark:text-amber-200"},gve={class:"flex items-center gap-2"},vve={key:0,class:"text-xs bg-amber-100 dark:bg-amber-900/50 px-2 py-0.5 rounded-full text-amber-800 dark:text-amber-300 font-medium flex items-center"},bve={class:"text-xs bg-amber-200 dark:bg-amber-900/50 px-2 py-0.5 rounded-full text-amber-800 dark:text-amber-300 font-medium"},yve={class:"w-full h-2.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3"},_ve={key:0,class:"mb-3 bg-amber-100 dark:bg-amber-900/30 rounded-md p-2 text-xs"},xve={class:"flex items-center justify-between mb-1"},kve={class:"flex items-center"},wve={class:"font-medium text-amber-800 dark:text-amber-300"},Eve={class:"text-amber-700 dark:text-amber-400"},Cve={key:0,class:"w-full h-1.5 bg-amber-200 dark:bg-amber-800 rounded-full overflow-hidden"},Sve={class:"grid grid-cols-2 gap-2 mb-2"},Tve={class:"space-y-1"},Ave={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},Ive={class:"font-medium text-amber-800 dark:text-amber-300"},Pve={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},Mve={class:"font-medium text-amber-800 dark:text-amber-300"},$ve={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},Rve={class:"font-medium text-amber-800 dark:text-amber-300"},Lve={class:"space-y-1"},Dve={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},Nve={class:"font-medium text-amber-800 dark:text-amber-300"},Ove={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},Fve={class:"font-medium text-amber-800 dark:text-amber-300"},Uve={class:"bg-amber-100/70 dark:bg-amber-900/30 p-1.5 rounded text-xs flex justify-between"},qve={class:"font-medium text-amber-800 dark:text-amber-300"},Bve={class:"bg-amber-100/70 dark:bg-amber-900/30 p-2 rounded text-xs space-y-1 mb-3"},Vve={class:"flex justify-between"},Hve={class:"font-medium text-amber-800 dark:text-amber-300"},Gve={class:"flex justify-between"},jve={class:"font-medium text-amber-800 dark:text-amber-300"},Wve={class:"flex justify-between"},zve={class:"font-medium text-amber-800 dark:text-amber-300"},Qve=Je({__name:"CombatStatusCard",props:{bug:{}},setup(t){const e=t,s=Hr(),n=ir(),r=Qs(),{analyzeImage:o}=yw(),i=Y("#f3f4f6"),c=Y("#e5e7eb"),u=q(()=>!r.activeQuest||!e.bug?!1:r.activeQuest.goals&&r.activeQuest.goals.length>0?r.activeQuest.goals.some(S=>S.type===Ws.KILL_BUGS&&(!S.target||S.target===e.bug.id)):!1),d=q(()=>{if(!u.value||!r.activeQuest)return null;const S=r.activeQuest.goals.find(T=>T.type===Ws.KILL_BUGS&&(!T.target||T.target===e.bug.id));return S?{title:r.activeQuest.title,currentAmount:S.currentAmount,requiredAmount:S.requiredAmount,progress:S.currentAmount instanceof Se&&S.requiredAmount instanceof Se?`${be(S.currentAmount)}/${be(S.requiredAmount)}`:`${S.currentAmount}/${S.requiredAmount}`}:null}),m=q(()=>e.bug?e.bug.health.div(e.bug.maxHealth).mul(100).toNumber():0),f=q(()=>n.calculateDamage(n.playerDamage,e.bug.defense)),p=q(()=>n.calculateDamage(e.bug.damage,n.playerDefense)),g=q(()=>e.bug.health.div(f.value).ceil()),w=q(()=>n.playerMaxHealth.div(p.value).floor()),C=q(()=>{const S=s.bugs.findIndex(R=>R.id===e.bug.id),T=Se.fromNumber(10).mul(Se.pow(1.2,S));return S>50?T.mul(Se.fromNumber(50+(S-50)*.5)):T}),E=q(()=>{const S=s.bugs.findIndex(R=>R.id===e.bug.id),T=Se.fromNumber(5).mul(Se.pow(1.15,S));return S>50?T.mul(Se.fromNumber(50+(S-50)*.3)).floor():T.floor()}),k=(S,T)=>{try{if(S instanceof Se&&T instanceof Se)return Math.min(100,S.div(T).toNumber()*100);if(typeof S=="string"&&typeof T=="string"){const R=new Se(S),L=new Se(T);return Math.min(100,R.div(L).toNumber()*100)}else{const R=S instanceof Se?S:new Se(S),L=T instanceof Se?T:new Se(T);return Math.min(100,R.div(L).toNumber()*100)}}catch(R){return console.error("Error calculating progress percentage:",R),0}},A=q(()=>{try{return new URL(Object.assign({"../../assets/bugs/ant_legion_commander.png":Uk,"../../assets/bugs/ant_queen_guardian.png":qk,"../../assets/bugs/ant_scout_master.png":Bk,"../../assets/bugs/ant_tactician.png":Vk,"../../assets/bugs/ant_training_master.png":Hk,"../../assets/bugs/apocalyptic_termites.png":Gk,"../../assets/bugs/army_ant.png":jk,"../../assets/bugs/beetle.png":Wk,"../../assets/bugs/cockroach.png":zk,"../../assets/bugs/colossal_cockroach.png":Qk,"../../assets/bugs/endless_ant_swarms.png":Kk,"../../assets/bugs/fire_ant.png":Yk,"../../assets/bugs/galactic_moth.png":Xk,"../../assets/bugs/giant_firefly.png":Jk,"../../assets/bugs/giant_moth.png":Zk,"../../assets/bugs/giant_stag_beetle.png":ew,"../../assets/bugs/grasshopper.png":tw,"../../assets/bugs/housefly.png":sw,"../../assets/bugs/ladybug.png":nw,"../../assets/bugs/mosquito.png":rw,"../../assets/bugs/mutant_fly.png":ow,"../../assets/bugs/quantum_beetle.png":iw,"../../assets/bugs/queen_wasp.png":aw,"../../assets/bugs/radioactive_spider.png":lw,"../../assets/bugs/safe.png":cw,"../../assets/bugs/scorpion.png":uw,"../../assets/bugs/soldier.png":dw,"../../assets/bugs/stag_beetle_swarm.png":mw,"../../assets/bugs/swarm_lord.png":fw,"../../assets/bugs/tarantula.png":pw,"../../assets/bugs/termite.png":hw,"../../assets/bugs/ultra_beetle.png":gw,"../../assets/bugs/wasp.png":vw,"../../assets/bugs/worker.png":bw})[`../../assets/bugs/${e.bug.id}.png`],import.meta.url).href}catch{return null}});return Et(async()=>{if(A.value){const S=await o(A.value);i.value=S.backgroundColor,c.value=S.borderColor}}),dt(()=>e.bug.id,async S=>{if(A.value){const T=await o(A.value);i.value=T.backgroundColor,c.value=T.borderColor}}),(S,T)=>(h(),v("div",{class:K(["bg-gradient-to-br rounded-xl p-3 shadow-md border h-full transition-all duration-200",[u.value?"from-amber-100/80 to-amber-50/80 dark:from-amber-900/30 dark:to-amber-800/20 border-2 border-amber-400 dark:border-amber-600":"from-amber-100 to-amber-50 dark:from-amber-900/40 dark:to-amber-800/30 border-2 border-amber-300 dark:border-amber-700"]])},[a("div",cve,[a("div",uve,[a("div",{class:"absolute inset-0 rounded-full shadow-md border-2",style:yt({backgroundColor:i.value,borderColor:c.value})},null,4),a("div",dve,[A.value?(h(),v("img",{key:0,src:A.value,alt:S.bug.name,class:"w-full h-full object-contain p-1"},null,8,mve)):(h(),v("span",fve))])]),a("div",pve,[a("h2",hve,_(S.bug.name),1),a("div",gve,[u.value?(h(),v("span",vve,T[0]||(T[0]=[a("span",{class:"i-heroicons-clipboard-document-check mr-1"},null,-1),oe(" Quest Target ")]))):Q("",!0),a("span",bve,_(Math.round(m.value))+"% HP ",1)])])]),a("div",yve,[a("div",{class:"h-full bg-amber-500 dark:bg-amber-600 rounded-full transition-all duration-200",style:yt(`width: ${m.value}%`)},null,4)]),u.value&&d.value?(h(),v("div",_ve,[a("div",xve,[a("div",kve,[T[1]||(T[1]=a("span",{class:"i-heroicons-flag text-amber-600 dark:text-amber-400 mr-1"},null,-1)),a("span",wve,_(d.value.title),1)]),a("span",Eve,_(d.value.progress),1)]),d.value.currentAmount&&d.value.requiredAmount?(h(),v("div",Cve,[a("div",{class:"h-full bg-amber-500 dark:bg-amber-600 rounded-full",style:yt(`width: ${k(d.value.currentAmount,d.value.requiredAmount)}%`)},null,4)])):Q("",!0)])):Q("",!0),a("div",Sve,[a("div",Tve,[T[5]||(T[5]=a("h3",{class:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-1"},"Combat Stats",-1)),a("div",Ave,[T[2]||(T[2]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Health:",-1)),a("span",Ive,_(b(be)(S.bug.health))+" / "+_(b(be)(S.bug.maxHealth)),1)]),a("div",Pve,[T[3]||(T[3]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Damage:",-1)),a("span",Mve,_(b(be)(S.bug.damage)),1)]),a("div",$ve,[T[4]||(T[4]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Defense:",-1)),a("span",Rve,_(b(be)(S.bug.defense)),1)])]),a("div",Lve,[T[9]||(T[9]=a("h3",{class:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-1"},"Rewards",-1)),a("div",Dve,[T[6]||(T[6]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Food:",-1)),a("span",Nve,_(b(be)(C.value)),1)]),a("div",Ove,[T[7]||(T[7]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Essence:",-1)),a("span",Fve,_(b(be)(E.value)),1)]),a("div",Uve,[T[8]||(T[8]=a("span",{class:"text-amber-700 dark:text-amber-400"},"Time to Kill:",-1)),a("span",qve,_(b(be)(g.value))+" hits",1)])])]),a("div",Bve,[a("div",Vve,[T[10]||(T[10]=a("span",{class:"text-amber-700 dark:text-amber-400"},"You deal:",-1)),a("span",Hve,_(b(be)(f.value))+" per hit",1)]),a("div",Gve,[T[11]||(T[11]=a("span",{class:"text-amber-700 dark:text-amber-400"},"You take:",-1)),a("span",jve,_(b(be)(p.value))+" per hit",1)]),a("div",Wve,[T[12]||(T[12]=a("span",{class:"text-amber-700 dark:text-amber-400"},"You survive:",-1)),a("span",zve,_(b(be)(w.value))+" hits",1)])]),T[13]||(T[13]=a("div",{class:"text-center text-xs text-amber-700 dark:text-amber-400"}," To change enemies, select a different bug from the Adventure Map below. ",-1))],2))}}),Kve={class:"bg-gradient-to-br from-red-100 to-red-50 dark:from-red-900/40 dark:to-red-800/30 rounded-xl p-3 shadow-md h-full"},Yve={class:"flex flex-col items-center mb-4"},Xve={class:"relative w-24 h-24 mb-2"},Jve={class:"relative z-10 w-full h-full"},Zve=["src"],ebe={key:1,class:"i-heroicons-user-circle text-red-700 dark:text-red-500 text-4xl absolute inset-0 flex items-center justify-center"},tbe={class:"flex items-center gap-2"},sbe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700 mb-2"},nbe={class:"text-xs text-red-700 dark:text-red-400 font-medium flex justify-between"},rbe={class:"flex items-center gap-1"},obe={key:0,class:"text-2xs bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 px-1 py-0.5 rounded"},ibe={class:"h-2 bg-red-100 dark:bg-red-900/50 rounded-full mt-1 overflow-hidden"},abe={class:"text-xs text-red-600 dark:text-red-400 mt-1"},lbe={class:"grid grid-cols-3 gap-2 mb-2"},cbe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700"},ube={class:"flex flex-col"},dbe={class:"text-sm font-bold flex items-center"},mbe={key:0,class:"mt-0.5"},fbe={class:"text-2xs bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 px-1 py-0.5 rounded"},pbe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700"},hbe={class:"flex flex-col"},gbe={class:"text-sm font-bold flex items-center"},vbe={key:0,class:"mt-0.5"},bbe={class:"text-2xs bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 px-1 py-0.5 rounded"},ybe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700"},_be={class:"flex flex-col"},xbe={class:"text-sm font-bold flex items-center"},kbe={key:0,class:"mt-0.5"},wbe={class:"text-2xs bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 px-1 py-0.5 rounded"},Ebe={class:"flex flex-col gap-2"},Cbe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700 flex items-center"},Sbe={class:"flex items-center gap-2 text-xs text-red-700 dark:text-red-400 cursor-pointer"},Tbe={key:0,class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700 flex items-center"},Abe={class:"flex items-center gap-2 text-xs text-red-700 dark:text-red-400 cursor-pointer"},Ibe={key:1,class:"relative tooltip-container"},Pbe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-gray-300 dark:border-gray-700 flex items-center opacity-75"},Mbe={class:"ml-auto flex items-center"},$be={class:"mt-1 text-sm font-medium text-gray-500 dark:text-gray-400"},Rbe=Je({__name:"PlayerStatsCard",setup(t){const e=ir(),s=Qs(),n=St(),{analyzeImage:r}=yw(),o=Y("#f3f4f6"),i=Y("#e5e7eb"),c=Y(!1),u=()=>{c.value=!c.value},d=P=>{P.target.closest(".tooltip-container")||(c.value=!1)};Et(async()=>{if(document.addEventListener("click",d),E.value){const P=await r(E.value);o.value=P.backgroundColor,i.value=P.borderColor}}),ar(()=>{document.removeEventListener("click",d)});const m=q(()=>be(e.currentHealth)),f=q(()=>be(e.playerMaxHealth)),p=q(()=>be(e.playerDamage)),g=q(()=>be(e.playerRegen)),w=q(()=>be(e.playerDefense)),C=q(()=>e.playerMaxHealth.eq(0)?0:e.currentHealth.div(e.playerMaxHealth).mul(100).toNumber()),E=q(()=>{try{return new URL("/assets/player-CETUAJX7.png",import.meta.url).href}catch{return null}});q(()=>s.activeQuest?s.activeQuest.goals.some(P=>P.type==="kill_bugs"):!1);const k=q(()=>{const P=n.getUpgrade("unlockAutoQuestAdvance");return P?be(P.cost):"250"}),A=q(()=>{const P=e.getStatMultiplier("damage");return L(P)}),S=q(()=>{const P=e.getStatMultiplier("health");return L(P)}),T=q(()=>{const P=e.getStatMultiplier("defense");return L(P)}),R=q(()=>{const P=e.getStatMultiplier("regen");return L(P)});function L(P){if(!P||P.eq(1))return null;const I=P.minus(1);return`+${Lt(I)}`}return(P,I)=>(h(),v("section",Kve,[a("div",Yve,[a("div",Xve,[a("div",{class:"absolute inset-0 rounded-full shadow-md border-2",style:yt({backgroundColor:o.value,borderColor:i.value})},null,4),a("div",Jve,[E.value?(h(),v("img",{key:0,src:E.value,alt:"Player",class:"w-full h-full object-contain p-1"},null,8,Zve)):(h(),v("span",ebe))])]),a("div",tbe,[I[2]||(I[2]=a("h2",{class:"text-base font-bold text-red-800 dark:text-red-200"},"Player Stats",-1)),a("span",{class:K(["text-xs px-2 py-0.5 rounded-full",b(e).isDead?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300"])},_(b(e).isDead?"Dead":"Alive"),3)])]),a("div",sbe,[a("div",nbe,[a("span",rbe,[I[3]||(I[3]=oe(" Health ")),S.value?(h(),v("span",obe,_(S.value),1)):Q("",!0)]),a("span",null,_(Math.round(C.value))+"%",1)]),a("div",ibe,[a("div",{class:"h-full bg-gradient-to-r from-red-600 to-red-500 dark:from-red-500 dark:to-red-400 transition-all duration-300 ease-out",style:yt({width:`${C.value}%`})},null,4)]),a("div",abe,_(m.value)+" / "+_(f.value),1)]),a("div",lbe,[a("div",cbe,[I[5]||(I[5]=a("div",{class:"text-xs text-red-700 dark:text-red-400 font-medium"},"Attack",-1)),a("div",ube,[a("div",dbe,[I[4]||(I[4]=a("span",{class:"i-heroicons-bolt text-red-600 dark:text-red-500 mr-1 text-xs"},null,-1)),oe(" "+_(p.value),1)]),A.value?(h(),v("div",mbe,[a("span",fbe,_(A.value),1)])):Q("",!0)])]),a("div",pbe,[I[7]||(I[7]=a("div",{class:"text-xs text-red-700 dark:text-red-400 font-medium"},"Defense",-1)),a("div",hbe,[a("div",gbe,[I[6]||(I[6]=a("span",{class:"i-heroicons-shield-check text-red-600 dark:text-red-500 mr-1 text-xs"},null,-1)),oe(" "+_(w.value),1)]),T.value?(h(),v("div",vbe,[a("span",bbe,_(T.value),1)])):Q("",!0)])]),a("div",ybe,[I[9]||(I[9]=a("div",{class:"text-xs text-red-700 dark:text-red-400 font-medium"},"Regen",-1)),a("div",_be,[a("div",xbe,[I[8]||(I[8]=a("span",{class:"i-heroicons-arrow-path text-red-600 dark:text-red-500 mr-1 text-xs"},null,-1)),oe(" "+_(g.value),1)]),R.value?(h(),v("div",kbe,[a("span",wbe,_(R.value),1)])):Q("",!0)])])]),a("div",Ebe,[a("div",Cbe,[a("label",Sbe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":I[0]||(I[0]=D=>b(e).autoAdvance=D),class:"rounded border-red-300 text-red-600 focus:ring-red-500 dark:border-red-700 dark:bg-red-900/30"},null,512),[[ln,b(e).autoAdvance]]),I[10]||(I[10]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-rocket-launch text-red-600 dark:text-red-400 mr-1.5"}),a("span",{class:"font-medium"},"Auto Advance (One Hit Kills)")],-1))]),I[11]||(I[11]=a("div",{class:"ml-auto text-xs text-red-600 dark:text-red-400 opacity-80"},[a("span",{class:"i-heroicons-arrow-right-circle"})],-1))]),b(e).isAutoQuestAdvanceUnlocked?(h(),v("div",Tbe,[a("label",Abe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":I[1]||(I[1]=D=>b(e).autoQuestAdvance=D),class:"rounded border-red-300 text-red-600 focus:ring-red-500 dark:border-red-700 dark:bg-red-900/30"},null,512),[[ln,b(e).autoQuestAdvance]]),I[12]||(I[12]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-clipboard-document-check text-red-600 dark:text-red-400 mr-1.5"}),a("span",{class:"font-medium"},"Auto Quest Advance")],-1))]),I[13]||(I[13]=a("div",{class:"ml-auto text-xs text-red-600 dark:text-red-400 opacity-80"},[a("span",{class:"i-heroicons-document-magnifying-glass"})],-1))])):b(e).isAutoQuestAdvanceUnlocked?Q("",!0):(h(),v("div",Ibe,[a("div",Pbe,[I[16]||(I[16]=a("div",{class:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"},[a("span",{class:"i-heroicons-lock-closed text-gray-500 dark:text-gray-400 mr-1.5"}),a("span",{class:"font-medium"},"Auto Quest Advance")],-1)),a("div",Mbe,[I[15]||(I[15]=a("span",{class:"text-xs text-gray-400 dark:text-gray-500 opacity-80 mr-1"},[a("span",{class:"i-heroicons-document-magnifying-glass"})],-1)),a("button",{onClick:xt(u,["stop"]),class:"p-1.5 text-gray-400 dark:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full focus:outline-none","aria-label":"Feature info"},I[14]||(I[14]=[a("span",{class:"i-heroicons-information-circle text-xs"},null,-1)]))])]),a("div",{class:K(["absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-red-200 dark:border-red-700 z-10 text-xs transition-opacity duration-200",c.value?"block opacity-100":"hidden sm:group-hover:block opacity-0 sm:group-hover:opacity-100"])},[I[17]||(I[17]=a("p",{class:"font-medium text-red-700 dark:text-red-400 mb-1"},"Feature Locked",-1)),I[18]||(I[18]=a("p",{class:"text-gray-600 dark:text-gray-300"},[oe(" Purchase the "),a("span",{class:"font-medium"},"Quest Hunter Automation"),oe(" evolution upgrade to unlock auto targeting for quest bugs. ")],-1)),a("p",$be," Cost: "+_(k.value)+" Evolution Points ",1)],2)]))])]))}}),Lbe=Ct(Rbe,[["__scopeId","data-v-e073f0ce"]]),Dbe={class:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 shadow-md"},Nbe={class:"flex items-center justify-between mb-2"},Obe={key:0,class:"bg-white/80 dark:bg-gray-900/80 p-2 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 h-36 sm:h-48 overflow-y-auto"},Fbe={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},Ube={key:1,class:"space-y-1"},qbe={class:"text-gray-500 dark:text-gray-400 mr-1"},Bbe={key:1,class:"mt-2 text-xs text-gray-600 dark:text-gray-400 flex items-center bg-gray-50 dark:bg-gray-800 p-2 rounded-lg border border-gray-200 dark:border-gray-600"},Vbe=Je({__name:"CombatLogCard",setup(t){const e=ir(),s=Y(!0),n=()=>{s.value=!s.value},r=q(()=>[...e.logs].slice(-10).reverse()),o=i=>i.toLowerCase().includes("collectible");return(i,c)=>(h(),v("section",Dbe,[a("div",Nbe,[c[0]||(c[0]=a("h2",{class:"text-base font-bold flex items-center"},[a("span",{class:"i-heroicons-document-text text-gray-700 dark:text-gray-300 mr-2"}),oe(" Combat Log ")],-1)),a("button",{onClick:n,class:"md:hidden text-gray-600 dark:text-gray-400 p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700"},[a("span",{class:K(s.value?"i-heroicons-chevron-up":"i-heroicons-chevron-down")},null,2)])]),s.value?(h(),v("div",Obe,[b(e).logs.length===0?(h(),v("div",Fbe,c[1]||(c[1]=[a("p",{class:"mb-1"}," Adventure mode initialized",-1),a("p",{class:"mb-1"}," Select an enemy to begin combat",-1),a("p",{class:"mb-1"}," Combat is turn-based: you attack, then the enemy attacks",-1)]))):(h(),v("div",Ube,[(h(!0),v(De,null,Ge(r.value,u=>(h(),v("div",{key:u.timestamp+u.message,class:"text-xs"},[a("span",qbe,_(new Date(u.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})),1),a("span",{class:K({"text-gray-600 dark:text-gray-300":u.type==="info","text-red-600 dark:text-red-400":u.type==="combat","text-green-600 dark:text-green-400":u.type==="reward"&&!o(u.message),"text-purple-600 dark:text-purple-400":o(u.message)})},_(u.message),3)]))),128))]))])):Q("",!0),s.value?(h(),v("div",Bbe,c[2]||(c[2]=[a("span",{class:"i-heroicons-information-circle text-gray-600 dark:text-gray-400 mr-1 inline-block flex-shrink-0"},null,-1),a("span",null,"Combat is turn-based. Your damage scales with your ant count!",-1)]))):Q("",!0)]))}}),Hbe={class:"flex items-center justify-between gap-1 mb-1.5"},Gbe={class:"flex items-center"},jbe={class:"relative w-8 h-8 mr-2"},Wbe=["src","alt"],zbe={key:1,class:"i-heroicons-bug-ant text-blue-600 dark:text-blue-400 text-xl"},Qbe={key:2,class:"absolute -bottom-1 -right-1 bg-purple-100 dark:bg-purple-900/70 rounded-full p-0.5 border border-purple-300 dark:border-purple-600 shadow-sm"},Kbe=["src","alt"],Ybe={class:"font-medium text-blue-700 dark:text-blue-300 text-sm"},Xbe={class:"text-xs text-gray-600 dark:text-gray-400 flex items-center"},Jbe={key:0,class:"ml-1 text-xs bg-green-100 dark:bg-green-900/50 px-1 py-0 rounded-full text-green-700 dark:text-green-400"},Zbe={key:1,class:"ml-1 text-xs bg-amber-100 dark:bg-amber-900/50 px-1.5 py-0.5 rounded-full text-amber-700 dark:text-amber-400 font-medium flex items-center"},eye={key:2,class:"ml-1 text-xs bg-purple-100 dark:bg-purple-900/50 px-1.5 py-0.5 rounded-full text-purple-700 dark:text-purple-400 font-medium flex items-center"},tye={key:0,class:"mb-1.5 bg-purple-50/80 dark:bg-purple-900/30 rounded-md p-1.5 text-xs"},sye={class:"flex items-center justify-between"},nye={class:"flex items-center"},rye=["src","alt"],oye={class:"font-medium text-purple-800 dark:text-purple-300"},iye={class:"flex flex-col items-end"},aye={class:"text-purple-700 dark:text-purple-400"},lye={class:"text-purple-800 dark:text-purple-300 font-medium"},cye={key:1,class:"mb-1.5 bg-amber-100 dark:bg-amber-900/30 rounded-md p-1.5 text-xs"},uye={class:"flex items-center justify-between"},dye={class:"flex items-center"},mye={class:"font-medium text-amber-800 dark:text-amber-300"},fye={class:"text-amber-700 dark:text-amber-400"},pye={key:2,class:"grid grid-cols-4 gap-1 text-xs"},hye={class:"col-span-2 flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},gye={class:"font-medium text-blue-700 dark:text-blue-300"},vye={class:"col-span-2 flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},bye={class:"font-medium text-blue-700 dark:text-blue-300"},yye={class:"col-span-2 flex justify-between bg-amber-50/50 dark:bg-amber-900/30 px-2 py-1 rounded"},_ye={class:"font-medium text-amber-700 dark:text-amber-300"},xye={class:"col-span-2 flex justify-between bg-amber-50/50 dark:bg-amber-900/30 px-2 py-1 rounded"},kye={class:"font-medium text-amber-700 dark:text-amber-300"},wye={key:3},Eye={class:"grid grid-cols-2 gap-1.5 text-xs"},Cye={class:"flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},Sye={class:"font-medium text-blue-700 dark:text-blue-300"},Tye={class:"flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},Aye={class:"font-medium text-blue-700 dark:text-blue-300"},Iye={class:"flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},Pye={class:"font-medium text-blue-700 dark:text-blue-300"},Mye={class:"flex justify-between bg-blue-50/50 dark:bg-blue-900/30 px-2 py-1 rounded"},$ye={class:"font-medium text-blue-700 dark:text-blue-300"},Rye={class:"mt-1.5 grid grid-cols-2 gap-1.5 text-xs"},Lye={class:"flex justify-between bg-amber-50/50 dark:bg-amber-900/30 px-2 py-1 rounded"},Dye={class:"font-medium text-amber-700 dark:text-amber-300"},Nye={class:"flex justify-between bg-amber-50/50 dark:bg-amber-900/30 px-2 py-1 rounded"},Oye={class:"font-medium text-amber-700 dark:text-amber-300"},Fye={key:0},Uye={key:1},qye={key:2},Bye={key:3},Vye={class:"text-blue-700 dark:text-blue-300 font-medium"},Hye=Je({__name:"BugCard",props:{bug:{}},emits:["showDropTable"],setup(t,{emit:e}){const s=t,n=e,r=ir(),o=Hr(),i=Qs(),c=kn(),u=St(),d=M=>{const x=o.bugs.findIndex(J=>J.id===M.id),$=Se.fromNumber(10).mul(Se.pow(1.2,x)),Z=x>50?$.mul(Se.fromNumber(50+(x-50)*.5)):$,me=Se.fromNumber(5).mul(Se.pow(1.15,x)),re=x>50?me.mul(Se.fromNumber(50+(x-50)*.3)):me;return{food:Z,essence:re.floor()}},m=q(()=>r.selectedBugId===s.bug.id&&r.isInCombat),f=()=>{n("showDropTable",s.bug)},p=()=>{r.toggleAutoCombat(s.bug.id)},g=q(()=>be(s.bug.maxHealth.div(r.calculateDamage(r.playerDamage,s.bug.defense))));q(()=>be(r.calculateDamage(s.bug.damage,r.playerDefense))),q(()=>be(r.playerMaxHealth.div(r.calculateDamage(s.bug.damage,r.playerDefense))));const w=q(()=>r.gridDensity==="compact"),C=q(()=>{if(r.canOneHitBug(s.bug.id))return"oneHit";const M=s.bug.maxHealth.div(r.calculateDamage(r.playerDamage,s.bug.defense)),x=r.playerMaxHealth.div(r.calculateDamage(s.bug.damage,r.playerDefense));return x.gt(M.mul(1.2))?"safe":x.gt(M)?"risky":"dangerous"}),E=q(()=>{const M=d(s.bug).essence;return M.gte(1e3)?`${be(M.div(1e3))}K`:be(M)}),k=q(()=>!i.activeQuest||!s.bug?!1:i.activeQuest.goals&&i.activeQuest.goals.length>0?i.activeQuest.goals.some(M=>M.type===Ws.KILL_BUGS&&(!M.target||M.target===s.bug.id)):!1),A=q(()=>{if(!k.value||!i.activeQuest)return null;const M=i.activeQuest.goals.find(x=>x.type===Ws.KILL_BUGS&&(!x.target||x.target===s.bug.id));return M?{title:i.activeQuest.title,progress:`${M.currentAmount instanceof Se?M.currentAmount.toString():M.currentAmount}/${M.requiredAmount instanceof Se?M.requiredAmount.toString():M.requiredAmount}`}:null}),S=q(()=>{try{return new URL(Object.assign({"../../assets/bugs/ant_legion_commander.png":Uk,"../../assets/bugs/ant_queen_guardian.png":qk,"../../assets/bugs/ant_scout_master.png":Bk,"../../assets/bugs/ant_tactician.png":Vk,"../../assets/bugs/ant_training_master.png":Hk,"../../assets/bugs/apocalyptic_termites.png":Gk,"../../assets/bugs/army_ant.png":jk,"../../assets/bugs/beetle.png":Wk,"../../assets/bugs/cockroach.png":zk,"../../assets/bugs/colossal_cockroach.png":Qk,"../../assets/bugs/endless_ant_swarms.png":Kk,"../../assets/bugs/fire_ant.png":Yk,"../../assets/bugs/galactic_moth.png":Xk,"../../assets/bugs/giant_firefly.png":Jk,"../../assets/bugs/giant_moth.png":Zk,"../../assets/bugs/giant_stag_beetle.png":ew,"../../assets/bugs/grasshopper.png":tw,"../../assets/bugs/housefly.png":sw,"../../assets/bugs/ladybug.png":nw,"../../assets/bugs/mosquito.png":rw,"../../assets/bugs/mutant_fly.png":ow,"../../assets/bugs/quantum_beetle.png":iw,"../../assets/bugs/queen_wasp.png":aw,"../../assets/bugs/radioactive_spider.png":lw,"../../assets/bugs/safe.png":cw,"../../assets/bugs/scorpion.png":uw,"../../assets/bugs/soldier.png":dw,"../../assets/bugs/stag_beetle_swarm.png":mw,"../../assets/bugs/swarm_lord.png":fw,"../../assets/bugs/tarantula.png":pw,"../../assets/bugs/termite.png":hw,"../../assets/bugs/ultra_beetle.png":gw,"../../assets/bugs/wasp.png":vw,"../../assets/bugs/worker.png":bw})[`../../assets/bugs/${s.bug.id}.png`],import.meta.url).href}catch{return null}}),T=q(()=>c.getBugKillCount(s.bug.id)),R={safe:{upgradeId:"safeKillWorkerSynergy",generatorId:"worker"},worker:{upgradeId:"workerKillNurserySynergy",generatorId:"nursery"},soldier:{upgradeId:"soldierKillQueenChamberSynergy",generatorId:"queenChamber"},beetle:{upgradeId:"beetleKillColonySynergy",generatorId:"colony"},scorpion:{upgradeId:"scorpionKillMegacolonySynergy",generatorId:"megacolony"},tarantula:{upgradeId:"tarantulaKillHivemindSynergy",generatorId:"hivemind"},ultra_beetle:{upgradeId:"ultraBeetleKillAntopolisSynergy",generatorId:"antopolis"},queen_wasp:{upgradeId:"queenWaspKillAlateHatcherySynergy",generatorId:"alateHatchery"}},L=q(()=>{const M=R[s.bug.id];return M?u.getUpgradeCount(M.upgradeId).gt(0):!1}),P=q(()=>{const M=R[s.bug.id];return(M==null?void 0:M.generatorId)||null}),I=M=>{if(!M)return"";try{return new URL(Object.assign({"../../assets/generators/alateHatchery.png":Mk,"../../assets/generators/antopolis.png":$k,"../../assets/generators/colony.png":Rk,"../../assets/generators/hivemind.png":Lk,"../../assets/generators/megacolony.png":Dk,"../../assets/generators/nursery.png":Nk,"../../assets/generators/queenChamber.png":Ok,"../../assets/generators/worker.png":Fk})[`../../assets/generators/${M}.png`],import.meta.url).href}catch{return""}},D=q(()=>{const M=R[s.bug.id];if(!M)return null;const x=u.getUpgradeCount(M.upgradeId);if(x.eq(0))return null;let $=0;switch(M.generatorId){case"worker":$=.1;break;case"nursery":$=.2;break;case"queenChamber":$=.4;break;case"colony":$=.8;break;case"megacolony":$=1.6;break;case"hivemind":$=3.2;break;case"antopolis":$=6.4;break;case"alateHatchery":$=12;break;default:$=0}return`${($*x.toNumber()).toFixed(1)}%`}),U=q(()=>{const M=R[s.bug.id];if(!M)return null;const x=u.getUpgradeCount(M.upgradeId);if(x.eq(0))return null;const $=T.value,Z=Math.floor($/1e3);let me=0;switch(M.generatorId){case"worker":me=.1;break;case"nursery":me=.2;break;case"queenChamber":me=.4;break;case"colony":me=.8;break;case"megacolony":me=1.6;break;case"hivemind":me=3.2;break;case"antopolis":me=6.4;break;case"alateHatchery":me=12;break;default:me=0}return(1+x.toNumber()*me*Z/100).toFixed(2)+"x"});return(M,x)=>(h(),v("div",{class:K(["bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border h-full transition-all duration-200",[k.value?"border-2 border-amber-400 dark:border-amber-600 shadow-md":L.value?"border-2 border-purple-300 dark:border-purple-700 shadow-md":"border border-blue-200 dark:border-blue-700",k.value?"bg-amber-50/80 dark:bg-amber-900/20":L.value?"bg-purple-50/80 dark:bg-purple-900/20":"bg-white/80 dark:bg-gray-800/80"]])},[a("div",Hbe,[a("div",Gbe,[a("div",jbe,[S.value?(h(),v("img",{key:0,src:S.value,alt:M.bug.name,class:"w-full h-full object-contain"},null,8,Wbe)):(h(),v("span",zbe)),L.value&&P.value?(h(),v("div",Qbe,[a("img",{src:I(P.value),alt:P.value,class:"w-3.5 h-3.5 object-contain",onError:x[0]||(x[0]=$=>$.target.style.display="none")},null,40,Kbe)])):Q("",!0)]),a("div",null,[a("span",Ybe,_(M.bug.name),1),a("div",Xbe,[x[2]||(x[2]=a("span",{class:"i-heroicons-trophy mr-0.5"},null,-1)),a("span",null,"Kills: "+_(T.value.toLocaleString()),1)])]),m.value?(h(),v("span",Jbe," Active ")):Q("",!0),k.value?(h(),v("span",Zbe,x[3]||(x[3]=[a("span",{class:"i-heroicons-clipboard-document-check mr-0.5 inline-block"},null,-1),oe(" Quest ")]))):Q("",!0),L.value&&D.value?(h(),v("span",eye,[x[4]||(x[4]=a("span",{class:"i-heroicons-sparkles mr-0.5 inline-block"},null,-1)),oe(" +"+_(D.value),1)])):Q("",!0)]),a("div",{class:"flex items-center space-x-1"},[a("button",{onClick:f,class:"p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-800/50 transition-colors"},x[5]||(x[5]=[a("span",{class:"i-heroicons-information-circle text-blue-600 dark:text-blue-400 text-sm"},null,-1)])),a("button",{onClick:p,class:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 px-2 py-1 rounded-lg text-white text-xs font-medium transition-colors duration-200"}," Fight ")])]),L.value&&P.value?(h(),v("div",tye,[a("div",sye,[a("div",nye,[a("img",{src:I(P.value),alt:P.value,class:"w-4 h-4 object-contain mr-1.5",onError:x[1]||(x[1]=$=>$.target.style.display="none")},null,40,rye),a("span",oye,_(P.value.charAt(0).toUpperCase()+P.value.slice(1))+" Synergy ",1)]),a("div",iye,[a("span",aye," +"+_(D.value)+"/1K kills ",1),a("span",lye,_(U.value)+" multiplier ",1)])])])):Q("",!0),k.value&&A.value?(h(),v("div",cye,[a("div",uye,[a("div",dye,[x[6]||(x[6]=a("span",{class:"i-heroicons-flag text-amber-600 dark:text-amber-400 mr-1"},null,-1)),a("span",mye,_(A.value.title),1)]),a("span",fye,_(A.value.progress),1)])])):Q("",!0),w.value?(h(),v("div",pye,[a("div",hye,[x[7]||(x[7]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-heart mr-1"}),oe(" HP: ")],-1)),a("span",gye,_(b(be)(M.bug.maxHealth)),1)]),a("div",vye,[x[8]||(x[8]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-bolt mr-1"}),oe(" DMG: ")],-1)),a("span",bye,_(b(be)(M.bug.damage)),1)]),a("div",yye,[x[9]||(x[9]=a("span",{class:"text-amber-600 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-clock mr-1"}),oe(" TTK: ")],-1)),a("span",_ye,_(g.value),1)]),a("div",xye,[x[10]||(x[10]=a("span",{class:"text-amber-600 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-trophy mr-1"}),oe(" Kills: ")],-1)),a("span",kye,_(T.value.toLocaleString()),1)])])):(h(),v("div",wye,[a("div",Eye,[a("div",Cye,[x[11]||(x[11]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-heart mr-1"}),oe(" HP: ")],-1)),a("span",Sye,_(b(be)(M.bug.maxHealth)),1)]),a("div",Tye,[x[12]||(x[12]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-bolt mr-1"}),oe(" DMG: ")],-1)),a("span",Aye,_(b(be)(M.bug.damage)),1)]),a("div",Iye,[x[13]||(x[13]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-shield-check mr-1"}),oe(" DEF: ")],-1)),a("span",Pye,_(b(be)(M.bug.defense)),1)]),a("div",Mye,[x[14]||(x[14]=a("span",{class:"text-blue-500 dark:text-blue-400 flex items-center"},[a("span",{class:"i-heroicons-trophy mr-1"}),oe(" Kills: ")],-1)),a("span",$ye,_(T.value.toLocaleString()),1)])]),a("div",Rye,[a("div",Lye,[x[15]||(x[15]=a("span",{class:"text-amber-600 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-cake mr-1"}),oe(" Food: ")],-1)),a("span",Dye,_(b(be)(d(M.bug).food)),1)]),a("div",Nye,[x[16]||(x[16]=a("span",{class:"text-amber-600 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-flask mr-1"}),oe(" Essence: ")],-1)),a("span",Oye,_(E.value),1)])])])),w.value?Q("",!0):(h(),v("div",{key:4,class:K(["flex justify-between mt-1.5 text-xs",{"mt-1":k.value&&A.value}])},[a("div",{class:K(["flex items-center",{"text-green-600 dark:text-green-400":C.value==="oneHit"||C.value==="safe","text-yellow-600 dark:text-yellow-400":C.value==="risky","text-red-600 dark:text-red-400":C.value==="dangerous"}])},[a("span",{class:K([{"i-heroicons-bolt":C.value==="oneHit","i-heroicons-check-circle":C.value==="safe","i-heroicons-exclamation-triangle":C.value==="risky","i-heroicons-x-circle":C.value==="dangerous"},"mr-1"])},null,2),C.value==="oneHit"?(h(),v("span",Fye,"One Hit Kill")):C.value==="safe"?(h(),v("span",Uye,"Safe to Fight")):C.value==="risky"?(h(),v("span",qye,"Risky")):(h(),v("span",Bye,"Too Strong"))],2),a("div",null,[a("span",Vye,_(g.value),1),x[17]||(x[17]=a("span",{class:"text-blue-500 dark:text-blue-400"}," hits",-1))])],2))],2))}}),Gye={class:"bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-900/40 dark:to-blue-800/30 rounded-xl p-3 shadow-md relative"},jye={class:"sticky top-[-20px] z-10 bg-gradient-to-br from-blue-100 to-blue-50 dark:from-blue-900/40 dark:to-blue-800/30 -mx-3 -mt-3 px-3 pt-3 pb-2"},Wye={class:"flex flex-col gap-2"},zye={class:"flex items-center justify-between"},Qye={class:"flex items-center gap-2"},Kye={class:"text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded-full"},Yye={class:"flex flex-wrap items-center gap-2 text-xs bg-blue-50/50 dark:bg-blue-900/30 p-1.5 rounded-lg"},Xye={class:"flex items-center gap-2 sm:gap-3"},Jye={class:"flex items-center gap-1"},Zye={class:"flex items-center gap-1 ml-auto mr-2"},e_e={class:"flex bg-blue-100/50 dark:bg-blue-800/30 rounded-lg p-0.5"},t_e={class:"mt-2 rounded-lg"},s_e=Je({__name:"AdventureMapSection",emits:["showDropTable"],setup(t,{emit:e}){const s=ir(),n=Hr(),r=e,o=m=>{s.gridDensity=m},i=q(()=>{let m=n.bugs;return s.showOneHitOnly&&(m=m.filter(f=>s.canOneHitBug(f.id))),m}),c=q(()=>s.gridDensity==="compact"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),u=m=>{r("showDropTable",m)},d=m=>{if(s.selectedBugId===m.id&&s.isInCombat)return"selected";if(s.canOneHitBug(m.id))return"oneHit";const f=m.maxHealth.div(s.calculateDamage(s.playerDamage,m.defense)),p=s.playerMaxHealth.div(s.calculateDamage(m.damage,s.playerDefense));return p.gt(f.mul(1.2))?"safe":p.gt(f)?"risky":"dangerous"};return(m,f)=>(h(),v("section",Gye,[a("div",jye,[a("div",Wye,[a("div",zye,[f[3]||(f[3]=a("h2",{class:"text-base font-bold flex items-center"},[a("span",{class:"i-heroicons-map text-blue-700 dark:text-blue-500 mr-2"}),oe(" Adventure Map ")],-1)),a("div",Qye,[a("span",Kye,_(i.value.length)+" Bugs ",1)])]),a("div",Yye,[a("div",Xye,[a("label",Jye,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":f[0]||(f[0]=p=>b(s).showOneHitOnly=p),class:"rounded border-blue-300 text-blue-600 focus:ring-blue-500 dark:border-blue-700 dark:bg-blue-900/30 h-3 w-3"},null,512),[[ln,b(s).showOneHitOnly]]),f[4]||(f[4]=a("span",{class:"whitespace-nowrap text-blue-700 dark:text-blue-400"},"One Hit Only",-1))])]),a("div",Zye,[f[7]||(f[7]=a("span",{class:"text-blue-700 dark:text-blue-400 whitespace-nowrap"},"Density:",-1)),a("div",e_e,[a("button",{onClick:f[1]||(f[1]=p=>o("compact")),class:K(["px-1.5 py-0.5 text-xs rounded-md transition-colors",b(s).gridDensity==="compact"?"bg-white dark:bg-blue-700/50 text-blue-700 dark:text-blue-300 shadow-sm":"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300"])},f[5]||(f[5]=[a("div",{class:"i-heroicons-table-cells-solid w-3 h-3"},null,-1)]),2),a("button",{onClick:f[2]||(f[2]=p=>o("comfortable")),class:K(["px-1.5 py-0.5 text-xs rounded-md transition-colors",b(s).gridDensity==="comfortable"?"bg-white dark:bg-blue-700/50 text-blue-700 dark:text-blue-300 shadow-sm":"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300"])},f[6]||(f[6]=[a("div",{class:"i-heroicons-squares-2x2-solid w-3 h-3"},null,-1)]),2)])]),f[8]||(f[8]=js('<div class="flex items-center space-x-2 text-xs"><span class="inline-block h-2 w-2 rounded-full bg-green-400 dark:bg-green-500"></span><span class="text-blue-700 dark:text-blue-400 mr-2">Safe</span><span class="inline-block h-2 w-2 rounded-full bg-yellow-400 dark:bg-yellow-500"></span><span class="text-blue-700 dark:text-blue-400 mr-2">Risky</span><span class="inline-block h-2 w-2 rounded-full bg-red-400 dark:bg-red-500"></span><span class="text-blue-700 dark:text-blue-400">Dangerous</span></div>',1))])])]),a("div",t_e,[a("div",{class:K(["grid gap-2",c.value])},[(h(!0),v(De,null,Ge(i.value,p=>(h(),v("div",{key:p.id,class:K({"border-green-400 dark:border-green-500 border-2":d(p)==="selected","border-l-4 border-l-green-400 dark:border-l-green-500":d(p)==="oneHit"&&d(p)!=="selected","border-l-4 border-l-green-300 dark:border-l-green-400":d(p)==="safe"&&d(p)!=="selected"&&d(p)!=="oneHit","border-l-4 border-l-yellow-400 dark:border-l-yellow-500":d(p)==="risky"&&d(p)!=="selected","border-l-4 border-l-red-400 dark:border-l-red-500":d(p)==="dangerous"&&d(p)!=="selected"})},[Ye(Hye,{bug:p,onShowDropTable:u},null,8,["bug"])],2))),128))],2)])]))}}),n_e={class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm"},r_e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-4 sm:p-5 mx-auto border border-blue-200 dark:border-blue-700 max-h-[90vh] overflow-y-auto"},o_e={class:"flex items-center justify-between pb-2 border-b border-blue-200 dark:border-blue-700"},i_e={class:"text-base font-bold flex items-center text-blue-800 dark:text-blue-300"},a_e={class:"space-y-3 mt-3"},l_e={class:"text-sm text-gray-700 dark:text-gray-300"},c_e={class:"space-y-2"},u_e={class:"flex items-center space-x-2"},d_e={class:"text-xs text-gray-500"},m_e={class:"text-sm text-gray-600 dark:text-gray-400"},f_e=Je({__name:"DropTableModal",props:{bug:{}},emits:["close"],setup(t,{emit:e}){const s=e,n=Ts(),r=()=>{s("close")};return(o,i)=>(h(),v("div",n_e,[a("div",r_e,[a("div",o_e,[a("h3",i_e,[i[0]||(i[0]=a("span",{class:"i-heroicons-bug-ant text-blue-600 dark:text-blue-400 mr-2"},null,-1)),oe(" "+_(o.bug.name)+" Drop Table ",1)]),a("button",{onClick:r,class:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},i[1]||(i[1]=[a("span",{class:"i-heroicons-x-mark text-gray-600 dark:text-gray-400 text-lg"},null,-1)]))]),a("div",a_e,[a("div",l_e,_(o.bug.description),1),a("div",c_e,[(h(!0),v(De,null,Ge(o.bug.drops,c=>{var u,d;return h(),v("div",{key:c.itemId,class:"flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-700/50"},[a("div",u_e,[a("span",{class:K(["text-sm font-medium",b(n).getRarityColor(((u=b(n).getItem(c.itemId))==null?void 0:u.rarity)||"common")])},_((d=b(n).getItem(c.itemId))==null?void 0:d.name),3),a("span",d_e,_((c.chance*100).toFixed(1))+"% ",1)]),a("div",m_e,_(c.minQuantity)+"-"+_(c.maxQuantity)+"x ",1)])}),128))])]),a("div",{class:"flex justify-end mt-4"},[a("button",{onClick:r,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 rounded-lg text-white text-sm font-medium transition-colors"}," Close ")])])]))}}),p_e={class:"space-y-4 px-2 sm:px-0 pb-14"},h_e={key:0,class:"space-y-3"},g_e={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},v_e={key:1,class:"bg-gradient-to-br from-amber-100/50 to-amber-50/50 dark:from-amber-900/20 dark:to-amber-800/10 rounded-xl p-3 shadow-md border border-amber-200/50 dark:border-amber-700/50 flex items-center justify-center"},b_e={key:1},y_e={key:2},__e={key:3},x_e=Je({__name:"AdventurePage",setup(t){Ks();const e=ir(),s=Hr();Qs();const n=St(),r=Wt(),o=W1();Tu();const i=q(()=>r.isUnlocked),c=q(()=>n.getUpgradeCount("unlockQuests").gt(0));dt(()=>o.query.tab,p=>{p?(p==="megaAnt"&&i.value||p==="quests"&&c.value||p==="shop")&&(e.activeTab=p.toString()):e.activeTab="combat"},{immediate:!0}),dt(i,p=>{!p&&e.activeTab==="megaAnt"&&(e.activeTab="combat")});const u=Y(!1),d=Y(null),m=p=>{d.value=p,u.value=!0},f=()=>{u.value=!1};return(p,g)=>(h(),v("div",p_e,[g[1]||(g[1]=a("h1",{class:"text-xl font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-shield-exclamation text-red-700 dark:text-red-500 mr-2"}),oe(" Adventure ")],-1)),b(e).activeTab==="combat"?(h(),v("div",h_e,[Ye(lve),a("div",g_e,[Ye(Lbe),b(e).isInCombat&&b(s).selectedBug?(h(),Tt(Qve,{key:0,bug:b(s).selectedBug},null,8,["bug"])):(h(),v("div",v_e,g[0]||(g[0]=[a("div",{class:"text-center text-amber-600 dark:text-amber-400"},[a("span",{class:"i-heroicons-bug-ant text-amber-400 dark:text-amber-300 text-4xl mb-2 block mx-auto opacity-50"}),a("p",{class:"text-sm"},"Select an enemy from the Adventure Map to begin combat")],-1)])))]),Ye(Vbe),Ye(s_e,{onShowDropTable:m})])):b(e).activeTab==="shop"?(h(),v("div",b_e,[Ye(Uce)])):b(e).activeTab==="quests"&&c.value?(h(),v("div",y_e,[Ye(gL)])):b(e).activeTab==="megaAnt"&&i.value?(h(),v("div",__e,[Ye(sve)])):Q("",!0),u.value?(h(),Tt(f_e,{key:4,bug:d.value,onClose:f},null,8,["bug"])):Q("",!0),Ye(Ha,{threshold:400})]))}}),k_e=Ct(x_e,[["__scopeId","data-v-6bf5bdc9"]]),Ig="/assets/ascension_matrix-CoN9n1uW.png",Pg="/assets/beetle_shell_shield-CkMnlHMj.png",Mg="/assets/boss_chitinous_blade-Dof7X7Ta.png",$g="/assets/boss_cosmic_nucleus-MFUXtweF.png",Rg="/assets/boss_divine_mandible-CYybHHv5.png",Lg="/assets/boss_hivemind_helm-DxByhshK.png",Dg="/assets/boss_hivemind_synapse-DqZO7Bsf.png",Ng="/assets/boss_mandible_gauntlets-B5Ib9rTm.png",Og="/assets/boss_nebula_stinger-D4RiYZP2.png",Fg="/assets/boss_omega_particle-DuJ-ahhx.png",Ug="/assets/boss_pheromone_catalyst-B2AnQPaS.png",qg="/assets/boss_primordial_chitin_plate-CjOyeIyJ.png",Bg="/assets/boss_quantum_core-BNTULQkm.png",Vg="/assets/boss_quantum_stinger-2mW7VIjN.png",Hg="/assets/boss_reality_fragment-BIGT-vUU.png",Gg="/assets/boss_reality_thread-CEqo-FdP.png",jg="/assets/boss_royal_carapace-DcP_7h71.png",Wg="/assets/boss_star_eater_mandible-oJTgdpN5.png",zg="/assets/boss_temporal_chitin-eIl3sapL.png",Qg="/assets/boss_void_essence_core-BoorhM_9.png",Kg="/assets/chronos_shell-CF1lzknA.png",Yg="/assets/common_ant_training_kit-_I25gBxY.png",Xg="/assets/cosmic_duality-LYEYNYXs.png",Jg="/assets/divine_ant_queen_crown-B462cbDz.png",Zg="/assets/divine_eternity_weave-2WzVmSfK.png",ev="/assets/divine_genesis_claw-CphuEaUY.png",tv="/assets/divine_infinity_shard-D4jff25o.png",sv="/assets/divine_transcendence_core-TRy3ecQZ.png",nv="/assets/divine_universal_amplifier-CTNDTlbl.png",rv="/assets/emperor_toxin-DmYfV7RF.png",ov="/assets/entropy_fangs-C7rZaLH8.png",iv="/assets/epic_ant_commander_armor-Bm9ym17V.png",av="/assets/eternity_weave-BYkKvb4u.png",lv="/assets/evolution_crystal-BLwDZgkg.png",cv="/assets/exoskeleton_plate-CUBmN4bI.png",uv="/assets/foraging_tools-DbUGMudY.png",dv="/assets/genesis_claw-BJBL49XH.png",mv="/assets/hive_amplifier-CqzHvUQb.png",fv="/assets/infinity_shard-QCN3WUtU.png",pv="/assets/infinity_shard_old-CZj_8o-k.png",hv="/assets/leaf_cloak-DWu42wbY.png",gv="/assets/mandible_crusher-CSnVrg4A.png",vv="/assets/mandible_crusher_old-B_Ej9ubt.png",bv="/assets/mythic_ascension_matrix-B6_7w-nJ.png",yv="/assets/mythic_catalyst-xr4hGSg2.png",_v="/assets/mythic_swarm_controller-Dyrl22g8.png",xv="/assets/omnipotent_catalyst-8fZU37bQ.png",kv="/assets/pebble_hammer-CaaQ5vxJ.png",wv="/assets/quantum_mandibles-vYBS0gSo.png",Ev="/assets/rare_ant_tactician_helm-CiRpsvfW.png",Cv="/assets/reinforced_mandibles-oWAuE2B_.png",Sv="/assets/resin_helmet-TysTayCe.png",Tv="/assets/thorn_spear-BYkzWEJK.png",Av="/assets/thorn_spear_old-BYFyHiZU.png",Iv="/assets/training_armor-Dd4ibfLv.png",Pv="/assets/training_sword-CiJgDKdh.png",Mv="/assets/training_sword_old-BlfmoiLU.png",$v="/assets/transcendence_core-T4iBTQo9.png",Rv="/assets/uncommon_ant_scout_gear-D_E_CVEx.png",Lv="/assets/universal_amplifier-Dnecy8Bq.png",Dv="/assets/venom_dagger-Cs9jj4en.png",Nv="/assets/void_reaver-DWs_Zt5Z.png",Ov="/assets/wooden_shield-DZPRatFv.png",Fv="/assets/wooden_shield_old-BoeyM07b.png",Uv="/assets/worker_armor-CtLFF-MT.png",qv="/assets/worker_armor_old-DmglZfoY.png",Bv="/assets/worker_sword-Ch44J_MB.png",w_e={class:"space-y-4"},E_e={class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},C_e={class:"text-base font-bold text-amber-700 dark:text-amber-400 flex items-center mb-3"},S_e={class:"ml-2 text-xs text-amber-600 dark:text-amber-400 font-normal"},T_e={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mb-4"},A_e=["onClick"],I_e={key:0,class:"absolute inset-0 flex flex-col items-center justify-center bg-amber-900/80 p-2 text-center"},P_e={class:"absolute inset-0 flex items-center justify-center"},M_e=["src","alt"],$_e={key:1,class:"i-heroicons-cube text-amber-700 dark:text-amber-500 text-4xl opacity-50"},R_e={class:"relative h-full flex flex-col"},L_e={class:"flex justify-between p-1"},D_e={key:0,class:"bg-amber-200/90 dark:bg-amber-900/90 text-amber-900 dark:text-amber-200 rounded-md px-1.5 py-0.5 text-xs font-medium shadow-md"},N_e={key:1,class:"bg-yellow-200/90 dark:bg-yellow-900/90 text-yellow-900 dark:text-yellow-200 rounded-md px-1.5 py-0.5 text-xs font-medium ml-auto shadow-md"},O_e={key:0,class:"px-1"},F_e={class:"w-full bg-gray-200/70 dark:bg-gray-200/70 rounded-full h-1.5 mt-0.5"},U_e={class:"flex-1 flex items-center justify-center p-2 text-center"},q_e={key:2,class:"absolute inset-0 flex flex-col items-center justify-center text-amber-600 dark:text-amber-400"},B_e={class:"flex justify-center"},V_e={class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},H_e={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 animate-fadeIn"},G_e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},j_e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},W_e={key:0,class:"text-xs text-amber-500 dark:text-amber-400 mt-1"},z_e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},Q_e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},K_e={key:0,class:"text-xs text-amber-500 dark:text-amber-400 mt-1"},Y_e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},X_e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},J_e={key:0,class:"text-xs text-amber-500 dark:text-amber-400 mt-1"},Z_e={key:0,class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},e1e={class:"grid grid-cols-2 gap-3 animate-fadeIn"},t1e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},s1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},n1e={class:"text-xs text-amber-500 dark:text-amber-400 mt-1"},r1e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},o1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},i1e={class:"flex text-xs text-amber-500 dark:text-amber-400 mt-1"},a1e={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1"},l1e={class:"ml-1 whitespace-nowrap"},c1e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},u1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},d1e={class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},m1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},f1e={key:1,class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},p1e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 animate-fadeIn"},h1e={key:0,class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},g1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},v1e={key:1,class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},b1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},y1e={key:0,class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},_1e={class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 capitalize"},x1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},k1e={key:2,class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},w1e={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 animate-fadeIn"},E1e={class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 capitalize"},C1e={class:"text-lg font-bold text-amber-600 dark:text-amber-500"},S1e={key:3,class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border-l-4 border border-amber-200 border-l-amber-500 dark:border-amber-700 dark:border-l-amber-500"},T1e={class:"flex items-start space-x-3"},A1e={class:"text-sm text-amber-600 dark:text-amber-300"},I1e=Je({__name:"EquipmentSection",props:{onSlotClick:{type:Function}},setup(t){const e=hn(),s=Ts(),n=Ht(),r=ir(),o=q(()=>n.generators[0].count),i=q(()=>g(o.value)),c=q(()=>e.totalStats.damage.mul(o.value)),u=q(()=>e.totalStats.health.mul(o.value)),d=q(()=>e.totalStats.regen.mul(o.value)),m=q(()=>r.playerDamage),f=q(()=>r.playerMaxHealth),p=q(()=>r.playerRegen),g=P=>be(P,0),w=q(()=>o.value.gt(0)),C=P=>s.getItem(P),E=P=>be(P.sub(1).mul(100),2)+"%",k=q(()=>{const P=e.totalSpecialModifiers;return Object.keys(P).some(I=>P[I].gt(1))}),A=P=>be(P.sub(1).mul(100),2)+"%",S=P=>{e.toggleSection(P)},T=P=>{try{return new URL(Object.assign({"../assets/items/ascension_matrix.png":Ig,"../assets/items/beetle_shell_shield.png":Pg,"../assets/items/boss_chitinous_blade.png":Mg,"../assets/items/boss_cosmic_nucleus.png":$g,"../assets/items/boss_divine_mandible.png":Rg,"../assets/items/boss_hivemind_helm.png":Lg,"../assets/items/boss_hivemind_synapse.png":Dg,"../assets/items/boss_mandible_gauntlets.png":Ng,"../assets/items/boss_nebula_stinger.png":Og,"../assets/items/boss_omega_particle.png":Fg,"../assets/items/boss_pheromone_catalyst.png":Ug,"../assets/items/boss_primordial_chitin_plate.png":qg,"../assets/items/boss_quantum_core.png":Bg,"../assets/items/boss_quantum_stinger.png":Vg,"../assets/items/boss_reality_fragment.png":Hg,"../assets/items/boss_reality_thread.png":Gg,"../assets/items/boss_royal_carapace.png":jg,"../assets/items/boss_star_eater_mandible.png":Wg,"../assets/items/boss_temporal_chitin.png":zg,"../assets/items/boss_void_essence_core.png":Qg,"../assets/items/chronos_shell.png":Kg,"../assets/items/common_ant_training_kit.png":Yg,"../assets/items/cosmic_duality.png":Xg,"../assets/items/divine_ant_queen_crown.png":Jg,"../assets/items/divine_eternity_weave.png":Zg,"../assets/items/divine_genesis_claw.png":ev,"../assets/items/divine_infinity_shard.png":tv,"../assets/items/divine_transcendence_core.png":sv,"../assets/items/divine_universal_amplifier.png":nv,"../assets/items/emperor_toxin.png":rv,"../assets/items/entropy_fangs.png":ov,"../assets/items/epic_ant_commander_armor.png":iv,"../assets/items/eternity_weave.png":av,"../assets/items/evolution_crystal.png":lv,"../assets/items/exoskeleton_plate.png":cv,"../assets/items/foraging_tools.png":uv,"../assets/items/genesis_claw.png":dv,"../assets/items/hive_amplifier.png":mv,"../assets/items/infinity_shard.png":fv,"../assets/items/infinity_shard_old.png":pv,"../assets/items/leaf_cloak.png":hv,"../assets/items/mandible_crusher.png":gv,"../assets/items/mandible_crusher_old.png":vv,"../assets/items/mythic_ascension_matrix.png":bv,"../assets/items/mythic_catalyst.png":yv,"../assets/items/mythic_swarm_controller.png":_v,"../assets/items/omnipotent_catalyst.png":xv,"../assets/items/pebble_hammer.png":kv,"../assets/items/quantum_mandibles.png":wv,"../assets/items/rare_ant_tactician_helm.png":Ev,"../assets/items/reinforced_mandibles.png":Cv,"../assets/items/resin_helmet.png":Sv,"../assets/items/thorn_spear.png":Tv,"../assets/items/thorn_spear_old.png":Av,"../assets/items/training_armor.png":Iv,"../assets/items/training_sword.png":Pv,"../assets/items/training_sword_old.png":Mv,"../assets/items/transcendence_core.png":$v,"../assets/items/uncommon_ant_scout_gear.png":Rv,"../assets/items/universal_amplifier.png":Lv,"../assets/items/venom_dagger.png":Dv,"../assets/items/void_reaver.png":Nv,"../assets/items/wooden_shield.png":Ov,"../assets/items/wooden_shield_old.png":Fv,"../assets/items/worker_armor.png":Uv,"../assets/items/worker_armor_old.png":qv,"../assets/items/worker_sword.png":Bv})[`../assets/items/${P}.png`],import.meta.url).href}catch{return}},R=P=>{const I=e.inventory.find(D=>D.id===P);return I||s.getItem(P)},L=P=>{const I=R(P);return I?I.name:""};return(P,I)=>{var D,U;return h(),v("section",w_e,[a("div",E_e,[a("h3",C_e,[I[5]||(I[5]=a("span",{class:"i-heroicons-shield-check text-amber-700 dark:text-amber-500 mr-2"},null,-1)),I[6]||(I[6]=oe(" Equipment Slots ")),a("div",S_e," ("+_(b(e).unlockedEquipmentSlots)+"/"+_(b(e).maxEquipmentSlots)+" slots unlocked) ",1)]),a("div",T_e,[(h(!0),v(De,null,Ge(b(e).equipmentSlots,(M,x)=>{var $,Z,me,re,J,le,se,z;return h(),v("div",{key:x,class:K(["relative aspect-square overflow-hidden transition-all duration-200 border-4 rounded-lg",{"border-amber-700/30 dark:border-amber-800/60 bg-amber-900/10 border-dashed":M.locked,"border-amber-500 hover:border-amber-400 bg-amber-100/40 dark:bg-amber-900/30 hover:scale-105 border-solid":!M.locked&&!M.item,"border-amber-500 hover:border-amber-400 hover:scale-105 transform border-solid":M.item}]),style:yt([{"image-rendering":"pixelated","box-shadow":"inset 0 0 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.2)"},M.locked?"":"border-top-color: #f0d4a0; border-left-color: #f0d4a0; border-right-color: #c2924e; border-bottom-color: #c2924e;"]),onClick:ce=>P.onSlotClick(M,x)},[M.locked?(h(),v("div",I_e,I[7]||(I[7]=[a("div",{class:"i-heroicons-lock-closed text-2xl text-amber-500 mb-1"},null,-1),a("div",{class:"text-xs text-amber-400"},"Locked Slot",-1),a("div",{class:"text-[10px] text-amber-500 mt-1"},"Unlock via Evolution",-1)]))):M.item?(h(),v("div",{key:1,class:K(["relative h-full",b(s).getRarityBackground((($=C(M.item))==null?void 0:$.rarity)||"common")])},[a("div",P_e,[T(M.item)?(h(),v("img",{key:0,src:T(M.item),alt:(Z=C(M.item))==null?void 0:Z.name,class:"w-full h-full object-contain p-2 opacity-70"},null,8,M_e)):(h(),v("span",$_e))]),a("div",R_e,[a("div",L_e,[(me=R(M.item))!=null&&me.level?(h(),v("div",D_e," Lvl "+_((re=R(M.item))==null?void 0:re.level.toString()),1)):Q("",!0),M.itemIsLocked?(h(),v("div",N_e,I[8]||(I[8]=[a("span",{class:"i-heroicons-lock-closed"},null,-1)]))):Q("",!0)]),(J=R(M.item))!=null&&J.level?(h(),v("div",O_e,[a("div",F_e,[a("div",{class:"bg-amber-500 dark:bg-amber-600 h-1.5 rounded-full",style:yt(`width: ${(se=R(M.item))==null?void 0:se.xp.div(((le=R(M.item))==null?void 0:le.maxXp)||1).mul(100).toNumber()}%`)},null,4)])])):Q("",!0),a("div",U_e,[a("div",{class:K(["text-base font-bold line-clamp-2",b(s).getRarityColor(((z=C(M.item))==null?void 0:z.rarity)||"common")]),style:{"text-shadow":"1px 1px 2px rgba(0,0,0,0.5)"}},_(L(M.item)),3)]),I[9]||(I[9]=a("div",{class:"bg-amber-900/70 py-1 text-[10px] text-center text-amber-200 border-t border-amber-600/50"}," Click to unequip ",-1))])],2)):(h(),v("div",q_e,I[10]||(I[10]=[a("div",{class:"i-heroicons-plus text-2xl mb-1 animate-pulse"},null,-1),a("div",{class:"text-xs text-center font-medium"},"Empty Slot",-1),a("div",{class:"text-[10px] text-amber-500 dark:text-amber-500 mt-1"},"Click to browse items",-1)])))],14,A_e)}),128))]),a("div",B_e,[a("button",{onClick:I[0]||(I[0]=M=>b(e).initializeEquipmentSlots()),class:"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white px-4 py-2 rounded-lg shadow-md transition-colors flex items-center"},I[11]||(I[11]=[a("span",{class:"i-heroicons-refresh mr-2"},null,-1),oe(" Refresh Equipment Slots ")]))])]),a("div",V_e,[a("div",{onClick:I[1]||(I[1]=M=>S("equipmentStats")),class:"flex justify-between items-center cursor-pointer mb-3 p-1 hover:bg-amber-100/70 dark:hover:bg-amber-800/30 rounded transition-colors"},[I[12]||(I[12]=a("h3",{class:"text-base font-bold text-amber-700 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-chart-bar mr-2"}),oe(" Equipment Stats ")],-1)),a("span",{class:K(b(e).collapsedSections.equipmentStats?"i-heroicons-chevron-down":"i-heroicons-chevron-up text-amber-600 dark:text-amber-400")},null,2)]),Ut(a("div",H_e,[a("div",G_e,[I[13]||(I[13]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-bolt mr-1"}),oe(" Damage ")],-1)),a("div",j_e," +"+_(g(b(e).totalStats.damage)),1),w.value?(h(),v("div",W_e," Boosted: +"+_(g(c.value)),1)):Q("",!0)]),a("div",z_e,[I[14]||(I[14]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-heart mr-1"}),oe(" Health ")],-1)),a("div",Q_e," +"+_(g(b(e).totalStats.health)),1),w.value?(h(),v("div",K_e," Boosted: +"+_(g(u.value)),1)):Q("",!0)]),a("div",Y_e,[I[15]||(I[15]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-arrow-path mr-1"}),oe(" Regen ")],-1)),a("div",X_e," +"+_(g(b(e).totalStats.regen)),1),w.value?(h(),v("div",J_e," Boosted: +"+_(g(d.value)),1)):Q("",!0)])],512),[[fl,!b(e).collapsedSections.equipmentStats]])]),w.value?(h(),v("div",Z_e,[a("div",{onClick:I[2]||(I[2]=M=>S("combatStats")),class:"flex justify-between items-center cursor-pointer mb-3 p-1 hover:bg-amber-100/70 dark:hover:bg-amber-800/30 rounded transition-colors"},[I[16]||(I[16]=a("h3",{class:"text-base font-bold text-amber-700 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-fire mr-2"}),oe(" Total Combat Stats ")],-1)),a("span",{class:K(b(e).collapsedSections.combatStats?"i-heroicons-chevron-down":"i-heroicons-chevron-up text-amber-600 dark:text-amber-400")},null,2)]),Ut(a("div",e1e,[a("div",t1e,[I[17]||(I[17]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-bolt mr-1"}),oe(" Total Damage ")],-1)),a("div",s1e,_(g(m.value)),1),a("div",n1e,_(g(o.value))+" worker ants ",1)]),a("div",r1e,[I[18]||(I[18]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-heart mr-1"}),oe(" Total Health ")],-1)),a("div",o1e,_(g(f.value)),1),a("div",i1e,[a("div",a1e,[a("div",{class:"bg-amber-500 dark:bg-amber-600 h-2 rounded-full",style:yt(`width: ${b(r).currentHealth.div(f.value).mul(100).toNumber()}%`)},null,4)]),a("span",l1e,_(g(b(r).currentHealth))+"/"+_(g(f.value)),1)])]),a("div",c1e,[I[19]||(I[19]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-arrow-path mr-1"}),oe(" Total Regen ")],-1)),a("div",u1e,_(g(p.value)),1),I[20]||(I[20]=a("div",{class:"text-xs text-amber-500 dark:text-amber-400 mt-1"}," per second ",-1))]),a("div",d1e,[I[21]||(I[21]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-shield-check mr-1"}),oe(" Defense ")],-1)),a("div",m1e,_(g(b(r).playerDefense)),1),I[22]||(I[22]=a("div",{class:"text-xs text-amber-500 dark:text-amber-400 mt-1"}," damage reduction ",-1))])],512),[[fl,!b(e).collapsedSections.combatStats]])])):Q("",!0),k.value?(h(),v("div",f1e,[a("div",{onClick:I[3]||(I[3]=M=>S("specialModifiers")),class:"flex justify-between items-center cursor-pointer mb-3 p-1 hover:bg-amber-100/70 dark:hover:bg-amber-800/30 rounded transition-colors"},[I[23]||(I[23]=a("h3",{class:"text-base font-bold text-amber-700 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-sparkles mr-2"}),oe(" Special Bonuses ")],-1)),a("span",{class:K(b(e).collapsedSections.specialModifiers?"i-heroicons-chevron-down":"i-heroicons-chevron-up text-amber-600 dark:text-amber-400")},null,2)]),Ut(a("div",p1e,[(D=b(e).totalSpecialModifiers.epBoost)!=null&&D.gt(1)?(h(),v("div",h1e,[I[24]||(I[24]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-sparkles text-amber-600 dark:text-amber-400 mr-1"}),oe(" Evolution Points ")],-1)),a("div",g1e," +"+_(E(b(e).totalSpecialModifiers.epBoost)),1),I[25]||(I[25]=a("div",{class:"text-xs text-amber-500 dark:text-amber-400 mt-1"}," Bonus to EP gain ",-1))])):Q("",!0),(U=b(e).totalSpecialModifiers.global)!=null&&U.gt(1)?(h(),v("div",v1e,[I[26]||(I[26]=a("div",{class:"text-xs font-medium text-amber-700 dark:text-amber-400 mb-1 flex items-center"},[a("span",{class:"i-heroicons-globe-alt text-amber-600 dark:text-amber-400 mr-1"}),oe(" Global Production ")],-1)),a("div",b1e," +"+_(E(b(e).totalSpecialModifiers.global)),1),I[27]||(I[27]=a("div",{class:"text-xs text-amber-500 dark:text-amber-400 mt-1"}," All production increased ",-1))])):Q("",!0),(h(!0),v(De,null,Ge(b(e).totalSpecialModifiers,(M,x)=>(h(),v(De,{key:x},[x!=="epBoost"&&x!=="global"&&M.gt(1)?(h(),v("div",y1e,[a("div",_1e,_(x.replace(/([A-Z])/g," $1").trim()),1),a("div",x1e," +"+_(E(M)),1)])):Q("",!0)],64))),128))],512),[[fl,!b(e).collapsedSections.specialModifiers]])])):Q("",!0),Object.keys(b(e).totalProductionModifiers).length>0?(h(),v("div",k1e,[a("div",{onClick:I[4]||(I[4]=M=>S("productionModifiers")),class:"flex justify-between items-center cursor-pointer mb-3 p-1 hover:bg-amber-100/70 dark:hover:bg-amber-800/30 rounded transition-colors"},[I[28]||(I[28]=a("h3",{class:"text-base font-bold text-amber-700 dark:text-amber-400 flex items-center"},[a("span",{class:"i-heroicons-arrow-trending-up mr-2"}),oe(" Production Bonuses ")],-1)),a("span",{class:K(b(e).collapsedSections.productionModifiers?"i-heroicons-chevron-down":"i-heroicons-chevron-up text-amber-600 dark:text-amber-400")},null,2)]),Ut(a("div",w1e,[(h(!0),v(De,null,Ge(b(e).totalProductionModifiers,(M,x)=>(h(),v("div",{key:x,class:"bg-gradient-to-br from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 p-3 rounded-lg shadow-sm backdrop-blur-sm"},[a("div",E1e,_(x),1),a("div",C1e," +"+_(A(M)),1)]))),128))],512),[[fl,!b(e).collapsedSections.productionModifiers]])])):Q("",!0),w.value?(h(),v("div",S1e,[a("div",T1e,[I[30]||(I[30]=a("span",{class:"i-heroicons-information-circle text-xl text-amber-600 dark:text-amber-400 mt-0.5 shrink-0"},null,-1)),a("div",null,[I[29]||(I[29]=a("h4",{class:"font-medium text-amber-700 dark:text-amber-400 mb-1"},"Equipment Boost",-1)),a("p",A1e," Your equipment stats are boosted by your worker ants! Each stat is multiplied by your worker ant count (currently "+_(i.value)+"), giving you a significant combat advantage. ",1)])])])):Q("",!0)])}}}),qT=Ct(I1e,[["__scopeId","data-v-0d0d6e3b"]]),P1e={class:"p-3 sm:p-5 border-b border-amber-200 dark:border-amber-700 bg-white/95 dark:bg-gray-800/95 sticky top-0 z-10"},M1e={class:"mt-4 p-3 bg-amber-50/80 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},$1e={class:"flex items-start justify-between"},R1e={class:"text-xs text-amber-700 dark:text-amber-400 mt-1"},L1e={key:0,class:"flex items-center"},D1e={class:"relative inline-flex items-center cursor-pointer"},N1e={class:"ml-2 text-xs font-medium text-gray-700 dark:text-gray-300"},O1e={key:1},F1e={class:"mt-3 sm:mt-4"},U1e={class:"relative"},q1e={class:"p-3 sm:p-5"},B1e={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4"},V1e={class:"flex items-start justify-between"},H1e={class:"flex-1 min-w-0 mr-3"},G1e={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},j1e={class:"shrink-0 flex items-center"},W1e={class:"relative inline-flex items-center cursor-pointer"},z1e=["checked","onChange"],Q1e={class:"ml-2 text-xs font-medium text-gray-700 dark:text-gray-300"},K1e={key:0,class:"py-6 text-center text-gray-500 dark:text-gray-400"},Y1e=Je({__name:"ItemFilterModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,r=z1(),o=hn();St();const i=Ts(),c=Y(""),u=Tu(),{isClosing:d,handleClose:m,preventBackgroundTouchMove:f}=Gr(),p=()=>{m(()=>n("close"),250)},g=A=>{A.key==="Escape"&&s.isOpen&&p()};Et(()=>{window.addEventListener("keydown",g)}),xn(()=>{window.removeEventListener("keydown",g)});const w=q(()=>{const A=r.getAllAvailableItems();return(c.value?A.filter(T=>T.name.toLowerCase().includes(c.value.toLowerCase())||T.description.toLowerCase().includes(c.value.toLowerCase())):A).reduce((T,R)=>(T[R.rarity]||(T[R.rarity]=[]),T[R.rarity].push(R),T),{})}),C=["common","uncommon","rare","epic","legendary","mythic","divine"],E=q(()=>o.isAutoSalvageUnlocked),k=q({get:()=>o.isAutoSalvageEnabled,set:A=>{A!==o.isAutoSalvageEnabled&&o.toggleAutoSalvage()}});return q(()=>Object.values(w.value).some(A=>A.some(S=>r.isItemFiltered(S.id)))),(A,S)=>A.isOpen?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-start justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto overscroll-contain modal-backdrop","data-modal-backdrop":"true",onClick:xt(p,["self"]),onTouchmove:S[3]||(S[3]=xt((...T)=>b(f)&&b(f)(...T),["self"]))},[a("div",{class:K(["bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-xl shadow-lg w-full max-w-4xl mx-auto my-4 border border-amber-200 dark:border-amber-800",{"animate-fadeOut":b(d)}])},[a("div",P1e,[a("div",{class:"flex justify-between items-start"},[S[5]||(S[5]=a("h3",{class:"text-lg font-bold flex items-center text-amber-800 dark:text-amber-300"},[a("span",{class:"i-heroicons-funnel text-amber-600 dark:text-amber-400 mr-2"}),oe(" Item Filter Settings ")],-1)),a("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors"},S[4]||(S[4]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))]),S[9]||(S[9]=a("p",{class:"text-sm text-gray-700 dark:text-gray-300 mt-3 leading-relaxed hidden sm:block"},' Configure which items your colony should collect. Items marked as "Filtered" will be automatically discarded when dropped. This is useful for preventing your inventory from filling up with lower-tier items as you progress. ',-1)),S[10]||(S[10]=a("p",{class:"text-sm text-gray-700 dark:text-gray-300 mt-3 leading-relaxed sm:hidden"}," Configure which items to collect or filter out. ",-1)),a("div",M1e,[a("div",$1e,[a("div",null,[S[6]||(S[6]=a("h4",{class:"text-sm font-semibold text-amber-800 dark:text-amber-300 flex items-center"},[a("span",{class:"i-heroicons-beaker text-amber-600 dark:text-amber-400 mr-2"}),oe(" Auto-Salvage Filtered Items ")],-1)),a("p",R1e,_(E.value?"Automatically convert filtered items to Pheromone Essence":"Purchase Auto-Salvage upgrade to convert filtered items to Pheromone Essence"),1)]),E.value?(h(),v("div",L1e,[a("label",D1e,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":S[0]||(S[0]=T=>k.value=T),class:"sr-only peer"},null,512),[[ln,k.value]]),S[7]||(S[7]=a("div",{class:"w-11 h-6 bg-gray-300 dark:bg-gray-600 peer-focus:ring-2 peer-focus:ring-amber-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1)),a("span",N1e,_(k.value?"Enabled":"Disabled"),1)])])):(h(),v("div",O1e,[a("button",{onClick:S[1]||(S[1]=T=>b(u).push("/upgrades")),class:"px-3 py-1 bg-amber-600 hover:bg-amber-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center"}," Purchase Upgrade ")]))])]),a("div",F1e,[a("div",U1e,[S[8]||(S[8]=a("span",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[a("span",{class:"i-heroicons-magnifying-glass text-gray-400"})],-1)),Ut(a("input",{"onUpdate:modelValue":S[2]||(S[2]=T=>c.value=T),type:"text",placeholder:"Search items...",class:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-gray-900 dark:text-gray-100"},null,512),[[xa,c.value]])])])]),a("div",q1e,[(h(),v(De,null,Ge(C,T=>{var R;return Ut(a("div",{key:T},[a("h3",{class:K(["text-base sm:text-lg font-semibold mb-2 capitalize",b(i).getRarityColor(T)])},_(T),3),a("div",B1e,[(h(!0),v(De,null,Ge(w.value[T],L=>(h(),v("div",{key:L.id,class:K(["rounded-lg p-3 flex flex-col border border-gray-200 dark:border-gray-600",b(i).getRarityBackground(L.rarity)])},[a("div",V1e,[a("div",H1e,[a("h4",{class:K(["font-semibold truncate",b(i).getRarityColor(L.rarity)])},_(L.name),3),a("p",G1e,_(L.description),1)]),a("div",j1e,[a("label",W1e,[a("input",{type:"checkbox",checked:!b(r).isItemFiltered(L.id),onChange:P=>b(r).toggleItemFilter(L.id),class:"sr-only peer"},null,40,z1e),S[11]||(S[11]=a("div",{class:"w-11 h-6 bg-gray-300 dark:bg-gray-600 peer-focus:ring-2 peer-focus:ring-amber-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1)),a("span",Q1e,_(b(r).isItemFiltered(L.id)?"Filtered":"Collect"),1)])])])],2))),128))])]),[[fl,(R=w.value[T])==null?void 0:R.length]])}),64)),Object.keys(w.value).length===0||Object.values(w.value).every(T=>T.length===0)?(h(),v("div",K1e,S[12]||(S[12]=[a("div",{class:"i-heroicons-magnifying-glass text-3xl mx-auto mb-2"},null,-1),a("p",null,"No items match your search query.",-1)]))):Q("",!0)])],2)],32)):Q("",!0)}}),X1e=Ct(Y1e,[["__scopeId","data-v-7f36d718"]]),Cp=t=>{let e=0;return t.stats&&(t.stats.damage&&(e+=t.stats.damage.toNumber()),t.stats.health&&(e+=t.stats.health.toNumber()*.5),t.stats.defense&&(e+=t.stats.defense.toNumber()*.8),t.stats.regen&&(e+=t.stats.regen.toNumber()*2)),t.productionModifiers&&Object.values(t.productionModifiers).forEach(s=>{e+=(s.toNumber()-1)*10}),t.specialModifiers&&(t.specialModifiers.epBoost&&(e+=(t.specialModifiers.epBoost.toNumber()-1)*20),t.specialModifiers.global&&(e+=(t.specialModifiers.global.toNumber()-1)*15)),e},Sp={common:0,uncommon:1,rare:2,epic:3,legendary:4,mythic:5,divine:6},J1e=[{id:"default",label:"Default",compareFn:()=>0},{id:"rarity-asc",label:"Rarity (Low to High)",compareFn:(t,e)=>Sp[t.rarity]-Sp[e.rarity]},{id:"rarity-desc",label:"Rarity (High to Low)",compareFn:(t,e)=>Sp[e.rarity]-Sp[t.rarity]},{id:"power-asc",label:"Power (Low to High)",compareFn:(t,e)=>{const s=Cp(t),n=Cp(e);return s-n}},{id:"power-desc",label:"Power (High to Low)",compareFn:(t,e)=>{const s=Cp(t);return Cp(e)-s}},{id:"name-asc",label:"Name (A to Z)",compareFn:(t,e)=>t.name.localeCompare(e.name)},{id:"name-desc",label:"Name (Z to A)",compareFn:(t,e)=>e.name.localeCompare(t.name)},{id:"quantity-asc",label:"Quantity (Low to High)",compareFn:(t,e)=>{var r,o;const s=((r=t.quantity)==null?void 0:r.toNumber())||1,n=((o=e.quantity)==null?void 0:o.toNumber())||1;return s-n}},{id:"quantity-desc",label:"Quantity (High to Low)",compareFn:(t,e)=>{var r,o;const s=((r=t.quantity)==null?void 0:r.toNumber())||1;return(((o=e.quantity)==null?void 0:o.toNumber())||1)-s}}],Z1e=[{id:"none",label:"Show All Items",filterFn:()=>!0},{id:"damage",label:"Damage",filterFn:t=>{var e;return!!((e=t.stats)!=null&&e.damage&&t.stats.damage.gt(0))}},{id:"health",label:"Health",filterFn:t=>{var e;return!!((e=t.stats)!=null&&e.health&&t.stats.health.gt(0))}},{id:"defense",label:"Defense",filterFn:t=>{var e;return!!((e=t.stats)!=null&&e.defense&&t.stats.defense.gt(0))}},{id:"regen",label:"Regeneration",filterFn:t=>{var e;return!!((e=t.stats)!=null&&e.regen&&t.stats.regen.gt(0))}},{id:"epBoost",label:"EP Boost",filterFn:t=>{var e;return!!((e=t.specialModifiers)!=null&&e.epBoost&&t.specialModifiers.epBoost.gt(1))}},{id:"global",label:"Global Multiplier",filterFn:t=>{var e;return!!((e=t.specialModifiers)!=null&&e.global&&t.specialModifiers.global.gt(1))}},{id:"worker",label:"Worker Production",filterFn:t=>{var e;return!!((e=t.productionModifiers)!=null&&e.worker&&t.productionModifiers.worker.gt(1))}},{id:"queen",label:"Queen Production",filterFn:t=>{var e;return!!((e=t.productionModifiers)!=null&&e.queen&&t.productionModifiers.queen.gt(1))}},{id:"nursery",label:"Nursery Production",filterFn:t=>{var e;return!!((e=t.productionModifiers)!=null&&e.nursery&&t.productionModifiers.nursery.gt(1))}},{id:"farm",label:"Farm Production",filterFn:t=>{var e;return!!((e=t.productionModifiers)!=null&&e.farm&&t.productionModifiers.farm.gt(1))}}],exe=()=>{Ts();const t=J1e,e=Y(t[0].id),s=Z1e,n=Y(s[0].id),r=q(()=>{const d=t.find(m=>m.id===e.value);return d?d.compareFn:(console.warn(`Sort option "${e.value}" not found, using default.`),t[0].compareFn)}),o=q(()=>{const d=s.find(m=>m.id===n.value);return d?d.filterFn:(console.warn(`Filter option "${n.value}" not found, using default.`),s[0].filterFn)});return{sortOptions:t,selectedSort:e,filterOptions:s,selectedFilter:n,getCurrentSortFunction:r,getCurrentFilterFunction:o,filterAndSortItems:d=>{const m=o.value,f=d.filter(m),p=r.value;return[...f].sort(p)},hiddenItemsCount:d=>{if(n.value==="none")return 0;const m=o.value;return d.length-d.filter(m).length},resetSortAndFilter:()=>{e.value=t[0].id,n.value=s[0].id}}},txe={class:"relative w-full"},sxe=["value"],nxe=["value"],BT=Je({__name:"InventorySortDropdown",props:{selectedSort:{},sortOptions:{}},emits:["update:selectedSort"],setup(t,{emit:e}){const s=e,n=r=>{const o=r.target;s("update:selectedSort",o.value)};return(r,o)=>(h(),v("div",txe,[a("select",{class:"w-full bg-amber-50 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-lg px-3 py-1.5 text-sm appearance-none pr-8 border border-amber-300 dark:border-amber-700",value:r.selectedSort,onChange:n},[(h(!0),v(De,null,Ge(r.sortOptions,i=>(h(),v("option",{key:i.id,value:i.id},_(i.label),9,nxe))),128))],40,sxe),o[0]||(o[0]=a("div",{class:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"},[a("span",{class:"i-heroicons-chevron-down text-amber-700 dark:text-amber-300"})],-1))]))}}),rxe={class:"relative w-full"},oxe=["value"],ixe=["value"],VT=Je({__name:"InventoryFilterDropdown",props:{selectedFilter:{},filterOptions:{}},emits:["update:selectedFilter"],setup(t,{emit:e}){const s=e,n=r=>{const o=r.target;s("update:selectedFilter",o.value)};return(r,o)=>(h(),v("div",rxe,[a("select",{class:"w-full bg-amber-50 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-lg px-3 py-1.5 text-sm appearance-none pr-8 border border-amber-300 dark:border-amber-700",value:r.selectedFilter,onChange:n},[(h(!0),v(De,null,Ge(r.filterOptions,i=>(h(),v("option",{key:i.id,value:i.id},_(i.label),9,ixe))),128))],40,oxe),o[0]||(o[0]=a("div",{class:"absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"},[a("span",{class:"i-heroicons-funnel text-amber-700 dark:text-amber-300"})],-1))]))}});function If(){const t=Ls(),e=q(()=>t.honeydew),s=q(()=>be(e.value));return{honeydew:e,formattedHoneydew:s,formatHoneydew:(o,i=2)=>be(o,i),canAffordHoneydew:o=>e.value.gte(o)}}const axe={class:"flex items-center justify-center"},lxe={class:"px-1.5 py-0.5 bg-gradient-to-r from-yellow-400 to-amber-500 text-yellow-900 rounded-full shadow-md flex items-center"},cxe=Je({__name:"XpIndicator",props:{indicator:{}},setup(t){const e=t,s=q(()=>`+${be(e.indicator.amount,0)}`),n=q(()=>{const m=e.indicator.amount.toNumber();return m>=100?1*1.25:m>=50?1*1.15:m>=20?1*1.05:1}),r=Y(null),o=Y(1),i=Y(0),c=Y(0),u=Y(.6);return Et(()=>{c.value=Math.random()*20-10,setTimeout(()=>{u.value=.85},50),setTimeout(()=>{i.value=-15-Math.random()*10},100),setTimeout(()=>{o.value=.9},1e3),setTimeout(()=>{o.value=.5},1500),setTimeout(()=>{o.value=0},1800)}),(d,m)=>(h(),v("div",{ref_key:"indicatorEl",ref:r,class:K(["absolute pointer-events-none z-10 font-bold",{"text-2xs":n.value===1,"text-xs":n.value>1&&n.value<1.2,"text-sm":n.value>=1.2}]),style:yt({opacity:o.value,transform:`translate(${c.value}px, ${i.value}px) scale(${u.value})`,transition:"opacity 0.3s ease, transform 1.5s ease, scale 0.2s ease-out"})},[a("div",axe,[a("div",lxe,[m[0]||(m[0]=a("span",{class:"i-heroicons-sparkles text-yellow-700 mr-0.5 text-xs"},null,-1)),a("span",null,_(s.value)+" XP",1)])])],6))}}),uxe={class:"space-y-4"},dxe={class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-lg p-4 shadow-md border border-amber-200 dark:border-amber-700"},mxe={class:"sm:hidden"},fxe={class:"flex justify-between items-center mb-4"},pxe={class:"flex items-center"},hxe={class:"flex space-x-2"},gxe={class:"flex items-center bg-gradient-to-r from-green-50/80 to-green-100/80 dark:from-green-900/60 dark:to-green-800/60 px-3 py-1.5 rounded-lg relative group backdrop-blur-sm"},vxe={class:"text-sm font-medium text-green-800 dark:text-green-300"},bxe={class:"flex items-center bg-gradient-to-r from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 px-3 py-1.5 rounded-lg relative group backdrop-blur-sm"},yxe={class:"text-sm font-medium text-amber-800 dark:text-amber-300"},_xe={class:"text-xs font-medium text-amber-700 dark:text-amber-400 ml-2"},xxe={key:0,class:"rounded-lg p-3 mb-3 bg-amber-50/90 dark:bg-amber-800/60 animate-fadeIn backdrop-blur-sm"},kxe={class:"grid grid-cols-1 gap-2"},wxe={key:0,class:"ml-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"},Exe={class:"w-full"},Cxe={class:"w-full"},Sxe={class:"hidden sm:block"},Txe={class:"flex justify-between items-center mb-4"},Axe={class:"flex items-center space-x-4"},Ixe={class:"flex space-x-3"},Pxe={class:"flex items-center bg-gradient-to-r from-green-50/80 to-green-100/80 dark:from-green-900/60 dark:to-green-800/60 px-3 py-1.5 rounded-lg relative group backdrop-blur-sm"},Mxe={class:"text-sm font-medium text-green-800 dark:text-green-300"},$xe={class:"flex items-center bg-gradient-to-r from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 px-3 py-1.5 rounded-lg relative group backdrop-blur-sm"},Rxe={class:"text-sm font-medium text-amber-800 dark:text-amber-300"},Lxe={class:"text-sm font-medium text-amber-700 dark:text-amber-400"},Dxe={class:"flex items-center gap-2"},Nxe={class:"relative"},Oxe={key:0,class:"absolute top-full right-0 mt-1 w-48 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-lg border border-amber-200 dark:border-amber-800 animate-fadeIn z-10"},Fxe={class:"p-2 grid gap-1"},Uxe={key:0,class:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},qxe={class:"flex space-x-2"},Bxe={key:0,class:"mb-4 text-sm bg-gradient-to-r from-amber-50/80 to-amber-100/80 dark:from-amber-900/60 dark:to-amber-800/60 py-2 px-3 rounded-lg flex items-center justify-between backdrop-blur-sm"},Vxe={class:"text-amber-700 dark:text-amber-400"},Hxe={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 3xl:grid-cols-8 gap-3"},Gxe=["onClick"],jxe={class:"absolute inset-0 flex items-center justify-center"},Wxe=["src","alt"],zxe={key:1,class:"i-heroicons-cube text-amber-700 dark:text-amber-500 text-4xl opacity-50"},Qxe={class:"absolute top-0 left-0 inset-0 overflow-visible pointer-events-none"},Kxe={class:"relative h-full flex flex-col"},Yxe={class:"flex justify-between p-1"},Xxe={class:"bg-amber-200/90 dark:bg-amber-900/90 text-amber-900 dark:text-amber-200 rounded-md px-1 py-0.5 text-2xs font-medium shadow-md"},Jxe={key:0,class:"bg-yellow-200/90 dark:bg-yellow-900/90 text-yellow-900 dark:text-yellow-200 rounded-md px-1 py-0.5 text-2xs font-medium ml-auto shadow-md"},Zxe={key:1,class:"bg-green-200/90 dark:bg-green-900/90 text-green-900 dark:text-green-200 rounded-md px-1 py-0.5 text-2xs font-medium ml-auto shadow-md"},eke={class:"px-1"},tke={class:"w-full bg-gray-200/70 dark:bg-gray-200/70 rounded-full h-1.5 mt-0.5"},ske={class:"mt-auto flex items-center justify-center p-2 text-center"},nke={key:0},rke={key:1},oke={class:"mt-6 flex justify-end space-x-3"},ike=["disabled"],ake={key:0,class:"i-heroicons-arrow-path animate-spin mr-2"},lke={key:2},cke=Je({__name:"InventorySection",props:{onItemClick:Function,isItemEquipped:Function},setup(t){const e=t,s=hn(),n=Ts(),r=Ks(),{formattedHoneydew:o}=If(),{isClosing:i,handleClose:c,preventBackgroundTouchMove:u}=Gr(),d=Y(!1),m=Y(!1),f=Y(!1),p=Y(!1),g=Y(null),w=Y(!1),{sortOptions:C,selectedSort:E,filterOptions:k,selectedFilter:A,filterAndSortItems:S,hiddenItemsCount:T}=exe();E.value=s.selectedInventorySort,A.value=s.selectedInventoryFilter||"none",dt(E,$=>{s.selectedInventorySort=$}),dt(A,$=>{s.selectedInventoryFilter=$});const R=q(()=>S(s.inventory)),L=q(()=>T(s.inventory)),P=$=>`${$.name}`,I=()=>{p.value=!0,m.value=!1,f.value=!1},D=async()=>{w.value=!0,g.value=null;try{s.salvageAll(),g.value={success:!0,message:"Successfully salvaged unlocked items for Pheromone Essence"},await new Promise($=>setTimeout($,2e3)),c(()=>p.value=!1)}catch($){g.value={success:!1,message:`Error: ${$}`}}w.value=!1},U=()=>{c(()=>{p.value=!1,g.value=null})},M=$=>{try{return new URL(Object.assign({"../assets/items/ascension_matrix.png":Ig,"../assets/items/beetle_shell_shield.png":Pg,"../assets/items/boss_chitinous_blade.png":Mg,"../assets/items/boss_cosmic_nucleus.png":$g,"../assets/items/boss_divine_mandible.png":Rg,"../assets/items/boss_hivemind_helm.png":Lg,"../assets/items/boss_hivemind_synapse.png":Dg,"../assets/items/boss_mandible_gauntlets.png":Ng,"../assets/items/boss_nebula_stinger.png":Og,"../assets/items/boss_omega_particle.png":Fg,"../assets/items/boss_pheromone_catalyst.png":Ug,"../assets/items/boss_primordial_chitin_plate.png":qg,"../assets/items/boss_quantum_core.png":Bg,"../assets/items/boss_quantum_stinger.png":Vg,"../assets/items/boss_reality_fragment.png":Hg,"../assets/items/boss_reality_thread.png":Gg,"../assets/items/boss_royal_carapace.png":jg,"../assets/items/boss_star_eater_mandible.png":Wg,"../assets/items/boss_temporal_chitin.png":zg,"../assets/items/boss_void_essence_core.png":Qg,"../assets/items/chronos_shell.png":Kg,"../assets/items/common_ant_training_kit.png":Yg,"../assets/items/cosmic_duality.png":Xg,"../assets/items/divine_ant_queen_crown.png":Jg,"../assets/items/divine_eternity_weave.png":Zg,"../assets/items/divine_genesis_claw.png":ev,"../assets/items/divine_infinity_shard.png":tv,"../assets/items/divine_transcendence_core.png":sv,"../assets/items/divine_universal_amplifier.png":nv,"../assets/items/emperor_toxin.png":rv,"../assets/items/entropy_fangs.png":ov,"../assets/items/epic_ant_commander_armor.png":iv,"../assets/items/eternity_weave.png":av,"../assets/items/evolution_crystal.png":lv,"../assets/items/exoskeleton_plate.png":cv,"../assets/items/foraging_tools.png":uv,"../assets/items/genesis_claw.png":dv,"../assets/items/hive_amplifier.png":mv,"../assets/items/infinity_shard.png":fv,"../assets/items/infinity_shard_old.png":pv,"../assets/items/leaf_cloak.png":hv,"../assets/items/mandible_crusher.png":gv,"../assets/items/mandible_crusher_old.png":vv,"../assets/items/mythic_ascension_matrix.png":bv,"../assets/items/mythic_catalyst.png":yv,"../assets/items/mythic_swarm_controller.png":_v,"../assets/items/omnipotent_catalyst.png":xv,"../assets/items/pebble_hammer.png":kv,"../assets/items/quantum_mandibles.png":wv,"../assets/items/rare_ant_tactician_helm.png":Ev,"../assets/items/reinforced_mandibles.png":Cv,"../assets/items/resin_helmet.png":Sv,"../assets/items/thorn_spear.png":Tv,"../assets/items/thorn_spear_old.png":Av,"../assets/items/training_armor.png":Iv,"../assets/items/training_sword.png":Pv,"../assets/items/training_sword_old.png":Mv,"../assets/items/transcendence_core.png":$v,"../assets/items/uncommon_ant_scout_gear.png":Rv,"../assets/items/universal_amplifier.png":Lv,"../assets/items/venom_dagger.png":Dv,"../assets/items/void_reaver.png":Nv,"../assets/items/wooden_shield.png":Ov,"../assets/items/wooden_shield_old.png":Fv,"../assets/items/worker_armor.png":Uv,"../assets/items/worker_armor_old.png":qv,"../assets/items/worker_sword.png":Bv})[`../assets/items/${$}.png`],import.meta.url).href}catch{return}},x=Y({});return($,Z)=>(h(),v("section",uxe,[a("div",dxe,[a("div",mxe,[a("div",fxe,[a("div",pxe,[a("div",hxe,[a("div",gxe,[Z[14]||(Z[14]=a("span",{class:"i-heroicons-droplet text-green-600 dark:text-green-400 mr-1"},null,-1)),a("span",vxe,_(b(o)),1)]),a("div",bxe,[Z[15]||(Z[15]=a("span",{class:"i-heroicons-beaker text-amber-600 dark:text-amber-400 mr-1"},null,-1)),a("span",yxe,_(b(r).formattedPheromoneEssence),1)])]),a("div",_xe,[a("span",null,_(b(s).inventory.length)+"/"+_(b(s).maxInventorySlots.toNumber()),1)])]),a("button",{onClick:Z[0]||(Z[0]=me=>m.value=!m.value),class:"px-3 py-1.5 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 rounded-lg text-sm text-white flex items-center transition-all"},Z[16]||(Z[16]=[a("span",{class:"i-heroicons-ellipsis-horizontal text-white mr-1"},null,-1),oe(" Actions ")]))]),m.value?(h(),v("div",xxe,[a("div",kxe,[b(s).isSalvageAllUnlocked?(h(),v("button",{key:0,onClick:I,class:"px-3 py-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 rounded-lg text-sm text-white flex items-center justify-between transition-all"},Z[17]||(Z[17]=[a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-white mr-1"}),oe(" Salvage All ")],-1)]))):Q("",!0),b(s).isAutoSalvageUnlocked?(h(),v("button",{key:1,onClick:Z[1]||(Z[1]=me=>b(s).toggleAutoSalvage()),class:K(["px-3 py-2 rounded-lg text-sm flex items-center justify-between transition-all",b(s).isAutoSalvageEnabled?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white"])},[Z[18]||(Z[18]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-white mr-1"}),oe(" Auto Salvage ")],-1)),b(s).isAutoSalvageEnabled?(h(),v("span",wxe)):Q("",!0)],2)):Q("",!0),a("div",Exe,[Ye(BT,{selectedSort:b(E),sortOptions:b(C),"onUpdate:selectedSort":Z[2]||(Z[2]=me=>E.value=me)},null,8,["selectedSort","sortOptions"])]),a("div",Cxe,[Ye(VT,{selectedFilter:b(A),filterOptions:b(k),"onUpdate:selectedFilter":Z[3]||(Z[3]=me=>A.value=me)},null,8,["selectedFilter","filterOptions"])]),a("button",{onClick:Z[4]||(Z[4]=me=>{d.value=!0,m.value=!1}),class:"px-3 py-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 rounded-lg text-sm text-white flex items-center justify-between transition-all"},Z[19]||(Z[19]=[a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-funnel text-white mr-1"}),oe(" Filter Items ")],-1)]))])])):Q("",!0)]),a("div",Sxe,[a("div",Txe,[a("div",Axe,[a("div",Ixe,[a("div",Pxe,[Z[20]||(Z[20]=a("span",{class:"i-heroicons-droplet text-green-600 dark:text-green-400 mr-1"},null,-1)),a("span",Mxe,_(b(o))+" Honeydew ",1)]),a("div",$xe,[Z[21]||(Z[21]=a("span",{class:"i-heroicons-beaker text-amber-600 dark:text-amber-400 mr-1"},null,-1)),a("span",Rxe,_(b(r).formattedPheromoneEssence)+" Essence ",1)])]),a("div",Lxe,[a("span",null,_(b(s).inventory.length)+"/"+_(b(s).maxInventorySlots.toNumber()),1),Z[22]||(Z[22]=oe(" slots used "))])]),a("div",Dxe,[a("div",Nxe,[a("button",{onClick:Z[5]||(Z[5]=me=>f.value=!f.value),class:"px-3 py-1.5 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 rounded-lg text-sm text-white flex items-center transition-all"},Z[23]||(Z[23]=[a("span",{class:"i-heroicons-bars-3 text-white mr-1"},null,-1),oe(" Actions "),a("span",{class:"i-heroicons-chevron-down text-white ml-1"},null,-1)])),f.value?(h(),v("div",Oxe,[a("div",Fxe,[b(s).isSalvageAllUnlocked?(h(),v("button",{key:0,onClick:I,class:"w-full px-3 py-2 hover:bg-amber-100/70 dark:hover:bg-amber-900/30 rounded-lg text-left text-sm text-amber-800 dark:text-amber-300 flex items-center justify-between"},Z[24]||(Z[24]=[a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-amber-600 dark:text-amber-400 mr-2"}),oe(" Salvage All ")],-1)]))):Q("",!0),b(s).isAutoSalvageUnlocked?(h(),v("button",{key:1,onClick:Z[6]||(Z[6]=me=>{b(s).toggleAutoSalvage(),f.value=!1}),class:"w-full px-3 py-2 hover:bg-amber-100/70 dark:hover:bg-amber-900/30 rounded-lg text-left text-sm text-amber-800 dark:text-amber-300 flex items-center justify-between"},[Z[25]||(Z[25]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-beaker text-amber-600 dark:text-amber-400 mr-2"}),oe(" Auto Salvage ")],-1)),b(s).isAutoSalvageEnabled?(h(),v("span",Uxe)):Q("",!0)])):Q("",!0),a("button",{onClick:Z[7]||(Z[7]=me=>{d.value=!0,f.value=!1}),class:"w-full px-3 py-2 hover:bg-amber-100/70 dark:hover:bg-amber-900/30 rounded-lg text-left text-sm text-amber-800 dark:text-amber-300 flex items-center"},Z[26]||(Z[26]=[a("span",{class:"i-heroicons-funnel text-amber-600 dark:text-amber-400 mr-2"},null,-1),oe(" Filter Items ")]))])])):Q("",!0)]),a("div",qxe,[Ye(BT,{selectedSort:b(E),sortOptions:b(C),"onUpdate:selectedSort":Z[8]||(Z[8]=me=>E.value=me)},null,8,["selectedSort","sortOptions"]),Ye(VT,{selectedFilter:b(A),filterOptions:b(k),"onUpdate:selectedFilter":Z[9]||(Z[9]=me=>A.value=me)},null,8,["selectedFilter","filterOptions"])])])])]),L.value>0?(h(),v("div",Bxe,[a("span",Vxe,[Z[27]||(Z[27]=a("span",{class:"i-heroicons-eye-slash mr-1"},null,-1)),oe(" "+_(L.value)+" item"+_(L.value>1?"s":"")+" hidden by filter ",1)]),a("button",{onClick:Z[10]||(Z[10]=me=>A.value="none"),class:"text-xs bg-amber-600 hover:bg-amber-700 text-white px-2 py-0.5 rounded-md flex items-center transition-colors"},Z[28]||(Z[28]=[a("span",{class:"i-heroicons-x-mark text-white mr-1 text-xs"},null,-1),oe(" Clear Filter ")]))])):Q("",!0),a("div",Hxe,[(h(!0),v(De,null,Ge(R.value,(me,re)=>(h(),v("div",{key:re,class:K(["relative aspect-square overflow-visible cursor-pointer transition-all duration-200 border-4 rounded-lg hover:scale-105 transform",b(n).getRarityBackground(me.rarity)]),style:{"image-rendering":"pixelated","box-shadow":"inset 0 0 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.2)","border-top-color":"#f0d4a0","border-left-color":"#f0d4a0","border-right-color":"#c2924e","border-bottom-color":"#c2924e"},onClick:J=>e.onItemClick&&e.onItemClick(me),ref_for:!0,ref:J=>{J&&(x.value[me.id]=J)}},[a("div",jxe,[M(me.id)?(h(),v("img",{key:0,src:M(me.id),alt:me.name,class:"w-full h-full object-contain p-2 opacity-70"},null,8,Wxe)):(h(),v("span",zxe))]),a("div",Qxe,[(h(!0),v(De,null,Ge(b(s).getItemIndicators(me.id),J=>(h(),Tt(cxe,{key:J.id,indicator:J,class:"absolute top-2 left-2 transform -translate-x-1/2 -translate-y-1/2"},null,8,["indicator"]))),128))]),a("div",Kxe,[a("div",Yxe,[a("div",Xxe," Lvl "+_(me.level.toString()),1),me.isLocked?(h(),v("div",Jxe,Z[29]||(Z[29]=[a("span",{class:"i-heroicons-lock-closed"},null,-1)]))):Q("",!0),e.isItemEquipped&&e.isItemEquipped(me.id)?(h(),v("div",Zxe,Z[30]||(Z[30]=[a("span",{class:"i-heroicons-check"},null,-1)]))):Q("",!0)]),a("div",eke,[a("div",tke,[a("div",{class:"bg-amber-500 dark:bg-amber-600 h-1.5 rounded-full",style:yt(`width: ${me.xp.div(me.maxXp).mul(100).toNumber()}%`)},null,4)])]),a("div",ske,[a("div",{class:K(["text-base font-bold line-clamp-2 sm:text-xs md:text-sm lg:text-sm",b(n).getRarityColor(me.rarity)])},_(P(me)),3)])])],10,Gxe))),128)),(h(!0),v(De,null,Ge(b(s).maxInventorySlots.toNumber()-b(s).inventory.length,me=>(h(),v("div",{key:`empty-${me}`,class:"relative aspect-square border-4 rounded-lg border-amber-300 dark:border-amber-700/50 bg-amber-100/40 dark:bg-amber-900/30 border-dashed",style:{"image-rendering":"pixelated","box-shadow":"inset 0 0 8px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.1)","border-top-color":"#f0d4a0","border-left-color":"#f0d4a0","border-right-color":"#c2924e","border-bottom-color":"#c2924e"}},Z[31]||(Z[31]=[a("div",{class:"absolute inset-0 flex items-center justify-center text-amber-400 dark:text-amber-500/60"},[a("div",{class:"i-heroicons-plus text-2xl animate-pulse"})],-1)])))),128))])]),Ye(X1e,{"is-open":d.value,onClose:Z[11]||(Z[11]=me=>d.value=!1)},null,8,["is-open"]),p.value?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/60 flex items-start justify-center z-50 p-4 backdrop-blur-sm modal-backdrop overflow-y-auto","data-modal-backdrop":"true",onClick:Z[12]||(Z[12]=xt(me=>{b(c)(()=>{p.value=!1,g.value=null})},["self"])),onTouchmove:Z[13]||(Z[13]=xt((...me)=>b(u)&&b(u)(...me),["self"]))},[a("div",{class:K(["bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm p-6 rounded-xl shadow-lg max-w-md w-full mx-auto mt-20 my-4",{"animate-fadeOut":b(i)}])},[a("div",{class:"flex justify-between items-center mb-4"},[Z[33]||(Z[33]=a("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-200"},"Salvage All Items",-1)),a("button",{onClick:U,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors"},Z[32]||(Z[32]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))]),b(s).isSalvageAllUnlocked?g.value?(h(),v("div",lke,[a("div",{class:K(["p-4 mb-4 rounded-lg text-sm",g.value.success?"bg-green-100/80 text-green-800 dark:bg-green-900/40 dark:text-green-400 backdrop-blur-sm":"bg-red-100/80 text-red-800 dark:bg-red-900/40 dark:text-red-400 backdrop-blur-sm"])},_(g.value.message),3),a("div",{class:"mt-6 flex justify-end"},[a("button",{onClick:U,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors"}," Close ")])])):(h(),v("div",rke,[Z[37]||(Z[37]=a("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," This will salvage all unlocked items that are not equipped. Locked items will be preserved. ",-1)),a("div",oke,[a("button",{onClick:U,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors"}," Cancel "),a("button",{onClick:D,disabled:w.value,class:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center"},[w.value?(h(),v("span",ake)):Q("",!0),Z[35]||(Z[35]=a("span",{class:"i-heroicons-beaker mr-1"},null,-1)),Z[36]||(Z[36]=oe(" Confirm Salvage "))],8,ike)])])):(h(),v("div",nke,[Z[34]||(Z[34]=js('<div class="p-4 mb-4 rounded-lg bg-amber-100/80 text-amber-800 dark:bg-amber-900/40 dark:text-amber-400 backdrop-blur-sm" data-v-0513be9d><div class="flex items-start" data-v-0513be9d><span class="i-heroicons-exclamation-triangle mr-2 mt-0.5" data-v-0513be9d></span><div data-v-0513be9d><p class="font-medium" data-v-0513be9d>Upgrade Required</p><p class="text-sm mt-1" data-v-0513be9d> You need to purchase the &quot;Mass Salvaging&quot; upgrade from the prestige shop to use this feature. </p></div></div></div>',1)),a("div",{class:"mt-6 flex justify-end"},[a("button",{onClick:U,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors"}," Close ")])]))],2)],32)):Q("",!0)]))}}),HT=Ct(cke,[["__scopeId","data-v-0513be9d"]]);function uke(){const t=hn(),e=Ls(),s=Y(!1),n=Y(null),r=(c,u=l(1))=>{const m={common:1,uncommon:2,rare:4,epic:8,legendary:16,mythic:32,divine:64}[c.rarity]||1,f=l(1).add(c.level.mul(.1));return l(10).mul(m).mul(f).mul(u).ceil()};return{isLeveling:s,levelingResult:n,calculateHoneydewCost:r,canAffordLevelUp:(c,u=l(1))=>{const d=r(c,u);return e.honeydew.gte(d)},levelUpWithHoneydew:async(c,u=l(1))=>{s.value=!0,n.value=null;try{const d=r(c,u);if(e.honeydew.lt(d))return n.value={success:!1,message:"Not enough honeydew"},!1;e.honeydew=e.honeydew.sub(d);const m=t.addItemXp(c,u);return n.value={success:!0,message:m.leveledUp?`Level up! Item is now level ${m.newLevel.toString()}`:"Added XP to item",leveledUp:m.leveledUp},!0}catch{return n.value={success:!1,message:"An error occurred"},!1}finally{s.value=!1}}}}const dke={key:0,class:"mt-4"},mke={class:"space-y-2"},fke={class:"font-medium"},pke={class:"text-amber-700 dark:text-amber-300"},vL=Je({__name:"BugsWhoDropItem",props:{item:{}},setup(t){const e=Hr(),s=Ts();Vn();const n=i=>e.getBugsByItemId(i),r=(i,c)=>Lt(e.getBugDropChance(i,c)),o=i=>s.getRarityColor(i);return(i,c)=>n(i.item.id).length>0?(h(),v("div",dke,[a("h3",{class:K(["font-medium mb-2",o(i.item.rarity)])},"Bugs that drop this item",2),a("div",mke,[(h(!0),v(De,null,Ge(n(i.item.id),u=>(h(),v("div",{key:u.id,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",fke,_(u.name),1),a("div",pke,_(r(i.item.id,u.id)),1)]))),128))])])):Q("",!0)}}),hke={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-auto border border-purple-200 dark:border-purple-700 flex flex-col max-h-[90vh]"},gke={class:"p-5 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10 rounded-t-xl"},vke={class:"flex justify-between items-start"},bke={class:"flex items-center gap-3"},yke=["src","alt"],_ke={key:0,class:"i-heroicons-lock-closed text-amber-500 ml-1"},xke={class:"p-5 overflow-y-auto overflow-x-hidden flex-grow"},kke={key:2,class:"p-3 mb-4 rounded-lg bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},wke={class:"mb-4"},Eke={class:"flex justify-between items-center mb-1"},Cke={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Ske={class:"text-xs text-gray-500 dark:text-gray-400"},Tke={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Ake={class:"flex justify-end mt-1"},Ike={class:"text-xs text-gray-600 dark:text-gray-400"},Pke={class:"font-medium"},Mke={key:3,class:"mt-2 mb-3"},$ke={class:"flex justify-between items-center mb-1"},Rke={class:"text-xs text-amber-600 dark:text-amber-400 font-medium"},Lke={class:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},Dke={key:4,class:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg"},Nke={class:"flex items-center justify-between mb-2"},Oke={class:"grid grid-cols-2 sm:grid-cols-3 gap-1"},Fke=["onClick"],Uke={class:"col-span-2 grid grid-cols-2 gap-1"},qke=["disabled"],Bke={class:"flex items-center justify-center"},Vke={key:0,class:"i-heroicons-check-circle ml-1 text-white"},Hke={class:"absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded p-1 mb-1 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-20"},Gke={key:0,class:"text-red-400 mt-1"},jke={class:"flex items-center justify-center"},Wke={key:0,class:"i-heroicons-check-circle ml-1 text-white"},zke={class:"absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded p-1 mb-1 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-20"},Qke={class:"flex justify-between items-center text-sm mb-3"},Kke={class:"font-medium text-amber-700 dark:text-amber-400 flex items-center"},Yke={class:"text-xs text-gray-500 dark:text-gray-400 mb-3 flex justify-between items-center"},Xke={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mb-3"},Jke={class:"flex justify-between"},Zke={class:"font-medium"},ewe={key:1,class:"mb-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3"},twe={class:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2 flex items-center justify-between"},swe={class:"flex items-center"},nwe={key:0},rwe={key:1},owe={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},iwe={key:0,class:"mb-3"},awe={class:"grid grid-cols-2 gap-x-2 gap-y-1"},lwe={key:0,class:"text-xs text-red-600 dark:text-red-400 flex items-center"},cwe={key:1,class:"text-xs text-green-600 dark:text-green-400 flex items-center"},uwe={key:2,class:"text-xs text-blue-600 dark:text-blue-400 flex items-center"},dwe={key:3,class:"text-xs text-purple-600 dark:text-purple-400 flex items-center"},mwe={key:1,class:"mb-3"},fwe={class:"grid grid-cols-2 gap-x-2 gap-y-1"},pwe={key:0,class:"text-xs text-red-600 dark:text-red-400 flex items-center"},hwe={key:1,class:"text-xs text-green-600 dark:text-green-400 flex items-center"},gwe={key:2,class:"text-xs text-blue-600 dark:text-blue-400 flex items-center"},vwe={key:3,class:"text-xs text-purple-600 dark:text-purple-400 flex items-center"},bwe={key:2,class:"mb-3"},ywe={class:"grid grid-cols-1 gap-1"},_we={key:3,class:"mb-3"},xwe={class:"grid grid-cols-1 gap-1"},kwe={key:4,class:"mb-3"},wwe={class:"grid grid-cols-1 gap-1"},Ewe={key:5,class:"mb-3"},Cwe={class:"grid grid-cols-1 gap-1"},Swe=["disabled"],Twe={key:0,class:"i-heroicons-arrow-path animate-spin mr-2"},Awe={class:"space-y-4"},Iwe={class:"text-sm text-gray-600 dark:text-gray-400"},Pwe={key:0,class:"space-y-2"},Mwe={class:"grid grid-cols-2 gap-2"},$we={key:0,class:"text-sm text-red-600 dark:text-red-400"},Rwe={key:1,class:"text-sm text-green-600 dark:text-green-400"},Lwe={key:2,class:"text-sm text-blue-600 dark:text-blue-400"},Dwe={key:3,class:"text-sm text-purple-600 dark:text-purple-400"},Nwe={key:1,class:"space-y-2"},Owe={class:"grid grid-cols-1 gap-1"},Fwe={key:2,class:"space-y-2"},Uwe={class:"grid grid-cols-1 gap-1"},qwe={class:"space-y-2"},Bwe={class:"text-sm text-gray-600 dark:text-gray-400"},Vwe={class:"mt-2 p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20"},Hwe={class:"text-amber-700 dark:text-amber-400 flex items-center"},Gwe={class:"font-semibold"},jwe={class:"p-5 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800 z-10 rounded-b-xl"},Wwe={key:0,class:"flex flex-col gap-3"},zwe={class:"flex gap-3"},Qwe=["disabled"],Kwe={key:0,class:"i-heroicons-lock-closed mr-1"},Ywe={key:1,class:"i-heroicons-lock-open mr-1"},Xwe={class:"flex gap-3"},Jwe={class:"flex gap-3"},Zwe={key:1,class:"flex flex-col gap-3"},e2e={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},t2e={class:"flex gap-3"},s2e=["disabled"],n2e={key:0,class:"i-heroicons-arrow-path animate-spin mr-2"},r2e=Je({__name:"ItemModal",props:{item:{},isItemEquipped:{type:Function},onEquipAction:{type:Function},onClose:{type:Function}},setup(t){const e=t,s=Ts(),n=hn(),r=Y(!1),o=Y(null),i=Y(!1),{handleClose:c,preventBackgroundTouchMove:u}=Gr(),{formattedHoneydew:d}=If(),{isLeveling:m,levelingResult:f,calculateHoneydewCost:p,canAffordLevelUp:g,levelUpWithHoneydew:w}=uke(),C=Y(!1),E=Y(l(1)),k=[{value:l(1),label:"1 XP"},{value:l(5),label:"5 XP"},{value:l(10),label:"10 XP"},{value:l(50),label:"50 XP"},{value:l(100),label:"100 XP"}],A=q(()=>{const ne=Ls().honeydew;let he=l(1),ye=p(e.item,he);if(ne.lt(ye))return l(0);let ae=l(1),de=ne;for(;ae.lt(de);){const Me=ae.add(de).div(2).floor();ye=p(e.item,Me),ye.lte(ne)?ae=Me.add(1):de=Me}return ae.sub(1).max(1)});q(()=>!k.some(G=>G.value.eq(E.value)));const S=q(()=>{const G=p(e.item,Te.value),ne=Ls();return G.lte(ne.honeydew)}),T=()=>{const G=Te.value;if(G.lte(0))return;const ne=p(e.item,G),he=Ls();if(ne.gt(he.honeydew)){L();return}E.value=G},R=q(()=>E.value.eq(Te.value)),L=()=>{const G=A.value;G.lte(0)||(E.value=G)},P=q(()=>p(e.item,E.value)),I=q(()=>be(P.value)),D=q(()=>g(e.item,E.value)),U=async()=>{await w(e.item,E.value)},M=()=>{C.value=!C.value,C.value&&(f.value=null)},x=G=>{G.key==="Escape"&&c(e.onClose,0)};Et(()=>{window.addEventListener("keydown",x)}),xn(()=>{window.removeEventListener("keydown",x)});const $=()=>{e.onEquipAction(e.item)},Z=()=>{if(Re(e.item.id)){o.value={success:!1,message:"This item is locked. Unlock it first to salvage."};return}r.value=!0},me=async()=>{i.value=!0,o.value=null;const G=n.inventory.findIndex(ne=>ne.id===e.item.id);if(G!==-1){const ne=n.salvageItem(G);o.value=ne,ne.success&&(await new Promise(he=>setTimeout(he,1500)),e.onClose())}else o.value={success:!1,message:"Item not found in inventory"};r.value=!1,i.value=!1},re=()=>{r.value=!1},J=q(()=>s.getFormattedItemName(e.item)),le=q(()=>n.calculateSalvageValue(e.item)),se=q(()=>!e.item.maxXp||e.item.maxXp.eq(0)?"0%":s.formatXpProgress(e.item.xp,e.item.maxXp)),z=q(()=>!e.item.maxXp||e.item.maxXp.eq(0)?0:Math.min(100,e.item.xp.div(e.item.maxXp).mul(100).toNumber())),ce=q(()=>Se.fromNumber(n.inventory.length).gte(n.maxInventorySlots)),pe=q(()=>e.isItemEquipped(e.item.id)&&ce.value),_e=q(()=>s.getItemStats(e.item)),Ee=q(()=>s.getItemProductionModifiers(e.item)),Ue=q(()=>s.getItemSpecialModifiers(e.item)),ze=()=>{const G=n.isItemLocked(e.item.id);n.setItemLockStatus(e.item.id,!G),e.item.isLocked=!G},Re=G=>(n.migrateEquippedItemsLockStatus(),n.isItemLocked(G)),$e=q(()=>be(e.item.level,0)),Ce=q(()=>be(e.item.xp,0)),Oe=q(()=>be(e.item.maxXp,0)),ve=q(()=>be(le.value,0)),fe=q(()=>E.value.eq(A.value)),X=q(()=>be(A.value,0)),H=q(()=>{const G=e.item.xp.add(E.value);return e.item.maxXp.eq(0)?0:G.gte(e.item.maxXp)?100:Math.min(100,G.div(e.item.maxXp).mul(100).toNumber())}),W=q(()=>{if(!D.value)return 0;let G=E.value,ne=new Se(e.item.xp),he=new Se(e.item.maxXp),ye=new Se(e.item.level),ae=0;for(;G.gt(0);){const de=he.sub(ne);if(G.gte(de)?(ae++,ye=ye.add(1),G=G.sub(de),ne=l(0),he=s.calculateMaxXp(ye,e.item.rarity)):(ne=ne.add(G),G=l(0)),ae>100)break}return ae}),ge=q(()=>W.value===0?"":`+${W.value} level${W.value>1?"s":""}`),Te=q(()=>e.item.maxXp.sub(e.item.xp)),Ie=q(()=>be(Te.value,0)),Ne=q(()=>{if(W.value>0)return l(0);const G=Te.value.sub(E.value);return G.lt(0)?l(0):G}),je=q(()=>be(Ne.value,0)),N=q(()=>{const G={...e.item,level:e.item.level.add(1)},ne=s.getItemStats(e.item),he=s.getItemStats(G);if(!ne||!he)return null;const ye={};return Object.keys(he).forEach(ae=>{const de=ne[ae]||l(0),Me=he[ae]||l(0);ye[ae]=Me.sub(de)}),{current:ne,next:he,diff:ye}}),ue=q(()=>{const G={...e.item,level:e.item.level.add(1)},ne=s.getItemProductionModifiers(e.item),he=s.getItemProductionModifiers(G);if(!ne||!he)return null;const ye={};return Object.keys(he).forEach(ae=>{const de=ne[ae]||l(1),Me=he[ae]||l(1);ye[ae]=Me.sub(de).mul(100)}),{current:ne,next:he,diff:ye}}),j=q(()=>{const G={...e.item,level:e.item.level.add(1)},ne=s.getItemSpecialModifiers(e.item),he=s.getItemSpecialModifiers(G);if(!ne||!he)return null;const ye={};return Object.keys(he).forEach(ae=>{const de=ne[ae]||l(1),Me=he[ae]||l(1);ye[ae]=Me.sub(de).mul(100)}),{current:ne,next:he,diff:ye}}),B=q(()=>R.value||D.value&&W.value>0),ie=q(()=>{if(W.value<=1)return null;const G=e.item.level.add(W.value),ne={...e.item,level:G},he=s.getItemStats(e.item),ye=s.getItemStats(ne),ae=s.getItemProductionModifiers(e.item),de=s.getItemProductionModifiers(ne),Me=s.getItemSpecialModifiers(e.item),Le=s.getItemSpecialModifiers(ne),it={},Ze={},pt={};return he&&ye&&Object.keys(ye).forEach(ft=>{const Ve=he[ft]||l(0),ke=ye[ft]||l(0);it[ft]=ke.sub(Ve)}),ae&&de&&Object.keys(de).forEach(ft=>{const Ve=ae[ft]||l(1),ke=de[ft]||l(1);Ze[ft]=ke.sub(Ve).mul(100)}),Me&&Le&&Object.keys(Le).forEach(ft=>{const Ve=Me[ft]||l(1),ke=Le[ft]||l(1);pt[ft]=ke.sub(Ve).mul(100)}),{levels:W.value,finalLevel:G,stats:{current:he,final:ye,diff:it},prodMods:{current:ae,final:de,diff:Ze},specialMods:{current:Me,final:Le,diff:pt}}}),V=Y(!1),O=()=>{V.value=!V.value},te=G=>{try{return new URL(Object.assign({"../assets/items/ascension_matrix.png":Ig,"../assets/items/beetle_shell_shield.png":Pg,"../assets/items/boss_chitinous_blade.png":Mg,"../assets/items/boss_cosmic_nucleus.png":$g,"../assets/items/boss_divine_mandible.png":Rg,"../assets/items/boss_hivemind_helm.png":Lg,"../assets/items/boss_hivemind_synapse.png":Dg,"../assets/items/boss_mandible_gauntlets.png":Ng,"../assets/items/boss_nebula_stinger.png":Og,"../assets/items/boss_omega_particle.png":Fg,"../assets/items/boss_pheromone_catalyst.png":Ug,"../assets/items/boss_primordial_chitin_plate.png":qg,"../assets/items/boss_quantum_core.png":Bg,"../assets/items/boss_quantum_stinger.png":Vg,"../assets/items/boss_reality_fragment.png":Hg,"../assets/items/boss_reality_thread.png":Gg,"../assets/items/boss_royal_carapace.png":jg,"../assets/items/boss_star_eater_mandible.png":Wg,"../assets/items/boss_temporal_chitin.png":zg,"../assets/items/boss_void_essence_core.png":Qg,"../assets/items/chronos_shell.png":Kg,"../assets/items/common_ant_training_kit.png":Yg,"../assets/items/cosmic_duality.png":Xg,"../assets/items/divine_ant_queen_crown.png":Jg,"../assets/items/divine_eternity_weave.png":Zg,"../assets/items/divine_genesis_claw.png":ev,"../assets/items/divine_infinity_shard.png":tv,"../assets/items/divine_transcendence_core.png":sv,"../assets/items/divine_universal_amplifier.png":nv,"../assets/items/emperor_toxin.png":rv,"../assets/items/entropy_fangs.png":ov,"../assets/items/epic_ant_commander_armor.png":iv,"../assets/items/eternity_weave.png":av,"../assets/items/evolution_crystal.png":lv,"../assets/items/exoskeleton_plate.png":cv,"../assets/items/foraging_tools.png":uv,"../assets/items/genesis_claw.png":dv,"../assets/items/hive_amplifier.png":mv,"../assets/items/infinity_shard.png":fv,"../assets/items/infinity_shard_old.png":pv,"../assets/items/leaf_cloak.png":hv,"../assets/items/mandible_crusher.png":gv,"../assets/items/mandible_crusher_old.png":vv,"../assets/items/mythic_ascension_matrix.png":bv,"../assets/items/mythic_catalyst.png":yv,"../assets/items/mythic_swarm_controller.png":_v,"../assets/items/omnipotent_catalyst.png":xv,"../assets/items/pebble_hammer.png":kv,"../assets/items/quantum_mandibles.png":wv,"../assets/items/rare_ant_tactician_helm.png":Ev,"../assets/items/reinforced_mandibles.png":Cv,"../assets/items/resin_helmet.png":Sv,"../assets/items/thorn_spear.png":Tv,"../assets/items/thorn_spear_old.png":Av,"../assets/items/training_armor.png":Iv,"../assets/items/training_sword.png":Pv,"../assets/items/training_sword_old.png":Mv,"../assets/items/transcendence_core.png":$v,"../assets/items/uncommon_ant_scout_gear.png":Rv,"../assets/items/universal_amplifier.png":Lv,"../assets/items/venom_dagger.png":Dv,"../assets/items/void_reaver.png":Nv,"../assets/items/wooden_shield.png":Ov,"../assets/items/wooden_shield_old.png":Fv,"../assets/items/worker_armor.png":Uv,"../assets/items/worker_armor_old.png":qv,"../assets/items/worker_sword.png":Bv})[`../assets/items/${G}.png`],import.meta.url).href}catch{return}};return(G,ne)=>(h(),v("div",{class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm overflow-hidden modal-backdrop","data-modal-backdrop":"true",onClick:ne[1]||(ne[1]=xt(he=>b(c)(G.onClose,0),["self"])),onTouchmove:ne[2]||(ne[2]=xt((...he)=>b(u)&&b(u)(...he),["self"]))},[a("div",hke,[a("div",gke,[a("div",vke,[a("div",bke,[a("div",{class:K(["w-12 h-12 flex-shrink-0 flex items-center justify-center rounded-lg",b(s).getRarityBackground(G.item.rarity)])},[te(G.item.id)?(h(),v("img",{key:0,src:te(G.item.id),alt:G.item.name,class:"w-10 h-10 object-contain",style:{"image-rendering":"pixelated"}},null,8,yke)):(h(),v("span",{key:1,class:K(["i-heroicons-photo text-2xl",b(s).getRarityColor(G.item.rarity)])},null,2))],2),a("div",null,[a("h3",{class:K(["text-lg font-bold",b(s).getRarityColor(G.item.rarity)])},[oe(_(J.value)+" ",1),Re(G.item.id)?(h(),v("span",_ke)):Q("",!0)],2)])]),a("button",{onClick:ne[0]||(ne[0]=he=>b(c)(G.onClose,0)),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors ml-4"},ne[3]||(ne[3]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))])]),a("div",xke,[o.value?(h(),v("div",{key:0,class:K(["p-3 mb-4 rounded-lg text-sm",o.value.success?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"])},_(o.value.message),3)):Q("",!0),b(f)?(h(),v("div",{key:1,class:K(["p-3 mb-4 rounded-lg text-sm",b(f).success?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"])},_(b(f).message),3)):Q("",!0),pe.value?(h(),v("div",kke,ne[4]||(ne[4]=[a("div",{class:"flex items-start"},[a("span",{class:"i-heroicons-exclamation-triangle mr-2 mt-0.5"}),a("div",null,[a("p",{class:"font-medium"},"Warning: Inventory Full"),a("p",{class:"text-xs mt-1"},"You cannot unequip this item because your inventory is full. Free up space first. ")])],-1)]))):Q("",!0),a("div",wke,[a("div",Eke,[a("div",Cke," Level "+_($e.value),1),a("div",Ske,_(Ce.value)+" / "+_(Oe.value)+" XP ("+_(se.value)+") ",1)]),a("div",Tke,[a("div",{class:"bg-purple-600 h-2 rounded-full",style:yt({width:z.value+"%"})},null,4)]),a("div",Ake,[a("div",Ike,[ne[5]||(ne[5]=oe(" Till next level: ")),a("span",Pke,_(Ie.value)+" XP",1)])])]),D.value?(h(),v("div",Mke,[a("div",$ke,[ne[6]||(ne[6]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400"}," Projected progress: ",-1)),a("div",Rke,_(ge.value),1)]),a("div",Lke,[a("div",{class:"absolute left-0 top-0 h-full bg-purple-600 rounded-full",style:yt({width:z.value+"%"})},null,4),a("div",{class:"absolute left-0 top-0 h-full bg-amber-500 rounded-full opacity-60",style:yt({width:H.value+"%",clipPath:z.value>0?`inset(0 0 0 ${z.value}%)`:"none"})},null,4)])])):Q("",!0),C.value?(h(),v("div",Dke,[ne[36]||(ne[36]=a("div",{class:"text-sm font-medium text-amber-700 dark:text-amber-400 mb-2"},"Level up with Honeydew",-1)),a("div",Nke,[ne[11]||(ne[11]=a("div",{class:"text-xs text-gray-600 dark:text-gray-400"}," Select XP amount: ",-1)),a("div",Oke,[(h(!0),v(De,null,Ge(k.slice(0,4),he=>(h(),v("button",{key:he.label,onClick:ye=>E.value=he.value,class:K(["px-2 py-1 text-xs rounded",E.value.eq(he.value)?"bg-amber-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},_(he.label),11,Fke))),128)),a("div",Uke,[a("button",{onClick:T,disabled:!S.value,class:K(["px-2 py-1 text-xs rounded group relative truncate",R.value?"bg-amber-600 text-white":S.value?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 opacity-70 cursor-not-allowed"])},[a("span",Bke,[ne[7]||(ne[7]=a("span",{class:"i-heroicons-arrow-up-circle mr-1"},null,-1)),ne[8]||(ne[8]=oe(" Level Up ")),R.value?(h(),v("span",Vke)):Q("",!0)]),a("div",Hke,[oe(_(Ie.value)+" XP (Exact amount to level up) ",1),S.value?Q("",!0):(h(),v("div",Gke,"Not enough honeydew"))])],10,qke),a("button",{onClick:L,class:K(["px-2 py-1 text-xs rounded group relative",fe.value?"bg-amber-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},[a("span",jke,[ne[9]||(ne[9]=a("span",{class:"i-heroicons-beaker-solid mr-1"},null,-1)),ne[10]||(ne[10]=oe(" Max XP ")),fe.value?(h(),v("span",Wke)):Q("",!0)]),a("div",zke,_(X.value)+" XP (All available honeydew) ",1)],2)])])]),a("div",Qke,[ne[13]||(ne[13]=a("div",{class:"text-gray-600 dark:text-gray-400"},"Cost:",-1)),a("div",Kke,[ne[12]||(ne[12]=a("span",{class:"i-heroicons-beaker-solid mr-1"},null,-1)),oe(" "+_(I.value)+" Honeydew ",1)])]),a("div",Yke,[ne[14]||(ne[14]=a("span",null,"Your honeydew:",-1)),a("span",null,_(b(d)),1)]),D.value&&W.value===0?(h(),v("div",Xke,[a("div",Jke,[ne[15]||(ne[15]=a("span",null,"After applying:",-1)),a("span",Zke,_(je.value)+" XP till next level",1)])])):Q("",!0),B.value?(h(),v("div",ewe,[a("div",twe,[a("div",swe,[ne[16]||(ne[16]=a("span",{class:"i-heroicons-arrow-trending-up mr-1"},null,-1)),ie.value?(h(),v("span",nwe," Level Up Preview (+"+_(ie.value.levels)+" levels) ",1)):(h(),v("span",rwe," Level Up Preview "))]),ie.value?(h(),v("div",owe," To level "+_(b(be)(ie.value.finalLevel,0)),1)):Q("",!0)]),!ie.value&&N.value&&Object.keys(N.value.diff).length>0?(h(),v("div",iwe,[ne[21]||(ne[21]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Stats:",-1)),a("div",awe,[N.value.diff.damage?(h(),v("div",lwe,[ne[17]||(ne[17]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Damage: +"+_(b(be)(N.value.diff.damage,1)),1)])):Q("",!0),N.value.diff.health?(h(),v("div",cwe,[ne[18]||(ne[18]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Health: +"+_(b(be)(N.value.diff.health,1)),1)])):Q("",!0),N.value.diff.defense?(h(),v("div",uwe,[ne[19]||(ne[19]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Defense: +"+_(b(be)(N.value.diff.defense,1)),1)])):Q("",!0),N.value.diff.regen?(h(),v("div",dwe,[ne[20]||(ne[20]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Regen: +"+_(b(be)(N.value.diff.regen,1)),1)])):Q("",!0)])])):Q("",!0),ie.value&&ie.value.stats.diff&&Object.keys(ie.value.stats.diff).length>0?(h(),v("div",mwe,[ne[26]||(ne[26]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Stats:",-1)),a("div",fwe,[ie.value.stats.diff.damage?(h(),v("div",pwe,[ne[22]||(ne[22]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Damage: +"+_(b(be)(ie.value.stats.diff.damage,1)),1)])):Q("",!0),ie.value.stats.diff.health?(h(),v("div",hwe,[ne[23]||(ne[23]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Health: +"+_(b(be)(ie.value.stats.diff.health,1)),1)])):Q("",!0),ie.value.stats.diff.defense?(h(),v("div",gwe,[ne[24]||(ne[24]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Defense: +"+_(b(be)(ie.value.stats.diff.defense,1)),1)])):Q("",!0),ie.value.stats.diff.regen?(h(),v("div",vwe,[ne[25]||(ne[25]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" Regen: +"+_(b(be)(ie.value.stats.diff.regen,1)),1)])):Q("",!0)])])):Q("",!0),!ie.value&&ue.value&&Object.keys(ue.value.diff).length>0?(h(),v("div",bwe,[ne[28]||(ne[28]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Production Modifiers:",-1)),a("div",ywe,[(h(!0),v(De,null,Ge(Object.entries(ue.value.diff),([he,ye])=>(h(),v("div",{key:he,class:"text-xs text-amber-600 dark:text-amber-400 flex items-center"},[ne[27]||(ne[27]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" "+_(he.charAt(0).toUpperCase()+he.slice(1))+": +"+_(b(be)(ye,1))+"% increase ",1)]))),128))])])):Q("",!0),ie.value&&ie.value.prodMods.diff&&Object.keys(ie.value.prodMods.diff).length>0?(h(),v("div",_we,[ne[30]||(ne[30]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Production Modifiers:",-1)),a("div",xwe,[(h(!0),v(De,null,Ge(Object.entries(ie.value.prodMods.diff),([he,ye])=>(h(),v("div",{key:he,class:"text-xs text-amber-600 dark:text-amber-400 flex items-center"},[ne[29]||(ne[29]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" "+_(he.charAt(0).toUpperCase()+he.slice(1))+": +"+_(b(be)(ye,1))+"% increase ",1)]))),128))])])):Q("",!0),!ie.value&&j.value&&Object.keys(j.value.diff).length>0?(h(),v("div",kwe,[ne[32]||(ne[32]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Special Modifiers:",-1)),a("div",wwe,[(h(!0),v(De,null,Ge(Object.entries(j.value.diff),([he,ye])=>(h(),v("div",{key:he,class:"text-xs text-indigo-600 dark:text-indigo-400 flex items-center"},[ne[31]||(ne[31]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" "+_(he==="epBoost"?"EP Gain":he)+": +"+_(b(be)(ye,1))+"% increase ",1)]))),128))])])):Q("",!0),ie.value&&ie.value.specialMods.diff&&Object.keys(ie.value.specialMods.diff).length>0?(h(),v("div",Ewe,[ne[34]||(ne[34]=a("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Special Modifiers:",-1)),a("div",Cwe,[(h(!0),v(De,null,Ge(Object.entries(ie.value.specialMods.diff),([he,ye])=>(h(),v("div",{key:he,class:"text-xs text-indigo-600 dark:text-indigo-400 flex items-center"},[ne[33]||(ne[33]=a("span",{class:"i-heroicons-plus-small mr-0.5"},null,-1)),oe(" "+_(he==="epBoost"?"EP Gain":he)+": +"+_(b(be)(ye,1))+"% increase ",1)]))),128))])])):Q("",!0)])):Q("",!0),a("button",{onClick:U,disabled:!D.value||b(m),class:K(["w-full py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center",D.value&&!b(m)?"bg-amber-600 hover:bg-amber-700 text-white":"bg-gray-400 text-white cursor-not-allowed"])},[b(m)?(h(),v("span",Twe)):Q("",!0),ne[35]||(ne[35]=oe(" Apply Honeydew "))],10,Swe)])):Q("",!0),V.value?(h(),Tt(vL,{key:5,item:G.item,class:"mt-4"},null,8,["item"])):Q("",!0),a("div",Awe,[a("p",Iwe,_(G.item.description),1),_e.value?(h(),v("div",Pwe,[ne[37]||(ne[37]=a("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Stats:",-1)),a("div",Mwe,[_e.value.damage?(h(),v("div",$we," Damage: +"+_(b(be)(_e.value.damage,1)),1)):Q("",!0),_e.value.health?(h(),v("div",Rwe," Health: +"+_(b(be)(_e.value.health,1)),1)):Q("",!0),_e.value.defense?(h(),v("div",Lwe," Defense: +"+_(b(be)(_e.value.defense,1)),1)):Q("",!0),_e.value.regen?(h(),v("div",Dwe," Regen: +"+_(b(be)(_e.value.regen,1)),1)):Q("",!0)])])):Q("",!0),Ee.value?(h(),v("div",Nwe,[ne[38]||(ne[38]=a("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Production Modifiers:",-1)),a("div",Owe,[(h(!0),v(De,null,Ge(Object.entries(Ee.value),([he,ye])=>(h(),v("div",{key:he,class:"text-sm text-amber-600 dark:text-amber-400"},_(he.charAt(0).toUpperCase()+he.slice(1))+": "+_(ye.minus(1).mul(100).toFixed(1))+"% increase ",1))),128))])])):Q("",!0),Ue.value?(h(),v("div",Fwe,[ne[39]||(ne[39]=a("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Special Modifiers:",-1)),a("div",Uwe,[(h(!0),v(De,null,Ge(Object.entries(Ue.value),([he,ye])=>(h(),v("div",{key:he,class:"text-sm text-indigo-600 dark:text-indigo-400"},_(he==="epBoost"?"EP Gain":he)+": "+_(ye.minus(1).mul(100).toFixed(1))+"% increase ",1))),128))])])):Q("",!0),a("div",qwe,[ne[44]||(ne[44]=a("h4",{class:"font-semibold text-sm text-gray-700 dark:text-gray-300"},"Salvage Information:",-1)),a("div",Bwe,[ne[43]||(ne[43]=a("p",null,"Salvaging this item will yield:",-1)),a("div",Vwe,[a("p",Hwe,[ne[40]||(ne[40]=a("span",{class:"i-heroicons-beaker mr-1"},null,-1)),a("span",Gwe,_(ve.value),1),ne[41]||(ne[41]=a("span",{class:"ml-1"},"Pheromone Essence",-1))]),ne[42]||(ne[42]=a("p",{class:"text-xs mt-1 text-gray-500 dark:text-gray-400"}," Higher rarity items and levels yield more essence ",-1))])])])])]),a("div",jwe,[r.value?Q("",!0):(h(),v("div",Wwe,[a("div",zwe,[a("button",{onClick:$,class:K(["flex-1 px-4 py-2 text-white rounded-lg text-sm font-medium transition-colors",[G.isItemEquipped(G.item.id)&&!pe.value?"bg-purple-600 hover:bg-purple-700":G.isItemEquipped(G.item.id)&&pe.value?"bg-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"]]),disabled:pe.value},_(G.isItemEquipped(G.item.id)?"Unequip":"Equip"),11,Qwe),a("button",{onClick:ze,class:K(["px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center",Re(G.item.id)?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"])},[Re(G.item.id)?(h(),v("span",Kwe)):(h(),v("span",Ywe)),oe(" "+_(Re(G.item.id)?"Unlock":"Lock"),1)],2),a("button",{onClick:Z,class:K(["px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center",Re(G.item.id)?"opacity-50 cursor-not-allowed":""])},ne[45]||(ne[45]=[a("span",{class:"i-heroicons-beaker mr-1"},null,-1),oe(" Salvage ")]),2)]),a("div",Xwe,[a("button",{onClick:M,class:"flex-1 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-amber-900 dark:text-amber-100 rounded-lg text-sm font-medium transition-colors flex items-center justify-center"},[ne[46]||(ne[46]=a("span",{class:"i-heroicons-beaker-solid mr-1"},null,-1)),oe(" "+_(C.value?"Hide Leveling":"Level with Honeydew"),1)]),a("div",Jwe,[a("button",{onClick:O,class:"flex-1 px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center"},[ne[47]||(ne[47]=a("span",{class:"i-heroicons-bug-ant mr-1"},null,-1)),oe(" "+_(V.value?"Hide Bug Drops":"Show Bug Drops"),1)])])])])),r.value?(h(),v("div",Zwe,[a("p",e2e," Salvage "+_(G.item.name)+" (Level "+_($e.value)+") for "+_(ve.value)+" Pheromone Essence? ",1),a("div",t2e,[a("button",{onClick:re,class:"flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors"}," Cancel "),a("button",{onClick:me,disabled:i.value,class:K(["flex-1 px-4 py-2 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center",i.value?"bg-amber-400":"bg-amber-600 hover:bg-amber-700"])},[i.value?(h(),v("span",n2e)):Q("",!0),ne[48]||(ne[48]=oe(" Confirm Salvage "))],10,s2e)])])):Q("",!0)])])],32))}}),o2e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-5 mx-auto border border-purple-200 dark:border-purple-700"},i2e={class:"space-y-3"},a2e={class:"bg-purple-50 dark:bg-purple-900/30 p-3 rounded-lg border border-purple-200 dark:border-purple-700"},l2e={class:"text-sm font-bold text-purple-600 dark:text-purple-500"},c2e={class:"flex justify-end mt-4"},u2e=Je({__name:"LockedSlotModal",props:{onClose:{type:Function}},setup(t){const e=hn();return(s,n)=>(h(),v("div",{class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onKeydown:n[1]||(n[1]=Pl((...r)=>s.onClose&&s.onClose(...r),["esc"])),onClick:n[2]||(n[2]=(...r)=>s.onClose&&s.onClose(...r))},[a("div",o2e,[n[6]||(n[6]=a("h3",{class:"text-base font-bold mb-3 flex items-center text-purple-800 dark:text-purple-300 pb-2 border-b border-purple-200 dark:border-purple-700"},[a("span",{class:"i-heroicons-lock-closed text-purple-600 dark:text-purple-400 mr-2"}),oe(" Locked Equipment Slot ")],-1)),a("div",i2e,[n[4]||(n[4]=a("div",{class:"text-sm text-gray-700 dark:text-gray-300"},' This equipment slot is currently locked. You can unlock additional equipment slots through the prestige upgrade "Equipment Mastery". ',-1)),a("div",a2e,[n[3]||(n[3]=a("div",{class:"text-xs text-purple-700 dark:text-purple-400 font-medium mb-1"},"Current Progress",-1)),a("div",l2e,_(b(e).unlockedEquipmentSlots)+"/"+_(b(e).maxEquipmentSlots)+" slots unlocked ",1)]),n[5]||(n[5]=a("div",{class:"text-xs text-gray-500 dark:text-gray-400"}," Tip: Each level of Equipment Mastery unlocks one additional slot, up to a maximum of 10 bonus slots. ",-1))]),a("div",c2e,[a("button",{onClick:n[0]||(n[0]=(...r)=>s.onClose&&s.onClose(...r)),class:"py-2 px-4 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 rounded-lg text-white text-sm font-medium transition-colors"}," Close ")])])],32))}}),d2e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-5 mx-auto border border-purple-200 dark:border-purple-700"},m2e={class:"space-y-4"},f2e={class:"text-sm text-gray-700 dark:text-gray-300"},p2e={class:"font-medium text-purple-600 dark:text-purple-400"},h2e={key:0,class:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg border border-red-200 dark:border-red-800"},g2e={class:"grid grid-cols-2 gap-2"},v2e=["onClick"],b2e={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},y2e={class:"text-xs text-gray-500 dark:text-gray-400"},_2e=Je({__name:"SlotSelectionModal",props:{item:{},onClose:{type:Function},onSlotSelect:{type:Function}},setup(t){const e=t,s=hn(),n=Ts(),{handleClose:r,preventBackgroundTouchMove:o}=Gr(),i=()=>{r(e.onClose,0)},c=p=>{p.key==="Escape"&&i()};Et(()=>{window.addEventListener("keydown",c)}),xn(()=>{window.removeEventListener("keydown",c)});const u=q(()=>Se.fromNumber(s.inventory.length).gte(s.maxInventorySlots)),d=p=>s.inventory.find(w=>w.id===p)||n.getItem(p),m=p=>{const g=d(p);return g?n.getFormattedItemName(g):""},f=s.equipmentSlots.filter(p=>!p.locked);return(p,g)=>(h(),v("div",{class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm modal-backdrop","data-modal-backdrop":"true",onClick:xt(i,["self"]),onTouchmove:g[0]||(g[0]=xt((...w)=>b(o)&&b(o)(...w),["self"]))},[a("div",d2e,[g[5]||(g[5]=a("h3",{class:"text-base font-bold mb-3 flex items-center text-purple-800 dark:text-purple-300 pb-2 border-b border-purple-200 dark:border-purple-700"},[a("span",{class:"i-heroicons-squares-2x2 text-purple-600 dark:text-purple-400 mr-2"}),oe(" Select Slot to Replace ")],-1)),a("div",m2e,[a("div",f2e,[g[1]||(g[1]=oe(" All equipment slots are occupied. Select which item you want to replace with ")),a("span",p2e,_(e.item.name)+" (Lvl "+_(e.item.level.toString())+")",1),g[2]||(g[2]=oe(". "))]),u.value?(h(),v("div",h2e,g[3]||(g[3]=[js('<div class="flex items-start"><span class="i-heroicons-exclamation-triangle text-red-600 dark:text-red-400 mr-2 mt-0.5"></span><div class="flex-1"><p class="text-sm font-medium text-red-800 dark:text-red-400">Inventory Full Warning</p><p class="text-xs text-red-700 dark:text-red-300 mt-1"> Your inventory is full! If you replace an equipped item, it may be discarded as there&#39;s no space to store it. Consider freeing up space first. </p></div></div>',1)]))):Q("",!0),a("div",g2e,[(h(!0),v(De,null,Ge(b(f),(w,C)=>{var E;return h(),v("button",{key:C,onClick:k=>p.onSlotSelect(b(s).equipmentSlots.indexOf(w)),class:K(["relative p-3 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-purple-500 dark:hover:border-purple-400 transition-colors text-left",{"border-red-300 dark:border-red-700":u.value}])},[a("div",b2e,_(m(w.item)),1),a("div",y2e,_((E=d(w.item))==null?void 0:E.type),1),g[4]||(g[4]=a("div",{class:"text-[10px] text-gray-400 dark:text-gray-500 mt-1"}," Click to replace ",-1))],10,v2e)}),128))]),a("div",{class:"flex justify-end space-x-3 mt-4"},[a("button",{onClick:i,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel ")])])])],32))}}),x2e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-5 mx-auto border border-purple-200 dark:border-purple-700"},k2e={class:"space-y-4"},w2e={class:"grid grid-cols-2 gap-2 max-h-[60vh] overflow-y-auto p-1"},E2e=["onClick"],C2e={class:"text-xs text-gray-500 dark:text-gray-400"},S2e={class:"absolute top-1 right-1 flex space-x-1"},T2e={class:"bg-purple-200/90 dark:bg-purple-900/90 text-purple-900 dark:text-purple-200 rounded-md px-1.5 py-0.5 text-xs font-medium"},A2e={class:"flex justify-end space-x-3 mt-4"},I2e=Je({__name:"ItemSelectionModal",props:{onClose:{type:Function},onItemSelect:{type:Function}},setup(t){const e=hn(),s=Ts(),n=e.inventory.filter(o=>o.type==="equipment"),r=o=>s.getFormattedItemName(o);return(o,i)=>(h(),v("div",{class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onKeydown:i[1]||(i[1]=Pl((...c)=>o.onClose&&o.onClose(...c),["esc"])),onClick:i[2]||(i[2]=(...c)=>o.onClose&&o.onClose(...c))},[a("div",x2e,[i[4]||(i[4]=a("h3",{class:"text-base font-bold mb-3 flex items-center text-purple-800 dark:text-purple-300 pb-2 border-b border-purple-200 dark:border-purple-700"},[a("span",{class:"i-heroicons-squares-2x2 text-purple-600 dark:text-purple-400 mr-2"}),oe(" Select Item to Equip ")],-1)),a("div",k2e,[i[3]||(i[3]=a("div",{class:"text-sm text-gray-700 dark:text-gray-300"}," Select an item from your inventory to equip in this slot. ",-1)),a("div",w2e,[(h(!0),v(De,null,Ge(b(n),c=>(h(),v("button",{key:c.id,onClick:u=>o.onItemSelect(c),class:K(["relative p-3 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-purple-500 dark:hover:border-purple-400 transition-colors text-left",b(s).getRarityBackground(c.rarity)])},[a("div",{class:K(["text-sm font-medium",b(s).getRarityColor(c.rarity)])},_(r(c)),3),a("div",C2e,_(c.type),1),a("div",S2e,[a("div",T2e," Lvl "+_(c.level.toString()),1)])],10,E2e))),128))]),a("div",A2e,[a("button",{onClick:i[0]||(i[0]=(...c)=>o.onClose&&o.onClose(...c)),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel ")])])])],32))}}),P2e={class:"space-y-4 pb-14"},M2e={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$2e={class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-md border border-amber-200 dark:border-amber-700 overflow-hidden"},R2e={class:"p-4"},L2e={class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-md border border-amber-200 dark:border-amber-700 overflow-hidden"},D2e={class:"text-lg font-semibold text-amber-800 dark:text-amber-400 p-4 border-b border-amber-200 dark:border-amber-700"},N2e={key:0,class:"ml-2 px-2 py-0.5 text-sm rounded-full bg-purple-900/50 text-purple-300"},O2e={class:"p-4"},F2e={key:1,class:"bg-white/90 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-md border border-amber-200 dark:border-amber-700 overflow-hidden"},U2e={key:0,class:"p-4"},q2e={key:1,class:"p-4"},B2e=Je({__name:"InventoryPage",setup(t){const e=hn(),s=Ts(),{showToast:n}=Us(),{width:r}=X1(),o=q(()=>r.value<768),i=Y(null),c=Y(!1),u=Y(!1),d=Y(!1),m=Y(null);Et(()=>{o.value||e.setActiveTab("inventory")});const f=S=>{i.value=S},p=()=>{i.value=null},g=(S,T)=>{if(S.locked){c.value=!0;return}if(S.item){const R=e.inventory.find(L=>L.id===S.item);if(R)f(R);else{const L=s.getItem(S.item);L&&f({...L,level:Se.fromNumber(1),xp:Se.fromNumber(0),maxXp:s.calculateMaxXp(Se.fromNumber(1),L.rarity)})}}else m.value=T,d.value=!0},w=S=>{f(S)},C=S=>{if(A(S.id)){const T=e.equipmentSlots.findIndex(R=>R.item===S.id);if(T!==-1&&!e.unequipItem(T)){n("Inventory is full! Free up space to unequip items.","error",5e3);return}}else{const T=e.equipmentSlots.findIndex(R=>!R.locked&&!R.item);if(T!==-1){const R=e.inventory.findIndex(L=>L.id===S.id);if(R!==-1&&!e.equipItem(S.id,T,R)){n("Cannot equip item! Inventory is full and item in slot cannot be unequipped.","error",5e3);return}}else{u.value=!0;return}}p()},E=S=>{if(i.value){const T=e.inventory.findIndex(R=>R.id===i.value.id);if(T!==-1){if(!e.equipItem(i.value.id,S,T)){n("Cannot equip item! Inventory is full and item in slot cannot be unequipped.","error",5e3);return}u.value=!1,p()}}},k=S=>{if(m.value!==null){const T=e.inventory.findIndex(R=>R.id===S.id);if(T!==-1){if(!e.equipItem(S.id,m.value,T)){n("Cannot equip item! Inventory is full and item in slot cannot be unequipped.","error",5e3);return}d.value=!1,m.value=null}}},A=S=>e.equipmentSlots.some(T=>T.item===S);return(S,T)=>(h(),v("div",P2e,[T[2]||(T[2]=a("h1",{class:"text-xl font-bold mb-2 flex items-center text-amber-800 dark:text-amber-400"},[a("span",{class:"i-heroicons-squares-2x2 text-amber-700 dark:text-amber-500 mr-2"}),oe(" Inventory ")],-1)),o.value?(h(),v("div",F2e,[b(e).activeTab==="equipment"?(h(),v("div",U2e,[Ye(qT,{"on-slot-click":g})])):b(e).activeTab==="inventory"?(h(),v("div",q2e,[Ye(HT,{"on-item-click":w,"is-item-equipped":A})])):Q("",!0)])):(h(),v("div",M2e,[a("div",$2e,[T[0]||(T[0]=a("h2",{class:"text-lg font-semibold text-amber-800 dark:text-amber-400 p-4 border-b border-amber-200 dark:border-amber-700"}," Equipment ",-1)),a("div",R2e,[Ye(qT,{"on-slot-click":g})])]),a("div",L2e,[a("h2",D2e,[T[1]||(T[1]=oe(" Inventory ")),b(e).inventory.length>0?(h(),v("span",N2e,_(b(e).inventory.length),1)):Q("",!0)]),a("div",O2e,[Ye(HT,{"on-item-click":w,"is-item-equipped":A})])])])),c.value?(h(),Tt(u2e,{key:2,"on-close":()=>c.value=!1},null,8,["on-close"])):Q("",!0),i.value?(h(),Tt(r2e,{key:3,item:i.value,"is-item-equipped":A,"on-equip-action":C,"on-close":p},null,8,["item"])):Q("",!0),u.value&&i.value?(h(),Tt(_2e,{key:4,item:i.value,"on-close":()=>u.value=!1,"on-slot-select":E},null,8,["item","on-close"])):Q("",!0),d.value?(h(),Tt(I2e,{key:5,"on-close":()=>{d.value=!1,m.value=null},"on-item-select":k},null,8,["on-close"])):Q("",!0),Ye(Ha,{threshold:400})]))}}),V2e=Ct(B2e,[["__scopeId","data-v-552a8cca"]]),H2e={key:0,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200/50 dark:border-gray-700/50 p-4"},G2e={class:"space-y-2"},j2e={class:"text-sm text-amber-700 dark:text-amber-400"},W2e={class:"text-sm font-medium text-green-600 dark:text-green-400"},z2e=Je({__name:"AchievementModifiersPanel",setup(t){const{getTotalMultiplier:e}=aL(),s=Or(),n=q(()=>{const c=new Set;return s.achievementList.filter(d=>d.completed&&d.modifiers&&d.modifiers.length>0).forEach(d=>{d.modifiers&&d.modifiers.forEach(m=>{c.add(m.target)})}),Array.from(c).sort((d,m)=>d==="global"?-1:m==="global"||d==="ep"?1:m==="ep"?-1:d.localeCompare(m))}),r=q(()=>n.value.length>0),o=c=>({global:"All Generators",worker:"Workers",nursery:"Nurseries",queenChamber:"Queen Chambers",colony:"Colonies",megacolony:"Megacolonies",hivemind:"Hiveminds",antopolis:"Antopolis",alateHatchery:"Alate Hatchery",ep:"Evolution Points"})[c]||c,i=c=>{const d=e(c).sub(1);return`+${Lt(d)}`};return(c,u)=>r.value?(h(),v("div",H2e,[u[0]||(u[0]=a("div",{class:"flex items-center gap-2 mb-3"},[a("span",{class:"i-heroicons-trophy text-amber-500 text-lg"}),a("h3",{class:"text-amber-800 dark:text-amber-300 font-medium"},"Achievement Bonuses")],-1)),a("div",G2e,[(h(!0),v(De,null,Ge(n.value,d=>(h(),v("div",{key:d,class:"flex items-center justify-between"},[a("div",j2e,_(o(d)),1),a("div",W2e,_(i(d)),1)]))),128))]),u[1]||(u[1]=a("div",{class:"mt-3 text-xs text-amber-600 dark:text-amber-500 opacity-80"}," Complete more achievements to earn additional bonuses! ",-1))])):Q("",!0)}}),Q2e={class:"space-y-4"},K2e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-4 border border-gray-200/50 dark:border-gray-700/50"},Y2e={class:"flex items-center justify-between"},X2e={class:"flex flex-col items-center gap-3"},J2e={class:"text-center"},Z2e={class:"text-sm text-amber-700 dark:text-amber-400"},eEe={class:"w-32 h-2 mt-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},tEe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-200/50 dark:border-gray-700/50"},sEe={class:"flex overflow-x-auto scrollbar-hide"},nEe=["onClick"],rEe={class:"flex items-center gap-2"},oEe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200/50 dark:border-gray-700/50 divide-y divide-gray-100 dark:divide-gray-700"},iEe={key:0,class:"p-8 text-center text-amber-700 dark:text-amber-400"},aEe={class:"flex items-center gap-4"},lEe={class:"flex-1 min-w-0"},cEe={class:"flex items-baseline justify-between"},uEe={key:0,class:"ml-2 flex-shrink-0 text-xs text-amber-500 dark:text-amber-400"},dEe={class:"mt-1 text-sm text-amber-600 dark:text-amber-400"},mEe={key:0,class:"mt-1 text-sm text-green-600 dark:text-green-400 flex items-center gap-1"},fEe={key:0},pEe={class:"mt-2 flex items-center"},hEe={class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},gEe={class:"ml-2 text-xs text-amber-700 dark:text-amber-400 whitespace-nowrap"},vEe=Je({__name:"AchievementsPage",setup(t){Af();const e=Or(),s=e.categories,{totalAchievements:n,completedAchievements:r,completionPercentage:o}=e,i=Y("general"),c=g=>{i.value=g},u=q(()=>e.getAchievementsByCategory(i.value).filter(g=>!g.hiddenUntilCompleted||g.completed)),d=g=>g?new Date(g).toLocaleDateString():"",m=g=>{if(g.completed)return 100;const w=g.currentValue,C=g.requirement;if(C.eq(0))return 0;const E=w.div(C).mul(100).toNumber();return Math.min(Math.floor(E),99)},f=g=>Lt(g.multiplier.sub(1)),p=g=>!!g.modifiers&&g.modifiers.length>0;return(g,w)=>(h(),v("div",Q2e,[a("div",K2e,[a("div",Y2e,[w[1]||(w[1]=a("div",null,[a("h1",{class:"text-2xl font-bold text-amber-800 dark:text-amber-300"},"Achievements"),a("p",{class:"text-amber-700 dark:text-amber-400 text-sm"}," Complete tasks to earn rewards and recognition ")],-1)),a("div",X2e,[w[0]||(w[0]=a("span",{class:"i-heroicons-trophy text-3xl text-amber-500"},null,-1)),a("div",J2e,[a("div",Z2e,_(b(r))+" / "+_(b(n))+" completed ",1),a("div",eEe,[a("div",{class:"h-full bg-amber-500 dark:bg-amber-600 rounded-full",style:yt({width:`${b(o)}%`})},null,4)])])])])]),Ye(z2e),a("div",tEe,[a("div",sEe,[(h(!0),v(De,null,Ge(b(s),C=>(h(),v("button",{key:C.id,onClick:E=>c(C.id),class:K(["px-4 py-3 whitespace-nowrap transition-colors duration-200",[i.value===C.id?"text-amber-800 dark:text-amber-300 font-medium border-b-2 border-amber-500":"text-amber-600 dark:text-amber-400 hover:text-amber-800 dark:hover:text-amber-300 hover:bg-amber-50 dark:hover:bg-amber-900/20"]])},[a("div",rEe,[a("span",{class:K([C.icon])},null,2),oe(" "+_(C.name),1)])],10,nEe))),128))])]),a("div",oEe,[u.value.length===0?(h(),v("div",iEe,w[2]||(w[2]=[a("div",{class:"flex flex-col items-center space-y-3"},[a("span",{class:"i-heroicons-trophy text-5xl opacity-30"}),a("h3",{class:"text-lg font-medium"},"No Achievements Found"),a("p",{class:"max-w-md text-sm opacity-80"}," There are no achievements in this category yet, or they're all hidden until completed. ")],-1)]))):Q("",!0),(h(!0),v(De,null,Ge(u.value,C=>(h(),v("div",{key:C.id,class:"p-4 hover:bg-amber-50/50 dark:hover:bg-amber-900/10 transition-colors duration-200"},[a("div",aEe,[a("div",{class:K(["flex-shrink-0",[C.completed?"text-amber-500":"text-gray-400 dark:text-gray-500"]])},[a("div",{class:K(["w-10 h-10 rounded-full border-2 flex items-center justify-center",[C.completed?"border-amber-500 bg-amber-100 dark:bg-amber-900/30":"border-gray-300 dark:border-gray-600"]])},[a("span",{class:K([C.icon,"text-xl"])},null,2)],2)],2),a("div",lEe,[a("div",cEe,[a("h3",{class:K(["text-md font-medium truncate",[C.completed?"text-amber-800 dark:text-amber-300":"text-gray-700 dark:text-gray-300"]])},_(C.name),3),C.completed?(h(),v("div",uEe,_(d(C.completionDate)),1)):Q("",!0)]),a("p",dEe,_(C.description),1),C.completed&&p(C)?(h(),v("div",mEe,[w[3]||(w[3]=a("span",{class:"i-heroicons-arrow-trending-up"},null,-1)),(h(!0),v(De,null,Ge(C.modifiers,(E,k)=>(h(),v("span",{key:k},[oe(_(f(E))+" ",1),k<C.modifiers.length-1?(h(),v("span",fEe,", ")):Q("",!0)]))),128))])):Q("",!0),a("div",pEe,[a("div",hEe,[a("div",{class:K(["h-full rounded-full",[C.completed?"bg-amber-500 dark:bg-amber-600":"bg-amber-300 dark:bg-amber-800"]]),style:yt({width:`${m(C)}%`})},null,6)]),a("div",gEe,_(b(be)(C.currentValue.gt(C.requirement)?C.requirement:C.currentValue,0))+" / "+_(b(be)(C.requirement,0)),1)])])])]))),128))])]))}}),bEe=Ct(vEe,[["__scopeId","data-v-a215928e"]]),yEe={class:"max-w-3xl mx-auto px-2 sm:px-0"},_Ee={class:"mb-6"},xEe={class:"text-amber-700 dark:text-amber-400"},kEe={class:"font-medium bg-amber-100 dark:bg-amber-800/50 px-2 py-0.5 rounded"},wEe={key:0,class:"flex flex-col items-center justify-center py-8"},EEe={key:1,class:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg p-4 my-4"},CEe={class:"flex items-start"},SEe={class:"text-red-700 dark:text-red-400 text-sm mt-1"},TEe={key:2,class:"bg-amber-50 dark:bg-amber-950/10 border border-amber-200 dark:border-amber-800/30 rounded-lg p-4 md:p-6 shadow-sm"},AEe=["innerHTML"],IEe=Je({__name:"ChangelogPage",setup(t){const e=Y(""),s=Y(!0),n=Y(!1),r=Y(""),{version:o}=dL(),i=q(()=>e.value?mL(e.value):"");return Et(async()=>{try{const c=await fetch("/CHANGELOG.md");if(!c.ok)throw new Error(`Failed to fetch changelog: ${c.status} ${c.statusText}`);e.value=await c.text(),s.value=!1}catch(c){s.value=!1,n.value=!0,r.value=c instanceof Error?c.message:"An unknown error occurred",console.error("Error loading changelog:",c)}}),(c,u)=>(h(),v("div",yEe,[a("header",_Ee,[u[1]||(u[1]=a("h1",{class:"text-2xl font-bold text-amber-900 dark:text-amber-200"},"Changelog",-1)),a("p",xEe,[u[0]||(u[0]=oe(" Current version: ")),a("span",kEe,_(b(o)),1)])]),s.value?(h(),v("div",wEe,u[2]||(u[2]=[a("div",{class:"h-8 w-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"},null,-1),a("span",{class:"mt-3 text-amber-700 dark:text-amber-400"},"Loading changelog...",-1)]))):n.value?(h(),v("div",EEe,[a("div",CEe,[u[5]||(u[5]=a("span",{class:"i-heroicons-exclamation-triangle text-red-600 dark:text-red-400 mr-3 text-xl"},null,-1)),a("div",null,[u[3]||(u[3]=a("p",{class:"font-medium text-red-800 dark:text-red-300"},"Failed to load changelog",-1)),a("p",SEe,_(r.value),1),u[4]||(u[4]=a("p",{class:"text-red-700 dark:text-red-400 text-sm mt-2"}," Please try refreshing the page or check if the CHANGELOG.md file exists. ",-1))])])])):(h(),v("div",TEe,[a("div",{class:"prose prose-amber dark:prose-invert prose-sm md:prose-base max-w-none",innerHTML:i.value},null,8,AEe)]))]))}}),PEe={class:"mb-4"},MEe={class:"flex items-center gap-2 mb-2"},$Ee={class:"text-sm"},REe=["value","min","max","step"],LEe={class:"min-w-[3ch] text-center"},DEe={class:"flex flex-wrap gap-2"},NEe=["onClick"],Vv=Je({__name:"WikiLevelSelector",props:{modelValue:{},min:{},max:{},step:{},presets:{},color:{},label:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,n=e,r=s.min??5,o=s.max??1e3,i=s.step??5,c=s.presets??[10,25,50,100,250,500,1e3],u=s.color??"amber",d=s.label??"Max Preview Level:",m=q(()=>s.modelValue>=1e3?`${Math.floor(s.modelValue/1e3)}k`:s.modelValue.toString()),f=g=>{const w=s.modelValue===g;return u==="emerald"?["px-2 py-1 text-xs rounded-md transition-colors font-medium",w?"bg-emerald-600 dark:bg-emerald-500 text-white shadow-sm":"bg-emerald-100 dark:bg-emerald-800/50 text-emerald-800 dark:text-emerald-200 hover:bg-emerald-200 dark:hover:bg-emerald-700/70 border border-emerald-200 dark:border-emerald-700"]:["px-2 py-1 text-xs rounded-md transition-colors",w?`bg-${u}-500 text-white`:`bg-${u}-200 dark:bg-${u}-900/30 hover:bg-${u}-300 dark:hover:bg-${u}-800/50`]},p=g=>{n("update:modelValue",g)};return(g,w)=>(h(),v("div",PEe,[a("div",MEe,[a("label",$Ee,_(b(d)),1),a("input",{type:"range",value:g.modelValue,onInput:w[0]||(w[0]=C=>p(Number(C.target.value))),min:b(r),max:b(o),step:b(i),class:K(`accent-${b(u)}-500 flex-grow`)},null,42,REe),a("span",LEe,_(m.value),1)]),a("div",DEe,[(h(!0),v(De,null,Ge(b(c),C=>(h(),v("button",{key:C,onClick:E=>p(C),class:K(f(C))},_(C>=1e3?`${C/1e3}k`:C),11,NEe))),128))])]))}});function OEe(){const t=Y({});return{tableRefs:t,registerTableRef:(r,o)=>{o instanceof Element?t.value[r]=o:t.value[r]=null},scrollTableToLevel:(r,o,i)=>{if(!r)return;const c=r.querySelector("tbody");if(!c)return;const u=c.querySelectorAll("tr");if(!u.length)return;const d=Math.min(o-1,u.length-1);u[d]&&u[d].scrollIntoView({behavior:"smooth",block:"center"})},getScrollPoints:r=>{if(r<=20)return[1,Math.ceil(r/2),r];if(r<=50)return[1,10,25,r];if(r<=100)return[1,25,50,75,r];{const o=[1],i=Math.ceil(r/5);for(let c=1;c<=4;c++)o.push(c*i);return o.push(r),o}}}}const FEe={class:"flex gap-2"},UEe={class:"overflow-x-auto max-h-60 overflow-y-auto border border-amber-200 dark:border-amber-800 rounded flex-grow"},qEe={class:"flex flex-col md:w-12 gap-1"},BEe=["onClick"],Y_=Je({__name:"WikiLevelTable",props:{itemId:{},maxLevel:{},tableHeaders:{},color:{}},setup(t){const e=t,{tableRefs:s,registerTableRef:n,scrollTableToLevel:r,getScrollPoints:o}=OEe(),i=e.color??"amber";return(c,u)=>(h(),v("div",FEe,[a("div",UEe,[a("table",{class:"w-full text-sm",ref:d=>b(n)(c.itemId,d)},[a("thead",{class:K(`bg-amber-200 dark:bg-${b(i)}-900/40 sticky top-0`)},[a("tr",null,[(h(!0),v(De,null,Ge(c.tableHeaders,(d,m)=>(h(),v("th",{key:m,class:K(["p-2",m===c.tableHeaders.length-1?"text-right":"text-left"])},_(d),3))),128))])],2),a("tbody",null,[lf(c.$slots,"default")])],512)]),a("div",qEe,[(h(!0),v(De,null,Ge(b(o)(c.maxLevel),d=>(h(),v("button",{key:d,onClick:m=>b(r)(b(s)[c.itemId],d,c.maxLevel),class:K(["text-xs p-1 rounded",`bg-${b(i)}-200 dark:bg-${b(i)}-900/40 hover:bg-${b(i)}-300 dark:hover:bg-${b(i)}-800/60 text-${b(i)}-900 dark:text-${b(i)}-100`])},_(d===1?"Top":d===c.maxLevel?"Max":d),11,BEe))),128))])]))}}),VEe={class:"mb-4"},HEe=["value","placeholder"],Zl=Je({__name:"WikiSearchInput",props:{modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=t,n=e,r=s.placeholder??"Search...",o=i=>{n("update:modelValue",i)};return(i,c)=>(h(),v("div",VEe,[a("input",{type:"text",value:i.modelValue,onInput:c[0]||(c[0]=u=>o(u.target.value)),placeholder:b(r),class:"w-full p-2 rounded-lg bg-amber-100 dark:bg-amber-900/20 text-amber-900 dark:text-amber-100 border border-amber-300 dark:border-amber-700"},null,40,HEe)]))}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pf(t){return t+.5|0}const ua=(t,e,s)=>Math.max(Math.min(t,s),e);function Rd(t){return ua(Pf(t*2.55),0,255)}function ba(t){return ua(Pf(t*255),0,255)}function pi(t){return ua(Pf(t/2.55)/100,0,1)}function GT(t){return ua(Pf(t*100),0,100)}const zr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},X_=[..."0123456789ABCDEF"],GEe=t=>X_[t&15],jEe=t=>X_[(t&240)>>4]+X_[t&15],Tp=t=>(t&240)>>4===(t&15),WEe=t=>Tp(t.r)&&Tp(t.g)&&Tp(t.b)&&Tp(t.a);function zEe(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&zr[t[1]]*17,g:255&zr[t[2]]*17,b:255&zr[t[3]]*17,a:e===5?zr[t[4]]*17:255}:(e===7||e===9)&&(s={r:zr[t[1]]<<4|zr[t[2]],g:zr[t[3]]<<4|zr[t[4]],b:zr[t[5]]<<4|zr[t[6]],a:e===9?zr[t[7]]<<4|zr[t[8]]:255})),s}const QEe=(t,e)=>t<255?e(t):"";function KEe(t){var e=WEe(t)?GEe:jEe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+QEe(t.a,e):void 0}const YEe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bL(t,e,s){const n=e*Math.min(s,1-s),r=(o,i=(o+t/30)%12)=>s-n*Math.max(Math.min(i-3,9-i,1),-1);return[r(0),r(8),r(4)]}function XEe(t,e,s){const n=(r,o=(r+t/60)%6)=>s-s*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function JEe(t,e,s){const n=bL(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function ZEe(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function _w(t){const s=t.r/255,n=t.g/255,r=t.b/255,o=Math.max(s,n,r),i=Math.min(s,n,r),c=(o+i)/2;let u,d,m;return o!==i&&(m=o-i,d=c>.5?m/(2-o-i):m/(o+i),u=ZEe(s,n,r,m,o),u=u*60+.5),[u|0,d||0,c]}function xw(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(ba)}function kw(t,e,s){return xw(bL,t,e,s)}function eCe(t,e,s){return xw(JEe,t,e,s)}function tCe(t,e,s){return xw(XEe,t,e,s)}function yL(t){return(t%360+360)%360}function sCe(t){const e=YEe.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Rd(+e[5]):ba(+e[5]));const r=yL(+e[2]),o=+e[3]/100,i=+e[4]/100;return e[1]==="hwb"?n=eCe(r,o,i):e[1]==="hsv"?n=tCe(r,o,i):n=kw(r,o,i),{r:n[0],g:n[1],b:n[2],a:s}}function nCe(t,e){var s=_w(t);s[0]=yL(s[0]+e),s=kw(s),t.r=s[0],t.g=s[1],t.b=s[2]}function rCe(t){if(!t)return;const e=_w(t),s=e[0],n=GT(e[1]),r=GT(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${pi(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const jT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},WT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oCe(){const t={},e=Object.keys(WT),s=Object.keys(jT);let n,r,o,i,c;for(n=0;n<e.length;n++){for(i=c=e[n],r=0;r<s.length;r++)o=s[r],c=c.replace(o,jT[o]);o=parseInt(WT[i],16),t[c]=[o>>16&255,o>>8&255,o&255]}return t}let Ap;function iCe(t){Ap||(Ap=oCe(),Ap.transparent=[0,0,0,0]);const e=Ap[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aCe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lCe(t){const e=aCe.exec(t);let s=255,n,r,o;if(e){if(e[7]!==n){const i=+e[7];s=e[8]?Rd(i):ua(i*255,0,255)}return n=+e[1],r=+e[3],o=+e[5],n=255&(e[2]?Rd(n):ua(n,0,255)),r=255&(e[4]?Rd(r):ua(r,0,255)),o=255&(e[6]?Rd(o):ua(o,0,255)),{r:n,g:r,b:o,a:s}}}function cCe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const vy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,vc=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function uCe(t,e,s){const n=vc(pi(t.r)),r=vc(pi(t.g)),o=vc(pi(t.b));return{r:ba(vy(n+s*(vc(pi(e.r))-n))),g:ba(vy(r+s*(vc(pi(e.g))-r))),b:ba(vy(o+s*(vc(pi(e.b))-o))),a:t.a+s*(e.a-t.a)}}function Ip(t,e,s){if(t){let n=_w(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=kw(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function _L(t,e){return t&&Object.assign(e||{},t)}function zT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ba(t[3]))):(e=_L(t,{r:0,g:0,b:0,a:1}),e.a=ba(e.a)),e}function dCe(t){return t.charAt(0)==="r"?lCe(t):sCe(t)}class Wm{constructor(e){if(e instanceof Wm)return e;const s=typeof e;let n;s==="object"?n=zT(e):s==="string"&&(n=zEe(e)||iCe(e)||dCe(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=_L(this._rgb);return e&&(e.a=pi(e.a)),e}set rgb(e){this._rgb=zT(e)}rgbString(){return this._valid?cCe(this._rgb):void 0}hexString(){return this._valid?KEe(this._rgb):void 0}hslString(){return this._valid?rCe(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let o;const i=s===o?.5:s,c=2*i-1,u=n.a-r.a,d=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;o=1-d,n.r=255&d*n.r+o*r.r+.5,n.g=255&d*n.g+o*r.g+.5,n.b=255&d*n.b+o*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=uCe(this._rgb,e._rgb,s)),this}clone(){return new Wm(this.rgb)}alpha(e){return this._rgb.a=ba(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Pf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ip(this._rgb,2,e),this}darken(e){return Ip(this._rgb,2,-e),this}saturate(e){return Ip(this._rgb,1,e),this}desaturate(e){return Ip(this._rgb,1,-e),this}rotate(e){return nCe(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ci(){}const mCe=(()=>{let t=0;return()=>t++})();function Is(t){return t==null}function In(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function as(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function sr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Pr(t,e){return sr(t)?t:e}function es(t,e){return typeof t>"u"?e:t}const fCe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ms(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function gs(t,e,s,n){let r,o,i;if(In(t))for(o=t.length,r=0;r<o;r++)e.call(s,t[r],r);else if(as(t))for(i=Object.keys(t),o=i.length,r=0;r<o;r++)e.call(s,t[i[r]],i[r])}function a0(t,e){let s,n,r,o;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],o=e[s],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function l0(t){if(In(t))return t.map(l0);if(as(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=l0(t[s[r]]);return e}return t}function xL(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pCe(t,e,s,n){if(!xL(t))return;const r=e[t],o=s[t];as(r)&&as(o)?zm(r,o,n):e[t]=l0(o)}function zm(t,e,s){const n=In(e)?e:[e],r=n.length;if(!as(t))return t;s=s||{};const o=s.merger||pCe;let i;for(let c=0;c<r;++c){if(i=n[c],!as(i))continue;const u=Object.keys(i);for(let d=0,m=u.length;d<m;++d)o(u[d],t,i,s)}return t}function im(t,e){return zm(t,e,{merger:hCe})}function hCe(t,e,s){if(!xL(t))return;const n=e[t],r=s[t];as(n)&&as(r)?im(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=l0(r))}const QT={"":t=>t,x:t=>t.x,y:t=>t.y};function gCe(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function vCe(t){const e=gCe(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function c0(t,e){return(QT[e]||(QT[e]=vCe(e)))(t)}function ww(t){return t.charAt(0).toUpperCase()+t.slice(1)}const u0=t=>typeof t<"u",Na=t=>typeof t=="function",KT=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function bCe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Rn=Math.PI,Xo=2*Rn,yCe=Xo+Rn,d0=Number.POSITIVE_INFINITY,_Ce=Rn/180,vo=Rn/2,tl=Rn/4,YT=Rn*2/3,da=Math.log10,xu=Math.sign;function am(t,e,s){return Math.abs(t-e)<s}function XT(t){const e=Math.round(t);t=am(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(da(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function xCe(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,o)=>r-o).pop(),e}function kCe(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Qm(t){return!kCe(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function wCe(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function kL(t,e,s){let n,r,o;for(n=0,r=t.length;n<r;n++)o=t[n][s],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function bl(t){return t*(Rn/180)}function ECe(t){return t*(180/Rn)}function JT(t){if(!sr(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function CCe(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let o=Math.atan2(n,s);return o<-.5*Rn&&(o+=Xo),{angle:o,distance:r}}function J_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function SCe(t,e){return(t-e+yCe)%Xo-Rn}function Ji(t){return(t%Xo+Xo)%Xo}function wL(t,e,s,n){const r=Ji(t),o=Ji(e),i=Ji(s),c=Ji(o-r),u=Ji(i-r),d=Ji(r-o),m=Ji(r-i);return r===o||r===i||n&&o===i||c>u&&d<m}function Xr(t,e,s){return Math.max(e,Math.min(s,t))}function TCe(t){return Xr(t,-32768,32767)}function Ld(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function Ew(t,e,s){s=s||(i=>t[i]<e);let n=t.length-1,r=0,o;for(;n-r>1;)o=r+n>>1,s(o)?r=o:n=o;return{lo:r,hi:n}}const yl=(t,e,s,n)=>Ew(t,s,n?r=>{const o=t[r][e];return o<s||o===s&&t[r+1][e]===s}:r=>t[r][e]<s),ACe=(t,e,s)=>Ew(t,s,n=>t[n][e]>=s);function ICe(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const EL=["push","pop","shift","splice","unshift"];function PCe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EL.forEach(s=>{const n="_onData"+ww(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...o){const i=r.apply(this,o);return t._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...o)}),i}})})}function ZT(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(EL.forEach(o=>{delete t[o]}),delete t._chartjs)}function MCe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const CL=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function SL(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,CL.call(window,()=>{n=!1,t.apply(e,s)}))}}function $Ce(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Cw=t=>t==="start"?"left":t==="end"?"right":"center",Wn=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,RCe=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function LCe(t,e,s){const n=e.length;let r=0,o=n;if(t._sorted){const{iScale:i,vScale:c,_parsed:u}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,m=i.axis,{min:f,max:p,minDefined:g,maxDefined:w}=i.getUserBounds();if(g){if(r=Math.min(yl(u,m,f).lo,s?n:yl(e,m,i.getPixelForValue(f)).lo),d){const C=u.slice(0,r+1).reverse().findIndex(E=>!Is(E[c.axis]));r-=Math.max(0,C)}r=Xr(r,0,n-1)}if(w){let C=Math.max(yl(u,i.axis,p,!0).hi+1,s?0:yl(e,m,i.getPixelForValue(p),!0).hi+1);if(d){const E=u.slice(C-1).findIndex(k=>!Is(k[c.axis]));C+=Math.max(0,E)}o=Xr(C,r,n)-r}else o=n-r}return{start:r,count:o}}function DCe(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),o}const Pp=t=>t===0||t===1,eA=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Xo/s)),tA=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Xo/s)+1,lm={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*vo)+1,easeOutSine:t=>Math.sin(t*vo),easeInOutSine:t=>-.5*(Math.cos(Rn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Pp(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Pp(t)?t:eA(t,.075,.3),easeOutElastic:t=>Pp(t)?t:tA(t,.075,.3),easeInOutElastic(t){return Pp(t)?t:t<.5?.5*eA(t*2,.1125,.45):.5+.5*tA(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-lm.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?lm.easeInBounce(t*2)*.5:lm.easeOutBounce(t*2-1)*.5+.5};function Sw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function sA(t){return Sw(t)?t:new Wm(t)}function by(t){return Sw(t)?t:new Wm(t).saturate(.5).darken(.1).hexString()}const NCe=["x","y","borderWidth","radius","tension"],OCe=["color","borderColor","backgroundColor"];function FCe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:OCe},numbers:{type:"number",properties:NCe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function UCe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nA=new Map;function qCe(t,e){e=e||{};const s=t+JSON.stringify(e);let n=nA.get(s);return n||(n=new Intl.NumberFormat(t,e),nA.set(s,n)),n}function Tw(t,e,s){return qCe(e,s).format(t)}const TL={values(t){return In(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,o=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=BCe(t,s)}const i=da(Math.abs(o)),c=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),u={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),Tw(t,n,u)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(da(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?TL.numeric.call(this,t,e,s):""}};function BCe(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Aw={formatters:TL};function VCe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Aw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ql=Object.create(null),Z_=Object.create(null);function cm(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const o=s[n];t=t[o]||(t[o]=Object.create(null))}return t}function yy(t,e,s){return typeof e=="string"?zm(cm(t,e),s):zm(cm(t,""),e)}class HCe{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>by(r.backgroundColor),this.hoverBorderColor=(n,r)=>by(r.borderColor),this.hoverColor=(n,r)=>by(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return yy(this,e,s)}get(e){return cm(this,e)}describe(e,s){return yy(Z_,e,s)}override(e,s){return yy(ql,e,s)}route(e,s,n,r){const o=cm(this,e),i=cm(this,n),c="_"+s;Object.defineProperties(o,{[c]:{value:o[s],writable:!0},[s]:{enumerable:!0,get(){const u=this[c],d=i[r];return as(u)?Object.assign({},d,u):es(u,d)},set(u){this[c]=u}}})}apply(e){e.forEach(s=>s(this))}}var nn=new HCe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[FCe,UCe,VCe]);function GCe(t){return!t||Is(t.size)||Is(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function rA(t,e,s,n,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,s.push(r)),o>n&&(n=o),n}function sl(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function oA(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function e1(t,e,s,n){AL(t,e,s,n,null)}function AL(t,e,s,n,r){let o,i,c,u,d,m,f,p;const g=e.pointStyle,w=e.rotation,C=e.radius;let E=(w||0)*_Ce;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(E),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(C)||C<=0)){switch(t.beginPath(),g){default:r?t.ellipse(s,n,r/2,C,0,0,Xo):t.arc(s,n,C,0,Xo),t.closePath();break;case"triangle":m=r?r/2:C,t.moveTo(s+Math.sin(E)*m,n-Math.cos(E)*C),E+=YT,t.lineTo(s+Math.sin(E)*m,n-Math.cos(E)*C),E+=YT,t.lineTo(s+Math.sin(E)*m,n-Math.cos(E)*C),t.closePath();break;case"rectRounded":d=C*.516,u=C-d,i=Math.cos(E+tl)*u,f=Math.cos(E+tl)*(r?r/2-d:u),c=Math.sin(E+tl)*u,p=Math.sin(E+tl)*(r?r/2-d:u),t.arc(s-f,n-c,d,E-Rn,E-vo),t.arc(s+p,n-i,d,E-vo,E),t.arc(s+f,n+c,d,E,E+vo),t.arc(s-p,n+i,d,E+vo,E+Rn),t.closePath();break;case"rect":if(!w){u=Math.SQRT1_2*C,m=r?r/2:u,t.rect(s-m,n-u,2*m,2*u);break}E+=tl;case"rectRot":f=Math.cos(E)*(r?r/2:C),i=Math.cos(E)*C,c=Math.sin(E)*C,p=Math.sin(E)*(r?r/2:C),t.moveTo(s-f,n-c),t.lineTo(s+p,n-i),t.lineTo(s+f,n+c),t.lineTo(s-p,n+i),t.closePath();break;case"crossRot":E+=tl;case"cross":f=Math.cos(E)*(r?r/2:C),i=Math.cos(E)*C,c=Math.sin(E)*C,p=Math.sin(E)*(r?r/2:C),t.moveTo(s-f,n-c),t.lineTo(s+f,n+c),t.moveTo(s+p,n-i),t.lineTo(s-p,n+i);break;case"star":f=Math.cos(E)*(r?r/2:C),i=Math.cos(E)*C,c=Math.sin(E)*C,p=Math.sin(E)*(r?r/2:C),t.moveTo(s-f,n-c),t.lineTo(s+f,n+c),t.moveTo(s+p,n-i),t.lineTo(s-p,n+i),E+=tl,f=Math.cos(E)*(r?r/2:C),i=Math.cos(E)*C,c=Math.sin(E)*C,p=Math.sin(E)*(r?r/2:C),t.moveTo(s-f,n-c),t.lineTo(s+f,n+c),t.moveTo(s+p,n-i),t.lineTo(s-p,n+i);break;case"line":i=r?r/2:Math.cos(E)*C,c=Math.sin(E)*C,t.moveTo(s-i,n-c),t.lineTo(s+i,n+c);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(E)*(r?r/2:C),n+Math.sin(E)*C);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Km(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Iw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Pw(t){t.restore()}function jCe(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const o=(e.x+s.x)/2;t.lineTo(o,e.y),t.lineTo(o,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function WCe(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function zCe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Is(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function QCe(t,e,s,n,r){if(r.strikethrough||r.underline){const o=t.measureText(n),i=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,u=s-o.actualBoundingBoxAscent,d=s+o.actualBoundingBoxDescent,m=r.strikethrough?(u+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(i,m),t.lineTo(c,m),t.stroke()}}function KCe(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Ym(t,e,s,n,r,o={}){const i=In(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let u,d;for(t.save(),t.font=r.string,zCe(t,o),u=0;u<i.length;++u)d=i[u],o.backdrop&&KCe(t,o.backdrop),c&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Is(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(d,s,n,o.maxWidth)),t.fillText(d,s,n,o.maxWidth),QCe(t,s,n,d,o),n+=Number(r.lineHeight);t.restore()}function t1(t,e){const{x:s,y:n,w:r,h:o,radius:i}=e;t.arc(s+i.topLeft,n+i.topLeft,i.topLeft,1.5*Rn,Rn,!0),t.lineTo(s,n+o-i.bottomLeft),t.arc(s+i.bottomLeft,n+o-i.bottomLeft,i.bottomLeft,Rn,vo,!0),t.lineTo(s+r-i.bottomRight,n+o),t.arc(s+r-i.bottomRight,n+o-i.bottomRight,i.bottomRight,vo,0,!0),t.lineTo(s+r,n+i.topRight),t.arc(s+r-i.topRight,n+i.topRight,i.topRight,0,-vo,!0),t.lineTo(s+i.topLeft,n)}const YCe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XCe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JCe(t,e){const s=(""+t).match(YCe);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const ZCe=t=>+t||0;function IL(t,e){const s={},n=as(e),r=n?Object.keys(e):e,o=as(t)?n?i=>es(t[i],t[e[i]]):i=>t[i]:()=>t;for(const i of r)s[i]=ZCe(o(i));return s}function eSe(t){return IL(t,{top:"y",right:"x",bottom:"y",left:"x"})}function um(t){return IL(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ro(t){const e=eSe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nr(t,e){t=t||{},e=e||nn.font;let s=es(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=es(t.style,e.style);n&&!(""+n).match(XCe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:es(t.family,e.family),lineHeight:JCe(es(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:es(t.weight,e.weight),string:""};return r.string=GCe(r),r}function Mp(t,e,s,n){let r,o,i;for(r=0,o=t.length;r<o;++r)if(i=t[r],i!==void 0&&i!==void 0)return i}function tSe(t,e,s){const{min:n,max:r}=t,o=fCe(e,(r-n)/2),i=(c,u)=>s&&c===0?0:c+u;return{min:i(n,-Math.abs(o)),max:i(r,o)}}function ec(t,e){return Object.assign(Object.create(t),e)}function Mw(t,e=[""],s,n,r=()=>t[0]){const o=s||t;typeof n>"u"&&(n=RL("_fallback",t));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:r,override:c=>Mw([c,...t],e,o,n)};return new Proxy(i,{deleteProperty(c,u){return delete c[u],delete c._keys,delete t[0][u],!0},get(c,u){return ML(c,u,()=>cSe(u,e,t,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,u){return aA(c).includes(u)},ownKeys(c){return aA(c)},set(c,u,d){const m=c._storage||(c._storage=r());return c[u]=m[u]=d,delete c._keys,!0}})}function ku(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:PL(t,n),setContext:o=>ku(t,o,s,n),override:o=>ku(t.override(o),e,s,n)};return new Proxy(r,{deleteProperty(o,i){return delete o[i],delete t[i],!0},get(o,i,c){return ML(o,i,()=>nSe(o,i,c))},getOwnPropertyDescriptor(o,i){return o._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(o,i,c){return t[i]=c,delete o[i],!0}})}function PL(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:Na(s)?s:()=>s,isIndexable:Na(n)?n:()=>n}}const sSe=(t,e)=>t?t+ww(e):e,$w=(t,e)=>as(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ML(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function nSe(t,e,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:i}=t;let c=n[e];return Na(c)&&i.isScriptable(e)&&(c=rSe(e,c,t,s)),In(c)&&c.length&&(c=oSe(e,c,t,i.isIndexable)),$w(e,c)&&(c=ku(c,r,o&&o[e],i)),c}function rSe(t,e,s,n){const{_proxy:r,_context:o,_subProxy:i,_stack:c}=s;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let u=e(o,i||n);return c.delete(t),$w(t,u)&&(u=Rw(r._scopes,r,t,u)),u}function oSe(t,e,s,n){const{_proxy:r,_context:o,_subProxy:i,_descriptors:c}=s;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(as(e[0])){const u=e,d=r._scopes.filter(m=>m!==u);e=[];for(const m of u){const f=Rw(d,r,t,m);e.push(ku(f,o,i&&i[t],c))}}return e}function $L(t,e,s){return Na(t)?t(e,s):t}const iSe=(t,e)=>t===!0?e:typeof t=="string"?c0(e,t):void 0;function aSe(t,e,s,n,r){for(const o of e){const i=iSe(s,o);if(i){t.add(i);const c=$L(i._fallback,s,r);if(typeof c<"u"&&c!==s&&c!==n)return c}else if(i===!1&&typeof n<"u"&&s!==n)return null}return!1}function Rw(t,e,s,n){const r=e._rootScopes,o=$L(e._fallback,s,n),i=[...t,...r],c=new Set;c.add(n);let u=iA(c,i,s,o||s,n);return u===null||typeof o<"u"&&o!==s&&(u=iA(c,i,o,u,n),u===null)?!1:Mw(Array.from(c),[""],r,o,()=>lSe(e,s,n))}function iA(t,e,s,n,r){for(;s;)s=aSe(t,e,s,n,r);return s}function lSe(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return In(r)&&as(s)?s:r||{}}function cSe(t,e,s,n){let r;for(const o of e)if(r=RL(sSe(o,t),s),typeof r<"u")return $w(t,r)?Rw(s,n,t,r):r}function RL(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function aA(t){let e=t._keys;return e||(e=t._keys=uSe(t._scopes)),e}function uSe(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}const dSe=Number.EPSILON||1e-14,wu=(t,e)=>e<t.length&&!t[e].skip&&t[e],LL=t=>t==="x"?"y":"x";function mSe(t,e,s,n){const r=t.skip?e:t,o=e,i=s.skip?e:s,c=J_(o,r),u=J_(i,o);let d=c/(c+u),m=u/(c+u);d=isNaN(d)?0:d,m=isNaN(m)?0:m;const f=n*d,p=n*m;return{previous:{x:o.x-f*(i.x-r.x),y:o.y-f*(i.y-r.y)},next:{x:o.x+p*(i.x-r.x),y:o.y+p*(i.y-r.y)}}}function fSe(t,e,s){const n=t.length;let r,o,i,c,u,d=wu(t,0);for(let m=0;m<n-1;++m)if(u=d,d=wu(t,m+1),!(!u||!d)){if(am(e[m],0,dSe)){s[m]=s[m+1]=0;continue}r=s[m]/e[m],o=s[m+1]/e[m],c=Math.pow(r,2)+Math.pow(o,2),!(c<=9)&&(i=3/Math.sqrt(c),s[m]=r*i*e[m],s[m+1]=o*i*e[m])}}function pSe(t,e,s="x"){const n=LL(s),r=t.length;let o,i,c,u=wu(t,0);for(let d=0;d<r;++d){if(i=c,c=u,u=wu(t,d+1),!c)continue;const m=c[s],f=c[n];i&&(o=(m-i[s])/3,c[`cp1${s}`]=m-o,c[`cp1${n}`]=f-o*e[d]),u&&(o=(u[s]-m)/3,c[`cp2${s}`]=m+o,c[`cp2${n}`]=f+o*e[d])}}function hSe(t,e="x"){const s=LL(e),n=t.length,r=Array(n).fill(0),o=Array(n);let i,c,u,d=wu(t,0);for(i=0;i<n;++i)if(c=u,u=d,d=wu(t,i+1),!!u){if(d){const m=d[e]-u[e];r[i]=m!==0?(d[s]-u[s])/m:0}o[i]=c?d?xu(r[i-1])!==xu(r[i])?0:(r[i-1]+r[i])/2:r[i-1]:r[i]}fSe(t,r,o),pSe(t,o,e)}function $p(t,e,s){return Math.max(Math.min(t,s),e)}function gSe(t,e){let s,n,r,o,i,c=Km(t[0],e);for(s=0,n=t.length;s<n;++s)i=o,o=c,c=s<n-1&&Km(t[s+1],e),o&&(r=t[s],i&&(r.cp1x=$p(r.cp1x,e.left,e.right),r.cp1y=$p(r.cp1y,e.top,e.bottom)),c&&(r.cp2x=$p(r.cp2x,e.left,e.right),r.cp2y=$p(r.cp2y,e.top,e.bottom)))}function vSe(t,e,s,n,r){let o,i,c,u;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")hSe(t,r);else{let d=n?t[t.length-1]:t[0];for(o=0,i=t.length;o<i;++o)c=t[o],u=mSe(d,c,t[Math.min(o+1,i-(n?0:1))%i],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,d=c}e.capBezierPoints&&gSe(t,s)}function Lw(){return typeof window<"u"&&typeof document<"u"}function Dw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function m0(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Hv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function bSe(t,e){return Hv(t).getPropertyValue(e)}const ySe=["top","right","bottom","left"];function Tl(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const o=ySe[r];n[o]=parseFloat(t[e+"-"+o+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const _Se=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function xSe(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:o}=n;let i=!1,c,u;if(_Se(r,o,t.target))c=r,u=o;else{const d=e.getBoundingClientRect();c=n.clientX-d.left,u=n.clientY-d.top,i=!0}return{x:c,y:u,box:i}}function al(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=Hv(s),o=r.boxSizing==="border-box",i=Tl(r,"padding"),c=Tl(r,"border","width"),{x:u,y:d,box:m}=xSe(t,s),f=i.left+(m&&c.left),p=i.top+(m&&c.top);let{width:g,height:w}=e;return o&&(g-=i.width+c.width,w-=i.height+c.height),{x:Math.round((u-f)/g*s.width/n),y:Math.round((d-p)/w*s.height/n)}}function kSe(t,e,s){let n,r;if(e===void 0||s===void 0){const o=t&&Dw(t);if(!o)e=t.clientWidth,s=t.clientHeight;else{const i=o.getBoundingClientRect(),c=Hv(o),u=Tl(c,"border","width"),d=Tl(c,"padding");e=i.width-d.width-u.width,s=i.height-d.height-u.height,n=m0(c.maxWidth,o,"clientWidth"),r=m0(c.maxHeight,o,"clientHeight")}}return{width:e,height:s,maxWidth:n||d0,maxHeight:r||d0}}const Rp=t=>Math.round(t*10)/10;function wSe(t,e,s,n){const r=Hv(t),o=Tl(r,"margin"),i=m0(r.maxWidth,t,"clientWidth")||d0,c=m0(r.maxHeight,t,"clientHeight")||d0,u=kSe(t,e,s);let{width:d,height:m}=u;if(r.boxSizing==="content-box"){const p=Tl(r,"border","width"),g=Tl(r,"padding");d-=g.width+p.width,m-=g.height+p.height}return d=Math.max(0,d-o.width),m=Math.max(0,n?d/n:m-o.height),d=Rp(Math.min(d,i,u.maxWidth)),m=Rp(Math.min(m,c,u.maxHeight)),d&&!m&&(m=Rp(d/2)),(e!==void 0||s!==void 0)&&n&&u.height&&m>u.height&&(m=u.height,d=Rp(Math.floor(m*n))),{width:d,height:m}}function lA(t,e,s){const n=e||1,r=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const i=t.canvas;return i.style&&(s||!i.style.height&&!i.style.width)&&(i.style.height=`${t.height}px`,i.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||i.height!==r||i.width!==o?(t.currentDevicePixelRatio=n,i.height=r,i.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const ESe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Lw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function cA(t,e){const s=bSe(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ll(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function CSe(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function SSe(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},i=ll(t,r,s),c=ll(r,o,s),u=ll(o,e,s),d=ll(i,c,s),m=ll(c,u,s);return ll(d,m,s)}const TSe=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},ASe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Zc(t,e,s){return t?TSe(e,s):ASe()}function DL(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function NL(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function OL(t){return t==="angle"?{between:wL,compare:SCe,normalize:Ji}:{between:Ld,compare:(e,s)=>e-s,normalize:e=>e}}function uA({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function ISe(t,e,s){const{property:n,start:r,end:o}=s,{between:i,normalize:c}=OL(n),u=e.length;let{start:d,end:m,loop:f}=t,p,g;if(f){for(d+=u,m+=u,p=0,g=u;p<g&&i(c(e[d%u][n]),r,o);++p)d--,m--;d%=u,m%=u}return m<d&&(m+=u),{start:d,end:m,loop:f,style:t.style}}function PSe(t,e,s){if(!s)return[t];const{property:n,start:r,end:o}=s,i=e.length,{compare:c,between:u,normalize:d}=OL(n),{start:m,end:f,loop:p,style:g}=ISe(t,e,s),w=[];let C=!1,E=null,k,A,S;const T=()=>u(r,S,k)&&c(r,S)!==0,R=()=>c(o,k)===0||u(o,S,k),L=()=>C||T(),P=()=>!C||R();for(let I=m,D=m;I<=f;++I)A=e[I%i],!A.skip&&(k=d(A[n]),k!==S&&(C=u(k,r,o),E===null&&L()&&(E=c(k,r)===0?I:D),E!==null&&P()&&(w.push(uA({start:E,end:I,loop:p,count:i,style:g})),E=null),D=I,S=k));return E!==null&&w.push(uA({start:E,end:f,loop:p,count:i,style:g})),w}function MSe(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const o=PSe(n[r],t.points,e);o.length&&s.push(...o)}return s}function $Se(t,e,s,n){let r=0,o=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}function RSe(t,e,s,n){const r=t.length,o=[];let i=e,c=t[e],u;for(u=e+1;u<=s;++u){const d=t[u%r];d.skip||d.stop?c.skip||(n=!1,o.push({start:e%r,end:(u-1)%r,loop:n}),e=i=d.stop?u:null):(i=u,c.skip&&(e=u)),c=d}return i!==null&&o.push({start:e%r,end:i%r,loop:n}),o}function LSe(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const o=!!t._loop,{start:i,end:c}=$Se(s,r,o,n);if(n===!0)return dA(t,[{start:i,end:c,loop:o}],s,e);const u=c<i?c+r:c,d=!!t._fullLoop&&i===0&&c===r-1;return dA(t,RSe(s,i,u,d),s,e)}function dA(t,e,s,n){return!n||!n.setContext||!s?e:DSe(t,e,s,n)}function DSe(t,e,s,n){const r=t._chart.getContext(),o=mA(t.options),{_datasetIndex:i,options:{spanGaps:c}}=t,u=s.length,d=[];let m=o,f=e[0].start,p=f;function g(w,C,E,k){const A=c?-1:1;if(w!==C){for(w+=u;s[w%u].skip;)w-=A;for(;s[C%u].skip;)C+=A;w%u!==C%u&&(d.push({start:w%u,end:C%u,loop:E,style:k}),m=k,f=C%u)}}for(const w of e){f=c?f:w.start;let C=s[f%u],E;for(p=f+1;p<=w.end;p++){const k=s[p%u];E=mA(n.setContext(ec(r,{type:"segment",p0:C,p1:k,p0DataIndex:(p-1)%u,p1DataIndex:p%u,datasetIndex:i}))),NSe(E,m)&&g(f,p-1,w.loop,m),C=k,m=E}f<p-1&&g(f,p-1,w.loop,m)}return d}function mA(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function NSe(t,e){if(!e)return!1;const s=[],n=function(r,o){return Sw(o)?(s.includes(o)||s.push(o),s.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class OSe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const o=s.listeners[r],i=s.duration;o.forEach(c=>c({chart:e,initial:s.initial,numSteps:i,currentStep:Math.min(n-s.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=CL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const o=n.items;let i=o.length-1,c=!1,u;for(;i>=0;--i)u=o[i],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),c=!0):(o[i]=o[o.length-1],o.pop());c&&(r.draw(),this._notify(r,n,e,"progress")),o.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=o.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var di=new OSe;const fA="transparent",FSe={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=sA(t||fA),r=n.valid&&sA(e||fA);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class USe{constructor(e,s,n,r){const o=s[n];r=Mp([e.to,r,o,e.from]);const i=Mp([e.from,o,r]);this._active=!0,this._fn=e.fn||FSe[e.type||typeof i],this._easing=lm[e.easing]||lm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],o=n-this._start,i=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Mp([e.to,s,r,e.from]),this._from=Mp([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,o=this._from,i=this._loop,c=this._to;let u;if(this._active=o!==c&&(i||s<n),!this._active){this._target[r]=c,this._notify(!0);return}if(s<0){this._target[r]=o;return}u=s/n%2,u=i&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(o,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class FL{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!as(e))return;const s=Object.keys(nn.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!as(o))return;const i={};for(const c of s)i[c]=o[c];(In(o.properties)&&o.properties||[r]).forEach(c=>{(c===r||!n.has(c))&&n.set(c,i)})})}_animateOptions(e,s){const n=s.options,r=BSe(e,n);if(!r)return[];const o=this._createAnimations(r,n);return n.$shared&&qSe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,s){const n=this._properties,r=[],o=e.$animations||(e.$animations={}),i=Object.keys(s),c=Date.now();let u;for(u=i.length-1;u>=0;--u){const d=i[u];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const m=s[d];let f=o[d];const p=n.get(d);if(f)if(p&&f.active()){f.update(p,m,c);continue}else f.cancel();if(!p||!p.duration){e[d]=m;continue}o[d]=f=new USe(p,e,d,m),r.push(f)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return di.add(this._chart,n),!0}}function qSe(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const o=t[n[r]];o&&o.active()&&s.push(o.wait())}return Promise.all(s)}function BSe(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function pA(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,o=s.max===void 0?e:0;return{start:n?o:r,end:n?r:o}}function VSe(t,e,s){if(s===!1)return!1;const n=pA(t,s),r=pA(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function HSe(t){let e,s,n,r;return as(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function UL(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=n.length;r<o;++r)s.push(n[r].index);return s}function hA(t,e,s,n={}){const r=t.keys,o=n.mode==="single";let i,c,u,d;if(e===null)return;let m=!1;for(i=0,c=r.length;i<c;++i){if(u=+r[i],u===s){if(m=!0,n.all)continue;break}d=t.values[u],sr(d)&&(o||e===0||xu(e)===xu(d))&&(e+=d)}return!m&&!n.all?0:e}function GSe(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",i=Object.keys(t),c=new Array(i.length);let u,d,m;for(u=0,d=i.length;u<d;++u)m=i[u],c[u]={[r]:m,[o]:t[m]};return c}function _y(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function jSe(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function WSe(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function zSe(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function gA(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const o=t[r.index];if(s&&o>0||!s&&o<0)return r.index}return null}function vA(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:o,vScale:i,index:c}=n,u=o.axis,d=i.axis,m=jSe(o,i,n),f=e.length;let p;for(let g=0;g<f;++g){const w=e[g],{[u]:C,[d]:E}=w,k=w._stacks||(w._stacks={});p=k[d]=zSe(r,m,C),p[c]=E,p._top=gA(p,i,!0,n.type),p._bottom=gA(p,i,!1,n.type);const A=p._visualValues||(p._visualValues={});A[c]=E}}function xy(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function QSe(t,e){return ec(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function KSe(t,e,s){return ec(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function md(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const o=r._stacks;if(!o||o[n]===void 0||o[n][s]===void 0)return;delete o[n][s],o[n]._visualValues!==void 0&&o[n]._visualValues[s]!==void 0&&delete o[n]._visualValues[s]}}}const ky=t=>t==="reset"||t==="none",bA=(t,e)=>e?t:Object.assign({},t),YSe=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:UL(s,!0),values:null};class dm{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_y(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&md(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(f,p,g,w)=>f==="x"?p:f==="r"?w:g,o=s.xAxisID=es(n.xAxisID,xy(e,"x")),i=s.yAxisID=es(n.yAxisID,xy(e,"y")),c=s.rAxisID=es(n.rAxisID,xy(e,"r")),u=s.indexAxis,d=s.iAxisID=r(u,o,i,c),m=s.vAxisID=r(u,i,o,c);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(i),s.rScale=this.getScaleForId(c),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ZT(this._data,this),e._stacked&&md(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(as(s)){const r=this._cachedMeta;this._data=GSe(s,r)}else if(n!==s){if(n){ZT(n,this);const r=this._cachedMeta;md(r),r._parsed=[]}s&&Object.isExtensible(s)&&PCe(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const o=s._stacked;s._stacked=_y(s.vScale,s),s.stack!==n.stack&&(r=!0,md(s),s.stack=n.stack),this._resyncElements(e),(r||o!==s._stacked)&&(vA(this,s._parsed),s._stacked=_y(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:i}=n,c=o.axis;let u=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],m,f,p;if(this._parsing===!1)n._parsed=r,n._sorted=!0,p=r;else{In(r[e])?p=this.parseArrayData(n,r,e,s):as(r[e])?p=this.parseObjectData(n,r,e,s):p=this.parsePrimitiveData(n,r,e,s);const g=()=>f[c]===null||d&&f[c]<d[c];for(m=0;m<s;++m)n._parsed[m+e]=f=p[m],u&&(g()&&(u=!1),d=f);n._sorted=u}i&&vA(this,p)}parsePrimitiveData(e,s,n,r){const{iScale:o,vScale:i}=e,c=o.axis,u=i.axis,d=o.getLabels(),m=o===i,f=new Array(r);let p,g,w;for(p=0,g=r;p<g;++p)w=p+n,f[p]={[c]:m||o.parse(d[w],w),[u]:i.parse(s[w],w)};return f}parseArrayData(e,s,n,r){const{xScale:o,yScale:i}=e,c=new Array(r);let u,d,m,f;for(u=0,d=r;u<d;++u)m=u+n,f=s[m],c[u]={x:o.parse(f[0],m),y:i.parse(f[1],m)};return c}parseObjectData(e,s,n,r){const{xScale:o,yScale:i}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d=new Array(r);let m,f,p,g;for(m=0,f=r;m<f;++m)p=m+n,g=s[p],d[m]={x:o.parse(c0(g,c),p),y:i.parse(c0(g,u),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,o=this._cachedMeta,i=s[e.axis],c={keys:UL(r,!0),values:s._stacks[e.axis]._visualValues};return hA(c,i,o.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const o=n[s.axis];let i=o===null?NaN:o;const c=r&&n._stacks[s.axis];r&&c&&(r.values=c,i=hA(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,o=n._sorted&&e===n.iScale,i=r.length,c=this._getOtherScale(e),u=YSe(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:f}=WSe(c);let p,g;function w(){g=r[p];const C=g[c.axis];return!sr(g[e.axis])||m>C||f<C}for(p=0;p<i&&!(!w()&&(this.updateRangeFromParsed(d,e,g,u),o));++p);if(o){for(p=i-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(d,e,g,u);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,o,i;for(r=0,o=s.length;r<o;++r)i=s[r][e.axis],sr(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=HSe(es(this.options.clip,VSe(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],o=s.chartArea,i=[],c=this._drawStart||0,u=this._drawCount||r.length-c,d=this.options.drawActiveElementsOnTop;let m;for(n.dataset&&n.dataset.draw(e,o,c,u),m=c;m<c+u;++m){const f=r[m];f.hidden||(f.active&&d?i.push(f):f.draw(e,o))}for(m=0;m<i.length;++m)i[m].draw(e,o)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const i=this._cachedMeta.data[e];o=i.$context||(i.$context=KSe(this.getContext(),e,i)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=QSe(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",o=this._cachedDataOpts,i=e+"-"+s,c=o[i],u=this.enableOptionSharing&&u0(n);if(c)return bA(c,u);const d=this.chart.config,m=d.datasetElementScopeKeys(this._type,e),f=r?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),m),g=Object.keys(nn.elements[e]),w=()=>this.getContext(n,r,s),C=d.resolveNamedOptions(p,g,w,f);return C.$shared&&(C.$shared=u,o[i]=Object.freeze(bA(C,u))),C}_resolveAnimations(e,s,n){const r=this.chart,o=this._cachedDataOpts,i=`animation-${s}`,c=o[i];if(c)return c;let u;if(r.options.animation!==!1){const m=this.chart.config,f=m.datasetAnimationScopeKeys(this._type,s),p=m.getOptionScopes(this.getDataset(),f);u=m.createResolver(p,this.getContext(e,n,s))}const d=new FL(r,u&&u.animations);return u&&u._cacheable&&(o[i]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||ky(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,o=this.getSharedOptions(n),i=this.includeOptions(s,o)||o!==r;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:i}}updateElement(e,s,n,r){ky(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!ky(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const o=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[c,u,d]of this._syncList)this[c](u,d);this._syncList=[];const r=n.length,o=s.length,i=Math.min(o,r);i&&this.parse(0,i),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,s,n=!0){const r=this._cachedMeta,o=r.data,i=e+s;let c;const u=d=>{for(d.length+=s,c=d.length-1;c>=i;c--)d[c]=d[c-s]};for(u(o),c=e;c<i;++c)o[c]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&md(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ot(dm,"defaults",{}),Ot(dm,"datasetElementType",null),Ot(dm,"dataElementType",null);class bh extends dm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:o}=s,i=this.chart._animationsDisabled;let{start:c,count:u}=LCe(s,r,i);this._drawStart=c,this._drawCount=u,DCe(s)&&(c=0,u=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:d},e),this.updateElements(r,c,u,e)}updateElements(e,s,n,r){const o=r==="reset",{iScale:i,vScale:c,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(s,r),p=i.axis,g=c.axis,{spanGaps:w,segment:C}=this.options,E=Qm(w)?w:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||r==="none",A=s+n,S=e.length;let T=s>0&&this.getParsed(s-1);for(let R=0;R<S;++R){const L=e[R],P=k?L:{};if(R<s||R>=A){P.skip=!0;continue}const I=this.getParsed(R),D=Is(I[g]),U=P[p]=i.getPixelForValue(I[p],R),M=P[g]=o||D?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,I,u):I[g],R);P.skip=isNaN(U)||isNaN(M)||D,P.stop=R>0&&Math.abs(I[p]-T[p])>E,C&&(P.parsed=I,P.raw=d.data[R]),f&&(P.options=m||this.resolveDataElementOptions(R,L.active?"active":r)),k||this.updateElement(L,R,P,r),T=I}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const o=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,o,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ot(bh,"id","line"),Ot(bh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ot(bh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function nl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Nw{constructor(e){Ot(this,"options");this.options=e||{}}static override(e){Object.assign(Nw.prototype,e)}init(){}formats(){return nl()}parse(){return nl()}format(){return nl()}add(){return nl()}diff(){return nl()}startOf(){return nl()}endOf(){return nl()}}var XSe={_date:Nw};function JSe(t,e,s,n){const{controller:r,data:o,_sorted:i}=t,c=r._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&i&&o.length){const d=c._reversePixels?ACe:yl;if(n){if(r._sharedOptions){const m=o[0],f=typeof m.getRange=="function"&&m.getRange(e);if(f){const p=d(o,e,s-f),g=d(o,e,s+f);return{lo:p.lo,hi:g.hi}}}}else{const m=d(o,e,s);if(u){const{vScale:f}=r._cachedMeta,{_parsed:p}=t,g=p.slice(0,m.lo+1).reverse().findIndex(C=>!Is(C[f.axis]));m.lo-=Math.max(0,g);const w=p.slice(m.hi).findIndex(C=>!Is(C[f.axis]));m.hi+=Math.max(0,w)}return m}}return{lo:0,hi:o.length-1}}function Gv(t,e,s,n,r){const o=t.getSortedVisibleDatasetMetas(),i=s[e];for(let c=0,u=o.length;c<u;++c){const{index:d,data:m}=o[c],{lo:f,hi:p}=JSe(o[c],e,i,r);for(let g=f;g<=p;++g){const w=m[g];w.skip||n(w,d,g)}}}function ZSe(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const o=e?Math.abs(n.x-r.x):0,i=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}function wy(t,e,s,n,r){const o=[];return!r&&!t.isPointInArea(e)||Gv(t,s,e,function(c,u,d){!r&&!Km(c,t.chartArea,0)||c.inRange(e.x,e.y,n)&&o.push({element:c,datasetIndex:u,index:d})},!0),o}function eTe(t,e,s,n){let r=[];function o(i,c,u){const{startAngle:d,endAngle:m}=i.getProps(["startAngle","endAngle"],n),{angle:f}=CCe(i,{x:e.x,y:e.y});wL(f,d,m)&&r.push({element:i,datasetIndex:c,index:u})}return Gv(t,s,e,o),r}function tTe(t,e,s,n,r,o){let i=[];const c=ZSe(s);let u=Number.POSITIVE_INFINITY;function d(m,f,p){const g=m.inRange(e.x,e.y,r);if(n&&!g)return;const w=m.getCenterPoint(r);if(!(!!o||t.isPointInArea(w))&&!g)return;const E=c(e,w);E<u?(i=[{element:m,datasetIndex:f,index:p}],u=E):E===u&&i.push({element:m,datasetIndex:f,index:p})}return Gv(t,s,e,d),i}function Ey(t,e,s,n,r,o){return!o&&!t.isPointInArea(e)?[]:s==="r"&&!n?eTe(t,e,s,r):tTe(t,e,s,n,r,o)}function yA(t,e,s,n,r){const o=[],i=s==="x"?"inXRange":"inYRange";let c=!1;return Gv(t,s,e,(u,d,m)=>{u[i]&&u[i](e[s],r)&&(o.push({element:u,datasetIndex:d,index:m}),c=c||u.inRange(e.x,e.y,r))}),n&&!c?[]:o}var sTe={modes:{index(t,e,s,n){const r=al(e,t),o=s.axis||"x",i=s.includeInvisible||!1,c=s.intersect?wy(t,r,o,n,i):Ey(t,r,o,!1,n,i),u=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const m=c[0].index,f=d.data[m];f&&!f.skip&&u.push({element:f,datasetIndex:d.index,index:m})}),u):[]},dataset(t,e,s,n){const r=al(e,t),o=s.axis||"xy",i=s.includeInvisible||!1;let c=s.intersect?wy(t,r,o,n,i):Ey(t,r,o,!1,n,i);if(c.length>0){const u=c[0].datasetIndex,d=t.getDatasetMeta(u).data;c=[];for(let m=0;m<d.length;++m)c.push({element:d[m],datasetIndex:u,index:m})}return c},point(t,e,s,n){const r=al(e,t),o=s.axis||"xy",i=s.includeInvisible||!1;return wy(t,r,o,n,i)},nearest(t,e,s,n){const r=al(e,t),o=s.axis||"xy",i=s.includeInvisible||!1;return Ey(t,r,o,s.intersect,n,i)},x(t,e,s,n){const r=al(e,t);return yA(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=al(e,t);return yA(t,r,"y",s.intersect,n)}}};const qL=["left","top","right","bottom"];function fd(t,e){return t.filter(s=>s.pos===e)}function _A(t,e){return t.filter(s=>qL.indexOf(s.pos)===-1&&s.box.axis===e)}function pd(t,e){return t.sort((s,n)=>{const r=e?n:s,o=e?s:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function nTe(t){const e=[];let s,n,r,o,i,c;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:o,options:{stack:i,stackWeight:c=1}}=r,e.push({index:s,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&o+i,stackWeight:c});return e}function rTe(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:o}=s;if(!n||!qL.includes(r))continue;const i=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=o}return e}function oTe(t,e){const s=rTe(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let o,i,c;for(o=0,i=t.length;o<i;++o){c=t[o];const{fullSize:u}=c.box,d=s[c.stack],m=d&&c.stackWeight/d.weight;c.horizontal?(c.width=m?m*n:u&&e.availableWidth,c.height=r):(c.width=n,c.height=m?m*r:u&&e.availableHeight)}return s}function iTe(t){const e=nTe(t),s=pd(e.filter(d=>d.box.fullSize),!0),n=pd(fd(e,"left"),!0),r=pd(fd(e,"right")),o=pd(fd(e,"top"),!0),i=pd(fd(e,"bottom")),c=_A(e,"x"),u=_A(e,"y");return{fullSize:s,leftAndTop:n.concat(o),rightAndBottom:r.concat(u).concat(i).concat(c),chartArea:fd(e,"chartArea"),vertical:n.concat(r).concat(u),horizontal:o.concat(i).concat(c)}}function xA(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function BL(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aTe(t,e,s,n){const{pos:r,box:o}=s,i=t.maxPadding;if(!as(r)){s.size&&(t[r]-=s.size);const f=n[s.stack]||{size:0,count:1};f.size=Math.max(f.size,s.horizontal?o.height:o.width),s.size=f.size/f.count,t[r]+=s.size}o.getPadding&&BL(i,o.getPadding());const c=Math.max(0,e.outerWidth-xA(i,t,"left","right")),u=Math.max(0,e.outerHeight-xA(i,t,"top","bottom")),d=c!==t.w,m=u!==t.h;return t.w=c,t.h=u,s.horizontal?{same:d,other:m}:{same:m,other:d}}function lTe(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function cTe(t,e){const s=e.maxPadding;function n(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(i=>{o[i]=Math.max(e[i],s[i])}),o}return n(t?["left","right"]:["top","bottom"])}function Dd(t,e,s,n){const r=[];let o,i,c,u,d,m;for(o=0,i=t.length,d=0;o<i;++o){c=t[o],u=c.box,u.update(c.width||e.w,c.height||e.h,cTe(c.horizontal,e));const{same:f,other:p}=aTe(e,s,c,n);d|=f&&r.length,m=m||p,u.fullSize||r.push(c)}return d&&Dd(r,e,s,n)||m}function Lp(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function kA(t,e,s,n){const r=s.padding;let{x:o,y:i}=e;for(const c of t){const u=c.box,d=n[c.stack]||{placed:0,weight:1},m=c.stackWeight/d.weight||1;if(c.horizontal){const f=e.w*m,p=d.size||u.height;u0(d.start)&&(i=d.start),u.fullSize?Lp(u,r.left,i,s.outerWidth-r.right-r.left,p):Lp(u,e.left+d.placed,i,f,p),d.start=i,d.placed+=f,i=u.bottom}else{const f=e.h*m,p=d.size||u.width;u0(d.start)&&(o=d.start),u.fullSize?Lp(u,o,r.top,p,s.outerHeight-r.bottom-r.top):Lp(u,o,e.top+d.placed,p,f),d.start=o,d.placed+=f,o=u.right}}e.x=o,e.y=i}var Jr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=ro(t.options.layout.padding),o=Math.max(e-r.width,0),i=Math.max(s-r.height,0),c=iTe(t.boxes),u=c.vertical,d=c.horizontal;gs(t.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const m=u.reduce((C,E)=>E.box.options&&E.box.options.display===!1?C:C+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:o,availableHeight:i,vBoxMaxWidth:o/2/m,hBoxMaxHeight:i/2}),p=Object.assign({},r);BL(p,ro(n));const g=Object.assign({maxPadding:p,w:o,h:i,x:r.left,y:r.top},r),w=oTe(u.concat(d),f);Dd(c.fullSize,g,f,w),Dd(u,g,f,w),Dd(d,g,f,w)&&Dd(u,g,f,w),lTe(g),kA(c.leftAndTop,g,f,w),g.x+=g.w,g.y+=g.h,kA(c.rightAndBottom,g,f,w),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},gs(c.chartArea,C=>{const E=C.box;Object.assign(E,t.chartArea),E.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class VL{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class uTe extends VL{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yh="$chartjs",dTe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wA=t=>t===null||t==="";function mTe(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[yh]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",wA(r)){const o=cA(t,"width");o!==void 0&&(t.width=o)}if(wA(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=cA(t,"height");o!==void 0&&(t.height=o)}return t}const HL=ESe?{passive:!0}:!1;function fTe(t,e,s){t&&t.addEventListener(e,s,HL)}function pTe(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,HL)}function hTe(t,e){const s=dTe[t.type]||t.type,{x:n,y:r}=al(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function f0(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function gTe(t,e,s){const n=t.canvas,r=new MutationObserver(o=>{let i=!1;for(const c of o)i=i||f0(c.addedNodes,n),i=i&&!f0(c.removedNodes,n);i&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function vTe(t,e,s){const n=t.canvas,r=new MutationObserver(o=>{let i=!1;for(const c of o)i=i||f0(c.removedNodes,n),i=i&&!f0(c.addedNodes,n);i&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Xm=new Map;let EA=0;function GL(){const t=window.devicePixelRatio;t!==EA&&(EA=t,Xm.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function bTe(t,e){Xm.size||window.addEventListener("resize",GL),Xm.set(t,e)}function yTe(t){Xm.delete(t),Xm.size||window.removeEventListener("resize",GL)}function _Te(t,e,s){const n=t.canvas,r=n&&Dw(n);if(!r)return;const o=SL((c,u)=>{const d=r.clientWidth;s(c,u),d<r.clientWidth&&s()},window),i=new ResizeObserver(c=>{const u=c[0],d=u.contentRect.width,m=u.contentRect.height;d===0&&m===0||o(d,m)});return i.observe(r),bTe(t,o),i}function Cy(t,e,s){s&&s.disconnect(),e==="resize"&&yTe(t)}function xTe(t,e,s){const n=t.canvas,r=SL(o=>{t.ctx!==null&&s(hTe(o,t))},t);return fTe(n,e,r),r}class kTe extends VL{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(mTe(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[yh])return!1;const n=s[yh].initial;["height","width"].forEach(o=>{const i=n[o];Is(i)?s.removeAttribute(o):s.setAttribute(o,i)});const r=n.style||{};return Object.keys(r).forEach(o=>{s.style[o]=r[o]}),s.width=s.width,delete s[yh],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),i={attach:gTe,detach:vTe,resize:_Te}[s]||xTe;r[s]=i(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:Cy,detach:Cy,resize:Cy}[s]||pTe)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return wSe(e,s,n,r)}isAttached(e){const s=e&&Dw(e);return!!(s&&s.isConnected)}}function wTe(t){return!Lw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uTe:kTe}var Jp;let tc=(Jp=class{constructor(){Ot(this,"x");Ot(this,"y");Ot(this,"active",!1);Ot(this,"options");Ot(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Qm(this.x)&&Qm(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(o=>{r[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),r}},Ot(Jp,"defaults",{}),Ot(Jp,"defaultRoutes"),Jp);function ETe(t,e){const s=t.options.ticks,n=CTe(t),r=Math.min(s.maxTicksLimit||n,n),o=s.major.enabled?TTe(e):[],i=o.length,c=o[0],u=o[i-1],d=[];if(i>r)return ATe(e,d,o,i/r),d;const m=STe(o,e,r);if(i>0){let f,p;const g=i>1?Math.round((u-c)/(i-1)):null;for(Dp(e,d,m,Is(g)?0:c-g,c),f=0,p=i-1;f<p;f++)Dp(e,d,m,o[f],o[f+1]);return Dp(e,d,m,u,Is(g)?e.length:u+g),d}return Dp(e,d,m),d}function CTe(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function STe(t,e,s){const n=ITe(t),r=e.length/s;if(!n)return Math.max(r,1);const o=xCe(n);for(let i=0,c=o.length-1;i<c;i++){const u=o[i];if(u>r)return u}return Math.max(r,1)}function TTe(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function ATe(t,e,s,n){let r=0,o=s[0],i;for(n=Math.ceil(n),i=0;i<t.length;i++)i===o&&(e.push(t[i]),r++,o=s[r*n])}function Dp(t,e,s,n,r){const o=es(n,0),i=Math.min(es(r,t.length),t.length);let c=0,u,d,m;for(s=Math.ceil(s),r&&(u=r-n,s=u/Math.floor(u/s)),m=o;m<0;)c++,m=Math.round(o+c*s);for(d=Math.max(o,0);d<i;d++)d===m&&(e.push(t[d]),c++,m=Math.round(o+c*s))}function ITe(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const PTe=t=>t==="left"?"right":t==="right"?"left":t,CA=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,SA=(t,e)=>Math.min(e||t,t);function TA(t,e){const s=[],n=t.length/e,r=t.length;let o=0;for(;o<r;o+=n)s.push(t[Math.floor(o)]);return s}function MTe(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),o=t._startPixel,i=t._endPixel,c=1e-6;let u=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(u-o,i-u):e===0?d=(t.getPixelForTick(1)-u)/2:d=(u-t.getPixelForTick(r-1))/2,u+=r<e?d:-d,u<o-c||u>i+c)))return u}function $Te(t,e){gs(t,s=>{const n=s.gc,r=n.length/2;let o;if(r>e){for(o=0;o<r;++o)delete s.data[n[o]];n.splice(0,r)}})}function hd(t){return t.drawTicks?t.tickLength:0}function AA(t,e){if(!t.display)return 0;const s=nr(t.font,e),n=ro(t.padding);return(In(t.text)?t.text.length:1)*s.lineHeight+n.height}function RTe(t,e){return ec(t,{scale:e,type:"scale"})}function LTe(t,e,s){return ec(t,{tick:s,index:e,type:"tick"})}function DTe(t,e,s){let n=Cw(t);return(s&&e!=="right"||!s&&e==="right")&&(n=PTe(n)),n}function NTe(t,e,s,n){const{top:r,left:o,bottom:i,right:c,chart:u}=t,{chartArea:d,scales:m}=u;let f=0,p,g,w;const C=i-r,E=c-o;if(t.isHorizontal()){if(g=Wn(n,o,c),as(s)){const k=Object.keys(s)[0],A=s[k];w=m[k].getPixelForValue(A)+C-e}else s==="center"?w=(d.bottom+d.top)/2+C-e:w=CA(t,s,e);p=c-o}else{if(as(s)){const k=Object.keys(s)[0],A=s[k];g=m[k].getPixelForValue(A)-E+e}else s==="center"?g=(d.left+d.right)/2-E+e:g=CA(t,s,e);w=Wn(n,i,r),f=s==="left"?-vo:vo}return{titleX:g,titleY:w,maxWidth:p,rotation:f}}class sc extends tc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=Pr(e,Number.POSITIVE_INFINITY),s=Pr(s,Number.NEGATIVE_INFINITY),n=Pr(n,Number.POSITIVE_INFINITY),r=Pr(r,Number.NEGATIVE_INFINITY),{min:Pr(e,n),max:Pr(s,r),minDefined:sr(e),maxDefined:sr(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:o}=this.getUserBounds(),i;if(r&&o)return{min:s,max:n};const c=this.getMatchingVisibleMetas();for(let u=0,d=c.length;u<d;++u)i=c[u].controller.getMinMax(this,e),r||(s=Math.min(s,i.min)),o||(n=Math.max(n,i.max));return s=o&&s>n?n:s,n=r&&s>n?s:n,{min:Pr(s,Pr(n,s)),max:Pr(n,Pr(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ms(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:o,ticks:i}=this.options,c=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tSe(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?TA(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=ETe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ms(this.options.afterUpdate,[this])}beforeSetDimensions(){Ms(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ms(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ms(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ms(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,o;for(n=0,r=e.length;n<r;n++)o=e[n],o.label=Ms(s.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Ms(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ms(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=SA(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,o=s.maxRotation;let i=r,c,u,d;if(!this._isVisible()||!s.display||r>=o||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),f=m.widest.width,p=m.highest.height,g=Xr(this.chart.width-f,0,this.maxWidth);c=e.offset?this.maxWidth/n:g/(n-1),f+6>c&&(c=g/(n-(e.offset?.5:1)),u=this.maxHeight-hd(e.grid)-s.padding-AA(e.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),i=ECe(Math.min(Math.asin(Xr((m.highest.height+6)/c,-1,1)),Math.asin(Xr(u/d,-1,1))-Math.asin(Xr(p/d,-1,1)))),i=Math.max(r,Math.min(o,i))),this.labelRotation=i}afterCalculateLabelRotation(){Ms(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ms(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:o}}=this,i=this._isVisible(),c=this.isHorizontal();if(i){const u=AA(r,s.options.font);if(c?(e.width=this.maxWidth,e.height=hd(o)+u):(e.height=this.maxHeight,e.width=hd(o)+u),n.display&&this.ticks.length){const{first:d,last:m,widest:f,highest:p}=this._getLabelSizes(),g=n.padding*2,w=bl(this.labelRotation),C=Math.cos(w),E=Math.sin(w);if(c){const k=n.mirror?0:E*f.width+C*p.height;e.height=Math.min(this.maxHeight,e.height+k+g)}else{const k=n.mirror?0:C*f.width+E*p.height;e.width=Math.min(this.maxWidth,e.width+k+g)}this._calculatePadding(d,m,E,C)}}this._handleMargins(),c?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:o,padding:i},position:c}=this.options,u=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;u?d?(p=r*e.width,g=n*s.height):(p=n*e.height,g=r*s.width):o==="start"?g=s.width:o==="end"?p=e.width:o!=="inner"&&(p=e.width/2,g=s.width/2),this.paddingLeft=Math.max((p-m+i)*this.width/(this.width-m),0),this.paddingRight=Math.max((g-f+i)*this.width/(this.width-f),0)}else{let m=s.height/2,f=e.height/2;o==="start"?(m=0,f=e.height):o==="end"&&(m=s.height,f=0),this.paddingTop=m+i,this.paddingBottom=f+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ms(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)Is(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=TA(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:o}=this,i=[],c=[],u=Math.floor(s/SA(s,n));let d=0,m=0,f,p,g,w,C,E,k,A,S,T,R;for(f=0;f<s;f+=u){if(w=e[f].label,C=this._resolveTickFontOptions(f),r.font=E=C.string,k=o[E]=o[E]||{data:{},gc:[]},A=C.lineHeight,S=T=0,!Is(w)&&!In(w))S=rA(r,k.data,k.gc,S,w),T=A;else if(In(w))for(p=0,g=w.length;p<g;++p)R=w[p],!Is(R)&&!In(R)&&(S=rA(r,k.data,k.gc,S,R),T+=A);i.push(S),c.push(T),d=Math.max(S,d),m=Math.max(T,m)}$Te(o,s);const L=i.indexOf(d),P=c.indexOf(m),I=D=>({width:i[D]||0,height:c[D]||0});return{first:I(0),last:I(s-1),widest:I(L),highest:I(P),widths:i,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return TCe(this._alignToPixels?sl(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=LTe(this.getContext(),e,n))}return this.$context||(this.$context=RTe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=bl(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),o=this._getLabelSizes(),i=e.autoSkipPadding||0,c=o?o.widest.width+i:0,u=o?o.highest.height+i:0;return this.isHorizontal()?u*n>c*r?c/n:u/r:u*r<c*n?u/n:c/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:o,position:i,border:c}=r,u=o.offset,d=this.isHorizontal(),f=this.ticks.length+(u?1:0),p=hd(o),g=[],w=c.setContext(this.getContext()),C=w.display?w.width:0,E=C/2,k=function(re){return sl(n,re,C)};let A,S,T,R,L,P,I,D,U,M,x,$;if(i==="top")A=k(this.bottom),P=this.bottom-p,D=A-E,M=k(e.top)+E,$=e.bottom;else if(i==="bottom")A=k(this.top),M=e.top,$=k(e.bottom)-E,P=A+E,D=this.top+p;else if(i==="left")A=k(this.right),L=this.right-p,I=A-E,U=k(e.left)+E,x=e.right;else if(i==="right")A=k(this.left),U=e.left,x=k(e.right)-E,L=A+E,I=this.left+p;else if(s==="x"){if(i==="center")A=k((e.top+e.bottom)/2+.5);else if(as(i)){const re=Object.keys(i)[0],J=i[re];A=k(this.chart.scales[re].getPixelForValue(J))}M=e.top,$=e.bottom,P=A+E,D=P+p}else if(s==="y"){if(i==="center")A=k((e.left+e.right)/2);else if(as(i)){const re=Object.keys(i)[0],J=i[re];A=k(this.chart.scales[re].getPixelForValue(J))}L=A-E,I=L-p,U=e.left,x=e.right}const Z=es(r.ticks.maxTicksLimit,f),me=Math.max(1,Math.ceil(f/Z));for(S=0;S<f;S+=me){const re=this.getContext(S),J=o.setContext(re),le=c.setContext(re),se=J.lineWidth,z=J.color,ce=le.dash||[],pe=le.dashOffset,_e=J.tickWidth,Ee=J.tickColor,Ue=J.tickBorderDash||[],ze=J.tickBorderDashOffset;T=MTe(this,S,u),T!==void 0&&(R=sl(n,T,se),d?L=I=U=x=R:P=D=M=$=R,g.push({tx1:L,ty1:P,tx2:I,ty2:D,x1:U,y1:M,x2:x,y2:$,width:se,color:z,borderDash:ce,borderDashOffset:pe,tickWidth:_e,tickColor:Ee,tickBorderDash:Ue,tickBorderDashOffset:ze}))}return this._ticksLength=f,this._borderValue=A,g}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:o}=n,i=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:d,padding:m,mirror:f}=o,p=hd(n.grid),g=p+m,w=f?-m:g,C=-bl(this.labelRotation),E=[];let k,A,S,T,R,L,P,I,D,U,M,x,$="middle";if(r==="top")L=this.bottom-w,P=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+w,P=this._getXAxisLabelAlignment();else if(r==="left"){const me=this._getYAxisLabelAlignment(p);P=me.textAlign,R=me.x}else if(r==="right"){const me=this._getYAxisLabelAlignment(p);P=me.textAlign,R=me.x}else if(s==="x"){if(r==="center")L=(e.top+e.bottom)/2+g;else if(as(r)){const me=Object.keys(r)[0],re=r[me];L=this.chart.scales[me].getPixelForValue(re)+g}P=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")R=(e.left+e.right)/2-g;else if(as(r)){const me=Object.keys(r)[0],re=r[me];R=this.chart.scales[me].getPixelForValue(re)}P=this._getYAxisLabelAlignment(p).textAlign}s==="y"&&(u==="start"?$="top":u==="end"&&($="bottom"));const Z=this._getLabelSizes();for(k=0,A=c.length;k<A;++k){S=c[k],T=S.label;const me=o.setContext(this.getContext(k));I=this.getPixelForTick(k)+o.labelOffset,D=this._resolveTickFontOptions(k),U=D.lineHeight,M=In(T)?T.length:1;const re=M/2,J=me.color,le=me.textStrokeColor,se=me.textStrokeWidth;let z=P;i?(R=I,P==="inner"&&(k===A-1?z=this.options.reverse?"left":"right":k===0?z=this.options.reverse?"right":"left":z="center"),r==="top"?d==="near"||C!==0?x=-M*U+U/2:d==="center"?x=-Z.highest.height/2-re*U+U:x=-Z.highest.height+U/2:d==="near"||C!==0?x=U/2:d==="center"?x=Z.highest.height/2-re*U:x=Z.highest.height-M*U,f&&(x*=-1),C!==0&&!me.showLabelBackdrop&&(R+=U/2*Math.sin(C))):(L=I,x=(1-M)*U/2);let ce;if(me.showLabelBackdrop){const pe=ro(me.backdropPadding),_e=Z.heights[k],Ee=Z.widths[k];let Ue=x-pe.top,ze=0-pe.left;switch($){case"middle":Ue-=_e/2;break;case"bottom":Ue-=_e;break}switch(P){case"center":ze-=Ee/2;break;case"right":ze-=Ee;break;case"inner":k===A-1?ze-=Ee:k>0&&(ze-=Ee/2);break}ce={left:ze,top:Ue,width:Ee+pe.width,height:_e+pe.height,color:me.backdropColor}}E.push({label:T,font:D,textOffset:x,options:{rotation:C,color:J,strokeColor:le,strokeWidth:se,textAlign:z,textBaseline:$,translation:[R,L],backdrop:ce}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-bl(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:o}}=this.options,i=this._getLabelSizes(),c=e+o,u=i.widest.width;let d,m;return s==="left"?r?(m=this.right+o,n==="near"?d="left":n==="center"?(d="center",m+=u/2):(d="right",m+=u)):(m=this.right-c,n==="near"?d="right":n==="center"?(d="center",m-=u/2):(d="left",m=this.left)):s==="right"?r?(m=this.left+o,n==="near"?d="right":n==="center"?(d="center",m-=u/2):(d="left",m-=u)):(m=this.left+c,n==="near"?d="left":n==="center"?(d="center",m+=u/2):(d="right",m=this.right)):d="right",{textAlign:d,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:o,height:i}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,o,i),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,i;const c=(u,d,m)=>{!m.width||!m.color||(n.save(),n.lineWidth=m.width,n.strokeStyle=m.color,n.setLineDash(m.borderDash||[]),n.lineDashOffset=m.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(o=0,i=r.length;o<i;++o){const u=r[o];s.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),s.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,o=n.setContext(this.getContext()),i=n.display?o.width:0;if(!i)return;const c=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let d,m,f,p;this.isHorizontal()?(d=sl(e,this.left,i)-i/2,m=sl(e,this.right,c)+c/2,f=p=u):(f=sl(e,this.top,i)-i/2,p=sl(e,this.bottom,c)+c/2,d=m=u),s.save(),s.lineWidth=o.width,s.strokeStyle=o.color,s.beginPath(),s.moveTo(d,f),s.lineTo(m,p),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&Iw(n,r);const o=this.getLabelItems(e);for(const i of o){const c=i.options,u=i.font,d=i.label,m=i.textOffset;Ym(n,d,0,m,u,c)}r&&Pw(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const o=nr(n.font),i=ro(n.padding),c=n.align;let u=o.lineHeight/2;s==="bottom"||s==="center"||as(s)?(u+=i.bottom,In(n.text)&&(u+=o.lineHeight*(n.text.length-1))):u+=i.top;const{titleX:d,titleY:m,maxWidth:f,rotation:p}=NTe(this,u,s,c);Ym(e,n.text,0,0,o,{color:n.color,maxWidth:f,rotation:p,textAlign:DTe(c,s,r),textBaseline:"middle",translation:[d,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=es(e.grid&&e.grid.z,-1),r=es(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sc.prototype.draw?[{z:s,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let o,i;for(o=0,i=s.length;o<i;++o){const c=s[o];c[n]===this.id&&(!e||c.type===e)&&r.push(c)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return nr(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Np{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;UTe(s)&&(n=this.register(s));const r=this.items,o=e.id,i=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,OTe(e,i,n),this.override&&nn.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in nn[r]&&(delete nn[r][n],this.override&&delete ql[n])}}function OTe(t,e,s){const n=zm(Object.create(null),[s?nn.get(s):{},nn.get(e),t.defaults]);nn.set(e,n),t.defaultRoutes&&FTe(e,t.defaultRoutes),t.descriptors&&nn.describe(e,t.descriptors)}function FTe(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),o=[t].concat(n).join("."),i=e[s].split("."),c=i.pop(),u=i.join(".");nn.route(o,r,u,c)})}function UTe(t){return"id"in t&&"defaults"in t}class qTe{constructor(){this.controllers=new Np(dm,"datasets",!0),this.elements=new Np(tc,"elements"),this.plugins=new Np(Object,"plugins"),this.scales=new Np(sc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const o=n||this._getRegistryForType(r);n||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):gs(r,i=>{const c=n||this._getRegistryForType(i);this._exec(e,c,i)})})}_exec(e,s,n){const r=ww(e);Ms(n["before"+r],[],n),s[e](n),Ms(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Do=new qTe;class BTe{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(o,e,s,n);return s==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,s,n,r){r=r||{};for(const o of e){const i=o.plugin,c=i[n],u=[s,r,o.options];if(Ms(c,u,i)===!1&&r.cancelable)return!1}return!0}invalidate(){Is(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=es(n.options&&n.options.plugins,{}),o=VTe(n);return r===!1&&!s?[]:GTe(e,o,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(o,i)=>o.filter(c=>!i.some(u=>c.plugin.id===u.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function VTe(t){const e={},s=[],n=Object.keys(Do.plugins.items);for(let o=0;o<n.length;o++)s.push(Do.getPlugin(n[o]));const r=t.plugins||[];for(let o=0;o<r.length;o++){const i=r[o];s.indexOf(i)===-1&&(s.push(i),e[i.id]=!0)}return{plugins:s,localIds:e}}function HTe(t,e){return!e&&t===!1?null:t===!0?{}:t}function GTe(t,{plugins:e,localIds:s},n,r){const o=[],i=t.getContext();for(const c of e){const u=c.id,d=HTe(n[u],r);d!==null&&o.push({plugin:c,options:jTe(t.config,{plugin:c,local:s[u]},d,i)})}return o}function jTe(t,{plugin:e,local:s},n,r){const o=t.pluginScopeKeys(e),i=t.getOptionScopes(n,o);return s&&e.defaults&&i.push(e.defaults),t.createResolver(i,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function s1(t,e){const s=nn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function WTe(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function zTe(t,e){return t===e?"_index_":"_value_"}function IA(t){if(t==="x"||t==="y"||t==="r")return t}function QTe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function n1(t,...e){if(IA(t))return t;for(const s of e){const n=s.axis||QTe(s.position)||t.length>1&&IA(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function PA(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function KTe(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return PA(t,"x",s[0])||PA(t,"y",s[0])}return{}}function YTe(t,e){const s=ql[t.type]||{scales:{}},n=e.scales||{},r=s1(t.type,e),o=Object.create(null);return Object.keys(n).forEach(i=>{const c=n[i];if(!as(c))return console.error(`Invalid scale configuration for scale: ${i}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${i}`);const u=n1(i,c,KTe(i,t),nn.scales[c.type]),d=zTe(u,r),m=s.scales||{};o[i]=im(Object.create(null),[{axis:u},c,m[u],m[d]])}),t.data.datasets.forEach(i=>{const c=i.type||t.type,u=i.indexAxis||s1(c,e),m=(ql[c]||{}).scales||{};Object.keys(m).forEach(f=>{const p=WTe(f,u),g=i[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),im(o[g],[{axis:p},n[g],m[f]])})}),Object.keys(o).forEach(i=>{const c=o[i];im(c,[nn.scales[c.type],nn.scale])}),o}function jL(t){const e=t.options||(t.options={});e.plugins=es(e.plugins,{}),e.scales=YTe(t,e)}function WL(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function XTe(t){return t=t||{},t.data=WL(t.data),jL(t),t}const MA=new Map,zL=new Set;function Op(t,e){let s=MA.get(t);return s||(s=e(),MA.set(t,s),zL.add(s)),s}const gd=(t,e,s)=>{const n=c0(e,s);n!==void 0&&t.add(n)};class JTe{constructor(e){this._config=XTe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=WL(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),jL(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Op(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Op(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Op(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Op(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:o}=this,i=this._cachedScopes(e,n),c=i.get(s);if(c)return c;const u=new Set;s.forEach(m=>{e&&(u.add(e),m.forEach(f=>gd(u,e,f))),m.forEach(f=>gd(u,r,f)),m.forEach(f=>gd(u,ql[o]||{},f)),m.forEach(f=>gd(u,nn,f)),m.forEach(f=>gd(u,Z_,f))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),zL.has(s)&&i.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,ql[s]||{},nn.datasets[s]||{},{type:s},nn,Z_]}resolveNamedOptions(e,s,n,r=[""]){const o={$shared:!0},{resolver:i,subPrefixes:c}=$A(this._resolverCache,e,r);let u=i;if(eAe(i,s)){o.$shared=!1,n=Na(n)?n():n;const d=this.createResolver(e,n,c);u=ku(i,n,d)}for(const d of s)o[d]=u[d];return o}createResolver(e,s,n=[""],r){const{resolver:o}=$A(this._resolverCache,e,n);return as(s)?ku(o,s,void 0,r):o}}function $A(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let o=n.get(r);return o||(o={resolver:Mw(e,s),subPrefixes:s.filter(c=>!c.toLowerCase().includes("hover"))},n.set(r,o)),o}const ZTe=t=>as(t)&&Object.getOwnPropertyNames(t).some(e=>Na(t[e]));function eAe(t,e){const{isScriptable:s,isIndexable:n}=PL(t);for(const r of e){const o=s(r),i=n(r),c=(i||o)&&t[r];if(o&&(Na(c)||ZTe(c))||i&&In(c))return!0}return!1}var tAe="4.4.8";const sAe=["top","bottom","left","right","chartArea"];function RA(t,e){return t==="top"||t==="bottom"||sAe.indexOf(t)===-1&&e==="x"}function LA(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function DA(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ms(s&&s.onComplete,[t],e)}function nAe(t){const e=t.chart,s=e.options.animation;Ms(s&&s.onProgress,[t],e)}function QL(t){return Lw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _h={},NA=t=>{const e=QL(t);return Object.values(_h).filter(s=>s.canvas===e).pop()};function rAe(t,e,s){const n=Object.keys(t);for(const r of n){const o=+r;if(o>=e){const i=t[r];delete t[r],(s>0||o>e)&&(t[o+s]=i)}}}function oAe(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}function Fp(t,e,s){return t.options.clip?t[s]:e[s]}function iAe(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Fp(s,e,"left"),right:Fp(s,e,"right"),top:Fp(n,e,"top"),bottom:Fp(n,e,"bottom")}:e}var zi;let Mf=(zi=class{static register(...e){Do.add(...e),OA()}static unregister(...e){Do.remove(...e),OA()}constructor(e,s){const n=this.config=new JTe(s),r=QL(e),o=NA(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||wTe(r)),this.platform.updateConfig(n);const c=this.platform.acquireContext(r,i.aspectRatio),u=c&&c.canvas,d=u&&u.height,m=u&&u.width;if(this.id=mCe(),this.ctx=c,this.canvas=u,this.width=m,this.height=d,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new BTe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$Ce(f=>this.update(f),i.resizeDelay||0),this._dataChanges=[],_h[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}di.listen(this,"complete",DA),di.listen(this,"progress",nAe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:o}=this;return Is(e)?s&&o?o:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Do}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oA(this.canvas,this.ctx),this}stop(){return di.stop(this),this}resize(e,s){di.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,s,o),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,lA(this,c,!0)&&(this.notifyPlugins("resize",{size:i}),Ms(n.onResize,[this,i],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};gs(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((i,c)=>(i[c]=!1,i),{});let o=[];s&&(o=o.concat(Object.keys(s).map(i=>{const c=s[i],u=n1(i,c),d=u==="r",m=u==="x";return{options:c,dposition:d?"chartArea":m?"bottom":"left",dtype:d?"radialLinear":m?"category":"linear"}}))),gs(o,i=>{const c=i.options,u=c.id,d=n1(u,c),m=es(c.type,i.dtype);(c.position===void 0||RA(c.position,d)!==RA(i.dposition))&&(c.position=i.dposition),r[u]=!0;let f=null;if(u in n&&n[u].type===m)f=n[u];else{const p=Do.getScale(m);f=new p({id:u,type:m,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(c,e)}),gs(r,(i,c)=>{i||delete n[c]}),gs(n,i=>{Jr.configure(this,i,i.options),Jr.addBox(this,i)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,o)=>r.index-o.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(LA("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const o=s[n];let i=this.getDatasetMeta(n);const c=o.type||this.config.type;if(i.type&&i.type!==c&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=c,i.indexAxis=o.indexAxis||s1(c,this.options),i.order=o.order||0,i.index=n,i.label=""+o.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const u=Do.getController(c),{datasetElementType:d,dataElementType:m}=nn.datasets[c];Object.assign(u,{dataElementType:Do.getElement(m),datasetElementType:d&&Do.getElement(d)}),i.controller=new u(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){gs(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let d=0,m=this.data.datasets.length;d<m;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&o.indexOf(f)===-1;f.buildOrUpdateElements(p),i=Math.max(+f.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||gs(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(LA("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){gs(this.scales,e=>{Jr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!KT(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:o}of s){const i=n==="_removeElements"?-o:o;rAe(e,r,i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=o=>new Set(e.filter(i=>i[0]===o).map((i,c)=>c+","+i.splice(1).join(","))),r=n(0);for(let o=1;o<s;o++)if(!KT(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jr.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],gs(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Na(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(di.has(this)?this.attached&&!di.running(this)&&di.start(this):(this.draw(),DA({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,o;for(r=0,o=s.length;r<o;++r){const i=s[r];(!e||i.visible)&&n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n=e._clip,r=!n.disabled,o=iAe(e,this.chartArea),i={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Iw(s,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),r&&Pw(s),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Km(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const o=sTe.modes[s];return typeof o=="function"?o(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(o=>o&&o._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=ec(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",o=this.getDatasetMeta(e),i=o.controller._resolveAnimations(void 0,r);u0(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(o,{visible:n}),this.update(c=>c.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),di.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oA(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete _h[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(o,i)=>{s.addEventListener(this,o,i),e[o]=i},r=(o,i,c)=>{o.offsetX=i,o.offsetY=c,this._eventHandler(o)};gs(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(u,d)=>{s.addEventListener(this,u,d),e[u]=d},r=(u,d)=>{e[u]&&(s.removeEventListener(this,u,d),delete e[u])},o=(u,d)=>{this.canvas&&this.resize(u,d)};let i;const c=()=>{r("attach",c),this.attached=!0,this.resize(),n("resize",o),n("detach",i)};i=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",c)},s.isAttached(this.canvas)?c():i()}unbindEvents(){gs(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},gs(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let o,i,c,u;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){i=e[c];const d=i&&this.getDatasetMeta(i.datasetIndex).controller;d&&d[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:o,index:i})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[i],index:i}});!a0(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,o=(u,d)=>u.filter(m=>!d.some(f=>m.datasetIndex===f.datasetIndex&&m.index===f.index)),i=o(s,e),c=n?e:o(e,s);i.length&&this.updateHoverStyle(i,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=i=>(i.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:o}=this,i=s,c=this._getActiveElements(e,r,n,i),u=bCe(e),d=oAe(e,this._lastEvent,n,u);n&&(this._lastEvent=null,Ms(o.onHover,[e,c,this],this),u&&Ms(o.onClick,[e,c,this],this));const m=!a0(c,r);return(m||s)&&(this._active=c,this._updateHoverStyles(c,r,s)),this._lastEvent=d,m}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}},Ot(zi,"defaults",nn),Ot(zi,"instances",_h),Ot(zi,"overrides",ql),Ot(zi,"registry",Do),Ot(zi,"version",tAe),Ot(zi,"getChart",NA),zi);function OA(){return gs(Mf.instances,t=>t._plugins.invalidate())}function KL(t,e,s=e){t.lineCap=es(s.borderCapStyle,e.borderCapStyle),t.setLineDash(es(s.borderDash,e.borderDash)),t.lineDashOffset=es(s.borderDashOffset,e.borderDashOffset),t.lineJoin=es(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=es(s.borderWidth,e.borderWidth),t.strokeStyle=es(s.borderColor,e.borderColor)}function aAe(t,e,s){t.lineTo(s.x,s.y)}function lAe(t){return t.stepped?jCe:t.tension||t.cubicInterpolationMode==="monotone"?WCe:aAe}function YL(t,e,s={}){const n=t.length,{start:r=0,end:o=n-1}=s,{start:i,end:c}=e,u=Math.max(r,i),d=Math.min(o,c),m=r<i&&o<i||r>c&&o>c;return{count:n,start:u,loop:e.loop,ilen:d<u&&!m?n+d-u:d-u}}function cAe(t,e,s,n){const{points:r,options:o}=e,{count:i,start:c,loop:u,ilen:d}=YL(r,s,n),m=lAe(o);let{move:f=!0,reverse:p}=n||{},g,w,C;for(g=0;g<=d;++g)w=r[(c+(p?d-g:g))%i],!w.skip&&(f?(t.moveTo(w.x,w.y),f=!1):m(t,C,w,p,o.stepped),C=w);return u&&(w=r[(c+(p?d:0))%i],m(t,C,w,p,o.stepped)),!!u}function uAe(t,e,s,n){const r=e.points,{count:o,start:i,ilen:c}=YL(r,s,n),{move:u=!0,reverse:d}=n||{};let m=0,f=0,p,g,w,C,E,k;const A=T=>(i+(d?c-T:T))%o,S=()=>{C!==E&&(t.lineTo(m,E),t.lineTo(m,C),t.lineTo(m,k))};for(u&&(g=r[A(0)],t.moveTo(g.x,g.y)),p=0;p<=c;++p){if(g=r[A(p)],g.skip)continue;const T=g.x,R=g.y,L=T|0;L===w?(R<C?C=R:R>E&&(E=R),m=(f*m+T)/++f):(S(),t.lineTo(T,R),w=L,f=0,C=E=R),k=R}S()}function r1(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?uAe:cAe}function dAe(t){return t.stepped?CSe:t.tension||t.cubicInterpolationMode==="monotone"?SSe:ll}function mAe(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),KL(t,e.options),t.stroke(r)}function fAe(t,e,s,n){const{segments:r,options:o}=e,i=r1(e);for(const c of r)KL(t,o,c.style),t.beginPath(),i(t,e,c,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const pAe=typeof Path2D=="function";function hAe(t,e,s,n){pAe&&!e.options.segment?mAe(t,e,s,n):fAe(t,e,s,n)}class Lc extends tc{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;vSe(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=LSe(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],o=this.points,i=MSe(this,{property:s,start:r,end:r});if(!i.length)return;const c=[],u=dAe(n);let d,m;for(d=0,m=i.length;d<m;++d){const{start:f,end:p}=i[d],g=o[f],w=o[p];if(g===w){c.push(g);continue}const C=Math.abs((r-g[s])/(w[s]-g[s])),E=u(g,w,C,n.stepped);E[s]=e[s],c.push(E)}return c.length===1?c[0]:c}pathSegment(e,s,n){return r1(this)(e,this,s,n)}path(e,s,n){const r=this.segments,o=r1(this);let i=this._loop;s=s||0,n=n||this.points.length-s;for(const c of r)i&=o(e,this,c,{start:s,end:s+n-1});return!!i}draw(e,s,n,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),hAe(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ot(Lc,"id","line"),Ot(Lc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ot(Lc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ot(Lc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function FA(t,e,s,n){const r=t.options,{[s]:o}=t.getProps([s],n);return Math.abs(e-o)<r.radius+r.hitRadius}class mm extends tc{constructor(s){super();Ot(this,"parsed");Ot(this,"skip");Ot(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const o=this.options,{x:i,y:c}=this.getProps(["x","y"],r);return Math.pow(s-i,2)+Math.pow(n-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(s,n){return FA(this,s,"x",n)}inYRange(s,n){return FA(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Km(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,e1(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}Ot(mm,"id","point"),Ot(mm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ot(mm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const UA=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},gAe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class qA extends tc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ms(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=nr(n.font),o=r.size,i=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=UA(n,o);let d,m;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,m=this._fitRows(i,o,c,u)+10):(m=this.maxHeight,d=this._fitCols(i,r,c,u)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:o,maxWidth:i,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],m=r+c;let f=e;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-m;return this.legendItems.forEach((w,C)=>{const E=n+s/2+o.measureText(w.text).width;(C===0||d[d.length-1]+E+2*c>i)&&(f+=m,d[d.length-(C>0?0:1)]=0,g+=m,p++),u[C]={left:0,top:g,row:p,width:E,height:r},d[d.length-1]+=E+c}),f}_fitCols(e,s,n,r){const{ctx:o,maxHeight:i,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],m=i-e;let f=c,p=0,g=0,w=0,C=0;return this.legendItems.forEach((E,k)=>{const{itemWidth:A,itemHeight:S}=vAe(n,s,o,E,r);k>0&&g+S+2*c>m&&(f+=p+c,d.push({width:p,height:g}),w+=p+c,C++,p=g=0),u[k]={left:w,top:g,col:C,width:A,height:S},p=Math.max(p,A),g+=S+c}),f+=p,d.push({width:p,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:o}}=this,i=Zc(o,this.left,this.width);if(this.isHorizontal()){let c=0,u=Wn(n,this.left+r,this.right-this.lineWidths[c]);for(const d of s)c!==d.row&&(c=d.row,u=Wn(n,this.left+r,this.right-this.lineWidths[c])),d.top+=this.top+e+r,d.left=i.leftForLtr(i.x(u),d.width),u+=d.width+r}else{let c=0,u=Wn(n,this.top+e+r,this.bottom-this.columnSizes[c].height);for(const d of s)d.col!==c&&(c=d.col,u=Wn(n,this.top+e+r,this.bottom-this.columnSizes[c].height)),d.top=u,d.left+=this.left+r,d.left=i.leftForLtr(i.x(d.left),d.width),u+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Iw(e,this),this._draw(),Pw(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:o,labels:i}=e,c=nn.color,u=Zc(e.rtl,this.left,this.width),d=nr(i.font),{padding:m}=i,f=d.size,p=f/2;let g;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:w,boxHeight:C,itemHeight:E}=UA(i,f),k=function(L,P,I){if(isNaN(w)||w<=0||isNaN(C)||C<0)return;r.save();const D=es(I.lineWidth,1);if(r.fillStyle=es(I.fillStyle,c),r.lineCap=es(I.lineCap,"butt"),r.lineDashOffset=es(I.lineDashOffset,0),r.lineJoin=es(I.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=es(I.strokeStyle,c),r.setLineDash(es(I.lineDash,[])),i.usePointStyle){const U={radius:C*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:D},M=u.xPlus(L,w/2),x=P+p;AL(r,U,M,x,i.pointStyleWidth&&w)}else{const U=P+Math.max((f-C)/2,0),M=u.leftForLtr(L,w),x=um(I.borderRadius);r.beginPath(),Object.values(x).some($=>$!==0)?t1(r,{x:M,y:U,w,h:C,radius:x}):r.rect(M,U,w,C),r.fill(),D!==0&&r.stroke()}r.restore()},A=function(L,P,I){Ym(r,I.text,L,P+E/2,d,{strikethrough:I.hidden,textAlign:u.textAlign(I.textAlign)})},S=this.isHorizontal(),T=this._computeTitleHeight();S?g={x:Wn(o,this.left+m,this.right-n[0]),y:this.top+m+T,line:0}:g={x:this.left+m,y:Wn(o,this.top+T+m,this.bottom-s[0].height),line:0},DL(this.ctx,e.textDirection);const R=E+m;this.legendItems.forEach((L,P)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;const I=r.measureText(L.text).width,D=u.textAlign(L.textAlign||(L.textAlign=i.textAlign)),U=w+p+I;let M=g.x,x=g.y;u.setWidth(this.width),S?P>0&&M+U+m>this.right&&(x=g.y+=R,g.line++,M=g.x=Wn(o,this.left+m,this.right-n[g.line])):P>0&&x+R>this.bottom&&(M=g.x=M+s[g.line].width+m,g.line++,x=g.y=Wn(o,this.top+T+m,this.bottom-s[g.line].height));const $=u.x(M);if(k($,x,L),M=RCe(D,M+w+p,S?M+U:this.right,e.rtl),A(u.x(M),x,L),S)g.x+=U+m;else if(typeof L.text!="string"){const Z=d.lineHeight;g.y+=XL(L,Z)+m}else g.y+=R}),NL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=nr(s.font),r=ro(s.padding);if(!s.display)return;const o=Zc(e.rtl,this.left,this.width),i=this.ctx,c=s.position,u=n.size/2,d=r.top+u;let m,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+d,f=Wn(e.align,f,this.right-p);else{const w=this.columnSizes.reduce((C,E)=>Math.max(C,E.height),0);m=d+Wn(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const g=Wn(c,f,f+p);i.textAlign=o.textAlign(Cw(c)),i.textBaseline="middle",i.strokeStyle=s.color,i.fillStyle=s.color,i.font=n.string,Ym(i,s.text,g,m,n)}_computeTitleHeight(){const e=this.options.title,s=nr(e.font),n=ro(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,o;if(Ld(e,this.left,this.right)&&Ld(s,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(r=o[n],Ld(e,r.left,r.left+r.width)&&Ld(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!_Ae(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=gAe(r,n);r&&!o&&Ms(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!o&&Ms(s.onHover,[e,n,this],this)}else n&&Ms(s.onClick,[e,n,this],this)}}function vAe(t,e,s,n,r){const o=bAe(n,t,e,s),i=yAe(r,n,e.lineHeight);return{itemWidth:o,itemHeight:i}}function bAe(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((o,i)=>o.length>i.length?o:i)),e+s.size/2+n.measureText(r).width}function yAe(t,e,s){let n=t;return typeof e.text!="string"&&(n=XL(e,s)),n}function XL(t,e){const s=t.text?t.text.length:0;return e*s}function _Ae(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var JL={id:"legend",_element:qA,start(t,e,s){const n=t.legend=new qA({ctx:t.ctx,options:s,chart:t});Jr.configure(t,n,s),Jr.addBox(t,n)},stop(t){Jr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Jr.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:o,useBorderRadius:i,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const d=u.controller.getStyle(s?0:void 0),m=ro(d.borderWidth);return{text:e[u.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!u.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:i&&(c||d.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ZL extends tc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=In(n.text)?n.text.length:1;this._padding=ro(n.padding);const o=r*nr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:o,options:i}=this,c=i.align;let u=0,d,m,f;return this.isHorizontal()?(m=Wn(c,n,o),f=s+e,d=o-n):(i.position==="left"?(m=n+e,f=Wn(c,r,s),u=Rn*-.5):(m=o-e,f=Wn(c,s,r),u=Rn*.5),d=r-s),{titleX:m,titleY:f,maxWidth:d,rotation:u}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=nr(s.font),o=n.lineHeight/2+this._padding.top,{titleX:i,titleY:c,maxWidth:u,rotation:d}=this._drawArgs(o);Ym(e,s.text,0,0,n,{color:s.color,maxWidth:u,rotation:d,textAlign:Cw(s.align),textBaseline:"middle",translation:[i,c]})}}function xAe(t,e){const s=new ZL({ctx:t.ctx,options:e,chart:t});Jr.configure(t,s,e),Jr.addBox(t,s),t.titleBlock=s}var eD={id:"title",_element:ZL,start(t,e,s){xAe(t,s)},stop(t){const e=t.titleBlock;Jr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;Jr.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Nd={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,o=0;for(e=0,s=t.length;e<s;++e){const c=t[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();n.add(u.x),r+=u.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((c,u)=>c+u)/n.size,y:r/o}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,o,i,c;for(o=0,i=t.length;o<i;++o){const u=t[o].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),m=J_(e,d);m<r&&(r=m,c=u)}}if(c){const u=c.tooltipPosition();s=u.x,n=u.y}return{x:s,y:n}}};function Ro(t,e){return e&&(In(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function mi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function kAe(t,e){const{element:s,datasetIndex:n,index:r}=e,o=t.getDatasetMeta(n).controller,{label:i,value:c}=o.getLabelAndValue(r);return{chart:t,label:i,parsed:o.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:c,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function BA(t,e){const s=t.chart.ctx,{body:n,footer:r,title:o}=t,{boxWidth:i,boxHeight:c}=e,u=nr(e.bodyFont),d=nr(e.titleFont),m=nr(e.footerFont),f=o.length,p=r.length,g=n.length,w=ro(e.padding);let C=w.height,E=0,k=n.reduce((T,R)=>T+R.before.length+R.lines.length+R.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,f&&(C+=f*d.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),k){const T=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;C+=g*T+(k-g)*u.lineHeight+(k-1)*e.bodySpacing}p&&(C+=e.footerMarginTop+p*m.lineHeight+(p-1)*e.footerSpacing);let A=0;const S=function(T){E=Math.max(E,s.measureText(T).width+A)};return s.save(),s.font=d.string,gs(t.title,S),s.font=u.string,gs(t.beforeBody.concat(t.afterBody),S),A=e.displayColors?i+2+e.boxPadding:0,gs(n,T=>{gs(T.before,S),gs(T.lines,S),gs(T.after,S)}),A=0,s.font=m.string,gs(t.footer,S),s.restore(),E+=w.width,{width:E,height:C}}function wAe(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function EAe(t,e,s,n){const{x:r,width:o}=n,i=s.caretSize+s.caretPadding;if(t==="left"&&r+o+i>e.width||t==="right"&&r-o-i<0)return!0}function CAe(t,e,s,n){const{x:r,width:o}=s,{width:i,chartArea:{left:c,right:u}}=t;let d="center";return n==="center"?d=r<=(c+u)/2?"left":"right":r<=o/2?d="left":r>=i-o/2&&(d="right"),EAe(d,t,e,s)&&(d="center"),d}function VA(t,e,s){const n=s.yAlign||e.yAlign||wAe(t,s);return{xAlign:s.xAlign||e.xAlign||CAe(t,e,s,n),yAlign:n}}function SAe(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function TAe(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function HA(t,e,s,n){const{caretSize:r,caretPadding:o,cornerRadius:i}=t,{xAlign:c,yAlign:u}=s,d=r+o,{topLeft:m,topRight:f,bottomLeft:p,bottomRight:g}=um(i);let w=SAe(e,c);const C=TAe(e,u,d);return u==="center"?c==="left"?w+=d:c==="right"&&(w-=d):c==="left"?w-=Math.max(m,p)+r:c==="right"&&(w+=Math.max(f,g)+r),{x:Xr(w,0,n.width-e.width),y:Xr(C,0,n.height-e.height)}}function Up(t,e,s){const n=ro(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function GA(t){return Ro([],mi(t))}function AAe(t,e,s){return ec(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function jA(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const tD={beforeTitle:ci,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:ci,beforeBody:ci,beforeLabel:ci,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return Is(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:ci,afterBody:ci,beforeFooter:ci,footer:ci,afterFooter:ci};function gr(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?tD[e].call(s,n):r}class o1 extends tc{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,o=new FL(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=AAe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=gr(n,"beforeTitle",this,e),o=gr(n,"title",this,e),i=gr(n,"afterTitle",this,e);let c=[];return c=Ro(c,mi(r)),c=Ro(c,mi(o)),c=Ro(c,mi(i)),c}getBeforeBody(e,s){return GA(gr(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return gs(e,o=>{const i={before:[],lines:[],after:[]},c=jA(n,o);Ro(i.before,mi(gr(c,"beforeLabel",this,o))),Ro(i.lines,gr(c,"label",this,o)),Ro(i.after,mi(gr(c,"afterLabel",this,o))),r.push(i)}),r}getAfterBody(e,s){return GA(gr(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=gr(n,"beforeFooter",this,e),o=gr(n,"footer",this,e),i=gr(n,"afterFooter",this,e);let c=[];return c=Ro(c,mi(r)),c=Ro(c,mi(o)),c=Ro(c,mi(i)),c}_createItems(e){const s=this._active,n=this.chart.data,r=[],o=[],i=[];let c=[],u,d;for(u=0,d=s.length;u<d;++u)c.push(kAe(this.chart,s[u]));return e.filter&&(c=c.filter((m,f,p)=>e.filter(m,f,p,n))),e.itemSort&&(c=c.sort((m,f)=>e.itemSort(m,f,n))),gs(c,m=>{const f=jA(e.callbacks,m);r.push(gr(f,"labelColor",this,m)),o.push(gr(f,"labelPointStyle",this,m)),i.push(gr(f,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=i,this.dataPoints=c,c}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let o,i=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const c=Nd[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const u=this._size=BA(this,n),d=Object.assign({},c,u),m=VA(this.chart,n,d),f=HA(n,d,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=i,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const o=this.getCaretPosition(e,n,r);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:o}=this,{caretSize:i,cornerRadius:c}=n,{topLeft:u,topRight:d,bottomLeft:m,bottomRight:f}=um(c),{x:p,y:g}=e,{width:w,height:C}=s;let E,k,A,S,T,R;return o==="center"?(T=g+C/2,r==="left"?(E=p,k=E-i,S=T+i,R=T-i):(E=p+w,k=E+i,S=T-i,R=T+i),A=E):(r==="left"?k=p+Math.max(u,m)+i:r==="right"?k=p+w-Math.max(d,f)-i:k=this.caretX,o==="top"?(S=g,T=S-i,E=k-i,A=k+i):(S=g+C,T=S+i,E=k+i,A=k-i),R=S),{x1:E,x2:k,x3:A,y1:S,y2:T,y3:R}}drawTitle(e,s,n){const r=this.title,o=r.length;let i,c,u;if(o){const d=Zc(n.rtl,this.x,this.width);for(e.x=Up(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",i=nr(n.titleFont),c=n.titleSpacing,s.fillStyle=n.titleColor,s.font=i.string,u=0;u<o;++u)s.fillText(r[u],d.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+c,u+1===o&&(e.y+=n.titleMarginBottom-c)}}_drawColorBox(e,s,n,r,o){const i=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:u,boxWidth:d}=o,m=nr(o.bodyFont),f=Up(this,"left",o),p=r.x(f),g=u<m.lineHeight?(m.lineHeight-u)/2:0,w=s.y+g;if(o.usePointStyle){const C={radius:Math.min(d,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},E=r.leftForLtr(p,d)+d/2,k=w+u/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,e1(e,C,E,k),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,e1(e,C,E,k)}else{e.lineWidth=as(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const C=r.leftForLtr(p,d),E=r.leftForLtr(r.xPlus(p,1),d-2),k=um(i.borderRadius);Object.values(k).some(A=>A!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,t1(e,{x:C,y:w,w:d,h:u,radius:k}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),t1(e,{x:E,y:w+1,w:d-2,h:u-2,radius:k}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(C,w,d,u),e.strokeRect(C,w,d,u),e.fillStyle=i.backgroundColor,e.fillRect(E,w+1,d-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:o,bodyAlign:i,displayColors:c,boxHeight:u,boxWidth:d,boxPadding:m}=n,f=nr(n.bodyFont);let p=f.lineHeight,g=0;const w=Zc(n.rtl,this.x,this.width),C=function(I){s.fillText(I,w.x(e.x+g),e.y+p/2),e.y+=p+o},E=w.textAlign(i);let k,A,S,T,R,L,P;for(s.textAlign=i,s.textBaseline="middle",s.font=f.string,e.x=Up(this,E,n),s.fillStyle=n.bodyColor,gs(this.beforeBody,C),g=c&&E!=="right"?i==="center"?d/2+m:d+2+m:0,T=0,L=r.length;T<L;++T){for(k=r[T],A=this.labelTextColors[T],s.fillStyle=A,gs(k.before,C),S=k.lines,c&&S.length&&(this._drawColorBox(s,e,T,w,n),p=Math.max(f.lineHeight,u)),R=0,P=S.length;R<P;++R)C(S[R]),p=f.lineHeight;gs(k.after,C)}g=0,p=f.lineHeight,gs(this.afterBody,C),e.y-=o}drawFooter(e,s,n){const r=this.footer,o=r.length;let i,c;if(o){const u=Zc(n.rtl,this.x,this.width);for(e.x=Up(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=u.textAlign(n.footerAlign),s.textBaseline="middle",i=nr(n.footerFont),s.fillStyle=n.footerColor,s.font=i.string,c=0;c<o;++c)s.fillText(r[c],u.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:o,yAlign:i}=this,{x:c,y:u}=e,{width:d,height:m}=n,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:w}=um(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(c+f,u),i==="top"&&this.drawCaret(e,s,n,r),s.lineTo(c+d-p,u),s.quadraticCurveTo(c+d,u,c+d,u+p),i==="center"&&o==="right"&&this.drawCaret(e,s,n,r),s.lineTo(c+d,u+m-w),s.quadraticCurveTo(c+d,u+m,c+d-w,u+m),i==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(c+g,u+m),s.quadraticCurveTo(c,u+m,c,u+m-g),i==="center"&&o==="left"&&this.drawCaret(e,s,n,r),s.lineTo(c,u+f),s.quadraticCurveTo(c,u,c+f,u),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){const i=Nd[e.position].call(this,this._active,this._eventPosition);if(!i)return;const c=this._size=BA(this,e),u=Object.assign({},i,this._size),d=VA(s,e,u),m=HA(e,u,d,s);(r._to!==m.x||o._to!==m.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=ro(s.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&c&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,r,s),DL(e,s.textDirection),o.y+=i.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),NL(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:c,index:u})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[u],index:u}}),o=!a0(n,r),i=this._positionChanged(r,s);(o||i)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],i=this._getActiveElements(e,o,s,n),c=this._positionChanged(i,e),u=s||!a0(i,o)||c;return u&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),u}_getActiveElements(e,s,n,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const i=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&i.reverse(),i}_positionChanged(e,s){const{caretX:n,caretY:r,options:o}=this,i=Nd[o.position].call(this,e,s);return i!==!1&&(n!==i.x||r!==i.y)}}Ot(o1,"positioners",Nd);var sD={id:"tooltip",_element:o1,positioners:Nd,afterInit(t,e,s){s&&(t.tooltip=new o1({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const IAe=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function PAe(t,e,s,n){const r=t.indexOf(e);if(r===-1)return IAe(t,e,s,n);const o=t.lastIndexOf(e);return r!==o?s:r}const MAe=(t,e)=>t===null?null:Xr(Math.round(t),0,e);function WA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class p0 extends sc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:o}of s)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(Is(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:PAe(n,e,es(s,e),this._addedLabels),MAe(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=s;i++)r.push({value:i});return r}getLabelForValue(e){return WA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ot(p0,"id","category"),Ot(p0,"defaults",{ticks:{callback:WA}});function $Ae(t,e){const s=[],{bounds:r,step:o,min:i,max:c,precision:u,count:d,maxTicks:m,maxDigits:f,includeBounds:p}=t,g=o||1,w=m-1,{min:C,max:E}=e,k=!Is(i),A=!Is(c),S=!Is(d),T=(E-C)/(f+1);let R=XT((E-C)/w/g)*g,L,P,I,D;if(R<1e-14&&!k&&!A)return[{value:C},{value:E}];D=Math.ceil(E/R)-Math.floor(C/R),D>w&&(R=XT(D*R/w/g)*g),Is(u)||(L=Math.pow(10,u),R=Math.ceil(R*L)/L),r==="ticks"?(P=Math.floor(C/R)*R,I=Math.ceil(E/R)*R):(P=C,I=E),k&&A&&o&&wCe((c-i)/o,R/1e3)?(D=Math.round(Math.min((c-i)/R,m)),R=(c-i)/D,P=i,I=c):S?(P=k?i:P,I=A?c:I,D=d-1,R=(I-P)/D):(D=(I-P)/R,am(D,Math.round(D),R/1e3)?D=Math.round(D):D=Math.ceil(D));const U=Math.max(JT(R),JT(P));L=Math.pow(10,Is(u)?U:u),P=Math.round(P*L)/L,I=Math.round(I*L)/L;let M=0;for(k&&(p&&P!==i?(s.push({value:i}),P<i&&M++,am(Math.round((P+M*R)*L)/L,i,zA(i,T,t))&&M++):P<i&&M++);M<D;++M){const x=Math.round((P+M*R)*L)/L;if(A&&x>c)break;s.push({value:x})}return A&&p&&I!==c?s.length&&am(s[s.length-1].value,c,zA(c,T,t))?s[s.length-1].value=c:s.push({value:c}):(!A||I===c)&&s.push({value:I}),s}function zA(t,e,{horizontal:s,minRotation:n}){const r=bl(n),o=(s?Math.sin(r):Math.cos(r))||.001,i=.75*e*(""+t).length;return Math.min(e/o,i)}class nD extends sc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return Is(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:o}=this;const i=u=>r=s?r:u,c=u=>o=n?o:u;if(e){const u=xu(r),d=xu(o);u<0&&d<0?c(0):u>0&&d>0&&i(0)}if(r===o){let u=o===0?1:Math.abs(o*.05);c(o+u),e||i(r-u)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},o=this._range||this,i=$Ae(r,o);return e.bounds==="ticks"&&kL(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Tw(e,this.chart.options.locale,this.options.ticks.format)}}class h0 extends nD{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=sr(e)?e:0,this.max=sr(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=bl(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ot(h0,"id","linear"),Ot(h0,"defaults",{ticks:{callback:Aw.formatters.numeric}});const Jm=t=>Math.floor(da(t)),rl=(t,e)=>Math.pow(10,Jm(t)+e);function QA(t){return t/Math.pow(10,Jm(t))===1}function KA(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function RAe(t,e){const s=e-t;let n=Jm(s);for(;KA(t,e,n)>10;)n++;for(;KA(t,e,n)<10;)n--;return Math.min(n,Jm(t))}function LAe(t,{min:e,max:s}){e=Pr(t.min,e);const n=[],r=Jm(e);let o=RAe(e,s),i=o<0?Math.pow(10,Math.abs(o)):1;const c=Math.pow(10,o),u=r>o?Math.pow(10,r):0,d=Math.round((e-u)*i)/i,m=Math.floor((e-u)/c/10)*c*10;let f=Math.floor((d-m)/Math.pow(10,o)),p=Pr(t.min,Math.round((u+m+f*Math.pow(10,o))*i)/i);for(;p<s;)n.push({value:p,major:QA(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(o++,f=2,i=o>=0?1:i),p=Math.round((u+m+f*Math.pow(10,o))*i)/i;const g=Pr(t.max,p);return n.push({value:g,major:QA(g),significand:f}),n}class i1 extends sc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=nD.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return sr(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=sr(e)?Math.max(0,e):null,this.max=sr(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!sr(this._userMin)&&(this.min=e===rl(this.min,0)?rl(this.min,-1):rl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const o=c=>n=e?n:c,i=c=>r=s?r:c;n===r&&(n<=0?(o(1),i(10)):(o(rl(n,-1)),i(rl(r,1)))),n<=0&&o(rl(r,-1)),r<=0&&i(rl(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=LAe(s,this);return e.bounds==="ticks"&&kL(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Tw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=da(e),this._valueRange=da(this.max)-da(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(da(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}Ot(i1,"id","logarithmic"),Ot(i1,"defaults",{ticks:{callback:Aw.formatters.logarithmic,major:{enabled:!0}}});const jv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kr=Object.keys(jv);function YA(t,e){return t-e}function XA(t,e){if(Is(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:o}=t._parseOpts;let i=e;return typeof n=="function"&&(i=n(i)),sr(i)||(i=typeof n=="string"?s.parse(i,n):s.parse(i)),i===null?null:(r&&(i=r==="week"&&(Qm(o)||o===!0)?s.startOf(i,"isoWeek",o):s.startOf(i,r)),+i)}function JA(t,e,s,n){const r=kr.length;for(let o=kr.indexOf(t);o<r-1;++o){const i=jv[kr[o]],c=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((s-e)/(c*i.size))<=n)return kr[o]}return kr[r-1]}function DAe(t,e,s,n,r){for(let o=kr.length-1;o>=kr.indexOf(s);o--){const i=kr[o];if(jv[i].common&&t._adapter.diff(r,n,i)>=e-1)return i}return kr[s?kr.indexOf(s):0]}function NAe(t){for(let e=kr.indexOf(t)+1,s=kr.length;e<s;++e)if(jv[kr[e]].common)return kr[e]}function ZA(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=Ew(s,e),o=s[n]>=e?s[n]:s[r];t[o]=!0}}function OAe(t,e,s,n){const r=t._adapter,o=+r.startOf(e[0].value,n),i=e[e.length-1].value;let c,u;for(c=o;c<=i;c=+r.add(c,1,n))u=s[c],u>=0&&(e[u].major=!0);return e}function e5(t,e,s){const n=[],r={},o=e.length;let i,c;for(i=0;i<o;++i)c=e[i],r[c]=i,n.push({value:c,major:!1});return o===0||!s?n:OAe(t,n,r,s)}class g0 extends sc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new XSe._date(e.adapters.date);r.init(s),im(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:XA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:o,minDefined:i,maxDefined:c}=this.getUserBounds();function u(d){!i&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!i||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=sr(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),o=sr(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,i=this.max,c=ICe(r,o,i);return this._unit=s.unit||(n.autoSkip?JA(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):DAe(this,c.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:NAe(this._unit),this.initOffsets(r),e.reverse&&c.reverse(),e5(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const i=e.length<3?.5:.25;s=Xr(s,0,i),n=Xr(n,0,i),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,o=r.time,i=o.unit||JA(o.minUnit,s,n,this._getLabelCapacity(s)),c=es(r.ticks.stepSize,1),u=i==="week"?o.isoWeekday:!1,d=Qm(u)||u===!0,m={};let f=s,p,g;if(d&&(f=+e.startOf(f,"isoWeek",u)),f=+e.startOf(f,d?"day":i),e.diff(n,s,i)>1e5*c)throw new Error(s+" and "+n+" are too far apart with stepSize of "+c+" "+i);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,g=0;p<n;p=+e.add(p,c,i),g++)ZA(m,p,w);return(p===n||r.bounds==="ticks"||g===1)&&ZA(m,p,w),Object.keys(m).sort(YA).map(C=>+C)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,o=this._unit,i=s||r[o];return this._adapter.format(e,i)}_tickFormatFunction(e,s,n,r){const o=this.options,i=o.ticks.callback;if(i)return Ms(i,[e,s,n],this);const c=o.time.displayFormats,u=this._unit,d=this._majorUnit,m=u&&c[u],f=d&&c[d],p=n[s],g=d&&f&&p&&p.major;return this._adapter.format(e,r||(g?f:m))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=bl(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(r),i=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:n*o+c*i,h:n*i+c*o}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,e5(this,[e],this._majorUnit),r),i=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(XA(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MCe(e.sort(YA))}}Ot(g0,"id","time"),Ot(g0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qp(t,e,s){let n=0,r=t.length-1,o,i,c,u;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=yl(t,"pos",e)),{pos:o,time:c}=t[n],{pos:i,time:u}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=yl(t,"time",e)),{time:o,pos:c}=t[n],{time:i,pos:u}=t[r]);const d=i-o;return d?c+(u-c)*(e-o)/d:c}class t5 extends g0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=qp(s,this.min),this._tableRange=qp(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],o=[];let i,c,u,d,m;for(i=0,c=e.length;i<c;++i)d=e[i],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(i=0,c=r.length;i<c;++i)m=r[i+1],u=r[i-1],d=r[i],Math.round((m+u)/2)!==d&&o.push({time:d,pos:i/(c-1)});return o}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(qp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return qp(this._table,n*this._tableRange+this._minPos,!0)}}Ot(t5,"id","timeseries"),Ot(t5,"defaults",g0.defaults);const rD={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},FAe={ariaLabel:{type:String},ariaDescribedby:{type:String}},UAe={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...rD,...FAe},qAe=TP[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function bc(t){return of(t)?Gt(t):t}function BAe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return of(e)?new Proxy(t,{}):t}function VAe(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function oD(t,e){t.labels=e}function iD(t,e,s){const n=[];t.datasets=e.map(r=>{const o=t.datasets.find(i=>i[s]===r[s]);return!o||!r.data||n.includes(o)?{...r}:(n.push(o),Object.assign(o,r),o)})}function HAe(t,e){const s={labels:[],datasets:[]};return oD(s,t.labels),iD(s,t.datasets,e),s}const GAe=Je({props:UAe,setup(t,e){let{expose:s,slots:n}=e;const r=Y(null),o=On(null);s({chart:o});const i=()=>{if(!r.value)return;const{type:d,data:m,options:f,plugins:p,datasetIdKey:g}=t,w=HAe(m,g),C=BAe(w,m);o.value=new Mf(r.value,{type:d,data:C,options:{...f},plugins:p})},c=()=>{const d=Gt(o.value);d&&(t.destroyDelay>0?setTimeout(()=>{d.destroy(),o.value=null},t.destroyDelay):(d.destroy(),o.value=null))},u=d=>{d.update(t.updateMode)};return Et(i),ar(c),dt([()=>t.options,()=>t.data],(d,m)=>{let[f,p]=d,[g,w]=m;const C=Gt(o.value);if(!C)return;let E=!1;if(f){const k=bc(f),A=bc(g);k&&k!==A&&(VAe(C,k),E=!0)}if(p){const k=bc(p.labels),A=bc(w.labels),S=bc(p.datasets),T=bc(w.datasets);k!==A&&(oD(C.config.data,k),E=!0),S&&S!==T&&(iD(C.config.data,S,t.datasetIdKey),E=!0)}E&&vs(()=>{u(C)})},{deep:!0}),()=>vr("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[vr("p",{},[n.default?n.default():""])])}});function jAe(t,e){return Mf.register(e),Je({props:rD,setup(s,n){let{expose:r}=n;const o=On(null),i=c=>{o.value=c==null?void 0:c.chart};return r({chart:o}),()=>vr(GAe,qAe({ref:i},{type:t,...s}))}})}const Dc=jAe("line",bh),WAe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 p-3 border border-gray-300 dark:border-gray-700 rounded bg-gray-50 dark:bg-gray-800/50"},zAe={class:"h-64"},QAe={class:"h-64"},KAe=Je({__name:"PrestigeUpgradeGraph",props:{upgrade:{},maxLevel:{}},setup(t){Mf.register(eD,sD,JL,Lc,p0,h0,mm);const e=t,s=q(()=>Array.from({length:e.maxLevel},(u,d)=>(d+1).toString())),n=q(()=>{const u=Array.from({length:e.maxLevel},(d,m)=>{const f=m+1;return e.upgrade.maxLevel&&f>e.upgrade.maxLevel.toNumber()?null:i0(e.upgrade.baseCost,new Se(f),e.upgrade.costMultiplier).toNumber()});return{labels:s.value,datasets:[{label:"Cost",data:u,borderColor:"rgb(217, 119, 6)",backgroundColor:"rgba(217, 119, 6, 0.1)",tension:.1,pointRadius:3,pointHoverRadius:5,segment:{borderColor:d=>e.upgrade.maxLevel&&d.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?"rgba(217, 119, 6, 0.3)":void 0,borderDash:d=>e.upgrade.maxLevel&&d.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?[6,6]:void 0}}]}}),r=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Cost per Level"},tooltip:{callbacks:{label:u=>{const d=u.parsed.x+1,m=i0(e.upgrade.baseCost,new Se(d),e.upgrade.costMultiplier);return`Level ${d}: ${be(m,0)} EP`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cost (EP)"}}}})),o=q(()=>{const u=[];if(!e.upgrade.isCombo||!e.upgrade.effects||e.upgrade.effects.length===0){const d=Array.from({length:e.maxLevel},(m,f)=>{const p=f+1;if(e.upgrade.maxLevel&&p>e.upgrade.maxLevel.toNumber())return null;const g=e.upgrade.effect(new Se(p));return typeof g=="number"?g:g.toNumber()});u.push({label:e.upgrade.appliesTo[0]||"Effect",data:d,borderColor:"rgb(22, 163, 74)",backgroundColor:"rgba(22, 163, 74, 0.1)",tension:.1,pointRadius:3,pointHoverRadius:5,segment:{borderColor:m=>e.upgrade.maxLevel&&m.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?"rgba(22, 163, 74, 0.3)":void 0,borderDash:m=>e.upgrade.maxLevel&&m.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?[6,6]:void 0}})}else{const d=["rgb(59, 130, 246)","rgb(139, 92, 246)","rgb(239, 68, 68)","rgb(16, 185, 129)","rgb(234, 179, 8)"];e.upgrade.effects.forEach((m,f)=>{const p=Array.from({length:e.maxLevel},(g,w)=>{const C=w+1;if(e.upgrade.maxLevel&&C>e.upgrade.maxLevel.toNumber())return null;const E=m.multiplier(new Se(C));return typeof E=="number"?E:E.toNumber()});u.push({label:m.target,data:p,borderColor:d[f%d.length],backgroundColor:"rgba(0,0,0,0)",tension:.1,pointRadius:3,pointHoverRadius:5,segment:{borderColor:g=>e.upgrade.maxLevel&&g.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?"rgba(128, 128, 128, 0.3)":d[f%d.length],borderDash:g=>e.upgrade.maxLevel&&g.p1.parsed.x+1>e.upgrade.maxLevel.toNumber()?[6,6]:void 0}})})}return{labels:s.value,datasets:u}}),i=(u,d)=>{const m=u.multiplier(new Se(d)),f=u.formatEffect?u.formatEffect(m):be(m,2);return`${u.target}: ${f}${u.isMultiplier?" (Multiplier)":""}`},c=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:e.upgrade.isCombo&&e.upgrade.effects&&e.upgrade.effects.length>1},title:{display:!0,text:"Effect per Level"},tooltip:{callbacks:{label:u=>{const d=u.parsed.x+1;if(!e.upgrade.isCombo||!e.upgrade.effects||e.upgrade.effects.length===0){const m=e.upgrade.effect(new Se(d)),f=e.upgrade.formatEffect(m);return`Level ${d}: ${f}`}else{const m=e.upgrade.effects[u.datasetIndex];return m?`Level ${d} - ${i(m,d)}`:""}}}}},scales:{y:{beginAtZero:!1,title:{display:!0,text:"Effect Value"}}}}));return(u,d)=>(h(),v("div",WAe,[a("div",zAe,[d[0]||(d[0]=a("h4",{class:"text-center font-medium mb-2 text-gray-700 dark:text-gray-300"},"Cost Progression",-1)),Ye(b(Dc),{data:n.value,options:r.value},null,8,["data","options"])]),a("div",QAe,[d[1]||(d[1]=a("h4",{class:"text-center font-medium mb-2 text-gray-700 dark:text-gray-300"},"Effect Progression",-1)),Ye(b(Dc),{data:o.value,options:c.value},null,8,["data","options"])])]))}}),s5=Ct(KAe,[["__scopeId","data-v-300f7414"]]),YAe={class:"flex justify-between items-center my-4"},XAe={class:"flex items-center space-x-1 border border-amber-300 dark:border-amber-700 rounded-lg p-0.5 bg-amber-100 dark:bg-amber-900"},JAe={class:"flex flex-wrap gap-2 mb-4 overflow-x-auto"},ZAe=["onClick"],e5e={key:0,class:"p-4 text-center text-amber-600 dark:text-amber-400"},t5e={key:0,class:"space-y-4"},s5e=["onClick"],n5e={class:"flex items-center gap-3"},r5e={class:"font-medium"},o5e={class:"text-xs text-amber-600 dark:text-amber-400"},i5e={class:"flex items-center gap-4"},a5e={class:"text-right"},l5e={class:"text-sm"},c5e={class:"font-medium"},u5e={class:"text-xs"},d5e={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-4 bg-white dark:bg-amber-950/20"},m5e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},f5e={class:"space-y-1 text-sm"},p5e={class:"flex flex-wrap gap-1 mt-1"},h5e={key:0},g5e={class:"space-y-2"},v5e={class:"flex items-start justify-between"},b5e={class:"font-medium"},y5e={class:"text-xs text-amber-700 dark:text-amber-300"},_5e={key:0,class:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-1.5 py-0.5 rounded"},x5e={class:"p-2"},k5e={class:"p-2"},w5e={key:0},E5e={class:"font-medium"},C5e={key:0,class:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-1 py-0.5 rounded"},S5e={key:1},T5e={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},A5e=["onClick"],I5e={class:"flex items-center gap-3 mb-2"},P5e={class:"font-medium leading-tight"},M5e={class:"text-xs flex justify-between items-center my-1"},$5e={class:"font-medium"},R5e={class:"text-xs text-amber-600 dark:text-amber-400 line-clamp-2 mt-auto flex-grow min-h-[2.5em]"},L5e={key:0,class:"col-span-full border-t border-amber-300 dark:border-amber-700 p-4 bg-white dark:bg-amber-950/20 mt-[-1px] rounded-b-lg"},D5e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N5e={class:"space-y-1 text-sm"},O5e={class:"flex flex-wrap gap-1 mt-1"},F5e={key:0},U5e={class:"space-y-2"},q5e={class:"flex items-start justify-between"},B5e={class:"font-medium"},V5e={class:"text-xs text-amber-700 dark:text-amber-300"},H5e={key:0,class:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-1.5 py-0.5 rounded"},G5e={class:"p-2"},j5e={class:"p-2"},W5e={key:0},z5e={class:"font-medium"},Q5e={key:0,class:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-1 py-0.5 rounded"},K5e={key:1},yc="prestige-upgrades",Y5e=Je({__name:"PrestigeUpgradesWiki",setup(t){const e=St(),s=Ri(),n=Y(vh[0]),r=Y(s.getSearchQuery(yc)),o=Y(s.getMaxPreviewLevel(yc)),i=Y("list");dt(r,k=>{s.setSearchQuery(yc,k)}),dt(o,k=>{s.setMaxPreviewLevel(yc,k)});const c=k=>{s.toggleItemExpanded(yc,k)},u=k=>s.isItemExpanded(yc,k),d=k=>o.value,m=q(()=>{const k={};return vh.forEach(S=>{k[S]=[]}),(r.value?K_.filter(S=>S.name.toLowerCase().includes(r.value.toLowerCase())||S.description.toLowerCase().includes(r.value.toLowerCase())||S.id.toLowerCase().includes(r.value.toLowerCase())):K_).forEach(S=>{k[S.category]&&k[S.category].push(S)}),k}),f=(k,A)=>k.costMultiplier?i0(k.baseCost,new Se(A),k.costMultiplier):k.baseCost,p=(k,A)=>{const S=k.effect(new Se(A));return k.formatEffect(S)},g=(k,A)=>{const S=k.multiplier(new Se(A));return k.formatEffect?k.formatEffect(S):be(S,2)},w=(k,A)=>!k.isCombo||!k.effects||k.effects.length===0?[{target:k.appliesTo[0],effect:p(k,A)}]:k.effects.map(S=>({target:S.target,effect:g(S,A)})),C=k=>({ep:"Evolution Points",worker:"Worker Ants",nursery:"Nursery",queenChamber:"Queen Chamber",colony:"Colony",megacolony:"Megacolony",hivemind:"Hivemind",antopolis:"Antopolis",alateHatchery:"Alate Hatchery",global:"All Generators",pheromone:"Pheromone Essence",food:"Food"})[k]||k,E=k=>{const A=e.getUpgradeCount(k);return be(A,0)};return(k,A)=>{var S;return h(),v("div",null,[Ye(Zl,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=T=>r.value=T),placeholder:"Search upgrades..."},null,8,["modelValue"]),a("div",YAe,[Ye(Vv,{modelValue:o.value,"onUpdate:modelValue":A[1]||(A[1]=T=>o.value=T),color:"amber",class:"flex-grow mr-4"},null,8,["modelValue"]),a("div",XAe,[a("button",{onClick:A[2]||(A[2]=T=>i.value="list"),class:K(["p-1.5 rounded-md transition-colors",i.value==="list"?"bg-amber-500 text-white shadow":"text-amber-700 dark:text-amber-300 hover:bg-amber-200 dark:hover:bg-amber-800"]),title:"List View"},A[4]||(A[4]=[a("span",{class:"i-heroicons-list-bullet"},null,-1)]),2),a("button",{onClick:A[3]||(A[3]=T=>i.value="grid"),class:K(["p-1.5 rounded-md transition-colors",i.value==="grid"?"bg-amber-500 text-white shadow":"text-amber-700 dark:text-amber-300 hover:bg-amber-200 dark:hover:bg-amber-800"]),title:"Grid View"},A[5]||(A[5]=[a("span",{class:"i-heroicons-squares-2x2"},null,-1)]),2)])]),a("div",JAe,[(h(!0),v(De,null,Ge(b(vh),T=>(h(),v("button",{key:T,onClick:R=>n.value=T,class:K(["px-3 py-1.5 rounded-lg text-sm transition-colors",n.value===T?"bg-amber-500 dark:bg-amber-600 text-white":"bg-amber-200 dark:bg-amber-900/40 text-amber-900 dark:text-amber-100 hover:bg-amber-300 dark:hover:bg-amber-800/60"])},_(T.charAt(0).toUpperCase()+T.slice(1)),11,ZAe))),128))]),((S=m.value[n.value])==null?void 0:S.length)===0?(h(),v("div",e5e," No upgrades found for this category or search query. ")):Q("",!0),(h(!0),v(De,null,Ge(m.value,(T,R)=>Ut((h(),v("div",{key:R,class:"mb-6"},[i.value==="list"?(h(),v("div",t5e,[(h(!0),v(De,null,Ge(T,L=>(h(),v("div",{key:L.id,class:"border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10"},[a("div",{onClick:P=>c(L.id),class:"p-4 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[a("div",n5e,[a("span",{class:K([L.icon,"text-xl text-amber-700 dark:text-amber-300"])},null,2),a("div",null,[a("div",r5e,_(L.name),1),a("div",o5e,_(L.description),1)])]),a("div",i5e,[a("div",a5e,[a("div",l5e,[A[6]||(A[6]=oe("Current: ")),a("span",c5e,_(E(L.id)),1)]),a("div",u5e,"Base Cost: "+_(b(be)(L.baseCost,0)),1)]),a("span",{class:K(["transition-transform",u(L.id)?"rotate-180":""])},A[7]||(A[7]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)])],8,s5e),u(L.id)?(h(),v("div",d5e,[a("div",m5e,[a("div",null,[A[12]||(A[12]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Basic Information",-1)),a("div",f5e,[a("div",null,[A[8]||(A[8]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(L.id),1)]),a("div",null,[A[9]||(A[9]=a("span",{class:"font-medium"},"Max Level:",-1)),oe(" "+_(L.maxLevel===null?"Unlimited":b(be)(L.maxLevel,0)),1)]),a("div",null,[A[10]||(A[10]=a("span",{class:"font-medium"},"Applies To:",-1)),a("div",p5e,[(h(!0),v(De,null,Ge(L.appliesTo,P=>(h(),v("span",{key:P,class:"px-1.5 py-0.5 text-xs rounded-full bg-amber-200 dark:bg-amber-900/40"},_(P),1))),128))])]),L.isCombo&&L.effects&&L.effects.length>0?(h(),v("div",h5e,[A[11]||(A[11]=a("h3",{class:"font-medium mt-4 mb-2 text-amber-800 dark:text-amber-200"},"Effects",-1)),a("div",g5e,[(h(!0),v(De,null,Ge(L.effects,(P,I)=>(h(),v("div",{key:I,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",v5e,[a("div",null,[a("div",b5e,_(C(P.target)),1),a("div",y5e,_(g(P,L.level.toNumber()||1)),1)]),P.isMultiplier?(h(),v("span",_5e," Multiplier ")):Q("",!0)])]))),128))])])):Q("",!0)])]),a("div",null,[A[13]||(A[13]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Effects & Costs by Level",-1)),Ye(Y_,{itemId:L.id,maxLevel:d(),tableHeaders:L.isCombo?["Level","Effects","Cost"]:["Level","Effect","Cost"],color:"amber"},{default:Rt(()=>[(h(!0),v(De,null,Ge(d(L),P=>(h(),v("tr",{key:P,class:K(["border-t border-amber-200 dark:border-amber-800 hover:bg-amber-100 dark:hover:bg-amber-900/30",L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400 italic":""])},[a("td",x5e,_(P),1),a("td",k5e,[L.isCombo&&L.effects&&L.effects.length>0?(h(),v("div",w5e,[(h(!0),v(De,null,Ge(w(L,P),(I,D)=>(h(),v("div",{key:D,class:"text-xs mb-1 flex items-center gap-2"},[a("span",E5e,_(C(I.target))+":",1),a("span",{class:K(L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400":"text-amber-700 dark:text-amber-300")},_(I.effect),3),L.effects[D].isMultiplier?(h(),v("span",C5e,"  ")):Q("",!0)]))),128))])):(h(),v("div",S5e,_(p(L,P)),1))]),a("td",{class:K(["p-2 text-right",L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400":"text-amber-700 dark:text-amber-300"])},_(b(be)(f(L,P),0)),3)],2))),128))]),_:2},1032,["itemId","maxLevel","tableHeaders"])])]),Ye(s5,{upgrade:L,"max-level":d()},null,8,["upgrade","max-level"])])):Q("",!0)]))),128))])):(h(),v("div",T5e,[(h(!0),v(De,null,Ge(T,L=>(h(),v("div",{key:L.id,class:"border border-amber-300 dark:border-amber-700 rounded-lg bg-amber-50/50 dark:bg-amber-900/10 flex flex-col"},[a("div",{onClick:P=>c(L.id),class:"p-4 flex-grow cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors flex flex-col"},[a("div",I5e,[a("span",{class:K([L.icon,"text-xl text-amber-700 dark:text-amber-300"])},null,2),a("div",P5e,_(L.name),1)]),A[15]||(A[15]=a("hr",{class:"border-amber-200 dark:border-amber-800/50 my-2"},null,-1)),a("div",M5e,[a("span",null,[A[14]||(A[14]=oe("Current: ")),a("span",$5e,_(E(L.id)),1)]),a("span",null,"Cost: "+_(b(be)(L.baseCost,0)),1)]),A[16]||(A[16]=a("hr",{class:"border-amber-200 dark:border-amber-800/50 my-2"},null,-1)),a("div",R5e,_(L.description),1)],8,A5e),u(L.id)?(h(),v("div",L5e,[a("div",D5e,[a("div",null,[A[21]||(A[21]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Basic Information",-1)),a("div",N5e,[a("div",null,[A[17]||(A[17]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(L.id),1)]),a("div",null,[A[18]||(A[18]=a("span",{class:"font-medium"},"Max Level:",-1)),oe(" "+_(L.maxLevel===null?"Unlimited":b(be)(L.maxLevel,0)),1)]),a("div",null,[A[19]||(A[19]=a("span",{class:"font-medium"},"Applies To:",-1)),a("div",O5e,[(h(!0),v(De,null,Ge(L.appliesTo,P=>(h(),v("span",{key:P,class:"px-1.5 py-0.5 text-xs rounded-full bg-amber-200 dark:bg-amber-900/40"},_(P),1))),128))])]),L.isCombo&&L.effects&&L.effects.length>0?(h(),v("div",F5e,[A[20]||(A[20]=a("h3",{class:"font-medium mt-4 mb-2 text-amber-800 dark:text-amber-200"},"Effects",-1)),a("div",U5e,[(h(!0),v(De,null,Ge(L.effects,(P,I)=>(h(),v("div",{key:I,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",q5e,[a("div",null,[a("div",B5e,_(C(P.target)),1),a("div",V5e,_(g(P,L.level.toNumber()||1)),1)]),P.isMultiplier?(h(),v("span",H5e," Multiplier ")):Q("",!0)])]))),128))])])):Q("",!0)])]),a("div",null,[A[22]||(A[22]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Effects & Costs by Level",-1)),Ye(Y_,{itemId:L.id,maxLevel:d(),tableHeaders:L.isCombo?["Level","Effects","Cost"]:["Level","Effect","Cost"],color:"amber"},{default:Rt(()=>[(h(!0),v(De,null,Ge(d(L),P=>(h(),v("tr",{key:P,class:K(["border-t border-amber-200 dark:border-amber-800 hover:bg-amber-100 dark:hover:bg-amber-900/30",L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400 italic":""])},[a("td",G5e,_(P),1),a("td",j5e,[L.isCombo&&L.effects&&L.effects.length>0?(h(),v("div",W5e,[(h(!0),v(De,null,Ge(w(L,P),(I,D)=>(h(),v("div",{key:D,class:"text-xs mb-1 flex items-center gap-2"},[a("span",z5e,_(C(I.target))+":",1),a("span",{class:K(L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400":"text-amber-700 dark:text-amber-300")},_(I.effect),3),L.effects[D].isMultiplier?(h(),v("span",Q5e,"  ")):Q("",!0)]))),128))])):(h(),v("div",K5e,_(p(L,P)),1))]),a("td",{class:K(["p-2 text-right",L.maxLevel!==null&&P>L.maxLevel.toNumber()?"text-amber-500 dark:text-amber-400":"text-amber-700 dark:text-amber-300"])},_(b(be)(f(L,P),0)),3)],2))),128))]),_:2},1032,["itemId","maxLevel","tableHeaders"])])]),Ye(s5,{upgrade:L,"max-level":d()},null,8,["upgrade","max-level"])])):Q("",!0)]))),128))]))])),[[fl,R===n.value]])),128))])}}}),n5=Ct(Y5e,[["__scopeId","data-v-92938cf2"]]),X5e={key:0,class:"p-4 text-center text-amber-600 dark:text-amber-400"},J5e={class:"space-y-3"},Z5e=["onClick"],eIe={class:"flex items-center gap-3"},tIe={class:"font-medium"},sIe={class:"text-xs text-amber-600 dark:text-amber-400"},nIe={class:"flex items-center gap-4"},rIe={class:"text-right"},oIe={class:"text-sm"},iIe={class:"font-medium"},aIe={class:"text-xs"},lIe={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},cIe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uIe={class:"space-y-1 text-sm"},dIe={key:0},mIe={class:"ml-2 mt-1 px-2 py-1 bg-amber-100 dark:bg-amber-900/30 rounded-md text-xs"},fIe={class:"space-y-2"},pIe={class:"flex items-start"},hIe={class:"px-1.5 py-0.5 text-xs rounded-full bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 mr-2 mt-0.5"},gIe={class:"font-medium"},vIe={class:"text-xs text-amber-700 dark:text-amber-300"},bIe={class:"p-2"},yIe={class:"p-2"},_Ie={key:0},xIe={key:1,class:"text-xs italic"},_c="pheromone-shop",kIe=Je({__name:"PheromoneShopWiki",setup(t){const e=Ml();Ks();const s=Ri(),n=Y(s.getSearchQuery(_c)),r=Y(s.getMaxPreviewLevel(_c));dt(n,w=>{s.setSearchQuery(_c,w)}),dt(r,w=>{s.setMaxPreviewLevel(_c,w)});const o=w=>{s.toggleItemExpanded(_c,w)},i=w=>s.isItemExpanded(_c,w),c=w=>r.value,u=q(()=>{if(!n.value)return e.shopItems;const w=n.value.toLowerCase();return e.shopItems.filter(C=>C.name.toLowerCase().includes(w)||C.description.toLowerCase().includes(w)||C.id.toLowerCase().includes(w))}),d=(w,C)=>C<=0?w.baseCost:w.baseCost.mul(m(1.2).pow(C-1)),m=w=>new Se(w),f=(w,C)=>{const E=w.multiplier(C);if(E.gte(1)){const k=E.minus(1).mul(100);return`+${be(k,1)}%`}else return be(E,2)},p=(w,C)=>w.modifiers.filter(E=>C>=E.unlockLevel),g=w=>({ep:"Evolution Points",worker:"Worker Ants",nursery:"Nursery",queenChamber:"Queen Chamber",colony:"Colony",megacolony:"Megacolony",hivemind:"Hivemind",antopolis:"Antopolis",alateHatchery:"Alate Hatchery",global:"All Generators",pheromone:"Pheromone Essence",food:"Food"})[w]||w;return(w,C)=>(h(),v("div",null,[Ye(Zl,{modelValue:n.value,"onUpdate:modelValue":C[0]||(C[0]=E=>n.value=E),placeholder:"Search pheromone upgrades..."},null,8,["modelValue"]),Ye(Vv,{modelValue:r.value,"onUpdate:modelValue":C[1]||(C[1]=E=>r.value=E),color:"purple"},null,8,["modelValue"]),u.value.length===0?(h(),v("div",X5e," No pheromone upgrades found for your search query. ")):Q("",!0),a("div",J5e,[(h(!0),v(De,null,Ge(u.value,E=>(h(),v("div",{key:E.id,class:"border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10"},[a("div",{onClick:k=>o(E.id),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[a("div",eIe,[C[3]||(C[3]=a("span",{class:"i-heroicons-beaker text-xl text-purple-700 dark:text-purple-400"},null,-1)),a("div",null,[a("div",tIe,_(E.name),1),a("div",sIe,_(E.description),1)])]),a("div",nIe,[a("div",rIe,[a("div",oIe,[C[4]||(C[4]=oe("Current: ")),a("span",iIe,_(b(e).getItemLevel(E.id)),1)]),a("div",aIe,"Max Level: "+_(E.maxLevel),1)]),a("span",{class:K(["transition-transform",i(E.id)?"rotate-180":""])},C[5]||(C[5]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)])],8,Z5e),i(E.id)?(h(),v("div",lIe,[a("div",cIe,[a("div",null,[C[11]||(C[11]=a("h3",{class:"font-medium mb-2 text-purple-800 dark:text-purple-300"},"Basic Information",-1)),a("div",uIe,[a("div",null,[C[6]||(C[6]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(E.id),1)]),a("div",null,[C[7]||(C[7]=a("span",{class:"font-medium"},"Base Cost:",-1)),oe(" "+_(b(be)(E.baseCost,0))+" PE",1)]),E.unlockRequirement?(h(),v("div",dIe,[C[8]||(C[8]=a("span",{class:"font-medium"},"Unlock Requirement:",-1)),a("div",mIe,_(b(e).getUnlockRequirementText(E.id)),1)])):Q("",!0),Q("",!0)]),C[12]||(C[12]=a("h3",{class:"font-medium mt-4 mb-2 text-purple-800 dark:text-purple-300"},"Effects",-1)),a("div",fIe,[(h(!0),v(De,null,Ge(E.modifiers,(k,A)=>(h(),v("div",{key:A,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",pIe,[a("span",hIe," Lvl "+_(k.unlockLevel)+"+ ",1),a("div",null,[a("div",gIe,_(g(k.target)),1),a("div",vIe,_(k.description),1)])])]))),128))])]),a("div",null,[C[13]||(C[13]=a("h3",{class:"font-medium mb-2 text-purple-800 dark:text-purple-300"},"Effects & Costs by Level",-1)),Ye(Y_,{itemId:E.id,maxLevel:c(),tableHeaders:["Level","Active Effects","Cost"],color:"purple"},{default:Rt(()=>[(h(!0),v(De,null,Ge(c(E),k=>(h(),v("tr",{key:k,class:K(["border-t border-amber-200 dark:border-amber-800 hover:bg-amber-100 dark:hover:bg-amber-900/30",k>E.maxLevel?"text-purple-500 dark:text-purple-400 italic":""])},[a("td",bIe,_(k),1),a("td",yIe,[p(E,k).length>0?(h(),v("div",_Ie,[(h(!0),v(De,null,Ge(p(E,k),(A,S)=>(h(),v("div",{key:S,class:"text-xs"},[oe(_(g(A.target))+": ",1),a("span",{class:K(k>E.maxLevel?"text-purple-500 dark:text-purple-400":"text-purple-700 dark:text-purple-300")},_(f(A,k)),3)]))),128))])):(h(),v("div",xIe,"No effects yet"))]),a("td",{class:K(["p-2 text-right",k>E.maxLevel?"text-purple-500 dark:text-purple-400":"text-purple-700 dark:text-purple-300"])},_(b(be)(d(E,k),0)),3)],2))),128))]),_:2},1032,["itemId","maxLevel"])])])])):Q("",!0)]))),128))])]))}}),r5=Ct(kIe,[["__scopeId","data-v-ad8eba75"]]),wIe={class:"mb-4 flex items-center"},EIe={class:"inline-flex items-center cursor-pointer"},CIe={key:0,class:"mb-6 p-4 border border-amber-300 dark:border-amber-700 rounded-lg bg-amber-50/50 dark:bg-amber-900/10"},SIe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},TIe={class:"font-medium"},AIe={class:"font-medium"},IIe={class:"font-medium"},PIe={class:"font-medium"},MIe={class:"space-y-3"},$Ie=["onClick"],RIe={class:"flex items-center gap-3"},LIe={class:"relative w-10 h-10"},DIe=["src","alt"],NIe={class:"font-medium"},OIe={class:"text-xs text-amber-600 dark:text-amber-400"},FIe={class:"flex items-center gap-4"},UIe={class:"text-right text-sm"},qIe={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},BIe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},VIe={class:"space-y-1 text-sm"},HIe={class:"space-y-2"},GIe={class:"flex items-start justify-between"},jIe={class:"font-medium"},WIe={class:"text-xs text-amber-700 dark:text-amber-300"},zIe={class:"text-right"},QIe={class:"text-xs text-amber-700 dark:text-amber-300"},KIe={class:"font-medium"},YIe={key:0,class:"text-sm italic text-amber-600 dark:text-amber-400"},XIe={key:1,class:"p-4 text-center text-amber-600 dark:text-amber-400"},Bp="bugs-wiki",JIe=Je({__name:"BugsWiki",setup(t){const e=Hr(),s=ir(),n=Ri(),r=Ts(),o=Y(n.getSearchQuery(Bp)),i=Y(!0);dt(o,k=>{n.setSearchQuery(Bp,k)});const c=k=>{n.toggleItemExpanded(Bp,k)},u=k=>n.isItemExpanded(Bp,k),d=k=>s.canOneHitBug(k),m=k=>{const A=e.getBugById(k);if(!A)return!1;const S=s.calculateDamage(A.damage,s.playerDefense);if(S.lte(0))return!0;const T=s.calculateDamage(s.playerDamage,A.defense);if(T.lte(0))return!1;const R=A.maxHealth.div(T).ceil(),L=s.playerMaxHealth.div(S).floor();return R.lte(L)},f=k=>Lt(k),p=k=>{const A=r.getItem(k);return A?A.name:k},g=q(()=>{if(!o.value)return e.bugs;const k=o.value.toLowerCase();return e.bugs.filter(A=>A.name.toLowerCase().includes(k)||A.description.toLowerCase().includes(k)||A.id.toLowerCase().includes(k)||A.drops.some(S=>S.itemId.toLowerCase().includes(k)||p(S.itemId).toLowerCase().includes(k)))}),w=q(()=>[...g.value].sort((k,A)=>k.maxHealth.cmp(A.maxHealth))),C=k=>{if(!e.getBugById(k))return"0";const T=.1+.02*e.bugs.findIndex(L=>L.id===k);return`${(Math.min(T,2)*100).toFixed(0)}% of food/sec`},E=k=>{try{return new URL(Object.assign({"../../assets/bugs/ant_legion_commander.png":Uk,"../../assets/bugs/ant_queen_guardian.png":qk,"../../assets/bugs/ant_scout_master.png":Bk,"../../assets/bugs/ant_tactician.png":Vk,"../../assets/bugs/ant_training_master.png":Hk,"../../assets/bugs/apocalyptic_termites.png":Gk,"../../assets/bugs/army_ant.png":jk,"../../assets/bugs/beetle.png":Wk,"../../assets/bugs/cockroach.png":zk,"../../assets/bugs/colossal_cockroach.png":Qk,"../../assets/bugs/endless_ant_swarms.png":Kk,"../../assets/bugs/fire_ant.png":Yk,"../../assets/bugs/galactic_moth.png":Xk,"../../assets/bugs/giant_firefly.png":Jk,"../../assets/bugs/giant_moth.png":Zk,"../../assets/bugs/giant_stag_beetle.png":ew,"../../assets/bugs/grasshopper.png":tw,"../../assets/bugs/housefly.png":sw,"../../assets/bugs/ladybug.png":nw,"../../assets/bugs/mosquito.png":rw,"../../assets/bugs/mutant_fly.png":ow,"../../assets/bugs/quantum_beetle.png":iw,"../../assets/bugs/queen_wasp.png":aw,"../../assets/bugs/radioactive_spider.png":lw,"../../assets/bugs/safe.png":cw,"../../assets/bugs/scorpion.png":uw,"../../assets/bugs/soldier.png":dw,"../../assets/bugs/stag_beetle_swarm.png":mw,"../../assets/bugs/swarm_lord.png":fw,"../../assets/bugs/tarantula.png":pw,"../../assets/bugs/termite.png":hw,"../../assets/bugs/ultra_beetle.png":gw,"../../assets/bugs/wasp.png":vw,"../../assets/bugs/worker.png":bw})[`../../assets/bugs/${k}.png`],import.meta.url).href}catch{return null}};return(k,A)=>(h(),v("div",null,[Ye(Zl,{modelValue:o.value,"onUpdate:modelValue":A[0]||(A[0]=S=>o.value=S),placeholder:"Search bugs or drops..."},null,8,["modelValue"]),a("div",wIe,[a("label",EIe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":A[1]||(A[1]=S=>i.value=S),class:"sr-only peer"},null,512),[[ln,i.value]]),A[2]||(A[2]=a("div",{class:"relative w-10 h-5 bg-amber-200 dark:bg-amber-900/40 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white dark:after:bg-amber-100 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-amber-500"},null,-1)),A[3]||(A[3]=a("span",{class:"ml-2 text-sm text-amber-800 dark:text-amber-200"},"Show player relative strength",-1))])]),i.value?(h(),v("div",CIe,[A[8]||(A[8]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Your Stats",-1)),a("div",SIe,[a("div",null,[A[4]||(A[4]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Damage",-1)),a("div",TIe,_(b(be)(b(s).playerDamage,0)),1)]),a("div",null,[A[5]||(A[5]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Health",-1)),a("div",AIe,_(b(be)(b(s).playerMaxHealth,0)),1)]),a("div",null,[A[6]||(A[6]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Defense",-1)),a("div",IIe,_(b(be)(b(s).playerDefense,0)),1)]),a("div",null,[A[7]||(A[7]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Regeneration",-1)),a("div",PIe,_(b(be)(b(s).playerRegen,0))+"/s",1)])])])):Q("",!0),a("div",MIe,[(h(!0),v(De,null,Ge(w.value,S=>(h(),v("div",{key:S.id,class:K(["border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10",{"border-green-400 dark:border-green-600":i.value&&d(S.id),"border-yellow-400 dark:border-yellow-600":i.value&&!d(S.id)&&m(S.id),"border-red-400 dark:border-red-600":i.value&&!m(S.id)}])},[a("div",{onClick:T=>c(S.id),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[a("div",RIe,[a("div",LIe,[E(S.id)?(h(),v("img",{key:0,src:E(S.id),alt:S.name,class:"w-full h-full object-contain"},null,8,DIe)):(h(),v("span",{key:1,class:K(["i-heroicons-bug-ant text-xl absolute inset-0 flex items-center justify-center",[d(S.id)?"text-green-600 dark:text-green-400":m(S.id)?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"]])},null,2))]),a("div",null,[a("div",NIe,_(S.name),1),a("div",OIe,_(S.description),1)])]),a("div",FIe,[a("div",UIe,[a("div",null,[A[9]||(A[9]=a("span",{class:"font-medium"},"HP:",-1)),oe(" "+_(b(be)(S.maxHealth,0)),1)]),a("div",null,[A[10]||(A[10]=a("span",{class:"font-medium"},"DMG:",-1)),oe(" "+_(b(be)(S.damage,0)),1)])]),a("span",{class:K(["transition-transform",u(S.id)?"rotate-180":""])},A[11]||(A[11]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)])],8,$Ie),u(S.id)?(h(),v("div",qIe,[a("div",BIe,[a("div",null,[A[18]||(A[18]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Stats",-1)),a("div",VIe,[a("div",null,[A[12]||(A[12]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(S.id),1)]),a("div",null,[A[13]||(A[13]=a("span",{class:"font-medium"},"Health:",-1)),oe(" "+_(b(be)(S.maxHealth,0)),1)]),a("div",null,[A[14]||(A[14]=a("span",{class:"font-medium"},"Damage:",-1)),oe(" "+_(b(be)(S.damage,0)),1)]),a("div",null,[A[15]||(A[15]=a("span",{class:"font-medium"},"Defense:",-1)),oe(" "+_(b(be)(S.defense,0)),1)]),a("div",null,[A[16]||(A[16]=a("span",{class:"font-medium"},"Effective Damage:",-1)),oe(" "+_(b(be)(b(s).calculateDamage(b(s).playerDamage,S.defense),0))+" (per hit)",1)]),a("div",null,[A[17]||(A[17]=a("span",{class:"font-medium"},"Reward:",-1)),oe(" "+_(C(S.id)),1)])]),i.value?(h(),v("div",{key:0,class:K(["mt-4 p-2 rounded-md",{"bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-800":d(S.id),"bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-800":!d(S.id)&&m(S.id),"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800":!m(S.id)}])},[a("div",{class:K(["font-medium mb-1",{"text-green-700 dark:text-green-300":d(S.id),"text-yellow-700 dark:text-yellow-300":!d(S.id)&&m(S.id),"text-red-700 dark:text-red-300":!m(S.id)}])},_(d(S.id)?"One-hit Kill":m(S.id)?"Can Defeat":"Too Strong"),3),a("div",{class:K(["text-xs",{"text-green-600 dark:text-green-400":d(S.id),"text-yellow-600 dark:text-yellow-400":!d(S.id)&&m(S.id),"text-red-600 dark:text-red-400":!m(S.id)}])},_(d(S.id)?"You can kill this bug in one hit!":m(S.id)?"You can defeat this bug, but it will take multiple hits.":"This bug is too strong for you right now."),3)],2)):Q("",!0)]),a("div",null,[A[20]||(A[20]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Drops",-1)),a("div",HIe,[(h(!0),v(De,null,Ge(S.drops,(T,R)=>(h(),v("div",{key:R,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",GIe,[a("div",null,[a("div",jIe,_(p(T.itemId)),1),a("div",WIe,_(T.minQuantity===T.maxQuantity?T.minQuantity:`${T.minQuantity}-${T.maxQuantity}`)+" per drop ",1)]),a("div",zIe,[a("div",QIe,[A[19]||(A[19]=oe(" Drop Chance: ")),a("span",KIe,_(f(T.chance)),1)])])])]))),128)),S.drops.length===0?(h(),v("div",YIe," This bug doesn't drop any items. ")):Q("",!0)])])])])):Q("",!0)],2))),128))]),w.value.length===0?(h(),v("div",XIe," No bugs found matching your search query. ")):Q("",!0)]))}}),o5=Ct(JIe,[["__scopeId","data-v-10b74066"]]),ZIe={class:"mb-4"},ePe={class:"flex items-center justify-between mb-2"},tPe={class:"flex flex-wrap gap-2"},sPe=["onClick"],nPe={class:"text-xs text-amber-600 dark:text-amber-400"},rPe={key:0},oPe={class:"text-xs text-amber-600 dark:text-amber-400 font-normal"},iPe={class:"space-y-3"},aPe=["onClick"],lPe={class:"flex items-center gap-3"},cPe=["src","alt"],uPe={class:"text-xs text-amber-600 dark:text-amber-400 line-clamp-1"},dPe={class:"flex items-center gap-2"},mPe=["onClick"],fPe={class:"text-right"},pPe={class:"text-xs text-amber-600 dark:text-amber-400"},hPe={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},gPe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vPe={class:"space-y-1 text-sm"},bPe={class:"grid grid-cols-2 gap-2"},yPe={key:0,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},_Pe={class:"text-amber-700 dark:text-amber-300"},xPe={key:1,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},kPe={class:"text-amber-700 dark:text-amber-300"},wPe={key:2,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},EPe={class:"text-amber-700 dark:text-amber-300"},CPe={key:3,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},SPe={class:"text-amber-700 dark:text-amber-300"},TPe={key:0},APe={class:"space-y-2"},IPe={class:"font-medium"},PPe={class:"text-amber-700 dark:text-amber-300"},MPe={key:1,class:"mt-4"},$Pe={class:"space-y-2"},RPe={key:0,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},LPe={class:"text-amber-700 dark:text-amber-300"},DPe={key:1,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},NPe={class:"text-amber-700 dark:text-amber-300"},OPe={class:"font-medium"},FPe={class:"text-amber-700 dark:text-amber-300"},UPe={key:2,class:"text-sm italic text-amber-600 dark:text-amber-400 mt-4"},qPe={key:0,class:"p-4 text-center text-amber-600 dark:text-amber-400"},Vp="items-wiki",BPe=Je({__name:"ItemsWiki",setup(t){const e=Ts(),s=Ri();Hr(),hn();const n=Y(s.getSearchQuery(Vp));Y(!0);const r=Y(null),o=["common","uncommon","rare","epic","legendary","mythic","divine"],i=q(()=>{const T=new Set;return Object.values(e.items).forEach(R=>{T.add(R.rarity)}),Array.from(T).sort((R,L)=>o.indexOf(R)-o.indexOf(L))});dt(n,T=>{s.setSearchQuery(Vp,T)});const c=T=>{s.toggleItemExpanded(Vp,T)},u=T=>s.isItemExpanded(Vp,T),d=q(()=>{let T=Object.values(e.items);if(r.value&&(T=T.filter(R=>R.rarity===r.value)),n.value){const R=n.value.toLowerCase();T=T.filter(L=>L.name.toLowerCase().includes(R)||L.description.toLowerCase().includes(R)||L.id.toLowerCase().includes(R)||L.rarity.toLowerCase().includes(R))}return T}),m=q(()=>{const T={};return i.value.forEach(R=>{T[R]=[]}),d.value.forEach(R=>{T[R.rarity]&&T[R.rarity].push(R)}),T}),f=T=>T?`+${be(T,0)}`:"0",p=T=>{if(!T)return"0%";const R=T.sub(1).mul(100);return`+${be(R,0)}%`},g=T=>e.getRarityColor(T),w=T=>e.getRarityBackground(T),C=T=>({worker:"Worker Ants",nursery:"Nursery",queenChamber:"Queen Chamber",colony:"Colony",megacolony:"Megacolony",hivemind:"Hivemind",antopolis:"Antopolis",alateHatchery:"Alate Hatchery",global:"All Generators"})[T]||T,E=q(()=>{const T={};return i.value.forEach(R=>{T[R]=0}),Object.values(e.items).forEach(R=>{T[R.rarity]=(T[R.rarity]||0)+1}),T}),k=T=>{try{return new URL(Object.assign({"../../assets/items/ascension_matrix.png":Ig,"../../assets/items/beetle_shell_shield.png":Pg,"../../assets/items/boss_chitinous_blade.png":Mg,"../../assets/items/boss_cosmic_nucleus.png":$g,"../../assets/items/boss_divine_mandible.png":Rg,"../../assets/items/boss_hivemind_helm.png":Lg,"../../assets/items/boss_hivemind_synapse.png":Dg,"../../assets/items/boss_mandible_gauntlets.png":Ng,"../../assets/items/boss_nebula_stinger.png":Og,"../../assets/items/boss_omega_particle.png":Fg,"../../assets/items/boss_pheromone_catalyst.png":Ug,"../../assets/items/boss_primordial_chitin_plate.png":qg,"../../assets/items/boss_quantum_core.png":Bg,"../../assets/items/boss_quantum_stinger.png":Vg,"../../assets/items/boss_reality_fragment.png":Hg,"../../assets/items/boss_reality_thread.png":Gg,"../../assets/items/boss_royal_carapace.png":jg,"../../assets/items/boss_star_eater_mandible.png":Wg,"../../assets/items/boss_temporal_chitin.png":zg,"../../assets/items/boss_void_essence_core.png":Qg,"../../assets/items/chronos_shell.png":Kg,"../../assets/items/common_ant_training_kit.png":Yg,"../../assets/items/cosmic_duality.png":Xg,"../../assets/items/divine_ant_queen_crown.png":Jg,"../../assets/items/divine_eternity_weave.png":Zg,"../../assets/items/divine_genesis_claw.png":ev,"../../assets/items/divine_infinity_shard.png":tv,"../../assets/items/divine_transcendence_core.png":sv,"../../assets/items/divine_universal_amplifier.png":nv,"../../assets/items/emperor_toxin.png":rv,"../../assets/items/entropy_fangs.png":ov,"../../assets/items/epic_ant_commander_armor.png":iv,"../../assets/items/eternity_weave.png":av,"../../assets/items/evolution_crystal.png":lv,"../../assets/items/exoskeleton_plate.png":cv,"../../assets/items/foraging_tools.png":uv,"../../assets/items/genesis_claw.png":dv,"../../assets/items/hive_amplifier.png":mv,"../../assets/items/infinity_shard.png":fv,"../../assets/items/infinity_shard_old.png":pv,"../../assets/items/leaf_cloak.png":hv,"../../assets/items/mandible_crusher.png":gv,"../../assets/items/mandible_crusher_old.png":vv,"../../assets/items/mythic_ascension_matrix.png":bv,"../../assets/items/mythic_catalyst.png":yv,"../../assets/items/mythic_swarm_controller.png":_v,"../../assets/items/omnipotent_catalyst.png":xv,"../../assets/items/pebble_hammer.png":kv,"../../assets/items/quantum_mandibles.png":wv,"../../assets/items/rare_ant_tactician_helm.png":Ev,"../../assets/items/reinforced_mandibles.png":Cv,"../../assets/items/resin_helmet.png":Sv,"../../assets/items/thorn_spear.png":Tv,"../../assets/items/thorn_spear_old.png":Av,"../../assets/items/training_armor.png":Iv,"../../assets/items/training_sword.png":Pv,"../../assets/items/training_sword_old.png":Mv,"../../assets/items/transcendence_core.png":$v,"../../assets/items/uncommon_ant_scout_gear.png":Rv,"../../assets/items/universal_amplifier.png":Lv,"../../assets/items/venom_dagger.png":Dv,"../../assets/items/void_reaver.png":Nv,"../../assets/items/wooden_shield.png":Ov,"../../assets/items/wooden_shield_old.png":Fv,"../../assets/items/worker_armor.png":Uv,"../../assets/items/worker_armor_old.png":qv,"../../assets/items/worker_sword.png":Bv})[`../../assets/items/${T}.png`],import.meta.url).href}catch{return}},A=T=>T?Object.entries(T).filter(([R,L])=>R!=="epBoost"&&R!=="global"&&L!==void 0):[],S=T=>{{console.warn("Attempted to add item outside of debug mode.");return}};return(T,R)=>{const L=vL;return h(),v("div",null,[Ye(Zl,{modelValue:n.value,"onUpdate:modelValue":R[0]||(R[0]=P=>n.value=P),placeholder:"Search items..."},null,8,["modelValue"]),a("div",ZIe,[a("div",ePe,[R[2]||(R[2]=a("h3",{class:"font-medium text-amber-800 dark:text-amber-200"},"Filter by Rarity",-1)),r.value?(h(),v("button",{key:0,onClick:R[1]||(R[1]=P=>r.value=null),class:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded-md hover:bg-amber-200 dark:hover:bg-amber-800/50"}," Clear Filter ")):Q("",!0)]),a("div",tPe,[(h(!0),v(De,null,Ge(i.value,P=>(h(),v("button",{key:P,onClick:I=>r.value=P===r.value?null:P,class:K(["px-3 py-1.5 rounded-lg text-sm transition-colors flex items-center gap-1",r.value===P?"border-2 font-medium shadow-sm "+w(P):"border border-amber-200 dark:border-amber-800 hover:bg-amber-100/50 dark:hover:bg-amber-900/30"])},[a("span",{class:K(g(P))},_(P.charAt(0).toUpperCase()+P.slice(1)),3),a("span",nPe,"("+_(E.value[P])+")",1)],10,sPe))),128))])]),(h(!0),v(De,null,Ge(m.value,(P,I)=>(h(),v("div",{key:I,class:"mb-6"},[P.length>0?(h(),v("div",rPe,[a("h2",{class:K(["text-lg font-bold mb-3 flex items-center gap-2",g(I)])},[a("span",null,_(I.charAt(0).toUpperCase()+I.slice(1))+" Items",1),a("span",oPe,"("+_(P.length)+" items)",1)],2),a("div",iPe,[(h(!0),v(De,null,Ge(P,D=>(h(),v("div",{key:D.id,class:K(["border rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10",w(D.rarity),r.value===D.rarity?"border-2":"border"])},[a("div",{onClick:U=>c(D.id),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100/50 dark:hover:bg-amber-900/20 transition-colors"},[a("div",lPe,[a("div",{class:K(["w-16 h-16 flex-shrink-0 flex items-center justify-center rounded",w(D.rarity)])},[k(D.id)?(h(),v("img",{key:0,src:k(D.id),alt:D.name,class:"w-12 h-12 object-contain",style:{"image-rendering":"pixelated"}},null,8,cPe)):(h(),v("span",{key:1,class:K(["i-heroicons-photo text-xl",g(D.rarity)])},null,2))],2),a("div",null,[a("div",{class:K(["font-medium",g(D.rarity)])},_(D.name),3),a("div",uPe,_(D.description),1)])]),a("div",dPe,[b(Co)()?(h(),v("button",{key:0,onClick:xt(U=>S(D.id),["stop"]),title:"Add to Inventory (Debug)",class:"p-1 rounded bg-sky-600 text-white hover:bg-sky-700 text-xs focus:outline-none focus:ring-1 focus:ring-sky-500 flex items-center justify-center"},R[3]||(R[3]=[a("span",{class:"i-heroicons-plus w-3 h-3"},null,-1)]),8,mPe)):Q("",!0),a("div",fPe,[a("div",pPe,_(D.rarity.charAt(0).toUpperCase()+D.rarity.slice(1)),1)]),a("span",{class:K(["transition-transform",u(D.id)?"rotate-180":""])},R[4]||(R[4]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)])],8,aPe),u(D.id)?(h(),v("div",hPe,[a("div",gPe,[a("div",null,[a("h3",{class:K(["font-medium mb-2",g(D.rarity)])},"Basic Information",2),a("div",vPe,[a("div",null,[R[5]||(R[5]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(D.id),1)]),a("div",null,[R[6]||(R[6]=a("span",{class:"font-medium"},"Type:",-1)),oe(" "+_(D.type.charAt(0).toUpperCase()+D.type.slice(1)),1)]),a("div",null,[R[7]||(R[7]=a("span",{class:"font-medium"},"Rarity:",-1)),a("span",{class:K(g(D.rarity))},_(D.rarity.charAt(0).toUpperCase()+D.rarity.slice(1)),3)])]),a("h3",{class:K(["font-medium mt-4 mb-2",g(D.rarity)])},"Combat Stats",2),a("div",bPe,[D.stats.damage?(h(),v("div",yPe,[R[8]||(R[8]=a("div",{class:"font-medium"},"Damage",-1)),a("div",_Pe,_(f(D.stats.damage)),1)])):Q("",!0),D.stats.health?(h(),v("div",xPe,[R[9]||(R[9]=a("div",{class:"font-medium"},"Health",-1)),a("div",kPe,_(f(D.stats.health)),1)])):Q("",!0),D.stats.defense?(h(),v("div",wPe,[R[10]||(R[10]=a("div",{class:"font-medium"},"Defense",-1)),a("div",EPe,_(f(D.stats.defense)),1)])):Q("",!0),D.stats.regen?(h(),v("div",CPe,[R[11]||(R[11]=a("div",{class:"font-medium"},"Regeneration",-1)),a("div",SPe,_(f(D.stats.regen)),1)])):Q("",!0)])]),a("div",null,[D.productionModifiers&&Object.keys(D.productionModifiers).length>0?(h(),v("div",TPe,[a("h3",{class:K(["font-medium mb-2",g(D.rarity)])},"Production Modifiers",2),a("div",APe,[(h(!0),v(De,null,Ge(D.productionModifiers,(U,M)=>(h(),v("div",{key:M,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",IPe,_(C(M)),1),a("div",PPe,_(p(U)),1)]))),128))])])):Q("",!0),D.specialModifiers&&Object.keys(D.specialModifiers).length>0?(h(),v("div",MPe,[a("h3",{class:K(["font-medium mb-2",g(D.rarity)])},"Special Effects",2),a("div",$Pe,[D.specialModifiers.epBoost?(h(),v("div",RPe,[R[12]||(R[12]=a("div",{class:"font-medium"},"Evolution Points",-1)),a("div",LPe,_(p(D.specialModifiers.epBoost)),1)])):Q("",!0),D.specialModifiers.global?(h(),v("div",DPe,[R[13]||(R[13]=a("div",{class:"font-medium"},"Global Production",-1)),a("div",NPe,_(p(D.specialModifiers.global)),1)])):Q("",!0),(h(!0),v(De,null,Ge(A(D.specialModifiers),([U,M])=>(h(),v("div",{key:U,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},[a("div",OPe,_(U.charAt(0).toUpperCase()+U.slice(1).replace(/([A-Z])/g," $1")),1),a("div",FPe,_(p(M)),1)]))),128))])])):Q("",!0),(!D.productionModifiers||Object.keys(D.productionModifiers).length===0)&&(!D.specialModifiers||Object.keys(D.specialModifiers).length===0)?(h(),v("div",UPe," This item has no production or special effects. ")):Q("",!0),Ye(L,{item:D},null,8,["item"])])])])):Q("",!0)],2))),128))])])):Q("",!0)]))),128)),Object.values(m.value).every(P=>P.length===0)?(h(),v("div",qPe," No items found matching your search criteria. ")):Q("",!0)])}}}),i5=Ct(BPe,[["__scopeId","data-v-f0bc2afe"]]),VPe={class:"mb-4 bg-emerald-50/70 dark:bg-emerald-900/20 p-3 rounded-lg border border-emerald-200 dark:border-emerald-800"},HPe={class:"block mb-2 text-sm font-medium text-emerald-800 dark:text-emerald-200"},GPe={class:"font-bold text-emerald-600 dark:text-emerald-300"},jPe={key:0,class:"p-4 text-center text-emerald-600 dark:text-emerald-400"},WPe={class:"space-y-3"},zPe=["onClick"],QPe={class:"flex items-center gap-3"},KPe=["src","alt"],YPe={class:"font-medium"},XPe={class:"text-xs text-emerald-600 dark:text-emerald-400"},JPe={class:"flex items-center gap-4"},ZPe={class:"text-right"},e3e={class:"text-sm"},t3e={class:"font-medium"},s3e={class:"text-xs"},n3e={key:0,class:"border-t border-emerald-300 dark:border-emerald-700 p-3"},r3e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},o3e={class:"space-y-1 text-sm"},i3e={class:"overflow-x-auto max-h-60 overflow-y-auto border border-emerald-200 dark:border-emerald-800 rounded"},a3e={class:"w-full text-sm"},l3e={class:"p-2"},c3e={class:"p-2 text-right"},u3e={class:"p-2 text-right text-emerald-700 dark:text-emerald-300"},d3e={class:"mt-4"},m3e={class:"text-sm text-emerald-600 dark:text-emerald-400 mb-2"},f3e={class:"overflow-x-auto border border-emerald-200 dark:border-emerald-800 rounded"},p3e={class:"w-full text-sm"},h3e={class:"p-2"},g3e={class:"p-2 text-right"},v3e={class:"p-2 text-right text-emerald-700 dark:text-emerald-300"},xc="generators-wiki",b3e=Je({__name:"GeneratorsWiki",setup(t){const e=Ht(),s=Ri(),n=Y(s.getSearchQuery(xc)),r=Y(s.getMaxPreviewLevel(xc));dt(n,g=>{s.setSearchQuery(xc,g)}),dt(r,g=>{s.setMaxPreviewLevel(xc,g)});const o=g=>{s.toggleItemExpanded(xc,g)},i=g=>s.isItemExpanded(xc,g),c=g=>be(g.baseCost,0),u=(g,w)=>ZP(g,new Se(w)),d=g=>{const w=e.getBaseProduction(g);return be(w,0)},m=g=>({worker:"food",nursery:"worker ants",queenChamber:"nurseries",colony:"queen chambers",megacolony:"colonies",hivemind:"mega colonies",antopolis:"hive minds",alateHatchery:"antopolis"})[g]||"",f=q(()=>{if(!n.value)return e.generators;const g=n.value.toLowerCase();return e.generators.filter(w=>w.name.toLowerCase().includes(g)||w.description.toLowerCase().includes(g)||w.id.toLowerCase().includes(g))}),p=g=>{try{return new URL(Object.assign({"../../assets/generators/alateHatchery.png":Mk,"../../assets/generators/antopolis.png":$k,"../../assets/generators/colony.png":Rk,"../../assets/generators/hivemind.png":Lk,"../../assets/generators/megacolony.png":Dk,"../../assets/generators/nursery.png":Nk,"../../assets/generators/queenChamber.png":Ok,"../../assets/generators/worker.png":Fk})[`../../assets/generators/${g}.png`],import.meta.url).href}catch(w){return console.error(`Error loading image for generator ${g}:`,w),""}};return(g,w)=>(h(),v("div",null,[Ye(Zl,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=C=>n.value=C),placeholder:"Search generators..."},null,8,["modelValue"]),a("div",VPe,[a("label",HPe,[w[3]||(w[3]=oe(" Show generator costs up to ")),a("span",GPe,_(r.value),1),w[4]||(w[4]=oe(" purchases "))]),Ye(Vv,{modelValue:r.value,"onUpdate:modelValue":w[1]||(w[1]=C=>r.value=C),presets:[10,25,50,100,250,500,1e3],max:1e3,color:"emerald"},null,8,["modelValue"])]),f.value.length===0?(h(),v("div",jPe," No generators found for this search query. ")):Q("",!0),a("div",WPe,[(h(!0),v(De,null,Ge(f.value,C=>(h(),v("div",{key:C.id,class:"border border-emerald-300 dark:border-emerald-700 rounded-lg overflow-hidden bg-emerald-50/50 dark:bg-emerald-900/10"},[a("div",{onClick:E=>o(C.id),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-emerald-100 dark:hover:bg-emerald-900/20 transition-colors"},[a("div",QPe,[a("img",{src:p(C.id),alt:`${C.name} icon`,class:"w-8 h-8 object-contain flex-shrink-0",onError:w[2]||(w[2]=E=>E.target.style.display="none")},null,40,KPe),a("div",null,[a("div",YPe,_(C.name),1),a("div",XPe,_(C.description),1)])]),a("div",JPe,[a("div",ZPe,[a("div",e3e,[w[5]||(w[5]=oe("Tier: ")),a("span",t3e,_(C.tier),1)]),a("div",s3e,"Base Cost: "+_(c(C)),1)]),a("span",{class:K(["transition-transform",i(C.id)?"rotate-180":""])},w[6]||(w[6]=[a("span",{class:"i-heroicons-chevron-down text-emerald-600 dark:text-emerald-400"},null,-1)]),2)])],8,zPe),i(C.id)?(h(),v("div",n3e,[a("div",r3e,[a("div",null,[w[12]||(w[12]=a("h3",{class:"font-medium mb-2 text-emerald-800 dark:text-emerald-200"},"Basic Information",-1)),a("div",o3e,[a("div",null,[w[7]||(w[7]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(C.id),1)]),a("div",null,[w[8]||(w[8]=a("span",{class:"font-medium"},"Tier:",-1)),oe(" "+_(C.tier),1)]),a("div",null,[w[9]||(w[9]=a("span",{class:"font-medium"},"Base Cost:",-1)),oe(" "+_(c(C)),1)]),a("div",null,[w[10]||(w[10]=a("span",{class:"font-medium"},"Cost Growth:",-1)),oe(" "+_(b(be)(C.costGrowth,2)),1)]),a("div",null,[w[11]||(w[11]=a("span",{class:"font-medium"},"Base Production:",-1)),oe(" "+_(d(C.id))+" "+_(m(C.id))+"/sec",1)])])]),a("div",null,[w[14]||(w[14]=a("h3",{class:"font-medium mb-2 text-emerald-800 dark:text-emerald-200"},"Cost Progression",-1)),a("div",i3e,[a("table",a3e,[w[13]||(w[13]=a("thead",{class:"bg-emerald-200 dark:bg-emerald-900/40 sticky top-0"},[a("tr",null,[a("th",{class:"p-2 text-left"},"Purchases"),a("th",{class:"p-2 text-right"},"Unit Cost"),a("th",{class:"p-2 text-right"},"Total Spent")])],-1)),a("tbody",null,[(h(!0),v(De,null,Ge([0,1,5,10,25,50,100,250,500,1e3].filter(E=>E<=r.value),E=>(h(),v("tr",{key:E,class:"border-t border-emerald-200 dark:border-emerald-800 hover:bg-emerald-100 dark:hover:bg-emerald-900/30"},[a("td",l3e,_(E),1),a("td",c3e,_(b(be)(u(C.tier,E),0)),1),a("td",u3e,_(b(be)(u(C.tier,E).mul(E),0)),1)]))),128))])])])])]),a("div",d3e,[w[16]||(w[16]=a("h3",{class:"font-medium mb-2 text-emerald-800 dark:text-emerald-200"},"Production Information",-1)),a("p",m3e,_(C.name)+" produces "+_(d(C.id))+" "+_(m(C.id))+" per second at base value. Each "+_(C.name.toLowerCase())+" you own multiplies this production linearly. ",1),a("div",f3e,[a("table",p3e,[w[15]||(w[15]=a("thead",{class:"bg-emerald-200 dark:bg-emerald-900/40"},[a("tr",null,[a("th",{class:"p-2 text-left"},"Count"),a("th",{class:"p-2 text-right"},"Base Production"),a("th",{class:"p-2 text-right"},"Per Generator")])],-1)),a("tbody",null,[(h(),v(De,null,Ge([1,10,100,1e3,1e4],E=>a("tr",{key:E,class:"border-t border-emerald-200 dark:border-emerald-800 hover:bg-emerald-100 dark:hover:bg-emerald-900/30"},[a("td",h3e,_(E),1),a("td",g3e,_(b(be)(new(b(Se))(d(C.id)).mul(E),0)),1),a("td",v3e,_(d(C.id)),1)])),64))])])])])])):Q("",!0)]))),128))])]))}}),a5=Ct(b3e,[["__scopeId","data-v-1c63145d"]]),y3e={class:"border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10 mb-4"},_3e={class:"p-4"},x3e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},k3e={class:"border border-amber-200 dark:border-amber-800 rounded-lg p-3"},w3e={class:"text-sm"},E3e={class:"mb-2"},C3e={key:0,class:"space-y-2"},S3e={class:"flex items-center"},T3e={class:"flex-1 bg-amber-100 dark:bg-amber-900/40 h-2 rounded-full overflow-hidden"},A3e={class:"ml-2 text-xs"},I3e={class:"flex items-center"},P3e={class:"flex-1 bg-amber-100 dark:bg-amber-900/40 h-2 rounded-full overflow-hidden"},M3e={class:"ml-2 text-xs"},$3e={class:"text-sm"},R3e={class:"text-sm"},L3e={class:"border border-amber-200 dark:border-amber-800 rounded-lg p-3"},D3e={class:"text-sm"},N3e={class:"mb-2"},O3e={key:0,class:"space-y-2"},F3e={class:"text-sm"},U3e={class:"text-sm"},q3e={class:"border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10 mb-4"},B3e={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},V3e={key:0,class:"p-4 text-center text-amber-600 dark:text-amber-400"},H3e={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G3e={class:"flex justify-between items-start mb-2"},j3e={class:"font-medium text-amber-800 dark:text-amber-300"},W3e={class:"text-xs text-amber-600 dark:text-amber-400"},z3e={class:"text-sm text-amber-700 dark:text-amber-300 mb-3"},Q3e={class:"space-y-2 text-sm"},K3e={class:"flex justify-between items-center"},Y3e={class:"font-medium"},X3e={key:0,class:"flex justify-between items-center"},J3e={class:"font-medium text-green-600 dark:text-green-400"},Z3e={class:"text-xs"},eMe={key:1,class:"flex justify-between items-center"},tMe={class:"font-medium text-amber-600 dark:text-amber-400"},sMe={class:"flex justify-between items-center"},nMe={key:2,class:"mt-3"},rMe={key:3,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},oMe={class:"border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10"},iMe={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},aMe={key:0,class:"p-4 text-center text-amber-600 dark:text-amber-400"},lMe={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cMe={class:"flex justify-between items-start mb-2"},uMe={class:"font-medium text-amber-800 dark:text-amber-300"},dMe={class:"text-xs text-amber-600 dark:text-amber-400"},mMe={class:"text-sm text-amber-700 dark:text-amber-300 mb-3"},fMe={class:"space-y-2 text-sm"},pMe={class:"flex justify-between items-center"},hMe={class:"font-medium"},gMe={key:0,class:"flex justify-between items-center"},vMe={class:"font-medium text-green-600 dark:text-green-400"},bMe={key:1,class:"flex justify-between items-center"},yMe={class:"font-medium text-amber-600 dark:text-amber-400"},_Me={class:"flex justify-between items-center"},xMe={key:2,class:"mt-3"},kMe={key:3,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},kc="mega-ant",wMe=Je({__name:"MegaAntWiki",setup(t){const e=Wt(),s=Ri(),n=Y(s.getSearchQuery(kc)),r=Y(s.getMaxPreviewLevel(kc));dt(n,E=>{s.setSearchQuery(kc,E)}),dt(r,E=>{s.setMaxPreviewLevel(kc,E)});const o=E=>{s.toggleItemExpanded(kc,E)},i=E=>s.isItemExpanded(kc,E),c=q(()=>e.isUnlocked?`Level ${e.level} (${e.levelProgress.toFixed(1)}% to next level)`:"Locked - Requires 'Mega Ant' prestige upgrade"),u=q(()=>e.isUnlocked?`Level ${e.colonyLevel} (${e.colonyLevelProgress.toFixed(1)}% to next level)`:"Locked - Requires 'Mega Ant' prestige upgrade"),d=(E,k)=>k?(k=k.toLowerCase(),E.filter(A=>{var S,T,R;return((S=A.name)==null?void 0:S.toLowerCase().includes(k))||((T=A.description)==null?void 0:T.toLowerCase().includes(k))||((R=A.id)==null?void 0:R.toLowerCase().includes(k))})):E,m=q(()=>d(e.upgrades,n.value)),f=q(()=>d(e.colonyUpgrades,n.value)),p=(E,k,A)=>{const S=e.getUpgradeEffectValue(E),T=e.getNextUpgradeEffectValue(E);return E===Tn.EFFICIENCY||E===Tn.DECAY_RATE?`+${((T-S)*100).toFixed(0)}%`:`+${(T-S).toFixed(0)}`},g=(E,k)=>{const A=E.getEffectValue(E.level),S=E.getEffectValue(Math.min(k,E.maxLevel));return S<=A||E.level>=E.maxLevel?"":E.id===Tn.EFFICIENCY||E.id===Tn.DECAY_RATE?` ${S.toFixed(2)} (+${((S-A)*100).toFixed(0)}%)`:` ${S.toFixed(0)} (+${(S-A).toFixed(0)})`},w=(E,k)=>{if(!E||E.level>=E.maxLevel)return"";const A=E.getMultiplier(E.level),S=E.getMultiplier(Math.min(k,E.maxLevel));if(S<=A)return"";const T=((S-A)*100).toFixed(0);return` +${((S-1)*100).toFixed(0)}% (+${T}%)`},C=(E,k,A)=>{const S=e.getColonyUpgradeMultiplier(E),T=e.getColonyUpgrade(E);return T?`+${((T.getMultiplier(k+1)-S)*100).toFixed(0)}%`:"+0%"};return(E,k)=>(h(),v("div",null,[a("div",y3e,[a("div",_3e,[k[12]||(k[12]=js('<h2 class="text-lg font-semibold mb-4 flex items-center" data-v-200ca3d0><span class="i-heroicons-bug-ant text-xl text-amber-700 dark:text-amber-400 mr-2" data-v-200ca3d0></span> Mega Ant System Guide </h2><div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4" data-v-200ca3d0><h3 class="font-medium text-amber-800 dark:text-amber-300 mb-3" data-v-200ca3d0>How It Works</h3><div class="text-sm text-gray-700 dark:text-gray-300 space-y-2" data-v-200ca3d0><p data-v-200ca3d0>The Mega Ant is a special evolution of your ant colony that unlocks after reaching 100M Evolution Points. It features a unique dual digestive system that provides powerful bonuses to your entire colony.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3" data-v-200ca3d0><div class="bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-200 dark:border-amber-700/50" data-v-200ca3d0><h4 class="font-medium text-amber-700 dark:text-amber-300 flex items-center gap-1 mb-2" data-v-200ca3d0><span class="i-heroicons-arrow-path-rounded-square" data-v-200ca3d0></span>Crop System (Mega Ant XP) </h4><ol class="list-decimal list-inside space-y-1 pl-1 text-xs" data-v-200ca3d0><li class="mb-1" data-v-200ca3d0>Feed <b data-v-200ca3d0>regular food</b> to your Mega Ant&#39;s crop</li><li class="mb-1" data-v-200ca3d0>Food is automatically digested over time at a rate determined by your upgrades</li><li class="mb-1" data-v-200ca3d0>Digestion grants <b data-v-200ca3d0>Mega Ant XP</b> based on the logarithm of food fed</li><li class="mb-1" data-v-200ca3d0>Mega Ant levels provide upgrade points for digestive systems</li></ol></div><div class="bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg border border-purple-200 dark:border-purple-700/50" data-v-200ca3d0><h4 class="font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1 mb-2" data-v-200ca3d0><span class="i-heroicons-beaker" data-v-200ca3d0></span>True Stomach System (Colony XP) </h4><ol class="list-decimal list-inside space-y-1 pl-1 text-xs" data-v-200ca3d0><li class="mb-1" data-v-200ca3d0>Feed <b data-v-200ca3d0>pheromone essence</b> to the true stomach</li><li class="mb-1" data-v-200ca3d0>Essence is automatically digested over time at a rate determined by your upgrades</li><li class="mb-1" data-v-200ca3d0>Digestion grants <b data-v-200ca3d0>Colony XP</b> based on the logarithm of essence fed (2x more effective than food)</li><li class="mb-1" data-v-200ca3d0>Colony levels provide upgrade points for colony-wide bonuses</li></ol></div></div><div class="mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700/50" data-v-200ca3d0><h4 class="font-medium text-blue-700 dark:text-blue-300 mb-2" data-v-200ca3d0>Key Mechanics</h4><ul class="space-y-2 text-xs" data-v-200ca3d0><li class="flex items-start" data-v-200ca3d0><span class="i-heroicons-light-bulb text-blue-500 mr-1.5 mt-0.5" data-v-200ca3d0></span><span data-v-200ca3d0><b data-v-200ca3d0>XP Calculation:</b> XP gained is based on the exponent (magnitude) of the food/essence fed, not the raw amount. For example, feeding 1e100 food would yield approximately 100 XP.</span></li><li class="flex items-start" data-v-200ca3d0><span class="i-heroicons-light-bulb text-blue-500 mr-1.5 mt-0.5" data-v-200ca3d0></span><span data-v-200ca3d0><b data-v-200ca3d0>Upgrade System:</b> All Mega Ant upgrades affect both digestive systems simultaneously, improving capacity, digestion rate, or XP efficiency.</span></li><li class="flex items-start" data-v-200ca3d0><span class="i-heroicons-light-bulb text-blue-500 mr-1.5 mt-0.5" data-v-200ca3d0></span><span data-v-200ca3d0><b data-v-200ca3d0>Colony Upgrades:</b> These provide global bonuses to your entire ant farm, including EP gain, pheromone production, and global resource generation.</span></li><li class="flex items-start" data-v-200ca3d0><span class="i-heroicons-light-bulb text-blue-500 mr-1.5 mt-0.5" data-v-200ca3d0></span><span data-v-200ca3d0><b data-v-200ca3d0>Ascension:</b> Reset your progress but keep all upgrades to gain a permanent multiplier to XP gains. Each ascension gives +25% to all XP gains.</span></li></ul></div></div></div>',2)),a("div",x3e,[a("div",k3e,[k[8]||(k[8]=a("h3",{class:"font-medium text-amber-800 dark:text-amber-300 mb-2 flex items-center"},[a("span",{class:"i-heroicons-bug-ant text-lg mr-2"}),oe(" Mega Ant Status ")],-1)),a("div",w3e,[a("div",E3e,_(c.value),1),b(e).isUnlocked?(h(),v("div",C3e,[a("div",null,[k[4]||(k[4]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Food Stomach",-1)),a("div",S3e,[a("div",T3e,[a("div",{class:"bg-amber-500 h-full",style:yt({width:`${b(e).stomachFillPercentage}%`})},null,4)]),a("div",A3e,_(b(e).stomachContent.toFixed(1))+"/"+_(b(e).effectiveStomachCapacity.toFixed(1)),1)])]),a("div",null,[k[5]||(k[5]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Pheromone Stomach",-1)),a("div",I3e,[a("div",P3e,[a("div",{class:"bg-purple-500 h-full",style:yt({width:`${b(e).pheromoneStomachFillPercentage}%`})},null,4)]),a("div",M3e,_(b(e).pheromoneStomachContent.toFixed(1))+"/"+_(b(e).effectivePheromoneStomachCapacity.toFixed(1)),1)])]),a("div",null,[k[6]||(k[6]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Experience Needed",-1)),a("div",$3e,_(b(be)(b(e).experienceForNextLevel,1))+" XP",1)]),a("div",null,[k[7]||(k[7]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Available Upgrade Points",-1)),a("div",R3e,_(b(e).availableLevels),1)])])):Q("",!0)])]),a("div",L3e,[k[11]||(k[11]=a("h3",{class:"font-medium text-amber-800 dark:text-amber-300 mb-2 flex items-center"},[a("span",{class:"i-heroicons-home-modern text-lg mr-2"}),oe(" Colony Status ")],-1)),a("div",D3e,[a("div",N3e,_(u.value),1),b(e).isUnlocked?(h(),v("div",O3e,[a("div",null,[k[9]||(k[9]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Colony Experience Needed",-1)),a("div",F3e,_(b(be)(b(e).colonyExperienceForNextLevel,1))+" XP",1)]),a("div",null,[k[10]||(k[10]=a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Available Colony Upgrade Points",-1)),a("div",U3e,_(b(e).availableColonyLevels),1)])])):Q("",!0)])])])])]),Ye(Zl,{modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=A=>n.value=A),placeholder:"Search mega ant upgrades..."},null,8,["modelValue"]),Ye(Vv,{modelValue:r.value,"onUpdate:modelValue":k[1]||(k[1]=A=>r.value=A),color:"amber",label:"Preview upgrades up to level:"},null,8,["modelValue"]),k[23]||(k[23]=a("div",{class:"mb-4 bg-amber-50/70 dark:bg-amber-900/20 p-2 rounded-lg border border-amber-200 dark:border-amber-800 text-xs text-amber-700 dark:text-amber-300"},[a("div",{class:"flex items-start"},[a("span",{class:"i-heroicons-information-circle mr-1 text-sm mt-0.5"}),a("div",null,[a("span",{class:"font-medium"},"Level Preview Tool:"),oe(" Adjust the slider above to see how upgrades will look at higher levels. The amber values show the progression from your current level to the selected preview level. ")])])],-1)),a("div",q3e,[a("div",{onClick:k[2]||(k[2]=A=>o("megaAntUpgrades")),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[k[14]||(k[14]=a("div",{class:"flex items-center gap-3"},[a("span",{class:"i-heroicons-arrow-up-circle text-xl text-amber-700 dark:text-amber-400"}),a("div",null,[a("div",{class:"font-medium"},"Mega Ant Upgrades"),a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Spend Mega Ant levels to improve your digestive capabilities")])],-1)),a("span",{class:K(["transition-transform",i("megaAntUpgrades")?"rotate-180":""])},k[13]||(k[13]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)]),i("megaAntUpgrades")?(h(),v("div",B3e,[m.value.length===0?(h(),v("div",V3e," No mega ant upgrades found for your search query. ")):(h(),v("div",H3e,[(h(!0),v(De,null,Ge(m.value,A=>(h(),v("div",{key:A.id,class:"border border-amber-200 dark:border-amber-800 rounded-lg p-3"},[a("div",G3e,[a("h3",j3e,_(A.name),1),a("div",W3e," Level "+_(A.level)+"/"+_(A.maxLevel),1)]),a("p",z3e,_(A.description),1),a("div",Q3e,[a("div",K3e,[k[15]||(k[15]=a("div",null,"Current Effect:",-1)),a("div",Y3e,_(b(e).getUpgradeEffectValue(A.id).toFixed(2)),1)]),A.level<A.maxLevel?(h(),v("div",X3e,[k[16]||(k[16]=a("div",null,"Next Level:",-1)),a("div",J3e,[oe(_(b(e).getNextUpgradeEffectValue(A.id).toFixed(2))+" ",1),a("span",Z3e,"("+_(p(A.id,A.level,A.level+1))+")",1)])])):Q("",!0),A.level<A.maxLevel&&r.value>A.level+1?(h(),v("div",eMe,[a("div",null,"At Level "+_(Math.min(r.value,A.maxLevel))+":",1),a("div",tMe,_(g(A,r.value)),1)])):Q("",!0),a("div",sMe,[k[17]||(k[17]=a("div",null,"Cost:",-1)),a("div",null,_(A.costPerLevel)+" Mega Ant level"+_(A.costPerLevel>1?"s":""),1)]),A.level<A.maxLevel?(h(),v("div",nMe,[a("div",{class:K(["text-sm",b(e).canUpgrade(A.id)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},_(b(e).canUpgrade(A.id)?"Available to purchase":"Not enough level points"),3)])):(h(),v("div",rMe," Maximum level reached "))])]))),128))]))])):Q("",!0)]),a("div",oMe,[a("div",{onClick:k[3]||(k[3]=A=>o("colonyUpgrades")),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[k[19]||(k[19]=a("div",{class:"flex items-center gap-3"},[a("span",{class:"i-heroicons-home-modern text-xl text-amber-700 dark:text-amber-400"}),a("div",null,[a("div",{class:"font-medium"},"Colony Upgrades"),a("div",{class:"text-xs text-amber-600 dark:text-amber-400"},"Spend Colony levels to enhance various aspects of your ant farm")])],-1)),a("span",{class:K(["transition-transform",i("colonyUpgrades")?"rotate-180":""])},k[18]||(k[18]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)]),i("colonyUpgrades")?(h(),v("div",iMe,[f.value.length===0?(h(),v("div",aMe," No colony upgrades found for your search query. ")):(h(),v("div",lMe,[(h(!0),v(De,null,Ge(f.value,A=>(h(),v("div",{key:A.id,class:"border border-amber-200 dark:border-amber-800 rounded-lg p-3"},[a("div",cMe,[a("h3",uMe,_(A.name),1),a("div",dMe," Level "+_(A.level)+"/"+_(A.maxLevel),1)]),a("p",mMe,_(A.description),1),a("div",fMe,[a("div",pMe,[k[20]||(k[20]=a("div",null,"Current Effect:",-1)),a("div",hMe,_(b(e).getFormattedColonyEffect(A.id)),1)]),A.level<A.maxLevel?(h(),v("div",gMe,[k[21]||(k[21]=a("div",null,"Next Level:",-1)),a("div",vMe,_(C(A.id,A.level,A.level+1)),1)])):Q("",!0),A.level<A.maxLevel&&r.value>A.level+1?(h(),v("div",bMe,[a("div",null,"At Level "+_(Math.min(r.value,A.maxLevel))+":",1),a("div",yMe,_(w(A,r.value)),1)])):Q("",!0),a("div",_Me,[k[22]||(k[22]=a("div",null,"Cost:",-1)),a("div",null,_(A.costPerLevel)+" Colony level"+_(A.costPerLevel>1?"s":""),1)]),A.level<A.maxLevel?(h(),v("div",xMe,[a("div",{class:K(["text-sm",b(e).canColonyUpgrade(A.id)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},_(b(e).canColonyUpgrade(A.id)?"Available to purchase":"Not enough colony points"),3)])):(h(),v("div",kMe," Maximum level reached "))])]))),128))]))])):Q("",!0)])]))}}),l5=Ct(wMe,[["__scopeId","data-v-200ca3d0"]]),aD="/assets/boss_ant_golem-BddTxQb0.png",lD="/assets/boss_ascended_ant_god-ClsG1xx2.png",cD="/assets/boss_chrono_beetle-ZDNxEFFh.png",uD="/assets/boss_cosmic_hivemind-Dfdj-kdP.png",dD="/assets/boss_devourer_moth-CMoVvoya.png",mD="/assets/boss_dimensional_horror-Ck0blftq.png",fD="/assets/boss_galactic_devourer_ant-D93yeZMS.png",pD="/assets/boss_giant_spider-BGHrvVWV.png",hD="/assets/boss_mantis_lord-Btw7CKXq.png",gD="/assets/boss_nebula_wasp_queen-Cf1Nxhhi.png",vD="/assets/boss_omega_ant-Dzx-2abj.png",bD="/assets/boss_primordial_insectoid-BKLCdO7q.png",yD="/assets/boss_quantum_entanglement-JUGTH8d4.png",_D="/assets/boss_queen_bee-CAzM7SFz.png",xD="/assets/boss_reality_weaver_spider-79Y-tWju.png",kD="/assets/boss_scorpion_emperor-DsClxluE.png",wD="/assets/boss_slime_king-Bs0Fivnu.png",ED="/assets/boss_training_dummy-C1LSjpgI.png",CD="/assets/boss_void_larva-JwMc1JCC.png",EMe={class:"mb-4 flex items-center"},CMe={class:"inline-flex items-center cursor-pointer"},SMe={key:0,class:"mb-6 p-4 border border-amber-300 dark:border-amber-700 rounded-lg bg-amber-50/50 dark:bg-amber-900/10"},TMe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},AMe={class:"font-medium"},IMe={class:"font-medium"},PMe={class:"font-medium"},MMe={class:"font-medium"},$Me={class:"space-y-3"},RMe=["onClick"],LMe={class:"flex items-center gap-3"},DMe={class:"relative w-16 h-16"},NMe=["src","alt"],OMe={class:"font-medium"},FMe={class:"text-xs text-amber-600 dark:text-amber-400"},UMe={class:"flex items-center gap-4"},qMe={class:"text-right text-sm"},BMe={key:0,class:"border-t border-amber-300 dark:border-amber-700 p-3"},VMe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},HMe={class:"space-y-1 text-sm"},GMe={class:"mt-4"},jMe={class:"space-y-1"},WMe={key:0,class:"ml-1 font-mono"},zMe={key:0,class:"text-xs text-gray-500 italic"},QMe={class:"space-y-2"},KMe={key:0,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},YMe={class:"text-xs text-amber-700 dark:text-amber-300"},XMe={key:1,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},JMe={class:"text-xs text-amber-700 dark:text-amber-300"},ZMe={key:2,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},e4e={class:"flex items-start justify-between"},t4e={class:"font-medium"},s4e={class:"text-xs text-amber-700 dark:text-amber-300"},n4e={key:0},r4e={key:3,class:"text-sm p-2 border border-amber-200 dark:border-amber-800 rounded-md"},o4e={class:"space-y-1"},i4e={class:"font-medium"},a4e={class:"text-amber-700 dark:text-amber-300"},l4e={key:1,class:"p-4 text-center text-amber-600 dark:text-amber-400"},Hp="boss-wiki",c4e=Je({__name:"BossWiki",setup(t){const e=kn(),s=Ri(),n=Ts(),r=Ht(),o=Y(s.getSearchQuery(Hp)),i=Y(!0);dt(o,S=>{s.setSearchQuery(Hp,S)});const c=S=>{s.toggleItemExpanded(Hp,S)},u=S=>s.isItemExpanded(Hp,S),d=S=>{const T=e.allBosses.find(P=>P.id===S);if(!T)return!1;const R=e.playerStats.damage,L=T.damage;return R.gt(L)},m=S=>{const T=e.allBosses.find(D=>D.id===S);if(!T)return!1;const R=T.damage;if(e.playerStats.defense,R.lte(0))return!0;const L=e.playerStats.damage;if(T.defense,L.lte(0))return!1;const P=T.maxHealth.div(L).ceil(),I=e.playerStats.maxHealth.div(R).floor();return P.lte(I)},f=S=>Lt(S),p=S=>{const T=n.getItem(S);return T?T.name:S},g=q(()=>{if(!o.value)return e.allBosses;const S=o.value.toLowerCase();return e.allBosses.filter(T=>T.name.toLowerCase().includes(S)||T.description.toLowerCase().includes(S)||T.id.toLowerCase().includes(S)||T.reward.guaranteedItemId&&p(T.reward.guaranteedItemId).toLowerCase().includes(S))}),w=q(()=>[...g.value].sort((S,T)=>S.maxHealth.cmp(T.maxHealth))),C=S=>{try{return new URL(Object.assign({"../../assets/bosses/boss_ant_golem.png":aD,"../../assets/bosses/boss_ascended_ant_god.png":lD,"../../assets/bosses/boss_chrono_beetle.png":cD,"../../assets/bosses/boss_cosmic_hivemind.png":uD,"../../assets/bosses/boss_devourer_moth.png":dD,"../../assets/bosses/boss_dimensional_horror.png":mD,"../../assets/bosses/boss_galactic_devourer_ant.png":fD,"../../assets/bosses/boss_giant_spider.png":pD,"../../assets/bosses/boss_mantis_lord.png":hD,"../../assets/bosses/boss_nebula_wasp_queen.png":gD,"../../assets/bosses/boss_omega_ant.png":vD,"../../assets/bosses/boss_primordial_insectoid.png":bD,"../../assets/bosses/boss_quantum_entanglement.png":yD,"../../assets/bosses/boss_queen_bee.png":_D,"../../assets/bosses/boss_reality_weaver_spider.png":xD,"../../assets/bosses/boss_scorpion_emperor.png":kD,"../../assets/bosses/boss_slime_king.png":wD,"../../assets/bosses/boss_training_dummy.png":ED,"../../assets/bosses/boss_void_larva.png":CD})[`../../assets/bosses/${S}.png`],import.meta.url).href}catch{return null}},E=S=>{var T,R;switch(S.type){case"bugKills":return`Kill ${be(l(S.value))} total bugs`;case"specificBugKills":{const L=((T=S.target)==null?void 0:T.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase()))||"specific bugs";return`Kill ${be(l(S.value))} ${L}`}case"foodPerSecond":return`Reach ${be(l(S.value))} Food/sec`;case"bossDeath":{const L=((R=S.target)==null?void 0:R.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase()).replace("Boss ",""))||"a specific boss",P=e.allBosses.find(I=>I.id===S.target);return`Defeat ${P?P.name:L}`}case"none":return"Always unlocked";default:return"Unknown requirement"}},k=S=>{switch(S.type){case"bugKills":return e.getTotalBugKills()>=S.value;case"specificBugKills":return e.getBugKillCount(S.target)>=S.value;case"foodPerSecond":return r.foodPerSecond.gte(S.value);case"bossDeath":return e.isBossDefeated(S.target);case"none":return!0;default:return!1}},A=S=>{if(k(S))return"";switch(S.type){case"bugKills":return`(${be(l(e.getTotalBugKills()))} / ${be(l(S.value))})`;case"specificBugKills":return`(${be(l(e.getBugKillCount(S.target)))} / ${be(l(S.value))})`;case"foodPerSecond":return S.value&&r.foodPerSecond.gt(0)?`(${be(r.foodPerSecond,0)} / ${be(l(S.value),0)})`:`(0 / ${be(l(S.value),0)})`;case"bossDeath":case"none":default:return""}};return(S,T)=>(h(),v("div",null,[Ye(Zl,{modelValue:o.value,"onUpdate:modelValue":T[0]||(T[0]=R=>o.value=R),placeholder:"Search bosses or rewards..."},null,8,["modelValue"]),a("div",EMe,[a("label",CMe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":T[1]||(T[1]=R=>i.value=R),class:"sr-only peer"},null,512),[[ln,i.value]]),T[2]||(T[2]=a("div",{class:"relative w-10 h-5 bg-amber-200 dark:bg-amber-900/40 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white dark:after:bg-amber-100 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-amber-500"},null,-1)),T[3]||(T[3]=a("span",{class:"ml-2 text-sm text-amber-800 dark:text-amber-200"},"Show player relative strength",-1))])]),i.value?(h(),v("div",SMe,[T[8]||(T[8]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Your Stats",-1)),a("div",TMe,[a("div",null,[T[4]||(T[4]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Damage",-1)),a("div",AMe,_(b(be)(b(e).playerStats.damage,0)),1)]),a("div",null,[T[5]||(T[5]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Health",-1)),a("div",IMe,_(b(be)(b(e).playerStats.maxHealth,0)),1)]),a("div",null,[T[6]||(T[6]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Defense",-1)),a("div",PMe,_(b(be)(b(e).playerStats.defense,0)),1)]),a("div",null,[T[7]||(T[7]=a("div",{class:"text-sm text-amber-600 dark:text-amber-400"},"Regeneration",-1)),a("div",MMe,_(b(be)(b(e).playerStats.regen,0))+"/s",1)])])])):Q("",!0),a("div",$Me,[(h(!0),v(De,null,Ge(w.value,R=>(h(),v("div",{key:R.id,class:K(["border border-amber-300 dark:border-amber-700 rounded-lg overflow-hidden bg-amber-50/50 dark:bg-amber-900/10",{"border-green-400 dark:border-green-600":i.value&&d(R.id),"border-yellow-400 dark:border-yellow-600":i.value&&!d(R.id)&&m(R.id),"border-red-400 dark:border-red-600":i.value&&!m(R.id)}])},[a("div",{onClick:L=>c(R.id),class:"p-3 flex justify-between items-center cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"},[a("div",LMe,[a("div",DMe,[C(R.id)?(h(),v("img",{key:0,src:C(R.id)||"",alt:R.name,class:"w-full h-full object-contain"},null,8,NMe)):(h(),v("span",{key:1,class:K(["i-heroicons-trophy text-3xl absolute inset-0 flex items-center justify-center",[d(R.id)?"text-green-600 dark:text-green-400":m(R.id)?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"]])},null,2))]),a("div",null,[a("div",OMe,_(R.name),1),a("div",FMe,_(R.description),1)])]),a("div",UMe,[a("div",qMe,[a("div",null,[T[9]||(T[9]=a("span",{class:"font-medium"},"HP:",-1)),oe(" "+_(b(be)(R.maxHealth,0)),1)]),a("div",null,[T[10]||(T[10]=a("span",{class:"font-medium"},"DMG:",-1)),oe(" "+_(b(be)(R.damage,0)),1)])]),a("span",{class:K(["transition-transform",u(R.id)?"rotate-180":""])},T[11]||(T[11]=[a("span",{class:"i-heroicons-chevron-down text-amber-600 dark:text-amber-400"},null,-1)]),2)])],8,RMe),u(R.id)?(h(),v("div",BMe,[a("div",VMe,[a("div",null,[T[18]||(T[18]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Stats",-1)),a("div",HMe,[a("div",null,[T[12]||(T[12]=a("span",{class:"font-medium"},"ID:",-1)),oe(" "+_(R.id),1)]),a("div",null,[T[13]||(T[13]=a("span",{class:"font-medium"},"Health:",-1)),oe(" "+_(b(be)(R.maxHealth,0)),1)]),a("div",null,[T[14]||(T[14]=a("span",{class:"font-medium"},"Damage:",-1)),oe(" "+_(b(be)(R.damage,0)),1)]),a("div",null,[T[15]||(T[15]=a("span",{class:"font-medium"},"Defense:",-1)),oe(" "+_(b(be)(R.defense,0)),1)]),a("div",null,[T[16]||(T[16]=a("span",{class:"font-medium"},"Effective Damage:",-1)),oe(" "+_(b(be)(b(e).playerStats.damage.minus(R.defense),0))+" (per hit)",1)])]),a("div",GMe,[T[17]||(T[17]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Unlock Requirements",-1)),a("div",jMe,[(h(!0),v(De,null,Ge(R.unlockRequirements,(L,P)=>(h(),v("div",{key:P},[a("div",{class:K(["flex items-center text-xs",[k(L)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]])},[a("span",{class:K(["mr-1.5 text-sm flex-shrink-0",[k(L)?"i-heroicons-check-circle-solid":"i-heroicons-x-circle-solid"]])},null,2),a("span",null,[oe(_(E(L))+" ",1),A(L)?(h(),v("span",WMe,_(A(L)),1)):Q("",!0)])],2)]))),128)),!R.unlockRequirements||R.unlockRequirements.length===0?(h(),v("div",zMe," No requirements. ")):Q("",!0)])]),i.value?(h(),v("div",{key:0,class:K(["mt-4 p-2 rounded-md",{"bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-800":d(R.id),"bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-800":!d(R.id)&&m(R.id),"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800":!m(R.id)}])},[a("div",{class:K(["font-medium mb-1",{"text-green-700 dark:text-green-300":d(R.id),"text-yellow-700 dark:text-yellow-300":!d(R.id)&&m(R.id),"text-red-700 dark:text-red-300":!m(R.id)}])},_(d(R.id)?"One-hit Kill":m(R.id)?"Can Defeat":"Too Strong"),3),a("div",{class:K(["text-xs",{"text-green-600 dark:text-green-400":d(R.id),"text-yellow-600 dark:text-yellow-400":!d(R.id)&&m(R.id),"text-red-600 dark:text-red-400":!m(R.id)}])},_(d(R.id)?"You can kill this boss in one hit!":m(R.id)?"You can defeat this boss, but it will take multiple hits.":"This boss is too strong for you right now."),3)],2)):Q("",!0)]),a("div",null,[T[23]||(T[23]=a("h3",{class:"font-medium mb-2 text-amber-800 dark:text-amber-200"},"Rewards",-1)),a("div",QMe,[R.reward.food?(h(),v("div",KMe,[T[19]||(T[19]=a("div",{class:"font-medium"},"Food",-1)),a("div",YMe,_(b(be)(R.reward.food,0)),1)])):Q("",!0),R.reward.essence?(h(),v("div",XMe,[T[20]||(T[20]=a("div",{class:"font-medium"},"Pheromone Essence",-1)),a("div",JMe,_(b(be)(R.reward.essence,0)),1)])):Q("",!0),R.reward.guaranteedItemId?(h(),v("div",ZMe,[a("div",e4e,[a("div",null,[a("div",t4e,_(p(R.reward.guaranteedItemId)),1),a("div",s4e,[T[21]||(T[21]=oe(" Guaranteed drop ")),R.reward.itemChance&&R.reward.itemChance<1?(h(),v("span",n4e," ("+_(f(R.reward.itemChance))+" chance) ",1)):Q("",!0)])])])])):Q("",!0),R.specialAbilities&&R.specialAbilities.length>0?(h(),v("div",r4e,[T[22]||(T[22]=a("div",{class:"font-medium mb-1"},"Special Abilities",-1)),a("div",o4e,[(h(!0),v(De,null,Ge(R.specialAbilities,L=>(h(),v("div",{key:L.name,class:"text-xs"},[a("div",i4e,_(L.name),1),a("div",a4e,_(L.type==="periodicDamage"?`Deals ${b(be)(L.value,0)} damage`:L.type==="defenseBuff"?`Increases defense by ${b(be)(L.value,0)}x`:L.type==="playerDebuff"?`Reduces player damage by ${b(be)(L.value.mul(100),0)}%`:"")+" ("+_(L.cooldown)+"s cooldown) ",1)]))),128))])])):Q("",!0)])])])])):Q("",!0)],2))),128))]),w.value.length===0?(h(),v("div",l4e," No bosses found matching your search query. ")):Q("",!0)]))}}),c5=Ct(c4e,[["__scopeId","data-v-5bdc8df9"]]),u4e={class:"mb-6"},d4e={class:"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},m4e={class:"flex flex-col gap-2"},f4e={class:"flex items-center gap-4"},p4e={class:"text-sm font-medium w-16 text-right"},h4e={class:"flex justify-between text-xs text-amber-600 dark:text-amber-500"},g4e={class:"flex gap-2"},v4e={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},b4e={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},y4e={class:"space-y-2"},_4e={class:"flex justify-between"},x4e={class:"font-medium"},k4e={class:"flex justify-between"},w4e={class:"font-medium"},E4e={class:"flex justify-between"},C4e={class:"font-medium"},S4e={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},T4e={class:"space-y-2"},A4e={class:"flex justify-between"},I4e={class:"font-medium"},P4e={class:"flex justify-between"},M4e={class:"font-medium"},$4e={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},R4e={class:"space-y-2"},L4e={class:"flex justify-between"},D4e={class:"font-medium"},N4e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O4e={class:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},F4e={class:"h-80"},U4e={class:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},q4e={class:"h-80"},B4e={class:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},V4e={class:"h-80"},H4e={class:"mt-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},G4e={class:"h-80"},j4e=Je({__name:"PrestigeProgressionWiki",setup(t){Mf.register(eD,sD,JL,Lc,p0,h0,i1,mm);const e=St(),s=Y(100),n=Y(30),r=Y(50),o=Y(100),i=E=>{s.value=E,n.value=Math.min(E,100),r.value=E,o.value=E},c=q(()=>{const E=[],k=[];for(let S=0;S<s.value;S++){E.push(`Evolution ${S}`);const T=e.calculateRequiredLoopsForEvolution(S).toNumber();k.push(T)}const A=e.evolutionCount.toNumber();return{labels:E,datasets:[{label:"Cycles Required",data:k,borderColor:"rgb(234, 88, 12)",backgroundColor:"rgba(234, 88, 12, 0.1)",tension:.1,pointRadius:S=>S.dataIndex===A?6:3,pointBackgroundColor:S=>S.dataIndex===A?"rgb(234, 88, 12)":"rgba(234, 88, 12, 0.7)",pointBorderColor:S=>S.dataIndex===A?"white":"rgb(234, 88, 12)",pointHoverRadius:7}]}}),u=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"Cycles Required per Evolution"},tooltip:{callbacks:{label:E=>{const k=E.dataIndex,A=E.raw;return`Evolution ${k}: ${A} cycles required`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cycles Required"}},x:{title:{display:!0,text:"Evolution"},ticks:{maxTicksLimit:10,callback:(E,k)=>k%10===0?`${k}`:""}}}})),d=q(()=>{const E=[],k=[];for(let S=0;S<n.value;S++){E.push(`Cycle ${S}`);const T=e.calculateFoodForCycle(S).toNumber();k.push(T)}const A=e.loopsCompleted.toNumber();return{labels:E,datasets:[{label:"Food Required",data:k,borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.1,pointRadius:S=>S.dataIndex===A?6:3,pointBackgroundColor:S=>S.dataIndex===A?"rgb(16, 185, 129)":"rgba(16, 185, 129, 0.7)",pointBorderColor:S=>S.dataIndex===A?"white":"rgb(16, 185, 129)",pointHoverRadius:7}]}}),m=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"Food Required per Cycle"},tooltip:{callbacks:{label:E=>{const k=E.dataIndex,A=E.raw;return`Cycle ${k}: ${be(new Se(A),0)} food required`}}}},scales:{y:{type:"logarithmic",title:{display:!0,text:"Food Required (log scale)"}},x:{title:{display:!0,text:"Cycle"}}}})),f=q(()=>{const E=[],k=[];for(let R=1;R<=o.value;R+=1){E.push(`${R} cycles`);const L=e.calculateEPGainForCycles(R).toNumber();k.push(L)}const A=e.loopsCompleted.toNumber(),S=Math.min(A-1,o.value-1),T=Math.max(0,S);return{labels:E,datasets:[{label:"EP Gain",data:k,borderColor:"rgb(79, 70, 229)",backgroundColor:"rgba(79, 70, 229, 0.1)",tension:.1,pointRadius:R=>R.dataIndex===T?6:3,pointBackgroundColor:R=>R.dataIndex===T?"rgb(79, 70, 229)":"rgba(79, 70, 229, 0.7)",pointBorderColor:R=>R.dataIndex===T?"white":"rgb(79, 70, 229)",pointHoverRadius:7}]}}),p=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"Evolution Points Gain by Cycles Completed"},tooltip:{callbacks:{label:E=>{const k=E.dataIndex+1,A=E.raw;return`${k} cycles: ${be(new Se(A),2)} EP gain`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"EP Gain"}},x:{title:{display:!0,text:"Cycles Completed"},ticks:{maxTicksLimit:20,callback:(E,k)=>(k+1)%5===0?`${k+1}`:""}}}})),g=q(()=>{const E=[],k=[];for(let S=0;S<r.value;S++){E.push(`Cycle ${S}`);const T=e.calculateTripsPerCycle(S).toNumber();k.push(T)}const A=e.loopsCompleted.toNumber();return{labels:E,datasets:[{label:"Trips Required",data:k,borderColor:"rgb(124, 58, 237)",backgroundColor:"rgba(124, 58, 237, 0.1)",tension:.1,pointRadius:S=>S.dataIndex===A?6:3,pointBackgroundColor:S=>S.dataIndex===A?"rgb(124, 58, 237)":"rgba(124, 58, 237, 0.7)",pointBorderColor:S=>S.dataIndex===A?"white":"rgb(124, 58, 237)",pointHoverRadius:7}]}}),w=q(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"Trips Required per Cycle"},tooltip:{callbacks:{label:E=>{const k=E.dataIndex,A=E.raw;return`Cycle ${k}: ${be(new Se(A),1)} trips required`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Trips Required"}},x:{title:{display:!0,text:"Cycle"},ticks:{maxTicksLimit:10,callback:(E,k)=>k%5===0?`${k}`:""}}}})),C=q(()=>({evolutionCount:e.formatEvolutionCount(),loopsCompleted:e.formatLoopsCompleted(),requiredLoops:e.formatRequiredLoops(),ticksPerLoop:e.formatTicksPerLoop(),foodForNextLoop:e.formatFoodForNextLoop(),potentialEPGain:e.formatPotentialEPGain()}));return(E,k)=>(h(),v("div",null,[a("div",u4e,[k[26]||(k[26]=a("h2",{class:"text-xl font-bold mb-4 text-amber-800 dark:text-amber-300"},"Evolution Progression",-1)),a("div",d4e,[k[7]||(k[7]=a("h3",{class:"text-lg font-medium mb-3 text-amber-700 dark:text-amber-300"},"Chart Data Range",-1)),a("div",m4e,[a("div",f4e,[k[5]||(k[5]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400 w-40"},"Show data for:",-1)),Ut(a("input",{type:"range",min:"50",max:"500",step:"50","onUpdate:modelValue":k[0]||(k[0]=A=>s.value=A),class:"flex-grow h-2 bg-amber-200 rounded-lg appearance-none cursor-pointer dark:bg-amber-700",onChange:k[1]||(k[1]=A=>i(s.value))},null,544),[[xa,s.value,void 0,{number:!0}]]),a("span",p4e,_(s.value),1)]),a("div",h4e,[k[6]||(k[6]=a("span",null,"Cycles/Evolutions",-1)),a("div",g4e,[a("button",{onClick:k[2]||(k[2]=A=>i(100)),class:"px-2 py-1 bg-amber-200 dark:bg-amber-800 rounded hover:bg-amber-300 dark:hover:bg-amber-700 transition-colors"}," 100 "),a("button",{onClick:k[3]||(k[3]=A=>i(200)),class:"px-2 py-1 bg-amber-200 dark:bg-amber-800 rounded hover:bg-amber-300 dark:hover:bg-amber-700 transition-colors"}," 200 "),a("button",{onClick:k[4]||(k[4]=A=>i(500)),class:"px-2 py-1 bg-amber-200 dark:bg-amber-800 rounded hover:bg-amber-300 dark:hover:bg-amber-700 transition-colors"}," 500 ")])])])]),a("div",v4e,[a("div",b4e,[k[11]||(k[11]=a("h3",{class:"text-lg font-medium mb-2 text-amber-700 dark:text-amber-300"},"Current Evolution",-1)),a("div",y4e,[a("div",_4e,[k[8]||(k[8]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Evolution Count:",-1)),a("span",x4e,_(C.value.evolutionCount),1)]),a("div",k4e,[k[9]||(k[9]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Cycles Completed:",-1)),a("span",w4e,_(C.value.loopsCompleted),1)]),a("div",E4e,[k[10]||(k[10]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Cycles Required:",-1)),a("span",C4e,_(C.value.requiredLoops),1)])])]),a("div",S4e,[k[14]||(k[14]=a("h3",{class:"text-lg font-medium mb-2 text-amber-700 dark:text-amber-300"},"Current Cycle",-1)),a("div",T4e,[a("div",A4e,[k[12]||(k[12]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Trips per Cycle:",-1)),a("span",I4e,_(C.value.ticksPerLoop),1)]),a("div",P4e,[k[13]||(k[13]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Food for Next Cycle:",-1)),a("span",M4e,_(C.value.foodForNextLoop),1)])])]),a("div",$4e,[k[17]||(k[17]=a("h3",{class:"text-lg font-medium mb-2 text-amber-700 dark:text-amber-300"},"Evolution Points",-1)),a("div",R4e,[a("div",L4e,[k[15]||(k[15]=a("span",{class:"text-sm text-amber-700 dark:text-amber-400"},"Potential EP Gain:",-1)),a("span",D4e,_(C.value.potentialEPGain),1)]),k[16]||(k[16]=a("div",{class:"mt-4 text-xs text-amber-600 dark:text-amber-500"}," EP gain is based on completed cycles using a formula that provides increasing returns as you complete more cycles. ",-1))])])]),a("div",N4e,[a("div",O4e,[k[18]||(k[18]=a("h3",{class:"text-lg font-medium mb-4 text-gray-800 dark:text-gray-200"},"Cycles Required per Evolution",-1)),a("div",F4e,[Ye(b(Dc),{data:c.value,options:u.value},null,8,["data","options"])]),k[19]||(k[19]=a("div",{class:"mt-4 text-xs text-gray-600 dark:text-gray-400"}," The number of cycles required increases with each evolution, making each reset progressively more challenging. ",-1))]),a("div",U4e,[k[20]||(k[20]=a("h3",{class:"text-lg font-medium mb-4 text-gray-800 dark:text-gray-200"},"Food Required per Cycle",-1)),a("div",q4e,[Ye(b(Dc),{data:d.value,options:m.value},null,8,["data","options"])]),k[21]||(k[21]=a("div",{class:"mt-4 text-xs text-gray-600 dark:text-gray-400"}," Food requirements increase exponentially with each cycle, shown on a logarithmic scale. This scaling is based on the formula used in the game's calculations. ",-1))])]),a("div",B4e,[k[22]||(k[22]=a("h3",{class:"text-lg font-medium mb-4 text-gray-800 dark:text-gray-200"},"EP Gain by Cycles Completed",-1)),a("div",V4e,[Ye(b(Dc),{data:f.value,options:p.value},null,8,["data","options"])]),k[23]||(k[23]=a("div",{class:"mt-4 text-xs text-gray-600 dark:text-gray-400"}," Completing more cycles before evolving provides increasing returns of Evolution Points. The game uses a formula that rewards completing more cycles with progressively higher EP gains. ",-1))]),a("div",H4e,[k[24]||(k[24]=a("h3",{class:"text-lg font-medium mb-4 text-gray-800 dark:text-gray-200"},"Trips Required per Cycle Progression",-1)),a("div",G4e,[Ye(b(Dc),{data:g.value,options:w.value},null,8,["data","options"])]),k[25]||(k[25]=a("div",{class:"mt-4 text-xs text-gray-600 dark:text-gray-400"}," The number of trips (ticks) required per cycle increases as you complete more cycles. This is based on the formula used in the game's calculations. ",-1))])]),k[27]||(k[27]=js('<div class="mt-8 p-6 bg-amber-50 dark:bg-amber-900/10 rounded-lg border border-amber-200 dark:border-amber-800" data-v-311367eb><h3 class="text-lg font-medium mb-4 text-amber-800 dark:text-amber-300" data-v-311367eb>Evolution Mechanics Explained</h3><div class="space-y-4 text-sm text-amber-800 dark:text-amber-300" data-v-311367eb><p data-v-311367eb><span class="font-medium" data-v-311367eb>Evolution</span> is the prestige mechanic that allows you to reset your progress in exchange for Evolution Points (EP). These points can be spent on permanent upgrades that make future runs faster and more efficient. </p><div data-v-311367eb><h4 class="font-medium mb-2" data-v-311367eb>Key Concepts:</h4><ul class="list-disc list-inside space-y-2 ml-2" data-v-311367eb><li data-v-311367eb><span class="font-medium" data-v-311367eb>Cycles</span>: Complete cycles by either making enough trips (ticks) or collecting enough food.</li><li data-v-311367eb><span class="font-medium" data-v-311367eb>Evolution Requirements</span>: The number of cycles required to evolve increases with each evolution.</li><li data-v-311367eb><span class="font-medium" data-v-311367eb>EP Gain</span>: The amount of EP you gain is based on how many cycles you complete before evolving.</li><li data-v-311367eb><span class="font-medium" data-v-311367eb>Scaling Difficulty</span>: Both trip requirements and food requirements increase as you progress.</li></ul></div><p data-v-311367eb> To maximize your EP gain, complete as many cycles as possible before evolving, especially since later cycles provide more EP due to the quadratic formula used for EP calculation. </p></div></div>',1))]))}}),u5=Ct(j4e,[["__scopeId","data-v-311367eb"]]),W4e={class:"wiki-page"},z4e={class:"border-b border-amber-300 dark:border-amber-700 mb-6"},Q4e={class:"flex flex-wrap gap-1"},K4e=["onClick"],Y4e={class:"mb-4"},X4e={class:"text-xl font-medium mb-2"},J4e=Je({__name:"WikiPage",setup(t){const e=Ri(),s=[{id:"prestige-upgrades",label:"Prestige Upgrades",icon:"i-heroicons-sparkles",component:n5},{id:"prestige-progression",label:"Evolution Progression",icon:"i-heroicons-chart-bar",component:u5},{id:"pheromone-shop",label:"Pheromone Shop",icon:"i-heroicons-beaker",component:r5},{id:"mega-ant",label:"Mega Ant",icon:"i-heroicons-bug-ant",component:l5},{id:"boss-wiki",label:"Bosses",icon:"i-heroicons-trophy",component:c5},{id:"bugs-wiki",label:"Bugs & Drops",icon:"i-heroicons-bug-dash",component:o5},{id:"items-wiki",label:"Items",icon:"i-heroicons-shield",component:i5},{id:"generators-wiki",label:"Generators",icon:"i-heroicons-command-line",component:a5}],n=r=>{e.setActiveTab(r)};return(r,o)=>(h(),v("div",W4e,[o[1]||(o[1]=a("div",{class:"flex justify-between items-center mb-6"},[a("h1",{class:"text-2xl font-bold"},"Game Wiki")],-1)),a("div",z4e,[a("div",Q4e,[(h(),v(De,null,Ge(s,i=>a("button",{key:i.id,onClick:c=>n(i.id),class:K(["px-4 py-2 -mb-px text-sm font-medium transition-colors flex items-center gap-2",b(e).activeTab===i.id?"border-b-2 border-amber-500 text-amber-800 dark:text-amber-300":"text-amber-700/70 dark:text-amber-300/70 hover:text-amber-900 dark:hover:text-amber-200 hover:bg-amber-100/50 dark:hover:bg-amber-900/20 rounded-t-md"])},[a("span",{class:K(i.icon)},null,2),oe(" "+_(i.label),1)],10,K4e)),64))])]),a("div",null,[b(e).activeTab==="prestige-upgrades"?(h(),Tt(n5,{key:0})):Q("",!0),b(e).activeTab==="prestige-progression"?(h(),Tt(u5,{key:1})):Q("",!0),b(e).activeTab==="pheromone-shop"?(h(),Tt(r5,{key:2})):Q("",!0),b(e).activeTab==="mega-ant"?(h(),Tt(l5,{key:3})):Q("",!0),b(e).activeTab==="boss-wiki"?(h(),Tt(c5,{key:4})):Q("",!0),b(e).activeTab==="bugs-wiki"?(h(),Tt(o5,{key:5})):Q("",!0),b(e).activeTab==="items-wiki"?(h(),Tt(i5,{key:6})):Q("",!0),b(e).activeTab==="generators-wiki"?(h(),Tt(a5,{key:7})):Q("",!0)]),(h(!0),v(De,null,Ge(s.filter(i=>!i.component&&b(e).activeTab===i.id),i=>(h(),v("div",{key:i.id,class:"p-8 text-center text-amber-600 dark:text-amber-400 border border-amber-200 dark:border-amber-800 rounded-lg"},[a("div",Y4e,[a("span",{class:K([i.icon,"text-4xl opacity-50"])},null,2)]),a("h3",X4e,_(i.label)+" Wiki",1),o[0]||(o[0]=a("p",null,"This section is under development and will be available soon.",-1))]))),128))]))}}),Z4e=Ct(J4e,[["__scopeId","data-v-3e180d60"]]),e$e={class:"space-y-4 px-2 sm:px-0"},t$e={key:1,class:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg shadow-sm"},s$e=Je({__name:"QuestsPage",setup(t){const e=Qs();return(s,n)=>(h(),v("div",e$e,[n[1]||(n[1]=a("h1",{class:"text-xl font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-clipboard-document-list text-blue-700 dark:text-blue-500 mr-2"}),oe(" Quests ")],-1)),b(e).isQuestsUnlocked?(h(),Tt(gL,{key:0})):(h(),v("div",t$e,n[0]||(n[0]=[a("h2",{class:"text-lg font-semibold mb-2"},"Quests Locked",-1),a("p",{class:"text-gray-700 dark:text-gray-300"}," Complete more of your adventure to unlock the Quests system! ",-1)]))),Ye(Ha,{threshold:400})]))}}),n$e="/assets/finger-CWxvMBt2.png",r$e={class:"sim-fullscreen"},o$e={class:"absolute top-60 right-4 z-10 bg-amber-100/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-md rounded-lg px-3 py-2 text-xs"},i$e={class:"flex items-center space-x-2"},a$e={class:"flex flex-col"},l$e={class:"font-medium text-amber-900 dark:text-amber-100"},vd=80,c$e=Je({__name:"SimulationPage",setup(t){const e=Ht(),s=Hu(),{width:n,height:r}=X1(),o=Y(null),i=Y(null),c=Y(null),u=Y(null);Y(!1),Y(!1);const d=Y(1),m=Y(!0),f=Y(1),p=Y(5),g=Y([]),w=Y(!1),C=Y(null),E=Y(0),k=Y(0),A=Y(0),S=Y(!1),T=q(()=>`${s.morale.toFixed(2)}%`);q(()=>Number(f.value).toFixed(1)),q(()=>{const N=e.getGenerator("worker");return!N||N.count.eq(0)?"0":be(N.count,0)}),q(()=>Math.pow(10,R.value/10).toFixed(0));const R=q(()=>{const N=e.getGenerator("worker");if(!N||N.count.eq(0))return 1;const ue=N.count.log10(),j=Math.floor(ue);return Math.max(1,Math.min(j,150))}),L=Y([]),P=Y([]),I=Y([]),D=q(()=>{const j=n.value*r.value/(1920*1080),B=Math.floor(j*15);return Math.max(3,Math.min(3+B,25))}),U=Y(!1),M=Y(1),x=q(()=>{const N=.7+s.morale/100*.6;let ue=M.value*N;return U.value&&(ue*=1.8),ue}),$=Y(null),Z=Y(null),me=(N,ue)=>{if(!o.value)return{x:0,y:0};const j=o.value,B=j.getBoundingClientRect(),ie=j.width/B.width,V=j.height/B.height;return{x:(N-B.left)*ie,y:(ue-B.top)*V}},re=(N,ue,j)=>{if(!m.value||j>=g.value.length)return!1;const B=g.value[j];return Oe(N,ue,B.x,B.y)<B.size*1.2},J=(N,ue)=>{if(!m.value)return null;for(let j=g.value.length-1;j>=0;j--)if(re(N,ue,j))return j;return null},le=N=>{if(!m.value||w.value)return;const{x:ue,y:j}=me(N.clientX,N.clientY),B=J(ue,j);S.value=B!==null,o.value&&(o.value.style.cursor=S.value?"grab":"default")},se=N=>{if(!m.value||g.value.length===0)return!1;let ue,j;if(N instanceof MouseEvent)ue=N.clientX,j=N.clientY;else if(N.touches&&N.touches.length>0)ue=N.touches[0].clientX,j=N.touches[0].clientY,N.preventDefault();else return!1;const B=me(ue,j),ie=J(B.x,B.y);if(ie!==null){w.value=!0,C.value=ie;const V=g.value[ie];return E.value=B.x-V.x,k.value=B.y-V.y,A.value=Date.now(),o.value&&(o.value.style.cursor="grabbing"),!0}return!1},z=N=>{if(!w.value||C.value===null)return;let ue,j;if(N instanceof MouseEvent)ue=N.clientX,j=N.clientY;else if(N.touches&&N.touches.length>0)ue=N.touches[0].clientX,j=N.touches[0].clientY,N.preventDefault();else return;const B=me(ue,j),ie=B.x-E.value,V=B.y-k.value;C.value<g.value.length&&(g.value[C.value].x=ie,g.value[C.value].y=V)},ce=N=>{const ue=Date.now()-A.value;if(w.value&&ue<150){if(N instanceof MouseEvent)N.clientX,N.clientY;else if(N.changedTouches&&N.changedTouches.length>0)N.changedTouches[0].clientX,N.changedTouches[0].clientY;else{w.value=!1,C.value=null,o.value&&(o.value.style.cursor="default");return}Ue()}w.value=!1,C.value=null,o.value&&(N instanceof MouseEvent?le(N):o.value.style.cursor="default")},pe=N=>{if(w.value)return!1;s.increaseMorale();let ue,j;if(N instanceof MouseEvent)ue=N.clientX,j=N.clientY;else if(N.touches&&N.touches.length>0)ue=N.touches[0].clientX,j=N.touches[0].clientY,N.preventDefault();else return!1;const B=me(ue,j);return $.value={x:B.x,y:B.y,active:!0,isDragging:!1},Ue(),!0},_e=N=>{var ie;if(!((ie=$.value)!=null&&ie.active))return;let ue,j;if(N instanceof MouseEvent)ue=N.clientX,j=N.clientY;else if(N.touches&&N.touches.length>0)ue=N.touches[0].clientX,j=N.touches[0].clientY,N.preventDefault();else return;const B=me(ue,j);$.value&&($.value.x=B.x,$.value.y=B.y,$.value.isDragging=!0)},Ee=()=>{$.value&&setTimeout(()=>{$.value&&($.value.active=!1)},300)},Ue=()=>{U.value||(U.value=!0,setTimeout(()=>{U.value=!1},2500))},ze=()=>{if(!o.value)return;const N=o.value.width,ue=o.value.height,j=N/2,B=ue/2,ie=100,V=m.value?D.value:0;g.value=[];for(let O=0;O<V;O++){const te=[],G=Math.random()*20+10,ne=Math.floor(G/3);for(let de=0;de<ne;de++){const Me=Math.random()*Math.PI*2,Le=Math.random()*(G*.7),it=Math.random()*1.5+1;te.push({angle:Me,distance:Le,size:it})}let he,ye,ae;do he=Math.random()*N,ye=Math.random()*ue,ae=Oe(he,ye,j,B);while(ae<ie);g.value.push({x:he,y:ye,size:G,value:Math.random()*100+50,seeds:te})}},Re=()=>{if(!o.value)return;const N=o.value.width,ue=o.value.height;L.value=[];for(let j=0;j<R.value;j++){const B=Math.random()*2+2;L.value.push({x:Math.random()*N,y:Math.random()*ue,size:B*Number(f.value),speed:(Math.random()*1+.5)*x.value,angle:Math.random()*Math.PI*2,color:Ce(j),wanderAngle:0,hasFood:!1,targetFoodIndex:null,pauseUntil:0,legPhase:Math.random()*Math.PI*2})}},$e=()=>{if(!o.value)return;o.value.width,o.value.height;const N=30;P.value=[];const ue=40;for(let B=0;B<ue;B++){const ie=Math.random()*Math.PI*2,V=Math.random()*(N-5),O=Math.cos(ie)*V,te=Math.sin(ie)*V,G=Math.random()*2+1;P.value.push({x:O,y:te,size:G})}I.value=[];const j=3+Math.floor(Math.random()*3);for(let B=0;B<j;B++){const ie=B/j*Math.PI*2,V=N*.8+Math.random()*N*.4,O=Math.cos(ie+.2)*(V*.5),te=Math.sin(ie+.2)*(V*.5),G=Math.cos(ie)*V,ne=Math.sin(ie)*V;I.value.push({controlX:O,controlY:te,endX:G,endY:ne})}};Et(()=>{if(Z.value=new Image,Z.value.src=n$e,o.value){i.value=o.value.getContext("2d");const N=te=>{se(te)||pe(te)},ue=te=>{z(te),le(te),_e(te)},j=te=>{ce(te),Ee()},B=te=>{te.preventDefault(),se(te)||pe(te)},ie=te=>{z(te),_e(te)},V=te=>{ce(te),Ee()};o.value.addEventListener("mousedown",N),window.addEventListener("mousemove",ue),window.addEventListener("mouseup",j),o.value.addEventListener("mouseleave",()=>{S.value=!1,o.value&&(o.value.style.cursor="default"),Ee()}),o.value.addEventListener("touchstart",B,{passive:!1}),window.addEventListener("touchmove",ie,{passive:!1}),window.addEventListener("touchend",V);const O=()=>{o.value&&u.value&&(o.value.width=u.value.clientWidth,o.value.height=Math.min(u.value.clientHeight,window.innerHeight*.5),Re(),ze(),$e())};O(),window.addEventListener("resize",O),je(),ar(()=>{window.removeEventListener("resize",O),o.value&&(o.value.removeEventListener("mousedown",N),o.value.removeEventListener("touchstart",B),o.value.removeEventListener("mouseleave",()=>{})),window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",j),window.removeEventListener("touchmove",ie),window.removeEventListener("touchend",V),c.value!==null&&cancelAnimationFrame(c.value)})}}),Qi(()=>{L.value.length!==R.value&&Re()}),Qi(()=>{M.value=Number(d.value)}),Qi(()=>{const N=x.value;L.value.forEach(ue=>{ue.pauseUntil<=Date.now()&&(ue.speed=(Math.random()*1+.5)*N)})}),Qi(()=>{const N=Number(f.value);L.value.forEach(ue=>{const j=Math.random()*2+2;ue.size=j*N})}),Qi(()=>{o.value&&g.value.length!==p.value&&ze()}),Qi(()=>{`${n.value}${r.value}`,o.value&&m.value&&g.value.length!==D.value&&ze()}),Qi(()=>{o.value&&!m.value?g.value=[]:o.value&&m.value&&g.value.length===0&&ze()});const Ce=N=>{const ue=["#8B4513","#A0522D","#CD853F","#CC7722","#8B5A2B","#61462d"];return N%20===0?"#DAA520":ue[N%ue.length]},Oe=(N,ue,j,B)=>Math.sqrt(Math.pow(j-N,2)+Math.pow(B-ue,2)),ve=(N,ue,j,B)=>Math.atan2(B-ue,j-N),fe=N=>{if(m.value&&!N.hasFood&&!(N.pauseUntil>Date.now())){if(N.targetFoodIndex!==null){const ue=g.value[N.targetFoodIndex];if(!ue){N.targetFoodIndex=null;return}if(Oe(N.x,N.y,ue.x,ue.y)<ue.size/2){if(N.hasFood=!0,N.targetFoodIndex=null,o.value){const B=o.value.width/2,ie=o.value.height/2;N.angle=ve(N.x,N.y,B,ie)}return}N.angle=ve(N.x,N.y,ue.x,ue.y);return}if(Math.random()<.01)for(let ue=0;ue<g.value.length;ue++){const j=g.value[ue];if(Oe(N.x,N.y,j.x,j.y)<100&&Math.random()<.5){N.targetFoodIndex=ue,N.angle=ve(N.x,N.y,j.x,j.y);break}}}},X=N=>{if(!N.hasFood||!o.value)return;const ue=o.value.width/2,j=o.value.height/2;Oe(N.x,N.y,ue,j)<20?(N.hasFood=!1,N.pauseUntil=Date.now()+Math.random()*500+100,N.speed=0,setTimeout(()=>{N.angle=Math.random()*Math.PI*2,N.speed=(Math.random()*1+.5)*x.value,N.wanderAngle=(Math.random()-.5)*.3},Math.random()*500+100)):(Math.random()<.05&&(N.angle=ve(N.x,N.y,ue,j),N.angle+=(Math.random()-.5)*.2),N.speed>0&&(N.speed=(Math.random()*1+.5)*x.value))},H=()=>{if(L.value.length>0){const N=L.value[0],ue=N.angle;if(N.hasFood&&o.value){const j=o.value.width/2,B=o.value.height/2,ie=ve(N.x,N.y,j,B);Math.abs(ie-ue)>Math.PI/2&&(N.angle=ie)}}},W=(N,ue,j)=>{var V;if(N.pauseUntil>Date.now())return;if(N.hasFood?X(N):fe(N),(V=$.value)!=null&&V.active){const O=Oe(N.x,N.y,$.value.x,$.value.y);if(O<vd){const te=ve($.value.x,$.value.y,N.x,N.y),he=1-Math.max(O,15)/vd,ye=Math.sin(he*Math.PI/2);N.angle=N.angle*(1-ye)+te*ye;const ae=(Math.random()*1+.5)*x.value,Me=1+Math.min(he*2,2.5-1);N.speed=ae*Me}}!N.hasFood&&N.targetFoodIndex===null&&(N.wanderAngle+=(Math.random()-.5)*.1,Math.random()<.01&&(N.wanderAngle=0),N.angle+=N.wanderAngle*.05,Math.random()<.01&&(N.angle+=(Math.random()-.5)*Math.PI*.5),Math.random()<.005&&(N.speed=0,N.pauseUntil=Date.now()+Math.random()*1e3+500,setTimeout(()=>{!N.hasFood&&N.targetFoodIndex===null&&(N.speed=(Math.random()*1+.5)*x.value,N.angle+=(Math.random()-.5)*Math.PI)},Math.random()*1e3+500))),N.speed>0&&(N.legPhase+=N.speed*.3,N.legPhase>Math.PI*2&&(N.legPhase-=Math.PI*2));const B=Math.cos(N.angle)*N.speed,ie=Math.sin(N.angle)*N.speed;N.x+=B,N.y+=ie,N.x<0&&(N.x=ue),N.x>ue&&(N.x=0),N.y<0&&(N.y=j),N.y>j&&(N.y=0)},ge=N=>{if(!i.value)return;i.value.save(),i.value.translate(N.x,N.y),i.value.rotate(N.angle),i.value.strokeStyle=N.color,i.value.lineWidth=.5;const ue=N.size*.6,j=N.size*.5,B=N.size*1.3,ie=N.size*.9,V=N.size*1.5,O=N.size*0,te=-N.size*1.8;if(i.value.fillStyle=N.color,i.value.beginPath(),i.value.ellipse(te,0,B,ie,0,0,Math.PI*2),i.value.fill(),i.value.fillStyle=N.color,i.value.beginPath(),i.value.ellipse(O,0,j,j*1.4,0,0,Math.PI*2),i.value.fill(),i.value.beginPath(),i.value.arc(V,0,ue,0,Math.PI*2),i.value.fill(),i.value.beginPath(),i.value.moveTo(V+ue*.5,-ue*.3),i.value.lineTo(V+ue*2.5,-ue*1.8),i.value.stroke(),i.value.beginPath(),i.value.moveTo(V+ue*.5,ue*.3),i.value.lineTo(V+ue*2.5,ue*1.8),i.value.stroke(),N.hasFood){const de=V+ue*1.2,Me=0,Le=ue*.8;i.value.save(),i.value.translate(de,Me);const it=N.x*N.y%6.28;i.value.rotate(it),i.value.fillStyle="#7CB342",i.value.beginPath(),i.value.moveTo(0,0),i.value.lineTo(-Le*.5,-Le*.2),i.value.lineTo(-Le*.7,-Le*.1),i.value.lineTo(-Le*.6,Le*.1),i.value.lineTo(-Le*.8,Le*.3),i.value.lineTo(-Le*.5,Le*.4),i.value.quadraticCurveTo(0,Le*.5,Le*.5,Le*.3),i.value.quadraticCurveTo(Le*.7,0,Le*.4,-Le*.4),i.value.closePath(),i.value.fill(),i.value.strokeStyle="#558B2F",i.value.lineWidth=.5,i.value.beginPath(),i.value.moveTo(0,0),i.value.quadraticCurveTo(Le*.2,Le*.1,Le*.3,Le*.2),i.value.stroke(),i.value.beginPath(),i.value.moveTo(0,0),i.value.quadraticCurveTo(-Le*.2,-Le*.1,-Le*.3,-Le*.2),i.value.stroke(),i.value.restore()}const G=N.size*1.9,ne=N.legPhase,he=Math.sin(ne)*.4,ye=Math.sin(ne+Math.PI*.66)*.4,ae=Math.sin(ne+Math.PI*1.33)*.4;i.value.beginPath(),i.value.moveTo(O+j,j*.7),i.value.lineTo(O+j+he*N.size,j+G*.8),i.value.stroke(),i.value.beginPath(),i.value.moveTo(O+j,-j*.7),i.value.lineTo(O+j-he*N.size,-j-G*.8),i.value.stroke(),i.value.beginPath(),i.value.moveTo(O,j*.8),i.value.lineTo(O+ye*N.size,j+G),i.value.stroke(),i.value.beginPath(),i.value.moveTo(O,-j*.8),i.value.lineTo(O-ye*N.size,-j-G),i.value.stroke(),i.value.beginPath(),i.value.moveTo(O-j,j*.7),i.value.lineTo(O-j+ae*N.size,j+G*.8),i.value.stroke(),i.value.beginPath(),i.value.moveTo(O-j,-j*.7),i.value.lineTo(O-j-ae*N.size,-j-G*.8),i.value.stroke(),i.value.restore()},Te=()=>{!i.value||!m.value||g.value.forEach((N,ue)=>{const j=N.x,B=N.y;if(i.value.save(),i.value.translate(j,B),i.value.rotate(N.value%6.28),i.value.fillStyle="#7CB342",C.value===ue){const te=N.size*2.5,G=i.value.createRadialGradient(0,0,N.size,0,0,te);G.addColorStop(0,"rgba(255, 215, 0, 0.6)"),G.addColorStop(1,"rgba(255, 215, 0, 0)"),i.value.fillStyle=G,i.value.beginPath(),i.value.arc(0,0,te,0,Math.PI*2),i.value.fill(),i.value.fillStyle="#8BC34A"}i.value.beginPath();const ie=N.size*1.8,V=N.size*.9;i.value.moveTo(0,ie*.5);for(let te=0;te<5;te++){const G=V*Math.sin(te/4*Math.PI),ne=ie*.5-ie*(te/4),he=G+V*.3,ye=ne+ie*.05;i.value.quadraticCurveTo(he,ye,G,ne)}i.value.lineTo(0,-ie*.5);for(let te=4;te>=0;te--){const G=-V*Math.sin(te/4*Math.PI),ne=ie*.5-ie*(te/4),he=G-V*.3,ye=ne+ie*.05;i.value.quadraticCurveTo(he,ye,G,ne)}if(i.value.closePath(),i.value.fill(),C.value===ue){const te=Date.now()%1e3/1e3,G=.5+Math.sin(te*Math.PI*2)*.5;i.value.strokeStyle=`rgba(255, 215, 0, ${G})`,i.value.lineWidth=2,i.value.stroke()}i.value.strokeStyle="#558B2F",i.value.lineWidth=2,i.value.beginPath(),i.value.moveTo(0,ie*.5),i.value.lineTo(0,ie*.7),i.value.stroke(),i.value.strokeStyle="#558B2F",i.value.lineWidth=.8,i.value.beginPath(),i.value.moveTo(0,ie*.5),i.value.lineTo(0,-ie*.45),i.value.stroke();const O=3+Math.floor(N.size/8);for(let te=0;te<O;te++){const G=ie*.3-te*ie*.6/O,ne=V*.7*(1-Math.abs(G)/(ie*.5));i.value.beginPath(),i.value.moveTo(0,G),i.value.quadraticCurveTo(ne*.5,G-G*.2,ne,G-G*.3),i.value.stroke(),i.value.beginPath(),i.value.moveTo(0,G),i.value.quadraticCurveTo(-ne*.5,G-G*.2,-ne,G-G*.3),i.value.stroke()}i.value.fillStyle="#8D6E63";for(let te=0;te<N.seeds.length;te+=3)if(te<N.seeds.length){const G=N.seeds[te],ne=Math.cos(G.angle)*G.distance*.5,he=Math.sin(G.angle)*G.distance*.8;Math.abs(ne)<V*Math.cos(Math.PI*Math.abs(he)/ie)&&(i.value.beginPath(),i.value.arc(ne,he,G.size*.7,0,Math.PI*2),i.value.fill())}i.value.restore()})},Ie=()=>{if(!i.value||!o.value)return;const N=o.value.width/2,ue=o.value.height/2,j=30;i.value.fillStyle="#8B4513",i.value.beginPath(),i.value.arc(N,ue,j,0,Math.PI*2),i.value.fill(),i.value.fillStyle="#3E2723",i.value.beginPath(),i.value.arc(N,ue,10,0,Math.PI*2),i.value.fill(),i.value.fillStyle="#A0522D",P.value.forEach(B=>{i.value.beginPath(),i.value.arc(N+B.x,ue+B.y,B.size,0,Math.PI*2),i.value.fill()}),i.value.strokeStyle="#5D4037",i.value.lineWidth=1.5,I.value.forEach(B=>{i.value.beginPath(),i.value.moveTo(N,ue),i.value.quadraticCurveTo(N+B.controlX,ue+B.controlY,N+B.endX,ue+B.endY),i.value.stroke()})},Ne=()=>{var B;if(!i.value||!((B=$.value)!=null&&B.active))return;const N=$.value.x,ue=$.value.y;$.value.isDragging;const j=i.value.createRadialGradient(N,ue,vd*.3,N,ue,vd);j.addColorStop(0,"rgba(255, 220, 50, 0.15)"),j.addColorStop(1,"rgba(255, 220, 50, 0)"),i.value.fillStyle=j,i.value.beginPath(),i.value.arc(N,ue,vd,0,Math.PI*2),i.value.fill(),Z.value&&Z.value.complete&&i.value.drawImage(Z.value,N-60/2,ue-60/2+25,60,60)},je=()=>{if(!i.value||!o.value)return;const N=()=>{var B;if(!i.value||!o.value)return;const ue=o.value.width,j=o.value.height;i.value.clearRect(0,0,ue,j),Ie(),m.value&&Te(),w.value&&C.value!==null||(B=$.value)!=null&&B.active&&Ne(),Math.random()<.05&&H(),L.value.forEach(ie=>{W(ie,ue,j),ge(ie)}),c.value=requestAnimationFrame(N)};N()};return(N,ue)=>(h(),v("div",r$e,[a("div",{ref_key:"containerRef",ref:u,class:"sim-container absolute inset-0 w-full h-full"},[a("canvas",{ref_key:"canvasRef",ref:o,class:"block w-full h-full"},null,512)],512),a("div",o$e,[a("div",i$e,[ue[1]||(ue[1]=a("span",{class:"i-heroicons-face-smile text-lg text-green-600 dark:text-green-400"},null,-1)),a("div",a$e,[a("span",l$e,"Morale: "+_(T.value),1),ue[0]||(ue[0]=a("span",{class:"text-amber-700 dark:text-amber-300 text-[10px]"},"Click/Tap to motivate!",-1))])])])]))}}),u$e=Ct(c$e,[["__scopeId","data-v-06f7fe7c"]]),d$e="/assets/farm-bg-C4Ph_Hc7.png",m$e={class:"bg-amber-50/70 dark:bg-amber-950/30 p-4 rounded-lg shadow-md"},f$e={class:"flex items-center justify-between mb-4"},p$e={class:"bg-amber-200/50 dark:bg-amber-800/50 rounded px-2 py-1 text-xs flex items-center gap-1"},h$e={class:"flex flex-wrap gap-1 mb-4 border-b border-amber-200 dark:border-amber-800 pb-2"},g$e=["onClick"],v$e={class:"bg-amber-100/30 dark:bg-amber-900/20 p-3 rounded-lg mb-4"},b$e={key:0,class:"text-sm"},y$e={class:"mb-2"},_$e={key:1,class:"text-sm"},x$e={class:"mb-2"},k$e={key:2,class:"text-sm"},w$e={key:3,class:"text-sm"},E$e={class:"space-y-3"},C$e={key:0,class:"absolute top-0 right-0 bg-gradient-to-l from-amber-400 to-amber-500 text-white dark:from-amber-600 dark:to-amber-700 px-2 py-0.5 text-xs font-bold rounded-bl"},S$e={key:1,class:"absolute inset-0 bg-gradient-to-br from-amber-100/20 to-amber-300/20 dark:from-amber-800/20 dark:to-amber-600/20 pointer-events-none"},T$e={class:"flex justify-between items-start relative z-10"},A$e={class:"flex items-center gap-2"},I$e={class:"font-medium"},P$e={class:"text-xs bg-amber-100 dark:bg-amber-900 px-1.5 py-0.5 rounded-full"},M$e={class:"text-xs my-2 text-gray-600 dark:text-gray-300 relative z-10"},$$e={key:2,class:"text-xs mt-2 mb-2 text-amber-700 dark:text-amber-300 border-t border-amber-100 dark:border-amber-800 pt-1 relative z-10"},R$e={key:3,class:"text-xs p-1 bg-amber-100 dark:bg-amber-900/50 rounded mt-2 mb-1 flex items-center gap-1 relative z-10"},L$e={class:"flex justify-between items-center mt-3 relative z-10"},D$e={class:"text-xs text-gray-500 dark:text-gray-400"},N$e=["onClick","disabled"],O$e={key:4,class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3 overflow-hidden relative z-10"},F$e={key:0,class:"text-center py-8 bg-amber-50 dark:bg-amber-950 rounded-lg border border-dashed border-amber-200 dark:border-amber-800"},U$e=Je({__name:"GlobalUpgrades",setup(t){const e=Ls(),{showToast:s}=Us(),{formatHoneydew:n}=If(),{getCurrencyClasses:r}=Ga(),o=r("honeydew"),i=r("evolutionPoints"),c=r("pheromoneEssence"),u=Y("ep"),d=[{id:"ep",name:"Evolution Points",icon:"i-heroicons-sparkles",colors:i},{id:"pheromone",name:"Pheromone",icon:"i-heroicons-beaker",colors:c},{id:"global",name:"Global",icon:"i-heroicons-globe-alt"}],m=q(()=>e.globalUpgrades.filter(R=>R.targets.includes(u.value))),f=R=>{const L=e.canPurchaseGlobalUpgrade(R),P=e.globalUpgrades.find(D=>D.id===R),I=e.getGlobalUpgradeLevel(R);return P&&I>=P.maxLevel?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 cursor-not-allowed":L?"bg-amber-300 hover:bg-amber-400 dark:bg-amber-700 dark:hover:bg-amber-600 transition-colors":"bg-amber-100 dark:bg-amber-900 opacity-50 cursor-not-allowed"},p=R=>{const L=e.globalUpgrades.find(I=>I.id===R);return L?`${e.getGlobalUpgradeLevel(R)}/${L.maxLevel}`:""},g=R=>{const L=e.globalUpgrades.find(D=>D.id===R);if(!L)return;const P=e.calculateGlobalUpgradeCost(R),I=e.getGlobalUpgradeLevel(R);e.purchaseGlobalUpgrade(R)?s(`Upgraded ${L.name} to level ${I+1}!`,"success"):s(`Not enough honeydew! Need ${n(P)} honeydew.`,"error")},w=R=>R.includes("global")?"i-heroicons-globe-alt text-purple-600 dark:text-purple-400":R.includes("generators")?"i-heroicons-cog text-blue-600 dark:text-blue-400":R.includes("pheromone")?"i-heroicons-beaker text-green-600 dark:text-green-400":R.includes("ep")?"i-heroicons-sparkles text-amber-600 dark:text-amber-400":"i-heroicons-star text-amber-600 dark:text-amber-400",C=R=>R.endsWith("-2"),E=R=>C(R)?"bg-white dark:bg-gray-800 p-3 rounded-lg border-2 border-amber-400 dark:border-amber-500 shadow-sm relative overflow-hidden":"bg-white dark:bg-gray-800 p-3 rounded-lg border border-amber-200 dark:border-amber-800 shadow-sm",k=R=>e.getGlobalUpgradeDescription(R),A=R=>e.getNextLevelGlobalUpgradeDescription(R),S=R=>{const L=e.getGlobalUpgradeLevel(R);if(L===0)return"Not purchased";const P=e.globalUpgrades.find(U=>U.id===R);return P&&L>=P.maxLevel?"Maximum level":`Current bonus: ${e.getGlobalUpgradeEffect(R).mul(100).sub(100).toFixed(0)}%`},T=R=>{if(!C(R))return"";const L=R.replace("-2",""),P=e.globalUpgrades.find(I=>I.id===L);return P?P.name:""};return(R,L)=>(h(),v("div",m$e,[a("div",f$e,[L[1]||(L[1]=a("h2",{class:"text-lg font-semibold text-amber-800 dark:text-amber-300"}," Global Production Upgrades ",-1)),a("div",p$e,[L[0]||(L[0]=a("span",null,"Powered by",-1)),a("span",{class:K(b(o).text)},"Honeydew",2)])]),a("div",h$e,[(h(),v(De,null,Ge(d,P=>a("button",{key:P.id,class:K(["px-3 py-1.5 rounded-t text-xs font-medium flex items-center gap-1",[u.value===P.id?P.colors?[P.colors.background,P.colors.text]:"bg-amber-200 dark:bg-amber-800 text-amber-800 dark:text-amber-200":"bg-amber-100/50 dark:bg-amber-900/50 text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900"]]),onClick:I=>u.value=P.id},[a("span",{class:K([P.icon,P.colors&&u.value===P.id?P.colors.icon:""])},null,2),oe(" "+_(P.name),1)],10,g$e)),64))]),a("div",v$e,[u.value==="ep"?(h(),v("div",b$e,[a("p",y$e,[a("span",{class:K([b(i).icon,"i-heroicons-sparkles"])},null,2),a("span",{class:K(b(i).text)},"These upgrades boost your Evolution Point production.",2)]),L[2]||(L[2]=a("p",{class:"text-xs opacity-80"},"Evolution Points are essential for progression and purchasing new features.",-1))])):u.value==="pheromone"?(h(),v("div",_$e,[a("p",x$e,[a("span",{class:K([b(c).icon,"i-heroicons-beaker"])},null,2),a("span",{class:K(b(c).text)},"These upgrades enhance your Pheromone production.",2)]),L[3]||(L[3]=a("p",{class:"text-xs opacity-80"},"Pheromones power temporary boosts and special abilities.",-1))])):u.value==="generators"?(h(),v("div",k$e,L[4]||(L[4]=[a("p",{class:"mb-2"},[a("span",{class:"i-heroicons-cog text-blue-600 dark:text-blue-400"}),oe(" These upgrades multiply all generator production.")],-1),a("p",{class:"text-xs opacity-80"},"Affects all food and resource generators in your colony.",-1)]))):(h(),v("div",w$e,L[5]||(L[5]=[a("p",{class:"mb-2"},[a("span",{class:"i-heroicons-globe-alt text-purple-600 dark:text-purple-400"}),oe(" These upgrades boost all production types.")],-1),a("p",{class:"text-xs opacity-80"},"The most powerful upgrades that affect everything in your colony.",-1)])))]),a("div",E$e,[(h(!0),v(De,null,Ge(m.value,P=>(h(),v("div",{key:P.id,class:K(E(P.id))},[C(P.id)?(h(),v("div",C$e," ADVANCED ")):Q("",!0),C(P.id)?(h(),v("div",S$e)):Q("",!0),a("div",T$e,[a("div",A$e,[a("span",{class:K(w(P.targets))},null,2),a("h3",I$e,_(P.name),1)]),a("span",P$e," Level "+_(p(P.id)),1)]),a("p",M$e,_(k(P.id)),1),b(e).getGlobalUpgradeLevel(P.id)<P.maxLevel?(h(),v("p",$$e,[L[6]||(L[6]=a("span",{class:"font-medium"},"Next level: ",-1)),oe(" "+_(A(P.id)),1)])):Q("",!0),C(P.id)&&!b(e).canPurchaseGlobalUpgrade(P.id)&&b(e).getGlobalUpgradeLevel(P.id)===0?(h(),v("div",R$e,[L[7]||(L[7]=a("span",{class:"i-heroicons-lock-closed text-amber-600 dark:text-amber-400"},null,-1)),a("span",null,"Requires maxing out the base "+_(T(P.id))+" upgrade",1)])):Q("",!0),a("div",L$e,[a("div",D$e,_(S(P.id)),1),a("button",{class:K(["text-xs px-2 py-1 rounded transition-colors",f(P.id)]),onClick:I=>g(P.id),disabled:!b(e).canPurchaseGlobalUpgrade(P.id)||b(e).getGlobalUpgradeLevel(P.id)>=P.maxLevel},[b(e).getGlobalUpgradeLevel(P.id)>=P.maxLevel?(h(),v(De,{key:0},[oe(" Maxed ")],64)):(h(),v(De,{key:1},[L[8]||(L[8]=oe(" Upgrade ")),a("span",{class:K(b(o).text)},"("+_(b(n)(b(e).calculateGlobalUpgradeCost(P.id)))+")",3)],64))],10,N$e)]),b(e).getGlobalUpgradeLevel(P.id)>0?(h(),v("div",O$e,[a("div",{class:K(["h-full rounded-full",C(P.id)?"bg-amber-500 dark:bg-amber-600":"bg-amber-400 dark:bg-amber-700"]),style:yt(`width: ${b(e).getGlobalUpgradeLevel(P.id)/P.maxLevel*100}%`)},null,6)])):Q("",!0)],2))),128)),m.value.length===0?(h(),v("div",F$e,L[9]||(L[9]=[a("span",{class:"i-heroicons-exclamation-circle text-amber-400 text-xl"},null,-1),a("p",{class:"mt-2 text-sm text-amber-600 dark:text-amber-400"},"No upgrades available for this category yet",-1),a("p",{class:"text-xs text-amber-500 dark:text-amber-500 mt-1"},"Check back after you've progressed further",-1)]))):Q("",!0)])]))}}),q$e=Ct(U$e,[["__scopeId","data-v-facf3e6a"]]),B$e={class:"text-center"},V$e={class:"bg-amber-100/70 dark:bg-amber-900/20 p-4 rounded-lg shadow-md mb-4"},H$e={class:"mt-3 flex flex-wrap justify-center items-center gap-2"},G$e={class:"flex justify-center items-center gap-2 bg-blue-200/70 dark:bg-blue-800/50 py-2 px-4 rounded-full"},j$e={class:"font-bold"},W$e={key:0,class:"mt-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg p-3 text-left text-xs"},z$e={class:"grid grid-cols-1 sm:grid-cols-3 gap-1"},Q$e={key:0,class:"flex items-center gap-1"},K$e={class:"font-bold"},Y$e={key:1,class:"flex items-center gap-1"},X$e={class:"font-bold"},J$e={key:2,class:"flex items-center gap-1"},Z$e={class:"font-bold"},eRe={key:1,class:"mt-3 bg-amber-50 dark:bg-amber-900/30 rounded-lg p-3 text-left"},tRe={class:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},sRe={key:0,class:"flex items-start gap-1"},nRe={key:1,class:"flex items-start gap-1"},rRe={key:2,class:"flex items-start gap-1"},oRe={class:"bg-amber-50/70 dark:bg-amber-950/30 p-4 rounded-lg shadow mb-4"},iRe={class:"flex flex-wrap border-b border-amber-200 dark:border-amber-800 mb-4"},aRe={key:0},lRe={class:"flex flex-wrap items-center justify-between gap-2 mb-4"},cRe={class:"flex flex-wrap items-center gap-2"},uRe=["disabled"],dRe={key:0,class:"text-purple-600 dark:text-purple-400"},mRe={class:"bg-amber-200/50 dark:bg-amber-800/50 rounded px-2 py-1 flex items-center gap-1"},fRe=["value"],pRe=["value"],hRe=["disabled"],gRe=["disabled"],vRe=["disabled"],bRe=["disabled"],yRe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_Re=["onClick"],xRe={class:"relative z-10 h-full flex flex-col justify-between"},kRe={class:"flex justify-between items-start"},wRe={class:"bg-amber-900/10 dark:bg-amber-900/30 px-2 py-0.5 rounded text-xs"},ERe={class:"bg-amber-900/10 dark:bg-amber-900/30 px-2 py-0.5 rounded text-xs"},CRe={class:"text-center flex-grow flex flex-col justify-center items-center"},SRe={key:0,class:"i-heroicons-star text-yellow-500 text-xs",title:"This aphid has active upgrades"},TRe={key:0,class:"text-xs bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},ARe={key:1,class:"text-xs bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},IRe={key:1,class:"text-xs bg-amber-200 dark:bg-amber-800 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1",title:"This Golden Aphid boosts adjacent fields"},PRe={key:2,class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},MRe={key:3,class:"text-xs bg-amber-100 dark:bg-amber-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},$Re={key:0,class:"text-xs bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},RRe={key:1,class:"text-xs bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},LRe={key:0,class:"text-xs bg-purple-100 dark:bg-purple-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},DRe={key:1,class:"text-xs bg-purple-100 dark:bg-purple-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},NRe={key:2,class:"text-xs bg-purple-100 dark:bg-purple-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},ORe={key:0,class:"text-xs bg-pink-100 dark:bg-pink-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},FRe={key:1,class:"text-xs bg-pink-100 dark:bg-pink-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},URe={key:0,class:"text-xs bg-yellow-100 dark:bg-yellow-900 px-2 py-0.5 rounded-full flex items-center gap-1 mt-1"},qRe={class:"text-xs mt-1"},BRe={class:"text-xs text-amber-600 dark:text-amber-400"},VRe={class:"text-xs text-green-600 dark:text-green-400 font-bold"},HRe={key:0,class:"text-2xs text-purple-500 dark:text-purple-400 font-bold flex items-center gap-0.5"},GRe={key:2,class:"my-1 flex flex-col items-center gap-1"},jRe={class:"text-xs bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded-full flex items-center gap-1"},WRe={key:0,class:"flex items-center gap-1 bg-green-50 dark:bg-green-950 rounded-full px-2 py-0.5 mt-1 aphid-selector-wrapper"},zRe={class:"relative select-wrapper"},QRe={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},KRe=["value","onChange"],YRe=["value"],XRe={class:"flex justify-center gap-2 flex-wrap"},JRe=["onClick","disabled"],ZRe=["onClick"],eLe=["onClick"],tLe={key:2,class:"text-xs px-2 py-1 rounded bg-green-200/50 hover:bg-green-300/50 dark:bg-green-700/50 dark:hover:bg-green-600/50 transition-colors flex items-center gap-1 cursor-not-allowed",disabled:""},sLe={key:0},nLe={key:1},rLe={class:"flex justify-between items-center mb-2"},oLe={class:"grid grid-cols-1 gap-2 max-h-[calc(100%-2.5rem)] overflow-y-auto pr-1 custom-scrollbar"},iLe=["onClick"],aLe={class:"flex gap-2 text-2xs"},lLe={key:1},cLe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4"},uLe={class:"flex justify-between items-center"},dLe={class:"flex gap-1"},mLe=["onClick"],fLe={class:"text-xs mt-1 opacity-80"},pLe={class:"grid grid-cols-2 gap-1 mt-2 text-2xs"},hLe={class:"bg-amber-900/10 dark:bg-amber-800/30 px-2 py-1 rounded"},gLe={class:"font-medium"},vLe={class:"bg-amber-900/10 dark:bg-amber-800/30 px-2 py-1 rounded"},bLe={class:"font-medium"},yLe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},_Le={class:"flex justify-between items-center"},xLe=["onClick","disabled"],kLe={class:"text-xs mt-1 opacity-80"},wLe={class:"grid grid-cols-2 gap-1 mt-2 text-2xs"},ELe={class:"bg-amber-900/10 dark:bg-amber-800/30 px-2 py-1 rounded"},CLe={class:"font-medium"},SLe={class:"bg-amber-900/10 dark:bg-amber-800/30 px-2 py-1 rounded"},TLe={class:"font-medium"},ALe={key:2},ILe={key:0,class:"p-2 bg-amber-50 dark:bg-amber-950 rounded mb-3 border border-amber-200 dark:border-amber-800"},PLe={key:0,class:"mb-2 text-xs flex items-start gap-1"},MLe={key:1,class:"text-xs flex items-start gap-1"},$Le={key:1,class:"p-2 bg-pink-50 dark:bg-pink-950 rounded mb-3 border border-pink-200 dark:border-pink-800"},RLe={key:0,class:"mb-2 text-xs flex items-start gap-1"},LLe={key:1,class:"text-xs flex items-start gap-1"},DLe={class:"flex flex-wrap gap-1 mb-4 justify-center"},NLe=["onClick"],OLe={class:"bg-amber-100/30 dark:bg-amber-900/20 p-3 rounded-lg mb-4"},FLe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[60vh] overflow-y-auto pr-1 custom-scrollbar"},ULe={class:"flex justify-between items-start"},qLe={class:"font-medium text-sm"},BLe={class:"text-xs bg-amber-100 dark:bg-amber-900 px-1.5 py-0.5 rounded-full"},VLe={class:"text-xs my-1 opacity-85"},HLe={class:"flex justify-between items-center mt-2"},GLe=["onClick","disabled"],jLe={key:1,class:"text-xs px-2 py-1 rounded bg-green-200 dark:bg-green-900 text-green-700 dark:text-green-300"},WLe={key:0,class:"text-xs mt-2 pt-2 border-t border-amber-100 dark:border-amber-800"},zLe={key:3},QLe={key:4},KLe={class:"bg-amber-100/30 dark:bg-amber-900/20 p-3 rounded-lg mb-4"},YLe={class:"bg-amber-50 dark:bg-amber-950 p-3 rounded border border-amber-200 dark:border-amber-800"},XLe={class:"flex justify-between items-center mt-2"},JLe=["disabled","title"],ZLe=Je({__name:"AphidFarmPage",setup(t){const e=Ls(),s=ir(),n=St(),{showToast:r}=Us(),{formattedHoneydew:o,formatHoneydew:i,canAffordHoneydew:c}=If(),{getCurrencyClasses:u}=Ga(),d=u("honeydew"),m=Y(null),f=Y(!1),p=Ve=>{if(!m.value||f.value){f.value=!1;return}m.value=null};Et(()=>{document.addEventListener("click",p)}),ar(()=>{document.removeEventListener("click",p)});const g=Y("greenleaf"),w=Y("fields"),C=q(()=>e.selectedAphidType),E=q(()=>n.getAphidYieldMultiplier()),k=q(()=>n.getAphidGrowthMultiplier()),A=q(()=>n.getNewFieldCostMultiplier()),S=q(()=>E.value.gt(1)),T=q(()=>k.value.lt(1)),R=q(()=>A.value.lt(1)),L=q(()=>Lt(E.value.sub(1))),P=q(()=>Lt(l(1).sub(k.value))),I=q(()=>Lt(l(1).sub(A.value))),D=()=>{const Ve=e.calculateNewFieldCost();e.buyNewField()?r(`Purchased new field for ${i(Ve)} honeydew!`,"success"):r(`Not enough honeydew! Need ${i(Ve)} honeydew.`,"error")},U=Ve=>{const ke=e.fields.find(Fe=>Fe.id===Ve);if(ke){if(ke.isHarvestable&&ke.type){const Fe=e.harvestField(Ve);r(`Harvested ${i(Fe)} honeydew!`,"success"),m.value=Ve,f.value=!0;return}m.value===Ve?m.value=null:(m.value=Ve,f.value=!0)}},M=(Ve,ke)=>{e.plantAphid(Ve,ke)?(r(`Planted ${e.APHID_TYPES[ke].name}!`,"success"),m.value=null):r("Failed to plant aphid. Make sure it's unlocked.","error")},x=()=>{if(!C.value){r("Please select an aphid type first","error");return}let Ve=0;e.fields.forEach(ke=>{(!ke.type||ke.type&&ke.isHarvestable&&ke.progress===0)&&e.plantAphid(ke.id,C.value)&&Ve++}),Ve>0?r(`Planted ${e.APHID_TYPES[C.value].name} in ${Ve} fields!`,"success"):r("No fields available for planting","info")},$=()=>{let Ve=l(0),ke=0;e.fields.forEach(Fe=>{if(Fe.isHarvestable&&Fe.type){const Ae=e.harvestField(Fe.id);Ve=Ve.add(Ae),ke++}}),ke>0?r(`Harvested ${i(Ve)} honeydew from ${ke} fields!`,"success"):r("No fields ready for harvest","info")},Z=()=>{const Ve=e.calculatePlantAllCost();e.unlockPlantAll()?r(`Unlocked Plant All ability for ${i(Ve)} honeydew!`,"success"):r(`Not enough honeydew! Need ${i(Ve)} honeydew.`,"error")},me=()=>{const Ve=e.calculateHarvestAllCost();e.unlockHarvestAll()?r(`Unlocked Harvest All ability for ${i(Ve)} honeydew!`,"success"):r(`Not enough honeydew! Need ${i(Ve)} honeydew.`,"error")},re=Ve=>{const ke=e.fields.find(Ae=>Ae.id===Ve);if(!ke)return;const Fe=e.getFieldUpgradeCost(Ve);e.upgradeField(Ve)?r(`Field upgraded to level ${ke.level}!`,"success"):r(`Not enough honeydew! Need ${i(Fe)} honeydew.`,"error")},J=Ve=>{const ke=e.APHID_TYPES[Ve];e.unlockAphidType(Ve)?r(`Unlocked ${ke.name}!`,"success"):r(`Not enough honeydew! Need ${i(ke.unlockCost)} honeydew.`,"error")},le=Ve=>e.unlockedAphidTypes.has(Ve),se=q(()=>Object.entries(e.APHID_TYPES).filter(([Ve])=>le(Ve)).map(([Ve,ke])=>({type:Ve,...ke}))),z=q(()=>Object.entries(e.APHID_TYPES).filter(([Ve])=>!le(Ve)).map(([Ve,ke])=>({type:Ve,...ke})).sort((Ve,ke)=>Ve.unlockCost.cmp(ke.unlockCost))),ce=Ve=>{const ke=e.fields.find(Ae=>Ae.id===Ve);if(!ke)return"";const Fe=["border-2","rounded-lg","p-3","flex","flex-col","justify-between","transition-all","relative","overflow-hidden","cursor-pointer","h-full","min-h-62"];if(ke.type){const Ae=e.APHID_TYPES[ke.type].color.split("-")[1];Fe.push(`border-${Ae}-${ke.isHarvestable?"500":"300"}`)}else Fe.push("border-amber-300");return ke.hasAutoFarming&&ke.autoFarmingEnabled?Fe.push("h-48"):ke.hasAutoFarming?Fe.push("h-44"):Fe.push("h-40"),Fe.join(" ")},pe=Ve=>{const ke=e.fields.find(nt=>nt.id===Ve);if(!ke||!ke.type||ke.isHarvestable)return"";const Fe=e.getAphidGrowthTime(ke.type);let We=`${Math.ceil(Fe*(1-ke.progress))} trips remaining`;return T.value&&(We+=` (${P.value} faster)`),We},_e=q(()=>e.fields.filter(Ve=>Ve.isHarvestable).length),Ee=q(()=>e.fields.filter(Ve=>!Ve.type||Ve.type&&Ve.progress===0&&Ve.isHarvestable).length),Ue=Ve=>{const ke=e.fields.find(We=>We.id===Ve);if(!ke||!ke.type)return l(0);let Fe=e.getAphidYield(ke.type,ke.level);const Ae=e.getGoldenAuraMultiplier(Ve);return Fe=Fe.mul(Ae),Fe},ze=Ve=>{const ke=e.fields.find(Ae=>Ae.id===Ve);if(!ke)return;const Fe=e.calculateAutoFarmingCost(Ve);e.purchaseAutoFarming(Ve)?r(`Auto farming activated for Field ${Ve.replace("field","")}!`,"success"):ke.level<10?r("Field must be level 10 to unlock auto farming.","error"):r(`Not enough honeydew! Need ${i(Fe)} honeydew.`,"error")},Re=Ve=>{const ke=e.fields.find(Fe=>Fe.id===Ve);!ke||!ke.hasAutoFarming||e.toggleAutoFarming(Ve)&&r(`Auto farming ${ke.autoFarmingEnabled?"enabled":"disabled"} for Field ${Ve.replace("field","")}.`,"success")},$e=(Ve,ke)=>{const Fe=e.fields.find(Ae=>Ae.id===Ve);!Fe||!Fe.hasAutoFarming||e.setPreferredAphidType(Ve,ke)&&r(`Set ${e.APHID_TYPES[ke].name} as preferred type for auto farming.`,"success")},Ce=Ve=>{const ke=e.fields.find(Fe=>Fe.id===Ve);return ke?ke.level>=10:!1},Oe=Ve=>{const ke=e.aphidUpgrades.find(We=>We.id===Ve);if(!ke)return;const Fe=e.calculateUpgradeCost(Ve),Ae=e.getUpgradeLevel(Ve);e.purchaseUpgrade(Ve)?r(`Upgraded ${ke.name} to level ${Ae+1}!`,"success"):r(`Not enough honeydew! Need ${i(Fe)} honeydew.`,"error")},ve=q(()=>Object.entries(e.APHID_TYPES).filter(([Ve])=>e.unlockedAphidTypes.has(Ve)).map(([Ve,ke])=>({type:Ve,...ke}))),fe=q(()=>e.aphidUpgrades.filter(Ve=>Ve.aphidType===g.value)),X=Ve=>{const ke=e.aphidUpgrades.find(Ae=>Ae.id===Ve);return ke?`${e.getUpgradeLevel(Ve)}/${ke.maxLevel}`:""},H=Ve=>e.aphidUpgrades.filter(Fe=>Fe.aphidType===Ve).some(Fe=>e.getUpgradeLevel(Fe.id)>0),W=q(()=>e.getUpgradeLevel("golden-aura")>0),ge=q(()=>e.getUpgradeLevel("golden-shine")>0),Te=q(()=>e.getUpgradeLevel("golden-efficiency")>0),Ie=q(()=>e.getUpgradeLevel("greenleaf-growth")>0);q(()=>e.getUpgradeLevel("greenleaf-yield")>0);const Ne=q(()=>e.getUpgradeLevel("greenleaf-doubler")>0),je=q(()=>e.getUpgradeLevel("bubbleback-efficiency")>0),N=q(()=>e.getUpgradeLevel("bubbleback-burst")>0);q(()=>e.getUpgradeLevel("bubbleback-quality")>0);const ue=q(()=>e.getUpgradeLevel("fungal-fields")>0),j=q(()=>e.getUpgradeLevel("fungal-growth")>0),B=q(()=>e.getUpgradeLevel("fungal-symbiosis")>0),ie=q(()=>e.getUpgradeLevel("pheromelion-catalyst")>0);q(()=>e.getUpgradeLevel("pheromelion-potency")>0);const V=q(()=>e.getUpgradeLevel("pheromelion-empowerment")>0),O=()=>{const Ve=e.getUpgradeEffect("greenleaf-doubler");return Lt(Ve.div(100))},te=()=>{const Ve=e.getUpgradeEffect("bubbleback-burst");return Lt(Ve.div(100))},G=()=>{const Ve=e.getUpgradeEffect("pheromelion-catalyst");return Lt(Ve.div(100))},ne=()=>{const Ve=e.getUpgradeEffect("pheromelion-empowerment");return Lt(Ve.div(100))},he=Ve=>e.getGoldenAuraMultiplier(Ve).gt(1),ye=Ve=>{const Fe=e.getGoldenAuraMultiplier(Ve).sub(1);return Lt(Fe)},ae=()=>{const Ve=e.getUpgradeEffect("golden-shine");return Lt(l(Ve).div(100))},de=()=>{const Ve=e.getUpgradeEffect("greenleaf-growth");return Lt(l(Ve).div(100))},Me=()=>{const Ve=e.getUpgradeEffect("golden-aura");return Lt(l(Ve).div(100))},Le=()=>{const Ve=e.getUpgradeEffect("golden-efficiency");return Lt(l(Ve).div(100))},it=()=>{const Ve=e.getUpgradeEffect("fungal-symbiosis");return Lt(l(Ve).div(100))},Ze=()=>{const Ve=e.getUpgradeEffect("fungal-growth");return Lt(l(Ve).div(100))},pt=()=>{const Ve=e.getUpgradeEffect("fungal-fields"),ke=e.fields.length,Fe=Ve.mul(ke).div(100);return Lt(Fe)},ft=()=>{const Ve=e.calculateBugHoneydewDropUpgradeCost();e.purchaseBugHoneydewDropUpgrade()?r("Bug Honeydew Drops unlocked!","success"):s.isAdventureUnlocked?e.canPurchaseBugHoneydewDropUpgrade||r(`Not enough honeydew! Need ${i(Ve)} honeydew.`,"error"):r("Adventure mode must be unlocked first!","error")};return(Ve,ke)=>(h(),v("div",B$e,[a("div",V$e,[ke[25]||(ke[25]=a("h1",{class:"text-xl font-bold mb-2"},"Aphid Farm",-1)),ke[26]||(ke[26]=a("p",{class:"text-sm text-amber-800 dark:text-amber-300"},' Your ants have discovered that they can "farm" aphids for their sweet honeydew secretions! ',-1)),a("div",H$e,[a("div",{class:K(["flex justify-center items-center gap-2 rounded-full py-2 px-4",b(d).background])},[a("span",{class:K([b(d).icon,"i-heroicons-beaker"])},null,2),a("span",{class:K(["font-bold",b(d).text])},_(b(o)),3),a("span",{class:K(["text-xs",b(d).text])},"honeydew",2)],2),a("div",G$e,[ke[9]||(ke[9]=a("span",{class:"i-heroicons-square-2-stack text-blue-600 dark:text-blue-300"},null,-1)),a("span",j$e,_(b(e).fields.length),1),ke[10]||(ke[10]=a("span",{class:"text-xs text-blue-700 dark:text-blue-400"},"fields",-1))])]),S.value||T.value||R.value?(h(),v("div",W$e,[ke[17]||(ke[17]=a("h3",{class:"text-sm font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1 mb-1"},[a("span",{class:"i-heroicons-sparkles"}),oe(" Evolutionary Boosts Active ")],-1)),a("div",z$e,[S.value?(h(),v("p",Q$e,[ke[12]||(ke[12]=a("span",{class:"i-heroicons-arrow-up-circle text-green-500"},null,-1)),a("span",null,[ke[11]||(ke[11]=oe("Honeydew Yield: ")),a("span",K$e,"+"+_(L.value),1)])])):Q("",!0),T.value?(h(),v("p",Y$e,[ke[14]||(ke[14]=a("span",{class:"i-heroicons-clock text-blue-500"},null,-1)),a("span",null,[ke[13]||(ke[13]=oe("Aphid Growth Speed: ")),a("span",X$e,"+"+_(P.value),1)])])):Q("",!0),R.value?(h(),v("p",J$e,[ke[16]||(ke[16]=a("span",{class:"i-heroicons-currency-dollar text-amber-500"},null,-1)),a("span",null,[ke[15]||(ke[15]=oe("New Field Cost: ")),a("span",Z$e,"-"+_(I.value),1)])])):Q("",!0)])])):Q("",!0),W.value||ge.value||V.value?(h(),v("div",eRe,[ke[24]||(ke[24]=a("h3",{class:"text-sm font-medium text-amber-700 dark:text-amber-300 flex items-center gap-1 mb-1"},[a("span",{class:"i-heroicons-information-circle"}),oe(" Special Aphid Effects Active ")],-1)),a("div",tRe,[W.value?(h(),v("div",sRe,[ke[19]||(ke[19]=a("span",{class:"i-heroicons-sun text-amber-600 dark:text-amber-300 mt-0.5 flex-shrink-0"},null,-1)),a("span",null,[ke[18]||(ke[18]=a("b",null,"Golden Aura:",-1)),oe(" Plant Golden Aphids next to other fields to boost their yields by "+_(b(e).getUpgradeEffect("golden-aura").toNumber())+"%. Fields being boosted will show a sparkles indicator.",1)])])):Q("",!0),ge.value?(h(),v("div",nRe,[ke[21]||(ke[21]=a("span",{class:"i-heroicons-bolt text-yellow-600 dark:text-yellow-300 mt-0.5 flex-shrink-0"},null,-1)),a("span",null,[ke[20]||(ke[20]=a("b",null,"Radiant Harvest:",-1)),oe(" Golden Aphids have a "+_(ae())+" chance to yield double honeydew when harvested.",1)])])):Q("",!0),V.value?(h(),v("div",rRe,[ke[23]||(ke[23]=a("span",{class:"i-heroicons-sparkles text-pink-600 dark:text-pink-300 mt-0.5 flex-shrink-0"},null,-1)),a("span",null,[ke[22]||(ke[22]=a("b",null,"Pheromone Empowerment:",-1)),oe(" With Pheromelion Aphids planted, all upgrade effects are boosted by "+_(ne())+"%. This applies to all aphid types!",1)])])):Q("",!0)])])):Q("",!0)]),a("div",oRe,[a("div",iRe,[a("button",{class:K(["px-4 py-2 font-medium text-sm mr-2 mb-2 whitespace-nowrap focus:outline-none",{"border-b-2 border-amber-500 text-amber-700 dark:text-amber-400":w.value==="fields"}]),onClick:ke[0]||(ke[0]=Fe=>w.value="fields")},ke[27]||(ke[27]=[a("span",{class:"i-heroicons-square-2-stack mr-1 align-middle"},null,-1),oe(" Fields ")]),2),a("button",{class:K(["px-4 py-2 font-medium text-sm mr-2 mb-2 whitespace-nowrap focus:outline-none",{"border-b-2 border-amber-500 text-amber-700 dark:text-amber-400":w.value==="types"}]),onClick:ke[1]||(ke[1]=Fe=>w.value="types")},ke[28]||(ke[28]=[a("span",{class:"i-heroicons-tag mr-1 align-middle"},null,-1),oe(" Aphid Types ")]),2),a("button",{class:K(["px-4 py-2 font-medium text-sm mr-2 mb-2 whitespace-nowrap focus:outline-none",{"border-b-2 border-amber-500 text-amber-700 dark:text-amber-400":w.value==="upgrades"}]),onClick:ke[2]||(ke[2]=Fe=>w.value="upgrades")},ke[29]||(ke[29]=[a("span",{class:"i-heroicons-arrow-up-circle mr-1 align-middle"},null,-1),oe(" Upgrades ")]),2),a("button",{class:K(["px-4 py-2 font-medium text-sm mr-2 mb-2 whitespace-nowrap focus:outline-none",{"border-b-2 border-amber-500 text-amber-700 dark:text-amber-400":w.value==="global"}]),onClick:ke[3]||(ke[3]=Fe=>w.value="global")},ke[30]||(ke[30]=[a("span",{class:"i-heroicons-globe-alt mr-1 align-middle"},null,-1),oe(" Global Upgrades ")]),2),a("button",{class:K(["px-4 py-2 font-medium text-sm mb-2 whitespace-nowrap focus:outline-none",{"border-b-2 border-amber-500 text-amber-700 dark:text-amber-400":w.value==="cross-feature"}]),onClick:ke[4]||(ke[4]=Fe=>w.value="cross-feature")},ke[31]||(ke[31]=[a("span",{class:"i-heroicons-puzzle-piece mr-1 align-middle"},null,-1),oe(" Cross-Feature ")]),2)]),w.value==="fields"?(h(),v("div",aRe,[a("div",lRe,[ke[42]||(ke[42]=a("h2",{class:"text-lg font-semibold"},"Aphid Fields",-1)),a("div",cRe,[a("button",{class:K(["text-xs px-2 py-1 rounded transition-colors flex items-center gap-1",[b(e).canBuyNewField()?"bg-blue-200 hover:bg-blue-300 dark:bg-blue-700 dark:hover:bg-blue-600":"bg-blue-200/50 dark:bg-blue-700/50 opacity-50 cursor-not-allowed"]]),onClick:D,disabled:!b(e).canBuyNewField()},[ke[33]||(ke[33]=a("span",{class:"i-heroicons-plus text-blue-700 dark:text-blue-300"},null,-1)),ke[34]||(ke[34]=oe(" Buy Field ")),a("span",{class:K(b(d).text)},[oe(" ("+_(b(i)(b(e).calculateNewFieldCost()))+" ",1),R.value?(h(),v("span",dRe,"(-"+_(I.value)+")",1)):Q("",!0),ke[32]||(ke[32]=oe(") "))],2)],10,uRe),a("div",mRe,[ke[35]||(ke[35]=a("label",{for:"aphid-select",class:"text-xs"},"Quick select:",-1)),a("select",{id:"aphid-select",value:C.value,onChange:ke[5]||(ke[5]=Fe=>b(e).selectedAphidType=Fe.target.value),class:"bg-transparent border-0 text-xs focus:ring-0 cursor-pointer"},[(h(!0),v(De,null,Ge(se.value,Fe=>(h(),v("option",{key:Fe.id,value:Fe.type,class:K(Fe.color)},_(Fe.name),11,pRe))),128))],40,fRe)]),b(e).hasPlantAllUnlocked?(h(),v("button",{key:0,class:K(["text-xs px-2 py-1 rounded bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 transition-colors flex items-center gap-1",{"opacity-50 cursor-not-allowed":Ee.value===0}]),onClick:x,disabled:Ee.value===0},[ke[36]||(ke[36]=a("span",{class:"i-heroicons-plus-circle text-green-700 dark:text-green-300"},null,-1)),oe(" Plant All ("+_(Ee.value)+") ",1)],10,hRe)):(h(),v("button",{key:1,class:K(["text-xs px-2 py-1 rounded transition-colors flex items-center gap-1",[b(e).canUnlockPlantAll()?"bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600":"bg-green-200/50 dark:bg-green-700/50 opacity-50 cursor-not-allowed"]]),onClick:Z,disabled:!b(e).canUnlockPlantAll()},[ke[37]||(ke[37]=a("span",{class:"i-heroicons-lock-open text-green-700 dark:text-green-300"},null,-1)),ke[38]||(ke[38]=oe(" Unlock Plant All ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).calculatePlantAllCost()))+")",3)],10,gRe)),b(e).hasHarvestAllUnlocked?(h(),v("button",{key:2,class:K(["text-xs px-2 py-1 rounded bg-amber-200 hover:bg-amber-300 dark:bg-amber-700 dark:hover:bg-amber-600 transition-colors flex items-center gap-1",{"opacity-50 cursor-not-allowed":_e.value===0}]),onClick:$,disabled:_e.value===0},[ke[39]||(ke[39]=a("span",{class:"i-heroicons-scissors text-amber-700 dark:text-amber-300"},null,-1)),oe(" Harvest All ("+_(_e.value)+") ",1)],10,vRe)):(h(),v("button",{key:3,class:K(["text-xs px-2 py-1 rounded transition-colors flex items-center gap-1",[b(e).canUnlockHarvestAll()?"bg-amber-200 hover:bg-amber-300 dark:bg-amber-700 dark:hover:bg-amber-600":"bg-amber-200/50 dark:bg-amber-700/50 opacity-50 cursor-not-allowed"]]),onClick:me,disabled:!b(e).canUnlockHarvestAll()},[ke[40]||(ke[40]=a("span",{class:"i-heroicons-lock-open text-amber-700 dark:text-amber-300"},null,-1)),ke[41]||(ke[41]=oe(" Unlock Harvest All ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).calculateHarvestAllCost()))+")",3)],10,bRe))])]),a("div",yRe,[(h(!0),v(De,null,Ge(b(e).fields,Fe=>(h(),v("div",{key:Fe.id,class:"relative"},[a("div",{class:K(ce(Fe.id)),style:yt({backgroundImage:`url(${b(d$e)})`,backgroundSize:"cover",backgroundPosition:"center"}),onClick:Ae=>U(Fe.id)},[ke[66]||(ke[66]=a("div",{class:"absolute inset-0 bg-black opacity-70"},null,-1)),Fe.type&&!Fe.isHarvestable?(h(),v("div",{key:0,class:"absolute bottom-0 left-0 right-0 transition-all",style:yt({height:`${b(e).getFieldProgressPercentage(Fe.id)}%`,backgroundColor:Fe.type?`var(--${b(e).APHID_TYPES[Fe.type].color.split("-")[1]}-500)`:"transparent",opacity:"0.3"})},null,4)):Q("",!0),a("div",xRe,[a("div",kRe,[a("span",wRe," Field "+_(Fe.id.replace("field","")),1),a("span",ERe," Level "+_(Fe.level),1)]),a("div",CRe,[Fe.type?(h(),v(De,{key:0},[a("span",{class:K([b(e).APHID_TYPES[Fe.type].color,"text-lg font-semibold flex items-center gap-1"])},[oe(_(b(e).APHID_TYPES[Fe.type].name)+" ",1),H(Fe.type)?(h(),v("span",SRe)):Q("",!0)],2),Fe.type==="greenleaf"?(h(),v(De,{key:0},[Ie.value?(h(),v("span",TRe,[ke[43]||(ke[43]=a("span",{class:"i-heroicons-clock text-green-600 dark:text-green-300"},null,-1)),oe(" "+_(de())+" faster growth ",1)])):Q("",!0),Ne.value&&Fe.isHarvestable?(h(),v("span",ARe,[ke[44]||(ke[44]=a("span",{class:"i-heroicons-duplicate text-green-600 dark:text-green-300"},null,-1)),oe(" "+_(O())+" chance for double harvest ",1)])):Q("",!0)],64)):Q("",!0),Fe.type==="golden"&&W.value?(h(),v("span",IRe,ke[45]||(ke[45]=[a("span",{class:"i-heroicons-sun text-amber-600 dark:text-amber-300"},null,-1),oe(" Golden Aura Active ")]))):Q("",!0),Fe.type==="golden"&&Te.value&&!Fe.isHarvestable?(h(),v("span",PRe,[ke[46]||(ke[46]=a("span",{class:"i-heroicons-clock text-amber-600 dark:text-amber-300"},null,-1)),oe(" "+_(Le())+" faster growth ",1)])):Q("",!0),Fe.type!=="golden"&&he(Fe.id)?(h(),v("span",MRe,[ke[47]||(ke[47]=a("span",{class:"i-heroicons-sparkles text-amber-500"},null,-1)),oe(" +"+_(ye(Fe.id))+" from Golden Aura ",1)])):Q("",!0),Fe.type==="bubbleback"?(h(),v(De,{key:4},[je.value?(h(),v("span",$Re,[ke[48]||(ke[48]=a("span",{class:"i-heroicons-arrow-trending-up text-blue-600 dark:text-blue-300"},null,-1)),oe(" +"+_(b(e).getUpgradeEffect("bubbleback-efficiency").mul(Fe.level))+"% from field level ",1)])):Q("",!0),N.value&&Fe.isHarvestable?(h(),v("span",RRe,[ke[49]||(ke[49]=a("span",{class:"i-heroicons-fire text-blue-600 dark:text-blue-300"},null,-1)),oe(" "+_(te())+" boost on harvest ",1)])):Q("",!0)],64)):Q("",!0),Fe.type==="fungal"?(h(),v(De,{key:5},[ue.value?(h(),v("span",LRe,[ke[50]||(ke[50]=a("span",{class:"i-heroicons-squares-plus text-purple-600 dark:text-purple-300"},null,-1)),oe(" +"+_(pt())+" from field count ",1)])):Q("",!0),B.value&&!Fe.isHarvestable?(h(),v("span",DRe,[ke[51]||(ke[51]=a("span",{class:"i-heroicons-arrow-path text-purple-600 dark:text-purple-300"},null,-1)),oe(" Boosting all fields by "+_(it()),1)])):Q("",!0),j.value&&!Fe.isHarvestable?(h(),v("span",NRe,[ke[52]||(ke[52]=a("span",{class:"i-heroicons-clock text-purple-600 dark:text-purple-300"},null,-1)),oe(" "+_(Ze())+" faster growth ",1)])):Q("",!0)],64)):Q("",!0),Fe.type==="pheromelion"?(h(),v(De,{key:6},[ie.value?(h(),v("span",ORe,[ke[53]||(ke[53]=a("span",{class:"i-heroicons-rocket-launch text-pink-600 dark:text-pink-300"},null,-1)),oe(" All aphids grow "+_(G())+" faster ",1)])):Q("",!0),V.value?(h(),v("span",FRe,[ke[54]||(ke[54]=a("span",{class:"i-heroicons-sparkles text-pink-600 dark:text-pink-300"},null,-1)),oe(" Boosting all upgrades by "+_(ne()),1)])):Q("",!0)],64)):Q("",!0),Fe.isHarvestable?(h(),v(De,{key:7},[ke[56]||(ke[56]=a("span",{class:"text-xs mt-1 font-medium text-green-600 dark:text-green-400"},"Ready to harvest!",-1)),a("span",{class:K(["text-xs",b(d).text])},_(b(i)(Ue(Fe.id)))+" honeydew ",3),Fe.type==="golden"&&ge.value?(h(),v("span",URe,[ke[55]||(ke[55]=a("span",{class:"i-heroicons-bolt text-yellow-600 dark:text-yellow-300"},null,-1)),oe(" "+_(ae())+" chance for double yield ",1)])):Q("",!0)],64)):(h(),v(De,{key:8},[a("span",qRe,_(b(e).getFieldProgressPercentage(Fe.id))+"% grown ",1),a("span",BRe,_(pe(Fe.id)),1),a("span",VRe,[ke[57]||(ke[57]=oe(" Expected: ")),a("span",{class:K(b(d).text)},_(b(i)(Ue(Fe.id)))+" honeydew",3)]),S.value?(h(),v("span",HRe,[ke[58]||(ke[58]=a("span",{class:"i-heroicons-sparkles"},null,-1)),oe("+"+_(L.value),1)])):Q("",!0)],64))],64)):(h(),v(De,{key:1},[ke[59]||(ke[59]=a("span",{class:"text-sm opacity-70"},"Empty Field",-1)),ke[60]||(ke[60]=a("span",{class:"text-base font-bold"},"Click to plant aphids",-1))],64)),Fe.hasAutoFarming?(h(),v("div",GRe,[a("span",jRe,[a("span",{class:K(Fe.autoFarmingEnabled?"i-heroicons-play-circle text-green-600":"i-heroicons-pause-circle text-amber-600")},null,2),oe(" Auto Farming "+_(Fe.autoFarmingEnabled?"On":"Off"),1)]),Fe.autoFarmingEnabled?(h(),v("div",WRe,[ke[61]||(ke[61]=a("span",{class:"text-2xs text-green-700 dark:text-green-300"},"Auto type:",-1)),a("div",zRe,[Fe.preferredAphidType?(h(),v("div",QRe,[a("span",{class:K(["text-2xs font-medium",Fe.preferredAphidType?b(e).APHID_TYPES[Fe.preferredAphidType].color:""])},_(Fe.preferredAphidType?b(e).APHID_TYPES[Fe.preferredAphidType].name:""),3)])):Q("",!0),a("select",{class:"text-2xs bg-transparent border-0 p-0 focus:ring-0 cursor-pointer w-24 h-5 text-center styled-select opacity-0",value:Fe.preferredAphidType,onChange:Ae=>$e(Fe.id,Ae.target.value),onClick:ke[6]||(ke[6]=xt(()=>{},["stop"]))},[(h(!0),v(De,null,Ge(se.value,Ae=>(h(),v("option",{key:Ae.id,value:Ae.type,style:yt({backgroundColor:`var(--${Ae.color.split("-")[1]}-100)`,color:`var(--${Ae.color.split("-")[1]}-800)`,fontWeight:"bold"})},_(Ae.name),13,YRe))),128))],40,KRe)])])):Q("",!0)])):Q("",!0)]),a("div",XRe,[a("button",{class:K(["text-xs px-2 py-1 rounded transition-colors",[b(e).canUpgradeField(Fe.id)?"bg-amber-200 hover:bg-amber-300 dark:bg-amber-700 dark:hover:bg-amber-600":"bg-amber-200/50 dark:bg-amber-700/50 opacity-50 cursor-not-allowed"]]),onClick:xt(Ae=>re(Fe.id),["stop"]),disabled:!b(e).canUpgradeField(Fe.id)},[ke[62]||(ke[62]=oe(" Upgrade ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).getFieldUpgradeCost(Fe.id)))+")",3)],10,JRe),Fe.hasAutoFarming?(h(),v("button",{key:0,class:"text-xs px-2 py-1 rounded bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 transition-colors flex items-center gap-1",onClick:xt(Ae=>Re(Fe.id),["stop"])},[a("span",{class:K(Fe.autoFarmingEnabled?"i-heroicons-pause":"i-heroicons-play")},null,2),oe(" "+_(Fe.autoFarmingEnabled?"Pause Auto":"Start Auto"),1)],8,ZRe)):Ce(Fe.id)&&b(e).canPurchaseAutoFarming(Fe.id)?(h(),v("button",{key:1,class:"text-xs px-2 py-1 rounded bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 transition-colors flex items-center gap-1",onClick:xt(Ae=>ze(Fe.id),["stop"])},[ke[64]||(ke[64]=a("span",{class:"i-heroicons-bolt text-green-700 dark:text-green-300"},null,-1)),a("span",null,[ke[63]||(ke[63]=oe("Auto Farm ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).calculateAutoFarmingCost(Fe.id)))+")",3)])],8,eLe)):(h(),v("button",tLe,[ke[65]||(ke[65]=a("span",{class:"i-heroicons-bolt text-green-700/50 dark:text-green-300/50"},null,-1)),Ce(Fe.id)?(h(),v("span",nLe,"Auto Farm ("+_(b(i)(b(e).calculateAutoFarmingCost(Fe.id)))+")",1)):(h(),v("span",sLe,"Auto Farm (Lvl 10+)"))]))])])],14,_Re),m.value===Fe.id?(h(),v("div",{key:0,class:"absolute inset-0 bg-amber-50/95 dark:bg-amber-900/95 rounded-lg border-2 border-amber-400 shadow-lg z-20 p-2 overflow-hidden",style:{"max-height":"100%","max-width":"100%"},onClick:ke[8]||(ke[8]=xt(()=>{},["stop"]))},[a("div",rLe,[ke[68]||(ke[68]=a("h3",{class:"font-semibold"}," Select Aphid ",-1)),a("button",{class:"text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100",onClick:ke[7]||(ke[7]=xt(Ae=>m.value=null,["stop"]))},ke[67]||(ke[67]=[a("span",{class:"i-heroicons-x-mark"},null,-1)]))]),a("div",oLe,[(h(!0),v(De,null,Ge(se.value,Ae=>(h(),v("button",{key:Ae.id,class:"text-left px-2 py-1.5 rounded flex items-center gap-1.5 hover:bg-amber-200/50 dark:hover:bg-amber-800/50 transition-colors text-sm",onClick:We=>M(Fe.id,Ae.type)},[a("span",{class:K([Ae.color])},"",2),a("div",null,[a("div",null,_(Ae.name),1),a("div",aLe,[a("span",null,"Yield: "+_(b(i)(Ae.baseYield)),1),a("span",null,"Time: "+_(Ae.growthTime)+" trips",1)])])],8,iLe))),128))])])):Q("",!0)]))),128))])])):w.value==="types"?(h(),v("div",lLe,[ke[76]||(ke[76]=a("h2",{class:"text-lg font-semibold mb-4"},"Aphid Types",-1)),ke[77]||(ke[77]=a("h3",{class:"text-sm font-medium border-b border-amber-200 dark:border-amber-800 pb-1 mb-2"},"Available Aphids",-1)),a("div",cLe,[(h(!0),v(De,null,Ge(se.value,Fe=>(h(),v("div",{key:Fe.id,class:"p-3 rounded bg-amber-100/50 dark:bg-amber-900/30 flex flex-col"},[a("div",uLe,[a("span",{class:K([Fe.color,"font-medium"])},_(Fe.name),3),a("div",dLe,[a("button",{class:"text-xs px-1.5 py-0.5 rounded bg-green-200 hover:bg-green-300 dark:bg-green-700 dark:hover:bg-green-600 transition-colors flex items-center gap-1",onClick:Ae=>{g.value=Fe.type,w.value="upgrades"}},ke[69]||(ke[69]=[a("span",{class:"i-heroicons-arrow-up-circle text-green-700 dark:text-green-300"},null,-1),oe(" Upgrades ")]),8,mLe),ke[70]||(ke[70]=a("span",{class:"text-xs px-1.5 py-0.5 rounded bg-amber-200/50 dark:bg-amber-800/50"}," Unlocked ",-1))])]),a("p",fLe,_(Fe.description),1),a("div",pLe,[a("div",hLe,[ke[71]||(ke[71]=a("span",{class:"opacity-70"},"Yield:",-1)),a("span",gLe,_(b(i)(Fe.baseYield)),1)]),a("div",vLe,[ke[72]||(ke[72]=a("span",{class:"opacity-70"},"Growth:",-1)),a("span",bLe,_(Fe.growthTime)+" trips",1)])])]))),128))]),ke[78]||(ke[78]=a("h3",{class:"text-sm font-medium border-b border-amber-200 dark:border-amber-800 pb-1 mb-2"},"Unlock New Aphids",-1)),a("div",yLe,[(h(!0),v(De,null,Ge(z.value,Fe=>(h(),v("div",{key:Fe.id,class:"p-3 rounded bg-amber-100/30 dark:bg-amber-900/20 flex flex-col"},[a("div",_Le,[a("span",{class:K([Fe.color,"font-medium"])},_(Fe.name),3),a("button",{class:K(["text-xs px-1.5 py-0.5 rounded transition-colors",[b(c)(Fe.unlockCost)?"bg-amber-300 hover:bg-amber-400 dark:bg-amber-700 dark:hover:bg-amber-600":"bg-amber-300/50 dark:bg-amber-700/50 opacity-50 cursor-not-allowed"]]),onClick:Ae=>J(Fe.type),disabled:!b(c)(Fe.unlockCost)},[ke[73]||(ke[73]=oe(" Unlock ")),a("span",{class:K(b(d).text)},"("+_(b(i)(Fe.unlockCost))+")",3)],10,xLe)]),a("p",kLe,_(Fe.description),1),a("div",wLe,[a("div",ELe,[ke[74]||(ke[74]=a("span",{class:"opacity-70"},"Yield:",-1)),a("span",CLe,_(b(i)(Fe.baseYield)),1)]),a("div",SLe,[ke[75]||(ke[75]=a("span",{class:"opacity-70"},"Growth:",-1)),a("span",TLe,_(Fe.growthTime)+" trips",1)])])]))),128))])])):w.value==="upgrades"?(h(),v("div",ALe,[ke[92]||(ke[92]=a("h2",{class:"text-lg font-semibold mb-4"},"Aphid Upgrades",-1)),g.value==="golden"&&(W.value||ge.value)?(h(),v("div",ILe,[ke[83]||(ke[83]=a("h4",{class:"text-sm font-medium text-amber-700 dark:text-amber-300 mb-1"},"Golden Aphid Effects Currently Active",-1)),W.value?(h(),v("div",PLe,[ke[80]||(ke[80]=a("span",{class:"i-heroicons-sun text-amber-600 dark:text-amber-300 mt-0.5"},null,-1)),a("div",null,[ke[79]||(ke[79]=a("span",{class:"font-medium"},"Golden Aura:",-1)),a("span",null,"Golden Aphids boost adjacent fields' yields by "+_(Me()),1)])])):Q("",!0),ge.value?(h(),v("div",MLe,[ke[82]||(ke[82]=a("span",{class:"i-heroicons-bolt text-yellow-600 dark:text-yellow-300 mt-0.5"},null,-1)),a("div",null,[ke[81]||(ke[81]=a("span",{class:"font-medium"},"Radiant Harvest:",-1)),a("span",null,"Golden Aphids have a "+_(ae())+" chance to yield double honeydew when harvested.",1)])])):Q("",!0)])):Q("",!0),g.value==="pheromelion"&&(ie.value||V.value)?(h(),v("div",$Le,[ke[88]||(ke[88]=a("h4",{class:"text-sm font-medium text-pink-700 dark:text-pink-300 mb-1"},"Pheromelion Aphid Effects Currently Active",-1)),ie.value?(h(),v("div",RLe,[ke[85]||(ke[85]=a("span",{class:"i-heroicons-rocket-launch text-pink-600 dark:text-pink-300 mt-0.5"},null,-1)),a("div",null,[ke[84]||(ke[84]=a("span",{class:"font-medium"},"Pheromone Catalyst:",-1)),a("span",null,"All aphid types grow "+_(G())+" faster when you have Pheromelion Aphids planted.",1)])])):Q("",!0),V.value?(h(),v("div",LLe,[ke[87]||(ke[87]=a("span",{class:"i-heroicons-sparkles text-pink-600 dark:text-pink-300 mt-0.5"},null,-1)),a("div",null,[ke[86]||(ke[86]=a("span",{class:"font-medium"},"Pheromone Empowerment:",-1)),a("span",null,"All aphid upgrades are "+_(ne())+" more effective when you have Pheromelion Aphids planted.",1)])])):Q("",!0)])):Q("",!0),a("div",DLe,[(h(!0),v(De,null,Ge(ve.value,Fe=>(h(),v("button",{key:Fe.type,class:K(["px-2 py-1 rounded text-xs",[Fe.color,g.value===Fe.type?"bg-amber-200 dark:bg-amber-800":"bg-amber-100 dark:bg-amber-900 opacity-70 hover:opacity-100"]]),onClick:Ae=>g.value=Fe.type},_(Fe.name),11,NLe))),128))]),a("div",OLe,[a("h3",{class:K([b(e).APHID_TYPES[g.value].color,"font-medium text-sm mb-2"])},_(b(e).APHID_TYPES[g.value].name)+" Upgrades ",3),a("div",FLe,[(h(!0),v(De,null,Ge(fe.value,Fe=>(h(),v("div",{key:Fe.id,class:"bg-amber-50 dark:bg-amber-950 p-3 rounded border border-amber-200 dark:border-amber-800"},[a("div",ULe,[a("h4",qLe,_(Fe.name),1),a("span",BLe," Level "+_(X(Fe.id)),1)]),a("p",VLe,_(b(e).getUpgradeDescription(Fe.id)),1),a("div",HLe,[ke[90]||(ke[90]=a("div",{class:"text-xs opacity-70"}," Effect increases with each level ",-1)),b(e).getUpgradeLevel(Fe.id)<Fe.maxLevel?(h(),v("button",{key:0,class:K(["text-xs px-2 py-1 rounded transition-colors",[b(e).canPurchaseUpgrade(Fe.id)?"bg-amber-300 hover:bg-amber-400 dark:bg-amber-700 dark:hover:bg-amber-600":"bg-amber-300/50 dark:bg-amber-700/50 opacity-50 cursor-not-allowed"]]),onClick:Ae=>Oe(Fe.id),disabled:!b(e).canPurchaseUpgrade(Fe.id)},[ke[89]||(ke[89]=oe(" Upgrade ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).calculateUpgradeCost(Fe.id)))+")",3)],10,GLe)):(h(),v("span",jLe," Max Level "))]),b(e).getUpgradeLevel(Fe.id)<Fe.maxLevel?(h(),v("div",WLe,[ke[91]||(ke[91]=a("span",{class:"text-amber-600 dark:text-amber-400 font-medium"},"Next level: ",-1)),oe(" "+_(b(e).getNextLevelUpgradeDescription(Fe.id)),1)])):Q("",!0)]))),128))])])])):w.value==="global"?(h(),v("div",zLe,[ke[93]||(ke[93]=a("h2",{class:"text-lg font-semibold mb-4"},"Global Upgrades",-1)),Ye(q$e)])):w.value==="cross-feature"?(h(),v("div",QLe,[ke[101]||(ke[101]=a("h2",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[a("span",{class:"i-heroicons-puzzle-piece"}),oe(" Cross-Feature Upgrades ")],-1)),a("div",KLe,[ke[100]||(ke[100]=a("h3",{class:"font-medium text-sm mb-2 text-lime-700 dark:text-lime-300"}," Honeydew from Bugs ",-1)),a("div",YLe,[b(e).hasBugHoneydewDropUpgrade?(h(),v(De,{key:1},[ke[98]||(ke[98]=a("div",{class:"flex justify-between items-center"},[a("h4",{class:"font-medium text-sm"},"Bug Honeydew Drops"),a("span",{class:"text-xs px-2 py-1 rounded bg-green-200 dark:bg-green-900 text-green-700 dark:text-green-300"}," Active ")],-1)),ke[99]||(ke[99]=a("p",{class:"text-xs my-1 opacity-85"}," Bugs defeated in Adventure mode now drop 1 honeydew each. ",-1))],64)):(h(),v(De,{key:0},[ke[96]||(ke[96]=a("h4",{class:"font-medium text-sm"},"Unlock Bug Honeydew Drops",-1)),ke[97]||(ke[97]=a("p",{class:"text-xs my-1 opacity-85"},[oe(" Allow bugs defeated in Adventure mode to drop a small amount (1) of honeydew. "),a("span",{class:"font-bold"},"Requires Adventure Mode to be unlocked.")],-1)),a("div",XLe,[ke[95]||(ke[95]=a("div",{class:"text-xs opacity-70"}," Fixed 1 honeydew per kill. No multipliers apply. ",-1)),a("button",{class:K(["text-xs px-2 py-1 rounded transition-colors",[b(e).canPurchaseBugHoneydewDropUpgrade&&b(s).isAdventureUnlocked?"bg-lime-300 hover:bg-lime-400 dark:bg-lime-700 dark:hover:bg-lime-600":"bg-lime-300/50 dark:bg-lime-700/50 opacity-50 cursor-not-allowed"]]),onClick:ft,disabled:!b(e).canPurchaseBugHoneydewDropUpgrade||!b(s).isAdventureUnlocked,title:b(s).isAdventureUnlocked?"":"Requires Adventure Mode unlocked"},[ke[94]||(ke[94]=oe(" Unlock ")),a("span",{class:K(b(d).text)},"("+_(b(i)(b(e).calculateBugHoneydewDropUpgradeCost()))+")",3)],10,JLe)])],64))])])])):Q("",!0)])]))}}),eDe=Ct(ZLe,[["__scopeId","data-v-e8a58de0"]]),tDe={class:"flex items-center justify-between mb-2"},sDe={class:"flex items-center gap-3"},nDe={class:"relative w-12 h-12 flex-shrink-0"},rDe=["src","alt"],oDe={class:"text-lg font-bold flex-grow min-w-0"},iDe={key:0,class:"text-xs text-red-600 dark:text-red-400 mb-2"},aDe={class:"text-sm mb-3 line-clamp-2"},lDe={class:"grid grid-cols-3 gap-2 mb-3"},cDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-indigo-200 dark:border-indigo-700"},uDe={class:"text-sm font-bold flex items-center"},dDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-indigo-200 dark:border-indigo-700"},mDe={class:"text-sm font-bold flex items-center"},fDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-indigo-200 dark:border-indigo-700"},pDe={class:"text-sm font-bold flex items-center"},hDe=["title"],gDe={class:"font-medium"},vDe={key:2,class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700 mb-2"},bDe={class:"text-xs text-amber-700 dark:text-amber-400 font-medium flex justify-between"},yDe={class:"h-2 bg-amber-100 dark:bg-amber-900/50 rounded-full mt-1 overflow-hidden"},_De={class:"mb-3"},xDe={class:"space-y-1"},kDe={class:"flex items-center text-sm bg-white/50 dark:bg-gray-800/50 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-700"},wDe={class:"font-medium"},EDe={key:0,class:"flex items-center text-sm bg-white/50 dark:bg-gray-800/50 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-700"},CDe={class:"font-medium"},SDe={key:1,class:"flex items-center text-sm bg-white/50 dark:bg-gray-800/50 px-2 py-1 rounded-md border border-gray-200 dark:border-gray-700"},TDe={class:"font-medium"},ADe={key:0,class:"text-xs ml-1 text-gray-500 dark:text-gray-400"},IDe={key:3},PDe={key:0,class:"ml-1 font-mono"},d5=Je({__name:"BossCard",props:{boss:{},isActive:{type:Boolean},isDefeated:{type:Boolean},isLocked:{type:Boolean}},emits:["select"],setup(t,{emit:e}){const s=t,n=kn(),r=Ht(),o=Ts(),i=q(()=>n.getBossHealthPercentage(s.boss.id)),c=q(()=>{try{return new URL(Object.assign({"../../assets/bosses/boss_ant_golem.png":aD,"../../assets/bosses/boss_ascended_ant_god.png":lD,"../../assets/bosses/boss_chrono_beetle.png":cD,"../../assets/bosses/boss_cosmic_hivemind.png":uD,"../../assets/bosses/boss_devourer_moth.png":dD,"../../assets/bosses/boss_dimensional_horror.png":mD,"../../assets/bosses/boss_galactic_devourer_ant.png":fD,"../../assets/bosses/boss_giant_spider.png":pD,"../../assets/bosses/boss_mantis_lord.png":hD,"../../assets/bosses/boss_nebula_wasp_queen.png":gD,"../../assets/bosses/boss_omega_ant.png":vD,"../../assets/bosses/boss_primordial_insectoid.png":bD,"../../assets/bosses/boss_quantum_entanglement.png":yD,"../../assets/bosses/boss_queen_bee.png":_D,"../../assets/bosses/boss_reality_weaver_spider.png":xD,"../../assets/bosses/boss_scorpion_emperor.png":kD,"../../assets/bosses/boss_slime_king.png":wD,"../../assets/bosses/boss_training_dummy.png":ED,"../../assets/bosses/boss_void_larva.png":CD})[`../../assets/bosses/${s.boss.id}.png`],import.meta.url).href}catch{return null}}),u=q(()=>n.isBossCooldownActive),d=q(()=>s.isDefeated?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-700":s.isActive?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-700":s.isLocked?"bg-gray-100 dark:bg-gray-900/30 text-gray-500 dark:text-gray-400 border-gray-200 dark:border-gray-700":u.value?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-700":"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-700"),m=q(()=>s.isDefeated?"from-green-100/50 to-green-50/50 dark:from-green-900/20 dark:to-green-800/10 border-green-200/50 dark:border-green-700/50":s.isActive?"from-amber-100/50 to-amber-50/50 dark:from-amber-900/20 dark:to-amber-800/10 border-amber-200/50 dark:border-amber-700/50":s.isLocked?"from-gray-100/50 to-gray-50/50 dark:from-gray-900/20 dark:to-gray-800/10 border-gray-200/50 dark:border-gray-700/50":"from-indigo-100/50 to-indigo-50/50 dark:from-indigo-900/20 dark:to-indigo-800/10 border-indigo-200/50 dark:border-indigo-700/50"),f=q(()=>s.isDefeated?"i-heroicons-check-circle text-green-600 dark:text-green-400":s.isActive?"i-heroicons-bolt text-amber-600 dark:text-amber-400":s.isLocked?"i-heroicons-lock-closed text-gray-500 dark:text-gray-400":u.value?"i-heroicons-clock text-red-600 dark:text-red-400":"i-heroicons-shield-exclamation text-indigo-600 dark:text-indigo-400"),p=R=>{var L,P;switch(R.type){case"bugKills":return`Kill ${be(l(R.value))} total bugs`;case"specificBugKills":{const I=((L=R.target)==null?void 0:L.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()))||"specific bugs";return`Kill ${be(l(R.value))} ${I}`}case"foodPerSecond":return`Reach ${be(l(R.value))} Food/sec`;case"bossDeath":return`Defeat ${((P=R.target)==null?void 0:P.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()).replace("Boss ",""))||"a specific boss"}`;case"none":return"Always unlocked";default:return"Unknown requirement"}},g=R=>{switch(R.type){case"bugKills":return n.getTotalBugKills()>=R.value;case"specificBugKills":return n.getBugKillCount(R.target)>=R.value;case"foodPerSecond":return r.foodPerSecond.gte(R.value);case"bossDeath":return n.isBossDefeated(R.target);case"none":return!0;default:return!1}},w=R=>{if(g(R))return"";switch(R.type){case"bugKills":return`(${be(l(n.getTotalBugKills()))} / ${be(l(R.value))})`;case"specificBugKills":return`(${be(l(n.getBugKillCount(R.target)))} / ${be(l(R.value))})`;case"foodPerSecond":return R.value&&r.foodPerSecond.gt(0)?`(${be(r.foodPerSecond)} / ${be(l(R.value))})`:`(0 / ${be(l(R.value))})`;case"bossDeath":case"none":default:return""}},C=e,E=()=>{if(!(s.isLocked||s.isActive||n.isBossCooldownActive)){if(!n.checkBossUnlockRequirements(s.boss)){console.warn("Attempted to select boss without meeting requirements",s.boss.id);return}C("select",s.boss.id)}},k=R=>{R.stopPropagation(),s.isDefeated&&(n.repeatableBossFightId===s.boss.id?n.setRepeatableBoss(null):n.setRepeatableBoss(s.boss.id))},A=q(()=>n.repeatableBossFightId===s.boss.id),S=q(()=>n.calculateBossFoodReward(s.boss).reward),T=q(()=>s.boss.reward.guaranteedItemId?o.getItem(s.boss.reward.guaranteedItemId):null);return(R,L)=>(h(),v("div",{onClick:E,class:K(["bg-gradient-to-br border rounded-xl p-3 shadow-sm transition-all duration-300 relative h-full",[m.value,!s.isLocked&&!s.isActive&&!u.value?"cursor-pointer hover:shadow-md scale-100 hover:scale-[1.02]":"",s.isActive?"shadow-md ring-2 ring-amber-300 dark:ring-amber-500":"",s.isDefeated?"opacity-80":"",s.isLocked||u.value?"opacity-70 grayscale cursor-not-allowed":""]])},[a("div",tDe,[a("div",sDe,[a("div",nDe,[c.value?(h(),v("img",{key:0,src:c.value||"",alt:s.boss.name,class:"w-full h-full object-contain"},null,8,rDe)):(h(),v("span",{key:1,class:K([f.value,"text-3xl absolute inset-0 flex items-center justify-center"])},null,2))]),a("h3",oDe,_(s.boss.name),1)]),a("div",{class:K(["text-xs px-2 py-0.5 rounded-full border",d.value])},_(s.isDefeated?"Defeated":s.isActive?"In Combat":s.isLocked?"Locked":u.value?"Cooldown":"Available"),3)]),u.value&&!s.isActive&&!s.isLocked?(h(),v("div",iDe," Cooldown: "+_(b(n).formattedCooldownTime)+" remaining ",1)):Q("",!0),a("p",aDe,_(s.boss.description),1),a("div",lDe,[a("div",cDe,[L[1]||(L[1]=a("div",{class:"text-xs text-indigo-700 dark:text-indigo-400 font-medium"},"Health",-1)),a("div",uDe,[L[0]||(L[0]=a("span",{class:"i-heroicons-heart text-indigo-600 dark:text-indigo-500 mr-1 text-xs"},null,-1)),oe(" "+_(b(be)(s.boss.maxHealth,0)),1)])]),a("div",dDe,[L[3]||(L[3]=a("div",{class:"text-xs text-indigo-700 dark:text-indigo-400 font-medium"},"Attack",-1)),a("div",mDe,[L[2]||(L[2]=a("span",{class:"i-heroicons-bolt text-indigo-600 dark:text-indigo-500 mr-1 text-xs"},null,-1)),oe(" "+_(b(be)(s.boss.damage,0)),1)])]),a("div",fDe,[L[5]||(L[5]=a("div",{class:"text-xs text-indigo-700 dark:text-indigo-400 font-medium"},"Defense",-1)),a("div",pDe,[L[4]||(L[4]=a("span",{class:"i-heroicons-shield-check text-indigo-600 dark:text-indigo-500 mr-1 text-xs"},null,-1)),oe(" "+_(b(be)(s.boss.defense,0)),1)])])]),s.isDefeated?(h(),v("button",{key:1,onClick:k,class:K(["px-3 py-1.5 rounded-lg transition-colors duration-200 flex items-center justify-center mb-3 w-full",[A.value?"bg-cyan-200 dark:bg-cyan-700 text-cyan-800 dark:text-cyan-100 hover:bg-cyan-300 dark:hover:bg-cyan-600 border border-cyan-300 dark:border-cyan-600":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600"]]),title:A.value?"Disable repeating this boss":"Set this boss to repeat automatically after cooldown"},[a("span",{class:K([A.value?"i-heroicons-arrow-path-solid":"i-heroicons-arrow-path","text-lg mr-2"])},null,2),a("span",gDe,_(A.value?"Auto-Repeat Enabled":"Enable Auto-Repeat"),1)],10,hDe)):Q("",!0),s.isActive?(h(),v("div",vDe,[a("div",bDe,[L[6]||(L[6]=a("span",null,"Boss Health",-1)),a("span",null,_(Math.round(i.value))+"%",1)]),a("div",yDe,[a("div",{class:"h-full bg-gradient-to-r from-amber-600 to-amber-500 dark:from-amber-500 dark:to-amber-400 transition-all duration-300 ease-out",style:yt({width:`${i.value}%`})},null,4)])])):Q("",!0),a("div",_De,[L[12]||(L[12]=a("h4",{class:"text-xs font-semibold mb-1 text-gray-600 dark:text-gray-400"},"Potential Rewards:",-1)),a("div",xDe,[a("div",kDe,[L[7]||(L[7]=a("span",{class:"i-fluent-food-16-filled text-green-600 dark:text-green-400 mr-1.5"},null,-1)),a("span",wDe,_(b(be)(S.value)),1),L[8]||(L[8]=a("span",{class:"text-xs ml-1 text-gray-500 dark:text-gray-400"},"(Food)",-1))]),s.boss.reward.essence&&s.boss.reward.essence.gt(0)?(h(),v("div",EDe,[L[9]||(L[9]=a("span",{class:"i-mdi-flask text-purple-600 dark:text-purple-400 mr-1.5"},null,-1)),a("span",CDe,_(b(be)(s.boss.reward.essence)),1),L[10]||(L[10]=a("span",{class:"text-xs ml-1 text-gray-500 dark:text-gray-400"},"(Essence)",-1))])):Q("",!0),T.value?(h(),v("div",SDe,[L[11]||(L[11]=a("span",{class:"i-mdi-treasure-chest text-yellow-600 dark:text-yellow-400 mr-1.5"},null,-1)),a("span",TDe,_(T.value.name),1),s.boss.reward.itemChance&&s.boss.reward.itemChance<1?(h(),v("span",ADe,"("+_(b(Lt)(s.boss.reward.itemChance))+" chance)",1)):Q("",!0)])):Q("",!0)])]),!s.isDefeated&&s.boss.unlockRequirements.length>0?(h(),v("div",IDe,[L[13]||(L[13]=a("h4",{class:"text-xs font-semibold mb-1 text-gray-600 dark:text-gray-400"},"Requirements:",-1)),(h(!0),v(De,null,Ge(s.boss.unlockRequirements,(P,I)=>(h(),v("div",{key:I},[a("div",{class:K(["flex items-center text-xs",[g(P)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]])},[a("span",{class:K(["mr-1.5 text-sm flex-shrink-0",[g(P)?"i-heroicons-check-circle-solid":"i-heroicons-x-circle-solid"]])},null,2),a("span",null,[oe(_(p(P))+" ",1),w(P)?(h(),v("span",PDe,_(w(P)),1)):Q("",!0)])],2)]))),128))])):Q("",!0)],2))}}),MDe={class:"bg-gradient-to-br from-amber-100/50 to-amber-50/50 dark:from-amber-900/20 dark:to-amber-800/10 rounded-xl p-3 shadow-md border border-amber-200/50 dark:border-amber-700/50"},$De={class:"flex items-center justify-between mb-3"},RDe={class:"text-lg font-bold flex items-center gap-1 text-amber-800 dark:text-amber-200"},LDe={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},DDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},NDe={class:"text-xs text-amber-700 dark:text-amber-400 font-medium flex justify-between"},ODe={class:"h-3 bg-amber-100 dark:bg-amber-900/50 rounded-full mt-1 overflow-hidden"},FDe={class:"text-xs text-amber-600 dark:text-amber-400 mt-1"},UDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-red-200 dark:border-red-700"},qDe={class:"text-xs text-red-700 dark:text-red-400 font-medium flex justify-between"},BDe={class:"h-3 bg-red-100 dark:bg-red-900/50 rounded-full mt-1 overflow-hidden"},VDe={class:"text-xs text-red-600 dark:text-red-400 mt-1"},HDe={class:"grid grid-cols-3 gap-2 mb-4"},GDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},jDe={class:"flex justify-between text-sm"},WDe={class:"flex items-center text-red-600 dark:text-red-400 font-medium"},zDe={class:"flex items-center text-amber-600 dark:text-amber-400 font-medium"},QDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},KDe={class:"flex justify-between text-sm"},YDe={class:"flex items-center text-red-600 dark:text-red-400 font-medium"},XDe={class:"flex items-center text-amber-600 dark:text-amber-400 font-medium"},JDe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},ZDe={class:"text-sm flex items-center"},eNe={class:"font-medium text-red-600 dark:text-red-400"},tNe={key:0,class:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg border border-red-200 dark:border-red-700 text-center"},sNe={class:"text-xs text-red-700 dark:text-red-400 flex items-center justify-center"},nNe={key:1,class:"mt-4"},rNe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},oNe={class:"font-medium"},iNe={class:"ml-1 text-gray-600 dark:text-gray-400"},aNe=Je({__name:"BossCombatCard",props:{boss:{}},setup(t){const e=t,s=kn(),n=q(()=>s.getBossHealthPercentage(e.boss.id)),r=q(()=>s.getPlayerHealthPercentage()),o=q(()=>s.currentFight?s.currentFight.currentHealth:e.boss.maxHealth),i=q(()=>{var m;return s.playerHealthDuringBossFight?s.playerHealthDuringBossFight:((m=s.playerStats)==null?void 0:m.maxHealth)||new Se(0)}),c=q(()=>{var m;return((m=s.playerStats)==null?void 0:m.maxHealth)||new Se(0)}),u=q(()=>s.isBossCooldownActive),d=q(()=>s.formattedCooldownTime);return(m,f)=>{var p,g,w;return h(),v("div",MDe,[a("div",$De,[a("h3",RDe,[f[0]||(f[0]=a("span",{class:"i-heroicons-bolt text-amber-600 dark:text-amber-400"},null,-1)),oe(" Boss Combat: "+_(e.boss.name),1)]),f[1]||(f[1]=a("div",{class:"text-xs px-2 py-0.5 rounded-full border bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-700"}," In Progress ",-1))]),a("div",LDe,[a("div",DDe,[a("div",NDe,[f[2]||(f[2]=a("span",null,"Boss Health",-1)),a("span",null,_(Math.round(n.value))+"%",1)]),a("div",ODe,[a("div",{class:"h-full bg-gradient-to-r from-amber-600 to-amber-500 dark:from-amber-500 dark:to-amber-400 transition-all duration-300 ease-out",style:yt({width:`${n.value}%`})},null,4)]),a("div",FDe,_(b(be)(o.value,0))+" / "+_(b(be)(e.boss.maxHealth,0)),1)]),a("div",UDe,[a("div",qDe,[f[3]||(f[3]=a("span",null,"Your Health",-1)),a("span",null,_(Math.round(r.value))+"%",1)]),a("div",BDe,[a("div",{class:"h-full bg-gradient-to-r from-red-600 to-red-500 dark:from-red-500 dark:to-red-400 transition-all duration-300 ease-out",style:yt({width:`${r.value}%`})},null,4)]),a("div",VDe,_(b(be)(i.value,0))+" / "+_(b(be)(c.value,0)),1)])]),a("div",HDe,[a("div",GDe,[f[7]||(f[7]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Attack",-1)),a("div",jDe,[a("div",WDe,[f[4]||(f[4]=a("span",{class:"i-heroicons-user text-xs mr-1"},null,-1)),oe(" "+_(b(be)(((p=b(s).playerStats)==null?void 0:p.damage)||new(b(Se))(0),0)),1)]),f[6]||(f[6]=a("span",{class:"text-gray-400"},"vs",-1)),a("div",zDe,[oe(_(b(be)(e.boss.damage,0))+" ",1),f[5]||(f[5]=a("span",{class:"i-heroicons-bug-ant text-xs ml-1"},null,-1))])])]),a("div",QDe,[f[11]||(f[11]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Defense",-1)),a("div",KDe,[a("div",YDe,[f[8]||(f[8]=a("span",{class:"i-heroicons-user text-xs mr-1"},null,-1)),oe(" "+_(b(be)(((g=b(s).playerStats)==null?void 0:g.defense)||new(b(Se))(0),0)),1)]),f[10]||(f[10]=a("span",{class:"text-gray-400"},"vs",-1)),a("div",XDe,[oe(_(b(be)(e.boss.defense,0))+" ",1),f[9]||(f[9]=a("span",{class:"i-heroicons-bug-ant text-xs ml-1"},null,-1))])])]),a("div",JDe,[f[13]||(f[13]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Your Regen",-1)),a("div",ZDe,[f[12]||(f[12]=a("span",{class:"i-heroicons-arrow-path text-red-600 dark:text-red-500 mr-1 text-xs"},null,-1)),a("span",eNe,_(b(be)(((w=b(s).playerStats)==null?void 0:w.regen)||new(b(Se))(0),0))+"/tick",1)])])]),u.value?(h(),v("div",tNe,[a("div",sNe,[f[14]||(f[14]=a("span",{class:"i-heroicons-clock mr-1"},null,-1)),oe(" Cooldown active: "+_(d.value)+" remaining until you can challenge another boss ",1)])])):Q("",!0),e.boss.specialAbilities&&e.boss.specialAbilities.length>0?(h(),v("div",nNe,[f[16]||(f[16]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium mb-1"},"Special Abilities",-1)),a("div",rNe,[(h(!0),v(De,null,Ge(e.boss.specialAbilities,C=>(h(),v("div",{key:C.name,class:"flex items-center text-xs mb-1 last:mb-0"},[f[15]||(f[15]=a("span",{class:"i-heroicons-sparkles text-amber-600 dark:text-amber-400 mr-1"},null,-1)),a("span",oNe,_(C.name)+":",1),a("span",iNe,_(C.type==="periodicDamage"?`Deals ${b(be)(C.value,0)} periodic damage`:C.type==="defenseBuff"?`Increases defense by ${b(be)(C.value,2)}x`:C.type==="playerDebuff"?`Reduces your damage by ${b(be)(C.value.mul(100),0)}%`:C.type),1)]))),128))])])):Q("",!0)])}}}),lNe={class:"bg-gradient-to-br from-indigo-100/50 to-indigo-50/50 dark:from-indigo-900/20 dark:to-indigo-800/10 rounded-xl p-3 shadow-md border border-indigo-200/50 dark:border-indigo-700/50"},cNe={class:"flex items-center justify-between mb-2"},uNe={class:"flex items-center"},dNe={key:0,class:"i-heroicons-arrow-down-circle text-xs mr-1"},mNe={key:1,class:"i-heroicons-pause-circle text-xs mr-1"},fNe={key:0,class:"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400"},pNe={key:1,class:"space-y-1.5"},hNe={class:"flex items-start gap-1.5"},gNe=Je({__name:"BossLogCard",setup(t){const e=kn(),s=Y(null),n=Y(!0),r=()=>{n.value&&s.value&&setTimeout(()=>{s.value&&(s.value.scrollTop=s.value.scrollHeight)},10)},o=()=>{n.value=!n.value,n.value&&r()};q(()=>(e.bossLogs.length>0&&r(),e.bossLogs.length));const i=u=>{switch(u){case"combat":return"text-amber-700 dark:text-amber-400";case"reward":return"text-emerald-700 dark:text-emerald-400";case"info":default:return"text-blue-700 dark:text-blue-400"}},c=u=>{switch(u){case"combat":return"i-heroicons-bolt";case"reward":return"i-heroicons-gift";case"info":default:return"i-heroicons-information-circle"}};return(u,d)=>(h(),v("div",lNe,[a("div",cNe,[d[0]||(d[0]=a("h3",{class:"text-lg font-bold flex items-center gap-1 text-indigo-800 dark:text-indigo-200"},[a("span",{class:"i-heroicons-chat-bubble-left-ellipsis text-indigo-600 dark:text-indigo-400"}),oe(" Combat Log ")],-1)),a("button",{onClick:o,class:K(["text-xs px-2 py-0.5 rounded-full border transition-colors",n.value?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-700":"bg-gray-100 dark:bg-gray-900/30 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700"])},[a("span",uNe,[n.value?(h(),v("span",dNe)):(h(),v("span",mNe)),oe(" "+_(n.value?"Auto-Scroll":"Paused"),1)])],2)]),a("div",{ref_key:"logContainer",ref:s,class:"h-64 overflow-y-auto bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-indigo-200 dark:border-indigo-700 scrollbar-hide"},[b(e).bossLogs.length===0?(h(),v("div",fNe,d[1]||(d[1]=[a("span",{class:"i-heroicons-document-text text-3xl mb-2 opacity-50"},null,-1),a("p",{class:"text-sm"},"Combat log is empty. Start a boss fight to see the action!",-1)]))):(h(),v("div",pNe,[(h(!0),v(De,null,Ge(b(e).bossLogs,m=>(h(),v("div",{key:m.timestamp,class:K(["text-sm p-1.5 rounded-lg border",{"bg-white dark:bg-gray-800 border-indigo-100 dark:border-indigo-800":m.type==="info","bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-800":m.type==="combat","bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800":m.type==="reward"}])},[a("div",hNe,[a("span",{class:K([[c(m.type),i(m.type)],"mt-0.5 flex-shrink-0"])},null,2),a("span",null,_(m.message),1)])],2))),128))]))],512)]))}}),vNe=Ct(gNe,[["__scopeId","data-v-bfa5379a"]]),bNe={class:"bg-gradient-to-br from-amber-100 to-amber-50 dark:from-amber-900/40 dark:to-amber-800/30 rounded-xl p-3 shadow-md"},yNe={class:"flex items-center justify-between mb-2"},_Ne={class:"text-xs bg-amber-900/30 dark:bg-amber-950/50 px-2 py-0.5 rounded-full whitespace-nowrap"},xNe={class:"w-full h-2 bg-amber-900/30 dark:bg-amber-950/50 rounded-full overflow-hidden"},kNe={class:"text-xs text-amber-600 dark:text-amber-400 mt-1"},wNe=Je({__name:"BossProgressBar",setup(t){const e=Vn();return(s,n)=>(h(),v("div",bNe,[a("div",yNe,[n[0]||(n[0]=a("h2",{class:"text-base font-bold flex items-center"},[a("span",{class:"i-heroicons-clock text-amber-700 dark:text-amber-500 mr-2"}),oe(" Boss Combat Timer ")],-1)),a("span",_Ne,_(b(e).bossTimeRemaining)+"s ",1)]),a("div",xNe,[a("div",{class:"h-full bg-gradient-to-r from-amber-600 to-amber-500 dark:from-amber-500 dark:to-amber-400 transition-all duration-100 ease-linear",style:yt({width:`${b(e).bossProgressPercentage}%`})},null,4)]),a("div",kNe,_(b(e).bossProgressPercentage)+"% ",1)]))}}),ENe={class:"bg-gradient-to-br from-amber-100 to-amber-50 dark:from-amber-900/40 dark:to-amber-800/30 rounded-xl p-3 shadow-md"},CNe={class:"flex items-center gap-4 mb-3"},SNe={class:"relative w-16 h-16"},TNe={class:"relative z-10 w-full h-full"},ANe=["src"],INe={key:1,class:"i-heroicons-user-circle text-amber-700 dark:text-amber-500 text-4xl absolute inset-0 flex items-center justify-center"},PNe={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},MNe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},$Ne={class:"text-sm font-bold flex items-center"},RNe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},LNe={class:"text-sm font-bold flex items-center"},DNe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},NNe={class:"text-sm font-bold flex items-center"},ONe={class:"bg-white/80 dark:bg-gray-800/80 p-2 rounded-lg shadow-sm border border-amber-200 dark:border-amber-700"},FNe={class:"text-sm font-bold flex items-center"},UNe=Je({__name:"PlayerStatsBossCard",setup(t){const e=kn(),{analyzeImage:s}=yw(),n=Y("#f3f4f6"),r=Y("#e5e7eb"),o=q(()=>be(e.playerStats.damage,0)),i=q(()=>be(e.playerStats.maxHealth,0)),c=q(()=>be(e.playerStats.regen,0)),u=q(()=>be(e.playerStats.defense,0)),d=q(()=>{try{return new URL("/assets/player-CETUAJX7.png",import.meta.url).href}catch{return null}});return Et(async()=>{if(d.value){const m=await s(d.value);n.value=m.backgroundColor,r.value=m.borderColor}}),(m,f)=>(h(),v("div",ENe,[a("div",CNe,[a("div",SNe,[a("div",{class:"absolute inset-0 rounded-full shadow-md border-2",style:yt({backgroundColor:n.value,borderColor:r.value})},null,4),a("div",TNe,[d.value?(h(),v("img",{key:0,src:d.value,alt:"Player",class:"w-full h-full object-contain p-1"},null,8,ANe)):(h(),v("span",INe))])]),f[0]||(f[0]=a("div",null,[a("h2",{class:"text-base font-bold text-amber-800 dark:text-amber-200"},"Player Stats"),a("p",{class:"text-xs text-amber-600 dark:text-amber-400"},"Combat statistics for boss battles")],-1))]),a("div",PNe,[a("div",MNe,[f[2]||(f[2]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Attack",-1)),a("div",$Ne,[f[1]||(f[1]=a("span",{class:"i-heroicons-bolt text-amber-600 dark:text-amber-500 mr-1 text-xs"},null,-1)),oe(" "+_(o.value),1)])]),a("div",RNe,[f[4]||(f[4]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Health",-1)),a("div",LNe,[f[3]||(f[3]=a("span",{class:"i-heroicons-heart text-amber-600 dark:text-amber-500 mr-1 text-xs"},null,-1)),oe(" "+_(i.value),1)])]),a("div",DNe,[f[6]||(f[6]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Defense",-1)),a("div",NNe,[f[5]||(f[5]=a("span",{class:"i-heroicons-shield-check text-amber-600 dark:text-amber-500 mr-1 text-xs"},null,-1)),oe(" "+_(u.value),1)])]),a("div",ONe,[f[8]||(f[8]=a("div",{class:"text-xs text-amber-700 dark:text-amber-400 font-medium"},"Regen",-1)),a("div",FNe,[f[7]||(f[7]=a("span",{class:"i-heroicons-arrow-path text-amber-600 dark:text-amber-500 mr-1 text-xs"},null,-1)),oe(" "+_(c.value),1)])])])]))}}),qNe={class:"space-y-4 px-2 sm:px-0 pb-14"},BNe={key:0,class:"bg-gradient-to-br from-amber-100 to-amber-50 dark:from-amber-900/30 dark:to-amber-800/20 rounded-xl p-6 shadow-md border border-amber-200 dark:border-amber-700/50 text-center"},VNe={key:0,class:"space-y-3"},HNe={class:"flex flex-wrap items-center justify-between gap-2 mb-2"},GNe={class:"flex items-center space-x-2"},jNe={class:"text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 px-2 py-0.5 rounded-full"},WNe={class:"flex space-x-2"},zNe={class:"flex items-center cursor-pointer"},QNe={key:2,class:"bg-gray-100 dark:bg-gray-800 rounded-xl p-6 text-center"},KNe=Je({__name:"BossPage",setup(t){const e=kn(),{showToast:s}=Us(),n=q({get:()=>e.showDefeatedBosses,set:m=>e.setShowDefeatedBosses(m)}),r=q({get:()=>e.bossGridDensity,set:m=>e.setBossGridDensity(m)}),o=q(()=>e.isBossSystemUnlocked),i=q(()=>{switch(r.value){case"compact":return"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4";case"comfortable":return"grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3";case"spacious":return"grid-cols-1 md:grid-cols-2";default:return"grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"}}),c=m=>{if(e.isBossCooldownActive){s(`You must wait ${e.formattedCooldownTime} before challenging another boss.`,"warning");return}e.startBossFight(m)},u=q(()=>{const m=e.unlockedAndAvailableBosses;return n.value?m:m.filter(f=>!e.isBossDefeated(f.id))}),d=q(()=>{const m=e.allBosses.findIndex(f=>f.id===e.highestUnlockedBossId);return m<e.allBosses.length-1?e.allBosses[m+1]:null});return Et(()=>{e.initialize()}),(m,f)=>(h(),v("div",qNe,[f[7]||(f[7]=a("h1",{class:"text-xl font-bold mb-2 flex items-center"},[a("span",{class:"i-heroicons-trophy text-amber-700 dark:text-amber-500 mr-2"}),oe(" Boss Challenges ")],-1)),o.value?(h(),v(De,{key:1},[Ye(UNe),b(e).isBossFightActive&&b(e).currentBossData?(h(),v("div",VNe,[Ye(wNe),Ye(aNe,{boss:b(e).currentBossData},null,8,["boss"])])):Q("",!0),b(e).bossLogs.length>0?(h(),Tt(vNe,{key:1})):Q("",!0),a("div",HNe,[a("div",GNe,[f[3]||(f[3]=a("h2",{class:"text-lg font-bold text-amber-800 dark:text-amber-200"}," Available Bosses ",-1)),a("div",jNe,_(u.value.length)+" "+_(u.value.length===1?"Boss":"Bosses"),1)]),a("div",WNe,[a("label",zNe,[Ut(a("input",{type:"checkbox","onUpdate:modelValue":f[0]||(f[0]=p=>n.value=p),class:"rounded border-amber-300 text-amber-600 focus:ring-amber-500 dark:border-amber-700 dark:bg-amber-900/30"},null,512),[[ln,n.value]]),f[4]||(f[4]=a("span",{class:"ml-1.5 text-sm text-amber-700 dark:text-amber-300"},"Show Defeated",-1))]),Ut(a("select",{"onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),class:"text-sm bg-white dark:bg-gray-800 border border-amber-200 dark:border-amber-700 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-amber-500"},f[5]||(f[5]=[a("option",{value:"compact"},"Compact",-1),a("option",{value:"comfortable"},"Comfortable",-1),a("option",{value:"spacious"},"Spacious",-1)]),512),[[Em,r.value]])])]),a("div",{class:K(["grid gap-3",i.value])},[(h(!0),v(De,null,Ge(u.value,p=>{var g;return h(),Tt(d5,{key:p.id,boss:p,"is-active":((g=b(e).currentFight)==null?void 0:g.bossId)===p.id,"is-defeated":b(e).isBossDefeated(p.id),"is-locked":!1,onSelect:c},null,8,["boss","is-active","is-defeated"])}),128)),d.value&&b(e).canChallengeNextBoss?(h(),Tt(d5,{key:0,boss:d.value,"is-active":!1,"is-defeated":!1,"is-locked":!0},null,8,["boss"])):Q("",!0)],2),u.value.length===0?(h(),v("div",QNe,f[6]||(f[6]=[a("p",{class:"text-gray-600 dark:text-gray-400"},"No bosses available. Check back after completing more of the game.",-1)]))):Q("",!0)],64)):(h(),v("div",BNe,f[2]||(f[2]=[a("div",{class:"flex flex-col items-center justify-center space-y-3"},[a("span",{class:"i-heroicons-lock-closed text-amber-600 dark:text-amber-400 text-5xl"}),a("h2",{class:"text-lg font-bold text-amber-800 dark:text-amber-200"},"Boss Challenges Locked"),a("p",{class:"text-amber-700 dark:text-amber-300 max-w-lg mx-auto"}," Unlock Boss Challenges from the Prestige Shop to battle powerful enemies for unique rewards. ")],-1)]))),Ye(Ha,{threshold:400})]))}}),YNe="/assets/amber_fragment-BZ9myB0h.png",XNe="/assets/ancient_pheromone-wpYQdBAT.png",JNe="/assets/ant_mandible-JztrMkWh.png",ZNe="/assets/beetle_shell-Dl1a-ZTw.png",e6e="/assets/cosmic_essence-BMRP4eF_.png",t6e="/assets/dewdrop-BrLfEEnl.png",s6e="/assets/dried_fungus-Cnf-7jc9.png",n6e="/assets/geode_shard-D5VnkQ-e.png",r6e="/assets/glowing_mushroom-Ci2qiV4o.png",o6e="/assets/ladybug_wing-Cpubz_ee.png",i6e="/assets/mantis_claw-CWexS79C.png",a6e="/assets/meteorite_fragment-D_0pW2Mg.png",l6e="/assets/pebble-CBrwlTEa.png",c6e="/assets/quantum_crystal-CzWtzkQ9.png",u6e="/assets/small_crystal-DMcL0RY0.png",d6e="/assets/spider_silk-CazbcDy4.png",m6e="/assets/tiny_leaf-DhDrYKKB.png",f6e="/assets/world_tree_seedling-CLE6sydx.png",p6e={class:"flex flex-col gap-4 lg:gap-6 max-w-screen-2xl mx-auto pb-6"},h6e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200/50 dark:border-gray-700/50 overflow-hidden"},g6e={class:"p-5"},v6e={class:"flex flex-col md:flex-row items-center justify-between gap-4 mb-4"},b6e={class:"text-lg"},y6e={class:"font-bold"},_6e={class:"font-bold"},x6e={class:"w-full mt-2 bg-gray-200 dark:bg-gray-600 rounded-full h-2.5"},k6e={class:"flex gap-2"},w6e={class:"relative"},E6e=["value"],C6e={key:0,class:"i-heroicons-eye"},S6e={key:1,class:"i-heroicons-eye-slash"},T6e={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},A6e={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700"},I6e={class:"space-y-1"},P6e={class:"flex justify-between"},M6e={class:"font-medium"},$6e={class:"flex justify-between"},R6e={class:"font-medium"},L6e={class:"flex justify-between"},D6e={class:"font-medium"},N6e={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700"},O6e={class:"space-y-1"},F6e={class:"flex justify-between"},U6e={class:"font-medium"},q6e={class:"flex justify-between"},B6e={class:"font-medium"},V6e={class:"flex justify-between"},H6e={class:"font-medium"},G6e={class:"flex justify-between"},j6e={class:"font-medium"},W6e={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700"},z6e={class:"space-y-1"},Q6e={class:"font-medium"},K6e={key:1,class:"text-gray-500 dark:text-gray-400"},Y6e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200/50 dark:border-gray-700/50 overflow-hidden"},X6e={class:"border-b border-gray-200 dark:border-gray-700"},J6e={class:"flex overflow-x-auto scrollbar-hide"},Z6e=["onClick"],eOe={class:"p-5"},tOe={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},sOe={class:"p-4"},nOe={class:"flex items-center justify-between mb-2"},rOe={class:"flex flex-col mr-1 min-w-0"},oOe={key:0,class:"text-xs font-medium text-gray-600 dark:text-gray-400"},iOe={class:"flex items-center gap-1 shrink-0"},aOe={key:0,class:"i-heroicons-lock-closed text-gray-500 dark:text-gray-400"},lOe={class:"flex justify-center mb-3"},cOe={class:"w-16 h-16 flex items-center justify-center rounded-lg"},uOe=["src","alt"],dOe={class:"mb-3"},mOe={class:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1"},fOe={class:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"},pOe={class:"border-t border-gray-200 dark:border-gray-600 pt-2"},hOe={class:"grid grid-cols-1 gap-2"},gOe={key:0,class:"text-xs space-y-1"},vOe={key:0,class:"flex justify-between"},bOe={key:1,class:"flex justify-between"},yOe={key:2,class:"flex justify-between"},_Oe={key:3,class:"flex justify-between"},xOe={key:4,class:"flex justify-between"},kOe={key:5,class:"flex justify-between"},wOe={key:6,class:"flex justify-between"},EOe={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},COe={class:"mt-2"},SOe={key:0,class:"text-xs space-y-0.5"},TOe={class:"px-1.5 py-0.5 rounded bg-gray-200 dark:bg-gray-700"},AOe={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},IOe={class:"italic"},POe={key:1,class:"text-center py-12 text-gray-500 dark:text-gray-400"},MOe=Je({__name:"CollectiblesView",setup(t){const e=uf(),s=Hr();q(()=>e.filteredAndSortedCollection);const n=q(()=>e.getAllBoosts()),r=q(()=>Object.values(Xi).map(U=>{const M=e.getCollectibleInstance(U.id);return{...U,isUnlocked:!!M}})),o=[{id:"all",name:"All Categories"},{id:"insect",name:"Insects"},{id:"plant",name:"Plants"},{id:"mineral",name:"Minerals"},{id:"artifact",name:"Artifacts"}],i=[{id:"rarity",name:"Rarity (Highest First)"},{id:"level",name:"Level (Highest First)"},{id:"name",name:"Name (A-Z)"},{id:"recently",name:"Recently Added"}],c=q({get:()=>e.selectedCollectibleFilter,set:U=>e.selectedCollectibleFilter=U}),u=q({get:()=>e.selectedCollectibleSort,set:U=>e.selectedCollectibleSort=U}),d=q({get:()=>e.showOnlyUnlocked,set:U=>e.showOnlyUnlocked=U}),m=q(()=>r.value.filter(U=>!(c.value!=="all"&&U.category!==c.value||d.value&&!U.isUnlocked))),f=q(()=>{const U=[...m.value];switch(u.value){case"rarity":const M={divine:7,mythic:6,legendary:5,epic:4,rare:3,uncommon:2,common:1};U.sort((x,$)=>{const Z=(M[$.rarity]||0)-(M[x.rarity]||0);return Z!==0?Z:x.isUnlocked===$.isUnlocked?0:x.isUnlocked?-1:1});break;case"name":U.sort((x,$)=>x.name.localeCompare($.name));break;case"level":U.sort((x,$)=>{const Z=e.getCollectibleInstance(x.id),me=e.getCollectibleInstance($.id);return x.isUnlocked!==$.isUnlocked?x.isUnlocked?-1:1:!Z&&!me?0:Z?me?me.level.cmp(Z.level):-1:1});break;case"recently":U.sort((x,$)=>x.isUnlocked===$.isUnlocked?0:x.isUnlocked?-1:1);break}return U}),p=U=>{const M=s.getBugsByCollectibleId(U);return M.length?M.map(x=>({id:x.id,name:x.name,dropChance:s.getCollectibleDropChance(U,x.id)})):[]},g=U=>U<.001?`${(U*100).toExponential(2)}%`:`${(U*100).toFixed(2)}%`,w=U=>{c.value=U},C=U=>{u.value=U},E=U=>`+${U.toFixed(2)}%`,k=new Map,A=U=>{if(k.has(U))return k.get(U);const M=e.getCollectible(U);if(!M)return null;const x=e.getCollectibleInstance(U);if(!x){const me={collectible:M,instance:null,boosts:M.boosts};return k.set(U,me),me}const $=e.getCollectibleBoosts(U),Z={collectible:M,instance:x,boosts:$};return k.set(U,Z),Z},S=U=>{const M=e.getCollectibleInstance(U);return M?e.formatXpProgress(M.xp,M.maxXp):"0%"},T=q(()=>E(n.value.global)),R=q(()=>E(n.value.epGain)),L=q(()=>E(n.value.pheromoneGain)),P=q(()=>{const U=n.value.combatStats;return{damage:U.damage?`+${U.damage.toFixed(0)}`:"+0",health:U.health?`+${U.health.toFixed(0)}`:"+0",defense:U.defense?`+${U.defense.toFixed(0)}`:"+0",regen:U.regen?`+${U.regen.toFixed(0)}`:"+0"}}),I=(U,M,x="+0%")=>{if(!U)return x;let $=U;for(const Z of M){if($==null)return x;$=$[Z]}return typeof $=="number"?`+${$.toFixed(M[M.length-1]==="global"?2:M.includes("combatStats")?0:2)}%`:x},D=U=>{try{return new URL(Object.assign({"../assets/collectibles/amber_fragment.png":YNe,"../assets/collectibles/ancient_pheromone.png":XNe,"../assets/collectibles/ant_mandible.png":JNe,"../assets/collectibles/beetle_shell.png":ZNe,"../assets/collectibles/cosmic_essence.png":e6e,"../assets/collectibles/dewdrop.png":t6e,"../assets/collectibles/dried_fungus.png":s6e,"../assets/collectibles/geode_shard.png":n6e,"../assets/collectibles/glowing_mushroom.png":r6e,"../assets/collectibles/ladybug_wing.png":o6e,"../assets/collectibles/mantis_claw.png":i6e,"../assets/collectibles/meteorite_fragment.png":a6e,"../assets/collectibles/pebble.png":l6e,"../assets/collectibles/quantum_crystal.png":c6e,"../assets/collectibles/small_crystal.png":u6e,"../assets/collectibles/spider_silk.png":d6e,"../assets/collectibles/tiny_leaf.png":m6e,"../assets/collectibles/world_tree_seedling.png":f6e})[`../assets/collectibles/${U}.png`],import.meta.url).href}catch{return}};return(U,M)=>(h(),v("div",p6e,[a("div",h6e,[M[19]||(M[19]=a("div",{class:"p-5 border-b border-gray-200 dark:border-gray-700"},[a("h1",{class:"text-2xl font-bold"},"Collectibles")],-1)),a("div",g6e,[a("div",v6e,[a("div",null,[M[7]||(M[7]=a("div",{class:"text-amber-600 dark:text-amber-300 text-sm font-semibold uppercase tracking-wider mb-1"},"Collection Progress",-1)),a("p",b6e,[a("span",y6e,_(b(e).collectionCount),1),M[4]||(M[4]=oe(" / ")),a("span",null,_(b(e).totalCollectibles),1),M[5]||(M[5]=oe(" collectibles (")),a("span",_6e,_(b(e).collectionCompletion)+"%",1),M[6]||(M[6]=oe(" complete) "))]),a("div",x6e,[a("div",{class:"bg-amber-500 h-2.5 rounded-full",style:yt(`width: ${b(e).collectionCompletion}%`)},null,4)])]),a("div",k6e,[a("div",w6e,[Ut(a("select",{"onUpdate:modelValue":M[0]||(M[0]=x=>u.value=x),onChange:M[1]||(M[1]=x=>{var $;return C((($=x.target)==null?void 0:$.value)||"rarity")}),class:"px-4 py-2 pr-10 border rounded-lg bg-white dark:bg-gray-700 focus:ring-amber-500 focus:border-amber-500 appearance-none cursor-pointer"},[(h(),v(De,null,Ge(i,x=>a("option",{key:x.id,value:x.id},_(x.name),9,E6e)),64))],544),[[Em,u.value]]),M[8]||(M[8]=a("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[a("span",{class:"i-heroicons-chevron-down text-gray-500"})],-1))]),a("button",{onClick:M[2]||(M[2]=x=>d.value=!d.value),class:K(["px-4 py-2 border rounded-lg flex items-center gap-2 transition-colors",d.value?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"])},[d.value?(h(),v("span",S6e)):(h(),v("span",C6e)),a("span",null,_(d.value?"Show All":"Show Unlocked"),1)],2)])]),a("div",T6e,[a("div",A6e,[M[12]||(M[12]=a("h3",{class:"font-semibold text-amber-800 dark:text-amber-300 mb-2"},"Production Boosts",-1)),a("div",I6e,[a("div",P6e,[M[9]||(M[9]=a("span",null,"Global:",-1)),a("span",M6e,_(T.value),1)]),a("div",$6e,[M[10]||(M[10]=a("span",null,"EP Gain:",-1)),a("span",R6e,_(R.value),1)]),a("div",L6e,[M[11]||(M[11]=a("span",null,"Pheromone Gain:",-1)),a("span",D6e,_(L.value),1)])])]),a("div",N6e,[M[17]||(M[17]=a("h3",{class:"font-semibold text-amber-800 dark:text-amber-300 mb-2"},"Combat Stats",-1)),a("div",O6e,[a("div",F6e,[M[13]||(M[13]=a("span",null,"Damage:",-1)),a("span",U6e,_(P.value.damage),1)]),a("div",q6e,[M[14]||(M[14]=a("span",null,"Health:",-1)),a("span",B6e,_(P.value.health),1)]),a("div",V6e,[M[15]||(M[15]=a("span",null,"Defense:",-1)),a("span",H6e,_(P.value.defense),1)]),a("div",G6e,[M[16]||(M[16]=a("span",null,"Regen:",-1)),a("span",j6e,_(P.value.regen),1)])])]),a("div",W6e,[M[18]||(M[18]=a("h3",{class:"font-semibold text-amber-800 dark:text-amber-300 mb-2"},"Specific Generator Boosts",-1)),a("div",z6e,[Object.keys(n.value.specificGenerator).length>0?(h(!0),v(De,{key:0},Ge(n.value.specificGenerator,(x,$)=>(h(),v("div",{key:$,class:"flex justify-between"},[a("span",null,_($)+":",1),a("span",Q6e,"+"+_(x.toFixed(2))+"%",1)]))),128)):(h(),v("p",K6e,"No specific generator boosts"))])])])])]),a("div",Y6e,[a("div",X6e,[a("div",J6e,[(h(),v(De,null,Ge(o,x=>a("button",{key:x.id,onClick:$=>w(x.id),class:K(["px-6 py-3 text-sm font-medium whitespace-nowrap focus:outline-none transition-colors relative",[c.value===x.id?"text-amber-600 dark:text-amber-300 border-b-2 border-amber-500":"text-gray-500 dark:text-gray-400 hover:text-amber-500 dark:hover:text-amber-400"]])},_(x.name),11,Z6e)),64))])]),a("div",eOe,[f.value.length>0?(h(),v("div",tOe,[(h(!0),v(De,null,Ge(f.value,x=>{var $,Z,me,re,J,le,se,z,ce,pe,_e,Ee,Ue,ze,Re,$e,Ce,Oe,ve,fe;return h(),v("div",{key:x.id,class:K(["border rounded-xl overflow-hidden transition-all duration-200 shadow-sm hover:shadow-md",[x.isUnlocked?b(e).getRarityBackground(x.rarity):"bg-gray-100 dark:bg-gray-700 border-dashed",x.isUnlocked?"":"opacity-70 hover:opacity-80"]])},[a("div",sOe,[a("div",nOe,[a("div",rOe,[a("h3",{class:K(["font-bold text-lg truncate",x.isUnlocked?b(e).getRarityColor(x.rarity):"text-gray-500 dark:text-gray-400"])},_((x.isUnlocked,x.name)),3),x.isUnlocked?(h(),v("div",oOe," Level "+_(((Z=($=A(x.id))==null?void 0:$.instance)==null?void 0:Z.level.toString())||"1"),1)):Q("",!0)]),a("div",iOe,[a("span",{class:K(["inline-block text-2xs px-2 py-0.5 rounded-full",x.isUnlocked?{"bg-gray-300 text-gray-800":x.rarity==="common","bg-green-300 text-green-800":x.rarity==="uncommon","bg-blue-300 text-blue-800":x.rarity==="rare","bg-purple-300 text-purple-800":x.rarity==="epic","bg-amber-300 text-amber-800":x.rarity==="legendary","bg-pink-300 text-pink-800":x.rarity==="mythic","bg-yellow-300 text-yellow-800":x.rarity==="divine"}:"bg-gray-300 text-gray-800"])},_(x.rarity.charAt(0).toUpperCase()+x.rarity.slice(1)),3),x.isUnlocked?Q("",!0):(h(),v("span",aOe))])]),a("div",lOe,[a("div",cOe,[x.isUnlocked&&D(x.id)?(h(),v("img",{key:0,src:D(x.id),alt:x.name,class:"w-14 h-14 object-contain",style:{"image-rendering":"pixelated"}},null,8,uOe)):(h(),v("span",{key:1,class:K(["i-heroicons-photo text-3xl",x.isUnlocked?b(e).getRarityColor(x.rarity):"text-gray-400 dark:text-gray-500"])},null,2))])]),a("p",{class:K(["text-sm mb-3",{"text-gray-500 dark:text-gray-400":!x.isUnlocked}])},_(x.isUnlocked?x.description:"???"),3),a("div",dOe,[a("div",mOe,[M[20]||(M[20]=a("span",null,"Progress",-1)),a("span",null,_(x.isUnlocked?S(x.id):"0%"),1)]),a("div",fOe,[x.isUnlocked?(h(),v("div",{key:0,class:"bg-amber-500 dark:bg-amber-600 h-2 rounded-full",style:yt(`width: ${b(e).getLevelProgress(x.id)}%`)},null,4)):Q("",!0)])]),a("div",pOe,[a("div",hOe,[a("div",null,[a("div",{class:K(["font-semibold text-sm mb-1",{"text-gray-500 dark:text-gray-400":!x.isUnlocked}])}," Boosts ",2),x.isUnlocked?(h(),v("div",gOe,[((re=(me=A(x.id))==null?void 0:me.boosts)==null?void 0:re.global)!==void 0?(h(),v("div",vOe,[M[21]||(M[21]=a("span",null,"Global:",-1)),a("span",null,_(I(A(x.id),["boosts","global"])),1)])):Q("",!0),((le=(J=A(x.id))==null?void 0:J.boosts)==null?void 0:le.epGain)!==void 0?(h(),v("div",bOe,[M[22]||(M[22]=a("span",null,"EP Gain:",-1)),a("span",null,_(I(A(x.id),["boosts","epGain"])),1)])):Q("",!0),((z=(se=A(x.id))==null?void 0:se.boosts)==null?void 0:z.pheromoneGain)!==void 0?(h(),v("div",yOe,[M[23]||(M[23]=a("span",null,"Pheromone:",-1)),a("span",null,_(I(A(x.id),["boosts","pheromoneGain"])),1)])):Q("",!0),(_e=(pe=(ce=A(x.id))==null?void 0:ce.boosts)==null?void 0:pe.combatStats)!=null&&_e.damage?(h(),v("div",_Oe,[M[24]||(M[24]=a("span",null,"Damage:",-1)),a("span",null,_(I(A(x.id),["boosts","combatStats","damage"])),1)])):Q("",!0),(ze=(Ue=(Ee=A(x.id))==null?void 0:Ee.boosts)==null?void 0:Ue.combatStats)!=null&&ze.health?(h(),v("div",xOe,[M[25]||(M[25]=a("span",null,"Health:",-1)),a("span",null,_(I(A(x.id),["boosts","combatStats","health"])),1)])):Q("",!0),(Ce=($e=(Re=A(x.id))==null?void 0:Re.boosts)==null?void 0:$e.combatStats)!=null&&Ce.defense?(h(),v("div",kOe,[M[26]||(M[26]=a("span",null,"Defense:",-1)),a("span",null,_(I(A(x.id),["boosts","combatStats","defense"])),1)])):Q("",!0),(fe=(ve=(Oe=A(x.id))==null?void 0:Oe.boosts)==null?void 0:ve.combatStats)!=null&&fe.regen?(h(),v("div",wOe,[M[27]||(M[27]=a("span",null,"Regen:",-1)),a("span",null,_(I(A(x.id),["boosts","combatStats","regen"])),1)])):Q("",!0)])):(h(),v("div",EOe,M[28]||(M[28]=[a("p",null,"??? (Unlock to reveal)",-1)])))]),a("div",COe,[a("div",{class:K(["font-semibold text-sm mb-1",x.isUnlocked?"":"text-gray-500 dark:text-gray-400"])}," Sources ",2),p(x.id).length>0?(h(),v("div",SOe,[(h(!0),v(De,null,Ge(p(x.id),X=>(h(),v("div",{key:X.id,class:K(["flex justify-between items-center py-0.5",x.isUnlocked?"":"text-gray-500 dark:text-gray-400"])},[a("span",null,_(X.name),1),a("span",TOe,_(g(X.dropChance)),1)],2))),128))])):(h(),v("div",AOe,[a("p",IOe,_(x.isUnlocked?"No known sources":"This collectible is from a special source."),1)]))])])])])],2)}),128))])):(h(),v("div",POe,[M[29]||(M[29]=a("div",{class:"i-heroicons-folder-open text-5xl mx-auto mb-4"},null,-1)),M[30]||(M[30]=a("p",{class:"text-xl"},"No collectibles matching your filter criteria.",-1)),a("button",{onClick:M[3]||(M[3]=x=>{c.value="all",d.value=!1}),class:"mt-4 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors"}," Show All ")]))])])]))}}),$Oe=Ct(MOe,[["__scopeId","data-v-e65a2d41"]]);function ROe(){const t=Fr();function e(){t.tick()}function s(d){return be(d,2)}function n(d){return`+${d.sub(1).mul(100).toFixed(1)}%`}function r(){return t.activeBoosts}function o(){return t.isAtHome}function i(){return t.playerPosition.moving}function c(){return t.getBoostMultiplier("neurotrail_steps")}function u(){return t.stepsPerTick}return{processTick:e,formatBoost:s,formatGrowthRate:n,getActiveBoosts:r,isAtHome:o,isMoving:i,getStepsBoostMultiplier:c,getStepsPerTick:u}}const LOe={class:"flex items-center mb-1"},DOe={class:"font-bold text-gray-800 dark:text-gray-100"},NOe={class:"text-xs text-gray-600 dark:text-gray-400"},OOe={key:0,class:"flex items-center"},FOe={key:1,class:"flex items-center"},UOe={key:2},qOe={key:0,class:"mt-2 border-t border-gray-100 dark:border-gray-700 pt-2"},BOe={class:"flex flex-wrap gap-1"},VOe={key:1,class:"mt-2 text-xs flex items-center"},HOe={class:"text-gray-600 dark:text-gray-400"},GOe={key:2,class:"mt-2 text-xs flex items-center"},jOe=Je({__name:"NeuroNodeTooltip",props:{node:{},anchorEl:{},scrollContainer:{}},setup(t){const e=t,s=Fr();Vn();const n=Y(null),r=Y({top:0,left:0}),o=Y("top"),i=()=>{if(!e.anchorEl||!n.value||!e.scrollContainer)return;const f=e.anchorEl.getBoundingClientRect(),p=n.value.getBoundingClientRect(),g=e.scrollContainer.getBoundingClientRect(),w=e.scrollContainer;if(p.width===0||p.height===0){vs(()=>{e.node&&e.anchorEl&&i()});return}const C=10,E=f.top-g.top+w.scrollTop,k=f.left-g.left+w.scrollLeft,A=k+f.width,S=E+f.height,T=w.scrollWidth,R=w.scrollHeight,L=w.scrollTop,P=w.scrollLeft,I=L+g.height,D=P+g.width,U=E-L,M=D-A,x=I-S,$=k-P,Z=[{dir:"right",space:M,needed:p.width},{dir:"left",space:$,needed:p.width},{dir:"bottom",space:x,needed:p.height},{dir:"top",space:U,needed:p.height}];let me="bottom",re=-1/0;for(const ce of Z)ce.space>=ce.needed+C&&ce.space>re&&(re=ce.space,me=ce.dir);if(re===-1/0){const ce=Z.find(pe=>pe.space>=pe.needed+C);ce&&(me=ce.dir)}o.value=me;let J=0,le=0;switch(o.value){case"right":J=E+f.height/2-p.height/2,le=A+C;break;case"left":J=E+f.height/2-p.height/2,le=k-p.width-C;break;case"bottom":J=S+C,le=k+f.width/2-p.width/2;break;case"top":default:J=E-p.height-C,le=k+f.width/2-p.width/2;break}const se=Math.max(C,Math.min(le,T-p.width-C)),z=Math.max(C,Math.min(J,R-p.height-C));r.value={top:z,left:se}};dt(()=>[e.node,e.anchorEl],async([f,p])=>{f&&p&&(await vs(),i())},{immediate:!0,deep:!0}),Et(async()=>{e.node&&e.anchorEl&&(await vs(),i())});const c=q(()=>{if(!e.node)return{value:0,type:"none"};const f=e.node,p=s.playerPosition.currentNodeId||"queens_core";if(p===f.id)return{value:0,type:"current"};const g=s.nodes.find(C=>C.id===p);if(g){const C=g.connections.find(E=>E.nodeId===f.id);if(C)return{value:C.distance,type:"direct"}}const w=s.getPathToDestination(f.id);if(w&&w.length>1){let C=0;for(let E=0;E<w.length-1;E++){const k=s.nodes.find(S=>S.id===w[E]),A=k==null?void 0:k.connections.find(S=>S.nodeId===w[E+1]);A&&(C+=A.distance)}return{value:C,type:"path",nodeCount:w.length}}return{value:f.distance,type:"legacy"}}),u=q(()=>{var f;return((f=e.node)==null?void 0:f.tasks)&&e.node.tasks.length>0}),d=q(()=>{var f;return(f=e.node)!=null&&f.tasks?e.node.tasks.some(p=>!p.completed):!1}),m=()=>{if(!e.node||!e.node.tasks)return[];const f=e.node.tasks.filter(p=>p.completed).reduce((p,g)=>{const w=g.reward.appliesTo,C=typeof g.reward.value=="string"?new Se(g.reward.value):g.reward.value;return p[w]||(p[w]=new Se(1)),p[w]=p[w].add(C.sub(1)),p},{});return Object.entries(f).map(([p,g])=>({type:p,value:g.toFixed(1)}))};return(f,p)=>(h(),Tt(or,{name:"tooltip-fade"},{default:Rt(()=>[f.node?(h(),v("div",{key:0,ref_key:"tooltipRef",ref:n,class:K(["absolute z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3 max-w-xs tooltip-panel",`tooltip-${o.value}`]),style:yt({top:`${r.value.top}px`,left:`${r.value.left}px`})},[p[5]||(p[5]=a("div",{class:"tooltip-arrow"},null,-1)),a("div",LOe,[a("span",{class:K([f.node.icon,"mr-2 text-lg flex-shrink-0"])},null,2),a("h5",DOe,_(f.node.name),1)]),a("p",NOe,[d.value?(h(),v("span",OOe,p[0]||(p[0]=[a("span",{class:"i-mdi-check-circle-outline w-3 h-3 mr-1 text-blue-500 dark:text-blue-400"},null,-1),oe(" Click to view available tasks and rewards ")]))):u.value?(h(),v("span",FOe,p[1]||(p[1]=[a("span",{class:"i-mdi-checkbox-marked-circle-outline w-3 h-3 mr-1 text-emerald-500 dark:text-emerald-400"},null,-1),oe(" All tasks completed ")]))):(h(),v("span",UOe," Click to view node details "))]),f.node.tasks&&f.node.tasks.some(g=>g.completed)?(h(),v("div",qOe,[p[2]||(p[2]=a("p",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Active Boosts:",-1)),a("div",BOe,[(h(!0),v(De,null,Ge(m(),g=>(h(),v("div",{key:g.type,class:K(["px-1.5 py-0.5 rounded-full text-[10px] font-medium flex items-center",{"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300":g.type.includes("damage"),"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":g.type.includes("food")||g.type.includes("worker"),"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300":g.type.includes("steps"),"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":g.type.includes("ep"),"bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300":g.type.includes("pheromone"),"bg-gray-100 dark:bg-gray-900/40 text-gray-700 dark:text-gray-300":!["damage","food","worker","steps","ep","pheromone"].some(w=>g.type.includes(w))}])},_(g.type)+": "+_(g.value)+"x ",3))),128))])])):Q("",!0),c.value.type!=="current"?(h(),v("div",VOe,[p[3]||(p[3]=a("span",{class:"i-mdi-map-marker-distance w-3 h-3 mr-1 text-amber-500 dark:text-amber-400"},null,-1)),a("span",HOe,_(c.value.value)+" steps ",1)])):(h(),v("div",GOe,p[4]||(p[4]=[a("span",{class:"i-mdi-map-marker w-3 h-3 mr-1 text-emerald-500 dark:text-emerald-400"},null,-1),a("span",{class:"text-emerald-600 dark:text-emerald-400"}," You are here ",-1)])))],6)):Q("",!0)]),_:1}))}}),WOe=Ct(jOe,[["__scopeId","data-v-4e70a021"]]),zOe={class:"flex flex-col gap-4"},QOe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700"},KOe={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},YOe={class:"flex gap-2 flex-wrap justify-center"},XOe={class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex gap-1 border border-gray-200 dark:border-gray-700"},JOe={class:"text-xs ml-1"},ZOe={key:0,class:"bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm rounded-md shadow-md p-1 flex border border-gray-200 dark:border-gray-700"},eFe=["aria-label","title"],tFe={key:0,class:"i-mdi-fullscreen w-4 h-4"},sFe={key:1,class:"i-mdi-fullscreen-exit w-4 h-4"},nFe={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},rFe={class:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700 relative"},oFe={class:"grid-lines"},iFe=["y1","y2"],aFe=["x1","x2"],lFe={class:"node-connections"},cFe=["x1","y1","x2","y2"],uFe={key:0,class:"active-path"},dFe=["x1","y1","x2","y2"],mFe={class:"neural-nodes"},fFe=["transform","onClick","onMouseenter"],pFe={x:"-10",y:"-10",width:"20",height:"20",class:"pointer-events-none"},hFe={xmlns:"http://www.w3.org/1999/xhtml",class:"w-full h-full flex items-center justify-center"},gFe={y:"25","text-anchor":"middle",class:"text-[10px] font-semibold fill-current text-gray-700 dark:text-gray-300 pointer-events-none"},vFe=["transform"],bFe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700"},yFe={class:"mb-4"},_Fe={class:"bg-gray-50 dark:bg-gray-900/50 rounded-md p-3 border border-gray-200 dark:border-gray-700"},xFe={key:0,class:"flex items-center mb-2"},kFe={class:"text-sm text-gray-700 dark:text-gray-300"},wFe={class:"font-semibold"},EFe={key:1,class:"flex items-center mb-2"},CFe={class:"text-sm text-gray-700 dark:text-gray-300"},SFe={class:"font-semibold"},TFe={class:"flex flex-col mb-2 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-md"},AFe={class:"flex items-center"},IFe={class:"text-xs text-blue-800 dark:text-blue-200"},PFe={key:0,class:"flex items-center mt-1 pl-6"},MFe={class:"text-xs text-green-700 dark:text-green-300"},$Fe={key:2,class:"flex flex-col gap-2 bg-amber-50 dark:bg-amber-900/20 p-2 rounded-md"},RFe={class:"flex items-center"},LFe={class:"text-xs text-amber-800 dark:text-amber-200"},DFe={key:0,class:"flex items-center"},NFe={class:"text-xs text-amber-800 dark:text-amber-200"},OFe={key:1,class:"flex items-center"},FFe={class:"text-xs text-amber-800 dark:text-amber-200"},UFe={class:"flex items-center text-xs text-amber-800 dark:text-amber-200 border-t border-amber-200 dark:border-amber-700 pt-1 mt-1"},qFe={key:3,class:"flex flex-col bg-emerald-50 dark:bg-emerald-900/20 p-2 rounded-md"},BFe={class:"flex items-center mb-2"},VFe={class:"text-sm font-medium text-emerald-800 dark:text-emerald-200"},HFe={key:0,class:"mb-2"},GFe={class:"space-y-1.5 pl-1"},jFe={class:"flex items-center"},WFe={class:"text-xs"},zFe={key:0,class:"text-emerald-600 dark:text-emerald-400"},QFe={key:1,class:"text-gray-500 dark:text-gray-400"},KFe={key:4,class:"flex flex-col bg-blue-50 dark:bg-blue-900/20 p-2 rounded-md"},YFe={class:"mt-4"},XFe={class:"bg-gray-50 dark:bg-gray-900/50 rounded-md p-3 border border-gray-200 dark:border-gray-700"},JFe={class:"space-y-2"},ZFe=["onClick"],eUe={class:"flex items-center"},tUe={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},sUe={class:"flex items-center"},nUe={class:"text-sm font-medium text-purple-600 dark:text-purple-400"},rUe={key:0,class:"pl-6 pr-2 py-1 mt-1 text-xs border-l-2 border-purple-200 dark:border-purple-800"},oUe={class:"text-gray-600 dark:text-gray-400"},iUe={class:"font-medium text-purple-600 dark:text-purple-400"},aUe={key:0,class:"text-gray-500 dark:text-gray-400 italic py-1"},lUe={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400 italic p-2"},cUe={class:"flex flex-col gap-2"},uUe=["disabled"],dUe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700"},mUe={class:"flex items-center justify-between mb-4"},fUe={key:0,class:"flex gap-2"},pUe={class:"flex items-center gap-1"},hUe=["value"],gUe=["disabled"],vUe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},bUe=["onClick"],yUe={class:"flex items-start mb-2"},_Ue={class:"flex-grow"},xUe={class:"flex items-center flex-wrap"},kUe={class:"font-semibold text-gray-800 dark:text-gray-200"},wUe={key:0,class:"flex ml-2 gap-1"},EUe=["title"],CUe={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},SUe={key:0,class:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700"},TUe={class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex justify-between"},AUe={class:"space-y-1.5"},IUe={class:"flex items-center text-xs"},PUe={class:"text-xs"},MUe={class:"p-4 sm:p-6 pb-2 border-b border-amber-200 dark:border-amber-700"},$Ue={class:"flex items-center mb-2"},RUe={class:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100"},LUe={key:0,class:"ml-3 text-xs font-medium px-1.5 py-0.5 rounded bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300"},DUe={key:1,class:"ml-3 text-xs font-medium px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300"},NUe={class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},OUe={class:"flex flex-col sm:flex-row overflow-y-auto flex-grow px-4 sm:px-6 py-3"},FUe={class:"flex-grow pr-0 sm:pr-4"},UUe={key:0,class:"mb-4"},qUe={class:"space-y-3"},BUe={class:"flex justify-between items-center mb-2 flex-wrap"},VUe={class:"font-medium text-gray-800 dark:text-gray-200"},HUe={key:0,class:"text-xs px-1.5 py-0.5 rounded bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300"},GUe={key:1,class:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300"},jUe={key:2,class:"text-xs px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300"},WUe={class:"text-sm text-gray-600 dark:text-gray-400 mb-2 break-words"},zUe={class:"flex flex-col gap-1 mb-2"},QUe={class:"flex justify-between items-center text-xs flex-wrap"},KUe={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},YUe={class:"text-xs mb-3 flex items-center"},XUe=["disabled","onClick"],JUe={key:1,class:"text-xs text-center text-emerald-600 dark:text-emerald-400"},ZUe={key:2,class:"text-xs text-center text-amber-600 dark:text-amber-400"},e8e={class:"text-left sm:text-right flex-shrink-0 w-full sm:w-auto sm:max-w-[180px] mt-4 sm:mt-0 sm:border-l sm:border-gray-200 sm:dark:border-gray-700 sm:pl-4 hidden sm:block"},t8e={key:0,class:"text-sm font-semibold flex sm:justify-end items-center"},s8e={class:"text-amber-600 dark:text-amber-400"},n8e={key:1,class:"text-sm"},r8e={class:"flex sm:justify-end items-center"},o8e={class:"text-gray-700 dark:text-gray-300"},i8e={class:"p-4 sm:p-6 pt-3 border-t border-amber-200 dark:border-amber-700"},a8e={class:"mb-3"},l8e={class:"flex flex-wrap gap-1"},c8e={key:0,class:"text-sm mb-4"},u8e={class:"flex items-center"},d8e={class:"ml-1 text-gray-600 dark:text-gray-400"},m8e={key:0,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5 ml-4"},f8e={class:"flex items-center"},p8e={class:"sm:hidden border-t border-gray-200 dark:border-gray-700 pt-3 mb-3"},h8e={key:0,class:"text-sm font-semibold flex items-center"},g8e={class:"text-amber-600 dark:text-amber-400"},v8e={key:1,class:"text-sm"},b8e={class:"flex items-center"},y8e={class:"text-gray-700 dark:text-gray-300"},_8e={class:"flex flex-col sm:flex-row sm:justify-end gap-2"},x8e=["disabled"],k8e={class:"flex items-center justify-center"},w8e={key:1,class:"px-3 py-1.5 rounded text-sm font-semibold w-full sm:w-auto text-center bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400"},E8e={key:2,class:"px-3 py-1.5 rounded text-sm font-semibold w-full sm:w-auto text-center bg-emerald-200 dark:bg-emerald-800/50 text-emerald-700 dark:text-emerald-300"},m5=20,C8e=Je({__name:"NeurotrailsPage",setup(t){const e=Fr(),s=Vn(),{showToast:n}=Us(),{formatBoost:r,getStepsBoostMultiplier:o}=ROe(),i=Y(Co()),c=Y(null),u=Y(null),d=Y(null),m=Y(jt.isFullscreen),f=Y(1);Y(0),Y(null),Y(1e3);const p=Y(null),g=Y(null),w=Y(null),C=Y(null),E=Y(null),k=Y(!1),A=Y(null),S=Y(null),T=q(()=>o()),R=q(()=>e.playerPosition),L=q(()=>e.currentNode),P=q(()=>e.targetNode),I=q(()=>e.isAtHome),D=q(()=>R.value.moving);q(()=>e.currentBoost);const U=q(()=>e.activeBoosts),M=q(()=>e.nodes),x=q(()=>R.value.path),$=j=>M.value.find(B=>B.id===j),Z=q(()=>{if(!x.value||x.value.length<2)return[];const j=[];for(let B=0;B<x.value.length-1;B++){const ie=x.value[B],V=x.value[B+1],O=$(ie),te=$(V);O&&te&&j.push({source:O,target:te,active:B===0})}return j}),me=q(()=>!x.value||x.value.length<2?"No active path":x.value.map(j=>{var B;return((B=$(j))==null?void 0:B.name)||j}).join("  ")),re={x:750,y:750};function J(j,B){return{x:re.x+j*m5,y:re.y-B*m5}}function le(){jt.isEnabled&&c.value?jt.toggle(c.value).catch(j=>{console.error("Failed to toggle fullscreen:",j),n("Could not enter fullscreen mode.","error")}):jt.isEnabled||n("Fullscreen is not supported by your browser or is disabled.","warning")}function se(){m.value=jt.isFullscreen}function z(){f.value=Math.min(f.value+.25,3),_e()}function ce(){f.value=Math.max(f.value-.25,.5),_e()}function pe(){f.value=1,_e()}function _e(){u.value&&u.value.style.setProperty("--zoom-scale",f.value.toString())}function Ee(j){const B=M.value.find(V=>V.id===j);if(!B)return;if(j===R.value.currentNodeId){$e(B);return}if(e.selectDestination(j)){Ce();const V=M.value.find(O=>O.id===j);n(`Travelling to ${V==null?void 0:V.name}...`,"success"),W()}else{const V=e.getPathToDestination(j);!V||V.length===0?n("No valid path to this node.","error"):n("Cannot travel to this node right now.","error")}}function Ue(){e.returnHome()?(n("Returning to Queen's Core with your gathered boosts.","success"),W()):I.value&&n("You are already at the Queen's Core.","info")}Et(()=>{jt.isEnabled&&jt.on("change",se),vs(()=>{if(u.value){const j=u.value.clientWidth,B=u.value.clientHeight,ie=(1500-j)/2,V=(1500-B)/2;u.value.scrollLeft=ie,u.value.scrollTop=V}})}),xn(()=>{jt.isEnabled&&jt.off("change",se)});function ze(){e.resetNeurotrails(),n("Neurotrails system has been reset to initial state","success"),wn.debug("Debug: Neurotrails system reset manually")}function Re(){var ie;if(!p.value){n("Please select a node first.","warning");return}const j=p.value,B=e.getPathToDestination(j);if(B&&B.length>0){const V=B.map(O=>{var te;return((te=M.value.find(G=>G.id===O))==null?void 0:te.name)||O}).join("  ");n(`Path found: ${V}`,"success")}else n(`No valid path to ${((ie=M.value.find(V=>V.id===j))==null?void 0:ie.name)||j}`,"error")}function $e(j){g.value=j}function Ce(){g.value=null}function Oe(j){if(!j)return"0";if(R.value.currentNodeId===j.id)return"You are here";const ie=e.getPathToDestination(j.id);if(ie&&ie.length>0){const V=e.getDistanceToDestination(j.id);return`${be(new Se(V))} steps`}return`${be(new Se(j.distance))} steps`}function ve(j){if(!j||R.value.currentNodeId===j.id)return null;let ie=0;const V=e.getPathToDestination(j.id);if(V&&V.length>0?ie=e.getDistanceToDestination(j.id):ie=j.distance,ie<=0)return null;const O=e.stepsPerTick;if(O<=0)return null;const G=Math.ceil(ie/O)*s.tickDuration,ne=Date.now()+G*1e3;return $C(ne)}const fe=(j,B)=>{A.value!==null&&clearTimeout(A.value);const ie=B.currentTarget;A.value=window.setTimeout(()=>{C.value=j,E.value=ie,k.value=!0,A.value=null},300)},X=()=>{A.value!==null&&(clearTimeout(A.value),A.value=null),setTimeout(()=>{k.value=!1,C.value=null,E.value=null},100)},H=()=>{W()},W=()=>{A.value!==null&&(clearTimeout(A.value),A.value=null),k.value=!1,C.value=null,E.value=null};q(()=>{if(!g.value)return{directDistance:0,hasDirectConnection:!1,pathDistance:0};const j=g.value,B=R.value.currentNodeId||"queens_core";if(B===j.id)return{directDistance:0,hasDirectConnection:!0,pathDistance:0};const ie=M.value.find(ne=>ne.id===B),V=ie==null?void 0:ie.connections.find(ne=>ne.nodeId===j.id),O=!!V,te=V?V.distance:0,G=e.getDistanceToDestination(j.id);return{directDistance:te,hasDirectConnection:O,pathDistance:G}});function ge(){try{e.cancelTrip()?(n("Journey cancelled. Returned to starting point.","success"),wn.debug("Trip cancelled successfully")):(n("Could not cancel journey.","error"),wn.debug("Trip cancellation failed"))}catch(j){wn.error("Error cancelling trip:",j),n("Error cancelling journey.","error")}}const Te=q(()=>{if(!D.value||!R.value.stepsRemaining||!P.value)return null;const j=R.value.stepsRemaining,B=e.stepsPerTick;if(j<=0||B<=0)return null;const ie=Math.ceil(j/B),V=ie*s.tickDuration,O=Date.now()+V*1e3;return{seconds:V,ticks:ie,timeUntil:$C(O),timestamp:O}}),Ie=j=>{switch(j){case"collect_food":return"Food";case"collect_evolution_points":return"Evolution Points";case"collect_pheromone":return"Pheromones";case"collect_honeydew":return"Honeydew";case"kill_bugs":return"Bug Kills";default:return j}},Ne=j=>{const B=j,ie=[];return M.value.forEach(V=>{V.tasks&&V.tasks.filter(te=>te.completed&&te.reward.appliesTo===B).forEach(te=>{const G=je(te.reward.value);ie.push({nodeId:V.id,boostValue:G})})}),ie},je=j=>typeof j=="string"?new Se(j):j,N=j=>{if(!j.tasks)return[];const B=j.tasks.filter(ie=>ie.completed).map(ie=>ie.reward.appliesTo);return[...new Set(B)]},ue=(j,B)=>{e.completeTask(j,B)?n("Task completed successfully!","success"):n("Failed to complete task. Requirements may not be met.","error")};return(j,B)=>{var ie;return h(),v(De,null,[a("div",{ref_key:"componentRootRef",ref:c,class:"container mx-auto p-0 md:p-4 neurotrails-container"},[a("div",zOe,[a("div",QOe,[a("div",KOe,[B[6]||(B[6]=a("h1",{class:"text-2xl font-bold text-amber-900 dark:text-amber-100"},"Neurotrails",-1)),a("div",YOe,[a("div",XOe,[a("button",{onClick:z,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom In",title:"Zoom In (+25%)"},B[3]||(B[3]=[a("span",{class:"i-mdi-magnify-plus-outline w-4 h-4"},null,-1)])),a("button",{onClick:pe,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Reset Zoom",title:"Reset Zoom (100%)"},[B[4]||(B[4]=a("span",{class:"i-mdi-magnify-scan w-4 h-4"},null,-1)),a("span",JOe,_(Math.round(f.value*100))+"%",1)]),a("button",{onClick:ce,class:"p-1.5 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50","aria-label":"Zoom Out",title:"Zoom Out (-25%)"},B[5]||(B[5]=[a("span",{class:"i-mdi-magnify-minus-outline w-4 h-4"},null,-1)]))]),b(jt).isEnabled?(h(),v("div",ZOe,[a("button",{onClick:le,class:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 dark:focus:ring-offset-gray-800 focus:ring-indigo-500","aria-label":m.value?"Exit Fullscreen":"Enter Fullscreen",title:m.value?"Exit Fullscreen":"Enter Fullscreen"},[m.value?(h(),v("span",sFe)):(h(),v("span",tFe))],8,eFe)])):Q("",!0)])])]),a("div",nFe,[a("div",rFe,[B[10]||(B[10]=a("h2",{class:"text-lg font-semibold text-amber-800 dark:text-amber-200 mb-2"},"Neural Network",-1)),a("div",{ref_key:"networkContainerRef",ref:u,class:"network-container relative overflow-auto rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 h-[600px]",style:{"--zoom-scale":"1"}},[(h(),v("svg",{ref_key:"networkSvgRef",ref:d,class:"h-full w-full min-w-[1500px] min-h-[1500px]",viewBox:"0 0 1500 1500",preserveAspectRatio:"xMidYMid meet"},[a("g",oFe,[(h(!0),v(De,null,Ge(Array.from({length:61},(V,O)=>O*50),V=>(h(),v("line",{key:`grid-h-${V}`,x1:0,y1:V,x2:1500,y2:V,stroke:"currentColor","stroke-width":"1",class:"text-gray-200 dark:text-gray-800","stroke-dasharray":"4,4"},null,8,iFe))),128)),(h(!0),v(De,null,Ge(Array.from({length:61},(V,O)=>O*50),V=>(h(),v("line",{key:`grid-v-${V}`,x1:V,y1:0,x2:V,y2:1500,stroke:"currentColor","stroke-width":"1",class:"text-gray-200 dark:text-gray-800","stroke-dasharray":"4,4"},null,8,aFe))),128))]),B[8]||(B[8]=a("line",{x1:"0",y1:"750",x2:"1500",y2:"750",stroke:"currentColor","stroke-width":"2",class:"text-gray-400 dark:text-gray-600"},null,-1)),B[9]||(B[9]=a("line",{x1:"750",y1:"0",x2:"750",y2:"1500",stroke:"currentColor","stroke-width":"2",class:"text-gray-400 dark:text-gray-600"},null,-1)),a("g",lFe,[(h(!0),v(De,null,Ge(M.value,V=>(h(),v(De,{key:`source-${V.id}`},[(h(!0),v(De,null,Ge(V.connectedTo,O=>{var te,G,ne,he,ye,ae;return h(),v("line",{key:`connection-${V.id}-${O}`,x1:J(V.position.x,V.position.y).x,y1:J(V.position.x,V.position.y).y,x2:J(((te=M.value.find(de=>de.id===O))==null?void 0:te.position.x)||0,((G=M.value.find(de=>de.id===O))==null?void 0:G.position.y)||0).x,y2:J(((ne=M.value.find(de=>de.id===O))==null?void 0:ne.position.x)||0,((he=M.value.find(de=>de.id===O))==null?void 0:he.position.y)||0).y,stroke:"currentColor","stroke-width":"2",class:K([V.visited&&((ye=M.value.find(de=>de.id===O))!=null&&ye.visited)?"text-emerald-400 dark:text-emerald-600":"text-gray-300 dark:text-gray-700",V.visited&&((ae=M.value.find(de=>de.id===O))!=null&&ae.visited)?"":"stroke-dasharray: 6,6"])},null,10,cFe)}),128))],64))),128))]),Z.value.length>0?(h(),v("g",uFe,[(h(!0),v(De,null,Ge(Z.value,(V,O)=>(h(),v("line",{key:`path-${O}`,x1:J(V.source.position.x,V.source.position.y).x,y1:J(V.source.position.x,V.source.position.y).y,x2:J(V.target.position.x,V.target.position.y).x,y2:J(V.target.position.x,V.target.position.y).y,stroke:"currentColor","stroke-width":"3",class:K([V.active?"text-amber-500 dark:text-amber-400 animate-pulse":"text-blue-400 dark:text-blue-600"])},null,10,dFe))),128))])):Q("",!0),a("g",mFe,[(h(!0),v(De,null,Ge(M.value,V=>(h(),v("g",{key:`node-${V.id}`,transform:`translate(${J(V.position.x,V.position.y).x}, ${J(V.position.x,V.position.y).y}) ${V.id==="queens_core"?"scale(1.25)":""}`,onClick:O=>{$e(V),H()},onMouseenter:O=>fe(V,O),onMouseleave:X,class:"cursor-pointer"},[a("circle",{r:"15",class:K(["transition-colors",V.id===R.value.currentNodeId?"fill-amber-400 dark:fill-amber-600 stroke-amber-500 dark:stroke-amber-400":V.visited?"fill-emerald-100 dark:fill-emerald-900 stroke-emerald-500 dark:stroke-emerald-400":"fill-gray-200 dark:fill-gray-800 stroke-gray-400 dark:stroke-gray-600"]),"stroke-width":"2"},null,2),(h(),v("foreignObject",pFe,[a("div",hFe,[a("span",{class:K([V.icon,"w-4 h-4",V.id===R.value.currentNodeId?"text-amber-900 dark:text-amber-100":V.visited?"text-emerald-800 dark:text-emerald-200":"text-gray-600 dark:text-gray-300"])},null,2)])])),a("text",gFe,_(V.name),1)],40,fFe))),128)),R.value.atNode?Q("",!0):(h(),v("g",{key:0,transform:`translate(${J(R.value.x,R.value.y).x}, ${J(R.value.x,R.value.y).y})`},B[7]||(B[7]=[a("circle",{r:"10",class:"fill-amber-400/80 dark:fill-amber-600/80 animate-pulse"},null,-1),a("foreignObject",{x:"-8",y:"-8",width:"16",height:"16"},[a("div",{xmlns:"http://www.w3.org/1999/xhtml",class:"w-full h-full flex items-center justify-center"},[a("span",{class:"i-mdi-ant text-amber-900 dark:text-amber-100 w-5 h-5"})])],-1)]),8,vFe))])],512)),k.value?(h(),Tt(WOe,{key:0,node:C.value,"anchor-el":E.value,"scroll-container":u.value},null,8,["node","anchor-el","scroll-container"])):Q("",!0)],512)]),a("div",bFe,[B[26]||(B[26]=a("h2",{class:"text-lg font-semibold text-amber-800 dark:text-amber-200 mb-4"},"Neural Status",-1)),a("div",yFe,[B[22]||(B[22]=a("h3",{class:"text-md font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Current Position",-1)),a("div",_Fe,[D.value?(h(),v("div",xFe,[B[12]||(B[12]=a("span",{class:"i-mdi-transit-connection-variant text-amber-500 dark:text-amber-400 w-5 h-5 mr-2"},null,-1)),a("span",kFe,[B[11]||(B[11]=oe(" Travelling to ")),a("span",wFe,_(((ie=P.value)==null?void 0:ie.name)||"Unknown"),1)])])):L.value?(h(),v("div",EFe,[a("span",{class:K([L.value.icon,"text-emerald-500 dark:text-emerald-400 w-5 h-5 mr-2"])},null,2),a("span",CFe,[B[13]||(B[13]=oe(" At ")),a("span",SFe,_(L.value.name),1)])])):Q("",!0),a("div",TFe,[a("div",AFe,[B[14]||(B[14]=a("span",{class:"i-mdi-speedometer text-blue-600 dark:text-blue-400 w-4 h-4 mr-2"},null,-1)),a("span",IFe," Movement Speed: "+_(b(e).stepsPerTick)+" steps per tick ",1)]),T.value.gt(1)?(h(),v("div",PFe,[B[15]||(B[15]=a("span",{class:"i-mdi-rocket-launch-outline text-green-600 dark:text-green-400 w-3 h-3 mr-1"},null,-1)),a("span",MFe," Node Boost: "+_(b(Lt)(T.value.sub(1)))+" faster travel ",1)])):Q("",!0)]),D.value?(h(),v("div",$Fe,[a("div",RFe,[B[16]||(B[16]=a("span",{class:"i-mdi-map-marker-distance text-amber-600 dark:text-amber-400 w-4 h-4 mr-2"},null,-1)),a("span",LFe,_(Math.ceil(R.value.stepsRemaining).toFixed(0))+" steps remaining ",1)]),Te.value?(h(),v("div",DFe,[B[17]||(B[17]=a("span",{class:"i-mdi-clock-outline text-amber-600 dark:text-amber-400 w-4 h-4 mr-2"},null,-1)),a("span",NFe," Estimated arrival: "+_(Te.value.timeUntil),1)])):Q("",!0),x.value.length>0?(h(),v("div",OFe,[B[18]||(B[18]=a("span",{class:"i-mdi-routes text-amber-600 dark:text-amber-400 w-4 h-4 mr-2"},null,-1)),a("span",FFe," Path: "+_(me.value),1)])):Q("",!0),a("div",UFe,[B[19]||(B[19]=a("span",{class:"i-mdi-map-marker w-4 h-4 mr-2 text-amber-600 dark:text-amber-400"},null,-1)),oe(" X: "+_(R.value.x.toFixed(1))+", Y: "+_(R.value.y.toFixed(1)),1)])])):L.value&&L.value.id!=="queens_core"?(h(),v("div",qFe,[a("div",BFe,[a("span",{class:K([L.value.icon,"text-emerald-600 dark:text-emerald-400 w-4 h-4 mr-2"])},null,2),a("span",VFe,_(L.value.name)+" Node ",1)]),L.value.tasks&&L.value.tasks.length>0?(h(),v("div",HFe,[B[20]||(B[20]=a("h4",{class:"text-xs font-semibold text-emerald-700 dark:text-emerald-300 mb-1"},"Tasks:",-1)),a("div",GFe,[(h(!0),v(De,null,Ge(L.value.tasks,V=>(h(),v("div",{key:V.id,class:"flex justify-between items-center text-xs"},[a("div",jFe,[a("span",{class:K([V.completed?"i-mdi-check-circle text-emerald-600 dark:text-emerald-400":"i-mdi-circle-outline text-amber-600 dark:text-amber-400","w-3 h-3 mr-1"])},null,2),a("span",null,_(V.name),1)]),a("div",WFe,[V.completed?(h(),v("span",zFe,_(b(be)(je(V.reward.value),2))+"x ",1)):(h(),v("span",QFe,_(b(Lt)(b(e).getTaskProgressPercentage(V))),1))])]))),128))])])):Q("",!0)])):I.value?(h(),v("div",KFe,B[21]||(B[21]=[a("span",{class:"text-xs text-blue-800 dark:text-blue-200"}," Safe at the Queen's Core. Select a neural node to begin exploring. ",-1)]))):Q("",!0)])]),a("div",YFe,[B[23]||(B[23]=a("h3",{class:"text-md font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Active Boosts",-1)),a("div",XFe,[a("div",JFe,[(h(!0),v(De,null,Ge(U.value,(V,O)=>(h(),v("div",{key:O,class:"boost-category"},[a("div",{onClick:te=>S.value=S.value===O?null:O,class:"flex justify-between items-center cursor-pointer p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded"},[a("div",eUe,[a("span",{class:K([S.value===O?"i-mdi-chevron-down":"i-mdi-chevron-right","w-4 h-4 mr-1.5 text-purple-500 dark:text-purple-400"])},null,2),a("span",tUe,_(O),1)]),a("div",sUe,[a("span",nUe,_(b(r)(V)),1)])],8,ZFe),Ye(or,{name:"boost-details"},{default:Rt(()=>[S.value===O?(h(),v("div",rUe,[(h(!0),v(De,null,Ge(Ne(O),(te,G)=>{var ne;return h(),v("div",{key:`${O}-${G}`,class:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-800 last:border-0"},[a("span",oUe,_(((ne=$(te.nodeId))==null?void 0:ne.name)||"Unknown Node"),1),a("span",iUe," +"+_(te.boostValue.sub(1).mul(100).toFixed(1))+"% ",1)])}),128)),Ne(O).length?Q("",!0):(h(),v("div",aUe," No contributions yet "))])):Q("",!0)]),_:2},1024)]))),128)),Object.keys(U.value).length===0?(h(),v("div",lUe," Complete tasks at neural nodes to unlock boosts ")):Q("",!0)])])]),a("div",cUe,[a("button",{onClick:Ue,disabled:I.value,class:K(["w-full px-4 py-2 rounded-md font-medium text-white transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",[I.value?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-500"]])},B[24]||(B[24]=[a("span",{class:"flex items-center justify-center"},[a("span",{class:"i-mdi-home mr-2 w-5 h-5"}),oe(" Return to Queen's Core ")],-1)]),10,uUe),D.value?(h(),v("button",{key:0,onClick:ge,class:"w-full px-4 py-2 rounded-md font-medium text-white transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-500"},B[25]||(B[25]=[a("span",{class:"flex items-center justify-center"},[a("span",{class:"i-mdi-cancel mr-2 w-5 h-5"}),oe(" Cancel Journey ")],-1)]))):Q("",!0)])])]),a("div",dUe,[a("div",mUe,[B[28]||(B[28]=a("h2",{class:"text-lg font-semibold text-amber-800 dark:text-amber-200"},"Neural Nodes",-1)),i.value?(h(),v("div",fUe,[a("button",{onClick:ze,class:"px-2 py-1 text-xs rounded bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-500 text-white transition-colors"}," Reset Neurotrails "),a("div",pUe,[Ut(a("select",{"onUpdate:modelValue":B[0]||(B[0]=V=>p.value=V),class:"px-1 py-1 text-xs rounded bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600"},[B[27]||(B[27]=a("option",{value:null},"Select Node",-1)),(h(!0),v(De,null,Ge(M.value,V=>(h(),v("option",{key:`path-option-${V.id}`,value:V.id},_(V.name),9,hUe))),128))],512),[[Em,p.value]]),a("button",{onClick:Re,class:"px-2 py-1 text-xs rounded bg-blue-500 dark:bg-blue-600 hover:bg-blue-600 dark:hover:bg-blue-500 text-white transition-colors",disabled:!p.value}," Check Path ",8,gUe)])])):Q("",!0)]),a("div",vUe,[(h(!0),v(De,null,Ge(M.value,V=>(h(),v("div",{key:`info-${V.id}`,class:K(["border rounded-lg p-3 transition-colors hover:shadow-md cursor-pointer",[V.id===R.value.currentNodeId?"bg-amber-50 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":V.visited?"bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800":"bg-gray-50 dark:bg-gray-900/30 border-gray-200 dark:border-gray-700"]]),onClick:O=>$e(V)},[a("div",yUe,[a("div",{class:K([V.icon,"w-5 h-5 mt-0.5 mr-2",V.id===R.value.currentNodeId?"text-amber-600 dark:text-amber-400":V.visited?"text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-400"])},null,2),a("div",_Ue,[a("div",xUe,[a("h3",kUe,_(V.name),1),V.tasks&&V.tasks.some(O=>O.completed)?(h(),v("div",wUe,[(h(!0),v(De,null,Ge(N(V),(O,te)=>(h(),v("div",{key:`${V.id}-boost-${te}`,class:K(["w-4 h-4 rounded-full flex items-center justify-center text-[8px] font-bold",{"bg-purple-500 text-white":O.includes("damage"),"bg-emerald-500 text-white":O.includes("food")||O.includes("worker"),"bg-amber-500 text-white":O.includes("steps"),"bg-blue-500 text-white":O.includes("ep"),"bg-pink-500 text-white":O.includes("pheromone"),"bg-gray-500 text-white":!["damage","food","worker","steps","ep","pheromone"].some(G=>O.includes(G))}]),title:`${O} boost active`},_(O.charAt(0).toUpperCase()),11,EUe))),128))])):Q("",!0)]),a("p",CUe,_(V.description),1)])]),V.tasks&&V.tasks.length>0?(h(),v("div",SUe,[a("div",TUe,[a("span",null,"Tasks ("+_(V.tasks.filter(O=>O.completed).length)+"/"+_(V.tasks.length)+")",1),B[29]||(B[29]=a("span",null,"Rewards",-1))]),a("div",AUe,[(h(!0),v(De,null,Ge(V.tasks,O=>(h(),v("div",{key:`${V.id}-${O.id}-summary`,class:"flex justify-between items-center"},[a("div",IUe,[a("span",{class:K([[O.completed?"i-mdi-check-circle text-emerald-600 dark:text-emerald-400":b(e).canCompleteTask(O)?"i-mdi-alert-circle text-amber-600 dark:text-amber-400":"i-mdi-circle-outline text-gray-400 dark:text-gray-600"],"w-3 h-3 mr-1"])},null,2),a("span",{class:K(["truncate max-w-[120px]",[O.completed?"text-emerald-700 dark:text-emerald-300":b(e).canCompleteTask(O)?"text-amber-700 dark:text-amber-300 font-medium":"text-gray-600 dark:text-gray-400"]])},_(O.name),3)]),a("div",PUe,[a("span",{class:K([O.completed?"text-purple-600 dark:text-purple-400":"text-gray-500 dark:text-gray-400"])},_(b(be)(je(O.reward.value),2))+"x "+_(O.reward.appliesTo)+" boost ",3)])]))),128))])])):Q("",!0)],10,bUe))),128))])])])],512),Ye(or,{name:"fade"},{default:Rt(()=>[g.value?(h(),v("div",{key:0,class:"fixed inset-0 z-30 flex items-center justify-center p-4 bg-black/50 dark:bg-black/60 backdrop-blur-sm",onClick:Ce},[a("div",{ref_key:"detailsPanelRef",ref:w,role:"dialog","aria-modal":"true",tabindex:"-1",class:"relative rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col z-40 border-2 focus:outline-none focus:ring-2 focus:ring-amber-500 bg-white dark:bg-gray-800 border-amber-300 dark:border-amber-600",onClick:B[2]||(B[2]=xt(()=>{},["stop"])),onKeydown:Pl(Ce,["esc"])},[a("button",{onClick:Ce,class:"absolute top-2 right-2 p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:focus:ring-offset-gray-800","aria-label":"Close details"},B[30]||(B[30]=[a("span",{class:"i-mdi-close w-5 h-5"},null,-1)])),a("div",MUe,[a("div",$Ue,[a("span",{class:K([g.value.icon,"mr-2 text-xl sm:text-2xl flex-shrink-0"])},null,2),a("h4",RUe,_(g.value.name),1),g.value.visited?(h(),v("span",LUe," Visited ")):(h(),v("span",DUe," Not Visited "))]),a("p",NUe,_(g.value.description),1)]),a("div",OUe,[a("div",FUe,[g.value.tasks&&g.value.tasks.length>0?(h(),v("div",UUe,[B[34]||(B[34]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Tasks",-1)),a("div",qUe,[(h(!0),v(De,null,Ge(g.value.tasks,V=>(h(),v("div",{key:V.id,class:K(["border rounded p-3",{"border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/30":V.completed,"border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30":!V.completed&&b(e).canCompleteTask(V),"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50":!V.completed&&!b(e).canCompleteTask(V)}])},[a("div",BUe,[a("span",VUe,_(V.name),1),V.completed?(h(),v("span",HUe," Completed ")):b(e).canCompleteTask(V)?(h(),v("span",GUe," Ready to Complete ")):(h(),v("span",jUe," In Progress "))]),a("p",WUe,_(V.description),1),a("div",zUe,[a("div",QUe,[a("span",null,"Required: "+_(b(be)(je(V.requiredAmount),0))+" "+_(Ie(V.type)),1),a("span",null,_(b(Lt)(b(e).getTaskProgressPercentage(V))),1)]),a("div",KUe,[a("div",{class:K(["h-2 rounded-full",{"bg-emerald-500":V.completed,"bg-amber-500":!V.completed&&b(e).canCompleteTask(V),"bg-blue-500":!V.completed&&!b(e).canCompleteTask(V)}]),style:yt({width:`${b(e).getTaskProgressPercentage(V)}%`})},null,6)])]),a("div",YUe,[B[31]||(B[31]=a("span",{class:"i-mdi-gift-outline w-4 h-4 mr-1.5 text-purple-500 dark:text-purple-400"},null,-1)),a("span",{class:K({"text-purple-600 dark:text-purple-400":V.completed,"text-gray-600 dark:text-gray-400":!V.completed})},"Reward: "+_(b(be)(je(V.reward.value),2))+"x "+_(V.reward.appliesTo)+" boost",3)]),!V.completed&&b(e).playerPosition.currentNodeId===g.value.id&&b(e).playerPosition.atNode?(h(),v("button",{key:0,disabled:!b(e).canCompleteTask(V),onClick:O=>ue(g.value.id,V.id),class:K(["w-full text-sm py-1.5 px-3 rounded-md text-white transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",{"bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-500":b(e).canCompleteTask(V),"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":!b(e).canCompleteTask(V)}])},_(b(e).canCompleteTask(V)?"Complete Task":"Requirements Not Met"),11,XUe)):V.completed?(h(),v("div",JUe,B[32]||(B[32]=[a("span",{class:"i-mdi-check-circle-outline w-4 h-4 mr-1 inline-block"},null,-1),oe(" Task completed successfully ")]))):(h(),v("div",ZUe,B[33]||(B[33]=[a("span",{class:"i-mdi-map-marker w-4 h-4 mr-1 inline-block"},null,-1),oe(" Travel to this node to complete the task ")])))],2))),128))])])):Q("",!0)]),a("div",e8e,[g.value.id!==R.value.currentNodeId?(h(),v("div",t8e,[B[35]||(B[35]=a("span",{class:"i-mdi-map-marker-distance mr-1 w-4 h-4 text-amber-500 dark:text-amber-400"},null,-1)),a("span",s8e,_(Oe(g.value)),1)])):Q("",!0),g.value.id!==R.value.currentNodeId?(h(),v("div",n8e,[a("div",r8e,[B[36]||(B[36]=a("span",{class:"i-mdi-routes mr-1 w-4 h-4 text-blue-500 dark:text-blue-400"},null,-1)),a("span",o8e,_((()=>{const V=b(e).getPathToDestination(g.value.id);if(!V)return"No path available";const O=b(e).getDistanceToDestination(g.value.id);return`Path available (${V.length} nodes, ${O} steps)`})()),1)])])):Q("",!0)])]),a("div",i8e,[a("div",a8e,[B[37]||(B[37]=a("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1"},"Connected To:",-1)),a("div",l8e,[(h(!0),v(De,null,Ge(g.value.connectedTo,V=>{var O,te,G;return h(),v("span",{key:`conn-detail-${V}`,class:K(["text-xs px-1.5 py-0.5 rounded-full flex items-center gap-1",(O=$(V))!=null&&O.visited?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"])},[a("span",{class:K([(te=$(V))==null?void 0:te.icon,"w-3 h-3"])},null,2),oe(" "+_(((G=$(V))==null?void 0:G.name)||V),1)],2)}),128))])]),g.value.id!=="queens_core"?(h(),v("div",c8e,[a("div",u8e,[B[38]||(B[38]=a("span",{class:"font-semibold"},"Distance:",-1)),a("span",d8e,_(Oe(g.value)),1)]),ve(g.value)?(h(),v("div",m8e,[a("span",f8e,[B[39]||(B[39]=a("span",{class:"i-mdi-clock-outline w-3 h-3 mr-1"},null,-1)),a("span",null,"Est. arrival: "+_(ve(g.value)),1)])])):Q("",!0)])):Q("",!0),a("div",p8e,[g.value.id!==R.value.currentNodeId?(h(),v("div",h8e,[B[40]||(B[40]=a("span",{class:"i-mdi-map-marker-distance mr-1 w-4 h-4 text-amber-500 dark:text-amber-400"},null,-1)),a("span",g8e,_(Oe(g.value)),1)])):Q("",!0),g.value.id!==R.value.currentNodeId?(h(),v("div",v8e,[a("div",b8e,[B[41]||(B[41]=a("span",{class:"i-mdi-routes mr-1 w-4 h-4 text-blue-500 dark:text-blue-400"},null,-1)),a("span",y8e,_((()=>{const V=b(e).getPathToDestination(g.value.id);if(!V)return"No path available";const O=b(e).getDistanceToDestination(g.value.id);return`Path available (${V.length} nodes, ${O} steps)`})()),1)])])):Q("",!0)]),a("div",_8e,[g.value.id!==R.value.currentNodeId&&!D.value?(h(),v("button",{key:0,onClick:B[1]||(B[1]=xt(V=>{Ee(g.value.id),Ce()},["stop"])),class:"px-3 py-1.5 rounded text-sm font-semibold transition-colors w-full sm:w-auto text-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:focus:ring-offset-gray-800 bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-500 text-white font-bold hover:shadow-md",disabled:!b(e).getPathToDestination(g.value.id)},[a("span",k8e,[B[42]||(B[42]=a("span",{class:"i-mdi-map-marker-path w-4 h-4 mr-2"},null,-1)),oe(" Travel to "+_(g.value.name),1)])],8,x8e)):D.value?(h(),v("div",w8e,B[43]||(B[43]=[a("span",{class:"flex items-center justify-center"},[a("span",{class:"i-mdi-motion-pause w-4 h-4 mr-2"}),oe(" Already traveling... ")],-1)]))):(h(),v("div",E8e,B[44]||(B[44]=[a("span",{class:"flex items-center justify-center"},[a("span",{class:"i-mdi-check-circle w-4 h-4 mr-2"}),oe(" You are here ")],-1)])))])])],544)])):Q("",!0)]),_:1})],64)}}}),S8e=Ct(C8e,[["__scopeId","data-v-75051b21"]]),T8e={class:"space-y-4 p-4 md:p-6 mx-auto max-w-4xl"},A8e={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8"},I8e=["onClick"],P8e={class:"font-bold text-lg text-amber-800 dark:text-amber-300 mb-1"},M8e={class:"text-amber-700 dark:text-amber-400 text-sm mb-2"},$8e={class:"flex items-center justify-between mt-2"},R8e={class:"text-amber-600 dark:text-amber-300 font-bold text-lg"},L8e={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4"},D8e={class:"flex items-center justify-between mb-4"},N8e={class:"text-xl font-bold text-amber-800 dark:text-amber-300"},O8e={class:"text-amber-600 dark:text-amber-300 font-bold text-lg"},F8e={class:"overflow-hidden"},U8e={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},q8e={key:1,class:"w-full"},B8e={class:"py-3 px-4 text-amber-900 dark:text-amber-100"},V8e={class:"py-3 px-4 text-right font-medium text-amber-600 dark:text-amber-300"},H8e={class:"py-3 px-4 text-center"},G8e={class:"py-3 px-4 text-center"},j8e={key:0},W8e={colspan:"4",class:"bg-amber-50/50 dark:bg-gray-800/50 px-4 py-3"},z8e={class:"overflow-x-auto"},Q8e={class:"w-full text-sm border-separate border-spacing-0"},K8e={class:"py-2 px-3 text-amber-800 dark:text-amber-100"},Y8e={class:"py-2 px-3 text-right font-medium text-amber-600 dark:text-amber-400"},X8e={class:"py-2 px-3 text-center"},J8e=Je({__name:"StatsPage",setup(t){const e=sn(),s=St(),{getEPMultiplierBreakdown:n,getPheromoneGainMultiplierBreakdown:r,getNeurotrailsMultiplierBreakdown:o,getAscensionMultiplierBreakdown:i}=Pi(),c=[{id:"global",name:"Global",description:"Affects all generators"},{id:"ep",name:"Evolution Points",description:"Affects EP gain"},{id:"pheromone",name:"Pheromone Essence",description:"Affects PE gain"},{id:"worker",name:"Worker Ants",description:"Affects worker ant production"},{id:"nursery",name:"Nursery",description:"Affects nursery production"},{id:"queenChamber",name:"Queen Chamber",description:"Affects queen chamber production"},{id:"colony",name:"Colony",description:"Affects colony production"},{id:"megacolony",name:"Megacolony",description:"Affects megacolony production"},{id:"hivemind",name:"Hivemind",description:"Affects hivemind production"},{id:"antopolis",name:"Antopolis",description:"Affects antopolis production"},{id:"alateHatchery",name:"Alate Hatchery",description:"Affects alate hatchery production"},{id:"damage",name:"Damage",description:"Affects combat damage"},{id:"health",name:"Health",description:"Affects ant health in combat"},{id:"defense",name:"Defense",description:"Affects ant defense in combat"},{id:"regen",name:"Regeneration",description:"Affects ant health regeneration"}],u=Y("ep"),d=Y(null),m=()=>{const E=[];return s.evolutionUpgrades.forEach(A=>{var R;if(A.level.eq(0))return;const S=(R=A.appliesTo)==null?void 0:R.includes("ep"),T=A.isCombo&&A.effects;if(S&&!T){const L=A.effect(A.level);L.gt(1)&&E.push({name:`${A.name} (Level ${A.level.toString()})`,value:L,formatted:e.formatMultiplierValue(L),id:`evolution_ep_${A.id}`,additive:A.isAdditive??!1})}T&&A.effects&&A.effects.forEach(L=>{if(L.target==="ep"){const P=L.multiplier(A.level);if(P.gt(1)){const I=L.formatEffect?L.formatEffect(P):`EP boost x${P.toFixed(2)}`;E.push({name:`${A.name} - ${I} (Level ${A.level.toString()})`,value:P,formatted:e.formatMultiplierValue(P),id:`evolution_ep_${A.id}_${L.target}`,additive:!L.isMultiplier})}}})}),E.sort((A,S)=>S.value.cmp(A.value))},f=q(()=>{const E={ep:n(),pheromone:r(),neurotrails:o(),ascension:i(),evolution_ep_details:m()};return c.forEach(k=>{if(k.id!=="ep"&&k.id!=="pheromone")try{if(k.id==="global"){const A=[],S=e.getNeurotrailsGlobalBoost();S.gt(1)&&A.push({name:"Neurotrails Network Global Boost",value:S,formatted:e.formatMultiplierValue(S),id:"neurotrails_global"});const T=e.getAscensionGlobalBoost();T.gt(1)&&A.push({name:"Ascension Tree Global Boost",value:T,formatted:e.formatMultiplierValue(T),id:"ascension_global"});const R=e.getColonyGlobalBoost();R.gt(1)&&A.push({name:"Colony Global Boost",value:R,formatted:e.formatMultiplierValue(R),id:"colony_global"});const L=e.getPheromoneShopGlobalMultiplier();L.gt(1)&&A.push({name:"Pheromone Shop Global Boost",value:L,formatted:e.formatMultiplierValue(L),id:"pheromone_shop_global"}),E[k.id]=A.sort((P,I)=>I.value.cmp(P.value))}else E[k.id]=e.getMultiplierBreakdown(k.id,!1).sort((A,S)=>S.value.cmp(A.value))}catch(A){console.error(`Error getting breakdown for ${k.id}:`,A),E[k.id]=[]}}),E}),p=q(()=>{const E={};return Object.entries(f.value).forEach(([k,A])=>{if(A.length===0||k==="evolution_ep_details"){E[k]={value:new Se(1),formatted:"1.00x"};return}let S=new Se(1),T=new Se(1);A.forEach(L=>{L.additive?S=S.add(L.value.sub(1)):T=T.mul(L.value)});const R=S.mul(T);E[k]={value:R,formatted:e.formatMultiplierValue(R)}}),E}),g=q(()=>c.filter(E=>(f.value[E.id]||[]).length>0).sort((E,k)=>{var T,R;const A=((T=p.value[E.id])==null?void 0:T.value)||new Se(1);return(((R=p.value[k.id])==null?void 0:R.value)||new Se(1)).cmp(A)})),w=E=>{u.value=E,d.value=null},C=E=>{d.value=d.value==="upgrades_ep_boost"?null:"upgrades_ep_boost"};return(E,k)=>{var A,S;return h(),v("div",T8e,[k[5]||(k[5]=a("h1",{class:"text-2xl font-bold mb-4 text-amber-900 dark:text-amber-100"},"Stats & Multipliers",-1)),k[6]||(k[6]=a("div",{class:"bg-amber-100/50 dark:bg-gray-800/50 rounded-lg shadow-md p-4 mb-6"},[a("p",{class:"text-amber-800 dark:text-amber-200"}," View detailed breakdowns of all your stat multipliers across different categories. Each category shows the sources and values of your multipliers. ")],-1)),a("div",A8e,[(h(!0),v(De,null,Ge(g.value,T=>{var R;return h(),v("div",{key:T.id,onClick:L=>w(T.id),class:K(["bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 cursor-pointer transition-all duration-200 hover:shadow-lg",{"ring-2 ring-amber-500 dark:ring-amber-400":u.value===T.id}])},[a("h3",P8e,_(T.name),1),a("p",M8e,_(T.description),1),a("div",$8e,[k[1]||(k[1]=a("span",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Total Multiplier:",-1)),a("span",R8e,_(((R=p.value[T.id])==null?void 0:R.formatted)||"1.00x"),1)])],10,I8e)}),128))]),u.value&&f.value[u.value]?(h(),v("div",L8e,[a("div",D8e,[a("h2",N8e,_(((A=c.find(T=>T.id===u.value))==null?void 0:A.name)||u.value.charAt(0).toUpperCase()+u.value.slice(1))+" Breakdown ",1),a("div",O8e," Total: "+_(((S=p.value[u.value])==null?void 0:S.formatted)||"1.00x"),1)]),a("div",F8e,[f.value[u.value].length===0?(h(),v("div",U8e," No multipliers found for this category ")):(h(),v("table",q8e,[k[4]||(k[4]=a("thead",null,[a("tr",{class:"border-b border-amber-200 dark:border-gray-700"},[a("th",{class:"text-left py-2 px-4 text-amber-800 dark:text-amber-300"},"Source"),a("th",{class:"text-right py-2 px-4 text-amber-800 dark:text-amber-300"},"Multiplier"),a("th",{class:"text-center py-2 px-4 text-amber-800 dark:text-amber-300"},"Type"),a("th",{class:"text-center py-2 px-4 text-amber-800 dark:text-amber-300 w-16"},"Details")])],-1)),a("tbody",null,[(h(!0),v(De,null,Ge(f.value[u.value],(T,R)=>(h(),v("tr",{key:T.id||R,class:K(["border-b border-amber-100 dark:border-gray-700 hover:bg-amber-50 dark:hover:bg-gray-700",{"bg-amber-50/80 dark:bg-gray-700/80":d.value==="upgrades_ep_boost"&&T.id==="upgrades_ep_boost"}])},[a("td",B8e,_(T.name),1),a("td",V8e,_(T.formatted),1),a("td",H8e,[a("span",{class:K(["px-2 py-1 rounded-full text-xs font-medium",T.additive?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"])},_(T.additive?"Additive":"Multiplicative"),3)]),a("td",G8e,[T.id==="upgrades_ep_boost"?(h(),v("button",{key:0,onClick:k[0]||(k[0]=xt(L=>C(),["stop"])),class:"p-1 rounded-full hover:bg-amber-200 dark:hover:bg-amber-800"},[a("span",{class:K([d.value==="upgrades_ep_boost"?"i-heroicons-chevron-up":"i-heroicons-chevron-down","text-amber-600 dark:text-amber-400 text-lg"])},null,2)])):Q("",!0)])],2))),128)),d.value==="upgrades_ep_boost"&&u.value==="ep"?(h(),v("tr",j8e,[a("td",W8e,[a("div",z8e,[k[3]||(k[3]=a("h3",{class:"font-bold text-amber-800 dark:text-amber-300 mb-2"},"Evolution Upgrades EP Breakdown",-1)),a("table",Q8e,[k[2]||(k[2]=a("thead",null,[a("tr",{class:"border-b border-amber-200/60 dark:border-gray-700/60"},[a("th",{class:"text-left py-2 px-3 text-amber-700 dark:text-amber-300"},"Upgrade"),a("th",{class:"text-right py-2 px-3 text-amber-700 dark:text-amber-300"},"Multiplier"),a("th",{class:"text-center py-2 px-3 text-amber-700 dark:text-amber-300"},"Type")])],-1)),a("tbody",null,[(h(!0),v(De,null,Ge(f.value.evolution_ep_details,(T,R)=>(h(),v("tr",{key:T.id||R,class:"border-b border-amber-100/60 dark:border-gray-700/60 hover:bg-amber-100/30 dark:hover:bg-gray-700/30"},[a("td",K8e,_(T.name),1),a("td",Y8e,_(T.formatted),1),a("td",X8e,[a("span",{class:K(["px-2 py-0.5 rounded-full text-2xs font-medium",T.additive?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"])},_(T.additive?"Additive":"Multiplicative"),3)])]))),128))])])])])])):Q("",!0)])]))])])):Q("",!0)])}}}),Z8e=Ct(J8e,[["__scopeId","data-v-736e42bb"]]);function Ow(){const t="gdpr_consent_status",e=Y(localStorage.getItem(t)||"pending");return{consentStatus:e,acceptConsent:()=>(e.value="accepted",localStorage.setItem(t,e.value),!0),declineConsent:()=>(e.value="declined",localStorage.setItem(t,e.value),!1),hasConsent:()=>e.value==="accepted",isPending:()=>e.value==="pending"}}var Wv=function(){return typeof document<"u"&&typeof window<"u"},e7e=function(e,s){return new Promise(function(n,r){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");if(i.async=!0,i.src=e,i.charset="utf-8",s){var c=document.createElement("link");c.href=s,c.rel="preconnect",o.appendChild(c)}o.appendChild(i),i.onload=n,i.onerror=r})},t7e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.keys(s).forEach(function(n){e[n]=s[n]})},SD=qa({property:null,isEnabled:!0,disableScriptLoader:!1,useDebugger:!1,globalObjectName:"gtag",dataLayerName:"dataLayer",resourceURL:"https://www.googletagmanager.com/gtag/js",preconnectOrigin:"https://www.googletagmanager.com",customResource:null,appName:null,appId:null,appVersion:null}),ja=function(){return FI(SD)},TD=q(function(){var t=ja(),e=t.property;if(e.value)return Array.isArray(e.value)?e.value.find(function(s){return s.default===!0})||e.value[0]:e.value}),s7e=q(function(){var t=ja(),e=t.property;return!!(e.value&&e.value.id!==null)}),Zm=q(function(){var t=ja(),e=t.property;return Array.isArray(e.value)?e.value:[e.value]}),n7e=q(function(){var t=ja(),e=t.isEnabled,s=TD.value;return!!(s&&s.id&&e.value)}),$f=function(){var t;if(Wv()){for(var e=ja(),s=e.globalObjectName,n=e.useDebugger,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.value&&console.warn("[vue-gtag] Debugger:",o),(t=window)[s.value].apply(t,o)}},Fw=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Zm.value.forEach(function(n){$f.apply(void 0,["config",n.id].concat(e))})},r7e=function(t){Fw({custom_map:t})},o7e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Wv()&&Zm.value.forEach(function(e){window["ga-disable-".concat(e.id)]=t})},nc=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Object.assign({},e);!s.send_to&&Zm.value.length>1&&(s.send_to=Zm.value.map(function(n){return n.id})),$f("event",t,s)},i7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];nc.apply(void 0,["exception"].concat(e))},a7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Fw.apply(void 0,["linker"].concat(e))},l7e=function(t){var e={};typeof t=="string"?e={page_path:t,page_location:window.location.href}:e=t,typeof e.send_page_view>"u"&&(e.send_page_view=!0),nc("page_view",e)},c7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];nc.apply(void 0,["purchase"].concat(e))},u7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];nc.apply(void 0,["refund"].concat(e))},d7e=function(){for(var t=ja(),e=t.appName,s=t.appId,n=t.appVersion,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var c=o[0],u={};typeof c=="string"?u={screen_name:c}:u=c,u.app_name==null&&e.value!=null&&(u.app_name=e.value),u.app_id==null&&s.value!=null&&(u.app_id=s.value),u.app_version==null&&n.value!=null&&(u.app_version=n.value),nc("screen_view",u)},m7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];$f.apply(void 0,["set"].concat(e))},f7e=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];nc.apply(void 0,["timing_complete"].concat(e))},AD=Object.freeze({__proto__:null,config:Fw,customMap:r7e,disable:o7e,event:nc,exception:i7e,linker:a7e,pageview:l7e,purchase:c7e,query:$f,refund:u7e,screenview:d7e,set:m7e,time:f7e}),f5=Y(!1),p5=Y(!1),p7e=function(){var e=ja(),s=e.disableScriptLoader,n=e.preconnectOrigin,r=e.resourceURL,o=e.dataLayerName;if(!(!Wv()||!s7e.value||p5.value)){if(p5.value=!0,Zm.value.forEach(function(c){var u=Object.assign({send_page_view:!1},c.params);$f("config",c.id,u)}),s.value){f5.value=!0;return}var i="".concat(r.value,"?id=").concat(TD.value.id,"&l=").concat(o.value);e7e(i,n.value).then(function(){f5.value=!0})}},h7e=function(){dt(function(){return n7e.value},function(e){return e&&p7e()},{immediate:!0})},g7e=function(){if(Wv()){var t=ja(),e=t.globalObjectName,s=t.dataLayerName;window[e.value]==null&&(window[s.value]=window[s.value]||[],window[e.value]=function(){window[s.value].push(arguments)}),window[e.value]("js",new Date)}},v7e=function(){return AD};qa({template:null,useScreenview:!1,skipSamePath:!0});var b7e={install:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t7e(SD,s),g7e(),h7e(),e.config.globalProperties.$gtag=AD}};function y7e(){const{consentStatus:t,hasConsent:e}=Ow(),{isEnabled:s,enable:n,disable:r,query:o,pageView:i,event:c,screenView:u,customMap:d,time:m,exception:f}=v7e();return dt(()=>t.value,w=>{w==="accepted"?n():r()}),{isAnalyticsEnabled:s,trackPageView:(w,C)=>{e()&&i(w,C)},trackEvent:(w,C)=>{e()&&c(w,C)},screenView:(w,C)=>{e()&&u(w,C)},exception:(w,C=!1)=>{e()&&f(w,C)},time:w=>e()?m(w):{send:()=>{}}}}const _7e=[{path:"/",component:hse,meta:{title:"Home"}},{path:"/settings",component:Qre,meta:{title:"Settings"}},{path:"/stats",component:Z8e,meta:{title:"Stats & Multipliers"}},{path:"/upgrades",component:Lle,meta:{title:"Upgrades"},beforeEnter:(t,e,s)=>{if(Cr().isFeatureUnlocked.upgrades)s();else{s("/");try{const{showToast:r}=Us();r("Complete 10 trips to unlock Evolution","info")}catch{console.warn("Toast system not available")}}}},{path:"/adventure",component:k_e,meta:{title:"Adventure"},beforeEnter:(t,e,s)=>{const{isAdventureUnlocked:n}=ud();if(n.value)s();else{s("/upgrades");try{const{showToast:r}=Us();r("You need to unlock Adventure Mode first (50 EP)","error")}catch{console.warn("Toast system not available")}}}},{path:"/bosses",component:KNe,meta:{title:"Boss Challenges"},beforeEnter:(t,e,s)=>{const{isAdventureUnlocked:n}=ud(),r=kn();if(!n.value){s("/upgrades");try{const{showToast:o}=Us();o("You need to unlock Adventure Mode first (50 EP)","error")}catch{console.warn("Toast system not available")}return}if(r.isBossSystemUnlocked)s();else{s("/adventure");try{const{showToast:o}=Us();o("You need to unlock Boss Challenges from the Evolution tab","info")}catch{console.warn("Toast system not available")}}}},{path:"/quests",component:s$e,meta:{title:"Quests"},beforeEnter:(t,e,s)=>{const{isAdventureUnlocked:n}=ud();if(n.value)s();else{s("/upgrades");try{const{showToast:r}=Us();r("You need to unlock Adventure Mode first (50 EP)","error")}catch{console.warn("Toast system not available")}}}},{path:"/inventory",component:V2e,meta:{title:"Inventory"},beforeEnter:(t,e,s)=>{const{isAdventureUnlocked:n}=ud();if(n.value)s();else{s("/");const{showToast:r}=Us();r("Purchase Adventure Mode from the Evolution tab (50 EP)","info")}}},{path:"/achievements",component:bEe,meta:{title:"Achievements"}},{path:"/changelog",component:IEe,meta:{title:"Changelog"}},{path:"/wiki",component:Z4e,meta:{title:"Wiki"}},{path:"/simulation",component:u$e,meta:{title:"Ant Simulation"}},{path:"/aphid-farm",component:eDe,meta:{title:"Aphid Farm"},beforeEnter:(t,e,s)=>{if(Cr().isFeatureUnlocked.aphidFarm)s();else{s("/");try{const{showToast:r}=Us();r("Complete more game progress to unlock the Aphid Farm","info")}catch{console.warn("Toast system not available")}}}},{path:"/collectibles",component:$Oe,meta:{title:"Collectibles"},beforeEnter:(t,e,s)=>{const{isAdventureUnlocked:n}=ud();if(n.value)s();else{s("/upgrades");try{const{showToast:r}=Us();r("You need to unlock Adventure Mode first (50 EP)","error")}catch{console.warn("Toast system not available")}}}},{path:"/neurotrails",component:S8e,meta:{title:"Neurotrails"},beforeEnter:(t,e,s)=>{if(Cr().isFeatureUnlocked.neurotrails)s();else{s("/");try{const{showToast:r}=Us();r("Complete more game progress to unlock the Neurotrails","info")}catch{console.warn("Toast system not available")}}}}],a1=e8({history:IU(),routes:_7e});a1.isReady().then(()=>{const{trackPageView:t}=y7e();a1.afterEach(e=>{t(e.path,e.meta.title)})});const x7e={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},k7e={class:"bg-purple-600 dark:bg-purple-800 p-4 flex justify-between items-center"},w7e={class:"flex items-center"},E7e={class:"bg-purple-800 dark:bg-purple-900 text-white rounded-full px-3 py-1 text-sm mr-3"},C7e={class:"p-6"},S7e={class:"mb-6 space-y-3"},T7e={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},A7e={class:"font-semibold text-green-600 dark:text-green-400 text-xl"},I7e={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},P7e={class:"font-semibold text-blue-600 dark:text-blue-400 text-xl"},M7e={class:"mt-6"},$7e={key:0},R7e=["disabled"],L7e={key:0},D7e={key:1},N7e={key:1},O7e={class:"text-center"},F7e={class:"countdown-timer bg-gray-100 dark:bg-gray-700 rounded-md px-4 py-2 font-mono text-gray-800 dark:text-gray-200 text-2xl"},U7e=Je({__name:"DailyRewardModal",props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const s=t,n=e,{isClosing:r,handleClose:o}=Gr(),i=hf(),c=Y(!1);let u=null;const d=Y("00:00:00"),m=()=>{d.value=i.getFormattedTimeRemaining()},f=()=>{u&&clearInterval(u),m(),u=window.setInterval(()=>{m(),d.value==="00:00:00"&&!i.isRewardAvailable&&window.location.reload()},1e3)};Et(()=>{f()}),ar(()=>{u&&clearInterval(u)});const p=()=>{o(()=>n("close"),200)},g=A=>{A.key==="Escape"&&s.show&&p()};dt(()=>s.show,A=>{A?document.addEventListener("keydown",g):document.removeEventListener("keydown",g)});const w=q(()=>be(i.foodMultiplier,2)),C=q(()=>be(i.epMultiplier,2)),E=q(()=>i.currentStreak.toString().padStart(2,"0")),k=()=>{c.value=!0,setTimeout(()=>{i.claimDailyReward(),c.value=!1,f(),p()},500)};return(A,S)=>A.show?(h(),v("div",x7e,[a("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm modal-backdrop","data-modal-backdrop":"true",onClick:p}),a("div",{class:K(["relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden transition duration-200 transform",{"scale-100 opacity-100":A.show&&!b(r),"scale-95 opacity-0":b(r)}])},[a("div",k7e,[S[1]||(S[1]=a("div",{class:"flex items-center"},[a("i",{class:"i-heroicons-gift text-white text-xl mr-2"}),a("h3",{class:"text-white font-bold text-lg"},"Daily Rewards")],-1)),a("div",w7e,[a("div",E7e," Streak: "+_(E.value),1),a("button",{onClick:p,class:"text-white hover:text-gray-200 transition-colors"},S[0]||(S[0]=[a("i",{class:"i-heroicons-x-mark text-xl"},null,-1)]))])]),a("div",C7e,[a("div",S7e,[a("div",T7e,[S[2]||(S[2]=a("span",{class:"text-gray-700 dark:text-gray-300 font-medium"},"Food Production:",-1)),a("span",A7e,_(w.value)+"x",1)]),a("div",I7e,[S[3]||(S[3]=a("span",{class:"text-gray-700 dark:text-gray-300 font-medium"},"Evolution Points:",-1)),a("span",P7e,_(C.value)+"x",1)])]),a("div",M7e,[b(i).isRewardAvailable?(h(),v("div",$7e,[a("button",{onClick:k,disabled:c.value,class:"w-full bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 text-white font-bold py-3 px-4 rounded-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 disabled:opacity-50 text-lg flex items-center justify-center"},[c.value?(h(),v("span",L7e,S[4]||(S[4]=[a("i",{class:"i-heroicons-arrow-path animate-spin inline-block mr-2"},null,-1),oe(" Claiming... ")]))):(h(),v("span",D7e,S[5]||(S[5]=[a("i",{class:"i-heroicons-gift mr-2"},null,-1),oe(" Claim Daily Reward ")])))],8,R7e),S[6]||(S[6]=a("p",{class:"text-center text-sm mt-2 text-gray-500 dark:text-gray-400"}," Log in daily to increase your multipliers! ",-1))])):(h(),v("div",N7e,[S[7]||(S[7]=a("div",{class:"text-center text-gray-500 dark:text-gray-400 text-sm mb-3"}," Next reward available in: ",-1)),a("div",O7e,[a("span",F7e,_(d.value),1)]),S[8]||(S[8]=a("p",{class:"text-center text-sm mt-4 text-gray-500 dark:text-gray-400"}," Come back tomorrow to continue your streak! ",-1))]))])])],2)])):Q("",!0)}}),q7e={class:"relative group"},B7e=["disabled"],V7e={class:"relative w-16 h-16 sm:w-24 sm:h-24 flex items-center justify-center"},H7e=["src"],G7e={key:1,class:"absolute inset-0 flex items-center justify-center"},j7e={class:"absolute inset-0 w-full h-full -rotate-90 transform pointer-events-none",viewBox:"0 0 100 100"},W7e=["stroke-dasharray","stroke-dashoffset"],z7e={key:0,class:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs font-bold p-1 rounded-full shadow-lg animate-pulse z-30"},Q7e={key:1,class:"absolute left-0 top-1/2 transform -translate-x-[calc(100%+3px)] sm:-translate-x-[calc(100%+5px)] -translate-y-1/2 bg-amber-600 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm"},K7e={class:"absolute top-1/2 right-0 transform translate-x-[calc(100%+3px)] sm:translate-x-[calc(100%+5px)] -translate-y-1/2 bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-100 text-xs font-medium px-2 py-0.5 rounded-full shadow-sm z-25"},Y7e={class:"absolute -top-10 sm:-top-12 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-amber-900 text-amber-50 text-xs rounded px-3 py-2 w-max pointer-events-none z-25 shadow-lg transition-opacity duration-200"},X7e=Je({__name:"ColonyRushButton",setup(t){const e=Am(),{showToast:s}=Us(),n=Y(!1);async function r(){if(!e.isFeatureUnlocked){s("Colony Rush feature is not unlocked yet!","warning");return}if(!e.isRushAvailable){s("Colony Rush not ready yet!","warning");return}n.value=!0;try{await e.executeRush()?s(`Colony Rush activated! Processing ${e.rushDurationSeconds} seconds of game time...`,"success"):s("Failed to activate Colony Rush","error")}catch(u){console.error("Error during colony rush:",u),s("Error during colony rush","error")}finally{n.value=!1}}const o=q(()=>({"bg-emerald-500 hover:bg-emerald-600 cursor-pointer animate-ready-pulse":e.isRushAvailable&&!e.isProcessingRush,"bg-slate-500 dark:bg-slate-700 cursor-not-allowed opacity-60":!e.isRushAvailable,"bg-blue-600 dark:bg-blue-500 animate-processing cursor-not-allowed":e.isProcessingRush})),i=q(()=>e.isFeatureUnlocked?e.isProcessingRush?`Processing ${e.rushDurationSeconds} seconds of game time...`:e.isRushAvailable?`Activate Colony Rush to skip ${e.rushDurationSeconds} seconds ahead!`:`Available after ${e.ticksUntilNextRush} more foraging trips`:"Unlock Colony Rush through Evolution upgrades"),c=()=>{try{return new URL("/assets/colony-rush-dRKrIvKE.png",import.meta.url).href}catch{return}};return(u,d)=>(h(),v("div",q7e,[a("button",{class:K(["flex items-center justify-center w-20 h-20 sm:w-28 sm:h-28 rounded-full text-white shadow-lg transform transition-all duration-300 hover:scale-110 sm:hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 relative z-50",o.value]),disabled:!b(e).isRushAvailable||b(e).isProcessingRush,onClick:d[0]||(d[0]=m=>r())},[a("div",V7e,[c()&&!b(e).isProcessingRush?(h(),v("img",{key:0,src:c(),alt:"Colony Rush",class:"w-full h-full object-contain",style:{"image-rendering":"pixelated"}},null,8,H7e)):Q("",!0),b(e).isProcessingRush?(h(),v("span",G7e,d[1]||(d[1]=[a("span",{class:"i-heroicons-arrow-path text-2xl animate-spin text-white"},null,-1)]))):Q("",!0)])],10,B7e),(h(),v("svg",j7e,[d[2]||(d[2]=a("circle",{class:"text-gray-200 dark:text-gray-700 stroke-current","stroke-width":"10",fill:"transparent",r:"45",cx:"50",cy:"50"},null,-1)),a("circle",{class:K(["stroke-current transition-all duration-300",{"text-emerald-500 dark:text-emerald-400":b(e).isRushAvailable&&!b(e).isProcessingRush,"text-slate-400 dark:text-slate-600":!b(e).isRushAvailable,"text-blue-500 dark:text-blue-400":b(e).isProcessingRush}]),"stroke-width":"10",fill:"transparent",r:"45",cx:"50",cy:"50","stroke-dasharray":2*Math.PI*45,"stroke-dashoffset":2*Math.PI*45*(1-b(e).cooldownPercentage/100)},null,10,W7e)])),b(e).isProcessingRush?(h(),v("div",z7e,d[3]||(d[3]=[a("span",{class:"i-heroicons-arrow-path text-sm animate-spin"},null,-1)]))):Q("",!0),!b(e).isRushAvailable&&!b(e).isProcessingRush?(h(),v("div",Q7e,_(b(e).ticksUntilNextRush),1)):Q("",!0),a("div",K7e,_(b(e).rushesRemaining)+"/"+_(b(e).maxRushesPerDay),1),a("div",Y7e,[oe(_(i.value)+" ",1),d[4]||(d[4]=a("span",{class:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-amber-900 rotate-45"},null,-1))])]))}}),J7e=Ct(X7e,[["__scopeId","data-v-f3791a66"]]),Z7e="/assets/header-bg-f_L3iUL4.png",h5="/assets/food-DdgRe-9q.png",Sy="/assets/ant-BfLV_1uY.png",g5="/assets/time-BSxcnahb.png",Gp="/assets/ep-24tPMwVI.png",v5="/assets/honey-Bf9YRR_2.png",b5="/assets/pe-BTFlurUW.png",eqe="/assets/leaf-CZ8oI6cN.png",l1="/assets/logo-BybHSymN.png",tqe={class:"flex flex-col h-full bg-amber-50 dark:bg-gray-900 text-amber-900 dark:text-amber-100 font-sans w-full main-background lg:flex-row"},sqe={class:"flex items-center justify-between p-4 border-b border-amber-800/50 flex-shrink-0"},nqe=["src"],rqe={key:0,class:"text-lg font-extrabold tracking-tight whitespace-nowrap"},oqe={key:0,class:"p-3 border-b border-amber-800/30 flex-shrink-0"},iqe={class:"space-y-2 text-sm"},aqe={class:"flex items-center justify-between"},lqe={class:"flex items-center"},cqe=["src"],uqe={class:"flex items-center justify-between"},dqe={class:"flex items-center"},mqe=["src"],fqe={key:0,class:"flex items-center justify-between"},pqe={class:"flex items-center"},hqe=["src"],gqe={key:1,class:"flex items-center justify-between"},vqe={class:"flex items-center"},bqe={key:2,class:"flex items-center justify-between"},yqe={class:"flex items-center"},_qe=["src"],xqe={key:3,class:"flex items-center justify-between"},kqe={class:"flex items-center"},wqe=["src"],Eqe={class:"py-2 overflow-y-auto overflow-x-hidden flex-1"},Cqe={class:"border-t border-amber-800/30 pt-2"},Sqe={class:"text-xs uppercase text-amber-400/80 font-semibold"},Tqe={key:1},Aqe={key:0,class:"ml-3 flex-1"},Iqe={class:"block font-medium"},Pqe={class:"block text-2xs text-amber-400/70"},Mqe={key:1,class:"absolute top-2 right-3 w-2.5 h-2.5 bg-green-500 rounded-full shadow-green-glow animate-harvest-pulse"},$qe={key:1,class:"flex items-center py-2 px-4 transition-colors duration-200 relative group"},Rqe=["onClick"],Lqe={key:0,class:"ml-3 flex-1"},Dqe={class:"block font-medium"},Nqe={class:"block text-2xs text-amber-400/50"},Oqe={key:0,class:"tooltip-container absolute top-10 left-1/2 transform -translate-x-1/2 w-48 bg-amber-950 text-amber-50 rounded-md shadow-lg invisible group-hover:visible transition-all duration-200 z-[1000] p-2.5 text-sm font-medium border border-amber-800/30"},Fqe={class:"ml-2 flex-1"},Uqe={class:"block text-sm font-medium"},qqe={class:"block text-2xs text-amber-400/70"},Bqe={key:1,class:"flex items-center py-1.5 pl-12 pr-4 transition-colors duration-200 relative group"},Vqe=["onClick"],Hqe={class:"ml-2 flex-1"},Gqe={class:"block text-sm font-medium"},jqe={class:"block text-2xs text-amber-400/50"},Wqe={class:"tooltip-container absolute top-8 left-1/2 transform -translate-x-1/2 w-48 bg-amber-950 text-amber-50 rounded-md shadow-lg invisible group-hover:visible transition-all duration-200 z-[1000] p-2.5 text-sm font-medium border border-amber-800/30"},zqe={key:1,class:"p-4 border-t border-amber-800/30 flex-shrink-0"},Qqe={class:"flex flex-col flex-1 min-h-0 overflow-hidden"},Kqe={class:"relative z-10"},Yqe={class:"p-2 md:p-3 border-b border-amber-800/20 dark:border-amber-950/30"},Xqe={class:"flex items-center justify-between mb-2"},Jqe={class:"flex items-center gap-3"},Zqe=["src"],eBe={class:"flex items-center gap-3"},tBe={key:0,class:"flex items-center gap-1 bg-blue-600/80 px-2 py-1 rounded-md text-xs md:text-sm font-medium"},sBe={class:"hidden sm:inline"},nBe={class:"sm:hidden"},rBe={key:0,class:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full shadow-red-glow animate-ping"},oBe={class:"text-xs bg-amber-900/30 dark:bg-amber-950/50 px-2 py-0.5 rounded-full whitespace-nowrap"},iBe={key:0,class:"bg-black/5 dark:bg-white/5 rounded-md p-2 mt-2"},aBe={class:"flex flex-wrap items-center gap-1.5"},lBe=["src"],cBe=["src"],uBe={class:"flex items-center rounded-full px-1.5 py-0.5 bg-amber-100/60 dark:bg-gray-700/60"},dBe={class:"text-2xs sm:text-sm md:text-base font-medium text-amber-900 dark:text-amber-100"},mBe={key:0,class:"hidden md:block w-px h-6 bg-amber-700/20 dark:bg-amber-300/20 mx-1"},fBe={key:1,class:"flex flex-wrap items-center gap-1.5"},pBe=["src"],hBe=["src"],gBe={key:2,class:"hidden md:block w-px h-6 bg-amber-700/20 dark:bg-amber-300/20 mx-1"},vBe={key:3,class:"flex flex-wrap items-center gap-1.5"},bBe=["src"],yBe=["src"],_Be=["src"],xBe={key:4,class:"hidden md:block w-px h-6 bg-amber-700/20 dark:bg-amber-300/20 mx-1"},kBe={key:5,class:"flex flex-wrap items-center gap-1.5"},wBe={class:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 bg-purple-900 text-purple-50 text-xs rounded px-3 py-2 w-max pointer-events-none z-10 shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200"},EBe={class:"relative mx-2 md:mx-3 mb-4 p-2 rounded-md"},CBe={class:"flex justify-between items-center mb-1 px-1"},SBe={class:"text-2xs text-amber-200 dark:text-amber-300"},TBe={class:"h-3 relative rounded-lg overflow-hidden bg-amber-950/60 dark:bg-amber-900/60 border border-amber-800 shadow-inner"},ABe={key:0,class:"absolute bottom-[-40px] sm:bottom-[-60px] left-1/2 transform -translate-x-1/2 z-50"},IBe={class:"bg-gradient-to-r from-gray-800/90 to-gray-700/90 dark:from-gray-900/90 dark:to-gray-800/90 text-amber-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] relative z-10 lg:hidden"},PBe={class:"flex justify-around items-center"},MBe=["title"],$Be={class:"text-2xs mt-0.5 font-medium text-amber-100 hidden xs:block"},RBe={class:"text-2xs mt-0.5 font-medium text-amber-100 hidden xs:block"},LBe={class:"text-2xs mt-0.5 font-medium text-amber-100 hidden xs:block"},DBe={class:"relative"},NBe={key:0,class:"absolute -top-1.5 -right-1.5 w-3 h-3 bg-green-500 rounded-full shadow-green-glow animate-harvest-pulse"},OBe={class:"text-2xs mt-0.5 font-medium text-shadow-nav text-white hidden xs:block"},FBe=["onClick"],UBe={class:"text-2xs mt-0.5 font-medium text-gray-400 text-shadow-sm hidden xs:block"},qBe={key:0,class:"fixed inset-x-0 bottom-0 z-20"},BBe={class:"relative bg-gradient-to-r from-amber-50 to-amber-100 dark:from-gray-900 dark:to-gray-800 text-amber-900 dark:text-amber-100 rounded-t-xl shadow-lg transform max-h-[80vh] overflow-y-auto"},VBe={class:"p-2"},HBe={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 p-2"},GBe={class:"relative"},jBe={key:0,class:"absolute -top-1.5 -right-1.5 w-3 h-3 bg-green-500 rounded-full shadow-green-glow animate-harvest-pulse"},WBe={class:"mt-1 text-xs font-medium text-center text-amber-900 dark:text-amber-100"},zBe={key:0,class:"fixed inset-x-0 bottom-0 z-20"},QBe={class:"relative bg-gradient-to-r from-amber-50 to-amber-100 dark:from-gray-900 dark:to-gray-800 text-amber-900 dark:text-amber-100 rounded-t-xl shadow-lg transform max-h-[80vh] overflow-y-auto"},KBe={class:"p-2"},YBe={class:"grid grid-cols-2 gap-2 p-2"},XBe={key:0,class:"fixed inset-x-0 bottom-0 z-20"},JBe={class:"relative bg-gradient-to-r from-amber-50 to-amber-100 dark:from-gray-900 dark:to-gray-800 text-amber-900 dark:text-amber-100 rounded-t-xl shadow-lg transform max-h-[80vh] overflow-y-auto"},ZBe={class:"p-2"},e9e={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 p-2"},t9e={class:"text-xs text-amber-700 dark:text-amber-300/80"},s9e={key:0,class:"ml-1 px-1 text-2xs rounded-full bg-purple-900/50 text-purple-300"},n9e=Je({__name:"MainLayout",setup(t){const e=Y(!1),s=Vn(),n=Ht(),r=St(),o=Cr(),i=Ks(),c=Wt();sn();const u=hn(),d=Ls(),m=Tr(),{showToast:f}=Us(),p=Tu(),g=Hu(),{isFeatureUnlocked:w}=e_(o),{isCalculatingOfflineProgress:C,offlineProgressTicksProcessed:E,offlineProgressTotalTicks:k}=e_(m),{formatHoneydew:A,honeydew:S}=If(),{getCurrencyClasses:T}=Ga(),R=T("food"),L=T("worker"),P=T("honeydew"),I=T("time"),D=T("evolutionPoints"),U=T("pheromoneEssence"),M=T("ascension"),{shouldAnimateFeature:x}=uL(),$=Y(!0),Z=Y({upgrades:!1,adventure:!1,inventory:!1}),me=Y(0),re=q(()=>Math.round(me.value)),J=Y(!0),le=Y(window.innerWidth>=1024),se=()=>{le.value&&(J.value=!J.value,localStorage.setItem("sidebar-state",J.value?"open":"closed"))};let z=null;const ce=()=>{s.updateProgress(),o.checkProgression();const he=s.progressPercentage,ye=he-me.value;Math.abs(ye)>.1?me.value+=ye*.1:me.value=he,z=requestAnimationFrame(ce)};Et(()=>{x("upgrades")&&(Z.value.upgrades=!0,setTimeout(()=>{Z.value.upgrades=!1},1500)),me.value=s.progressPercentage,z=requestAnimationFrame(ce),document.addEventListener("click",B),localStorage.getItem("hasVisitedSimulation")==="true"&&($.value=!1),p.currentRoute.value.path==="/simulation"&&($.value=!1);const he=localStorage.getItem("sidebar-state");he&&(J.value=he==="open"),window.addEventListener("resize",pe),pe()});const pe=()=>{le.value=window.innerWidth>=1024,le.value&&localStorage.getItem("sidebar-state")!=="closed"&&(J.value=!0),le.value||(J.value=!1)};dt(()=>w.value.upgrades,(he,ye)=>{he&&!ye&&(Z.value.upgrades=!0,setTimeout(()=>{Z.value.upgrades=!1},1500))});const _e=q(()=>r.getUpgradeCount("unlockAdventure").gt(0)),Ee=q(()=>r.getUpgradeCount("unlockQuests").gt(0)),Ue=q(()=>r.getUpgradeCount("unlockBossChallenges").gt(0)),ze=(he,ye)=>{f(ye,"info")},Re=Y(null),$e=he=>{Re.value===he?Re.value=null:Re.value=he},Ce=q(()=>w.value.aphidFarm?d.fields.some(he=>he.isHarvestable):!1),Oe=he=>"divider"in he&&he.divider===!0,ve=he=>!("divider"in he)||he.divider!==!0,fe=q(()=>[{name:"Colony",icon:"i-heroicons-bug-ant",route:"/",disabled:!1},{name:"Evolution",icon:"i-heroicons-sparkles",route:"/upgrades",disabled:!w.value.evolution,tooltip:"Purchase 5 nurseries to unlock Evolution",colors:D},{name:"Adventure",icon:"i-heroicons-bolt",action:_e.value?"toggleAdventurePanel":void 0,route:_e.value?"/adventure":"#",disabled:!_e.value,tooltip:"Unlock Adventure Mode from the Evolution tab (50 EP)",colors:R},{name:"Neurotrails",icon:"i-heroicons-bolt-slash",route:"/neurotrails",disabled:!Fr().featureUnlocked,tooltip:"Unlocked when you have a colony",colors:D},{name:"Inventory",icon:"i-heroicons-squares-2x2",action:_e.value?"toggleInventoryPanel":void 0,route:_e.value?"/inventory":"#",disabled:!_e.value,tooltip:"Unlock Adventure Mode first",description:"Manage adventure items"},{name:"More",icon:"i-heroicons-ellipsis-horizontal",action:"toggleMorePanel",route:"#",disabled:!1}]),X=q(()=>[...[{name:"Colony",icon:"i-heroicons-bug-ant",route:"/",disabled:!1,description:"Manage your ant colony"},{name:"Evolution",icon:"i-heroicons-sparkles",route:"/upgrades",disabled:!w.value.evolution,tooltip:"Purchase 5 nurseries to unlock Evolution",colors:D,description:"Evolve your colony with EP"},{name:"Adventure",icon:"i-heroicons-bolt",route:_e.value?"/adventure":"#",disabled:!_e.value,tooltip:"Unlock Adventure Mode from the Evolution tab (50 EP)",colors:R,description:"Send ants on adventures",children:_e.value?[{name:"Combat",icon:"i-heroicons-bolt",route:"/adventure",description:"Battle enemies",disabled:!1},{name:"Shop",icon:"i-heroicons-beaker",route:"/adventure?tab=shop",description:"Buy pheromone upgrades",disabled:!1},{name:"Quests",icon:"i-heroicons-clipboard-document-list",route:"/adventure?tab=quests",disabled:!Ee.value,tooltip:"Unlock Quests from the Evolution tab (1000 EP)",description:"Complete quests for rewards"},{name:"Mega Ant",icon:"i-heroicons-bug-ant",route:"/adventure?tab=megaAnt",disabled:!c.isUnlocked,tooltip:"Unlock Mega Ant Evolution from the Evolution tab (100M EP)",description:"Evolve a powerful mega ant"},{name:"Bosses",icon:"i-heroicons-trophy",route:"/bosses",disabled:!Ue.value,tooltip:"Unlock Boss Challenges from the Evolution tab",colors:U,description:"Battle powerful boss enemies"},{name:"Collectibles",icon:"i-heroicons-star",route:"/collectibles",description:"View your collectibles and boosts",disabled:!1}]:[]},{name:"Inventory",icon:"i-heroicons-squares-2x2",route:_e.value?"/inventory":"#",disabled:!_e.value,tooltip:"Unlock Adventure Mode first",description:"Manage adventure items"},{name:"Aphid Farm",icon:"i-heroicons-sun",route:"/aphid-farm",disabled:!Ls().featureUnlocked,tooltip:"Unlocked when you have a queen chamber",get hasNotification(){return Ce.value},colors:P,description:"Collect honeydew from aphids"},{name:"Neurotrails",icon:"i-heroicons-bolt-slash",route:"/neurotrails",disabled:!Fr().featureUnlocked,tooltip:"Unlocked when you have a colony",colors:D,description:"Explore neural pathways"}],{divider:!0,name:"Utilities"},{name:"Quests",icon:"i-heroicons-clipboard-document-list",route:Ee.value?"/quests":"#",disabled:!Ee.value,tooltip:"Unlock Quests from the Evolution tab (1000 EP)",colors:D,description:"Complete quests for rewards"},{name:"Simulation",icon:"i-heroicons-rectangle-group",route:"/simulation",disabled:!1,description:"View ant colony simulation"},{name:"Achievements",icon:"i-heroicons-trophy",route:"/achievements",disabled:!1,description:"View your achievements"},{divider:!0,name:"Information"},{name:"Wiki",icon:"i-heroicons-information-circle",route:"/wiki",disabled:!1,description:"Game information and help"},{name:"Changelog",icon:"i-heroicons-document-text",route:"/changelog",disabled:!1,description:"View recent updates"},{name:"Settings",icon:"i-heroicons-cog-6-tooth",route:"/settings",disabled:!1,description:"Game settings and options"},{name:"Stats",icon:"i-heroicons-chart-bar",route:"/stats",disabled:!1,description:"View multiplier breakdowns"}]),H=Y(!1),W=Y(!1),ge=Y(!1),Te=()=>{H.value=!H.value,H.value&&(W.value=!1,ge.value=!1)},Ie=()=>{W.value=!W.value,W.value&&(H.value=!1,ge.value=!1)},Ne=()=>{ge.value=!ge.value,ge.value&&(H.value=!1,W.value=!1)},{isDarkMode:je}=Af(),N=W1(),ue=q(()=>{const he={colony:!0,time:!0,currency:!0,ascension:!0},ye=N.path;return ye==="/"?he:ye==="/upgrades"?{...he,time:!1}:ye.startsWith("/adventure")?{...he,time:!1}:ye==="/aphid-farm"?{...he,time:!1}:ye==="/simulation"?{...he,time:!0,currency:!1,ascension:!1}:ye==="/bosses"?{...he,time:!1}:["/achievements","/wiki","/changelog","/settings","/quests","/inventory","/stats"].includes(ye)?{...he,time:!1,ascension:!1}:he}),j=q(()=>[{name:"Changelog",icon:"i-heroicons-clock",route:"/changelog",disabled:!1},{name:"Settings",icon:"i-heroicons-cog-6-tooth",route:"/settings",disabled:!1},{name:"Stats",icon:"i-heroicons-chart-bar",route:"/stats",disabled:!1,description:"View detailed multiplier stats"},{name:"Aphids",icon:"i-heroicons-sun",route:"/aphid-farm",disabled:!Ls().featureUnlocked,tooltip:"Unlocked when you have a queen chamber",get hasNotification(){return Ce.value},colors:P,customIcon:eqe},{name:"Neurotrails",icon:"i-heroicons-bolt-slash",route:"/neurotrails",disabled:!Fr().featureUnlocked,tooltip:"Unlocked when you have a colony",colors:D,customIcon:Gp},{name:"Achievements",icon:"i-heroicons-trophy",route:"/achievements",disabled:!1},{name:"Quests",icon:"i-heroicons-clipboard-document-list",route:Ee.value?"/quests":"#",disabled:!Ee.value,tooltip:"Unlock Quests from the Evolution tab (1000 EP)",colors:D,customIcon:Gp},{name:"Simulation",icon:"i-heroicons-bug-ant",route:"/simulation",disabled:!1,customIcon:Sy},{name:"Wiki",icon:"i-heroicons-information-circle",route:"/wiki",disabled:!1},{name:"Changelog",icon:"i-heroicons-document-text",route:"/changelog",disabled:!1},{name:"Settings",icon:"i-heroicons-cog-6-tooth",route:"/settings",disabled:!1}]),B=he=>{Re.value!==null&&!he.target.closest(".nav-item")&&(Re.value=null)};dt(()=>N.path,he=>{H.value=!1,W.value=!1,ge.value=!1,he==="/simulation"&&($.value=!1,localStorage.setItem("hasVisitedSimulation","true"))});const ie=q(()=>r.getUpgradeCount("unlockColonyRush").gt(0)),V=q(()=>n.getActualProduction("worker")),O=q(()=>k.value===0?0:Math.min(100,Math.round(E.value/k.value*100))),te=()=>{e.value=!e.value},G=hf(),ne=q(()=>`${g.morale.toFixed(2)}%`);return ar(()=>{z!==null&&cancelAnimationFrame(z),document.removeEventListener("click",B),window.removeEventListener("resize",pe)}),(he,ye)=>{const ae=rP("router-link");return h(),v(De,null,[a("div",{class:K([{dark:b(je)},"h-dvh w-full overflow-hidden"])},[a("div",tqe,[a("aside",{class:K(["hidden lg:flex bg-gradient-to-b from-amber-900/90 to-amber-800/90 dark:from-gray-900/90 dark:to-gray-800/90 text-amber-50 shadow-lg z-20 transition-all duration-300 flex-col h-dvh",J.value?"w-64":"w-16"])},[a("div",sqe,[a("div",{class:K(["flex items-center space-x-3",{"justify-center w-full":!J.value}])},[a("img",{src:b(l1),class:"w-8 h-8",alt:"Logo"},null,8,nqe),J.value?(h(),v("h1",rqe,"Idle Ant Farm")):Q("",!0)],2),J.value?(h(),v("button",{key:0,onClick:se,class:"p-1 rounded-full hover:bg-amber-800/50 transition-colors"},ye[7]||(ye[7]=[a("span",{class:"i-heroicons-chevron-left text-amber-200"},null,-1)]))):Q("",!0)]),J.value&&b(w).colonyStatus?(h(),v("div",oqe,[ye[14]||(ye[14]=a("h3",{class:"text-xs uppercase text-amber-400/80 font-semibold mb-2"},"Resources",-1)),a("div",iqe,[a("div",aqe,[a("div",lqe,[a("img",{src:b(h5),class:K(["w-4 h-4 mr-2",b(R).icon]),alt:"Food"},null,10,cqe),ye[8]||(ye[8]=a("span",{class:"text-amber-200"},"Food:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(R).text])},_(b(n).formatFood()),3)]),a("div",uqe,[a("div",dqe,[a("img",{src:b(Sy),class:K(["w-4 h-4 mr-2",b(L).icon]),alt:"Workers"},null,10,mqe),ye[9]||(ye[9]=a("span",{class:"text-amber-200"},"Workers:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(L).text])},_(b(n).formatGeneratorCount("worker")),3)]),b(w).upgrades?(h(),v("div",fqe,[a("div",pqe,[a("img",{src:b(Gp),class:K(["w-4 h-4 mr-2",b(D).icon]),alt:"EP"},null,10,hqe),ye[10]||(ye[10]=a("span",{class:"text-amber-200"},"EP:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(D).text])},_(b(r).formatEP()),3)])):Q("",!0),b(c).ascensionCount>0?(h(),v("div",gqe,[a("div",vqe,[a("span",{class:K(["i-heroicons-star text-base mr-2",b(M).icon])},null,2),ye[11]||(ye[11]=a("span",{class:"text-amber-200"},"AP:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(M).text])},_(b(c).formatAP()),3)])):Q("",!0),b(w).aphidFarm?(h(),v("div",bqe,[a("div",yqe,[a("img",{src:b(v5),class:K(["w-4 h-4 mr-2",b(P).icon]),alt:"Honeydew"},null,10,_qe),ye[12]||(ye[12]=a("span",{class:"text-amber-200"},"Honeydew:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(P).text])},_(b(A)(b(S))),3)])):Q("",!0),_e.value?(h(),v("div",xqe,[a("div",kqe,[a("img",{src:b(b5),class:K(["w-4 h-4 mr-2",b(U).icon]),alt:"PE"},null,10,wqe),ye[13]||(ye[13]=a("span",{class:"text-amber-200"},"PE:",-1))]),a("span",{class:K(["font-medium px-1.5 py-0.5 rounded bg-amber-800/50 dark:bg-amber-300/70",b(U).text])},_(b(i).formattedPheromoneEssence)+" PE",3)])):Q("",!0)])])):Q("",!0),a("nav",Eqe,[(h(!0),v(De,null,Ge(X.value,(de,Me)=>(h(),v(De,{key:Me},[Oe(de)?(h(),v("div",{key:0,class:K(["px-4 py-2",{hidden:!J.value}])},[a("div",Cqe,[a("span",Sqe,_(de.name),1)])],2)):ve(de)?(h(),v("div",Tqe,[de.disabled?(h(),v("div",$qe,[a("div",{class:"opacity-50 flex items-center w-full",onClick:Le=>ze(de.name,de.tooltip||"")},[a("span",{class:K([de.icon,"text-xl text-amber-500/70"])},null,2),J.value?(h(),v("div",Lqe,[a("span",Dqe,_(de.name),1),a("span",Nqe,_(de.description),1)])):Q("",!0)],8,Rqe),J.value?(h(),v("div",Oqe,[oe(_(de.tooltip)+" ",1),ye[15]||(ye[15]=a("span",{class:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-amber-950 rotate-45 border-t border-l border-amber-800/30"},null,-1))])):Q("",!0)])):(h(),Tt(ae,{key:0,to:de.route,class:K(["flex items-center py-2 px-4 transition-colors duration-200 relative group",[b(N).path===de.route||de.name==="Adventure"&&b(N).path.startsWith("/adventure")?"bg-amber-800/60 border-l-2 border-amber-400":"hover:bg-amber-800/30 border-l-2 border-transparent"]])},{default:Rt(()=>[a("span",{class:K([de.icon,"text-xl",b(N).path===de.route||de.name==="Adventure"&&b(N).path.startsWith("/adventure")?de.colors?de.colors.icon:"text-amber-300":de.colors?de.colors.icon:"text-amber-400"])},null,2),J.value?(h(),v("div",Aqe,[a("span",Iqe,_(de.name),1),a("span",Pqe,_(de.description),1)])):Q("",!0),"hasNotification"in de&&de.hasNotification?(h(),v("span",Mqe)):Q("",!0),de.children&&de.children.length>0&&J.value?(h(),v("span",{key:2,class:K(["text-amber-400",b(N).path.startsWith("/adventure")?"i-heroicons-chevron-down":"i-heroicons-chevron-right"])},null,2)):Q("",!0)]),_:2},1032,["to","class"])),de.children&&de.children.length>0&&J.value&&!de.disabled?(h(!0),v(De,{key:2},Ge(de.children,(Le,it)=>(h(),v(De,{key:`${Me}-${it}`},[Le.disabled?(h(),v("div",Bqe,[a("div",{class:"opacity-50 flex items-center w-full cursor-not-allowed",onClick:Ze=>ze(Le.name,Le.tooltip||"")},[a("span",{class:K([Le.icon,"text-sm text-amber-500/70"])},null,2),a("div",Hqe,[a("span",Gqe,_(Le.name),1),a("span",jqe,_(Le.description),1)])],8,Vqe),a("div",Wqe,[oe(_(Le.tooltip)+" ",1),ye[16]||(ye[16]=a("span",{class:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-amber-900 rotate-45 border-t border-l border-amber-800/30"},null,-1))])])):(h(),Tt(ae,{key:0,to:Le.route,class:K(["flex items-center py-1.5 pl-12 pr-4 transition-colors duration-200 relative group",[Le.name==="Combat"&&b(N).path==="/adventure"&&!b(N).query.tab||Le.route.includes("?tab=")&&b(N).query.tab===Le.route.split("?tab=")[1]||Le.name==="Bosses"&&b(N).path==="/bosses"||Le.name==="Collectibles"&&b(N).path==="/collectibles"?"bg-amber-700/40 border-l-2 border-amber-400":"hover:bg-amber-800/30 border-l-2 border-transparent"]])},{default:Rt(()=>[a("span",{class:K([Le.icon,"text-sm",Le.name==="Combat"&&b(N).path==="/adventure"&&!b(N).query.tab||Le.route.includes("?tab=")&&b(N).query.tab===Le.route.split("?tab=")[1]||Le.name==="Bosses"&&b(N).path==="/bosses"||Le.name==="Collectibles"&&b(N).path==="/collectibles"?"text-amber-300":"text-amber-400"])},null,2),a("div",Fqe,[a("span",Uqe,_(Le.name),1),a("span",qqe,_(Le.description),1)])]),_:2},1032,["to","class"]))],64))),128)):Q("",!0)])):Q("",!0)],64))),128))]),J.value?Q("",!0):(h(),v("div",zqe,[a("button",{onClick:se,class:"p-1 w-8 h-8 flex items-center justify-center rounded-full bg-amber-800/50 hover:bg-amber-700/50 transition-colors"},ye[17]||(ye[17]=[a("span",{class:"i-heroicons-chevron-right text-amber-200"},null,-1)]))]))],2),a("div",Qqe,[a("header",{style:yt({backgroundImage:`url(${b(Z7e)})`,backgroundSize:"cover",backgroundPosition:"center"}),class:"text-amber-50 shadow-lg relative z-30 header-with-bg"},[a("div",Kqe,[a("div",Yqe,[a("div",Xqe,[a("div",Jqe,[a("img",{src:b(l1),class:"w-12 h-12 lg:hidden",alt:"Logo"},null,8,Zqe),ye[19]||(ye[19]=a("h1",{class:"hidden lg:block text-lg md:text-xl font-extrabold tracking-tight"},"Idle Ant Farm",-1)),a("button",{onClick:se,class:"hidden lg:block p-1.5 rounded-md bg-amber-800/40 hover:bg-amber-800/60 transition-colors"},ye[18]||(ye[18]=[a("span",{class:"i-heroicons-bars-3 text-lg text-amber-200"},null,-1)]))]),a("div",eBe,[b(C)?(h(),v("div",tBe,[ye[20]||(ye[20]=a("span",{class:"i-heroicons-clock text-blue-200 animate-pulse"},null,-1)),a("span",sBe,"Calculating Progress: "+_(b(E))+" / "+_(b(k))+" ("+_(O.value)+"%)",1),a("span",nBe,"Calc: "+_(O.value)+"%",1)])):Q("",!0),a("button",{onClick:te,class:K(["flex items-center gap-1 bg-purple-600 hover:bg-purple-500 dark:bg-purple-700 dark:hover:bg-purple-600 px-2 py-1 rounded-md transition-colors text-xs md:text-sm font-medium group relative",{"daily-reward-pulse":b(G).isRewardAvailable}])},[ye[21]||(ye[21]=a("span",{class:"i-heroicons-gift text-purple-200 group-hover:scale-110 transition-transform"},null,-1)),ye[22]||(ye[22]=a("span",{class:"hidden sm:inline"},"Daily Reward",-1)),ye[23]||(ye[23]=a("span",{class:"sm:hidden"},"Reward",-1)),b(G).isRewardAvailable?(h(),v("span",rBe)):Q("",!0)],2),Ye(ae,{to:"/simulation",class:K(["flex items-center gap-1 bg-amber-600 hover:bg-amber-500 dark:bg-amber-700 dark:hover:bg-amber-600 px-2 py-1 rounded-md transition-colors text-xs md:text-sm font-medium group",{"simulation-button-pulse":$.value}]),onClick:ye[0]||(ye[0]=de=>$.value=!1)},{default:Rt(()=>ye[24]||(ye[24]=[a("span",{class:"i-heroicons-bug-ant text-amber-200 group-hover:scale-110 transition-transform"},null,-1),a("span",{class:"hidden sm:inline"},"Ant Simulation",-1),a("span",{class:"sm:hidden"},"Sim",-1)])),_:1},8,["class"]),a("span",oBe,_(b(s).timeRemaining)+"s ",1)])]),b(w).colonyStatus?(h(),v("div",iBe,[a("div",{class:K(["flex flex-wrap items-center gap-1.5 md:gap-2 justify-around",{"feature-unlock-pulse":b(x)("colonyStatus")}])},[a("div",aBe,[a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",b(R).background])},[a("img",{src:b(h5),class:K(["w-4 h-4 mr-1",b(R).icon]),alt:"Food"},null,10,lBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(R).text])},_(b(n).formatFood()),3)],2),a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",b(L).background])},[a("img",{src:b(Sy),class:K(["w-4 h-4 mr-1",b(L).icon]),alt:"Worker"},null,10,cBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(L).text])},_(b(n).formatGeneratorCount("worker")),3)],2),a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",b(R).background])},[a("span",{class:K(["i-heroicons-arrow-trending-up mr-1 text-xs",b(R).icon])},null,2),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(R).text])},_(b(be)(V.value,1))+"/trip",3)],2),a("div",uBe,[ye[25]||(ye[25]=a("span",{class:"i-heroicons-face-smile mr-1 text-sm text-green-600 dark:text-green-400"},null,-1)),a("span",dBe,_(ne.value),1)])]),ue.value.time?(h(),v("div",mBe)):Q("",!0),ue.value.time?(h(),v("div",fBe,[a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",b(I).background])},[a("img",{src:b(g5),class:K(["w-4 h-4 mr-1",b(I).icon]),alt:"Time"},null,10,pBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(I).text])},_(b(s).tickDuration.toFixed(1))+"s/trip",3)],2),a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",b(I).background])},[a("img",{src:b(g5),class:K(["w-4 h-4 mr-1",b(I).icon]),alt:"Time"},null,10,hBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(I).text])},_(b(s).formattedCurrentEvolutionTicks)+" trips",3)],2)])):Q("",!0),ue.value.currency&&(b(w).upgrades||b(w).aphidFarm||_e.value)?(h(),v("div",gBe)):Q("",!0),ue.value.currency&&(b(w).upgrades||b(w).aphidFarm||_e.value)?(h(),v("div",vBe,[b(w).upgrades?(h(),v("div",{key:0,class:K(["flex items-center rounded-full px-1.5 py-0.5",[b(D).background,{"ring-2 ring-amber-300 dark:ring-amber-400 ring-opacity-70":b(N).path==="/upgrades"}]])},[a("img",{src:b(Gp),class:K(["w-4 h-4 mr-1",b(D).icon]),alt:"EP"},null,10,bBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(D).text])},_(b(r).formatEP())+" EP",3)],2)):Q("",!0),b(Ls)().featureUnlocked?(h(),v("div",{key:1,class:K(["flex items-center rounded-full px-1.5 py-0.5",[b(P).background,{"ring-2 ring-amber-300 dark:ring-amber-400 ring-opacity-70":b(N).path==="/aphid-farm"}]])},[a("img",{src:b(v5),class:K(["w-3 h-4 mr-1",b(P).icon]),alt:"Honeydew"},null,10,yBe),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(P).text])},_(b(A)(b(S)))+" HD",3)],2)):Q("",!0),_e.value?(h(),v("div",{key:2,class:K(["flex items-center rounded-full px-1.5 py-0.5",[b(U).background,{"ring-2 ring-amber-300 dark:ring-amber-400 ring-opacity-70":b(N).path.startsWith("/adventure")||b(N).path==="/bosses"}]])},[a("img",{src:b(b5),class:K(["w-3 h-4 mr-1",b(U).icon]),alt:"PE"},null,10,_Be),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(U).text])},_(b(i).formattedPheromoneEssence)+" PE",3)],2)):Q("",!0)])):Q("",!0),ue.value.ascension&&b(c).ascensionCount>0?(h(),v("div",xBe)):Q("",!0),ue.value.ascension&&b(c).ascensionCount>0?(h(),v("div",kBe,[a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5",[b(M).background,{"ring-2 ring-purple-300 dark:ring-purple-400 ring-opacity-70":b(N).path.includes("megaAnt")}]])},[a("span",{class:K(["i-heroicons-star text-base mr-1",b(M).icon])},null,2),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(M).text])},_(b(c).formatAP())+" AP",3)],2),a("div",{class:K(["flex items-center rounded-full px-1.5 py-0.5 group relative",[b(M).background,{"ring-2 ring-purple-300 dark:ring-purple-400 ring-opacity-70":b(N).path.includes("megaAnt")}]])},[a("span",{class:K(["i-heroicons-arrow-up-circle mr-1 text-xs",b(M).icon])},null,2),a("span",{class:K(["text-2xs sm:text-sm md:text-base font-medium",b(M).text])},_(b(c).ascensionCount)+"A",3),a("div",wBe,[a("div",null,"+"+_(b(c).ascensionMultiplier.sub(1).mul(100).toFixed(0))+"% XP Gain",1),ye[26]||(ye[26]=a("div",null,"Preserves Mega Ant upgrades",-1)),ye[27]||(ye[27]=a("span",{class:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-purple-900 rotate-45"},null,-1))])],2)])):Q("",!0)],2)])):Q("",!0)])]),a("div",EBe,[a("div",CBe,[ye[28]||(ye[28]=a("span",{class:"text-2xs text-amber-200 dark:text-amber-300 font-medium flex items-center"},[a("span",{class:"i-heroicons-arrow-path-rounded-square text-2xs mr-0.5"}),oe(" Foraging Trip ")],-1)),a("span",SBe,_(re.value)+"% ",1)]),a("div",TBe,[ye[29]||(ye[29]=a("div",{class:"absolute inset-0 bg-[url('/bg/dirt-pattern.png')] opacity-10 animate-pan bg-repeat pointer-events-none"},null,-1)),a("div",{class:"absolute h-full bg-amber-400/30 dark:bg-amber-200/20 rounded-full transition-all duration-100",style:yt({width:`${re.value}%`})},null,4),a("span",{class:"i-heroicons-bug-ant text-amber-400 dark:text-amber-300 text-sm ant-march ant-shadow absolute top-1/2 -translate-y-1/2 rotate-90",style:yt({left:`calc(${re.value}% - 5px)`,transition:"left 0.1s linear",willChange:"left"})},null,4)])]),b(w).colonyStatus&&ie.value?(h(),v("div",ABe,[Ye(J7e)])):Q("",!0)],4),a("main",{class:K(["flex-1 overflow-y-auto p-4 pb-6 scroll-smooth lg:pb-4",ie.value?"pt-12":""])},[lf(he.$slots,"default",{},void 0,!0)],2),a("footer",IBe,[a("nav",PBe,[(h(!0),v(De,null,Ge(fe.value,(de,Me)=>(h(),v("div",{key:de.name,class:"relative w-full h-full group nav-item",title:de.tooltip},[de.action==="toggleMorePanel"?(h(),v("div",{key:0,onClick:Te,class:K(["flex flex-col items-center py-2.5 px-1 w-full transition-colors duration-200 select-none cursor-pointer bg-amber-700/60 dark:bg-amber-800/60 hover:bg-amber-600/70 dark:hover:bg-amber-700/70",{"border-t-2 border-amber-300":H.value}])},[a("span",{class:K([de.icon,"text-lg text-amber-200"])},null,2),a("span",$Be,_(de.name),1)],2)):de.action==="toggleAdventurePanel"?(h(),v("div",{key:1,onClick:Ie,class:K(["flex flex-col items-center py-2.5 px-1 w-full transition-colors duration-200 select-none cursor-pointer",[W.value?"bg-amber-600/80 dark:bg-amber-700/80 border-t-2 border-amber-300":"bg-amber-800/40 dark:bg-amber-800/40 hover:bg-amber-700/60 dark:hover:bg-amber-700/60"]])},[a("span",{class:K([de.icon,"text-lg",de.colors?de.colors.icon:"text-amber-200"])},null,2),a("span",RBe,_(de.name),1)],2)):de.action==="toggleInventoryPanel"?(h(),v("div",{key:2,onClick:Ne,class:K(["flex flex-col items-center py-2.5 px-1 w-full transition-colors duration-200 select-none cursor-pointer",[ge.value?"bg-amber-600/80 dark:bg-amber-700/80 border-t-2 border-amber-300":"bg-amber-800/40 dark:bg-amber-800/40 hover:bg-amber-700/60 dark:hover:bg-amber-700/60"]])},[a("span",{class:K([de.icon,"text-lg",de.colors?de.colors.icon:"text-amber-200"])},null,2),a("span",LBe,_(de.name),1)],2)):de.disabled?(h(),v("div",{key:4,class:"flex flex-col items-center py-2.5 h px-1 w-full transition-colors duration-200 select-none opacity-60 cursor-not-allowed bg-gray-800/30 dark:bg-gray-900/30",onClick:xt(Le=>{$e(Me),ze(de.name,de.tooltip||"")},["stop"])},[a("span",{class:K([de.icon,"text-lg text-gray-400 text-shadow-sm"])},null,2),a("span",UBe,_(de.name),1),a("span",{class:K(["absolute -top-12 left-1/2 transform -translate-x-1/2 bg-amber-900 text-amber-50 text-xs rounded px-3 py-2 w-max pointer-events-none z-10 shadow-lg",["opacity-0 group-hover:opacity-100 transition-opacity duration-200",{"opacity-100":Re.value===Me}]])},[oe(_(de.tooltip)+" ",1),ye[30]||(ye[30]=a("span",{class:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-amber-900 rotate-45"},null,-1))],2)],8,FBe)):(h(),Tt(ae,{key:3,to:de.route,class:K(["flex flex-col items-center py-2.5 px-1 w-full transition-colors duration-200 select-none",b(N).path===de.route?"bg-amber-600/80 dark:bg-amber-700/80 border-t-2 border-amber-300":"bg-amber-800/40 dark:bg-amber-800/40 hover:bg-amber-700/60 dark:hover:bg-amber-700/60"])},{default:Rt(()=>[a("div",DBe,[a("span",{class:K([de.icon,"text-lg text-shadow-sm",b(N).path===de.route?de.colors?[de.colors.icon,"text-opacity-80"]:"text-amber-200":de.colors?[de.colors.icon,"text-opacity-70"]:"text-amber-300"])},null,2),ve(de)&&de.hasNotification?(h(),v("span",NBe)):Q("",!0)]),a("span",OBe,_(de.name),1)]),_:2},1032,["to","class"]))],8,MBe))),128))])]),Ye(or,{name:"slide-panel"},{default:Rt(()=>[H.value?(h(),v("div",qBe,[a("div",{class:"fixed inset-0 bg-black/30 dark:bg-black/50",onClick:Te}),a("div",BBe,[a("div",{class:"p-4 border-b border-amber-200 dark:border-amber-900/50 flex justify-between items-center sticky top-0 bg-inherit z-10"},[ye[32]||(ye[32]=a("h3",{class:"text-lg font-bold"},"More Options",-1)),a("button",{onClick:Te,class:"p-1 rounded-full hover:bg-amber-200 dark:hover:bg-amber-900/40 transition-colors"},ye[31]||(ye[31]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))]),a("div",VBe,[a("div",HBe,[(h(!0),v(De,null,Ge(j.value,de=>(h(),Tt(ae,{key:de.name,to:de.route,class:K(["flex flex-col items-center p-3 rounded-lg transition-colors duration-200",{"opacity-50 cursor-not-allowed":de.disabled},b(N).path===de.route?"bg-amber-300/70 dark:bg-amber-700/70":de.disabled?"":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Te},{default:Rt(()=>[a("div",GBe,[a("span",{class:K([de.icon,"text-2xl",b(N).path===de.route?de.colors?[de.colors.icon,"text-opacity-90"]:"text-amber-700 dark:text-amber-300":de.colors?[de.colors.icon,"text-opacity-80"]:"text-amber-700 dark:text-amber-300"])},null,2),"hasNotification"in de&&de.hasNotification?(h(),v("span",jBe)):Q("",!0)]),a("span",WBe,_(de.name),1)]),_:2},1032,["to","class"]))),128))])])])])):Q("",!0)]),_:1}),Ye(or,{name:"slide-panel"},{default:Rt(()=>[W.value?(h(),v("div",zBe,[a("div",{class:"fixed inset-0 bg-black/30 dark:bg-black/50",onClick:Ie}),a("div",QBe,[a("div",{class:"p-4 border-b border-amber-200 dark:border-amber-900/50 flex justify-between items-center sticky top-0 bg-inherit z-10"},[ye[34]||(ye[34]=a("h3",{class:"text-lg font-bold flex items-center"},[a("span",{class:"i-heroicons-bolt text-red-600 dark:text-red-500 mr-2"}),oe(" Adventure Sections ")],-1)),a("button",{onClick:Ie,class:"p-1 rounded-full hover:bg-amber-200 dark:hover:bg-amber-900/40 transition-colors"},ye[33]||(ye[33]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))]),a("div",KBe,[a("div",YBe,[Ye(ae,{to:"/adventure",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/adventure"&&!b(N).query.tab?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[35]||(ye[35]=[a("span",{class:"i-heroicons-bolt text-2xl text-red-600 dark:text-red-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Combat"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Fight enemies and collect rewards")],-1)])),_:1},8,["class"]),Ye(ae,{to:"/adventure?tab=shop",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/adventure"&&b(N).query.tab==="shop"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[36]||(ye[36]=[a("span",{class:"i-heroicons-beaker text-2xl text-purple-600 dark:text-purple-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Shop"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Purchase pheromone upgrades")],-1)])),_:1},8,["class"]),Ue.value?(h(),Tt(ae,{key:0,to:"/bosses",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/bosses"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[37]||(ye[37]=[a("span",{class:"i-heroicons-trophy text-2xl text-yellow-600 dark:text-yellow-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Bosses"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Battle powerful boss enemies")],-1)])),_:1},8,["class"])):(h(),v("div",{key:1,class:"flex items-center p-3 rounded-lg transition-colors duration-200 opacity-60 cursor-not-allowed bg-amber-200/30 dark:bg-amber-800/20",onClick:ye[1]||(ye[1]=de=>ze("Bosses","Unlock Boss Challenges from the Evolution tab"))},ye[38]||(ye[38]=[a("span",{class:"i-heroicons-trophy text-2xl text-yellow-600/70 dark:text-yellow-500/70 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900/70 dark:text-amber-100/70"},"Bosses"),a("div",{class:"text-xs text-amber-700/70 dark:text-amber-300/50"},"Locked - Requires Evolution Upgrade")],-1)]))),Ee.value?(h(),Tt(ae,{key:2,to:"/adventure?tab=quests",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/adventure"&&b(N).query.tab==="quests"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[39]||(ye[39]=[a("span",{class:"i-heroicons-clipboard-document-list text-2xl text-amber-600 dark:text-amber-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Quests"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Complete quests for rewards")],-1)])),_:1},8,["class"])):(h(),v("div",{key:3,class:"flex items-center p-3 rounded-lg transition-colors duration-200 opacity-60 cursor-not-allowed bg-amber-200/30 dark:bg-amber-800/20",onClick:ye[2]||(ye[2]=de=>ze("Quests","Unlock Quests from the Evolution tab (1e4 EP)"))},ye[40]||(ye[40]=[a("span",{class:"i-heroicons-clipboard-document-list text-2xl text-amber-600/70 dark:text-amber-500/70 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900/70 dark:text-amber-100/70"},"Quests"),a("div",{class:"text-xs text-amber-700/70 dark:text-amber-300/50"},"Locked - Requires Evolution Upgrade")],-1)]))),b(c).isUnlocked?(h(),Tt(ae,{key:4,to:"/adventure?tab=megaAnt",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/adventure"&&b(N).query.tab==="megaAnt"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[41]||(ye[41]=[a("span",{class:"i-heroicons-bug-ant text-2xl text-green-600 dark:text-green-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Mega Ant"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Evolve a powerful mega ant")],-1)])),_:1},8,["class"])):(h(),v("div",{key:5,class:"flex items-center p-3 rounded-lg transition-colors duration-200 opacity-60 cursor-not-allowed bg-amber-200/30 dark:bg-amber-800/20",onClick:ye[3]||(ye[3]=de=>ze("Mega Ant","Unlock Mega Ant Evolution from the Evolution tab (100M EP)"))},ye[42]||(ye[42]=[a("span",{class:"i-heroicons-bug-ant text-2xl text-green-600/70 dark:text-green-500/70 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900/70 dark:text-amber-100/70"},"Mega Ant"),a("div",{class:"text-xs text-amber-700/70 dark:text-amber-300/50"},"Locked - Requires Evolution Upgrade")],-1)]))),Ye(ae,{to:"/collectibles",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/collectibles"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:Ie},{default:Rt(()=>ye[43]||(ye[43]=[a("span",{class:"i-heroicons-star text-2xl text-yellow-500 dark:text-yellow-400 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Collectibles"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"View your collectibles and boosts")],-1)])),_:1},8,["class"])])])])])):Q("",!0)]),_:1}),Ye(or,{name:"slide-panel"},{default:Rt(()=>[ge.value?(h(),v("div",XBe,[a("div",{class:"fixed inset-0 bg-black/30 dark:bg-black/50",onClick:Ne}),a("div",JBe,[a("div",{class:"p-4 border-b border-amber-200 dark:border-amber-900/50 flex justify-between items-center sticky top-0 bg-inherit z-10"},[ye[45]||(ye[45]=a("h3",{class:"text-lg font-bold flex items-center"},[a("span",{class:"i-heroicons-squares-2x2 text-amber-700 dark:text-amber-500 mr-2"}),oe(" Inventory Sections ")],-1)),a("button",{onClick:Ne,class:"p-1 rounded-full hover:bg-amber-200 dark:hover:bg-amber-900/40 transition-colors"},ye[44]||(ye[44]=[a("span",{class:"i-heroicons-x-mark text-xl"},null,-1)]))]),a("div",ZBe,[a("div",e9e,[Ye(ae,{to:"/inventory",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/inventory"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:ye[4]||(ye[4]=()=>{Ne(),b(u).setActiveTab("equipment")})},{default:Rt(()=>ye[46]||(ye[46]=[a("span",{class:"i-heroicons-shield-check text-2xl text-amber-600 dark:text-amber-500 mr-3"},null,-1),a("div",null,[a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Equipment"),a("div",{class:"text-xs text-amber-700 dark:text-amber-300/80"},"Manage equipped items and stats")],-1)])),_:1},8,["class"]),Ye(ae,{to:"/inventory",class:K(["flex items-center p-3 rounded-lg transition-colors duration-200",b(N).path==="/inventory"?"bg-amber-300/70 dark:bg-amber-700/70":"bg-amber-200/50 dark:bg-amber-800/40 hover:bg-amber-300/60 dark:hover:bg-amber-700/60"]),onClick:ye[5]||(ye[5]=()=>{Ne(),b(u).setActiveTab("inventory")})},{default:Rt(()=>[ye[49]||(ye[49]=a("span",{class:"i-heroicons-shopping-bag text-2xl text-purple-600 dark:text-purple-500 mr-3"},null,-1)),a("div",null,[ye[48]||(ye[48]=a("div",{class:"font-medium text-amber-900 dark:text-amber-100"},"Items",-1)),a("div",t9e,[ye[47]||(ye[47]=oe(" View and manage inventory ")),b(u).inventory.length>0?(h(),v("span",s9e,_(b(u).inventory.length),1)):Q("",!0)])])]),_:1},8,["class"])])])])])):Q("",!0)]),_:1})])])],2),Ye(U7e,{show:e.value,onClose:ye[6]||(ye[6]=de=>e.value=!1)},null,8,["show"])],64)}}}),r9e=Ct(n9e,[["__scopeId","data-v-90c8f2ae"]]),o9e={class:"w-full max-w-lg px-5 py-10 mx-auto my-4 bg-blue-950/80 rounded-xl"},i9e={class:"flex justify-center mb-6"},a9e=["src"],l9e={class:"text-base text-gray-300 mb-6 leading-relaxed text-center"},c9e={class:"font-bold text-amber-400"},u9e={key:0},d9e={key:1},m9e={class:"h-3 bg-blue-950 rounded-full mb-3 overflow-hidden"},f9e={class:"text-sm text-gray-300 mb-5 flex justify-between"},p9e={key:0,class:"mb-6"},h9e={key:0,class:"mt-2 text-center"},g9e={key:1,class:"mt-3 bg-blue-950/60 rounded-lg p-4 text-sm max-h-96 overflow-y-auto"},v9e={class:"flex items-center justify-between mb-3 pb-3 border-b border-blue-800"},b9e={class:"text-amber-400 font-medium"},y9e={key:0,class:"flex items-center justify-between mb-3 pb-3 border-b border-blue-800"},_9e={class:"text-amber-400 font-medium"},x9e={class:"flex items-center justify-between mb-2"},k9e={class:"flex items-center"},w9e={class:"text-gray-200 font-medium"},E9e={class:"flex items-center"},C9e={class:"text-gray-400 mr-2"},S9e={class:"text-amber-400 font-medium"},T9e={class:"flex text-xs text-gray-400 justify-between"},A9e={key:1,class:"flex justify-center my-1"},I9e={key:2,class:"flex justify-center"},P9e={key:3,class:"bg-blue-900/80 rounded-xl p-4 mt-2"},M9e=Je({__name:"OfflineProgressModal",props:{isVisible:{type:Boolean},totalTicks:{},ticksProcessed:{},elapsedTime:{}},emits:["close"],setup(t,{expose:e,emit:s}){const n=t,r=s,o=Tr(),i=Ht(),c=Ls(),u=Y(!1),d=Y(!1),m=Y([]),f=Y(new Se(0)),p=Y(new Se(0)),g=Y(new Se(0)),w=Y(new Se(0)),C=Y(new Se(0)),E=Y(new Se(0)),k=Y(!1),A=q(()=>c.fields.length>0),S=q(()=>n.ticksProcessed>=n.totalTicks&&n.totalTicks>0),T=()=>{const J=o.generatorStats;if(Qe("Checking saveSystem stats:",{modalStatsCount:m.value.length,saveSystemStatsCount:J.length,initialFoodInModal:f.value.toString(),initialFoodInSystem:o.initialFoodAmount?o.initialFoodAmount.toString():"n/a",initialHoneydewInSystem:o.initialHoneydewAmount?o.initialHoneydewAmount.toString():"n/a"}),m.value.length===0&&J.length>0){Qe(" Syncing stats from saveSystem, found",J.length,"generators"),m.value=J.map(le=>({id:le.id,name:le.name,beforeCount:new Se(le.beforeCount),afterCount:new Se(le.afterCount),generated:new Se(le.generated),selfReplicated:new Se(le.selfReplicated),icon:le.icon})),Qe(" Stats imported from saveSystem. First generator:",m.value.length>0?{id:m.value[0].id,before:m.value[0].beforeCount.toString(),after:m.value[0].afterCount.toString()}:"none");try{f.value.eq(0)&&o.initialFoodAmount&&(f.value=new Se(o.initialFoodAmount),Qe(" Got initial food from saveSystem:",f.value.toString())),w.value.eq(0)&&o.initialHoneydewAmount&&(w.value=new Se(o.initialHoneydewAmount),Qe(" Got initial honeydew from saveSystem:",w.value.toString()))}catch(le){Qe(" Error getting initial resources:",le)}}},R=()=>{if(T(),m.value.length>0){Qe();return}const J=i;f.value=new Se(J.food),Qe(" Captured initial food:",f.value.toString()),w.value=new Se(c.honeydew||0),Qe(" Captured initial honeydew:",w.value.toString()),m.value=J.generators.filter(le=>le.unlocked||le.count.gt(0)).map(le=>(Qe(` Captured initial generator ${le.id} count:`,le.count.toString(),"self-replicated:",le.selfReplicated.toString()),{id:le.id,name:le.name,beforeCount:new Se(le.count),afterCount:new Se(le.count),generated:new Se(0),selfReplicated:new Se(le.selfReplicated),icon:le.icon})),Qe(" Initial capture complete for",m.value.length,"generators")},L=()=>{if(T(),!S.value){Qe();return}if(g.value.gt(0)){Qe();return}Qe(),p.value=new Se(i.food),f.value.eq(0)&&(Qe(),f.value=o.initialFoodAmount||new Se(0)),g.value=p.value.sub(f.value),Qe(" Food results:",{initial:f.value.toString(),current:p.value.toString(),generated:g.value.toString()}),A.value&&(C.value=new Se(c.honeydew),w.value.eq(0)&&(Qe(),w.value=o.initialHoneydewAmount||new Se(0)),E.value=C.value.sub(w.value),Qe(" Honeydew results:",{initial:w.value.toString(),current:C.value.toString(),generated:E.value.toString()}));let J=!1;for(const le of m.value)if(le.beforeCount.gt(0)){J=!0;break}J||(Qe(),o.generatorStats.length>0&&(m.value=o.generatorStats.map(le=>({id:le.id,name:le.name,beforeCount:new Se(le.beforeCount),afterCount:new Se(le.afterCount),generated:new Se(le.generated),selfReplicated:new Se(le.selfReplicated),icon:le.icon})))),m.value=m.value.map(le=>{const se=i.getGenerator(le.id);if(!se)return Qe(` Generator ${le.id} not found`),le;const z=new Se(se.count),ce=z.sub(le.beforeCount),pe=new Se(se.selfReplicated||0),_e=pe.sub(le.selfReplicated||0);return Qe(` Generator ${le.id} final stats:`,{before:le.beforeCount.toString(),after:z.toString(),generated:ce.toString(),initialSelfReplicated:le.selfReplicated.toString(),finalSelfReplicated:pe.toString(),selfReplicatedDiff:_e.toString()}),{...le,afterCount:z,generated:ce,selfReplicated:_e}}),Qe()};e({captureStats:R,generationStats:m,initialFood:f,updateStats:L}),Et(()=>{Qe(),d.value=!1;const J={isCalculating:o.isCalculatingOfflineProgress,isComplete:o.isCalculationComplete,ticksProcessed:n.ticksProcessed,totalTicks:n.totalTicks,calculationPercent:n.totalTicks>0?Math.round(n.ticksProcessed/n.totalTicks*100):0,showProductionDetails:k.value,initialFood:f.value.toString()};Qe(" Initial calculation state:",J),T(),n.isVisible&&m.value.length===0&&(Qe(),R()),o.isCalculationComplete&&!d.value&&(Qe(),d.value=!0,setTimeout(()=>{L()},100))}),dt(()=>n.isVisible,(J,le)=>{Qe(" isVisible changed:",{newVal:J,oldVal:le,calculationState:{isCalculating:o.isCalculatingOfflineProgress,isComplete:o.isCalculationComplete,ticksProcessed:n.ticksProcessed,totalTicks:n.totalTicks,hasWatchedCalculation:d.value}}),J&&!le&&(T(),m.value.length===0&&(Qe(),R()),o.isCalculationComplete&&!d.value&&(Qe(),d.value=!0,setTimeout(()=>{L()},100)))}),dt(()=>n.ticksProcessed,(J,le)=>{if(n.totalTicks>0){const se=J/n.totalTicks;Math.floor(se*4)>Math.floor(le/n.totalTicks*4)&&Qe(` Tick processing at ${Math.round(se*100)}%:`,{newVal:J,totalTicks:n.totalTicks}),J>0&&le<J&&se>=.95&&(Qe(),setTimeout(()=>L(),100)),J>=n.totalTicks&&le<n.totalTicks&&(Qe(),setTimeout(()=>L(),200))}});const P=()=>{k.value=!k.value},I=q(()=>n.totalTicks===0?0:Math.min(100,Math.round(n.ticksProcessed/n.totalTicks*100))),D=q(()=>n.isVisible),U=J=>{if(J<60)return`${Math.floor(J)} seconds`;if(J<3600){const le=Math.floor(J/60);return`${le} minute${le!==1?"s":""}`}else{const le=Math.floor(J/3600),se=Math.floor(J%3600/60);return`${le} hour${le!==1?"s":""} ${se>0?`and ${se} minute${se!==1?"s":""}`:""}`}},M=()=>{r("close")},x=()=>{u.value=!0},$=()=>{u.value=!1},Z=async()=>{await o.saveGameAsync(!0),setTimeout(()=>{window.location.reload()},1e3)},me=J=>{D.value&&(J.preventDefault(),J.stopPropagation())},re=()=>{Qe(),f.value=new Se(0),p.value=new Se(0),g.value=new Se(0),w.value=new Se(0),C.value=new Se(0),E.value=new Se(0),T(),setTimeout(()=>{m.value.length===0&&R(),L()},50)};return dt(()=>o.isCalculationComplete,(J,le)=>{Qe(" saveSystem.isCalculationComplete changed:",{newVal:J,oldVal:le,hasWatchedCalculation:d.value}),J&&!le&&!d.value&&(Qe(),d.value=!0,setTimeout(()=>{L()},200))}),(J,le)=>D.value?(h(),v("div",{key:0,id:"offlineProgressModal",class:"fixed inset-0 flex items-center justify-center z-100 flex-col backdrop-blur-md overflow-auto",style:yt({background:`url(${b(pL)}) no-repeat center top fixed`,backgroundSize:"cover"}),onTouchmove:me},[a("div",o9e,[a("div",i9e,[a("img",{src:b(l1),class:"w-24 h-24 object-contain",alt:"Idle Ant Farm Logo"},null,8,a9e)]),le[7]||(le[7]=a("h3",{class:"text-xl font-bold mb-5 text-center text-amber-300"}," Colony Hibernation Progress ",-1)),a("p",l9e,[le[0]||(le[0]=oe(" Your colony has been hibernating for ")),a("span",c9e,_(U(J.elapsedTime)),1),le[1]||(le[1]=oe(". ")),S.value?(h(),v("span",d9e,"Calculation complete! Your colony has been updated.")):(h(),v("span",u9e,"We're calculating the progress made during this time."))]),a("div",m9e,[a("div",{class:"h-full bg-amber-500 transition-all duration-300 ease-out",style:yt({width:`${I.value}%`})},null,4)]),a("div",f9e,[a("span",null,"Processing: "+_(J.ticksProcessed)+" / "+_(J.totalTicks),1),a("span",null,_(I.value)+"% complete",1)]),S.value?(h(),v("div",p9e,[a("button",{onClick:P,class:"w-full py-2 px-4 bg-blue-900/80 hover:bg-blue-800 text-gray-300 rounded-lg text-sm font-medium transition-colors flex items-center justify-between"},[a("span",null,_(k.value?"Hide":"Show")+" Production Summary",1),a("span",{class:K(k.value?"i-heroicons-chevron-up":"i-heroicons-chevron-down")},null,2)]),S.value&&m.value.every(se=>se.generated.eq(0))?(h(),v("div",h9e,[a("button",{onClick:re,class:"text-xs text-gray-400 hover:text-gray-300 underline py-1 px-2"}," Refresh Statistics ")])):Q("",!0),k.value?(h(),v("div",g9e,[a("div",v9e,[le[2]||(le[2]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-cake text-amber-400 mr-3 text-lg"}),a("span",{class:"text-gray-200 font-medium"},"Food Generated")],-1)),a("span",b9e,"+"+_(b(be)(g.value)),1)]),A.value?(h(),v("div",y9e,[le[3]||(le[3]=a("div",{class:"flex items-center"},[a("span",{class:"i-heroicons-honeycomb text-amber-400 mr-3 text-lg"}),a("span",{class:"text-gray-200 font-medium"},"Honeydew Generated")],-1)),a("span",_9e,"+"+_(b(be)(E.value)),1)])):Q("",!0),(h(!0),v(De,null,Ge(m.value,se=>(h(),v("div",{key:se.id,class:"mb-3 pb-3 border-b border-blue-800 last:border-0 last:mb-0 last:pb-0"},[a("div",x9e,[a("div",k9e,[a("span",{class:K(`${se.icon} text-amber-400 mr-3 text-lg`)},null,2),a("span",w9e,_(se.name),1)]),a("div",E9e,[a("span",C9e,_(b(be)(se.beforeCount)),1),le[4]||(le[4]=a("span",{class:"text-gray-500 mr-2"},"",-1)),a("span",S9e,_(b(be)(se.afterCount)),1)])]),a("div",T9e,[a("span",null,"Generated: +"+_(b(be)(se.generated)),1),a("span",null,"Self-replicated: +"+_(b(be)(se.selfReplicated)),1)])]))),128))])):Q("",!0)])):Q("",!0),u.value?Q("",!0):(h(),v("div",A9e,[a("button",{onClick:M,class:"py-3 px-8 bg-amber-600 hover:bg-amber-700 text-white rounded-lg text-base font-medium transition-colors"}," Continue "+_(S.value?"":"(will continue in background)"),1)])),!S.value&&!u.value?(h(),v("div",I9e,[Ye(Ul,{onAction:x,class:"py-3 px-6 bg-blue-800 hover:bg-blue-900 text-white rounded-lg text-sm font-medium transition-colors","initial-delay":300,"repeat-interval":100},{default:Rt(()=>le[5]||(le[5]=[oe(" Skip Calculation ")])),_:1})])):Q("",!0),u.value?(h(),v("div",P9e,[le[6]||(le[6]=a("p",{class:"text-sm text-red-300 mb-4 font-medium text-center"}," Are you sure you want to skip the offline calculation? ",-1)),a("div",{class:"flex justify-center gap-3"},[a("button",{onClick:$,class:"py-2 px-5 bg-blue-700 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors"}," Cancel "),a("button",{onClick:Z,class:"py-2 px-5 bg-red-700 hover:bg-red-800 text-white rounded-lg text-sm font-medium transition-colors"}," Yes, Skip ")])])):Q("",!0),le[8]||(le[8]=a("div",{class:"mt-6 text-center text-xs text-gray-400"},[a("p",null,"This game runs on coffee. The developer, coincidentally, also runs on coffee."),a("a",{href:"https://buymeacoffee.com/idleantfarm",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-amber-400 hover:text-amber-300 mt-1 transition-colors"},[a("span",{class:"i-heroicons-coffee text-xs mr-1"}),oe(" Caffeinate the colony keeper ")])],-1))])],36)):Q("",!0)}});function $9e(t={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:n,onRegistered:r,onRegisteredSW:o,onRegisterError:i}=t;let c,u;const d=async(f=!0)=>{await u};async function m(){if("serviceWorker"in navigator){if(c=await e3(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{i==null||i(f)}),!c)return;c.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),c.addEventListener("installed",f=>{f.isUpdate||n==null||n()}),c.register({immediate:e}).then(f=>{o?o("/sw.js",f):r==null||r(f)}).catch(f=>{i==null||i(f)})}}return u=m(),d}function ID(t={}){const{immediate:e=!0,onNeedRefresh:s,onOfflineReady:n,onRegistered:r,onRegisteredSW:o,onRegisterError:i}=t,c=Y(!1),u=Y(!1);return{updateServiceWorker:$9e({immediate:e,onNeedRefresh(){c.value=!0,s==null||s()},onOfflineReady(){u.value=!0,n==null||n()},onRegistered:r,onRegisteredSW:o,onRegisterError:i}),offlineReady:u,needRefresh:c}}function R9e(t=15*60*1e3){const{updateServiceWorker:e}=ID(),s=Tr(),{isCalculatingOfflineProgress:n}=e_(s);let r;const o=()=>{if(n.value){console.log("Skipping PWA update check during offline progress calculation");return}console.log("Checking for PWA updates..."),e()};return Et(()=>{o(),r=window.setInterval(o,t)}),ar(()=>{r&&clearInterval(r)}),{checkForUpdates:o}}const L9e={key:0,class:"fixed bottom-4 left-0 right-0 mx-auto w-full max-w-sm px-4"},D9e=Je({__name:"PWAUpdateNotification",setup(t){const{needRefresh:e,updateServiceWorker:s}=ID(),n=Y(!1);R9e(),Et(()=>{dt(e,o=>{n.value=o})});const r=()=>{s(),n.value=!1};return(o,i)=>(h(),Tt(or,{name:"slide-up"},{default:Rt(()=>[n.value?(h(),v("div",L9e,[a("div",{class:"rounded-lg bg-indigo-600 dark:bg-indigo-700 p-4 shadow-lg"},[a("div",{class:"flex items-center justify-between"},[i[0]||(i[0]=a("div",{class:"flex-1"},[a("h3",{class:"text-sm font-medium text-white"}," App Update Available "),a("p",{class:"mt-1 text-sm text-indigo-100"}," A new version is available. Click to update. ")],-1)),a("div",{class:"ml-4 flex flex-shrink-0"},[a("button",{type:"button",class:"inline-flex rounded-md bg-indigo-500 dark:bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-400 dark:hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-indigo-600 dark:focus:ring-offset-indigo-700",onClick:r}," Update ")])])])])):Q("",!0)]),_:1}))}}),N9e=Ct(D9e,[["__scopeId","data-v-3a33cdf7"]]),O9e={class:"px-6 py-4 border-b border-amber-200 dark:border-amber-700 flex items-center"},F9e={class:"flex-grow"},U9e={key:0,class:"text-sm text-amber-600 dark:text-amber-400 mt-1"},q9e={key:1,class:"text-sm text-amber-600 dark:text-amber-400 mt-1"},B9e={class:"p-6 overflow-y-auto max-h-[60vh]"},V9e=["innerHTML"],H9e=Je({__name:"UpdateAnnouncementModal",setup(t){const{showAnnouncement:e,updateDetails:s,closeAnnouncement:n}=fL(),r=Y(!1),{isClosing:o,handleClose:i,preventBackgroundTouchMove:c}=Gr();dt(e,m=>{r.value=m});const u=()=>{i(n)},d=m=>{m.key==="Escape"&&r.value&&u()};return Et(()=>{window.addEventListener("keydown",d)}),xn(()=>{window.removeEventListener("keydown",d)}),(m,f)=>(h(),Tt(or,{name:"fade"},{default:Rt(()=>[r.value?(h(),v("div",{key:0,class:"fixed inset-0 bg-black/30 dark:bg-black/60 z-50 backdrop-blur-sm flex items-center justify-center p-4 modal-backdrop","data-modal-backdrop":"true",onClick:xt(u,["self"]),onTouchmove:f[0]||(f[0]=xt((...p)=>b(c)&&b(c)(...p),["self"]))},[a("div",{class:K(["relative bg-white dark:bg-slate-900 rounded-lg shadow-lg max-w-3xl w-full max-h-[calc(100vh-2rem)] overflow-hidden",{"opacity-75":b(o)}])},[a("div",O9e,[a("div",F9e,[f[1]||(f[1]=a("h2",{class:"text-xl font-bold text-amber-800 dark:text-amber-300"}," What's New in Idle Ant Farm ",-1)),b(s).versionRange.includes("to")?(h(),v("div",U9e," Updates from v"+_(b(s).versionRange),1)):(h(),v("div",q9e," Version "+_(b(s).versionRange)+" - "+_(b(s).date),1))]),a("button",{class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors","aria-label":"Close modal",onClick:u},f[2]||(f[2]=[a("svg",{class:"w-5 h-5 text-slate-500 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",B9e,[a("div",{class:"prose prose-amber dark:prose-invert max-w-none",innerHTML:b(s).content},null,8,V9e)]),a("div",{class:"px-6 py-4 border-t border-amber-200 dark:border-amber-700 flex justify-end"},[a("button",{class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-md transition-colors font-medium",onClick:u}," Got it ")])],2)],32)):Q("",!0)]),_:1}))}}),G9e=Ct(H9e,[["__scopeId","data-v-09c2283e"]]),j9e={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md"},W9e={class:"flex-grow"},z9e={class:"text-sm"},Q9e=["onClick"],K9e=Je({__name:"ToastContainer",setup(t){const{toasts:e,removeToast:s}=Us(),n=o=>{switch(o){case"success":return"i-heroicons-check-circle";case"warning":return"i-heroicons-exclamation-triangle";case"error":return"i-heroicons-x-circle";case"info":default:return"i-heroicons-information-circle"}},r=o=>{switch(o){case"success":return"bg-green-700 dark:bg-green-800";case"warning":return"bg-yellow-700 dark:bg-yellow-800";case"error":return"bg-red-700 dark:bg-red-800";case"info":default:return"bg-amber-700 dark:bg-amber-800"}};return(o,i)=>(h(),v("div",j9e,[Ye(UF,{name:"toast"},{default:Rt(()=>[(h(!0),v(De,null,Ge(b(e),c=>(h(),v("div",{key:c.id,class:K(["rounded-lg shadow-lg text-white p-3 flex items-start gap-2",r(c.type)])},[a("span",{class:K([n(c.type),"text-xl flex-shrink-0 mt-0.5"])},null,2),a("div",W9e,[a("p",z9e,_(c.message),1)]),a("button",{onClick:u=>b(s)(c.id),class:"text-white hover:text-gray-200 flex-shrink-0"},i[0]||(i[0]=[a("span",{class:"i-heroicons-x-mark text-lg"},null,-1)]),8,Q9e)],2))),128))]),_:1})]))}}),Y9e=Ct(K9e,[["__scopeId","data-v-34c8d993"]]),X9e={key:0,class:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 shadow-lg p-4 z-50 border-t border-gray-200 dark:border-gray-700"},J9e={class:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-4"},Z9e={class:"flex gap-3"},eVe=Je({__name:"GdprConsentBanner",setup(t){const{acceptConsent:e,declineConsent:s,isPending:n}=Ow();return(r,o)=>(h(),Tt(or,{name:"slide-up"},{default:Rt(()=>[b(n)()?(h(),v("div",X9e,[a("div",J9e,[o[2]||(o[2]=a("div",{class:"text-sm text-gray-700 dark:text-gray-300"},[a("p",null,' We use cookies and similar technologies to analyze traffic, enhance site functionality, and improve your experience. By clicking "Accept", you consent to the use of cookies for analytics purposes. ')],-1)),a("div",Z9e,[a("button",{class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",onClick:o[0]||(o[0]=(...i)=>b(s)&&b(s)(...i))}," Decline "),a("button",{class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:o[1]||(o[1]=(...i)=>b(e)&&b(e)(...i))}," Accept ")])])])):Q("",!0)]),_:1}))}}),tVe=Ct(eVe,[["__scopeId","data-v-270f4b2e"]]),sVe={key:0,class:"font-bold text-lg mb-2 text-gray-900 dark:text-white"},nVe={class:"text-gray-700 dark:text-gray-300 mb-4"},rVe={class:"text-xs text-gray-500 dark:text-gray-400 mb-3"},oVe={class:"flex justify-between"},iVe={key:1,class:"flex-1"},aVe=Je({__name:"TourTooltip",props:{step:{},isFirstStep:{type:Boolean},isLastStep:{type:Boolean},currentStepIndex:{},totalSteps:{}},emits:["next","prev","skip"],setup(t,{emit:e}){const s=t,n=e,r=Y(null),o=G0();return Et(()=>{r.value&&(o.tooltipElement&&(o.tooltipElement=r.value),console.log("Tooltip element set in store",r.value),setTimeout(()=>{console.log("Positioning tooltip on mount"),o.positionTooltip()},100))}),dt(()=>s.step,()=>{setTimeout(()=>{r.value&&(o.tooltipElement=r.value,console.log("Tooltip element updated in store on step change"),o.highlightTarget(),o.positionTooltip())},100)}),(i,c)=>(h(),v("div",{ref_key:"tooltipRef",ref:r,class:K(["fixed z-50 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-sm tour-tooltip",`tour-tooltip-${i.step.placement||"bottom"}`])},[i.step.title?(h(),v("div",sVe,_(i.step.title),1)):Q("",!0),a("div",nVe,_(i.step.content),1),a("div",rVe," Step "+_(i.currentStepIndex+1)+" of "+_(i.totalSteps),1),a("div",oVe,[i.isFirstStep?(h(),v("div",iVe)):(h(),v("button",{key:0,onClick:c[0]||(c[0]=u=>n("prev")),class:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Previous ")),a("button",{onClick:c[1]||(c[1]=u=>n("skip")),class:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"}," Skip Tour "),a("button",{onClick:c[2]||(c[2]=u=>n("next")),class:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},_(i.isLastStep?"Finish":"Next"),1)])],2))}}),lVe=Ct(aVe,[["__scopeId","data-v-ca46d417"]]),cVe={key:0,class:"tour-container"},uVe=Je({__name:"Tour",setup(t){const e=G0();return dt(()=>e.isActive,s=>{s&&setTimeout(()=>{e.highlightTarget()},100)},{immediate:!0}),Et(()=>{e.isActive&&setTimeout(()=>{e.highlightTarget()},100)}),(s,n)=>(h(),Tt(QI,{to:"body"},[b(e).isActive&&b(e).currentStep?(h(),v("div",cVe,[n[0]||(n[0]=a("div",{class:"fixed inset-0 z-40 pointer-events-none bg-opacity-30 backdrop-blur-sm"},null,-1)),Ye(lVe,{step:b(e).currentStep,"is-first-step":b(e).isFirstStep,"is-last-step":b(e).isLastStep,"current-step-index":b(e).currentStepIndex,"total-steps":b(e).totalSteps,onNext:b(e).nextStep,onPrev:b(e).prevStep,onSkip:b(e).skipTour},null,8,["step","is-first-step","is-last-step","current-step-index","total-steps","onNext","onPrev","onSkip"])])):Q("",!0)]))}}),dVe=Je({__name:"TourRestartButton",props:{buttonText:{default:"Start Tour"},buttonClass:{default:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"}},setup(t){const e=G0(),s=()=>{console.log("Restarting tour"),e.resetTour(),e.startTour()};return(n,r)=>(h(),v("button",{class:K(n.buttonClass),onClick:s},[lf(n.$slots,"default",{},()=>[oe(_(n.buttonText),1)])],2))}}),mVe={key:0,class:"fixed bottom-24 right-6 z-50 w-80 bg-amber-50 dark:bg-gray-800 rounded-lg shadow-lg border border-amber-200 dark:border-amber-800 overflow-hidden"},fVe={class:"p-4"},pVe={class:"flex items-center gap-3"},hVe={class:"flex-shrink-0 w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center"},gVe={class:"flex-1"},vVe={class:"mt-1 text-sm font-medium text-amber-700 dark:text-amber-200"},bVe={class:"mt-0.5 text-xs text-amber-600/90 dark:text-amber-400/90"},yVe=Je({__name:"AchievementNotification",setup(t){const e=Or(),s=q(()=>e.recentlyCompleted[0]),n=q(()=>e.showNotification);return(r,o)=>(h(),Tt(or,{name:"slide-fade"},{default:Rt(()=>[n.value&&s.value?(h(),v("div",mVe,[a("div",fVe,[a("div",pVe,[a("div",hVe,[a("span",{class:K([s.value.icon,"text-xl text-amber-600 dark:text-amber-300"])},null,2)]),a("div",gVe,[o[0]||(o[0]=a("div",{class:"flex items-baseline justify-between"},[a("h3",{class:"text-sm font-medium text-amber-800 dark:text-amber-300"},"Achievement Unlocked!"),a("span",{class:"text-xs text-amber-600 dark:text-amber-400 font-bold px-2 py-0.5 rounded-full bg-amber-100 dark:bg-amber-900/30"}," +1 ")],-1)),a("p",vVe,_(s.value.name),1),a("p",bVe,_(s.value.description),1)])])]),o[1]||(o[1]=a("div",{class:"h-1 bg-amber-500 dark:bg-amber-600 animate-shrink"},null,-1))])):Q("",!0)]),_:1}))}}),_Ve=Ct(yVe,[["__scopeId","data-v-be41e0d8"]]),xVe={class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"},kVe=Je({__name:"GameFinishedScreen",setup(t){const e=Vn(),s=()=>{e.showGameFinishedScreen=!1};return(n,r)=>(h(),v("div",xVe,[a("div",{class:"bg-gradient-to-br from-green-100 to-lime-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 shadow-2xl max-w-lg w-full border-2 border-yellow-400 dark:border-yellow-600 transform transition-all duration-300 ease-out scale-100 opacity-100"},[r[1]||(r[1]=js('<h2 class="text-2xl font-bold mb-4 text-center text-green-800 dark:text-lime-300 flex items-center justify-center" data-v-13c7304f><span class="i-heroicons-sparkles text-yellow-500 mr-2" data-v-13c7304f></span> Colony Victorious! <span class="i-heroicons-sparkles text-yellow-500 ml-2" data-v-13c7304f></span></h2><div class="bg-white/70 dark:bg-gray-900/70 p-4 rounded-lg shadow-inner border border-green-200 dark:border-gray-600 text-center" data-v-13c7304f><p class="text-lg mb-3 text-gray-800 dark:text-gray-200" data-v-13c7304f> Congratulations! Your colony has bravely faced and overcome the ultimate challenge: the mighty <strong class="text-red-600 dark:text-red-400" data-v-13c7304f>Omega Ant</strong>! </p><p class="text-sm mb-4 text-gray-700 dark:text-gray-300" data-v-13c7304f> The primary threats have been neutralized, but the colony&#39;s journey is far from over. The world is vast, and challenges remain. </p><div class="bg-blue-100 dark:bg-blue-900/50 p-3 rounded-md border border-blue-300 dark:border-blue-700" data-v-13c7304f><p class="font-semibold text-blue-800 dark:text-blue-300" data-v-13c7304f>  Endless Mode Unlocked!  </p><p class="text-xs mt-1 text-blue-700 dark:text-blue-400" data-v-13c7304f> You can now continue playing indefinitely, pushing your colony to new heights, completing achievements, and exploring every corner of the ant world. The structured story content is complete, but the anthill endures! </p></div></div>',2)),a("div",{class:"mt-6 flex justify-center"},[a("button",{onClick:s,class:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-md text-lg font-medium transition-colors duration-200 flex items-center"},r[0]||(r[0]=[a("span",{class:"i-heroicons-check-circle mr-2"},null,-1),oe(" Continue the Colony ")]))]),r[2]||(r[2]=a("p",{class:"text-xs text-center mt-4 text-gray-600 dark:text-gray-400"}," You can view this screen again from the Settings page. ",-1))])]))}}),wVe=Ct(kVe,[["__scopeId","data-v-13c7304f"]]);function EVe(){const t=Y(!0),e=Y(Date.now()),s=Tr(),n=async()=>{const o=t.value;if(t.value=document.visibilityState==="visible",t.value&&!o){const c=(Date.now()-e.value)/1e3;c>=5&&await s.calculateOfflineProgress(c,!0)}e.value=Date.now()},r=()=>{localStorage.setItem("lastActiveTimestamp",e.value.toString())};return Et(async()=>{const o=localStorage.getItem("lastActiveTimestamp");if(o){const i=Date.now(),c=parseInt(o,10),u=(i-c)/1e3;u>=5&&await s.calculateOfflineProgress(u,!0),e.value=i,localStorage.removeItem("lastActiveTimestamp")}document.addEventListener("visibilitychange",n),window.addEventListener("beforeunload",r)}),ar(()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("beforeunload",r)}),{isVisible:D1(t)}}const CVe={key:0,class:"fixed inset-0 flex items-center justify-center bg-white dark:bg-gray-900"},SVe={key:1},TVe={key:0},AVe={key:1,class:"fixed bottom-4 right-4 z-30"},IVe=Je({__name:"App",setup(t){const e=Tr(),s=Vn(),n=Y(!1);EVe();const{isLoading:r}=Pk(),o=q(()=>!r.value||e.hasCheckedAuth);q(()=>e.isCalculatingOfflineProgress),dt(()=>e.isCalculatingOfflineProgress,d=>{console.log("Calculation state changed to:",d)}),Af(),cL({debounceTime:150,storageKey:"idleAntFarmScrollPositions",scrollElementSelector:"main"});const i=()=>{console.log("Closing offline progress modal"),e.showOfflineProgressModal=!1},c=async()=>{console.log("Handling use local save, modal state:",e.showOfflineConflictModal);try{e.showOfflineConflictModal=!1,e.hasSaveConflict=!1,await e.resolveOfflineConflict(!0)}catch(d){console.error("Error resolving save conflict with local save:",d),e.showOfflineConflictModal=!1}},u=async()=>{console.log("Handling use cloud save, modal state:",e.showOfflineConflictModal);try{e.showOfflineConflictModal=!1,e.hasSaveConflict=!1,await e.resolveOfflineConflict(!1)}catch(d){console.error("Error resolving save conflict with cloud save:",d),e.showOfflineConflictModal=!1}};return Am(),(d,m)=>{var p,g,w,C,E,k,A,S,T,R,L,P,I,D,U,M,x,$,Z,me,re,J,le,se;const f=rP("router-view");return h(),v("div",null,[o.value?(h(),v("div",SVe,[b(e).showOfflineProgressModal?Q("",!0):(h(),v("div",TVe,[Ye(r9e,null,{default:Rt(()=>[Ye(f)]),_:1}),Ye(G9e),Ye(N9e),Ye(Y9e),Ye(_Ve),Ye(tVe),n.value?(h(),Tt(uVe,{key:0})):Q("",!0),n.value?(h(),v("div",AVe,[Ye(dVe,{"button-class":"px-4 py-2 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors flex items-center"},{default:Rt(()=>m[2]||(m[2]=[a("span",{class:"mr-1"},"?",-1),oe(" Help & Tour ")])),_:1})])):Q("",!0),b(s).showGameFinishedScreen?(h(),Tt(wVe,{key:2})):Q("",!0)])),Ye(Gse,{show:b(e).showOfflineConflictModal,"local-save-time":((p=b(e).offlineConflictData)==null?void 0:p.localSaveTime)||0,"cloud-save-time":((g=b(e).offlineConflictData)==null?void 0:g.cloudSaveTime)||0,"local-food-amount":b(be)(b(l)(((E=(C=(w=b(e).offlineConflictData)==null?void 0:w.localState)==null?void 0:C.generatorStore)==null?void 0:E.food)||0)),"cloud-food-amount":b(be)(b(l)(((S=(A=(k=b(e).offlineConflictData)==null?void 0:k.cloudState)==null?void 0:A.generatorStore)==null?void 0:S.food)||0)),"local-ant-count":b(be)(b(l)(((I=(P=(L=(R=(T=b(e).offlineConflictData)==null?void 0:T.localState)==null?void 0:R.generatorStore)==null?void 0:L.generators)==null?void 0:P[0])==null?void 0:I.count)||0)),"cloud-ant-count":b(be)(b(l)((($=(x=(M=(U=(D=b(e).offlineConflictData)==null?void 0:D.cloudState)==null?void 0:U.generatorStore)==null?void 0:M.generators)==null?void 0:x[0])==null?void 0:$.count)||0)),"local-evolution-stage":((re=(me=(Z=b(e).offlineConflictData)==null?void 0:Z.localState)==null?void 0:me.progressionStore)==null?void 0:re.currentStage)||"Unknown","cloud-evolution-stage":((se=(le=(J=b(e).offlineConflictData)==null?void 0:J.cloudState)==null?void 0:le.progressionStore)==null?void 0:se.currentStage)||"Unknown",onClose:m[0]||(m[0]=z=>b(e).showOfflineConflictModal=!1),onUseLocal:c,onUseCloud:u},null,8,["show","local-save-time","cloud-save-time","local-food-amount","cloud-food-amount","local-ant-count","cloud-ant-count","local-evolution-stage","cloud-evolution-stage"]),Ye(M9e,{"is-visible":b(e).showOfflineProgressModal&&!b(e).showOfflineConflictModal,"total-ticks":b(e).offlineProgressTotalTicks,"ticks-processed":b(e).offlineProgressTicksProcessed,"elapsed-time":b(e).offlineProgressElapsedTime,onClose:i},null,8,["is-visible","total-ticks","ticks-processed","elapsed-time"])])):(h(),v("div",CVe,m[1]||(m[1]=[a("div",{class:"flex flex-col items-center"},[a("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),a("p",{class:"text-gray-600 dark:text-gray-300"},"Loading colony...")],-1)])))])}}});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map,PD={activated:!1,tokenObservers:[]},PVe={initialized:!1,enabled:!1};function _n(t){return c1.get(t)||Object.assign({},PD)}function MVe(t,e){return c1.set(t,e),c1.get(t)}function zv(){return PVe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="https://content-firebaseappcheck.googleapis.com/v1",$Ve="exchangeRecaptchaV3Token",RVe="exchangeDebugToken",y5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},LVe=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DVe{constructor(e,s,n,r,o){if(this.operation=e,this.retryPolicy=s,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new $l,this.pending.promise.catch(s=>{}),await NVe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new $l,this.pending.promise.catch(s=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(s){this.retryPolicy(s)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const s=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),s}}}function NVe(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OVe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},wr=new Io("appCheck","AppCheck",OVe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function Uw(t){if(!_n(t).activated)throw wr.create("use-before-activation",{appName:t.name})}function $D(t){const e=Math.round(t/1e3),s=Math.floor(e/(3600*24)),n=Math.floor((e-s*3600*24)/3600),r=Math.floor((e-s*3600*24-n*3600)/60),o=e-s*3600*24-n*3600-r*60;let i="";return s&&(i+=jp(s)+"d:"),n&&(i+=jp(n)+"h:"),i+=jp(r)+"m:"+jp(o)+"s",i}function jp(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw({url:t,body:e},s){const n={"Content-Type":"application/json"},r=s.getImmediate({optional:!0});if(r){const f=await r.getHeartbeatsHeader();f&&(n["X-Firebase-Client"]=f)}const o={method:"POST",body:JSON.stringify(e),headers:n};let i;try{i=await fetch(t,o)}catch(f){throw wr.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(i.status!==200)throw wr.create("fetch-status-error",{httpStatus:i.status});let c;try{c=await i.json()}catch(f){throw wr.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw wr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=Number(u[1])*1e3,m=Date.now();return{token:c.token,expireTimeMillis:m+d,issuedAtTimeMillis:m}}function FVe(t,e){const{projectId:s,appId:n,apiKey:r}=t.options;return{url:`${MD}/projects/${s}/apps/${n}:${$Ve}?key=${r}`,body:{recaptcha_v3_token:e}}}function RD(t,e){const{projectId:s,appId:n,apiKey:r}=t.options;return{url:`${MD}/projects/${s}/apps/${n}:${RVe}?key=${r}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UVe="firebase-app-check-database",qVe=1,ef="firebase-app-check-store",LD="debug-token";let Wp=null;function DD(){return Wp||(Wp=new Promise((t,e)=>{try{const s=indexedDB.open(UVe,qVe);s.onsuccess=n=>{t(n.target.result)},s.onerror=n=>{var r;e(wr.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},s.onupgradeneeded=n=>{const r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(ef,{keyPath:"compositeKey"})}}}catch(s){e(wr.create("storage-open",{originalErrorMessage:s==null?void 0:s.message}))}}),Wp)}function BVe(t){return OD(FD(t))}function VVe(t,e){return ND(FD(t),e)}function HVe(t){return ND(LD,t)}function GVe(){return OD(LD)}async function ND(t,e){const n=(await DD()).transaction(ef,"readwrite"),o=n.objectStore(ef).put({compositeKey:t,value:e});return new Promise((i,c)=>{o.onsuccess=u=>{i()},n.onerror=u=>{var d;c(wr.create("storage-set",{originalErrorMessage:(d=u.target.error)===null||d===void 0?void 0:d.message}))}})}async function OD(t){const s=(await DD()).transaction(ef,"readonly"),r=s.objectStore(ef).get(t);return new Promise((o,i)=>{r.onsuccess=c=>{const u=c.target.result;o(u?u.value:void 0)},s.onerror=c=>{var u;i(wr.create("storage-get",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function FD(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new Ba("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jVe(t){if(ka()){let e;try{e=await BVe(t)}catch(s){_l.warn(`Failed to read token from IndexedDB. Error: ${s}`)}return e}}function Ty(t,e){return ka()?VVe(t,e).catch(s=>{_l.warn(`Failed to write token to IndexedDB. Error: ${s}`)}):Promise.resolve()}async function WVe(){let t;try{t=await GVe()}catch{}if(t)return t;{const e=crypto.randomUUID();return HVe(e).catch(s=>_l.warn(`Failed to persist debug token to IndexedDB. Error: ${s}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){return zv().enabled}async function Vw(){const t=zv();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function zVe(){const t=lx(),e=zv();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const s=new $l;e.token=s,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?s.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):s.resolve(WVe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QVe={error:"UNKNOWN_ERROR"};function KVe(t){return Y0.encodeString(JSON.stringify(t),!1)}async function u1(t,e=!1,s=!1){const n=t.app;Uw(n);const r=_n(n);let o=r.token,i;if(o&&!Nc(o)&&(r.token=void 0,o=void 0),!o){const d=await r.cachedTokenPromise;d&&(Nc(d)?o=d:await Ty(n,void 0))}if(!e&&o&&Nc(o))return{token:o.token};let c=!1;if(Bw())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=qw(RD(n,await Vw()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const d=await r.exchangeTokenPromise;return await Ty(n,d),r.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?_l.warn(d.message):s&&_l.error(d),Ay(d)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=await _n(n).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?_l.warn(d.message):s&&_l.error(d),i=d}let u;return o?i?Nc(o)?u={token:o.token,internalError:i}:u=Ay(i):(u={token:o.token},r.token=o,await Ty(n,o)):u=Ay(i),c&&UD(n,u),u}async function YVe(t){const e=t.app;Uw(e);const{provider:s}=_n(e);if(Bw()){const n=await Vw(),{token:r}=await qw(RD(e,n),t.heartbeatServiceProvider);return{token:r}}else{const{token:n}=await s.getToken();return{token:n}}}function Hw(t,e,s,n){const{app:r}=t,o=_n(r),i={next:s,error:n,type:e};if(o.tokenObservers=[...o.tokenObservers,i],o.token&&Nc(o.token)){const c=o.token;Promise.resolve().then(()=>{s({token:c.token}),x5(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>x5(t))}function Gw(t,e){const s=_n(t),n=s.tokenObservers.filter(r=>r.next!==e);n.length===0&&s.tokenRefresher&&s.tokenRefresher.isRunning()&&s.tokenRefresher.stop(),s.tokenObservers=n}function x5(t){const{app:e}=t,s=_n(e);let n=s.tokenRefresher;n||(n=XVe(t),s.tokenRefresher=n),!n.isRunning()&&s.isTokenAutoRefreshEnabled&&n.start()}function XVe(t){const{app:e}=t;return new DVe(async()=>{const s=_n(e);let n;if(s.token?n=await u1(t,!0):n=await u1(t),n.error)throw n.error;if(n.internalError)throw n.internalError},()=>!0,()=>{const s=_n(e);if(s.token){let n=s.token.issuedAtTimeMillis+(s.token.expireTimeMillis-s.token.issuedAtTimeMillis)*.5+3e5;const r=s.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},y5.RETRIAL_MIN_WAIT,y5.RETRIAL_MAX_WAIT)}function UD(t,e){const s=_n(t).tokenObservers;for(const n of s)try{n.type==="EXTERNAL"&&e.error!=null?n.error(e.error):n.next(e)}catch{}}function Nc(t){return t.expireTimeMillis-Date.now()>0}function Ay(t){return{token:KVe(QVe),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JVe{constructor(e,s){this.app=e,this.heartbeatServiceProvider=s}_delete(){const{tokenObservers:e}=_n(this.app);for(const s of e)Gw(this.app,s.next);return Promise.resolve()}}function ZVe(t,e){return new JVe(t,e)}function eHe(t){return{getToken:e=>u1(t,e),getLimitedUseToken:()=>YVe(t),addTokenListener:e=>Hw(t,"INTERNAL",e),removeTokenListener:e=>Gw(t.app,e)}}const tHe="@firebase/app-check",sHe="0.8.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nHe="https://www.google.com/recaptcha/api.js";function rHe(t,e){const s=new $l,n=_n(t);n.reCAPTCHAState={initialized:s};const r=oHe(t),o=_5(!1);return o?k5(t,e,o,r,s):lHe(()=>{const i=_5(!1);if(!i)throw new Error("no recaptcha");k5(t,e,i,r,s)}),s.promise}function k5(t,e,s,n,r){s.ready(()=>{aHe(t,e,s,n),r.resolve(s)})}function oHe(t){const e=`fire_app_check_${t.name}`,s=document.createElement("div");return s.id=e,s.style.display="none",document.body.appendChild(s),e}async function iHe(t){Uw(t);const s=await _n(t).reCAPTCHAState.initialized.promise;return new Promise((n,r)=>{const o=_n(t).reCAPTCHAState;s.ready(()=>{n(s.execute(o.widgetId,{action:"fire_app_check"}))})})}function aHe(t,e,s,n){const r=s.render(n,{sitekey:e,size:"invisible",callback:()=>{_n(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{_n(t).reCAPTCHAState.succeeded=!1}}),o=_n(t);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:r})}function lHe(t){const e=document.createElement("script");e.src=nHe,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,s,n;uHe(this._throttleData);const r=await iHe(this._app).catch(i=>{throw wr.create("recaptcha-error")});if(!(!((e=_n(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw wr.create("recaptcha-error");let o;try{o=await qw(FVe(this._app,r),this._heartbeatServiceProvider)}catch(i){throw!((s=i.code)===null||s===void 0)&&s.includes("fetch-status-error")?(this._throttleData=cHe(Number((n=i.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),wr.create("initial-throttle",{time:$D(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=Po(e,"heartbeat"),rHe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof jw?this._siteKey===e._siteKey:!1}}function cHe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+LVe,httpStatus:t};{const s=e?e.backoffCount:0,n=f_(s,1e3,2);return{backoffCount:s+1,allowRequestsAfter:Date.now()+n,httpStatus:t}}}function uHe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw wr.create("throttled",{time:$D(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dHe(t=Lu(),e){t=Ft(t);const s=Po(t,"app-check");if(zv().initialized||zVe(),Bw()&&Vw().then(r=>console.log(`App Check debug token: ${r}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),s.isInitialized()){const r=s.getImmediate(),o=s.getOptions();if(o.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&o.provider.isEqual(e.provider))return r;throw wr.create("already-initialized",{appName:t.name})}const n=s.initialize({options:e});return mHe(t,e.provider,e.isTokenAutoRefreshEnabled),_n(t).isTokenAutoRefreshEnabled&&Hw(n,"INTERNAL",()=>{}),n}function mHe(t,e,s){const n=MVe(t,Object.assign({},PD));n.activated=!0,n.provider=e,n.cachedTokenPromise=jVe(t).then(r=>(r&&Nc(r)&&(n.token=r,UD(t,{token:r.token})),r)),n.isTokenAutoRefreshEnabled=s===void 0?t.automaticDataCollectionEnabled:s,n.provider.initialize(t)}function fHe(t,e,s,n){let r=()=>{},o=()=>{};return e.next!=null?r=e.next.bind(e):r=e,e.error!=null&&(o=e.error.bind(e)),Hw(t,"EXTERNAL",r,o),()=>Gw(t.app,r)}const pHe="app-check",w5="app-check-internal";function hHe(){qn(new Ln(pHe,t=>{const e=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat");return ZVe(e,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider(w5).initialize()})),qn(new Ln(w5,t=>{const e=t.getProvider("app-check").getImmediate();return eHe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qs(tHe,sHe)}hHe();var gHe="firebase",vHe="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(gHe,vHe,"app");const qD=Symbol("firebaseApp");function bHe(t){return jl()&&pr(qD,null)||Lu(t)}const yHe=typeof window<"u",zp=new WeakMap;function BD(t,e){if(!zp.has(t)){const s=I1(!0);zp.set(t,s);const{unmount:n}=e;e.unmount=()=>{n.call(e),s.stop(),zp.delete(t)}}return zp.get(t)}const _He=new WeakMap,Qp=new WeakMap;function xHe(t){const e=bHe(t);if(!Qp.has(e)){let s;const r=[new Promise(o=>{s=o}),o=>{Qp.set(e,o),s(o.value)}];Qp.set(e,r)}return Qp.get(e)}function kHe(t,e){QH(e,s=>{const n=xHe();t.value=s,Array.isArray(n)&&n[1](t)})}const wHe=Symbol("app-check-token");function EHe(t){return(e,s)=>{if(!yHe)return;const n=BD(e,s).run(()=>Y());s.provide(wHe,n),t.debug&&(self.FIREBASE_APPCHECK_DEBUG_TOKEN=t.debug);const r=dHe(e,t);fHe(r,o=>{n.value=o.token}),CHe.set(e,r)}}const CHe=new WeakMap;var E5={};const C5="@firebase/database",S5="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VD="";function SHe(t){VD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class THe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,s){s==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Fn(s))}get(e){const s=this.domStorage_.getItem(this.prefixedName_(e));return s==null?null:$m(s)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AHe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,s){s==null?delete this.cache_[e]:this.cache_[e]=s}get(e){return To(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new THe(e)}}catch{}return new AHe},xl=HD("localStorage"),IHe=HD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Ba("@firebase/database"),PHe=function(){let t=1;return function(){return t++}}(),GD=function(t){const e=FB(t),s=new LB;s.update(e);const n=s.digest();return Y0.encodeByteArray(n)},Rf=function(...t){let e="";for(let s=0;s<t.length;s++){const n=t[s];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Rf.apply(null,n):typeof n=="object"?e+=Fn(n):e+=n,e+=" "}return e};let fm=null,T5=!0;const MHe=function(t,e){ct(!0,"Can't turn on custom loggers persistently."),eu.logLevel=Bt.VERBOSE,fm=eu.log.bind(eu)},Zn=function(...t){if(T5===!0&&(T5=!1,fm===null&&IHe.get("logging_enabled")===!0&&MHe()),fm){const e=Rf.apply(null,t);fm(e)}},Lf=function(t){return function(...e){Zn(t,...e)}},d1=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rf(...t);eu.error(e)},Bl=function(...t){const e=`FIREBASE FATAL ERROR: ${Rf(...t)}`;throw eu.error(e),new Error(e)},Br=function(...t){const e="FIREBASE WARNING: "+Rf(...t);eu.warn(e)},$He=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Br("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},RHe=function(t){if(document.readyState==="complete")t();else{let e=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},Eu="[MIN_NAME]",Vl="[MAX_NAME]",Gu=function(t,e){if(t===e)return 0;if(t===Eu||e===Vl)return-1;if(e===Eu||t===Vl)return 1;{const s=A5(t),n=A5(e);return s!==null?n!==null?s-n===0?t.length-e.length:s-n:-1:n!==null?1:t<e?-1:1}},LHe=function(t,e){return t===e?0:t<e?-1:1},bd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Fn(e))},Ww=function(t){if(typeof t!="object"||t===null)return Fn(t);const e=[];for(const n in t)e.push(n);e.sort();let s="{";for(let n=0;n<e.length;n++)n!==0&&(s+=","),s+=Fn(e[n]),s+=":",s+=Ww(t[e[n]]);return s+="}",s},WD=function(t,e){const s=t.length;if(s<=e)return[t];const n=[];for(let r=0;r<s;r+=e)r+e>s?n.push(t.substring(r,s)):n.push(t.substring(r,r+e));return n};function oo(t,e){for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])}const zD=function(t){ct(!jD(t),"Invalid JSON number");const e=11,s=52,n=(1<<e-1)-1;let r,o,i,c,u;t===0?(o=0,i=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=c+n,i=Math.round(t*Math.pow(2,s-c)-Math.pow(2,s))):(o=0,i=Math.round(t/Math.pow(2,1-n-s))));const d=[];for(u=s;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);for(u=e;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const m=d.join("");let f="";for(u=0;u<64;u+=8){let p=parseInt(m.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),f=f+p}return f.toLowerCase()},DHe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},NHe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},OHe=new RegExp("^-?(0*)\\d{1,10}$"),FHe=-2147483648,UHe=2147483647,A5=function(t){if(OHe.test(t)){const e=Number(t);if(e>=FHe&&e<=UHe)return e}return null},Df=function(t){try{t()}catch(e){setTimeout(()=>{const s=e.stack||"";throw Br("Exception was thrown by user callback.",s),e},Math.floor(0))}},qHe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pm=function(t,e){const s=setTimeout(t,e);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BHe{constructor(e,s){this.appCheckProvider=s,this.appName=e.name,As(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=s==null?void 0:s.getImmediate({optional:!0}),this.appCheck||s==null||s.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((s,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(s,n):s(null)},0)})}addTokenChangeListener(e){var s;(s=this.appCheckProvider)===null||s===void 0||s.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Br(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VHe{constructor(e,s,n){this.appName_=e,this.firebaseOptions_=s,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(s=>s&&s.code==="auth/token-not-initialized"?(Zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(s,n):s(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(s=>s.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(s=>s.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Br(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="5",QD="v",KD="s",YD="r",XD="f",JD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ZD="ls",eN="p",m1="ac",tN="websocket",sN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HHe{constructor(e,s,n,r,o=!1,i="",c=!1,u=!1,d=null){this.secure=s,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=i,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${s}`}}function GHe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function nN(t,e,s){ct(typeof e=="string","typeof type must == string"),ct(typeof s=="object","typeof params must == object");let n;if(e===tN)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===sN)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);GHe(t)&&(s.ns=t.namespace);const r=[];return oo(s,(o,i)=>{r.push(o+"="+i)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jHe{constructor(){this.counters_={}}incrementCounter(e,s=1){To(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=s}get(){return gB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={},Py={};function Qw(t){const e=t.toString();return Iy[e]||(Iy[e]=new jHe),Iy[e]}function WHe(t,e){const s=t.toString();return Py[s]||(Py[s]=e()),Py[s]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zHe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,s){this.closeAfterResponse=e,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,s){for(this.pendingResponses[e]=s;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Df(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="start",QHe="close",KHe="pLPCommand",YHe="pRTLPCB",rN="id",oN="pw",iN="ser",XHe="cb",JHe="seg",ZHe="ts",eGe="d",tGe="dframe",aN=1870,lN=30,sGe=aN-lN,nGe=25e3,rGe=3e4;class Oc{constructor(e,s,n,r,o,i,c){this.connId=e,this.repoInfo=s,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=i,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lf(e),this.stats_=Qw(s),this.urlFn=u=>(this.appCheckToken&&(u[m1]=this.appCheckToken),nN(s,sN,u))}open(e,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new zHe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rGe)),RHe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kw((...o)=>{const[i,c,u,d,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,i===I5)this.id=c,this.password=u;else if(i===QHe)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+i)},(...o)=>{const[i,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(i,c)},()=>{this.onClosed_()},this.urlFn);const n={};n[I5]="t",n[iN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[XHe]=this.scriptTagHolder.uniqueCallbackIdentifier),n[QD]=zw,this.transportSessionId&&(n[KD]=this.transportSessionId),this.lastSessionId&&(n[ZD]=this.lastSessionId),this.applicationId&&(n[eN]=this.applicationId),this.appCheckToken&&(n[m1]=this.appCheckToken),typeof location<"u"&&location.hostname&&JD.test(location.hostname)&&(n[YD]=XD);const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oc.forceAllow_=!0}static forceDisallow(){Oc.forceDisallow_=!0}static isAvailable(){return Oc.forceAllow_?!0:!Oc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DHe()&&!NHe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const s=Fn(e);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const n=hM(s),r=WD(n,sGe);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,s){this.myDisconnFrame=document.createElement("iframe");const n={};n[tGe]="t",n[rN]=e,n[oN]=s,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const s=Fn(e).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class Kw{constructor(e,s,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PHe(),window[KHe+this.uniqueCallbackIdentifier]=e,window[YHe+this.uniqueCallbackIdentifier]=s,this.myIFrame=Kw.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(c){Zn("frame writing exception"),c.stack&&Zn(c.stack),Zn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Zn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,s){for(this.myID=e,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[rN]=this.myID,e[oN]=this.myPW,e[iN]=this.currentSerial;let s=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lN+n.length<=aN;){const i=this.pendingSegs.shift();n=n+"&"+JHe+r+"="+i.seg+"&"+ZHe+r+"="+i.ts+"&"+eGe+r+"="+i.d,r++}return s=s+n,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(e,s,n){this.pendingSegs.push({seg:e,ts:s,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,s){this.outstandingRequests.add(s);const n=()=>{this.outstandingRequests.delete(s),this.newRequest_()},r=setTimeout(n,Math.floor(nGe)),o=()=>{clearTimeout(r),n()};this.addTag(e,o)}addTag(e,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),s())},n.onerror=()=>{Zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oGe=16384,iGe=45e3;let v0=null;typeof MozWebSocket<"u"?v0=MozWebSocket:typeof WebSocket<"u"&&(v0=WebSocket);class fo{constructor(e,s,n,r,o,i,c){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lf(this.connId),this.stats_=Qw(s),this.connURL=fo.connectionURL_(s,i,c,r,n),this.nodeAdmin=s.nodeAdmin}static connectionURL_(e,s,n,r,o){const i={};return i[QD]=zw,typeof location<"u"&&location.hostname&&JD.test(location.hostname)&&(i[YD]=XD),s&&(i[KD]=s),n&&(i[ZD]=n),r&&(i[m1]=r),o&&(i[eN]=o),nN(e,tN,i)}open(e,s){this.onDisconnect=s,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xl.set("previous_websocket_failure",!0);try{let n;TB(),this.mySock=new v0(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){fo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(s);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&v0!==null&&!fo.forceDisallow_}static previouslyFailed(){return xl.isInMemoryStorage||xl.get("previous_websocket_failure")===!0}markConnectionHealthy(){xl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const n=$m(s);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ct(this.frames===null,"We already have a frame buffer"),e.length<=6){const s=Number(e);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const s=e.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const n=this.extractFrameCount_(s);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const s=Fn(e);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const n=WD(s,oGe);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iGe))}sendString_(e){try{this.mySock.send(e)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fo.responsesRequiredToBeHealthy=2;fo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{static get ALL_TRANSPORTS(){return[Oc,fo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const s=fo&&fo.isAvailable();let n=s&&!fo.previouslyFailed();if(e.webSocketOnly&&(s||Br("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[fo];else{const r=this.transports_=[];for(const o of tf.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);tf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aGe=6e4,lGe=5e3,cGe=10*1024,uGe=100*1024,My="t",P5="d",dGe="s",M5="r",mGe="e",$5="o",R5="a",L5="n",D5="p",fGe="h";class pGe{constructor(e,s,n,r,o,i,c,u,d,m){this.id=e,this.repoInfo_=s,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=i,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lf("c:"+this.id+":"),this.transportManager_=new tf(s),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uGe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cGe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return s=>{e===this.conn_?this.onConnectionLost_(s):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return s=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(s):e===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(e){const s={t:"d",d:e};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(My in e){const s=e[My];s===R5?this.upgradeIfSecondaryHealthy_():s===M5?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===$5&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const s=bd("t",e),n=bd("d",e);if(s==="c")this.onSecondaryControl_(n);else if(s==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:D5,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:R5,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:L5,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const s=bd("t",e),n=bd("d",e);s==="c"?this.onControl_(n):s==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const s=bd(My,e);if(P5 in e){const n=e[P5];if(s===fGe){const r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(s===L5){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===dGe?this.onConnectionShutdown_(n):s===M5?this.onReset_(n):s===mGe?d1("Server Error: "+n):s===$5?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):d1("Unknown control packet command: "+s)}}onHandshake_(e){const s=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),zw!==n&&Br("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,n),pm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aGe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,s){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lGe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:D5,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{put(e,s,n,r){}merge(e,s,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,s,n){}onDisconnectMerge(e,s,n){}onDisconnectCancel(e,s){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.allowedEvents_=e,this.listeners_={},ct(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...s){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,s)}}on(e,s,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:s,context:n});const r=this.getInitialEvent(e);r&&s.apply(n,r)}off(e,s,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===s&&(!n||n===r[o].context)){r.splice(o,1);return}}validateEventType_(e){ct(this.allowedEvents_.find(s=>s===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends uN{static getInstance(){return new b0}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ct(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=32,O5=768;class Ds{constructor(e,s){if(s===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=s}toString(){let e="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(e+="/"+this.pieces_[s]);return e||"/"}}function ys(){return new Ds("")}function Zt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oa(t){return t.pieces_.length-t.pieceNum_}function Rs(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ds(t.pieces_,e)}function dN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function hGe(t){let e="";for(let s=t.pieceNum_;s<t.pieces_.length;s++)t.pieces_[s]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[s])));return e||"/"}function mN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let s=t.pieceNum_;s<t.pieces_.length-1;s++)e.push(t.pieces_[s]);return new Ds(e,0)}function Pn(t,e){const s=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)s.push(t.pieces_[n]);if(e instanceof Ds)for(let n=e.pieceNum_;n<e.pieces_.length;n++)s.push(e.pieces_[n]);else{const n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&s.push(n[r])}return new Ds(s,0)}function Yt(t){return t.pieceNum_>=t.pieces_.length}function Zr(t,e){const s=Zt(t),n=Zt(e);if(s===null)return e;if(s===n)return Zr(Rs(t),Rs(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pN(t,e){if(Oa(t)!==Oa(e))return!1;for(let s=t.pieceNum_,n=e.pieceNum_;s<=t.pieces_.length;s++,n++)if(t.pieces_[s]!==e.pieces_[n])return!1;return!0}function bo(t,e){let s=t.pieceNum_,n=e.pieceNum_;if(Oa(t)>Oa(e))return!1;for(;s<t.pieces_.length;){if(t.pieces_[s]!==e.pieces_[n])return!1;++s,++n}return!0}class gGe{constructor(e,s){this.errorPrefix_=s,this.parts_=mN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Z0(this.parts_[n]);hN(this)}}function vGe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Z0(e),hN(t)}function bGe(t){const e=t.parts_.pop();t.byteLength_-=Z0(e),t.parts_.length>0&&(t.byteLength_-=1)}function hN(t){if(t.byteLength_>O5)throw new Error(t.errorPrefix_+"has a key path longer than "+O5+" bytes ("+t.byteLength_+").");if(t.parts_.length>N5)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+N5+") or object contains a cycle "+cl(t))}function cl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw extends uN{static getInstance(){return new Yw}constructor(){super(["visible"]);let e,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return ct(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=1e3,yGe=60*5*1e3,F5=30*1e3,_Ge=1.3,xGe=3e4,kGe="server_kill",U5=3;class Ei extends cN{constructor(e,s,n,r,o,i,c,u){if(super(),this.repoInfo_=e,this.applicationId_=s,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=i,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Ei.nextPersistentConnectionId_++,this.log_=Lf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yd,this.maxReconnectDelay_=yGe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&b0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,s,n){const r=++this.requestNumber_,o={r,a:e,b:s};this.log_(Fn(o)),ct(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const s=new $l,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const c=i.d;i.s==="ok"?s.resolve(c):s.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),s.promise}listen(e,s,n,r){this.initConnection_();const o=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+o),this.listens.has(i)||this.listens.set(i,new Map),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ct(!this.listens.get(i).has(o),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:s,query:e,tag:n};this.listens.get(i).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const s=this.outstandingGets_[e];this.sendRequest("g",s.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(n)})}sendListen_(e){const s=e.query,n=s._path.toString(),r=s._queryIdentifier;this.log_("Listen on "+n+" for "+r);const o={p:n},i="q";e.tag&&(o.q=s._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(i,o,c=>{const u=c.d,d=c.s;Ei.warnOnListenWarnings_(u,s),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(n,r),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,s){if(e&&typeof e=="object"&&To(e,"w")){const n=au(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const r='".indexOn": "'+s._queryParams.getIndex().toString()+'"',o=s._path.toString();Br(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||RB(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=F5)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,s=$B(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(s,n,r=>{const o=r.s,i=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const s=e.s,n=e.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,n)})}unlisten(e,s){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ct(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,s)}sendUnlisten_(e,s,n,r){this.log_("Unlisten on "+e+" for "+s);const o={p:e},i="n";r&&(o.q=n,o.t=r),this.sendRequest(i,o)}onDisconnectPut(e,s,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,s,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:s,onComplete:n})}onDisconnectMerge(e,s,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,s,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:s,onComplete:n})}onDisconnectCancel(e,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(e,s,n,r){const o={p:s,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,i=>{r&&setTimeout(()=>{r(i.s,i.d)},Math.floor(0))})}put(e,s,n,r){this.putInternal("p",e,s,n,r)}merge(e,s,n,r){this.putInternal("m",e,s,n,r)}putInternal(e,s,n,r,o){this.initConnection_();const i={p:s,d:n};o!==void 0&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+s)}sendPut_(e){const s=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(s,n,o=>{this.log_(s+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const s={c:e};this.log_("reportStats",s),this.sendRequest("s",s,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Fn(e));const s=e.r,n=this.requestCBHash_[s];n&&(delete this.requestCBHash_[s],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,s){this.log_("handleServerMessage",e,s),e==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):e==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):e==="c"?this.onListenRevoked_(s.p,s.q):e==="ac"?this.onAuthRevoked_(s.s,s.d):e==="apc"?this.onAppCheckRevoked_(s.s,s.d):e==="sd"?this.onSecurityDebugPacket_(s):d1("Unrecognized action received from server: "+Fn(e)+`
Are you using the latest client?`)}onReady_(e,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ct(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>xGe&&(this.reconnectDelay_=yd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let s=Math.max(0,this.reconnectDelay_-e);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_Ge)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ei.nextConnectionId_++,o=this.lastSessionId;let i=!1,c=null;const u=function(){c?c.close():(i=!0,n())},d=function(f){ct(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:u,sendRequest:d};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,p]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);i?Zn("getToken() completed but was canceled"):(Zn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new pGe(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,s,n,g=>{Br(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(kGe)},o))}catch(f){this.log_("Failed to get token: "+f),i||(this.repoInfo_.nodeAdmin&&Br(f),u())}}}interrupt(e){Zn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Zn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],m_(this.interruptReasons_)&&(this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const s=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const s=this.outstandingPuts_[e];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,s){let n;s?n=s.map(o=>Ww(o)).join("$"):n="default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,s){const n=new Ds(e).toString();let r;if(this.listens.has(n)){const o=this.listens.get(n);r=o.get(s),o.delete(s),o.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,s){Zn("Auth token revoked: "+e+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=U5&&(this.reconnectDelay_=F5,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,s){Zn("App check token revoked: "+e+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=U5&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const s of e.values())this.sendListen_(s);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let s="js";e["sdk."+s+"."+VD.replace(/\./g,"-")]=1,cx()?e["framework.cordova"]=1:J0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=b0.getInstance().currentlyOnline();return m_(this.interruptReasons_)&&e}}Ei.nextPersistentConnectionId_=0;Ei.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,s){this.name=e,this.node=s}static Wrap(e,s){return new ts(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,s){const n=new ts(Eu,e),r=new ts(Eu,s);return this.compare(n,r)!==0}minPost(){return ts.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp;class gN extends Qv{static get __EMPTY_NODE(){return Kp}static set __EMPTY_NODE(e){Kp=e}compare(e,s){return Gu(e.name,s.name)}isDefinedOn(e){throw Ru("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,s){return!1}minPost(){return ts.MIN}maxPost(){return new ts(Vl,Kp)}makePost(e,s){return ct(typeof e=="string","KeyIndex indexValue must always be a string."),new ts(e,Kp)}toString(){return".key"}}const tu=new gN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,s,n,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(e=e,i=s?n(e.key,s):1,r&&(i*=-1),i<0)this.isReverse_?e=e.left:e=e.right;else if(i===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(e.key,e.value):s={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Sn{constructor(e,s,n,r,o){this.key=e,this.value=s,this.color=n??Sn.RED,this.left=r??Er.EMPTY_NODE,this.right=o??Er.EMPTY_NODE}copy(e,s,n,r,o){return new Sn(e??this.key,s??this.value,n??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let r=this;const o=n(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,s,n),null):o===0?r=r.copy(null,s,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,s,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Er.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,s){let n,r;if(n=this,s(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,s),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),s(e,n.key)===0){if(n.right.isEmpty())return Er.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,s))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Sn.RED=!0;Sn.BLACK=!1;class wGe{copy(e,s,n,r,o){return this}insert(e,s,n){return new Sn(e,s,null)}remove(e,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Er{constructor(e,s=Er.EMPTY_NODE){this.comparator_=e,this.root_=s}insert(e,s){return new Er(this.comparator_,this.root_.insert(e,s,this.comparator_).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Er(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Sn.BLACK,null,null))}get(e){let s,n=this.root_;for(;!n.isEmpty();){if(s=this.comparator_(e,n.key),s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}getPredecessorKey(e){let s,n=this.root_,r=null;for(;!n.isEmpty();)if(s=this.comparator_(e,n.key),s===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else s<0?n=n.left:s>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,s){return new Yp(this.root_,e,this.comparator_,!1,s)}getReverseIteratorFrom(e,s){return new Yp(this.root_,e,this.comparator_,!0,s)}getReverseIterator(e){return new Yp(this.root_,null,this.comparator_,!0,e)}}Er.EMPTY_NODE=new wGe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EGe(t,e){return Gu(t.name,e.name)}function Xw(t,e){return Gu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1;function CGe(t){f1=t}const vN=function(t){return typeof t=="number"?"number:"+zD(t):"string:"+t},bN=function(t){if(t.isLeafNode()){const e=t.val();ct(typeof e=="string"||typeof e=="number"||typeof e=="object"&&To(e,".sv"),"Priority must be a string or number.")}else ct(t===f1||t.isEmpty(),"priority of unexpected type.");ct(t===f1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q5;class En{static set __childrenNodeConstructor(e){q5=e}static get __childrenNodeConstructor(){return q5}constructor(e,s=En.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=s,this.lazyHash_=null,ct(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new En(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:En.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Yt(e)?this:Zt(e)===".priority"?this.priorityNode_:En.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,s){return null}updateImmediateChild(e,s){return e===".priority"?this.updatePriority(s):s.isEmpty()&&e!==".priority"?this:En.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,s).updatePriority(this.priorityNode_)}updateChild(e,s){const n=Zt(e);return n===null?s:s.isEmpty()&&n!==".priority"?this:(ct(n!==".priority"||Oa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,En.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rs(e),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,s){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vN(this.priorityNode_.val())+":");const s=typeof this.value_;e+=s+":",s==="number"?e+=zD(this.value_):e+=this.value_,this.lazyHash_=GD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===En.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof En.__childrenNodeConstructor?-1:(ct(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const s=typeof e.value_,n=typeof this.value_,r=En.VALUE_TYPE_ORDER.indexOf(s),o=En.VALUE_TYPE_ORDER.indexOf(n);return ct(r>=0,"Unknown leaf type: "+s),ct(o>=0,"Unknown leaf type: "+n),r===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const s=e;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}En.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yN,_N;function SGe(t){yN=t}function TGe(t){_N=t}class AGe extends Qv{compare(e,s){const n=e.node.getPriority(),r=s.node.getPriority(),o=n.compareTo(r);return o===0?Gu(e.name,s.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,s){return!e.getPriority().equals(s.getPriority())}minPost(){return ts.MIN}maxPost(){return new ts(Vl,new En("[PRIORITY-POST]",_N))}makePost(e,s){const n=yN(e);return new ts(s,new En("[PRIORITY-POST]",n))}toString(){return".priority"}}const rr=new AGe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IGe=Math.log(2);class PGe{constructor(e){const s=o=>parseInt(Math.log(o)/IGe,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=s(e+1),this.current_=this.count-1;const r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const y0=function(t,e,s,n){t.sort(e);const r=function(u,d){const m=d-u;let f,p;if(m===0)return null;if(m===1)return f=t[u],p=s?s(f):f,new Sn(p,f.node,Sn.BLACK,null,null);{const g=parseInt(m/2,10)+u,w=r(u,g),C=r(g+1,d);return f=t[g],p=s?s(f):f,new Sn(p,f.node,Sn.BLACK,w,C)}},o=function(u){let d=null,m=null,f=t.length;const p=function(w,C){const E=f-w,k=f;f-=w;const A=r(E+1,k),S=t[E],T=s?s(S):S;g(new Sn(T,S.node,C,null,A))},g=function(w){d?(d.left=w,d=w):(m=w,d=w)};for(let w=0;w<u.count;++w){const C=u.nextBitIsOne(),E=Math.pow(2,u.count-(w+1));C?p(E,Sn.BLACK):(p(E,Sn.BLACK),p(E,Sn.RED))}return m},i=new PGe(t.length),c=o(i);return new Er(n||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $y;const wc={};class yi{static get Default(){return ct(wc&&rr,"ChildrenNode.ts has not been loaded"),$y=$y||new yi({".priority":wc},{".priority":rr}),$y}constructor(e,s){this.indexes_=e,this.indexSet_=s}get(e){const s=au(this.indexes_,e);if(!s)throw new Error("No index defined for "+e);return s instanceof Er?s:null}hasIndex(e){return To(this.indexSet_,e.toString())}addIndex(e,s){ct(e!==tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const o=s.getIterator(ts.Wrap);let i=o.getNext();for(;i;)r=r||e.isDefinedOn(i.node),n.push(i),i=o.getNext();let c;r?c=y0(n,e.getCompare()):c=wc;const u=e.toString(),d=Object.assign({},this.indexSet_);d[u]=e;const m=Object.assign({},this.indexes_);return m[u]=c,new yi(m,d)}addToIndexes(e,s){const n=Oh(this.indexes_,(r,o)=>{const i=au(this.indexSet_,o);if(ct(i,"Missing index implementation for "+o),r===wc)if(i.isDefinedOn(e.node)){const c=[],u=s.getIterator(ts.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),y0(c,i.getCompare())}else return wc;else{const c=s.get(e.name);let u=r;return c&&(u=u.remove(new ts(e.name,c))),u.insert(e,e.node)}});return new yi(n,this.indexSet_)}removeFromIndexes(e,s){const n=Oh(this.indexes_,r=>{if(r===wc)return r;{const o=s.get(e.name);return o?r.remove(new ts(e.name,o)):r}});return new yi(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d;class fs{static get EMPTY_NODE(){return _d||(_d=new fs(new Er(Xw),null,yi.Default))}constructor(e,s,n){this.children_=e,this.priorityNode_=s,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&bN(this.priorityNode_),this.children_.isEmpty()&&ct(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_d}updatePriority(e){return this.children_.isEmpty()?this:new fs(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const s=this.children_.get(e);return s===null?_d:s}}getChild(e){const s=Zt(e);return s===null?this:this.getImmediateChild(s).getChild(Rs(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,s){if(ct(s,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(s);{const n=new ts(e,s);let r,o;s.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,s),o=this.indexMap_.addToIndexes(n,this.children_));const i=r.isEmpty()?_d:this.priorityNode_;return new fs(r,i,o)}}updateChild(e,s){const n=Zt(e);if(n===null)return s;{ct(Zt(e)!==".priority"||Oa(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Rs(e),s);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const s={};let n=0,r=0,o=!0;if(this.forEachChild(rr,(i,c)=>{s[i]=c.val(e),n++,o&&fs.INTEGER_REGEXP_.test(i)?r=Math.max(r,Number(i)):o=!1}),!e&&o&&r<2*n){const i=[];for(const c in s)i[c]=s[c];return i}else return e&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vN(this.getPriority().val())+":"),this.forEachChild(rr,(s,n)=>{const r=n.hash();r!==""&&(e+=":"+s+":"+r)}),this.lazyHash_=e===""?"":GD(e)}return this.lazyHash_}getPredecessorChildName(e,s,n){const r=this.resolveIndex_(n);if(r){const o=r.getPredecessorKey(new ts(e,s));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const s=this.resolveIndex_(e);if(s){const n=s.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const s=this.getFirstChildName(e);return s?new ts(s,this.children_.get(s)):null}getLastChildName(e){const s=this.resolveIndex_(e);if(s){const n=s.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const s=this.getLastChildName(e);return s?new ts(s,this.children_.get(s)):null}forEachChild(e,s){const n=this.resolveIndex_(e);return n?n.inorderTraversal(r=>s(r.name,r.node)):this.children_.inorderTraversal(s)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,s){const n=this.resolveIndex_(s);if(n)return n.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ts.Wrap);let o=r.peek();for(;o!=null&&s.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,s){const n=this.resolveIndex_(s);if(n)return n.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ts.Wrap);let o=r.peek();for(;o!=null&&s.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Nf?-1:0}withIndex(e){if(e===tu||this.indexMap_.hasIndex(e))return this;{const s=this.indexMap_.addIndex(e,this.children_);return new fs(this.children_,this.priorityNode_,s)}}isIndexed(e){return e===tu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const s=e;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const n=this.getIterator(rr),r=s.getIterator(rr);let o=n.getNext(),i=r.getNext();for(;o&&i;){if(o.name!==i.name||!o.node.equals(i.node))return!1;o=n.getNext(),i=r.getNext()}return o===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===tu?null:this.indexMap_.get(e.toString())}}fs.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MGe extends fs{constructor(){super(new Er(Xw),fs.EMPTY_NODE,yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fs.EMPTY_NODE}isEmpty(){return!1}}const Nf=new MGe;Object.defineProperties(ts,{MIN:{value:new ts(Eu,fs.EMPTY_NODE)},MAX:{value:new ts(Vl,Nf)}});gN.__EMPTY_NODE=fs.EMPTY_NODE;En.__childrenNodeConstructor=fs;CGe(Nf);TGe(Nf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ge=!0;function er(t,e=null){if(t===null)return fs.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ct(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const s=t;return new En(s,er(e))}if(!(t instanceof Array)&&$Ge){const s=[];let n=!1;if(oo(t,(i,c)=>{if(i.substring(0,1)!=="."){const u=er(c);u.isEmpty()||(n=n||!u.getPriority().isEmpty(),s.push(new ts(i,u)))}}),s.length===0)return fs.EMPTY_NODE;const o=y0(s,EGe,i=>i.name,Xw);if(n){const i=y0(s,rr.getCompare());return new fs(o,er(e),new yi({".priority":i},{".priority":rr}))}else return new fs(o,er(e),yi.Default)}else{let s=fs.EMPTY_NODE;return oo(t,(n,r)=>{if(To(t,n)&&n.substring(0,1)!=="."){const o=er(r);(o.isLeafNode()||!o.isEmpty())&&(s=s.updateImmediateChild(n,o))}}),s.updatePriority(er(e))}}SGe(er);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RGe extends Qv{constructor(e){super(),this.indexPath_=e,ct(!Yt(e)&&Zt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,s){const n=this.extractChild(e.node),r=this.extractChild(s.node),o=n.compareTo(r);return o===0?Gu(e.name,s.name):o}makePost(e,s){const n=er(e),r=fs.EMPTY_NODE.updateChild(this.indexPath_,n);return new ts(s,r)}maxPost(){const e=fs.EMPTY_NODE.updateChild(this.indexPath_,Nf);return new ts(Vl,e)}toString(){return mN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LGe extends Qv{compare(e,s){const n=e.node.compareTo(s.node);return n===0?Gu(e.name,s.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,s){return!e.equals(s)}minPost(){return ts.MIN}maxPost(){return ts.MAX}makePost(e,s){const n=er(e);return new ts(s,n)}toString(){return".value"}}const DGe=new LGe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NGe(t){return{type:"value",snapshotNode:t}}function OGe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function FGe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function B5(t,e,s){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:s}}function UGe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ct(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ct(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu}hasEnd(){return this.endSet_}getIndexEndValue(){return ct(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ct(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ct(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new Jw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function V5(t){const e={};if(t.isDefault())return e;let s;if(t.index_===rr?s="$priority":t.index_===DGe?s="$value":t.index_===tu?s="$key":(ct(t.index_ instanceof RGe,"Unrecognized index type!"),s=t.index_.toString()),e.orderBy=Fn(s),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Fn(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Fn(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Fn(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Fn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function H5(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let s=t.viewFrom_;s===""&&(t.isViewFromLeft()?s="l":s="r"),e.vf=s}return t.index_!==rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends cN{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,s){return s!==void 0?"tag$"+s:(ct(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,s,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=s,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Lf("p:rest:"),this.listens_={}}listen(e,s,n,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const i=_0.getListenId_(e,n),c={};this.listens_[i]=c;const u=V5(e._queryParams);this.restRequest_(o+".json",u,(d,m)=>{let f=m;if(d===404&&(f=null,d=null),d===null&&this.onDataUpdate_(o,f,!1,n),au(this.listens_,i)===c){let p;d?d===401?p="permission_denied":p="rest_error:"+d:p="ok",r(p,null)}})}unlisten(e,s){const n=_0.getListenId_(e,s);delete this.listens_[n]}get(e){const s=V5(e._queryParams),n=e._path.toString(),r=new $l;return this.restRequest_(n+".json",s,(o,i)=>{let c=i;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(n,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,s={},n){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(s.auth=r.accessToken),o&&o.token&&(s.ac=o.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zl(s);this.log_("Sending REST request for "+i);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(n&&c.readyState===4){this.log_("REST Response for "+i+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=$m(c.responseText)}catch{Br("Failed to parse JSON response for "+i+": "+c.responseText)}n(null,u)}else c.status!==401&&c.status!==404&&Br("Got unsuccessful REST response for "+i+" Status: "+c.status),n(c.status);n=null}},c.open("GET",i,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qGe{constructor(){this.rootNode_=fs.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,s){this.rootNode_=this.rootNode_.updateChild(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return{value:null,children:new Map}}function xN(t,e,s){if(Yt(e))t.value=s,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,s);else{const n=Zt(e);t.children.has(n)||t.children.set(n,x0());const r=t.children.get(n);e=Rs(e),xN(r,e,s)}}function p1(t,e,s){t.value!==null?s(e,t.value):BGe(t,(n,r)=>{const o=new Ds(e.toString()+"/"+n);p1(r,o,s)})}function BGe(t,e){t.children.forEach((s,n)=>{e(n,s)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VGe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),s=Object.assign({},e);return this.last_&&oo(this.last_,(n,r)=>{s[n]=s[n]-r}),this.last_=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=10*1e3,HGe=30*1e3,GGe=5*60*1e3;class jGe{constructor(e,s){this.server_=s,this.statsToReport_={},this.statsListener_=new VGe(e);const n=G5+(HGe-G5)*Math.random();pm(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),s={};let n=!1;oo(e,(r,o)=>{o>0&&To(this.statsToReport_,r)&&(s[r]=o,n=!0)}),n&&this.server_.reportStats(s),pm(this.reportStats_.bind(this),Math.floor(Math.random()*2*GGe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wo||(Wo={}));function kN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function EN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,s,n){this.path=e,this.affectedTree=s,this.revert=n,this.type=Wo.ACK_USER_WRITE,this.source=kN()}operationForChild(e){if(Yt(this.path)){if(this.affectedTree.value!=null)return ct(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new Ds(e));return new k0(ys(),s,this.revert)}}else return ct(Zt(this.path)===e,"operationForChild called for unrelated child."),new k0(Rs(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,s,n){this.source=e,this.path=s,this.snap=n,this.type=Wo.OVERWRITE}operationForChild(e){return Yt(this.path)?new Hl(this.source,ys(),this.snap.getImmediateChild(e)):new Hl(this.source,Rs(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,s,n){this.source=e,this.path=s,this.children=n,this.type=Wo.MERGE}operationForChild(e){if(Yt(this.path)){const s=this.children.subtree(new Ds(e));return s.isEmpty()?null:s.value?new Hl(this.source,ys(),s.value):new sf(this.source,ys(),s)}else return ct(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sf(this.source,Rs(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,s,n){this.node_=e,this.fullyInitialized_=s,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const s=Zt(e);return this.isCompleteForChild(s)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function WGe(t,e,s,n){const r=[],o=[];return e.forEach(i=>{i.type==="child_changed"&&t.index_.indexedValueChanged(i.oldSnap,i.snapshotNode)&&o.push(UGe(i.childName,i.snapshotNode))}),xd(t,r,"child_removed",e,n,s),xd(t,r,"child_added",e,n,s),xd(t,r,"child_moved",o,n,s),xd(t,r,"child_changed",e,n,s),xd(t,r,"value",e,n,s),r}function xd(t,e,s,n,r,o){const i=n.filter(c=>c.type===s);i.sort((c,u)=>QGe(t,c,u)),i.forEach(c=>{const u=zGe(t,c,o);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function zGe(t,e,s){return e.type==="value"||e.type==="child_removed"||(e.prevName=s.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function QGe(t,e,s){if(e.childName==null||s.childName==null)throw Ru("Should only compare child_ events.");const n=new ts(e.childName,e.snapshotNode),r=new ts(s.childName,s.snapshotNode);return t.index_.compare(n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){return{eventCache:t,serverCache:e}}function hm(t,e,s,n){return CN(new Zw(e,s,n),t.serverCache)}function SN(t,e,s,n){return CN(t.eventCache,new Zw(e,s,n))}function h1(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Gl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ry;const KGe=()=>(Ry||(Ry=new Er(LHe)),Ry);class $s{static fromObject(e){let s=new $s(null);return oo(e,(n,r)=>{s=s.set(new Ds(n),r)}),s}constructor(e,s=KGe()){this.value=e,this.children=s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,s){if(this.value!=null&&s(this.value))return{path:ys(),value:this.value};if(Yt(e))return null;{const n=Zt(e),r=this.children.get(n);if(r!==null){const o=r.findRootMostMatchingPathAndValue(Rs(e),s);return o!=null?{path:Pn(new Ds(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const s=Zt(e),n=this.children.get(s);return n!==null?n.subtree(Rs(e)):new $s(null)}}set(e,s){if(Yt(e))return new $s(s,this.children);{const n=Zt(e),o=(this.children.get(n)||new $s(null)).set(Rs(e),s),i=this.children.insert(n,o);return new $s(this.value,i)}}remove(e){if(Yt(e))return this.children.isEmpty()?new $s(null):new $s(null,this.children);{const s=Zt(e),n=this.children.get(s);if(n){const r=n.remove(Rs(e));let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),this.value===null&&o.isEmpty()?new $s(null):new $s(this.value,o)}else return this}}get(e){if(Yt(e))return this.value;{const s=Zt(e),n=this.children.get(s);return n?n.get(Rs(e)):null}}setTree(e,s){if(Yt(e))return s;{const n=Zt(e),o=(this.children.get(n)||new $s(null)).setTree(Rs(e),s);let i;return o.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,o),new $s(this.value,i)}}fold(e){return this.fold_(ys(),e)}fold_(e,s){const n={};return this.children.inorderTraversal((r,o)=>{n[r]=o.fold_(Pn(e,r),s)}),s(e,this.value,n)}findOnPath(e,s){return this.findOnPath_(e,ys(),s)}findOnPath_(e,s,n){const r=this.value?n(s,this.value):!1;if(r)return r;if(Yt(e))return null;{const o=Zt(e),i=this.children.get(o);return i?i.findOnPath_(Rs(e),Pn(s,o),n):null}}foreachOnPath(e,s){return this.foreachOnPath_(e,ys(),s)}foreachOnPath_(e,s,n){if(Yt(e))return this;{this.value&&n(s,this.value);const r=Zt(e),o=this.children.get(r);return o?o.foreachOnPath_(Rs(e),Pn(s,r),n):new $s(null)}}foreach(e){this.foreach_(ys(),e)}foreach_(e,s){this.children.inorderTraversal((n,r)=>{r.foreach_(Pn(e,n),s)}),this.value&&s(e,this.value)}foreachChild(e){this.children.inorderTraversal((s,n)=>{n.value&&e(s,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.writeTree_=e}static empty(){return new xo(new $s(null))}}function gm(t,e,s){if(Yt(e))return new xo(new $s(s));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const r=n.path;let o=n.value;const i=Zr(r,e);return o=o.updateChild(i,s),new xo(t.writeTree_.set(r,o))}else{const r=new $s(s),o=t.writeTree_.setTree(e,r);return new xo(o)}}}function j5(t,e,s){let n=t;return oo(s,(r,o)=>{n=gm(n,Pn(e,r),o)}),n}function W5(t,e){if(Yt(e))return xo.empty();{const s=t.writeTree_.setTree(e,new $s(null));return new xo(s)}}function g1(t,e){return rc(t,e)!=null}function rc(t,e){const s=t.writeTree_.findRootMostValueAndPath(e);return s!=null?t.writeTree_.get(s.path).getChild(Zr(s.path,e)):null}function z5(t){const e=[],s=t.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(rr,(n,r)=>{e.push(new ts(n,r))}):t.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new ts(n,r.value))}),e}function ya(t,e){if(Yt(e))return t;{const s=rc(t,e);return s!=null?new xo(new $s(s)):new xo(t.writeTree_.subtree(e))}}function v1(t){return t.writeTree_.isEmpty()}function Cu(t,e){return TN(ys(),t.writeTree_,e)}function TN(t,e,s){if(e.value!=null)return s.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(ct(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):s=TN(Pn(t,r),o,s)}),!s.getChild(t).isEmpty()&&n!==null&&(s=s.updateChild(Pn(t,".priority"),n)),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e){return RN(e,t)}function YGe(t,e,s,n,r){ct(n>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:s,writeId:n,visible:r}),r&&(t.visibleWrites=gm(t.visibleWrites,e,s)),t.lastWriteId=n}function XGe(t,e){for(let s=0;s<t.allWrites.length;s++){const n=t.allWrites[s];if(n.writeId===e)return n}return null}function JGe(t,e){const s=t.allWrites.findIndex(c=>c.writeId===e);ct(s>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[s];t.allWrites.splice(s,1);let r=n.visible,o=!1,i=t.allWrites.length-1;for(;r&&i>=0;){const c=t.allWrites[i];c.visible&&(i>=s&&ZGe(c,n.path)?r=!1:bo(n.path,c.path)&&(o=!0)),i--}if(r){if(o)return eje(t),!0;if(n.snap)t.visibleWrites=W5(t.visibleWrites,n.path);else{const c=n.children;oo(c,u=>{t.visibleWrites=W5(t.visibleWrites,Pn(n.path,u))})}return!0}else return!1}function ZGe(t,e){if(t.snap)return bo(t.path,e);for(const s in t.children)if(t.children.hasOwnProperty(s)&&bo(Pn(t.path,s),e))return!0;return!1}function eje(t){t.visibleWrites=IN(t.allWrites,tje,ys()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tje(t){return t.visible}function IN(t,e,s){let n=xo.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const i=o.path;let c;if(o.snap)bo(s,i)?(c=Zr(s,i),n=gm(n,c,o.snap)):bo(i,s)&&(c=Zr(i,s),n=gm(n,ys(),o.snap.getChild(c)));else if(o.children){if(bo(s,i))c=Zr(s,i),n=j5(n,c,o.children);else if(bo(i,s))if(c=Zr(i,s),Yt(c))n=j5(n,ys(),o.children);else{const u=au(o.children,Zt(c));if(u){const d=u.getChild(Rs(c));n=gm(n,ys(),d)}}}else throw Ru("WriteRecord should have .snap or .children")}}return n}function PN(t,e,s,n,r){if(!n&&!r){const o=rc(t.visibleWrites,e);if(o!=null)return o;{const i=ya(t.visibleWrites,e);if(v1(i))return s;if(s==null&&!g1(i,ys()))return null;{const c=s||fs.EMPTY_NODE;return Cu(i,c)}}}else{const o=ya(t.visibleWrites,e);if(!r&&v1(o))return s;if(!r&&s==null&&!g1(o,ys()))return null;{const i=function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(bo(d.path,e)||bo(e,d.path))},c=IN(t.allWrites,i,e),u=s||fs.EMPTY_NODE;return Cu(c,u)}}}function sje(t,e,s){let n=fs.EMPTY_NODE;const r=rc(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(rr,(o,i)=>{n=n.updateImmediateChild(o,i)}),n;if(s){const o=ya(t.visibleWrites,e);return s.forEachChild(rr,(i,c)=>{const u=Cu(ya(o,new Ds(i)),c);n=n.updateImmediateChild(i,u)}),z5(o).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}else{const o=ya(t.visibleWrites,e);return z5(o).forEach(i=>{n=n.updateImmediateChild(i.name,i.node)}),n}}function nje(t,e,s,n,r){ct(n||r,"Either existingEventSnap or existingServerSnap must exist");const o=Pn(e,s);if(g1(t.visibleWrites,o))return null;{const i=ya(t.visibleWrites,o);return v1(i)?r.getChild(s):Cu(i,r.getChild(s))}}function rje(t,e,s,n){const r=Pn(e,s),o=rc(t.visibleWrites,r);if(o!=null)return o;if(n.isCompleteForChild(s)){const i=ya(t.visibleWrites,r);return Cu(i,n.getNode().getImmediateChild(s))}else return null}function oje(t,e){return rc(t.visibleWrites,e)}function ije(t,e,s,n,r,o,i){let c;const u=ya(t.visibleWrites,e),d=rc(u,ys());if(d!=null)c=d;else if(s!=null)c=Cu(u,s);else return[];if(c=c.withIndex(i),!c.isEmpty()&&!c.isLeafNode()){const m=[],f=i.getCompare(),p=o?c.getReverseIteratorFrom(n,i):c.getIteratorFrom(n,i);let g=p.getNext();for(;g&&m.length<r;)f(g,n)!==0&&m.push(g),g=p.getNext();return m}else return[]}function aje(){return{visibleWrites:xo.empty(),allWrites:[],lastWriteId:-1}}function b1(t,e,s,n){return PN(t.writeTree,t.treePath,e,s,n)}function MN(t,e){return sje(t.writeTree,t.treePath,e)}function Q5(t,e,s,n){return nje(t.writeTree,t.treePath,e,s,n)}function w0(t,e){return oje(t.writeTree,Pn(t.treePath,e))}function lje(t,e,s,n,r,o){return ije(t.writeTree,t.treePath,e,s,n,r,o)}function e2(t,e,s){return rje(t.writeTree,t.treePath,e,s)}function $N(t,e){return RN(Pn(t.treePath,e),t.writeTree)}function RN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cje{constructor(){this.changeMap=new Map}trackChildChange(e){const s=e.type,n=e.childName;ct(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),ct(n!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const o=r.type;if(s==="child_added"&&o==="child_removed")this.changeMap.set(n,B5(n,e.snapshotNode,r.snapshotNode));else if(s==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(s==="child_removed"&&o==="child_changed")this.changeMap.set(n,FGe(n,r.oldSnap));else if(s==="child_changed"&&o==="child_added")this.changeMap.set(n,OGe(n,e.snapshotNode));else if(s==="child_changed"&&o==="child_changed")this.changeMap.set(n,B5(n,e.snapshotNode,r.oldSnap));else throw Ru("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uje{getCompleteChild(e){return null}getChildAfterChild(e,s,n){return null}}const LN=new uje;class t2{constructor(e,s,n=null){this.writes_=e,this.viewCache_=s,this.optCompleteServerCache_=n}getCompleteChild(e){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(e))return s.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new Zw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e2(this.writes_,e,n)}}getChildAfterChild(e,s,n){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gl(this.viewCache_),o=lje(this.writes_,r,s,1,n,e);return o.length===0?null:o[0]}}function dje(t,e){ct(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ct(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function mje(t,e,s,n,r){const o=new cje;let i,c;if(s.type===Wo.OVERWRITE){const d=s;d.source.fromUser?i=y1(t,e,d.path,d.snap,n,r,o):(ct(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Yt(d.path),i=E0(t,e,d.path,d.snap,n,r,c,o))}else if(s.type===Wo.MERGE){const d=s;d.source.fromUser?i=pje(t,e,d.path,d.children,n,r,o):(ct(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),i=_1(t,e,d.path,d.children,n,r,c,o))}else if(s.type===Wo.ACK_USER_WRITE){const d=s;d.revert?i=vje(t,e,d.path,n,r,o):i=hje(t,e,d.path,d.affectedTree,n,r,o)}else if(s.type===Wo.LISTEN_COMPLETE)i=gje(t,e,s.path,n,o);else throw Ru("Unknown operation type: "+s.type);const u=o.getChanges();return fje(e,i,u),{viewCache:i,changes:u}}function fje(t,e,s){const n=e.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=h1(t);(s.length>0||!t.eventCache.isFullyInitialized()||r&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&s.push(NGe(h1(e)))}}function DN(t,e,s,n,r,o){const i=e.eventCache;if(w0(n,s)!=null)return e;{let c,u;if(Yt(s))if(ct(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Gl(e),m=d instanceof fs?d:fs.EMPTY_NODE,f=MN(n,m);c=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const d=b1(n,Gl(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Zt(s);if(d===".priority"){ct(Oa(s)===1,"Can't have a priority with additional path components");const m=i.getNode();u=e.serverCache.getNode();const f=Q5(n,s,m,u);f!=null?c=t.filter.updatePriority(m,f):c=i.getNode()}else{const m=Rs(s);let f;if(i.isCompleteForChild(d)){u=e.serverCache.getNode();const p=Q5(n,s,i.getNode(),u);p!=null?f=i.getNode().getImmediateChild(d).updateChild(m,p):f=i.getNode().getImmediateChild(d)}else f=e2(n,d,e.serverCache);f!=null?c=t.filter.updateChild(i.getNode(),d,f,m,r,o):c=i.getNode()}}return hm(e,c,i.isFullyInitialized()||Yt(s),t.filter.filtersNodes())}}function E0(t,e,s,n,r,o,i,c){const u=e.serverCache;let d;const m=i?t.filter:t.filter.getIndexedFilter();if(Yt(s))d=m.updateFullNode(u.getNode(),n,null);else if(m.filtersNodes()&&!u.isFiltered()){const g=u.getNode().updateChild(s,n);d=m.updateFullNode(u.getNode(),g,null)}else{const g=Zt(s);if(!u.isCompleteForPath(s)&&Oa(s)>1)return e;const w=Rs(s),E=u.getNode().getImmediateChild(g).updateChild(w,n);g===".priority"?d=m.updatePriority(u.getNode(),E):d=m.updateChild(u.getNode(),g,E,w,LN,null)}const f=SN(e,d,u.isFullyInitialized()||Yt(s),m.filtersNodes()),p=new t2(r,f,o);return DN(t,f,s,r,p,c)}function y1(t,e,s,n,r,o,i){const c=e.eventCache;let u,d;const m=new t2(r,e,o);if(Yt(s))d=t.filter.updateFullNode(e.eventCache.getNode(),n,i),u=hm(e,d,!0,t.filter.filtersNodes());else{const f=Zt(s);if(f===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),n),u=hm(e,d,c.isFullyInitialized(),c.isFiltered());else{const p=Rs(s),g=c.getNode().getImmediateChild(f);let w;if(Yt(p))w=n;else{const C=m.getCompleteChild(f);C!=null?dN(p)===".priority"&&C.getChild(fN(p)).isEmpty()?w=C:w=C.updateChild(p,n):w=fs.EMPTY_NODE}if(g.equals(w))u=e;else{const C=t.filter.updateChild(c.getNode(),f,w,p,m,i);u=hm(e,C,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function K5(t,e){return t.eventCache.isCompleteForChild(e)}function pje(t,e,s,n,r,o,i){let c=e;return n.foreach((u,d)=>{const m=Pn(s,u);K5(e,Zt(m))&&(c=y1(t,c,m,d,r,o,i))}),n.foreach((u,d)=>{const m=Pn(s,u);K5(e,Zt(m))||(c=y1(t,c,m,d,r,o,i))}),c}function Y5(t,e,s){return s.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function _1(t,e,s,n,r,o,i,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;Yt(s)?d=n:d=new $s(null).setTree(s,n);const m=e.serverCache.getNode();return d.children.inorderTraversal((f,p)=>{if(m.hasChild(f)){const g=e.serverCache.getNode().getImmediateChild(f),w=Y5(t,g,p);u=E0(t,u,new Ds(f),w,r,o,i,c)}}),d.children.inorderTraversal((f,p)=>{const g=!e.serverCache.isCompleteForChild(f)&&p.value===null;if(!m.hasChild(f)&&!g){const w=e.serverCache.getNode().getImmediateChild(f),C=Y5(t,w,p);u=E0(t,u,new Ds(f),C,r,o,i,c)}}),u}function hje(t,e,s,n,r,o,i){if(w0(r,s)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(n.value!=null){if(Yt(s)&&u.isFullyInitialized()||u.isCompleteForPath(s))return E0(t,e,s,u.getNode().getChild(s),r,o,c,i);if(Yt(s)){let d=new $s(null);return u.getNode().forEachChild(tu,(m,f)=>{d=d.set(new Ds(m),f)}),_1(t,e,s,d,r,o,c,i)}else return e}else{let d=new $s(null);return n.foreach((m,f)=>{const p=Pn(s,m);u.isCompleteForPath(p)&&(d=d.set(m,u.getNode().getChild(p)))}),_1(t,e,s,d,r,o,c,i)}}function gje(t,e,s,n,r){const o=e.serverCache,i=SN(e,o.getNode(),o.isFullyInitialized()||Yt(s),o.isFiltered());return DN(t,i,s,n,LN,r)}function vje(t,e,s,n,r,o){let i;if(w0(n,s)!=null)return e;{const c=new t2(n,e,r),u=e.eventCache.getNode();let d;if(Yt(s)||Zt(s)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=b1(n,Gl(e));else{const f=e.serverCache.getNode();ct(f instanceof fs,"serverChildren would be complete if leaf node"),m=MN(n,f)}m=m,d=t.filter.updateFullNode(u,m,o)}else{const m=Zt(s);let f=e2(n,m,e.serverCache);f==null&&e.serverCache.isCompleteForChild(m)&&(f=u.getImmediateChild(m)),f!=null?d=t.filter.updateChild(u,m,f,Rs(s),c,o):e.eventCache.getNode().hasChild(m)?d=t.filter.updateChild(u,m,fs.EMPTY_NODE,Rs(s),c,o):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(i=b1(n,Gl(e)),i.isLeafNode()&&(d=t.filter.updateFullNode(d,i,o)))}return i=e.serverCache.isFullyInitialized()||w0(n,ys())!=null,hm(e,d,i,t.filter.filtersNodes())}}function bje(t,e){const s=Gl(t.viewCache_);return s&&(t.query._queryParams.loadsAllData()||!Yt(e)&&!s.getImmediateChild(Zt(e)).isEmpty())?s.getChild(e):null}function X5(t,e,s,n){e.type===Wo.MERGE&&e.source.queryId!==null&&(ct(Gl(t.viewCache_),"We should always have a full cache before handling merges"),ct(h1(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=mje(t.processor_,r,e,s,n);return dje(t.processor_,o.viewCache),ct(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,yje(t,o.changes,o.viewCache.eventCache.getNode())}function yje(t,e,s,n){const r=t.eventRegistrations_;return WGe(t.eventGenerator_,e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J5;function _je(t){ct(!J5,"__referenceConstructor has already been defined"),J5=t}function s2(t,e,s,n){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return ct(o!=null,"SyncTree gave us an op for an invalid query."),X5(o,e,s,n)}else{let o=[];for(const i of t.views.values())o=o.concat(X5(i,e,s,n));return o}}function n2(t,e){let s=null;for(const n of t.views.values())s=s||bje(n,e);return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z5;function xje(t){ct(!Z5,"__referenceConstructor has already been defined"),Z5=t}class eI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $s(null),this.pendingWriteTree_=aje(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kje(t,e,s,n,r){return YGe(t.pendingWriteTree_,e,s,n,r),r?Yv(t,new Hl(kN(),e,s)):[]}function Fc(t,e,s=!1){const n=XGe(t.pendingWriteTree_,e);if(JGe(t.pendingWriteTree_,e)){let o=new $s(null);return n.snap!=null?o=o.set(ys(),!0):oo(n.children,i=>{o=o.set(new Ds(i),!0)}),Yv(t,new k0(n.path,o,s))}else return[]}function Kv(t,e,s){return Yv(t,new Hl(wN(),e,s))}function wje(t,e,s){const n=$s.fromObject(s);return Yv(t,new sf(wN(),e,n))}function Eje(t,e,s,n){const r=UN(t,n);if(r!=null){const o=qN(r),i=o.path,c=o.queryId,u=Zr(i,e),d=new Hl(EN(c),u,s);return BN(t,i,d)}else return[]}function Cje(t,e,s,n){const r=UN(t,n);if(r){const o=qN(r),i=o.path,c=o.queryId,u=Zr(i,e),d=$s.fromObject(s),m=new sf(EN(c),u,d);return BN(t,i,m)}else return[]}function NN(t,e,s){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(i,c)=>{const u=Zr(i,e),d=n2(c,u);if(d)return d});return PN(r,e,o,s,!0)}function Yv(t,e){return ON(e,t.syncPointTree_,null,AN(t.pendingWriteTree_,ys()))}function ON(t,e,s,n){if(Yt(t.path))return FN(t,e,s,n);{const r=e.get(ys());s==null&&r!=null&&(s=n2(r,ys()));let o=[];const i=Zt(t.path),c=t.operationForChild(i),u=e.children.get(i);if(u&&c){const d=s?s.getImmediateChild(i):null,m=$N(n,i);o=o.concat(ON(c,u,d,m))}return r&&(o=o.concat(s2(r,t,n,s))),o}}function FN(t,e,s,n){const r=e.get(ys());s==null&&r!=null&&(s=n2(r,ys()));let o=[];return e.children.inorderTraversal((i,c)=>{const u=s?s.getImmediateChild(i):null,d=$N(n,i),m=t.operationForChild(i);m&&(o=o.concat(FN(m,c,u,d)))}),r&&(o=o.concat(s2(r,t,n,s))),o}function UN(t,e){return t.tagToQueryMap.get(e)}function qN(t){const e=t.indexOf("$");return ct(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ds(t.substr(0,e))}}function BN(t,e,s){const n=t.syncPointTree_.get(e);ct(n,"Missing sync point for query tag that we're tracking");const r=AN(t.pendingWriteTree_,e);return s2(n,s,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.node_=e}getImmediateChild(e){const s=this.node_.getImmediateChild(e);return new r2(s)}node(){return this.node_}}class o2{constructor(e,s){this.syncTree_=e,this.path_=s}getImmediateChild(e){const s=Pn(this.path_,e);return new o2(this.syncTree_,s)}node(){return NN(this.syncTree_,this.path_)}}const Sje=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tI=function(t,e,s){if(!t||typeof t!="object")return t;if(ct(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Tje(t[".sv"],e,s);if(typeof t[".sv"]=="object")return Aje(t[".sv"],e);ct(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Tje=function(t,e,s){switch(t){case"timestamp":return s.timestamp;default:ct(!1,"Unexpected server value: "+t)}},Aje=function(t,e,s){t.hasOwnProperty("increment")||ct(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&ct(!1,"Unexpected increment value: "+n);const r=e.node();if(ct(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const i=r.getValue();return typeof i!="number"?n:i+n},Ije=function(t,e,s,n){return i2(e,new o2(s,t),n)},Pje=function(t,e,s){return i2(t,new r2(e),s)};function i2(t,e,s){const n=t.getPriority().val(),r=tI(n,e.getImmediateChild(".priority"),s);let o;if(t.isLeafNode()){const i=t,c=tI(i.getValue(),e,s);return c!==i.getValue()||r!==i.getPriority().val()?new En(c,er(r)):t}else{const i=t;return o=i,r!==i.getPriority().val()&&(o=o.updatePriority(new En(r))),i.forEachChild(rr,(c,u)=>{const d=i2(u,e.getImmediateChild(c),s);d!==u&&(o=o.updateImmediateChild(c,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e="",s=null,n={children:{},childCount:0}){this.name=e,this.parent=s,this.node=n}}function l2(t,e){let s=e instanceof Ds?e:new Ds(e),n=t,r=Zt(s);for(;r!==null;){const o=au(n.node.children,r)||{children:{},childCount:0};n=new a2(r,n,o),s=Rs(s),r=Zt(s)}return n}function ju(t){return t.node.value}function VN(t,e){t.node.value=e,x1(t)}function HN(t){return t.node.childCount>0}function Mje(t){return ju(t)===void 0&&!HN(t)}function Xv(t,e){oo(t.node.children,(s,n)=>{e(new a2(s,t,n))})}function GN(t,e,s,n){s&&e(t),Xv(t,r=>{GN(r,e,!0)})}function $je(t,e,s){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Of(t){return new Ds(t.parent===null?t.name:Of(t.parent)+"/"+t.name)}function x1(t){t.parent!==null&&Rje(t.parent,t.name,t)}function Rje(t,e,s){const n=Mje(s),r=To(t.node.children,e);n&&r?(delete t.node.children[e],t.node.childCount--,x1(t)):!n&&!r&&(t.node.children[e]=s.node,t.node.childCount++,x1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lje=/[\[\].#$\/\u0000-\u001F\u007F]/,Dje=/[\[\].#$\u0000-\u001F\u007F]/,Ly=10*1024*1024,jN=function(t){return typeof t=="string"&&t.length!==0&&!Lje.test(t)},Nje=function(t){return typeof t=="string"&&t.length!==0&&!Dje.test(t)},Oje=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nje(t)},WN=function(t,e,s){const n=s instanceof Ds?new gGe(s,t):s;if(e===void 0)throw new Error(t+"contains undefined "+cl(n));if(typeof e=="function")throw new Error(t+"contains a function "+cl(n)+" with contents = "+e.toString());if(jD(e))throw new Error(t+"contains "+e.toString()+" "+cl(n));if(typeof e=="string"&&e.length>Ly/3&&Z0(e)>Ly)throw new Error(t+"contains a string greater than "+Ly+" utf8 bytes "+cl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(oo(e,(i,c)=>{if(i===".value")r=!0;else if(i!==".priority"&&i!==".sv"&&(o=!0,!jN(i)))throw new Error(t+" contains an invalid key ("+i+") "+cl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vGe(n,i),WN(t,c,n),bGe(n)}),r&&o)throw new Error(t+' contains ".value" child '+cl(n)+" in addition to actual children.")}},Fje=function(t,e){const s=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!Oje(s))throw new Error(OB(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uje{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qje(t,e){let s=null;for(let n=0;n<e.length;n++){const r=e[n],o=r.getPath();s!==null&&!pN(o,s.path)&&(t.eventLists_.push(s),s=null),s===null&&(s={events:[],path:o}),s.events.push(r)}s&&t.eventLists_.push(s)}function oc(t,e,s){qje(t,s),Bje(t,n=>bo(n,e)||bo(e,n))}function Bje(t,e){t.recursionDepth_++;let s=!0;for(let n=0;n<t.eventLists_.length;n++){const r=t.eventLists_[n];if(r){const o=r.path;e(o)?(Vje(t.eventLists_[n]),t.eventLists_[n]=null):s=!1}}s&&(t.eventLists_=[]),t.recursionDepth_--}function Vje(t){for(let e=0;e<t.events.length;e++){const s=t.events[e];if(s!==null){t.events[e]=null;const n=s.getEventRunner();fm&&Zn("event: "+s.toString()),Df(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hje="repo_interrupt",Gje=25;class jje{constructor(e,s,n,r){this.repoInfo_=e,this.forceRestClient_=s,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uje,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=x0(),this.transactionQueueTree_=new a2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wje(t,e,s){if(t.stats_=Qw(t.repoInfo_),t.forceRestClient_||qHe())t.server_=new _0(t.repoInfo_,(n,r,o,i)=>{sI(t,n,r,o,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nI(t,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Fn(s)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Ei(t.repoInfo_,e,(n,r,o,i)=>{sI(t,n,r,o,i)},n=>{nI(t,n)},n=>{Qje(t,n)},t.authTokenProvider_,t.appCheckProvider_,s),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=WHe(t.repoInfo_,()=>new jGe(t.stats_,t.server_)),t.infoData_=new qGe,t.infoSyncTree_=new eI({startListening:(n,r,o,i)=>{let c=[];const u=t.infoData_.getNode(n._path);return u.isEmpty()||(c=Kv(t.infoSyncTree_,n._path,u),setTimeout(()=>{i("ok")},0)),c},stopListening:()=>{}}),c2(t,"connected",!1),t.serverSyncTree_=new eI({startListening:(n,r,o,i)=>(t.server_.listen(n,o,r,(c,u)=>{const d=i(c,u);oc(t.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{t.server_.unlisten(n,r)}})}function zje(t){const s=t.infoData_.getNode(new Ds(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function zN(t){return Sje({timestamp:zje(t)})}function sI(t,e,s,n,r){t.dataUpdateCount++;const o=new Ds(e);s=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,s):s;let i=[];if(r)if(n){const u=Oh(s,d=>er(d));i=Cje(t.serverSyncTree_,o,u,r)}else{const u=er(s);i=Eje(t.serverSyncTree_,o,u,r)}else if(n){const u=Oh(s,d=>er(d));i=wje(t.serverSyncTree_,o,u)}else{const u=er(s);i=Kv(t.serverSyncTree_,o,u)}let c=o;i.length>0&&(c=d2(t,o)),oc(t.eventQueue_,c,i)}function nI(t,e){c2(t,"connected",e),e===!1&&Yje(t)}function Qje(t,e){oo(e,(s,n)=>{c2(t,s,n)})}function c2(t,e,s){const n=new Ds("/.info/"+e),r=er(s);t.infoData_.updateSnapshot(n,r);const o=Kv(t.infoSyncTree_,n,r);oc(t.eventQueue_,n,o)}function Kje(t){return t.nextWriteId_++}function Yje(t){QN(t,"onDisconnectEvents");const e=zN(t),s=x0();p1(t.onDisconnect_,ys(),(r,o)=>{const i=Ije(r,o,t.serverSyncTree_,e);xN(s,r,i)});let n=[];p1(s,ys(),(r,o)=>{n=n.concat(Kv(t.serverSyncTree_,r,o));const i=eWe(t,r);d2(t,i)}),t.onDisconnect_=x0(),oc(t.eventQueue_,ys(),n)}function Xje(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Hje)}function QN(t,...e){let s="";t.persistentConnection_&&(s=t.persistentConnection_.id+":"),Zn(s,...e)}function KN(t,e,s){return NN(t.serverSyncTree_,e,s)||fs.EMPTY_NODE}function u2(t,e=t.transactionQueueTree_){if(e||Jv(t,e),ju(e)){const s=XN(t,e);ct(s.length>0,"Sending zero length transaction queue"),s.every(r=>r.status===0)&&Jje(t,Of(e),s)}else HN(e)&&Xv(e,s=>{u2(t,s)})}function Jje(t,e,s){const n=s.map(d=>d.currentWriteId),r=KN(t,e,n);let o=r;const i=r.hash();for(let d=0;d<s.length;d++){const m=s[d];ct(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const f=Zr(e,m.path);o=o.updateChild(f,m.currentOutputSnapshotRaw)}const c=o.val(!0),u=e;t.server_.put(u.toString(),c,d=>{QN(t,"transaction put response",{path:u.toString(),status:d});let m=[];if(d==="ok"){const f=[];for(let p=0;p<s.length;p++)s[p].status=2,m=m.concat(Fc(t.serverSyncTree_,s[p].currentWriteId)),s[p].onComplete&&f.push(()=>s[p].onComplete(null,!0,s[p].currentOutputSnapshotResolved)),s[p].unwatcher();Jv(t,l2(t.transactionQueueTree_,e)),u2(t,t.transactionQueueTree_),oc(t.eventQueue_,e,m);for(let p=0;p<f.length;p++)Df(f[p])}else{if(d==="datastale")for(let f=0;f<s.length;f++)s[f].status===3?s[f].status=4:s[f].status=0;else{Br("transaction at "+u.toString()+" failed: "+d);for(let f=0;f<s.length;f++)s[f].status=4,s[f].abortReason=d}d2(t,e)}},i)}function d2(t,e){const s=YN(t,e),n=Of(s),r=XN(t,s);return Zje(t,r,n),n}function Zje(t,e,s){if(e.length===0)return;const n=[];let r=[];const i=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=Zr(s,u.path);let m=!1,f;if(ct(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)m=!0,f=u.abortReason,r=r.concat(Fc(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=Gje)m=!0,f="maxretry",r=r.concat(Fc(t.serverSyncTree_,u.currentWriteId,!0));else{const p=KN(t,u.path,i);u.currentInputSnapshot=p;const g=e[c].update(p.val());if(g!==void 0){WN("transaction failed: Data returned ",g,u.path);let w=er(g);typeof g=="object"&&g!=null&&To(g,".priority")||(w=w.updatePriority(p.getPriority()));const E=u.currentWriteId,k=zN(t),A=Pje(w,p,k);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=A,u.currentWriteId=Kje(t),i.splice(i.indexOf(E),1),r=r.concat(kje(t.serverSyncTree_,u.path,A,u.currentWriteId,u.applyLocally)),r=r.concat(Fc(t.serverSyncTree_,E,!0))}else m=!0,f="nodata",r=r.concat(Fc(t.serverSyncTree_,u.currentWriteId,!0))}oc(t.eventQueue_,s,r),r=[],m&&(e[c].status=2,function(p){setTimeout(p,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(f==="nodata"?n.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):n.push(()=>e[c].onComplete(new Error(f),!1,null))))}Jv(t,t.transactionQueueTree_);for(let c=0;c<n.length;c++)Df(n[c]);u2(t,t.transactionQueueTree_)}function YN(t,e){let s,n=t.transactionQueueTree_;for(s=Zt(e);s!==null&&ju(n)===void 0;)n=l2(n,s),e=Rs(e),s=Zt(e);return n}function XN(t,e){const s=[];return JN(t,e,s),s.sort((n,r)=>n.order-r.order),s}function JN(t,e,s){const n=ju(e);if(n)for(let r=0;r<n.length;r++)s.push(n[r]);Xv(e,r=>{JN(t,r,s)})}function Jv(t,e){const s=ju(e);if(s){let n=0;for(let r=0;r<s.length;r++)s[r].status!==2&&(s[n]=s[r],n++);s.length=n,VN(e,s.length>0?s:void 0)}Xv(e,n=>{Jv(t,n)})}function eWe(t,e){const s=Of(YN(t,e)),n=l2(t.transactionQueueTree_,e);return $je(n,r=>{Dy(t,r)}),Dy(t,n),GN(n,r=>{Dy(t,r)}),s}function Dy(t,e){const s=ju(e);if(s){const n=[];let r=[],o=-1;for(let i=0;i<s.length;i++)s[i].status===3||(s[i].status===1?(ct(o===i-1,"All SENT items should be at beginning of queue."),o=i,s[i].status=3,s[i].abortReason="set"):(ct(s[i].status===0,"Unexpected transaction status in abort"),s[i].unwatcher(),r=r.concat(Fc(t.serverSyncTree_,s[i].currentWriteId,!0)),s[i].onComplete&&n.push(s[i].onComplete.bind(null,new Error("set"),!1,null))));o===-1?VN(e,void 0):s.length=o+1,oc(t.eventQueue_,Of(e),r);for(let i=0;i<n.length;i++)Df(n[i])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tWe(t){let e="";const s=t.split("/");for(let n=0;n<s.length;n++)if(s[n].length>0){let r=s[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function sWe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const s of t.split("&")){if(s.length===0)continue;const n=s.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Br(`Invalid query segment '${s}' in query '${t}'`)}return e}const rI=function(t,e){const s=nWe(t),n=s.namespace;s.domain==="firebase.com"&&Bl(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&s.domain!=="localhost"&&Bl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||$He();const r=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new HHe(s.host,s.secure,n,r,e,"",n!==s.subdomain),path:new Ds(s.pathString)}},nWe=function(t){let e="",s="",n="",r="",o="",i=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let m=t.indexOf("/");m===-1&&(m=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(m,f)),m<f&&(r=tWe(t.substring(m,f)));const p=sWe(t.substring(Math.min(t.length,f)));d=e.indexOf(":"),d>=0?(i=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const g=e.slice(0,d);if(g.toLowerCase()==="localhost")s="localhost";else if(g.split(".").length<=2)s=g;else{const w=e.indexOf(".");n=e.substring(0,w).toLowerCase(),s=e.substring(w+1),o=n}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:s,subdomain:n,secure:i,scheme:c,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,s,n,r){this._repo=e,this._path=s,this._queryParams=n,this._orderByCalled=r}get key(){return Yt(this._path)?null:dN(this._path)}get ref(){return new Wu(this._repo,this._path)}get _queryIdentifier(){const e=H5(this._queryParams),s=Ww(e);return s==="{}"?"default":s}get _queryObject(){return H5(this._queryParams)}isEqual(e){if(e=Ft(e),!(e instanceof m2))return!1;const s=this._repo===e._repo,n=pN(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return s&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+hGe(this._path)}}class Wu extends m2{constructor(e,s){super(e,s,new Jw,!1)}get parent(){const e=fN(this._path);return e===null?null:new Wu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}_je(Wu);xje(Wu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rWe="FIREBASE_DATABASE_EMULATOR_HOST",k1={};let oWe=!1;function iWe(t,e,s,n,r){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||Bl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let i=rI(o,r),c=i.repoInfo,u;typeof process<"u"&&E5&&(u=E5[rWe]),u?(o=`http://${u}?ns=${c.namespace}`,i=rI(o,r),c=i.repoInfo):i.repoInfo.secure;const d=new VHe(t.name,t.options,e);Fje("Invalid Firebase Database URL",i),Yt(i.path)||Bl("Database URL must point to the root of a Firebase Database (not including a child path).");const m=lWe(c,t,d,new BHe(t,s));return new cWe(m,t)}function aWe(t,e){const s=k1[e];(!s||s[t.key]!==t)&&Bl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Xje(t),delete s[t.key]}function lWe(t,e,s,n){let r=k1[e.name];r||(r={},k1[e.name]=r);let o=r[t.toURLString()];return o&&Bl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new jje(t,oWe,s,n),r[t.toURLString()]=o,o}class cWe{constructor(e,s){this._repoInternal=e,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Wje(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wu(this._repo,ys())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aWe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Bl("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uWe(t){SHe(si),qn(new Ln("database",(e,{instanceIdentifier:s})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return iWe(n,r,o,s)},"PUBLIC").setMultipleInstances(!0)),qs(C5,S5,t),qs(C5,S5,"esm2017")}Ei.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ei.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};uWe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="firebasestorage.googleapis.com",dWe="storageBucket",mWe=2*60*1e3,fWe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Mn{constructor(e,s,n=0){super(Ny(e),`Firebase Storage: ${s} (${Ny(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ni.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ti;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ti||(ti={}));function Ny(t){return"storage/"+t}function pWe(){const t="An unknown error occurred, please check the error payload for server response.";return new ni(ti.UNKNOWN,t)}function hWe(){return new ni(ti.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gWe(){return new ni(ti.CANCELED,"User canceled the upload/download.")}function vWe(t){return new ni(ti.INVALID_URL,"Invalid URL '"+t+"'.")}function bWe(t){return new ni(ti.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oI(t){return new ni(ti.INVALID_ARGUMENT,t)}function e6(){return new ni(ti.APP_DELETED,"The Firebase app was deleted.")}function yWe(t){return new ni(ti.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=yo.makeFromUrl(e,s)}catch{return new yo(e,"")}if(n.path==="")return n;throw bWe(e)}static makeFromUrl(e,s){let n=null;const r="([A-Za-z0-9.\\-_]+)";function o(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const i="(/(.*))?$",c=new RegExp("^gs://"+r+i,"i"),u={bucket:1,path:3};function d(T){T.path_=decodeURIComponent(T.path)}const m="v[A-Za-z0-9_]+",f=s.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${m}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},C=s===ZN?"(?:storage.googleapis.com|storage.cloud.google.com)":s,E="([^?#]*)",k=new RegExp(`^https?://${C}/${r}/${E}`,"i"),S=[{regex:c,indices:u,postModify:o},{regex:g,indices:w,postModify:d},{regex:k,indices:{bucket:1,path:2},postModify:d}];for(let T=0;T<S.length;T++){const R=S[T],L=R.regex.exec(e);if(L){const P=L[R.indices.bucket];let I=L[R.indices.path];I||(I=""),n=new yo(P,I),R.postModify(n);break}}if(n==null)throw vWe(e);return n}}class _We{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xWe(t,e,s){let n=1,r=null,o=null,i=!1,c=0;function u(){return c===2}let d=!1;function m(...E){d||(d=!0,e.apply(null,E))}function f(E){r=setTimeout(()=>{r=null,t(g,u())},E)}function p(){o&&clearTimeout(o)}function g(E,...k){if(d){p();return}if(E){p(),m.call(null,E,...k);return}if(u()||i){p(),m.call(null,E,...k);return}n<64&&(n*=2);let S;c===1?(c=2,S=0):S=(n+Math.random())*1e3,f(S)}let w=!1;function C(E){w||(w=!0,p(),!d&&(r!==null?(E||(c=2),clearTimeout(r),f(0)):E||(c=1)))}return f(0),o=setTimeout(()=>{i=!0,C(!0)},s),C}function kWe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wWe(t){return t!==void 0}function iI(t,e,s,n){if(n<e)throw oI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw oI(`Invalid value for '${t}'. Expected ${s} or less.`)}function EWe(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const r=e(n)+"="+e(t[n]);s=s+r+"&"}return s=s.slice(0,-1),s}var C0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(C0||(C0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CWe(t,e){const s=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return s||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SWe{constructor(e,s,n,r,o,i,c,u,d,m,f,p=!0){this.url_=e,this.method_=s,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,w)=>{this.resolve_=g,this.reject_=w,this.start_()})}start_(){const e=(n,r)=>{if(r){n(!1,new Xp(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const i=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&o.addUploadProgressListener(i),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(i),this.pendingConnection_=null;const c=o.getErrorCode()===C0.NO_ERROR,u=o.getStatus();if(!c||CWe(u,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===C0.ABORT;n(!1,new Xp(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new Xp(d,o))})},s=(n,r)=>{const o=this.resolve_,i=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());wWe(u)?o(u):o()}catch(u){i(u)}else if(c!==null){const u=pWe();u.serverResponse=c.getErrorText(),this.errorCallback_?i(this.errorCallback_(c,u)):i(u)}else if(r.canceled){const u=this.appDelete_?e6():gWe();i(u)}else{const u=hWe();i(u)}};this.canceled_?s(!1,new Xp(!1,null,!0)):this.backoffId_=xWe(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kWe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xp{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function TWe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AWe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IWe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PWe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MWe(t,e,s,n,r,o,i=!0){const c=EWe(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return IWe(d,e),TWe(d,s),AWe(d,o),PWe(d,n),new SWe(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $We(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RWe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,s){this._service=e,s instanceof yo?this._location=s:this._location=yo.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new S0(e,s)}get root(){const e=new yo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RWe(this._location.path)}get storage(){return this._service}get parent(){const e=$We(this._location.path);if(e===null)return null;const s=new yo(this._location.bucket,e);return new S0(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw yWe(e)}}function aI(t,e){const s=e==null?void 0:e[dWe];return s==null?null:yo.makeFromBucketSpec(s,t)}class LWe{constructor(e,s,n,r,o){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=ZN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mWe,this._maxUploadRetryTime=fWe,this._requests=new Set,r!=null?this._bucket=yo.makeFromBucketSpec(r,this._host):this._bucket=aI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yo.makeFromBucketSpec(this._url,e):this._bucket=aI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(As(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new S0(this,e)}_makeRequest(e,s,n,r,o=!0){if(this._deleted)return new _We(e6());{const i=MWe(e,this._appId,n,r,s,this._firebaseVersion,o);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,s){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,r).getPromise()}}const lI="@firebase/storage",cI="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DWe="storage";function NWe(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new LWe(s,n,r,e,si)}function OWe(){qn(new Ln(DWe,NWe,"PUBLIC").setMultipleInstances(!0)),qs(lI,cI,""),qs(lI,cI,"esm2017")}OWe();function FWe(t){return qWe({initialUser:t,dependencies:{popupRedirectResolver:C4,persistence:[mu,ig,Sa]}})}const UWe=Symbol("VueFireAuth");function qWe({dependencies:t,initialUser:e}){return(s,n)=>{const[r,o]=BWe(s,n,e,t);kHe(r,o)}}function BWe(t,e,s,n,r=XV(t,n)){const o=BD(t,e).run(()=>Y(s));return _He.set(t,o),e.provide(UWe,r),[o,r]}function VWe(t,{firebaseApp:e,modules:s=[]}){t.provide(qD,e);for(const n of s)n(e,t)}const Ff=YF(IVe),HWe=s8();Ff.use(HWe);Ff.use(a1);const{hasConsent:uI}=Ow();Ff.use(b7e,{property:{id:"G-B1PSTMRJMF"},isEnabled:uI(),useDebugger:!1,disableScriptLoad:!uI()});Ff.use(VWe,{firebaseApp:iL,modules:[FWe(),EHe({provider:new jw("6LfroToqAAAAAH2RIF8r15JUw3fucTbgxQlR1_kC"),debug:!1,isTokenAutoRefreshEnabled:!0})]});Ff.mount("#app");const w1=Tr(),dI=w1.loadGame();dI&&console.log("Loaded game with offline progress:",dI);const t6=()=>{w1.shouldPauseSaving?(console.log("Delaying auto-save start until modals are closed"),setTimeout(t6,1e3)):(console.log("Starting auto-save"),w1.startAutoSave())};t6();
